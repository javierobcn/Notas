{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"","title":"Bienvenido"},{"location":"blog/2008/12/30/Google%20trasladar%C3%A1%20a%20mar%20abierto%20sus%20centros%20de%20datos/","text":"Adem\u00e1s no pagar\u00e1n impuestos ya que estar\u00e1n a unos 15 km de las costas\u2026 increible te dejo el enlace a la noticia completa http://www.abc.es/20080916/economia-tecnologia/google-pretende-trasladar-barcos-200809161759.html","title":"[30/12/2008] Google trasladar\u00e1 a mar abierto sus centros de datos"},{"location":"blog/2009/10/26/Microsoft%20se%20acerca%20al%20Open%20Source/","text":"Microsoft est\u00e1 realizando un importante esfuerzo por acercarse a las comunidades de usuarios de software de c\u00f3digo abierto. Como miembros de la comunidad Tododnn.es dedicada al CMS DotNetNuke, que es de c\u00f3digo abierto, nos han comunicado la creaci\u00f3n de numerosos recursos al respecto. El punto de entrada para todas estas Novedades que Microsoft nos anunci\u00f3 es http://www.microsoft.com/youshapeit/es/es/msdn/Home/2009-03/ Desde ah\u00ed podr\u00e1s acceder a numerosos sitios web dedicados a desarrolladores de todo tipo (Php, Java\u2026), podr\u00e1s consultar ayudas que microsoft ofrece a emprendedores y desarrolladores etc\u2026 Algo que no conocia y que te puede resultar interesante es el Microsoft Action Pack, por muy poco dinero y un sencillo examen puedes tener acceso a todas las herramientas de Microsoft de forma regular y actualizada\u2026 yo no lo conoc\u00eda y si tu tampoco has oido hablar de MAPS ves ahora mismo a la direcci\u00f3n anterior e informate.","title":"[26/10/2009] Microsoft se acerca al Open Source"},{"location":"blog/2010/5/11/Certificado%20Microsoft%20en%20SQL%20Server%202008/","text":"Certificado Microsoft en SQL Server 2008 \u00b6 Despu\u00e9s de unos meses de formaci\u00f3n intensiva, por fin aprob\u00e9 el examen de certificaci\u00f3n \u201c70-432 Microsoft SQL Server Implementation and Maintenance\u201d. El curso ha sido muy interesante y me ha permitido conocer en profundidad los aspectos m\u00e1s avanzados de SQL Server como configuraci\u00f3n en \u201cCluster\u201d, topolog\u00edas de replicaci\u00f3n y configuraci\u00f3n de auditor\u00edas de seguridad, entre otros aspectos. El examen se aprobaba con 700 puntos y saqu\u00e9 920 o sea que no puedo estar m\u00e1s contento.","title":"[11/05/2010] Certificado Microsoft en SQL Server 2008"},{"location":"blog/2010/5/11/Certificado%20Microsoft%20en%20SQL%20Server%202008/#certificado-microsoft-en-sql-server-2008","text":"Despu\u00e9s de unos meses de formaci\u00f3n intensiva, por fin aprob\u00e9 el examen de certificaci\u00f3n \u201c70-432 Microsoft SQL Server Implementation and Maintenance\u201d. El curso ha sido muy interesante y me ha permitido conocer en profundidad los aspectos m\u00e1s avanzados de SQL Server como configuraci\u00f3n en \u201cCluster\u201d, topolog\u00edas de replicaci\u00f3n y configuraci\u00f3n de auditor\u00edas de seguridad, entre otros aspectos. El examen se aprobaba con 700 puntos y saqu\u00e9 920 o sea que no puedo estar m\u00e1s contento.","title":"Certificado Microsoft en SQL Server 2008"},{"location":"blog/2013/1/15/Aaron%20Swartz%2C%20conciencia%20c%C3%ADvica%20y%20activismo/","text":"Aaron Swartz, conciencia c\u00edvica y activismo. \u00b6 El pasado s\u00e1bado nos topamos con una triste noticia, Aaron Swartz, un conocido y respetado activista de Internet fue hallado muerto en su apartamento de Nueva York, al parecer, se suicid\u00f3. Con 26 a\u00f1os, Aaron Swartz, ha contribuido enormemente a construir el Internet que, a d\u00eda de hoy, todos disfrutamos y, a modo de legado, nos deja sus contribuciones a la definici\u00f3n de RSS, el agregador de noticias reddit.com, el framework web.py, la especificaci\u00f3n Markdown\u2026entre otras\u2026 Fue fundador de http://demandprogress.org/ desde donde se lanz\u00f3 la campa\u00f1a en contra de los proyectos de ley de censura de Internet (SOPA / PIPA) y ahora cuenta con m\u00e1s de un mill\u00f3n de miembros. Fue arrestado, por el gobierno de EEUU, acusado de haber accedido ilegalmente al contenido de un archivo acad\u00e9mico online (JSTOR http://www.jstor.org/ ) y haberse descargado m\u00e1s de cuatro millones de documentos. El caso segu\u00eda en proceso y se enfrentaba, por los distintos cargos, a cuantiosas penas econ\u00f3micas e, incluso, a varios a\u00f1os de prisi\u00f3n. Era frecuente comentarista de televisi\u00f3n y autor de numerosos art\u00edculos sobre diversos temas, en particular sobre la influencia corruptora del dinero en instituciones como organizaciones no lucrativas, medios de comunicaci\u00f3n, pol\u00edtica y opini\u00f3n p\u00fablica. A partir de 2010-11, se dedic\u00f3 a investigar estos temas como becario en el Centro de \u00c9tica de la Universidad de Harvard Lab sobre la corrupci\u00f3n institucional. Tambi\u00e9n form\u00f3 parte de la junta directiva de Change Congress. Trabajando con el inventor de la Web, Sir Tim Berners-Lee, en el MIT, ayud\u00f3 a desarrollar y popularizar las normas para el intercambio de datos en la Web. \u00c9l tambi\u00e9n fue co-autor de la especificaci\u00f3n RSS 1.0, ahora ampliamente utilizada para la distribuci\u00f3n o \u00absindicaci\u00f3n\u00bb de noticias. En 2007, dirigi\u00f3 el desarrollo de la Biblioteca Abierta sin fines de lucro, un ambicioso proyecto para recopilar informaci\u00f3n sobre cada libro que se haya publicado. Tambi\u00e9n co-fund\u00f3 el sitio de noticias en l\u00ednea Reddit, donde lanz\u00f3 como software libre el framework web que desarroll\u00f3, web.py. Sin duda una noticia triste, de la que hoy se hac\u00edan hecho eco medios de informaci\u00f3n, personajes relevantes de todos los \u00e1mbitos acad\u00e9micos y entusiastas inform\u00e1ticos de todo el mundo. Fuentes y mas informaci\u00f3n: \u00b6 http://www.elmundo.es/elmundo/2013/01/12/navegante/1358023351.html http://alt1040.com/2013/01/aaron-swartz-open-data-investigacion http://www.aaronsw.com/ https://github.com/aaronsw?tab=repositories","title":"[15/01/2013] Aaron Swartz, conciencia c\u00edvica y activismo."},{"location":"blog/2013/1/15/Aaron%20Swartz%2C%20conciencia%20c%C3%ADvica%20y%20activismo/#aaron-swartz-conciencia-civica-y-activismo","text":"El pasado s\u00e1bado nos topamos con una triste noticia, Aaron Swartz, un conocido y respetado activista de Internet fue hallado muerto en su apartamento de Nueva York, al parecer, se suicid\u00f3. Con 26 a\u00f1os, Aaron Swartz, ha contribuido enormemente a construir el Internet que, a d\u00eda de hoy, todos disfrutamos y, a modo de legado, nos deja sus contribuciones a la definici\u00f3n de RSS, el agregador de noticias reddit.com, el framework web.py, la especificaci\u00f3n Markdown\u2026entre otras\u2026 Fue fundador de http://demandprogress.org/ desde donde se lanz\u00f3 la campa\u00f1a en contra de los proyectos de ley de censura de Internet (SOPA / PIPA) y ahora cuenta con m\u00e1s de un mill\u00f3n de miembros. Fue arrestado, por el gobierno de EEUU, acusado de haber accedido ilegalmente al contenido de un archivo acad\u00e9mico online (JSTOR http://www.jstor.org/ ) y haberse descargado m\u00e1s de cuatro millones de documentos. El caso segu\u00eda en proceso y se enfrentaba, por los distintos cargos, a cuantiosas penas econ\u00f3micas e, incluso, a varios a\u00f1os de prisi\u00f3n. Era frecuente comentarista de televisi\u00f3n y autor de numerosos art\u00edculos sobre diversos temas, en particular sobre la influencia corruptora del dinero en instituciones como organizaciones no lucrativas, medios de comunicaci\u00f3n, pol\u00edtica y opini\u00f3n p\u00fablica. A partir de 2010-11, se dedic\u00f3 a investigar estos temas como becario en el Centro de \u00c9tica de la Universidad de Harvard Lab sobre la corrupci\u00f3n institucional. Tambi\u00e9n form\u00f3 parte de la junta directiva de Change Congress. Trabajando con el inventor de la Web, Sir Tim Berners-Lee, en el MIT, ayud\u00f3 a desarrollar y popularizar las normas para el intercambio de datos en la Web. \u00c9l tambi\u00e9n fue co-autor de la especificaci\u00f3n RSS 1.0, ahora ampliamente utilizada para la distribuci\u00f3n o \u00absindicaci\u00f3n\u00bb de noticias. En 2007, dirigi\u00f3 el desarrollo de la Biblioteca Abierta sin fines de lucro, un ambicioso proyecto para recopilar informaci\u00f3n sobre cada libro que se haya publicado. Tambi\u00e9n co-fund\u00f3 el sitio de noticias en l\u00ednea Reddit, donde lanz\u00f3 como software libre el framework web que desarroll\u00f3, web.py. Sin duda una noticia triste, de la que hoy se hac\u00edan hecho eco medios de informaci\u00f3n, personajes relevantes de todos los \u00e1mbitos acad\u00e9micos y entusiastas inform\u00e1ticos de todo el mundo.","title":"Aaron Swartz, conciencia c\u00edvica y activismo."},{"location":"blog/2013/1/15/Aaron%20Swartz%2C%20conciencia%20c%C3%ADvica%20y%20activismo/#fuentes-y-mas-informacion","text":"http://www.elmundo.es/elmundo/2013/01/12/navegante/1358023351.html http://alt1040.com/2013/01/aaron-swartz-open-data-investigacion http://www.aaronsw.com/ https://github.com/aaronsw?tab=repositories","title":"Fuentes y mas informaci\u00f3n:"},{"location":"blog/2013/1/16/Richard%20Stallman%2C%20DuckDuckGo%20y%20otras%20cosas/","text":"Richard Stallman, DuckDuckGo y otras cosas\u2026 \u00b6 Hoy he llegado a este sitio web donde Richard Stallman, programador y fundador del movimiento por el software libre, explica como usa los ordenadores en su dia a dia. Entre otros temas muy interesantes, acerca de los buscadores que usa, dice: \u00abA veces uso Google, y a veces uso DuckDuckGo. Cuando uso un buscador, siempre lo hago desde una m\u00e1quina que no es la mia y que otras personas tambien usan. Por supuesto nunca me identifico a mi mismo\u00bb. Visitando el buscador DuckDuckGo y al consultar su pol\u00edtica de privacidad, te explican unas cosas acerca de Google que, no por obvias, al verlas as\u00ed todas juntas resultan un poco preocupantes. En DuckDuckGo han creado un par de sitios para dar a conocer sus virtudes y los defectos de la competencia, o sea Google. donttrack.us \u00b6 En este sitio DuckDuckGo explica como al realizar una b\u00fasqueda en Google de por ej. la palabra \u00abHerpes\u00bb y al asociar nuestro usuario a un identificador digital del navegador, se consiguen crear perfiles para que los anuncios que nos aparecen sean de pomadas para \u00abHerpes\u00bb \ud83d\ude42 dontbubble.us \u00b6 En este sitio DuckDuckGo explica como vivimos en una burbuja de informaci\u00f3n que fomenta nuestros propios temas de inter\u00e9s y nos aisla de cualquier novedad o contenido nuevo. Es muy interesante observar como al buscar ciertos t\u00e9rminos en Google, aparecen las noticias de nuestros medios de comunicacion preferidos, en realidad, seg\u00fan DuckDuckGo es una forma de impedirnos el acceso a nuevos contenidos y aislarnos de conocimientos nuevos. DuckDuckGo afirma en su pol\u00edtica que no realiza seguimientos de las b\u00fasquedas de los usuarios y que los resultados que muestra, siempre son los mismos, para todos los usuarios. Sin duda, un buscador a tener en cuenta. \u00bfHas probado a buscar algo? \u00bfQu\u00e9 te parecen los resultados? \u00bfson distintos a los que encuentras en Google? Fuentes \u00b6 http://www.stallman.org/stallman-computing.html http://www.duckduckgo.com http://donttrack.us/ http://dontbubble.us/ http://googleblog.blogspot.com.es/2009/12/personalized-search-for-everyone.html","title":"[16/01/2013] Richard Stallman, DuckDuckGo y otras cosas"},{"location":"blog/2013/1/16/Richard%20Stallman%2C%20DuckDuckGo%20y%20otras%20cosas/#richard-stallman-duckduckgo-y-otras-cosas","text":"Hoy he llegado a este sitio web donde Richard Stallman, programador y fundador del movimiento por el software libre, explica como usa los ordenadores en su dia a dia. Entre otros temas muy interesantes, acerca de los buscadores que usa, dice: \u00abA veces uso Google, y a veces uso DuckDuckGo. Cuando uso un buscador, siempre lo hago desde una m\u00e1quina que no es la mia y que otras personas tambien usan. Por supuesto nunca me identifico a mi mismo\u00bb. Visitando el buscador DuckDuckGo y al consultar su pol\u00edtica de privacidad, te explican unas cosas acerca de Google que, no por obvias, al verlas as\u00ed todas juntas resultan un poco preocupantes. En DuckDuckGo han creado un par de sitios para dar a conocer sus virtudes y los defectos de la competencia, o sea Google.","title":"Richard Stallman, DuckDuckGo y otras cosas\u2026"},{"location":"blog/2013/1/16/Richard%20Stallman%2C%20DuckDuckGo%20y%20otras%20cosas/#donttrackus","text":"En este sitio DuckDuckGo explica como al realizar una b\u00fasqueda en Google de por ej. la palabra \u00abHerpes\u00bb y al asociar nuestro usuario a un identificador digital del navegador, se consiguen crear perfiles para que los anuncios que nos aparecen sean de pomadas para \u00abHerpes\u00bb \ud83d\ude42","title":"donttrack.us"},{"location":"blog/2013/1/16/Richard%20Stallman%2C%20DuckDuckGo%20y%20otras%20cosas/#dontbubbleus","text":"En este sitio DuckDuckGo explica como vivimos en una burbuja de informaci\u00f3n que fomenta nuestros propios temas de inter\u00e9s y nos aisla de cualquier novedad o contenido nuevo. Es muy interesante observar como al buscar ciertos t\u00e9rminos en Google, aparecen las noticias de nuestros medios de comunicacion preferidos, en realidad, seg\u00fan DuckDuckGo es una forma de impedirnos el acceso a nuevos contenidos y aislarnos de conocimientos nuevos. DuckDuckGo afirma en su pol\u00edtica que no realiza seguimientos de las b\u00fasquedas de los usuarios y que los resultados que muestra, siempre son los mismos, para todos los usuarios. Sin duda, un buscador a tener en cuenta. \u00bfHas probado a buscar algo? \u00bfQu\u00e9 te parecen los resultados? \u00bfson distintos a los que encuentras en Google?","title":"dontbubble.us"},{"location":"blog/2013/1/16/Richard%20Stallman%2C%20DuckDuckGo%20y%20otras%20cosas/#fuentes","text":"http://www.stallman.org/stallman-computing.html http://www.duckduckgo.com http://donttrack.us/ http://dontbubble.us/ http://googleblog.blogspot.com.es/2009/12/personalized-search-for-everyone.html","title":"Fuentes"},{"location":"consultoria/Empresas/","text":"Empresas, asociaciones y aut\u00f3nomos \u00b6 Odoo \u00b6 NextCloud \u00b6 javier@cloud.javieranto.com","title":"Empresas, asociaciones y aut\u00f3nomos"},{"location":"consultoria/Empresas/#empresas-asociaciones-y-autonomos","text":"","title":"Empresas, asociaciones y aut\u00f3nomos"},{"location":"consultoria/Empresas/#odoo","text":"","title":"Odoo"},{"location":"consultoria/Empresas/#nextcloud","text":"javier@cloud.javieranto.com","title":"NextCloud"},{"location":"consultoria/Internet/","text":"Consultor\u00eda Internet \u00b6 Tanto si eres un profesional que busca delegar la parte m\u00e1s t\u00e9cnica del alojamiento web en una infraestructura s\u00f3lida y probada, como si eres un particular que busca alojar la p\u00e1gina web de un proyecto sin invertir demasiado dinero, puedo ayudarte a escoger la soluci\u00f3n mas apropiada. Sitios web \u00b6 Existen multitud de herramientas con las que crear tu sitio web, se trata de escoger la mas adecuada, aquella que simplifique tus procesos y con la que puedas crear contenido y gestionar tu sitio sin complicaciones extra. Tanto si necesitas mantener un e-commerce como un sitio de presencia corporativa, o incluso gestionar tu negocio desde tu sitio web, puedo ofrecerte formaci\u00f3n, instalaci\u00f3n y soporte t\u00e9cnico en herramientas como WordPress, MkDocs, DotNetnuke, Joomla, PrestaShop, Odoo etc... Correo electr\u00f3nico \u00b6 Registro de dominios \u00b6","title":"Consultor\u00eda Internet"},{"location":"consultoria/Internet/#consultoria-internet","text":"Tanto si eres un profesional que busca delegar la parte m\u00e1s t\u00e9cnica del alojamiento web en una infraestructura s\u00f3lida y probada, como si eres un particular que busca alojar la p\u00e1gina web de un proyecto sin invertir demasiado dinero, puedo ayudarte a escoger la soluci\u00f3n mas apropiada.","title":"Consultor\u00eda Internet"},{"location":"consultoria/Internet/#sitios-web","text":"Existen multitud de herramientas con las que crear tu sitio web, se trata de escoger la mas adecuada, aquella que simplifique tus procesos y con la que puedas crear contenido y gestionar tu sitio sin complicaciones extra. Tanto si necesitas mantener un e-commerce como un sitio de presencia corporativa, o incluso gestionar tu negocio desde tu sitio web, puedo ofrecerte formaci\u00f3n, instalaci\u00f3n y soporte t\u00e9cnico en herramientas como WordPress, MkDocs, DotNetnuke, Joomla, PrestaShop, Odoo etc...","title":"Sitios web"},{"location":"consultoria/Internet/#correo-electronico","text":"","title":"Correo electr\u00f3nico"},{"location":"consultoria/Internet/#registro-de-dominios","text":"","title":"Registro de dominios"},{"location":"consultoria/Ordenadores%20Personales/","text":"Ordenadores personales \u00b6 Asesoramiento en la compra de equipos \u00b6 Un buen asesoramiento puede ahorrarte dinero y complicaciones. A veces, viendo la variedad de equipos, de precios, de tama\u00f1os de memoria, disco duro, etc... nos podemos sentir saturados y realizar una compra sin entender bien lo que estamos adquiriendo. Puedes ahorrar dinero o destinarlo a mejorar el equipo con mi asesoramiento, yo responder\u00e9 todas tus preguntas sobre el hardware y el software que puedes necesitar. Instalaci\u00f3n de Sistema Operativo Windows o Linux \u00b6 El sistema operativo es la pieza de software mas importante de su ordenador. Asesoramiento en herramientas de trabajo para la oficina \u00b6 S Limpieza de virus y malware \u00b6 Limpieza de virus e instalaci\u00f3n de software antivirus para prevenir nuevas infecciones. Soporte t\u00e9cnico remoto \u00b6 No es necesario desplazarse.","title":"Ordenadores personales"},{"location":"consultoria/Ordenadores%20Personales/#ordenadores-personales","text":"","title":"Ordenadores personales"},{"location":"consultoria/Ordenadores%20Personales/#asesoramiento-en-la-compra-de-equipos","text":"Un buen asesoramiento puede ahorrarte dinero y complicaciones. A veces, viendo la variedad de equipos, de precios, de tama\u00f1os de memoria, disco duro, etc... nos podemos sentir saturados y realizar una compra sin entender bien lo que estamos adquiriendo. Puedes ahorrar dinero o destinarlo a mejorar el equipo con mi asesoramiento, yo responder\u00e9 todas tus preguntas sobre el hardware y el software que puedes necesitar.","title":"Asesoramiento en la compra de equipos"},{"location":"consultoria/Ordenadores%20Personales/#instalacion-de-sistema-operativo-windows-o-linux","text":"El sistema operativo es la pieza de software mas importante de su ordenador.","title":"Instalaci\u00f3n de Sistema Operativo Windows o Linux"},{"location":"consultoria/Ordenadores%20Personales/#asesoramiento-en-herramientas-de-trabajo-para-la-oficina","text":"S","title":"Asesoramiento en herramientas de trabajo para la oficina"},{"location":"consultoria/Ordenadores%20Personales/#limpieza-de-virus-y-malware","text":"Limpieza de virus e instalaci\u00f3n de software antivirus para prevenir nuevas infecciones.","title":"Limpieza de virus y malware"},{"location":"consultoria/Ordenadores%20Personales/#soporte-tecnico-remoto","text":"No es necesario desplazarse.","title":"Soporte t\u00e9cnico remoto"},{"location":"consultoria/Servidores/","text":"Servidores \u00b6 Linux \u00b6 Debian \u00b6 Ubuntu \u00b6 Centos \u00b6 Windows Server \u00b6","title":"Servidores"},{"location":"consultoria/Servidores/#servidores","text":"","title":"Servidores"},{"location":"consultoria/Servidores/#linux","text":"","title":"Linux"},{"location":"consultoria/Servidores/#debian","text":"","title":"Debian"},{"location":"consultoria/Servidores/#ubuntu","text":"","title":"Ubuntu"},{"location":"consultoria/Servidores/#centos","text":"","title":"Centos"},{"location":"consultoria/Servidores/#windows-server","text":"","title":"Windows Server"},{"location":"contacto/Nextcloud/","text":"Nextcloud \u00b6 Puedes compartir ficheros conmigo a trav\u00e9s de nextcloud","title":"Nextcloud"},{"location":"contacto/Nextcloud/#nextcloud","text":"Puedes compartir ficheros conmigo a trav\u00e9s de nextcloud","title":"Nextcloud"},{"location":"contacto/Soporte%20t%C3%A9cnico/","text":"Soporte t\u00e9cnico \u00b6","title":"Soporte t\u00e9cnico"},{"location":"contacto/Soporte%20t%C3%A9cnico/#soporte-tecnico","text":"","title":"Soporte t\u00e9cnico"},{"location":"contacto/teamviewer/","text":"Asistencia remota \u00b6","title":"Asistencia remota"},{"location":"contacto/teamviewer/#asistencia-remota","text":"","title":"Asistencia remota"},{"location":"kb/","text":"Base de conocimiento \u00b6 Notas, recetas, tutoriales y otros contenidos...","title":"Base de conocimiento"},{"location":"kb/#base-de-conocimiento","text":"Notas, recetas, tutoriales y otros contenidos...","title":"Base de conocimiento"},{"location":"kb/GNU-Linux/Cursos%20Online%20de%20linux/","text":"Cursos de linux Online \u00b6 Portal muy claro para aprender Linux b\u00e1sico: https://linuxjourney.com MOOC Introducci\u00f3n Linux: https://www.edx.org/course/introduction-linux-linuxfoundationx-lfs101x-1 Curso Introducci\u00f3n Linux CISCO: https://www.netacad.com/campaign/linux-essentials3 MOOC Introducci\u00f3n RedHat: https://www.edx.org/course/fundamentals-red-hat-enterprise-linux-red-hat-rh066x Juego Online para repasar: https://www.shortcutfoo.com/app/dojos/command-line IDEs online: https://www.tutorialspoint.com/codingground.htm ; https://ideone.com","title":"Cursos de linux Online"},{"location":"kb/GNU-Linux/Cursos%20Online%20de%20linux/#cursos-de-linux-online","text":"Portal muy claro para aprender Linux b\u00e1sico: https://linuxjourney.com MOOC Introducci\u00f3n Linux: https://www.edx.org/course/introduction-linux-linuxfoundationx-lfs101x-1 Curso Introducci\u00f3n Linux CISCO: https://www.netacad.com/campaign/linux-essentials3 MOOC Introducci\u00f3n RedHat: https://www.edx.org/course/fundamentals-red-hat-enterprise-linux-red-hat-rh066x Juego Online para repasar: https://www.shortcutfoo.com/app/dojos/command-line IDEs online: https://www.tutorialspoint.com/codingground.htm ; https://ideone.com","title":"Cursos de linux Online"},{"location":"kb/GNU-Linux/D%C3%ADa%20de%20la%20libertad%20del%20software%20en%20Barcelona/","text":"D\u00eda de la libertad del software \u00b6 El D\u00eda de la Libertad de Software se celebra el tercer s\u00e1bado de cada mes de septiembre. Ese dia, comunidades de usuarios locales de todo el mundo organizan eventos y reuniones con el objetivo de dar a conocer las virtudes, ventajas y todo lo positivo que aporta el software libre a nuestra sociedad. El objetivo es educar al p\u00fablico de todo el mundo sobre los beneficios de usar Software Libre en centros educativos, organismos p\u00fablicos, en casa, en la empresa y en definitiva en todos sitios. https://www.softwarefreedomday.org/about En Barcelona \u00b6 En Barcelona, la asociaci\u00f3n Caliu (Catalan Linux Users) organiza cada a\u00f1o un dia con actividades divulgativas. Horario y mas informaci\u00f3n \u00b6 Puedes consultar el horario de las diferentes actividades directamente desde el sitio de Caliu en http://dlp.caliu.cat","title":"D\u00eda de la libertad del software"},{"location":"kb/GNU-Linux/D%C3%ADa%20de%20la%20libertad%20del%20software%20en%20Barcelona/#dia-de-la-libertad-del-software","text":"El D\u00eda de la Libertad de Software se celebra el tercer s\u00e1bado de cada mes de septiembre. Ese dia, comunidades de usuarios locales de todo el mundo organizan eventos y reuniones con el objetivo de dar a conocer las virtudes, ventajas y todo lo positivo que aporta el software libre a nuestra sociedad. El objetivo es educar al p\u00fablico de todo el mundo sobre los beneficios de usar Software Libre en centros educativos, organismos p\u00fablicos, en casa, en la empresa y en definitiva en todos sitios. https://www.softwarefreedomday.org/about","title":"D\u00eda de la libertad del software"},{"location":"kb/GNU-Linux/D%C3%ADa%20de%20la%20libertad%20del%20software%20en%20Barcelona/#en-barcelona","text":"En Barcelona, la asociaci\u00f3n Caliu (Catalan Linux Users) organiza cada a\u00f1o un dia con actividades divulgativas.","title":"En Barcelona"},{"location":"kb/GNU-Linux/D%C3%ADa%20de%20la%20libertad%20del%20software%20en%20Barcelona/#horario-y-mas-informacion","text":"Puedes consultar el horario de las diferentes actividades directamente desde el sitio de Caliu en http://dlp.caliu.cat","title":"Horario y mas informaci\u00f3n"},{"location":"kb/GNU-Linux/Sobre%20Ubuntu/","text":"\u00bfConoces Ubuntu? \u00b6 La palabra \u201cubuntu\u201d proviene del dicho popular \u201cumuntu, nigumuntu, nagamuntu\u201d, que en idioma zul\u00fa significa \u201cuna persona es una persona a causa de los dem\u00e1s.\u201d. Ubuntu es una ideolog\u00eda sudafricana enfocada en la lealtad de las personas y las relaciones entre \u00e9stas. El Reverendo Desmond Mpilo Tutu ,cl\u00e9rigo y pacifista sudafricano, que adquiri\u00f3 fama internacional durante la d\u00e9cada de 1980 a causa de su oposici\u00f3n al Apartheid, dec\u00eda acerca de ubuntu: Una persona con ubuntu es abierta y est\u00e1 disponible para los dem\u00e1s, respalda a los dem\u00e1s, no se siente amenazado cuando otros son capaces y son buenos en algo, porque est\u00e1 seguro de s\u00ed mismo ya que sabe que pertenece a una gran totalidad, que se decrece cuando otras personas son humilladas o menospreciadas, cuando otros son torturados u oprimidos. Ubuntu tambi\u00e9n es el nombre que la compa\u00f1\u00eda Canonical ha dado a su distribuci\u00f3n Linux bajo el lema \u201cUbuntu: Linux para seres humanos\u201d. Mark Shuttleworth, de origen sudafricano y propietario de Canonical, hab\u00eda estado familiarizado con estas ideas y vio la posibilidad de difundirlas si le daba ese nombre a su distribuci\u00f3n Linux. Ubuntu es un sistema operativo libre y de c\u00f3digo abierto, basado en la distribuci\u00f3n Debian GNU/Linux. Es ideal para equipos port\u00e1tiles,sobremesa, servidores y dispositivos m\u00f3viles. Puedes usarlo en casa, en la empresa, o para aprender. Dispondr\u00e1s de un enorme conjunto de aplicaciones gratuitas como procesadores de textos, hojas de c\u00e1lculo, servidores web y de bases de datos etc\u2026 Ubuntu es un sistema operativo seguro y confiable que te permitir\u00e1 manejarte en Internet, navegar, enviar correos hacer uso de redes sociales y llevar una vida digital sin sobresaltos. La distribuci\u00f3n Ubuntu utiliza por defecto el escritorio GNome pero Canonical tambi\u00e9n ha lanzado otras variantes de Ubuntu con diferentes ambientes de escritorio, por ejemplo Kubuntu basada en el ambiente gr\u00e1fico KDE, Xubuntu y otras\u2026 Todas tienen en com\u00fan la facilidad de uso e instalaci\u00f3n. \u00bfQui\u00e9n hay detr\u00e1s de Canonical? \u00b6 Canonical es una empresa privada financiada por Mark Shuttleworth, un emprendedor sudafricano que hizo fortuna cuando la empresa de seguridad \u201cVerisign\u201d le compr\u00f3 su empresa \u201cThawte\u201d. La sede de Canonical est\u00e1 en el paraiso fiscal de la Isla de Man, en Inglaterra, la misma isla donde nacieron los \u201cBee Gees\u201d. Canonical espera obtener beneficios ofreciendo servicios relacionados con el sistema operativo que ofrece, por ejemplo uno de sus servicios consiste en 50 Gb de espacio en la nube por 8 Euros / mes que permiten sincronizar y compartir agenda, documentos, fotograf\u00edas y otra informaci\u00f3n digital entre distintos equipos. Fuentes \u00b6 Ubuntu \u2013 Wikipedia, la enciclopedia libre http://es.wikipedia.org/wiki/Ubuntu Ubuntu (filosof\u00eda) \u2013 Wikipedia, la enciclopedia libre Enlaces Relacionados http://es.wikipedia.org/wiki/Ubuntu_%28filosof%C3%ADa%29 http://www.ubuntu.org (Foro mundial de redes de la sociedad civil) http://www.ubuntu.com/ (Distribuci\u00f3n Linux) https://one.ubuntu.com/ (La nube ubuntu)","title":"Sobre Ubuntu"},{"location":"kb/GNU-Linux/Sobre%20Ubuntu/#conoces-ubuntu","text":"La palabra \u201cubuntu\u201d proviene del dicho popular \u201cumuntu, nigumuntu, nagamuntu\u201d, que en idioma zul\u00fa significa \u201cuna persona es una persona a causa de los dem\u00e1s.\u201d. Ubuntu es una ideolog\u00eda sudafricana enfocada en la lealtad de las personas y las relaciones entre \u00e9stas. El Reverendo Desmond Mpilo Tutu ,cl\u00e9rigo y pacifista sudafricano, que adquiri\u00f3 fama internacional durante la d\u00e9cada de 1980 a causa de su oposici\u00f3n al Apartheid, dec\u00eda acerca de ubuntu: Una persona con ubuntu es abierta y est\u00e1 disponible para los dem\u00e1s, respalda a los dem\u00e1s, no se siente amenazado cuando otros son capaces y son buenos en algo, porque est\u00e1 seguro de s\u00ed mismo ya que sabe que pertenece a una gran totalidad, que se decrece cuando otras personas son humilladas o menospreciadas, cuando otros son torturados u oprimidos. Ubuntu tambi\u00e9n es el nombre que la compa\u00f1\u00eda Canonical ha dado a su distribuci\u00f3n Linux bajo el lema \u201cUbuntu: Linux para seres humanos\u201d. Mark Shuttleworth, de origen sudafricano y propietario de Canonical, hab\u00eda estado familiarizado con estas ideas y vio la posibilidad de difundirlas si le daba ese nombre a su distribuci\u00f3n Linux. Ubuntu es un sistema operativo libre y de c\u00f3digo abierto, basado en la distribuci\u00f3n Debian GNU/Linux. Es ideal para equipos port\u00e1tiles,sobremesa, servidores y dispositivos m\u00f3viles. Puedes usarlo en casa, en la empresa, o para aprender. Dispondr\u00e1s de un enorme conjunto de aplicaciones gratuitas como procesadores de textos, hojas de c\u00e1lculo, servidores web y de bases de datos etc\u2026 Ubuntu es un sistema operativo seguro y confiable que te permitir\u00e1 manejarte en Internet, navegar, enviar correos hacer uso de redes sociales y llevar una vida digital sin sobresaltos. La distribuci\u00f3n Ubuntu utiliza por defecto el escritorio GNome pero Canonical tambi\u00e9n ha lanzado otras variantes de Ubuntu con diferentes ambientes de escritorio, por ejemplo Kubuntu basada en el ambiente gr\u00e1fico KDE, Xubuntu y otras\u2026 Todas tienen en com\u00fan la facilidad de uso e instalaci\u00f3n.","title":"\u00bfConoces Ubuntu?"},{"location":"kb/GNU-Linux/Sobre%20Ubuntu/#quien-hay-detras-de-canonical","text":"Canonical es una empresa privada financiada por Mark Shuttleworth, un emprendedor sudafricano que hizo fortuna cuando la empresa de seguridad \u201cVerisign\u201d le compr\u00f3 su empresa \u201cThawte\u201d. La sede de Canonical est\u00e1 en el paraiso fiscal de la Isla de Man, en Inglaterra, la misma isla donde nacieron los \u201cBee Gees\u201d. Canonical espera obtener beneficios ofreciendo servicios relacionados con el sistema operativo que ofrece, por ejemplo uno de sus servicios consiste en 50 Gb de espacio en la nube por 8 Euros / mes que permiten sincronizar y compartir agenda, documentos, fotograf\u00edas y otra informaci\u00f3n digital entre distintos equipos.","title":"\u00bfQui\u00e9n hay detr\u00e1s de Canonical?"},{"location":"kb/GNU-Linux/Sobre%20Ubuntu/#fuentes","text":"Ubuntu \u2013 Wikipedia, la enciclopedia libre http://es.wikipedia.org/wiki/Ubuntu Ubuntu (filosof\u00eda) \u2013 Wikipedia, la enciclopedia libre Enlaces Relacionados http://es.wikipedia.org/wiki/Ubuntu_%28filosof%C3%ADa%29 http://www.ubuntu.org (Foro mundial de redes de la sociedad civil) http://www.ubuntu.com/ (Distribuci\u00f3n Linux) https://one.ubuntu.com/ (La nube ubuntu)","title":"Fuentes"},{"location":"kb/GNU-Linux/Command%20Line/Compresi%C3%B3n%20y%20Descompresi%C3%B3n%20de%20ficheros/","text":"Compresi\u00f3n y Descompresi\u00f3n de ficheros \u00b6 A grandes rasgos, la compresi\u00f3n se basa en una matriz donde se indica, que hay, donde y cuantas veces. Es algo mas complejo pero el principio es el mismo que el de los ficheros JPG Formatos \u00b6 ZIP \u2192 unzip, zip RAR \u2192 unrar, rar GZ BZ \u2192 tar GZIP \u00b6 gzip -d nombrefichero ( descomprime) gzip -c (comprime) BZIP2 \u00b6 BZIP es un poco mas lento pero comprime mas. bzip -d bzip -c Par\u00e1metros comunes para TAR \u00b6 tar -xzvf filename.tar.gz tar -cf backup-etc- date +%Y%m%d .tar /etc/ x depak c Pack z gzip j bzz v Verbose f trabaja con ficheros. Normalmente TAR trabajaba con cintas. p conserva los permisos al comprimir TAR compressing \u00b6 tar -cvfp filename.tar tar -cpzvfp filename.tar.gz tar -cpjvfp filename.tar.bz2 TAR Decompressing \u00b6 tar -xvf filename.tar tar -xzvf filename.tar.gz tar -xjvf filename.tar.bz2 ZIP unzip filename.zip","title":"Compresi\u00f3n y Descompresi\u00f3n de ficheros"},{"location":"kb/GNU-Linux/Command%20Line/Compresi%C3%B3n%20y%20Descompresi%C3%B3n%20de%20ficheros/#compresion-y-descompresion-de-ficheros","text":"A grandes rasgos, la compresi\u00f3n se basa en una matriz donde se indica, que hay, donde y cuantas veces. Es algo mas complejo pero el principio es el mismo que el de los ficheros JPG","title":"Compresi\u00f3n y Descompresi\u00f3n de ficheros"},{"location":"kb/GNU-Linux/Command%20Line/Compresi%C3%B3n%20y%20Descompresi%C3%B3n%20de%20ficheros/#formatos","text":"ZIP \u2192 unzip, zip RAR \u2192 unrar, rar GZ BZ \u2192 tar","title":"Formatos"},{"location":"kb/GNU-Linux/Command%20Line/Compresi%C3%B3n%20y%20Descompresi%C3%B3n%20de%20ficheros/#gzip","text":"gzip -d nombrefichero ( descomprime) gzip -c (comprime)","title":"GZIP"},{"location":"kb/GNU-Linux/Command%20Line/Compresi%C3%B3n%20y%20Descompresi%C3%B3n%20de%20ficheros/#bzip2","text":"BZIP es un poco mas lento pero comprime mas. bzip -d bzip -c","title":"BZIP2"},{"location":"kb/GNU-Linux/Command%20Line/Compresi%C3%B3n%20y%20Descompresi%C3%B3n%20de%20ficheros/#parametros-comunes-para-tar","text":"tar -xzvf filename.tar.gz tar -cf backup-etc- date +%Y%m%d .tar /etc/ x depak c Pack z gzip j bzz v Verbose f trabaja con ficheros. Normalmente TAR trabajaba con cintas. p conserva los permisos al comprimir","title":"Par\u00e1metros comunes para TAR"},{"location":"kb/GNU-Linux/Command%20Line/Compresi%C3%B3n%20y%20Descompresi%C3%B3n%20de%20ficheros/#tar-compressing","text":"tar -cvfp filename.tar tar -cpzvfp filename.tar.gz tar -cpjvfp filename.tar.bz2","title":"TAR compressing"},{"location":"kb/GNU-Linux/Command%20Line/Compresi%C3%B3n%20y%20Descompresi%C3%B3n%20de%20ficheros/#tar-decompressing","text":"tar -xvf filename.tar tar -xzvf filename.tar.gz tar -xjvf filename.tar.bz2 ZIP unzip filename.zip","title":"TAR Decompressing"},{"location":"kb/GNU-Linux/Command%20Line/Descargar%20una%20Playlist%20de%20Youtube%20como%20ficheros%20MP3/","text":"Descargar una Playlist de Youtube como ficheros MP3 \u00b6 O ampliar tu colecci\u00f3n de m\u00fasica \u00abby the face\u00bb \ud83d\ude42 Instalamos la \u00faltima versi\u00f3n de youtube-dl y le damos permisos de ejecuci\u00f3n a todos los usuarios de la m\u00e1quina local con: sudo wget https://yt-dl.org/latest/youtube-dl -O /usr/local/bin/youtube-dl sudo chmod a+x /usr/local/bin/youtube-dl youtube-dl --version Ahora para descargar por ejemplo mi lista de m\u00fasica disponible en: https://www.youtube.com/playlist?list=PL2gdCKFmkidaN-hDS1x_RJYrBlzIKhCt4 ejecutamos el comando: mkdir descarga_playlist youtube-dl --extract-audio --audio-format mp3 -o \"%(title)s.%(ext)s\" \"https://www.youtube.com/playlist?list=PL2gdCKFmkidaN-hDS1x_RJYrBlzIKhCt4\"","title":"Descargar una Playlist de Youtube como ficheros MP3"},{"location":"kb/GNU-Linux/Command%20Line/Descargar%20una%20Playlist%20de%20Youtube%20como%20ficheros%20MP3/#descargar-una-playlist-de-youtube-como-ficheros-mp3","text":"O ampliar tu colecci\u00f3n de m\u00fasica \u00abby the face\u00bb \ud83d\ude42 Instalamos la \u00faltima versi\u00f3n de youtube-dl y le damos permisos de ejecuci\u00f3n a todos los usuarios de la m\u00e1quina local con: sudo wget https://yt-dl.org/latest/youtube-dl -O /usr/local/bin/youtube-dl sudo chmod a+x /usr/local/bin/youtube-dl youtube-dl --version Ahora para descargar por ejemplo mi lista de m\u00fasica disponible en: https://www.youtube.com/playlist?list=PL2gdCKFmkidaN-hDS1x_RJYrBlzIKhCt4 ejecutamos el comando: mkdir descarga_playlist youtube-dl --extract-audio --audio-format mp3 -o \"%(title)s.%(ext)s\" \"https://www.youtube.com/playlist?list=PL2gdCKFmkidaN-hDS1x_RJYrBlzIKhCt4\"","title":"Descargar una Playlist de Youtube como ficheros MP3"},{"location":"kb/GNU-Linux/Command%20Line/Gesti%C3%B3n%20de%20paquetes/","text":"Gesti\u00f3n de paquetes \u00b6 Formatos \u00b6 RPM \u2192 Formato desarrollado por Red Hat DEB \u2192 Formato desarrollado por Debian Un fichero deb o rpm es un fichero comprimido con informaci\u00f3n como autor, versi\u00f3n, tags, dependencias, con que es incompatible etc\u2026 es una forma de distribuir el software y su instalaci\u00f3n en el sistema. Instaladores de paquetes \u00b6 apt apt-get aptitude dselect Synaptic - en modo gr\u00e1fico dpkg es el \u00faltimo escal\u00f3n, todos acaban tirando de dpkg apt-get \u2192 comando para instalar programas que est\u00e1n en los repositorios, los repositorios est\u00e1n definidos en el fichero /etc/apt/sources.lst , se puede modificar este fichero a manija pero entonces es necesario realizar un apt-get update para act. la bd local. Formato del fichero: deb \u2192 paquetes precompilados para debian URL \u2192 de donde descargar\u00e1 el paquete main \u2192 forma parte del core debian contrib \u2192 contribuciones non-free \u2192 No de libre distribuci\u00f3n deb-src \u2192 c\u00f3digo fuente # deb cdrom:[Debian GNU/Linux 8.5.0 _Jessie_ - Official Multi-architecture amd64/i386 NETINST #1 20160604-19:56]/ jessie main #deb cdrom:[Debian GNU/Linux 8.5.0 _Jessie_ - Official Multi-architecture amd64/i386 NETINST #1 20160604-19:56]/ jessie main deb http://ftp.es.debian.org/debian/ jessie main deb-src http://ftp.es.debian.org/debian/ jessie main deb http://security.debian.org/ jessie/updates main deb-src http://security.debian.org/ jessie/updates main # jessie-updates, previously known as 'volatile' deb http://ftp.es.debian.org/debian/ jessie-updates main deb-src http://ftp.es.debian.org/debian/ jessie-updates main Comandos b\u00e1sicos \u00b6 apt-get update \u2192 cuando cambiemos el fichero de repositorios para cargar las nuevas listas apt-get upgrade \u2192 actualiza paquetes apt-get -source \u2192 obtiene el paquete con el c\u00f3digo fuente en /usr/src apt-get dist-upgrade \u2192 actualiza la distribuci\u00f3n, ojo que es un proceso complejo y puede no funcionar. apt-get install algo \u2192 para instalar un paquete, se descarga autom\u00e1ticamente en /var/cache/apt/archives apt-get clean \u2192 para borrar la cache de archivos descargados por instalaci\u00f3n apt-cache search autocad \u2192 buscar aplicaciones disponibles en los repositorios Aptitude \u2192 es como synaptic en modo texto aptitude search \u2192 buscar aplicaciones, solo busca en el nombre por lo que se recomienda usar apt-cache search No se puede verificar la autenticidad del repositorio X En este caso ser\u00e1 necesario agregar la clave PGP al sistema. :::bash wget -o \u201chttp://ur.donde.llave\u201d | apt-get key add - #(el - coger\u00e1 la llave del wget) Instalaci\u00f3n de un paquete que no est\u00e1 en los repositorios \u00b6 wget paquete debian \u2192 obtenemos el paquete dpkg -L paquete \u2192 ver lo que va a instalar en el disco lo instalamos con: dpkg -i nombrepaquete si aparecen errores de dependencias, la instalaci\u00f3n se quedar\u00e1 en un estado inconsistente, para solucionarlo ejecutamos: :::bash apt-get -f install # arreglar\u00e1 problemas de dependencias al instalar un paquete con dpkg y lo dejar\u00e1 ya instalado. dpkg -r \u2192 para eliminar un paquete dpkg -l \u2192 para listar los paquetes instalados (ii quiere decir instalado y ir installed removed) dpkg -l | grep -i figlet Ejemplo - Monitorix \u00b6 Monitorix es un software para monitorizar servidores disponible en www.monitorix.com descargamos desde la web el paquete debian o bien hacemos un wget dpkg -i /home/javier/Descargas/monitorix_3.8.1-izzy1_all.deb A mitad de la instalaci\u00f3n nos dir\u00e1 que necesita Perl y unas cuantas librerias y dependencias, con lo que la operaci\u00f3n quedar\u00e1 sin terminar. Para resolver los problemas de instalaci\u00f3n ejecutamos :::bash apt-get -f install # finalizar el proceso de instalaci\u00f3n. Ejemplo 2 Elastic Search \u00b6 Por ej. para instalar Elastic Search tendremos diferentes alternativas: Descargamos de su web el fichero .deb Incluimos en los repositorios: :::bash wget -o \u201chttps://packages\u2026.\u201d | apt-key add - echo \u201cdeb https://packages\u2026. debian stable main | tee -a /etc/apt/elasticsearch.list Es habitual tener los repositorios separados: sources.list.d/elasticsearch.list basta colocarlos en la carpeta sources.list.d y se realizar\u00e1 su inclusi\u00f3n Nota Los paquetes ubuntu en debian y viceversa puede hacerse pero no es lo mas recomendable, podr\u00eda haber discrepancias. Se pueden convertir paquetes RPM a deb y viceversa con una herramienta llamada alien Seg\u00fan el fabricante de software es posible encontrar siempre la ultima versi\u00f3n siguiendo una norma por ej. WordPress siempre tiene el mismo fichero /latest.tar.gz que permite su inclusi\u00f3n en un script. Mas comandos relacionados \u00b6 Software para automatizaci\u00f3n de infraestructura \u00b6 Ansible puppet cheff recomendable ansible, curva de aprendizaje menor que en puppet y es muy complejo.","title":"Gesti\u00f3n de paquetes"},{"location":"kb/GNU-Linux/Command%20Line/Gesti%C3%B3n%20de%20paquetes/#gestion-de-paquetes","text":"","title":"Gesti\u00f3n de paquetes"},{"location":"kb/GNU-Linux/Command%20Line/Gesti%C3%B3n%20de%20paquetes/#formatos","text":"RPM \u2192 Formato desarrollado por Red Hat DEB \u2192 Formato desarrollado por Debian Un fichero deb o rpm es un fichero comprimido con informaci\u00f3n como autor, versi\u00f3n, tags, dependencias, con que es incompatible etc\u2026 es una forma de distribuir el software y su instalaci\u00f3n en el sistema.","title":"Formatos"},{"location":"kb/GNU-Linux/Command%20Line/Gesti%C3%B3n%20de%20paquetes/#instaladores-de-paquetes","text":"apt apt-get aptitude dselect Synaptic - en modo gr\u00e1fico dpkg es el \u00faltimo escal\u00f3n, todos acaban tirando de dpkg apt-get \u2192 comando para instalar programas que est\u00e1n en los repositorios, los repositorios est\u00e1n definidos en el fichero /etc/apt/sources.lst , se puede modificar este fichero a manija pero entonces es necesario realizar un apt-get update para act. la bd local. Formato del fichero: deb \u2192 paquetes precompilados para debian URL \u2192 de donde descargar\u00e1 el paquete main \u2192 forma parte del core debian contrib \u2192 contribuciones non-free \u2192 No de libre distribuci\u00f3n deb-src \u2192 c\u00f3digo fuente # deb cdrom:[Debian GNU/Linux 8.5.0 _Jessie_ - Official Multi-architecture amd64/i386 NETINST #1 20160604-19:56]/ jessie main #deb cdrom:[Debian GNU/Linux 8.5.0 _Jessie_ - Official Multi-architecture amd64/i386 NETINST #1 20160604-19:56]/ jessie main deb http://ftp.es.debian.org/debian/ jessie main deb-src http://ftp.es.debian.org/debian/ jessie main deb http://security.debian.org/ jessie/updates main deb-src http://security.debian.org/ jessie/updates main # jessie-updates, previously known as 'volatile' deb http://ftp.es.debian.org/debian/ jessie-updates main deb-src http://ftp.es.debian.org/debian/ jessie-updates main","title":"Instaladores de paquetes"},{"location":"kb/GNU-Linux/Command%20Line/Gesti%C3%B3n%20de%20paquetes/#comandos-basicos","text":"apt-get update \u2192 cuando cambiemos el fichero de repositorios para cargar las nuevas listas apt-get upgrade \u2192 actualiza paquetes apt-get -source \u2192 obtiene el paquete con el c\u00f3digo fuente en /usr/src apt-get dist-upgrade \u2192 actualiza la distribuci\u00f3n, ojo que es un proceso complejo y puede no funcionar. apt-get install algo \u2192 para instalar un paquete, se descarga autom\u00e1ticamente en /var/cache/apt/archives apt-get clean \u2192 para borrar la cache de archivos descargados por instalaci\u00f3n apt-cache search autocad \u2192 buscar aplicaciones disponibles en los repositorios Aptitude \u2192 es como synaptic en modo texto aptitude search \u2192 buscar aplicaciones, solo busca en el nombre por lo que se recomienda usar apt-cache search No se puede verificar la autenticidad del repositorio X En este caso ser\u00e1 necesario agregar la clave PGP al sistema. :::bash wget -o \u201chttp://ur.donde.llave\u201d | apt-get key add - #(el - coger\u00e1 la llave del wget)","title":"Comandos b\u00e1sicos"},{"location":"kb/GNU-Linux/Command%20Line/Gesti%C3%B3n%20de%20paquetes/#instalacion-de-un-paquete-que-no-esta-en-los-repositorios","text":"wget paquete debian \u2192 obtenemos el paquete dpkg -L paquete \u2192 ver lo que va a instalar en el disco lo instalamos con: dpkg -i nombrepaquete si aparecen errores de dependencias, la instalaci\u00f3n se quedar\u00e1 en un estado inconsistente, para solucionarlo ejecutamos: :::bash apt-get -f install # arreglar\u00e1 problemas de dependencias al instalar un paquete con dpkg y lo dejar\u00e1 ya instalado. dpkg -r \u2192 para eliminar un paquete dpkg -l \u2192 para listar los paquetes instalados (ii quiere decir instalado y ir installed removed) dpkg -l | grep -i figlet","title":"Instalaci\u00f3n de un paquete que no est\u00e1 en los repositorios"},{"location":"kb/GNU-Linux/Command%20Line/Gesti%C3%B3n%20de%20paquetes/#ejemplo-monitorix","text":"Monitorix es un software para monitorizar servidores disponible en www.monitorix.com descargamos desde la web el paquete debian o bien hacemos un wget dpkg -i /home/javier/Descargas/monitorix_3.8.1-izzy1_all.deb A mitad de la instalaci\u00f3n nos dir\u00e1 que necesita Perl y unas cuantas librerias y dependencias, con lo que la operaci\u00f3n quedar\u00e1 sin terminar. Para resolver los problemas de instalaci\u00f3n ejecutamos :::bash apt-get -f install # finalizar el proceso de instalaci\u00f3n.","title":"Ejemplo - Monitorix"},{"location":"kb/GNU-Linux/Command%20Line/Gesti%C3%B3n%20de%20paquetes/#ejemplo-2-elastic-search","text":"Por ej. para instalar Elastic Search tendremos diferentes alternativas: Descargamos de su web el fichero .deb Incluimos en los repositorios: :::bash wget -o \u201chttps://packages\u2026.\u201d | apt-key add - echo \u201cdeb https://packages\u2026. debian stable main | tee -a /etc/apt/elasticsearch.list Es habitual tener los repositorios separados: sources.list.d/elasticsearch.list basta colocarlos en la carpeta sources.list.d y se realizar\u00e1 su inclusi\u00f3n Nota Los paquetes ubuntu en debian y viceversa puede hacerse pero no es lo mas recomendable, podr\u00eda haber discrepancias. Se pueden convertir paquetes RPM a deb y viceversa con una herramienta llamada alien Seg\u00fan el fabricante de software es posible encontrar siempre la ultima versi\u00f3n siguiendo una norma por ej. WordPress siempre tiene el mismo fichero /latest.tar.gz que permite su inclusi\u00f3n en un script.","title":"Ejemplo 2 Elastic Search"},{"location":"kb/GNU-Linux/Command%20Line/Gesti%C3%B3n%20de%20paquetes/#mas-comandos-relacionados","text":"","title":"Mas comandos relacionados"},{"location":"kb/GNU-Linux/Command%20Line/Gesti%C3%B3n%20de%20paquetes/#software-para-automatizacion-de-infraestructura","text":"Ansible puppet cheff recomendable ansible, curva de aprendizaje menor que en puppet y es muy complejo.","title":"Software para automatizaci\u00f3n de infraestructura"},{"location":"kb/GNU-Linux/Command%20Line/Text%20Parsing/","text":"Text Parsing \u00b6 cat: muestra un fichero entero de ppio a fin por standard output sin paginar tac: muestra un fichero de fin a ppio al rev\u00e9s head: muestra las n primeras lineas de un fichero: head -3 /etc/passwd tail: muestras las n ultimas lineas de un fichero: tail-3 /etc/passwd tail -f /var/log/messages: muestra las actualizaciones del fichero en tiempo real. history | tail -8 more: muestra un fichero paginado + search less: muestra un fichero paginado pero permite pasar l\u00ednea a l\u00ednea + search awk: text parsing language (Es un lenguaje de procesamiento) dpkg -l nos muestra los programas instalados de la A a la Z dpkg -l |awk {' print \\(2,\\) 4 '} cut: corta ficheros de forma longitudinal cut -c 1-8 /etc/passwd cut -c 1,8,2,11 /etc/passwd cut -d: -f 1,7 (delimitado por \u201c:\u201d y cogiendo campos 1 y 7 sed: sustituye cadenas de texto Ej: echo hola | sed \"s/o/XXX/\" cut -d: -f 1,7 /etc/passwd |head |sed \"s/^/XXX/\" Expresiones regulares para sed: https://www.gnu.org/software/sed/manual/html_node/Regular-Expressions.html sed -i file tr: translate ( cambia caracteres ) diff: muestra diferencias entre ficheros md5sum: realiza la suma con el algoritmo MD5 de un fichero (No usar para cifrado,para cifrado usar shasum file.a) xargs: manipula la salida de un texto que le viene dado mediante STDIN Howto: http://www.thegeekstuff.com/2013/12/xargs-examples/https://titanpad.com/linux?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+TheGeekStuff+%28The+Geek+Stuff%29 puede usarse para encolumnar resultados: cat /etc/passwd | cut -d: -f 1 | xargs sort: ordena resultados uniq: elimina duplicados wc: cuenta palabras, caracteres, bytes o l\u00edneas wc -l /etc/passwd # n\u00ba de usuarios del sistema join: junta ficheros con un campo en comun paste: junta lineas de ficheros split: parte ficheros en N partes de tama\u00f1o X : split filename \u00f3 split -b 2048 filename tee: split STDOUT : bifurca la salida de un comando a 2 sitios a la vez, por ej. a un fichero y a la vez a la pantalla. cat /var/log/daemon.log | tee /tmp/salida.txt tcpdump -vvv -X -x -n -l -i eth0 | tee /tmp/blabla.txt od: octal dump : echo \u201chola que tal :D\u201d | od hexdump: hexacedimal dump : hexdump -c /etc/passwd strings: get strings from ANY file ;) sacar cadenas de un fichero aunque sea binario strings $(which ls). El paquete strings depende de binutils que se instalan con: aptitude install binutils file: identifica un tipo de fichero bas\u00e1ndose en sus cabeceras identify: saca datos de ficheros de imagen ( NO saca los meta tags :P ) FAMILIA Z* ( aplicable a ficheros comprimidos con gzip ) ===============( * )========================== zcat zless zmore zgrep zdiff GENERAR CSV CON USERS DEL SISTEMA: cat /etc/passwd |cut -d: -f1,6,7 |grep -v nologin | sed \"s/^/\\\"/\" | sed \"s/$/\\\"/\" | sed \"s/:/\\\";\\\"/g\" > filename.csv $> libreoffice filename.csv root@debian:/home/linux/test# cat /etc/passwd | cut -d: -f1,3,6 | sed \"s/^/\\\"/\" | sed \"s/ \\(/\\\"/\" | sed \"s/:/\\\";\\\"/g\" > users.csv && libreoffice users.csv cat /etc/passwd |cut -d: -f1,6,7 |grep -v nologin | sed \"s/^/\\\"/\" | sed \"s/\\) /\\\"/\" | sed \"s/:/\\\";\\\"/g\" > filename.csv Estructura del fichero /etc/passwd usuario1: nombre de la cuenta x: clave encriptada 500: UID de la cuenta 501: GID de la cuenta pepito: Nombre del usuario /home/pepito: Carpeta home del usuario /bin/bash: Interprete de comandos (shell) nl devuelve un fichero con las lineas numeradas cat -n devuelve un fichero con las lineas numeradas grep buscar cadenas de texto grep root /etc/passwd --col grep -i case insensitive cat passwd | grep nologin --col cat /etc/passwd | grep -v \"nologin|/bin/false\" con el | hacemos un OR grep -o solo saca la parte del string que coincide grep -c cuenta las veces que aparece el string Muestra en los resultados 5 lineas anteriores y 5 lineas posteriores grep -5 -i debian /etc/passwd --col grep -i idiot / en todo el sistema existe = $(mysql --create-database) if grep exists ^ principio de linea $ final de linea grep \u201c^abc\u201d sustituir: cat /etc/passwd | cut -d: -f 1,3,6 | sed \u201cs/buscando/sustituir\u201d Ver los comandos mas usados en el sistema history | awk '{print $2}' | sort | uniq -c | sort -rn | head -10 Otros int\u00e9rpretes de comandos bash sh y csh son los que deberiamos conocer bien tcsh zsh ksh para ver que shells hay disponibles en el sistema cat /etc/shells whereis ls nos da el path absoluto de dicho binario y la pagina de manual, mientras que which solo da el path del binario. Esto posibilita realizar scripts para multiples plataformas ya que podemos definir una variable como: V = wich ls y a partir de eso utilizar esa variable en el path Tanto whereis como which funcionan porque hay una base de datos del sistema. Esta base de datos se actualiza con el comando updatedb locate busca un fichero locate *.mp3 locate *.txt | wc -l Find find donde que -type f,d,l (tipos de fichero) -iname (case insensitive) -user manolo -group sysadmins -perms -ctime 1 == 24h -atime -mtime find /media/iomega -type f -iname autorun.inf -exec rm{}\\; find / -iname *.txt -exec grep -H -i hola '{}' \\; find /etc/ -iname *.mp4 Crear una BD con todos los ficheros y hacer b\u00fasquedas: find / | gzip -c > /root/DBFILES.DAT function busca { zgrep -i \"$1\" /root/DBFILES.DAT --color; } Ejercicio log parsing: \u00b6 Coger logs de apache de cualquier servidor y intentar sacar: file ejemplo: http://drlinux.cat/tools/horse.log -> num de lineas que contiene el fichero 2106 -> numero de IP's distintas que hay 81 -> numero de veces que aparece \"robots.txt\" 22 -> # de peticiones POST = ==> 4 Que IP's nos han hecho esto? 188.165.128.164 -> numero de veces que ha pasado GoogleBot por ese website 51 -> numero de veces que nos han visitado con IEXPLORER 63 -> Cuantos Androids? i iPhones? 463 android | 201 iPhone egrep -o \"[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}\" horse.log cat horse.log | awk {' print $1 '} |sort -u |wc -l cut -d\"-\" -f1 horse.log -... grep -E -o \"[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}\" horse.log | sort -u | wc -l","title":"Text Parsing"},{"location":"kb/GNU-Linux/Command%20Line/Text%20Parsing/#text-parsing","text":"cat: muestra un fichero entero de ppio a fin por standard output sin paginar tac: muestra un fichero de fin a ppio al rev\u00e9s head: muestra las n primeras lineas de un fichero: head -3 /etc/passwd tail: muestras las n ultimas lineas de un fichero: tail-3 /etc/passwd tail -f /var/log/messages: muestra las actualizaciones del fichero en tiempo real. history | tail -8 more: muestra un fichero paginado + search less: muestra un fichero paginado pero permite pasar l\u00ednea a l\u00ednea + search awk: text parsing language (Es un lenguaje de procesamiento) dpkg -l nos muestra los programas instalados de la A a la Z dpkg -l |awk {' print \\(2,\\) 4 '} cut: corta ficheros de forma longitudinal cut -c 1-8 /etc/passwd cut -c 1,8,2,11 /etc/passwd cut -d: -f 1,7 (delimitado por \u201c:\u201d y cogiendo campos 1 y 7 sed: sustituye cadenas de texto Ej: echo hola | sed \"s/o/XXX/\" cut -d: -f 1,7 /etc/passwd |head |sed \"s/^/XXX/\" Expresiones regulares para sed: https://www.gnu.org/software/sed/manual/html_node/Regular-Expressions.html sed -i file tr: translate ( cambia caracteres ) diff: muestra diferencias entre ficheros md5sum: realiza la suma con el algoritmo MD5 de un fichero (No usar para cifrado,para cifrado usar shasum file.a) xargs: manipula la salida de un texto que le viene dado mediante STDIN Howto: http://www.thegeekstuff.com/2013/12/xargs-examples/https://titanpad.com/linux?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+TheGeekStuff+%28The+Geek+Stuff%29 puede usarse para encolumnar resultados: cat /etc/passwd | cut -d: -f 1 | xargs sort: ordena resultados uniq: elimina duplicados wc: cuenta palabras, caracteres, bytes o l\u00edneas wc -l /etc/passwd # n\u00ba de usuarios del sistema join: junta ficheros con un campo en comun paste: junta lineas de ficheros split: parte ficheros en N partes de tama\u00f1o X : split filename \u00f3 split -b 2048 filename tee: split STDOUT : bifurca la salida de un comando a 2 sitios a la vez, por ej. a un fichero y a la vez a la pantalla. cat /var/log/daemon.log | tee /tmp/salida.txt tcpdump -vvv -X -x -n -l -i eth0 | tee /tmp/blabla.txt od: octal dump : echo \u201chola que tal :D\u201d | od hexdump: hexacedimal dump : hexdump -c /etc/passwd strings: get strings from ANY file ;) sacar cadenas de un fichero aunque sea binario strings $(which ls). El paquete strings depende de binutils que se instalan con: aptitude install binutils file: identifica un tipo de fichero bas\u00e1ndose en sus cabeceras identify: saca datos de ficheros de imagen ( NO saca los meta tags :P ) FAMILIA Z* ( aplicable a ficheros comprimidos con gzip ) ===============( * )========================== zcat zless zmore zgrep zdiff GENERAR CSV CON USERS DEL SISTEMA: cat /etc/passwd |cut -d: -f1,6,7 |grep -v nologin | sed \"s/^/\\\"/\" | sed \"s/$/\\\"/\" | sed \"s/:/\\\";\\\"/g\" > filename.csv $> libreoffice filename.csv root@debian:/home/linux/test# cat /etc/passwd | cut -d: -f1,3,6 | sed \"s/^/\\\"/\" | sed \"s/ \\(/\\\"/\" | sed \"s/:/\\\";\\\"/g\" > users.csv && libreoffice users.csv cat /etc/passwd |cut -d: -f1,6,7 |grep -v nologin | sed \"s/^/\\\"/\" | sed \"s/\\) /\\\"/\" | sed \"s/:/\\\";\\\"/g\" > filename.csv Estructura del fichero /etc/passwd usuario1: nombre de la cuenta x: clave encriptada 500: UID de la cuenta 501: GID de la cuenta pepito: Nombre del usuario /home/pepito: Carpeta home del usuario /bin/bash: Interprete de comandos (shell) nl devuelve un fichero con las lineas numeradas cat -n devuelve un fichero con las lineas numeradas grep buscar cadenas de texto grep root /etc/passwd --col grep -i case insensitive cat passwd | grep nologin --col cat /etc/passwd | grep -v \"nologin|/bin/false\" con el | hacemos un OR grep -o solo saca la parte del string que coincide grep -c cuenta las veces que aparece el string Muestra en los resultados 5 lineas anteriores y 5 lineas posteriores grep -5 -i debian /etc/passwd --col grep -i idiot / en todo el sistema existe = $(mysql --create-database) if grep exists ^ principio de linea $ final de linea grep \u201c^abc\u201d sustituir: cat /etc/passwd | cut -d: -f 1,3,6 | sed \u201cs/buscando/sustituir\u201d Ver los comandos mas usados en el sistema history | awk '{print $2}' | sort | uniq -c | sort -rn | head -10 Otros int\u00e9rpretes de comandos bash sh y csh son los que deberiamos conocer bien tcsh zsh ksh para ver que shells hay disponibles en el sistema cat /etc/shells whereis ls nos da el path absoluto de dicho binario y la pagina de manual, mientras que which solo da el path del binario. Esto posibilita realizar scripts para multiples plataformas ya que podemos definir una variable como: V = wich ls y a partir de eso utilizar esa variable en el path Tanto whereis como which funcionan porque hay una base de datos del sistema. Esta base de datos se actualiza con el comando updatedb locate busca un fichero locate *.mp3 locate *.txt | wc -l Find find donde que -type f,d,l (tipos de fichero) -iname (case insensitive) -user manolo -group sysadmins -perms -ctime 1 == 24h -atime -mtime find /media/iomega -type f -iname autorun.inf -exec rm{}\\; find / -iname *.txt -exec grep -H -i hola '{}' \\; find /etc/ -iname *.mp4 Crear una BD con todos los ficheros y hacer b\u00fasquedas: find / | gzip -c > /root/DBFILES.DAT function busca { zgrep -i \"$1\" /root/DBFILES.DAT --color; }","title":"Text Parsing"},{"location":"kb/GNU-Linux/Command%20Line/Text%20Parsing/#ejercicio-log-parsing","text":"Coger logs de apache de cualquier servidor y intentar sacar: file ejemplo: http://drlinux.cat/tools/horse.log -> num de lineas que contiene el fichero 2106 -> numero de IP's distintas que hay 81 -> numero de veces que aparece \"robots.txt\" 22 -> # de peticiones POST = ==> 4 Que IP's nos han hecho esto? 188.165.128.164 -> numero de veces que ha pasado GoogleBot por ese website 51 -> numero de veces que nos han visitado con IEXPLORER 63 -> Cuantos Androids? i iPhones? 463 android | 201 iPhone egrep -o \"[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}\" horse.log cat horse.log | awk {' print $1 '} |sort -u |wc -l cut -d\"-\" -f1 horse.log -... grep -E -o \"[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}\" horse.log | sort -u | wc -l","title":"Ejercicio log parsing:"},{"location":"kb/GNU-Linux/Command%20Line/Vim%20masterclass/","text":"Vim masterclass \u00b6 Chuleta: http://www.viemu.com/vi-vim-cheat-sheet.gif vi vim \u2192 vi Improved en el modo mas simple hacemos vim fichero Tenemos una barra de estado donde se indica columna, linea, caracter y porcentaje del documento. Modos \u00b6 Modo comando: [ESC] Modo insercion: [I] :w write :q quit :wq = :x o shift + zz B\u00fasquedas \u00b6 / /st /^al \u2192 empieza por al /.al$ \u2192 acabe en al Navegar \u00b6 Si hemos arrancado vim a pelo desde la linea de comandos sin pasarle ning\u00fan archivo :w fichero o /ruta/fichero/absoluta/ \u2192 escribe en el archivo especificado :37 \u2192 va a la linea 37 :$ \u2192 va a la \u00faltima l\u00ednea :1 \u2192 va a la primera l\u00ednea Edici\u00f3n \u00b6 i = insert mode Esc = command mode v = visual mode a = append + modo inserci\u00f3n O = open above o = open new line below dd = borra linea d4d = borra 4 lineas 4dd = borra 4 lineas r = replace x = suprimir 4x = supr x 4 yy = copia linea 3yy = copia 3 lineas y3y = copia 3 lineas p = (paste) pega linea(s) 4p = paste x 4 u = undo (infinitos) Crtl + r = redo Ctrl + n = autocompleta palabras :: /algo = busca \"algo\" Shift + j = join lines :1 = va a la linea 1 :5341 = va a la linea 5341 :$ = va a l final del file == Shift + g :w = write :wq = write & quit :x = write & quit Shift + zz = write and quit :new filename = open file (horizontal split) :vsplit filename ( vertical split )(Crtl+ww cambia de fichero) (Crtl+w2+ a\u00f1ade 2 lineas a esa ventana de fichero) (Crtl+w3- resta 3 lineas a esa ventana de fichero) :syntax on ( activa syntax highligh, resaltado colores ) :syntax off ( :syn off / :syn on ) :set ic :set number ( :set nu / :set nonu ) :set nonumber :! <command> -> ejecuta comando, muestra la salida por pantalla y vuelve a vim :.! <command>-> ejecuta comando e inserta la salida del mismo en vim :% s/a/b/g :. s/a/b/ :,+6 s/^/#/ VIM autocomplete trick ;) \u00b6 abre con vim un fichero ( vim vimpower.php ) :new /usr/share/vim/vim74/syntax/php.vim :hide a programar! ;) Pulsa Crtl+n para autocompletar cualquier funci\u00f3n! Nota: Podeis hacer esto con cualquier lenguaje de programacion del que vim tenga la sintaxis de colores definida. Si no lo encontrais ( cosa rara ), buscarlo en internet o en la pag de vim.org. Si nos venimos arriba, tambi\u00e9n podemos hacernos un esquema de color custom ;) Nota: Es posible que el path de /usr/share/vim/vim72/syntax/ ... pueda variar dependiendo de la versi\u00f3n de vim que tengamos instalada y/o de la distro de Linux. Sino siempre podeis descargaros Netbeans ;) Disponeis de versiones graficas tambien para vim en Windows y Mac, gvim, kvim. Otros editores cool: Sublime3, Brackets, Atom, notepadqq, notepad++ (solo para win ),...","title":"Vim masterclass"},{"location":"kb/GNU-Linux/Command%20Line/Vim%20masterclass/#vim-masterclass","text":"Chuleta: http://www.viemu.com/vi-vim-cheat-sheet.gif vi vim \u2192 vi Improved en el modo mas simple hacemos vim fichero Tenemos una barra de estado donde se indica columna, linea, caracter y porcentaje del documento.","title":"Vim masterclass"},{"location":"kb/GNU-Linux/Command%20Line/Vim%20masterclass/#modos","text":"Modo comando: [ESC] Modo insercion: [I] :w write :q quit :wq = :x o shift + zz","title":"Modos"},{"location":"kb/GNU-Linux/Command%20Line/Vim%20masterclass/#busquedas","text":"/ /st /^al \u2192 empieza por al /.al$ \u2192 acabe en al","title":"B\u00fasquedas"},{"location":"kb/GNU-Linux/Command%20Line/Vim%20masterclass/#navegar","text":"Si hemos arrancado vim a pelo desde la linea de comandos sin pasarle ning\u00fan archivo :w fichero o /ruta/fichero/absoluta/ \u2192 escribe en el archivo especificado :37 \u2192 va a la linea 37 :$ \u2192 va a la \u00faltima l\u00ednea :1 \u2192 va a la primera l\u00ednea","title":"Navegar"},{"location":"kb/GNU-Linux/Command%20Line/Vim%20masterclass/#edicion","text":"i = insert mode Esc = command mode v = visual mode a = append + modo inserci\u00f3n O = open above o = open new line below dd = borra linea d4d = borra 4 lineas 4dd = borra 4 lineas r = replace x = suprimir 4x = supr x 4 yy = copia linea 3yy = copia 3 lineas y3y = copia 3 lineas p = (paste) pega linea(s) 4p = paste x 4 u = undo (infinitos) Crtl + r = redo Ctrl + n = autocompleta palabras :: /algo = busca \"algo\" Shift + j = join lines :1 = va a la linea 1 :5341 = va a la linea 5341 :$ = va a l final del file == Shift + g :w = write :wq = write & quit :x = write & quit Shift + zz = write and quit :new filename = open file (horizontal split) :vsplit filename ( vertical split )(Crtl+ww cambia de fichero) (Crtl+w2+ a\u00f1ade 2 lineas a esa ventana de fichero) (Crtl+w3- resta 3 lineas a esa ventana de fichero) :syntax on ( activa syntax highligh, resaltado colores ) :syntax off ( :syn off / :syn on ) :set ic :set number ( :set nu / :set nonu ) :set nonumber :! <command> -> ejecuta comando, muestra la salida por pantalla y vuelve a vim :.! <command>-> ejecuta comando e inserta la salida del mismo en vim :% s/a/b/g :. s/a/b/ :,+6 s/^/#/","title":"Edici\u00f3n"},{"location":"kb/GNU-Linux/Command%20Line/Vim%20masterclass/#vim-autocomplete-trick","text":"abre con vim un fichero ( vim vimpower.php ) :new /usr/share/vim/vim74/syntax/php.vim :hide a programar! ;) Pulsa Crtl+n para autocompletar cualquier funci\u00f3n! Nota: Podeis hacer esto con cualquier lenguaje de programacion del que vim tenga la sintaxis de colores definida. Si no lo encontrais ( cosa rara ), buscarlo en internet o en la pag de vim.org. Si nos venimos arriba, tambi\u00e9n podemos hacernos un esquema de color custom ;) Nota: Es posible que el path de /usr/share/vim/vim72/syntax/ ... pueda variar dependiendo de la versi\u00f3n de vim que tengamos instalada y/o de la distro de Linux. Sino siempre podeis descargaros Netbeans ;) Disponeis de versiones graficas tambien para vim en Windows y Mac, gvim, kvim. Otros editores cool: Sublime3, Brackets, Atom, notepadqq, notepad++ (solo para win ),...","title":"VIM autocomplete trick ;)"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/","text":"Command Line \u00b6 Existen distintos paquetes para emulaci\u00f3n de terminales, uno muy chulo es terminator Prompt \u00b6 El indicador en la parte izquierda donde podemos escribir: linux@debian:~$ _ Normalmente el prompt se define como: username@hostname:path$ Note En el prompt, el s\u00edmbolo ~ (altgr + \u00f1) indica siempre la home del usuario logueado. La tecla tab rellena comandos, archivos, directorios etc, usarla para ayuda man \u00b6 Para obtener ayuda acerca de un comando miramos las p\u00e1ginas del manual: man ls \u2192 p\u00e1g. del manual para el comando ls Dentro de man podemos usar: q \u2192 Salir / \u2192 Buscar en p\u00e1ginas n \u2192 siguiente resultado Shift + n \u2192 buscar hacia atr\u00e1s Estructura de una orden de comandos \u00b6 ls -lisa *.* | | | | | \\ args \\ \\ flags \\ Comando standard input, standard output y standard error \u00b6 Stdin \u2192 0 (Entrada) \u2192 normalmente el teclado Stdout \u2192 1 (Salida) \u2192 normalmente por pantalla Stderr \u2192 2 (Salida de error) \u2192 normalmente por pantalla Comandos B\u00e1sicos \u00b6 ls -l formato de lista largo - indica que es un fichero d- indica que es un directorio l - links s - sockets p - pipes o tuber\u00edas c - character devices (teclado, rat\u00f3n) b - block devices ( pendrive, hd) -la imprime los nombres de ficheros ocultos por comenzar con un . -lart ordena los ficheros por fecha y la r invierte dicho orden pwd \u2192 Indica el path absoluto de donde estamos en este momento. /home/linux En Linux todo cuelga del directorio raiz / cd \u2192 cambiar de directorio cd - \u2192 nos devuelve al directorio anterior donde est\u00e1bamos cd sin nada nos devuelve al home del usuario file <nombre del fichero> \u2192 Indica el tipo de fichero mkdir / rmdir \u2192 crear / eliminar directorios cd /tmp mkdir cesta/fruta/peras (No funciona) mkdir -p cesta/fruta/peras (El parametro -p de parent permite hacerlo) pueden utilizarse rangos: mkdir -p cesta/fruta/{peras,manzanas}/kaka mkdir -p cesta/fruta/{1,2,3}/kaka cp \u2192 Copia de ficheros cp origen destino mv \u2192 Elimina el fichero de origen touch filename \u2192 crea un archivo rm -rf <directory> \u2192 borra el directorio y todo lo que contiene de forma recursiva y forzada. !ojo! Atajos Bash - B\u00e1sico \u00b6 Comando Funci\u00f3n Ctrl-a Mueve al principio de la linea Ctrl-e Mueve al final de la linea. Ctrl-b Move back one character. Alt-b Move back one word. Ctrl-f Move forward one character. Alt-f Move forward one word. Ctrl-] x Where x is any character, moves the cursor forward to the next occurance of x. Alt-Ctrl-] x Where x is any character, moves the cursor backwards to the previous occurance of x. Ctrl-u Delete from the cursor to the beginning of the line. Ctrl-k Delete from the cursor to the end of the line. Ctrl-w Delete from the cursor to the start of the word. Esc-Del Delete previous word (may not work, instead try Esc followed by Backspace) Ctrl-y Pastes text from the clipboard. Ctrl-l Clear the screen leaving the current line at the top of the screen. Ctrl-x Ctrl-u Undo the last changes. Ctrl-_ does the same Alt-r Undo all changes to the line. Alt-Ctrl-e Expand command line. Ctrl-r Incremental reverse search of history. Alt-p Non-incremental reverse search of history. !! Execute last command in history !abc Execute last command in history beginning with abc !abc:p Print last command in history beginning with abc !n Execute nth command in history !$ Last argument of last command !^ First argument of last command abc xyz Replace first occurance of abc with xyz in last command and execute it Ctrl + w \u2192 borra una palabra Ctrl + y \u2192 Pega esa palabra Ctrl + l \u2192 borra la pantalla Ctrl + cursor dcha / izda \u2192 avanza/retrocede por las palabras Ctrl + k \u2192 borra desde el cursor hasta el final de linea Ctrl + u \u2192 borra desde el cursor hasta el principio de linea Ctrl + y \u2192 pega lo borrado Ctrl + j \u2192 equivale a la tecla Enter Ctrl + d \u2192 finaliza la sesi\u00f3n Ctrl + c \u2192 hace un \u201cbreak\u201d para interrumpir el proceso Ctrl + z \u2192 detiene un proceso y lo deja \u201ccongelado\u201d Ctrl + r \u2192 busca en la historia del comando history Shift + ret.pag/av.pag \u2192 hace scroll History Expansion \u00b6 Cursores arriba/abajo navegar entre la historia History Ver el historial de comandos ejecutados Ctrl + R y comienza a teclear un comando para ver los resultados ls /etc/passwd ^ls^vim^ \u2192 cambia el comando ls por vim en el \u00faltimo comando ejecutado !! \u2192 ejecuta el \u00faltimo comando otra vez !34 \u2192 Ejecuta el comando 34 del historial !-5 \u2192 ejecuta el comando \u201chace 5 comandos\u201d !?apache \u2192 ejecuta el \u00faltimo comando que contiene apache http://www.thegeekstuff.com/2011/08/bash-history-expansion/ Recopilaci\u00f3n de comandos Linux \u00b6 Informaci\u00f3n del sistema \u00b6 Comando Funci\u00f3n arch mostrar la arquitectura de la m\u00e1quina (1). uname -m mostrar la arquitectura de la m\u00e1quina (2). uname -r mostrar la versi\u00f3n del kernel usado. uname -a mostrar la informaci\u00f3n completa. lsb_release -a mostrar la informaci\u00f3n completa de la distribuci\u00f3n. cat /etc/issue mostrar el nombre de la distribuci\u00f3n dmidecode -q mostrar los componentes (hardware) del sistema. hdparm -i /dev/hda mostrar las caracter\u00edsticas de un disco duro. hdparm -tT /dev/sda realizar prueba de lectura en un disco duro. cat /proc/cpuinfo mostrar informaci\u00f3n de la CPU. grep -c ^processor /proc/cpuinfo mostrar n\u00famero de procesadores. cat /proc/interrupts mostrar las interrupciones. cat /proc/meminfo verificar el uso de memoria. cat /proc/swaps mostrar ficheros swap. cat /proc/version mostrar la versi\u00f3n del kernel. cat /proc/net/dev mostrar adaptadores de red y estad\u00edsticas. cat /proc/mounts mostrar el sistema de ficheros montado. lscpu mostrar informaci\u00f3n sobre el microprocesador. lspci -tv mostrar los dispositivos PCI. lsusb -tv mostrar los dispositivos USB. lshw listar el hardware. discover listar el hardware. date mostrar la fecha del sistema. cal 2011 mostrar el almanaque de 2011. cal 07 2011 mostrar el almanaque para el mes julio de 2011. date 041217002011.00 colocar (declarar, ajustar) fecha y hora. clock -w guardar los cambios de fecha en la BIOS. blkid mostrar informaci\u00f3n (nombre, etiqueta, UUID, tipo de partici\u00f3n) sobre los dispositivos de bloque (discos r\u00edgidos, etc.) Apagar, reiniciar o cerrar sesi\u00f3n \u00b6 Comando Funci\u00f3n shutdown -h now apagar el sistema (1). init 0 apagar el sistema (2). telinit 0 apagar el sistema (3). halt apagar el sistema (4). poweroff apagar sistema (5). shutdown -h hours:minutes & apagado planificado del sistema. shutdown -c cancelar un apagado planificado del sistema. shutdown -r now reiniciar (1). reboot reiniciar (2). logout cerrar sesi\u00f3n. skill nombre_de_usuario cerrar sesi\u00f3n (2)1) exit salir del int\u00e9rprete de comandos (si solo hay uno, equivale a cerrar sesi\u00f3n). Gestionar archivos y directorios \u00b6 Comando Funci\u00f3n cd ir al directorio personal. cd /home cambiar al directorio \u201c/home\u201d. cd .. retroceder un nivel. cd ../.. retroceder 2 niveles. cd ~user1 ir al directorio user1. cd - ir (regresar) al directorio anterior. pwd mostrar el camino del directorio actual. ls listar el contenido de un directorio. ls -F listar el contenido de un directorio (distinguiendo los directorios con una barra) ls -l listar el contenido de un directorio, mostrando los detalles. ls -lh listar el contenido de un directorio, mostrando los detalles (y el tama\u00f1o en un formato \u201chumanizado\u201d). ls -a listar el contenido de un directorio, incluendo los ficheros ocultos. ls *[0-9] listar los ficheros y carpetas que contienen n\u00fameros. ls -laR less tree mostrar los ficheros y carpetas en forma de \u00e1rbol comenzando por la ra\u00edz.(1) lstree mostrar los ficheros y carpetas en forma de \u00e1rbol comenzando por la ra\u00edz.(2) mkdir dir1 crear un directorio de nombre \u2018dir1\u2019. mkdir dir1 dir2 crear dos directorios a la vez (en la ubicaci\u00f3n actual). mkdir -p /tmp/dir1/dir2 crear una estructura de directorios, si no existe. rm file1 eliminar el archivo \u2018file1\u2019. rm -f file1 eliminar el archivo \u2018file1\u2019 en modo forzado. rmdir dir1 borrar el directorio \u2018dir1\u2019. rm -rf dir1 eliminar recursivamente y en modo forzado el directorio \u2018dir1\u2019 con todo lo que contenga. rm -rf dir1 dir2 borrar dos directorios con su contenido de forma recursiva. mv dir1 new_dir renombrar o mover un fichero o carpeta (directorio). cp file1 destino/ copiar un fichero al destino elegido. cp file1 file2 destino/ copiar a la vez dos ficheros a un mismo directorio. cp file1 file2 copiar file1 en file2. cp dir /* . copiar todos los ficheros de un directorio dentro del directorio de trabajo actual. cp -a /tmp/dir1 . copiar un directorio dentro del directorio actual de trabajo. cp -a dir1 copiar un directorio. cp -a dir1 dir2 copiar dos directorio al un\u00edsono. ln -s file1 lnk1 crear un enlace simb\u00f3lico al fichero o directorio. ln file1 lnk1 crear un enlace f\u00edsico al fichero o directorio. touch file1 actualizar la fecha de modificaci\u00f3n de file1, o crearlo si no existe. touch -t 0712250000 file1 modificar el tiempo real (tiempo de creaci\u00f3n) de un fichero o directorio. file file1 salida (volcado en pantalla) del tipo mime de un fichero texto. iconv -l listas de cifrados conocidos. iconv -f fromEncoding -t toEncoding inputFile > outputFile crea una nueva forma del fichero de entrada asumiendo que est\u00e1 codificado en fromEncoding y convirti\u00e9ndolo a ToEncoding. Encontrar archivos \u00b6 Comando Funci\u00f3n find / -name file1 buscar fichero y directorio a partir de la ra\u00edz del sistema. find / -user user1 buscar ficheros y directorios pertenecientes al usuario \u201cuser1\u201d. find /home/user1 -name *.bin buscar ficheros con extensi\u00f3n \u201d. bin\u201d dentro del directorio / home/user1. find /usr/bin -type f -atime +100 buscar ficheros binarios no usados en los \u00faltimos 100 d\u00edas. find /usr/bin -type f -mtime -10 buscar ficheros creados o cambiados dentro de los \u00faltimos 10 d\u00edas. find / -name *.rpm -exec chmod 755 '{}' \\; buscar ficheros con extensi\u00f3n \u201d.rpm\u201d y modificar permisos. find . -type f -print0 xargs -0 chmod 644 find / -xdev -name *.rpm Buscar ficheros con extensi\u00f3n \u2018.rpm\u2019 ignorando los dispositivos removibles como cdrom, pen-drive, etc.\u2026 find . -maxdepth 1 -name *.jpg -print -exec convert \"{}\" -resize 80\u00d760 \"thumbs/{}\" \\; agrupar ficheros redimensionados en el directorio actual y enviarlos a directorios en vistas de miniaturas (requiere convertir desde Imagemagick). find /tmp/dir1 -depth -regextype posix-extended -regex '.*(\\s+ :+ locate *.ps encuentra ficheros con extensi\u00f3n \u201d.ps\u201d ejecutados primeramente con el command updatedb. whereis halt mostrar la ubicaci\u00f3n de un fichero binario, de ayuda o fuente. En este caso pregunta d\u00f3nde est\u00e1 el comando halt. which comando mostrar la ruta completa a un comando. Montando un sistema de ficheros \u00b6 Comando Funci\u00f3n mount /dev/hda2 /mnt/hda2 montar un disco llamado hda2. Verifique primero la existencia del directorio \u2018/ mnt/hda2\u2019; si no est\u00e1, debe crearlo. umount /dev/hda2 desmontar un disco llamado hda2. (Antes es necesario salir del punto \u2018/mnt/hda2\u2019. fuser -km /mnt/hda2 forzar el desmontaje cuando el dispositivo est\u00e1 ocupado. umount -n /mnt/hda2 correr el desmontaje sin leer el fichero /etc/mtab. \u00datil cuando el fichero es de solo lectura o el disco duro est\u00e1 lleno. mount /dev/fd0 /mnt/floppy montar un disco flexible (floppy). mount /dev/cdrom /mnt/cdrom montar un cdrom / dvdrom. mount /dev/hdc /mnt/cdrecorder montar un cd regrabable o un dvdrom. mount /dev/hdb /mnt/cdrecorder montar un cd regrabable / dvdrom (un dvd). mount -t udf,iso9660 -o loop file.iso /mnt/cdrom montar un fichero de imagen de un medio \u00f3ptico (como un CD o DVD en formato ISO). mount -t vfat /dev/hda5 /mnt/hda5 montar un sistema de ficheros FAT32. mount -t ntfs-3g /dev/hda5 /mnt/hda5 montar un sistema de ficheros NTFS. mount /dev/sda1 /mnt/usbdisk montar un usb pen-drive o una memoria (sin especificar el tipo de sistema de ficheros). Espacio en disco \u00b6 Comando Funci\u00f3n df -h mostrar una lista de las particiones montadas. ls -lSr more du -sh dir1 Estimar el espacio usado por el directorio \u2018dir1\u2019. du -sk * sort -nr du -h --max-depth=1 sort -nr du -k --max-depth=1 sort -k1 -nr rpm -q -a --qf '%10{SIZE}t%{NAME}n' sort -k1,1n dpkg-query -W -f=' \\({Package}\\t\\) \\n' sort -k 2 -nr Usuarios y grupos \u00b6 Comando Funci\u00f3n groupadd nombre_del_grupo crear un nuevo grupo. groupdel nombre_del_grupo borrar un grupo. groupmod -n nuevo_nombre_del_grupo viejo_nombre_del_grupo renombrar un grupo. adduser usuario1 Crear un nuevo usuario, mediante un asistente. useradd -c \"Nombre Apellido\" -g admin -d /home/usuario1 -s /bin/bash usuario1 Crear un nuevo usuario perteneciente al grupo \u201cadmin\u201d. useradd usuario1 crear un nuevo usuario. userdel -r usuario1 borrar un usuario, eliminando su directorio Home. usermod -c \"Usuario de FTP\" -g system -d /ftp/usuario1 -s /sbin/nologin usuario1 cambiar los atributos de un usuario. usermod -aG plugdev,dialout,pip user1 agregar el usuario user1 a otros grupos existentes, para incrementar sus permisos (en este caso, agregar la posibilidad de conectar dispositivos, configurar y utilizar el modem) passwd cambiar contrase\u00f1a. passwd usuario1 cambiar la contrase\u00f1a de \u2018usuario1\u2019 (solamente ejecutable como superusuario). chage -E 2011-12-31 user1 colocar un plazo para la contrase\u00f1a del usuario. En este caso dice que la clave expira el 31 de diciembre de 2011. pwck chequear la sintaxis correcta el formato de fichero de \u2018/etc/passwd\u2019 y la existencia de usuarios. grpck chequear la sintaxis correcta y el formato del fichero \u2018/etc/group\u2019 y la existencia de grupos. newgrp grupo1 registra a un nuevo grupo para cambiar el grupo predeterminado de los ficheros creados recientemente. Permisos en ficheros (usar \u00ab+\u00bb para colocar permisos y \u00ab-\u00bb para eliminar) \u00b6 Comando Funci\u00f3n ls -lh Mostrar permisos. ls /tmp pr -T5 -W$COLUMNS chmod ugo+rwx directory1 colocar permisos de lectura \u00ae, escritura (w) y ejecuci\u00f3n(x) al propietario (u), al grupo (g) y a otros (o) sobre el directorio \u2018directory1\u2019. chmod go-rwx directory1 quitar permiso de lectura \u00ae, escritura (w) y (x) ejecuci\u00f3n al grupo (g) y otros (o) sobre el directorio \u2018directory1\u2019. chown user1 file1 cambiar el due\u00f1o de un fichero. chown -R user1 directory1 cambiar el propietario de un directorio y de todos los ficheros y directorios contenidos dentro. chgrp group1 file1 cambiar grupo de ficheros. chown user1:group1 file1 cambiar usuario y el grupo propietario de un fichero. find / -perm -u+s visualizar todos los ficheros del sistema con SUID configurado. chmod u+s /bin/file1 colocar el bit SUID en un fichero binario. El usuario que corriendo ese fichero adquiere los mismos privilegios como due\u00f1o. chmod u-s /bin/file1 deshabilitar el bit SUID en un fichero binario. chmod g+s /home/public colocar un bit SGID en un directorio \u2013similar al SUID pero por directorio. chmod g-s /home/public desabilitar un bit SGID en un directorio. chmod o+t /home/public colocar un bit STIKY en un directorio. Permite el borrado de ficheros solamente a los due\u00f1os leg\u00edtimos. chmod o-t /home/public desabilitar un bit STIKY en un directorio. Atributos especiales en ficheros (usar \u00ab+\u00bb para colocar permisos y \u00ab-\u00bb para eliminar) \u00b6 Comando Funci\u00f3n chattr +a file1 permite escribir abriendo un fichero solamente modo append. chattr +c file1 permite que un fichero sea comprimido / descomprimido automaticamente. chattr +d file1 asegura que el programa ignore borrar los ficheros durante la copia de seguridad. chattr +i file1 convierte el fichero en inmutable o invariable, por lo que no puede ser eliminado, alterado, renombrado, ni enlazado. chattr +s file1 permite que un fichero sea borrado de forma segura. chattr +S file1 asegura que un fichero sea modificado, los cambios son escritos en modo synchronous como con sync. chattr +u file1 te permite recuperar el contenido de un fichero a\u00fan si este est\u00e1 cancelado. lsattr mostrar atributos especiales. Archivos y ficheros comprimidos \u00b6 Comando Funci\u00f3n 7za a -mx=9 -ms=on -mhe=on -p archivocomprimido directorio1 archivo1 archivo2 comprimir un directorio y dos archivos en formato 7zip, con compresi\u00f3n s\u00f3lida m\u00e1xima, y protecci\u00f3n por contrase\u00f1a (la extensi\u00f3n 7z se agrega autom\u00e1ticamente). 7za x archivocomprimido.7z extraer un archivo comprimido en 7zip (7zip tambi\u00e9n permite descomprimir otros formatos, como por ejemplo, zip). bunzip2 file1.bz2 descomprime in fichero llamado \u2018file1.bz2\u2019. bzip2 file1 comprime un fichero llamado \u2018file1\u2019. gunzip file1.gz descomprime un fichero llamado \u2018file1.gz\u2019. gzip file1 comprime un fichero llamado \u2018file1\u2019. gzip -9 file1 comprime con compresi\u00f3n m\u00e1xima. rar a file1.rar test_file crear un fichero rar llamado \u2018file1.rar\u2019. rar a file1.rar file1 file2 dir1 comprimir \u2018file1\u2019, \u2018file2\u2019 y \u2018dir1\u2019 simult\u00e1neamente. rar x file1.rar descomprimir archivo rar. unrar x file1.rar descomprimir archivo rar. tar -cvf archive.tar file1 crear un tarball descomprimido. tar -cvf archive.tar file1 file2 dir1 crear un archivo conteniendo \u2018file1\u2019, \u2018file2\u2032 y\u2019dir1\u2019. tar -tf archive.tar mostrar los contenidos de un archivo. tar -xvf archive.tar extraer un tarball (si el archivo adem\u00e1s est\u00e1 comprimido con gzip, bzip2 o xz, descomprimirlo autom\u00e1ticamente). tar -xvf archive.tar -C /tmp extraer un tarball en /tmp. tar -cjvf archive.tar.bz2 dir1 crear un tarball comprimido en bzip2. tar -xjvf archive.tar.bz2 descomprimir un archivo tar comprimido en bzip2 tar -cJvf archive.tar.xz dir1 crear un tarball comprimido en xz. XZ_OPT=-9e tar -cJvf archive.tar.xz dir1 crear un tarball comprimido en xz (con m\u00e1xima compresi\u00f3n). tar -xJvf archive.tar.xz descomprimir un archivo tar comprimido en xz. tar -czvf archive.tar.gz dir1 crear un tarball comprimido en gzip. tar -I pigz -cf archive.tar.gz dir1 crear un tarball comprimido en gzip, pero utilizando pigz, que comprime en paralelo aprovechando todos los n\u00facleos de los microprocesadores del equipo. GZIP=-9 tar -czvf archive.tar.gz dir1 crear un tarball comprimido en gzip (con m\u00e1xima compresi\u00f3n). tar -xzvf archive.tar.gz descomprimir un archive tar comprimido en gzip. zip file1.zip file1 crear un archivo comprimido en zip. zip -r file1.zip file1 file2 dir1 comprimir, en zip, varios archivos y directorios de forma simult\u00e1nea. unzip file1.zip descomprimir un archivo zip. Paquetes rpm (Red Hat, Fedora y similares) \u00b6 Comando Funci\u00f3n rpm -ivh package.rpm instalar un paquete rpm. rpm -ivh --nodeeps package.rpm instalar un paquete rpm ignorando las peticiones de dependencias. rpm -U package.rpm actualizar un paquete rpm sin cambiar la configuraci\u00f3n de los ficheros. rpm -F package.rpm actualizar un paquete rpm solamente si este est\u00e1 instalado. rpm -e package_name.rpm eliminar un paquete rpm. rpm -qa mostrar todos los paquetes rpm instalados en el sistema. rpm -qa grep httpd rpm -qi package_name obtener informaci\u00f3n en un paquete espec\u00edfico instalado. rpm -qg \"System Environment/Daemons\" mostar los paquetes rpm de un grupo software. rpm -ql package_name mostrar lista de ficheros dados por un paquete rpm instalado. rpm -qc package_name mostrar lista de configuraci\u00f3n de ficheros dados por un paquete rpm instalado. rpm -q package_name --whatrequires mostrar lista de dependencias solicitada para un paquete rpm. rpm -q package_name --whatprovides mostar la capacidad dada por un paquete rpm. rpm -q package_name --scripts mostrar los scripts comenzados durante la instalaci\u00f3n /eliminaci\u00f3n. rpm -q package_name --changelog mostar el historial de revisions de un paquete rpm. rpm -qf /etc/httpd/conf/httpd.conf verificar cu\u00e1l paquete rpm pertenece a un fichero dado. rpm -qp package.rpm -l mostrar lista de ficheros dados por un paquete rpm que a\u00fan no ha sido instalado. rpm --import /media/cdrom/RPM-GPG-KEY importar la firma digital de la llave p\u00fablica. rpm --checksig package.rpm verificar la integridad de un paquete rpm. rpm -qa gpg-pubkey verificar la integridad de todos los paquetes rpm instalados. rpm -V package_name chequear el tama\u00f1o del fichero, licencias, tipos, due\u00f1o, grupo, chequeo de resumen de MD5 y \u00faltima modificaci\u00f3n. rpm -Va chequear todos los paquetes rpm instalados en el sistema. Usar con cuidado. rpm -Vp package.rpm verificar un paquete rpm no instalado todav\u00eda. rpm2cpio package.rpm cpio --extract --make-directories *bin rpm -ivh /usr/src/redhat/RPMS/ arch /package.rpm instalar un paquete construido desde una fuente rpm. rpmbuild --rebuild package_name.src.rpm construir un paquete rpm desde una fuente rpm. Actualizador de paquetes yum (Fedora, Redhat y otros) \u00b6 Comando Funci\u00f3n yum install package_name descargar e instalar un paquete rpm. yum localinstall package_name.rpm este instalar\u00e1 un RPM y tratar\u00e1 de resolver todas las dependencies para ti, usando tus repositorios. yum update actualizar todos los paquetes rpm instalados en el sistema. yum update package_name modernizar / actualizar un paquete rpm. yum remove package_name eliminar un paquete rpm. yum list listar todos los paquetes instalados en el sistema. yum search package_name Encontrar un paquete en repositorio rpm. yum clean packages limpiar un cach\u00e9 rpm borrando los paquetes descargados. yum clean headers eliminar todos los ficheros de encabezamiento que el sistema usa para resolver la dependencia. yum clean all eliminar desde los paquetes cach\u00e9 y ficheros de encabezado. Gesti\u00f3n de paquetes deb (Debian, Ubuntu y otros) \u00b6 Comando Funci\u00f3n dpkg -i elpaquete.deb instalar / actualizar un paquete. dpkg -r elpaquete eliminar un paquete deb del sistema. dpkg -l mostrar todos los paquetes deb instalados en el sistema. dpkg -l grep httpd dpkg -s elpaquete obtener informaci\u00f3n en un paquete espec\u00edfico instalado en el sistema. dpkg -L elpaquete mostar lista de ficheros utilizados por un paquete instalado en el sistema. dpkg -c elpaquete.deb mostrar contenido de un paquete (no necesariamente instalado). dpkg -S /bin/ping verificar a qu\u00e9 paquete pertenece un fichero dado. Actualizador de paquetes apt y aptitude (Debian, Ubuntu y otros) \u00b6 Comando Funci\u00f3n apt-get install package_name instalar / actualizar un paquete deb. apt-cdrom install package_name instalar / actualizar un paquete deb desde un cdrom. apt-get update actualizar la lista de paquetes. apt-get upgrade actualizar todos los paquetes instalados. apt-get remove package_name eliminar un paquete deb del sistema. apt-get check verificar la correcta resoluci\u00f3n de las dependencias. apt-get clean limpiar cache desde los paquetes descargados. apt-cache search searched-package retorna lista de paquetes que corresponde a la serie \u00abpaquetes buscados\u00bb. aptitude search paquete busca un paquete por el nombre. aptitude search ~dpaquete busca un paquete por la descripci\u00f3n. aptitude show paquete less aptitude install paquete1 paquete2 \u2026 instala varios paquetes con sus dependencias y recomendaciones. aptitude -R install paquete instala un paquete con sus dependencias, pero sin las recomendaciones. aptitude why paquete lista las razones por las que se deber\u00eda instalar el paquete. aptitude why-not paquete lista las razones por las que no se puede instalar el paquete. aptitude -rsvW install paquete simula la instalaci\u00f3n de un paquete con sus dependencias y recomendaciones, detallando cada una. aptitude remove paquete desinstala un paquete. aptitude purge paquete desinstala un paquete y lo limpia de la cache. aptitude clean limpia la cache de paquetes. apt-file -xi search 'sql\u2018 busca todos los paquetes que contengan un archivo o directorio con la expresi\u00f3n sql (sin considerar may\u00fasculas o min\u00fasculas).3) Ver el contenido de un fichero \u00b6 Comando Funci\u00f3n cat file1 ver los contenidos de un fichero comenzando desde la primera l\u00ednea. tac file1 ver los contenidos de un fichero comenzando desde la \u00faltima l\u00ednea. more file1 ver el contenido de un fichero de manera paginada. less file1 parecido al commando \u2018more\u2019 pero permite avanzar, retroceder, y buscar (compatible con algunos comandos de vi). head -2 file1 ver las dos primeras l\u00edneas de un fichero (\u00f3 10, si no se especifica la cantidad de l\u00edneas). tail -2 file1 ver las dos \u00faltimas l\u00edneas de un fichero (\u00f3 10, si no se especifica la cantidad de l\u00edneas). Manipulaci\u00f3n de texto \u00b6 Comando Funci\u00f3n cat file1 file2 \u2026 command <> file1_in.txt_or_file1_out.txt cat file1 command( sed, grep, awk, grep, etc\u2026) > result.txt cat file1 command( sed, grep, awk, grep, etc\u2026) >> result.txt grep Aug /var/log/messages buscar palabras \u201cAug\u201d en el fichero \u2018/var/log/messages\u2019. grep ^Aug /var/log/messages buscar palabras que comienzan con \u201cAug\u201d en fichero \u2018/var/log/messages\u2019 grep [0-9] /var/log/messages seleccionar todas las l\u00edneas del fichero \u2018/var/log/messages\u2019 que contienen n\u00fameros. grep Aug -R /var/log/ buscar la cadena \u201cAug\u201d en el directorio \u2018/var/log\u2019 y debajo. sed 's/string1/string2/g' ejemplo.txt reemplazar en ejemplo.txt todas las ocurrencias de \u201cstring1\u201d con \u201cstring2\u201d sed '/^$/d' ejemplo.txt eliminar todas las l\u00edneas en blanco desde el ejemplo.txt sed '/ *#/d; /^$/d' ejemplo.txt eliminar comentarios y l\u00edneas en blanco de ejemplo.txt echo 'ejemplo' tr '[:lower:]' '[:upper:]\u2018 sed -e '1d' ejemplo.txt elimina la primera l\u00ednea del fichero ejemplo.txt sed -n '/string1/p\u2018 visualizar solamente las l\u00edneas que contienen la palabra \u201cstring1\u201d. sed -r 's/(cadena1)(cadena2)/\\2\\1/g\u2018 utilizar expresiones regulares extendidas para intercambiar el orden de dos cadenas de texto, en todas las instancias que aparezcan. Establecer caracter y conversi\u00f3n de ficheros \u00b6 Comando Funci\u00f3n dos2unix filedos.txt fileunix.txt convertir un formato de fichero texto desde MSDOS a UNIX. unix2dos fileunix.txt filedos.txt convertir un formato de fichero de texto desde UNIX a MSDOS. recode ..HTML < page.txt > page.html convertir un fichero de texto en html. recode -l more An\u00e1lisis del sistema de ficheros \u00b6 Comando Funci\u00f3n badblocks -v /dev/hda1 Chequear los bloques defectuosos en el disco hda1. fsck /dev/hda1 reparar / chequear la integridad del fichero del sistema Linux en el disco hda1. fsck.ext2 /dev/hda1 reparar / chequear la integridad del fichero del sistema ext 2 en el disco hda1. e2fsck /dev/hda1 reparar / chequear la integridad del fichero del sistema ext 2 en el disco hda1. e2fsck -j /dev/hda1 reparar / chequear la integridad del fichero del sistema ext 3 en el disco hda1. fsck.ext3 /dev/hda1 reparar / chequear la integridad del fichero del sistema ext 3 en el disco hda1. fsck.vfat /dev/hda1 reparar / chequear la integridad del fichero sistema fat en el disco hda1. fsck.msdos /dev/hda1 reparar / chequear la integridad de un fichero del sistema dos en el disco hda1. dosfsck /dev/hda1 reparar / chequear la integridad de un fichero del sistema dos en el disco hda1. Formatear un sistema de ficheros \u00b6 Comando Funci\u00f3n mkfs /dev/hda1 crear un fichero de sistema tipo Linux en la partici\u00f3n hda1. mke2fs /dev/hda1 crear un fichero de sistema tipo Linux ext 2 en hda1. mke2fs -j /dev/hda1 crear un fichero de sistema tipo Linux ext3 (peri\u00f3dico) en la partici\u00f3n hda1. mkfs -t vfat 32 -F /dev/hda1 crear un fichero de sistema FAT32 en hda1. fdformat -n /dev/fd0 formatear un disco flooply. mkswap /dev/hda3 crear un fichero de sistema swap. Partici\u00f3n de sistema swap \u00b6 Comando Funci\u00f3n mkswap /dev/hda3 crear fichero de sistema swap. swapon /dev/hda3 activando una nueva partici\u00f3n swap. swapon /dev/hda2 /dev/hdb3 activar dos particiones swap. Copias de seguridad \u00b6 Comando Funci\u00f3n dump -0aj -f /tmp/home0.bak /home hacer una copia completa del directorio \u2018/home\u2019. dump -1aj -f /tmp/home0.bak /home hacer una copia incremental del directorio \u2018/home\u2019. restore -if /tmp/home0.bak restaurando una copia interactivamente. rsync -rogpav --delete /home /tmp sincronizaci\u00f3n entre directorios. rsync -rogpav -e ssh --delete /home ip_address:/tmp rsync a trav\u00e9s del t\u00fanel SSH. rsync -az -e ssh --delete ip_addr:/home/public /home/local sincronizar un directorio local con un directorio remoto a trav\u00e9s de ssh y de compresi\u00f3n. rsync -az -e ssh --delete /home/local ip_addr:/home/public sincronizar un directorio remoto con un directorio local a trav\u00e9s de ssh y de compresi\u00f3n. dd bs=1M if=/dev/hda gzip dd if=/dev/sda of=/tmp/file1 copiar el contenido de un disco duro a un fichero. (En este caso el disco duro es \u201csda\u201d y el fichero \u201cfile1\u201d). tar -Puf backup.tar /home/user hacer una copia incremental del directorio \u2018/home/user\u2019. tar -czv --exclude=/root/dir1/* -f /var/copias/cfg_$(date +%F_%H%M).tgz /etc /root copiar los directorios /etc y /root (excluyendo el contenido del subdirectorio /root/dir1/) en un archivo comprimido, cuyo nombre contenga la fecha y hora actual. ( cd /tmp/local/ && tar c . ) ssh -C user@ip_addr 'cd /home/share/ && tar x -p\u2018 ( tar c /home ) ssh -C user@ip_addr 'cd /home/backup-home && tar x -p\u2018 tar cf - . (cd /tmp/backup ; tar xf - ) find /home/user1 -name '*.txt' xargs cp -av --target-directory=/home/backup/ --parents find ~/ -type f -not -iname ' .mp ' -not \\( -iregex '.*\\.mozilla/.*' -o -iregex '.*\\.thumbnails/.*' \\) -prune -mtime 14 -print0 xargs -0 tar -czf /var/copias/myhome.tgz find /var/log -name '*.log' tar cv --files-from=- dd if=/dev/hda of=/dev/fd0 bs=512 count=1 hacer una copia del MRB (Master Boot Record) a un disco floppy. dd if=/dev/fd0 of=/dev/hda bs=512 count=1 restaurar la copia del MBR (Master Boot Record) copiada en un floppy. CDROM \u00b6 Comando Funci\u00f3n cdrecord -v gracetime=2 dev=/dev/cdrom -eject blank=fast -force limpiar o borrar un cd regrabable. mkisofs /dev/cdrom > cd.iso crear una imagen iso de cdrom en disco. mkisofs /dev/cdrom gzip > cd_iso.gz mkisofs -J -allow-leading-dots -R -V \u201cLabel CD\u201d -iso-level 4 -o ./cd.iso data_cd crear una imagen iso de un directorio. cdrecord -v dev=/dev/cdrom cd.iso quemar una imagen iso. gzip -dc cd_iso.gz cdrecord dev=/dev/cdrom - mount -t udf,iso9660 -o loop cd.iso /mnt/iso montar una imagen iso. cd-paranoia -B llevar canciones de un cd a ficheros wav. cd-paranoia -- \u201d-3\u201d llevar las 3 primeras canciones de un cd a ficheros wav. cdrecord --scanbus escanear bus para identificar el canal scsi. dd if=/dev/hdc md5sum eject -v expulsar un medio o disco extra\u00edble, ofreciendo informaci\u00f3n adicional. Trabajo con la red (LAN Y WIFI) \u00b6 Comando Funci\u00f3n ifconfig eth0 mostrar la configuraci\u00f3n de una interfaz de red Ethernet. ifup eth0 activar la interfaz eth0. ifdown eth0 deshabilitar la interfaz eth0. ifconfig eth0 192.168.1.1 netmask 255.255.255.0 configurar una direcci\u00f3n IP. ifconfig eth0 promisc configurar eth0 en modo promiscuo para obtener los paquetes (sniffing). dhclient eth0 activar la interface \u2018eth0\u2019 en modo dhcp. route -n mostrar tabla de rutas. route add -net 0/0 gw IP_Gateway configurar entrada predeterminada. ip route show grep default route add -net 192.168.0.0 netmask 255.255.0.0 gw 192.168.1.1 configurar ruta est\u00e1tica para buscar la red 192.168.0.0/16. route del 0/0 gw IP_gateway eliminar la ruta est\u00e1tica. echo 1 > /proc/sys/net/ipv4/ip_forward activar el redireccionamiento de paquetes ip. hostname mostrar el nombre del host del sistema. host www.example.com buscar el nombre del host para resolver el nombre a una direcci\u00f3n ip (1). nslookup www.example.com buscar el nombre del host para resolver el nombre a una direcci\u00f3m ip y viceversa (2). ip link show mostar el estado de enlace de todas las interfaces. mii-tool eth0 mostar el estado de enlace de eth0. ethtool eth0 mostrar las estad\u00edsticas de la interfaz de red eth0. netstat -tup mostrar todas las conexiones de red activas y sus PID. netstat -tupl mostrar todos los servicios de escucha de red en el sistema y sus PID. netstat -punta mostrar todas las conexiones activas por direcci\u00f3n IP y puerto. tcpdump tcp port 80 mostrar todo el tr\u00e1fico HTTP. iwlist scan mostrar las redes inal\u00e1mbricas. iwconfig eth1 mostrar la configuraci\u00f3n de una interfaz de red inal\u00e1mbrica. whois www.example.com buscar en base de datos Whois. iftop -nNP -i eth0 mostrar en tiempo real las conexiones abiertas en eth0 y su tasa de transferencia. sockstat mostrar informaci\u00f3n sobre las conexiones abiertas. arp-scan -l descubrir en la red las direcciones IP y MAC. nm-tool muestra configuraci\u00f3n de red (en caso de usar Network Manager obtiene los DNS). Redes de Microsoft Windows (Samba) \u00b6 Comando Funci\u00f3n nbtscan ip_addr resoluci\u00f3n de nombre de red bios. nmblookup -A ip_addr resoluci\u00f3n de nombre de red bios. smbclient -L ip_addr/hostname mostrar acciones remotas de un host en windows. Cortafuegos (iptables) \u00b6 Comando Funci\u00f3n iptables -t filter -L mostrar todas las cadenas de la tabla de filtro. iptables -t nat -L mostrar todas las cadenas de la tabla nat. iptables -t filter -F limpiar todas las reglas de la tabla de filtro. iptables -t nat -F limpiar todas las reglas de la tabla nat. iptables -t filter -X borrar cualquier cadena creada por el usuario. iptables -t filter -A INPUT -p tcp --dport telnet -j ACCEPT permitir las conexiones telnet para entar. iptables -t filter -A OUTPUT -p tcp --dport http -j DROP bloquear las conexiones HTTP para salir. iptables -t filter -A FORWARD -p tcp --dport pop3 -j ACCEPT permitir las conexiones POP a una cadena delantera. iptables -t filter -A INPUT -p tcp -m multiport --dports 80,443,8080 -m state --state NEW -m limit --limit 4/sec --limit-burst 8 -j ACCEPT establecer un l\u00edmite de 4 peticiones por segundo de nuevas conexiones, con posibles r\u00e1fagas ocasionales (\u00fatil para pol\u00edticas de denegaci\u00f3n por defecto). iptables -t filter -A INPUT -p tcp -m multiport --dports 80,443,8080 -m state --state ESTABLISHED,RELATED -m connlimit ! --conlimit-above 6 -j ACCEPT establecer un l\u00edmite de 6 conexiones simult\u00e1neas por equipo a nuestro servidor web (\u00fatil para pol\u00edticas de denegaci\u00f3n por defecto). iptables -t filter -A INPUT -j LOG --log-prefix \u201cDROP INPUT\u201d registrando una cadena de entrada. iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE configurar un PAT (Puerto de traducci\u00f3n de direcci\u00f3n) en eth0, ocultando los paquetes de salida forzada. (Indicado para enlaces tipo ppp) iptables -t nat -A POSTROUTING -s 192.168.0.127 -o eth0 -j SNAT --to-source 169.158.158.169 enrutar los paquetes desde 192.168.0.127 hacia otras redes por eth0 y asignarles un direcci\u00f3n ip externa. (Indicado para enlaces tipo ADSL) iptables -t nat -A PREROUTING -d 192.168.0.1 -p tcp -m tcp --dport 22 -j DNAT --to-destination 10.0.0.2:22 redireccionar los paquetes diriguidos de un host a otro. iptables -t nat -S Listar todas las reglas activas en la tabla nat. iptables-save -c > archivo copiar las reglas en un archivo (incluyendo los contadores de paquetes y bytes). iptables-restore -c < archivo Restaurar las reglas desde un archivo (incluyendo los contadores de paquetes y bytes). Monitoreando y depurando \u00b6 Comando Funci\u00f3n top mostrar en tiempo real las tareas de linux. htop mostrar y gestionar las tareas con una interfaz amistosa. ps -eafw muestra las tareas Linux. ps -e -o pid,args --forest muestra las tareas Linux en un modo jer\u00e1rquico. ps -o pid,cmd -ww -C wget listar todas las instancias del comando wget con sus argumentos. pstree mostrar un \u00e1rbol sistema de procesos. pidof pppd mostrar el pid del proceso pppd. kill -9 ID_Processo forzar el cierre de un proceso y terminarlo. kill -1 ID_Processo forzar un proceso para recargar la configuraci\u00f3n. killall Nombre_Proceso terminar un proceso por el nombre del comando y no por el ID. kill -HUP $(ps -A -o state,pid --no-header grep -e '^[Zz]' lsof -p $$ mostrar una lista de ficheros abiertos por procesos. lsof /home/user1 muestra una lista de ficheros abiertos en un camino dado del sistema. strace -c ls >/dev/null mostrar las llamadas del sistema hechas y recibidas por un proceso. strace -f -e open ls >/dev/null mostrar las llamadas a la biblioteca. watch -n1 'cat /proc/interrupts\u2018 mostrar interrupciones en tiempo real. last reboot mostrar historial de reinicio. lsmod mostrar los m\u00f3dulos del kernel cargados. free -m muestra el estado de la RAM en megabytes. smartctl -A /dev/hda monitorear la fiabilidad de un disco duro a trav\u00e9s de SMART. smartctl -i /dev/hda chequear si SMART est\u00e1 activado en un disco duro. tail -f /var/log/dmesg mostrar eventos inherentes al proceso de carga del kernel. tail -f /var/log/messages mostrar los eventos del sistema. multitail --follow-all /var/log/{dmesg,messages} mostrar dos registros de eventos en una misma pantalla. Seguridad y Cifrado \u00b6 Comando Funci\u00f3n base64 /home/archivo > /home/archivo-codificado codifica \u201carchivo\u201d en \u2018base64\u2019 y lo guarda en /home base64 -d /home/archivo-codificado > /home/archivo decodifica \u201carchivo-codificado\u201d y lo guarda en /home openssl req -x509 -nodes -days 3650 -newkey rsa:1024 -out /etc/millave.crt -keyout /etc/millave.key crea un certificado auto-firmado para cifrar el tr\u00e1fico web con SSL. htpasswd -c -m /etc/apache2/.htpasswd nombreusuario genera un archivo \u2018.htpasswd\u2019 para proteger un sitio web con auntenticaci\u00f3n. Otros comandos \u00fatiles \u00b6 Comando Funci\u00f3n apropos palabraclave mostrar una lista de comandos que pertenecen a las palabras claves de un programa; son \u00fatiles cuando t\u00fa sabes qu\u00e9 hace tu programa, pero desconoces el nombre del comando. man ping mostrar las p\u00e1ginas del manual on-line; por ejemplo, en un comando ping, usar la opci\u00f3n \u2018-k\u2019 para encontrar cualquier comando relacionado. man -t ping ps2pdf - ping.pdf mkbootdisk --device /dev/fd0 uname -r crear un floppy boteable. gpg -c file1 codificar un fichero con guardia de seguridad GNU. gpg file1.gpg decodificar un fichero con Guardia de seguridad GNU. wget -r www.example.com descargar un sitio web completo. wget -c www.example.com/file.iso descargar un fichero con la posibilidad de parar la descargar y reanudar m\u00e1s tarde. echo 'wget -c www.example.com/files.iso ' at 09:00 ldd /usr/bin/ssh mostrar las bibliotecas compartidas requeridas por el programa ssh. alias hh='history\u2018 colocar un alias para un commando. En este caso, para invocar el historial con hh. chsh cambiar el comando Shell. chsh --list-shells es un comando adecuado para saber si tienes que hacer remoto en otra terminal. who -a mostrar quien est\u00e1 registrado, e imprimir hora del \u00faltimo sistema de importaci\u00f3n, procesos muertos, procesos de registro de sistema, procesos activos producidos por init, funcionamiento actual y \u00faltimos cambios del reloj del sistema. echo \"128*1024*1024\" bc sudo !! ejecutar como superusuario el \u00faltimo comando tecleado. clear limpiar la pantalla. uncomando > archivodesalida.txt 2>&1 ejecuta un comando y redirige la salida a un archivo, combinando en este tanto STDOUT como STDERR. uncomando > archivodesalida.txt 2> archivoerrores.txt ejecuta un comando, redirige la salida (STDOUT) a un archivo, y los errores (STDERR) a otro. uncomando | tee archivodesalida.txt ejecuta un comando, muestra la salida en la pantalla y simult\u00e1neamente la escribe a un archivo. 1) Es preciso ejecutarlo con privilegios de root. 2) Para conocer el l\u00edmite de argumentos que xargs admite, puede ejecutarse el comando echo | xargs --show-limits 3)Para que este comando funcione, despu\u00e9s de instalado el paquete apt-file es necesario invocar el comando apt-file update Fish \u00b6 Sustituir bash por fish \u00b6 sudo apt-get install fish chsh -s /usr/bin/fish","title":"Command line"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#command-line","text":"Existen distintos paquetes para emulaci\u00f3n de terminales, uno muy chulo es terminator","title":"Command Line"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#prompt","text":"El indicador en la parte izquierda donde podemos escribir: linux@debian:~$ _ Normalmente el prompt se define como: username@hostname:path$ Note En el prompt, el s\u00edmbolo ~ (altgr + \u00f1) indica siempre la home del usuario logueado. La tecla tab rellena comandos, archivos, directorios etc, usarla para ayuda","title":"Prompt"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#man","text":"Para obtener ayuda acerca de un comando miramos las p\u00e1ginas del manual: man ls \u2192 p\u00e1g. del manual para el comando ls Dentro de man podemos usar: q \u2192 Salir / \u2192 Buscar en p\u00e1ginas n \u2192 siguiente resultado Shift + n \u2192 buscar hacia atr\u00e1s","title":"man"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#estructura-de-una-orden-de-comandos","text":"ls -lisa *.* | | | | | \\ args \\ \\ flags \\ Comando","title":"Estructura de una orden de comandos"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#standard-input-standard-output-y-standard-error","text":"Stdin \u2192 0 (Entrada) \u2192 normalmente el teclado Stdout \u2192 1 (Salida) \u2192 normalmente por pantalla Stderr \u2192 2 (Salida de error) \u2192 normalmente por pantalla","title":"standard input, standard output y standard error"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#comandos-basicos","text":"ls -l formato de lista largo - indica que es un fichero d- indica que es un directorio l - links s - sockets p - pipes o tuber\u00edas c - character devices (teclado, rat\u00f3n) b - block devices ( pendrive, hd) -la imprime los nombres de ficheros ocultos por comenzar con un . -lart ordena los ficheros por fecha y la r invierte dicho orden pwd \u2192 Indica el path absoluto de donde estamos en este momento. /home/linux En Linux todo cuelga del directorio raiz / cd \u2192 cambiar de directorio cd - \u2192 nos devuelve al directorio anterior donde est\u00e1bamos cd sin nada nos devuelve al home del usuario file <nombre del fichero> \u2192 Indica el tipo de fichero mkdir / rmdir \u2192 crear / eliminar directorios cd /tmp mkdir cesta/fruta/peras (No funciona) mkdir -p cesta/fruta/peras (El parametro -p de parent permite hacerlo) pueden utilizarse rangos: mkdir -p cesta/fruta/{peras,manzanas}/kaka mkdir -p cesta/fruta/{1,2,3}/kaka cp \u2192 Copia de ficheros cp origen destino mv \u2192 Elimina el fichero de origen touch filename \u2192 crea un archivo rm -rf <directory> \u2192 borra el directorio y todo lo que contiene de forma recursiva y forzada. !ojo!","title":"Comandos B\u00e1sicos"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#atajos-bash-basico","text":"Comando Funci\u00f3n Ctrl-a Mueve al principio de la linea Ctrl-e Mueve al final de la linea. Ctrl-b Move back one character. Alt-b Move back one word. Ctrl-f Move forward one character. Alt-f Move forward one word. Ctrl-] x Where x is any character, moves the cursor forward to the next occurance of x. Alt-Ctrl-] x Where x is any character, moves the cursor backwards to the previous occurance of x. Ctrl-u Delete from the cursor to the beginning of the line. Ctrl-k Delete from the cursor to the end of the line. Ctrl-w Delete from the cursor to the start of the word. Esc-Del Delete previous word (may not work, instead try Esc followed by Backspace) Ctrl-y Pastes text from the clipboard. Ctrl-l Clear the screen leaving the current line at the top of the screen. Ctrl-x Ctrl-u Undo the last changes. Ctrl-_ does the same Alt-r Undo all changes to the line. Alt-Ctrl-e Expand command line. Ctrl-r Incremental reverse search of history. Alt-p Non-incremental reverse search of history. !! Execute last command in history !abc Execute last command in history beginning with abc !abc:p Print last command in history beginning with abc !n Execute nth command in history !$ Last argument of last command !^ First argument of last command abc xyz Replace first occurance of abc with xyz in last command and execute it Ctrl + w \u2192 borra una palabra Ctrl + y \u2192 Pega esa palabra Ctrl + l \u2192 borra la pantalla Ctrl + cursor dcha / izda \u2192 avanza/retrocede por las palabras Ctrl + k \u2192 borra desde el cursor hasta el final de linea Ctrl + u \u2192 borra desde el cursor hasta el principio de linea Ctrl + y \u2192 pega lo borrado Ctrl + j \u2192 equivale a la tecla Enter Ctrl + d \u2192 finaliza la sesi\u00f3n Ctrl + c \u2192 hace un \u201cbreak\u201d para interrumpir el proceso Ctrl + z \u2192 detiene un proceso y lo deja \u201ccongelado\u201d Ctrl + r \u2192 busca en la historia del comando history Shift + ret.pag/av.pag \u2192 hace scroll","title":"Atajos Bash - B\u00e1sico"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#history-expansion","text":"Cursores arriba/abajo navegar entre la historia History Ver el historial de comandos ejecutados Ctrl + R y comienza a teclear un comando para ver los resultados ls /etc/passwd ^ls^vim^ \u2192 cambia el comando ls por vim en el \u00faltimo comando ejecutado !! \u2192 ejecuta el \u00faltimo comando otra vez !34 \u2192 Ejecuta el comando 34 del historial !-5 \u2192 ejecuta el comando \u201chace 5 comandos\u201d !?apache \u2192 ejecuta el \u00faltimo comando que contiene apache http://www.thegeekstuff.com/2011/08/bash-history-expansion/","title":"History Expansion"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#recopilacion-de-comandos-linux","text":"","title":"Recopilaci\u00f3n de comandos Linux"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#informacion-del-sistema","text":"Comando Funci\u00f3n arch mostrar la arquitectura de la m\u00e1quina (1). uname -m mostrar la arquitectura de la m\u00e1quina (2). uname -r mostrar la versi\u00f3n del kernel usado. uname -a mostrar la informaci\u00f3n completa. lsb_release -a mostrar la informaci\u00f3n completa de la distribuci\u00f3n. cat /etc/issue mostrar el nombre de la distribuci\u00f3n dmidecode -q mostrar los componentes (hardware) del sistema. hdparm -i /dev/hda mostrar las caracter\u00edsticas de un disco duro. hdparm -tT /dev/sda realizar prueba de lectura en un disco duro. cat /proc/cpuinfo mostrar informaci\u00f3n de la CPU. grep -c ^processor /proc/cpuinfo mostrar n\u00famero de procesadores. cat /proc/interrupts mostrar las interrupciones. cat /proc/meminfo verificar el uso de memoria. cat /proc/swaps mostrar ficheros swap. cat /proc/version mostrar la versi\u00f3n del kernel. cat /proc/net/dev mostrar adaptadores de red y estad\u00edsticas. cat /proc/mounts mostrar el sistema de ficheros montado. lscpu mostrar informaci\u00f3n sobre el microprocesador. lspci -tv mostrar los dispositivos PCI. lsusb -tv mostrar los dispositivos USB. lshw listar el hardware. discover listar el hardware. date mostrar la fecha del sistema. cal 2011 mostrar el almanaque de 2011. cal 07 2011 mostrar el almanaque para el mes julio de 2011. date 041217002011.00 colocar (declarar, ajustar) fecha y hora. clock -w guardar los cambios de fecha en la BIOS. blkid mostrar informaci\u00f3n (nombre, etiqueta, UUID, tipo de partici\u00f3n) sobre los dispositivos de bloque (discos r\u00edgidos, etc.)","title":"Informaci\u00f3n del sistema"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#apagar-reiniciar-o-cerrar-sesion","text":"Comando Funci\u00f3n shutdown -h now apagar el sistema (1). init 0 apagar el sistema (2). telinit 0 apagar el sistema (3). halt apagar el sistema (4). poweroff apagar sistema (5). shutdown -h hours:minutes & apagado planificado del sistema. shutdown -c cancelar un apagado planificado del sistema. shutdown -r now reiniciar (1). reboot reiniciar (2). logout cerrar sesi\u00f3n. skill nombre_de_usuario cerrar sesi\u00f3n (2)1) exit salir del int\u00e9rprete de comandos (si solo hay uno, equivale a cerrar sesi\u00f3n).","title":"Apagar, reiniciar o cerrar sesi\u00f3n"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#gestionar-archivos-y-directorios","text":"Comando Funci\u00f3n cd ir al directorio personal. cd /home cambiar al directorio \u201c/home\u201d. cd .. retroceder un nivel. cd ../.. retroceder 2 niveles. cd ~user1 ir al directorio user1. cd - ir (regresar) al directorio anterior. pwd mostrar el camino del directorio actual. ls listar el contenido de un directorio. ls -F listar el contenido de un directorio (distinguiendo los directorios con una barra) ls -l listar el contenido de un directorio, mostrando los detalles. ls -lh listar el contenido de un directorio, mostrando los detalles (y el tama\u00f1o en un formato \u201chumanizado\u201d). ls -a listar el contenido de un directorio, incluendo los ficheros ocultos. ls *[0-9] listar los ficheros y carpetas que contienen n\u00fameros. ls -laR less tree mostrar los ficheros y carpetas en forma de \u00e1rbol comenzando por la ra\u00edz.(1) lstree mostrar los ficheros y carpetas en forma de \u00e1rbol comenzando por la ra\u00edz.(2) mkdir dir1 crear un directorio de nombre \u2018dir1\u2019. mkdir dir1 dir2 crear dos directorios a la vez (en la ubicaci\u00f3n actual). mkdir -p /tmp/dir1/dir2 crear una estructura de directorios, si no existe. rm file1 eliminar el archivo \u2018file1\u2019. rm -f file1 eliminar el archivo \u2018file1\u2019 en modo forzado. rmdir dir1 borrar el directorio \u2018dir1\u2019. rm -rf dir1 eliminar recursivamente y en modo forzado el directorio \u2018dir1\u2019 con todo lo que contenga. rm -rf dir1 dir2 borrar dos directorios con su contenido de forma recursiva. mv dir1 new_dir renombrar o mover un fichero o carpeta (directorio). cp file1 destino/ copiar un fichero al destino elegido. cp file1 file2 destino/ copiar a la vez dos ficheros a un mismo directorio. cp file1 file2 copiar file1 en file2. cp dir /* . copiar todos los ficheros de un directorio dentro del directorio de trabajo actual. cp -a /tmp/dir1 . copiar un directorio dentro del directorio actual de trabajo. cp -a dir1 copiar un directorio. cp -a dir1 dir2 copiar dos directorio al un\u00edsono. ln -s file1 lnk1 crear un enlace simb\u00f3lico al fichero o directorio. ln file1 lnk1 crear un enlace f\u00edsico al fichero o directorio. touch file1 actualizar la fecha de modificaci\u00f3n de file1, o crearlo si no existe. touch -t 0712250000 file1 modificar el tiempo real (tiempo de creaci\u00f3n) de un fichero o directorio. file file1 salida (volcado en pantalla) del tipo mime de un fichero texto. iconv -l listas de cifrados conocidos. iconv -f fromEncoding -t toEncoding inputFile > outputFile crea una nueva forma del fichero de entrada asumiendo que est\u00e1 codificado en fromEncoding y convirti\u00e9ndolo a ToEncoding.","title":"Gestionar archivos y directorios"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#encontrar-archivos","text":"Comando Funci\u00f3n find / -name file1 buscar fichero y directorio a partir de la ra\u00edz del sistema. find / -user user1 buscar ficheros y directorios pertenecientes al usuario \u201cuser1\u201d. find /home/user1 -name *.bin buscar ficheros con extensi\u00f3n \u201d. bin\u201d dentro del directorio / home/user1. find /usr/bin -type f -atime +100 buscar ficheros binarios no usados en los \u00faltimos 100 d\u00edas. find /usr/bin -type f -mtime -10 buscar ficheros creados o cambiados dentro de los \u00faltimos 10 d\u00edas. find / -name *.rpm -exec chmod 755 '{}' \\; buscar ficheros con extensi\u00f3n \u201d.rpm\u201d y modificar permisos. find . -type f -print0 xargs -0 chmod 644 find / -xdev -name *.rpm Buscar ficheros con extensi\u00f3n \u2018.rpm\u2019 ignorando los dispositivos removibles como cdrom, pen-drive, etc.\u2026 find . -maxdepth 1 -name *.jpg -print -exec convert \"{}\" -resize 80\u00d760 \"thumbs/{}\" \\; agrupar ficheros redimensionados en el directorio actual y enviarlos a directorios en vistas de miniaturas (requiere convertir desde Imagemagick). find /tmp/dir1 -depth -regextype posix-extended -regex '.*(\\s+ :+ locate *.ps encuentra ficheros con extensi\u00f3n \u201d.ps\u201d ejecutados primeramente con el command updatedb. whereis halt mostrar la ubicaci\u00f3n de un fichero binario, de ayuda o fuente. En este caso pregunta d\u00f3nde est\u00e1 el comando halt. which comando mostrar la ruta completa a un comando.","title":"Encontrar archivos"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#montando-un-sistema-de-ficheros","text":"Comando Funci\u00f3n mount /dev/hda2 /mnt/hda2 montar un disco llamado hda2. Verifique primero la existencia del directorio \u2018/ mnt/hda2\u2019; si no est\u00e1, debe crearlo. umount /dev/hda2 desmontar un disco llamado hda2. (Antes es necesario salir del punto \u2018/mnt/hda2\u2019. fuser -km /mnt/hda2 forzar el desmontaje cuando el dispositivo est\u00e1 ocupado. umount -n /mnt/hda2 correr el desmontaje sin leer el fichero /etc/mtab. \u00datil cuando el fichero es de solo lectura o el disco duro est\u00e1 lleno. mount /dev/fd0 /mnt/floppy montar un disco flexible (floppy). mount /dev/cdrom /mnt/cdrom montar un cdrom / dvdrom. mount /dev/hdc /mnt/cdrecorder montar un cd regrabable o un dvdrom. mount /dev/hdb /mnt/cdrecorder montar un cd regrabable / dvdrom (un dvd). mount -t udf,iso9660 -o loop file.iso /mnt/cdrom montar un fichero de imagen de un medio \u00f3ptico (como un CD o DVD en formato ISO). mount -t vfat /dev/hda5 /mnt/hda5 montar un sistema de ficheros FAT32. mount -t ntfs-3g /dev/hda5 /mnt/hda5 montar un sistema de ficheros NTFS. mount /dev/sda1 /mnt/usbdisk montar un usb pen-drive o una memoria (sin especificar el tipo de sistema de ficheros).","title":"Montando un sistema de ficheros"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#espacio-en-disco","text":"Comando Funci\u00f3n df -h mostrar una lista de las particiones montadas. ls -lSr more du -sh dir1 Estimar el espacio usado por el directorio \u2018dir1\u2019. du -sk * sort -nr du -h --max-depth=1 sort -nr du -k --max-depth=1 sort -k1 -nr rpm -q -a --qf '%10{SIZE}t%{NAME}n' sort -k1,1n dpkg-query -W -f=' \\({Package}\\t\\) \\n' sort -k 2 -nr","title":"Espacio en disco"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#usuarios-y-grupos","text":"Comando Funci\u00f3n groupadd nombre_del_grupo crear un nuevo grupo. groupdel nombre_del_grupo borrar un grupo. groupmod -n nuevo_nombre_del_grupo viejo_nombre_del_grupo renombrar un grupo. adduser usuario1 Crear un nuevo usuario, mediante un asistente. useradd -c \"Nombre Apellido\" -g admin -d /home/usuario1 -s /bin/bash usuario1 Crear un nuevo usuario perteneciente al grupo \u201cadmin\u201d. useradd usuario1 crear un nuevo usuario. userdel -r usuario1 borrar un usuario, eliminando su directorio Home. usermod -c \"Usuario de FTP\" -g system -d /ftp/usuario1 -s /sbin/nologin usuario1 cambiar los atributos de un usuario. usermod -aG plugdev,dialout,pip user1 agregar el usuario user1 a otros grupos existentes, para incrementar sus permisos (en este caso, agregar la posibilidad de conectar dispositivos, configurar y utilizar el modem) passwd cambiar contrase\u00f1a. passwd usuario1 cambiar la contrase\u00f1a de \u2018usuario1\u2019 (solamente ejecutable como superusuario). chage -E 2011-12-31 user1 colocar un plazo para la contrase\u00f1a del usuario. En este caso dice que la clave expira el 31 de diciembre de 2011. pwck chequear la sintaxis correcta el formato de fichero de \u2018/etc/passwd\u2019 y la existencia de usuarios. grpck chequear la sintaxis correcta y el formato del fichero \u2018/etc/group\u2019 y la existencia de grupos. newgrp grupo1 registra a un nuevo grupo para cambiar el grupo predeterminado de los ficheros creados recientemente.","title":"Usuarios y grupos"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#permisos-en-ficheros-usar-para-colocar-permisos-y-para-eliminar","text":"Comando Funci\u00f3n ls -lh Mostrar permisos. ls /tmp pr -T5 -W$COLUMNS chmod ugo+rwx directory1 colocar permisos de lectura \u00ae, escritura (w) y ejecuci\u00f3n(x) al propietario (u), al grupo (g) y a otros (o) sobre el directorio \u2018directory1\u2019. chmod go-rwx directory1 quitar permiso de lectura \u00ae, escritura (w) y (x) ejecuci\u00f3n al grupo (g) y otros (o) sobre el directorio \u2018directory1\u2019. chown user1 file1 cambiar el due\u00f1o de un fichero. chown -R user1 directory1 cambiar el propietario de un directorio y de todos los ficheros y directorios contenidos dentro. chgrp group1 file1 cambiar grupo de ficheros. chown user1:group1 file1 cambiar usuario y el grupo propietario de un fichero. find / -perm -u+s visualizar todos los ficheros del sistema con SUID configurado. chmod u+s /bin/file1 colocar el bit SUID en un fichero binario. El usuario que corriendo ese fichero adquiere los mismos privilegios como due\u00f1o. chmod u-s /bin/file1 deshabilitar el bit SUID en un fichero binario. chmod g+s /home/public colocar un bit SGID en un directorio \u2013similar al SUID pero por directorio. chmod g-s /home/public desabilitar un bit SGID en un directorio. chmod o+t /home/public colocar un bit STIKY en un directorio. Permite el borrado de ficheros solamente a los due\u00f1os leg\u00edtimos. chmod o-t /home/public desabilitar un bit STIKY en un directorio.","title":"Permisos en ficheros (usar \u00ab+\u00bb para colocar permisos y \u00ab-\u00bb para eliminar)"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#atributos-especiales-en-ficheros-usar-para-colocar-permisos-y-para-eliminar","text":"Comando Funci\u00f3n chattr +a file1 permite escribir abriendo un fichero solamente modo append. chattr +c file1 permite que un fichero sea comprimido / descomprimido automaticamente. chattr +d file1 asegura que el programa ignore borrar los ficheros durante la copia de seguridad. chattr +i file1 convierte el fichero en inmutable o invariable, por lo que no puede ser eliminado, alterado, renombrado, ni enlazado. chattr +s file1 permite que un fichero sea borrado de forma segura. chattr +S file1 asegura que un fichero sea modificado, los cambios son escritos en modo synchronous como con sync. chattr +u file1 te permite recuperar el contenido de un fichero a\u00fan si este est\u00e1 cancelado. lsattr mostrar atributos especiales.","title":"Atributos especiales en ficheros (usar \u00ab+\u00bb para colocar permisos y \u00ab-\u00bb para eliminar)"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#archivos-y-ficheros-comprimidos","text":"Comando Funci\u00f3n 7za a -mx=9 -ms=on -mhe=on -p archivocomprimido directorio1 archivo1 archivo2 comprimir un directorio y dos archivos en formato 7zip, con compresi\u00f3n s\u00f3lida m\u00e1xima, y protecci\u00f3n por contrase\u00f1a (la extensi\u00f3n 7z se agrega autom\u00e1ticamente). 7za x archivocomprimido.7z extraer un archivo comprimido en 7zip (7zip tambi\u00e9n permite descomprimir otros formatos, como por ejemplo, zip). bunzip2 file1.bz2 descomprime in fichero llamado \u2018file1.bz2\u2019. bzip2 file1 comprime un fichero llamado \u2018file1\u2019. gunzip file1.gz descomprime un fichero llamado \u2018file1.gz\u2019. gzip file1 comprime un fichero llamado \u2018file1\u2019. gzip -9 file1 comprime con compresi\u00f3n m\u00e1xima. rar a file1.rar test_file crear un fichero rar llamado \u2018file1.rar\u2019. rar a file1.rar file1 file2 dir1 comprimir \u2018file1\u2019, \u2018file2\u2019 y \u2018dir1\u2019 simult\u00e1neamente. rar x file1.rar descomprimir archivo rar. unrar x file1.rar descomprimir archivo rar. tar -cvf archive.tar file1 crear un tarball descomprimido. tar -cvf archive.tar file1 file2 dir1 crear un archivo conteniendo \u2018file1\u2019, \u2018file2\u2032 y\u2019dir1\u2019. tar -tf archive.tar mostrar los contenidos de un archivo. tar -xvf archive.tar extraer un tarball (si el archivo adem\u00e1s est\u00e1 comprimido con gzip, bzip2 o xz, descomprimirlo autom\u00e1ticamente). tar -xvf archive.tar -C /tmp extraer un tarball en /tmp. tar -cjvf archive.tar.bz2 dir1 crear un tarball comprimido en bzip2. tar -xjvf archive.tar.bz2 descomprimir un archivo tar comprimido en bzip2 tar -cJvf archive.tar.xz dir1 crear un tarball comprimido en xz. XZ_OPT=-9e tar -cJvf archive.tar.xz dir1 crear un tarball comprimido en xz (con m\u00e1xima compresi\u00f3n). tar -xJvf archive.tar.xz descomprimir un archivo tar comprimido en xz. tar -czvf archive.tar.gz dir1 crear un tarball comprimido en gzip. tar -I pigz -cf archive.tar.gz dir1 crear un tarball comprimido en gzip, pero utilizando pigz, que comprime en paralelo aprovechando todos los n\u00facleos de los microprocesadores del equipo. GZIP=-9 tar -czvf archive.tar.gz dir1 crear un tarball comprimido en gzip (con m\u00e1xima compresi\u00f3n). tar -xzvf archive.tar.gz descomprimir un archive tar comprimido en gzip. zip file1.zip file1 crear un archivo comprimido en zip. zip -r file1.zip file1 file2 dir1 comprimir, en zip, varios archivos y directorios de forma simult\u00e1nea. unzip file1.zip descomprimir un archivo zip.","title":"Archivos y ficheros comprimidos"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#paquetes-rpm-red-hat-fedora-y-similares","text":"Comando Funci\u00f3n rpm -ivh package.rpm instalar un paquete rpm. rpm -ivh --nodeeps package.rpm instalar un paquete rpm ignorando las peticiones de dependencias. rpm -U package.rpm actualizar un paquete rpm sin cambiar la configuraci\u00f3n de los ficheros. rpm -F package.rpm actualizar un paquete rpm solamente si este est\u00e1 instalado. rpm -e package_name.rpm eliminar un paquete rpm. rpm -qa mostrar todos los paquetes rpm instalados en el sistema. rpm -qa grep httpd rpm -qi package_name obtener informaci\u00f3n en un paquete espec\u00edfico instalado. rpm -qg \"System Environment/Daemons\" mostar los paquetes rpm de un grupo software. rpm -ql package_name mostrar lista de ficheros dados por un paquete rpm instalado. rpm -qc package_name mostrar lista de configuraci\u00f3n de ficheros dados por un paquete rpm instalado. rpm -q package_name --whatrequires mostrar lista de dependencias solicitada para un paquete rpm. rpm -q package_name --whatprovides mostar la capacidad dada por un paquete rpm. rpm -q package_name --scripts mostrar los scripts comenzados durante la instalaci\u00f3n /eliminaci\u00f3n. rpm -q package_name --changelog mostar el historial de revisions de un paquete rpm. rpm -qf /etc/httpd/conf/httpd.conf verificar cu\u00e1l paquete rpm pertenece a un fichero dado. rpm -qp package.rpm -l mostrar lista de ficheros dados por un paquete rpm que a\u00fan no ha sido instalado. rpm --import /media/cdrom/RPM-GPG-KEY importar la firma digital de la llave p\u00fablica. rpm --checksig package.rpm verificar la integridad de un paquete rpm. rpm -qa gpg-pubkey verificar la integridad de todos los paquetes rpm instalados. rpm -V package_name chequear el tama\u00f1o del fichero, licencias, tipos, due\u00f1o, grupo, chequeo de resumen de MD5 y \u00faltima modificaci\u00f3n. rpm -Va chequear todos los paquetes rpm instalados en el sistema. Usar con cuidado. rpm -Vp package.rpm verificar un paquete rpm no instalado todav\u00eda. rpm2cpio package.rpm cpio --extract --make-directories *bin rpm -ivh /usr/src/redhat/RPMS/ arch /package.rpm instalar un paquete construido desde una fuente rpm. rpmbuild --rebuild package_name.src.rpm construir un paquete rpm desde una fuente rpm.","title":"Paquetes rpm (Red Hat, Fedora y similares)"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#actualizador-de-paquetes-yum-fedora-redhat-y-otros","text":"Comando Funci\u00f3n yum install package_name descargar e instalar un paquete rpm. yum localinstall package_name.rpm este instalar\u00e1 un RPM y tratar\u00e1 de resolver todas las dependencies para ti, usando tus repositorios. yum update actualizar todos los paquetes rpm instalados en el sistema. yum update package_name modernizar / actualizar un paquete rpm. yum remove package_name eliminar un paquete rpm. yum list listar todos los paquetes instalados en el sistema. yum search package_name Encontrar un paquete en repositorio rpm. yum clean packages limpiar un cach\u00e9 rpm borrando los paquetes descargados. yum clean headers eliminar todos los ficheros de encabezamiento que el sistema usa para resolver la dependencia. yum clean all eliminar desde los paquetes cach\u00e9 y ficheros de encabezado.","title":"Actualizador de paquetes yum (Fedora, Redhat y otros)"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#gestion-de-paquetes-deb-debian-ubuntu-y-otros","text":"Comando Funci\u00f3n dpkg -i elpaquete.deb instalar / actualizar un paquete. dpkg -r elpaquete eliminar un paquete deb del sistema. dpkg -l mostrar todos los paquetes deb instalados en el sistema. dpkg -l grep httpd dpkg -s elpaquete obtener informaci\u00f3n en un paquete espec\u00edfico instalado en el sistema. dpkg -L elpaquete mostar lista de ficheros utilizados por un paquete instalado en el sistema. dpkg -c elpaquete.deb mostrar contenido de un paquete (no necesariamente instalado). dpkg -S /bin/ping verificar a qu\u00e9 paquete pertenece un fichero dado.","title":"Gesti\u00f3n de paquetes deb (Debian, Ubuntu y otros)"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#actualizador-de-paquetes-apt-y-aptitude-debian-ubuntu-y-otros","text":"Comando Funci\u00f3n apt-get install package_name instalar / actualizar un paquete deb. apt-cdrom install package_name instalar / actualizar un paquete deb desde un cdrom. apt-get update actualizar la lista de paquetes. apt-get upgrade actualizar todos los paquetes instalados. apt-get remove package_name eliminar un paquete deb del sistema. apt-get check verificar la correcta resoluci\u00f3n de las dependencias. apt-get clean limpiar cache desde los paquetes descargados. apt-cache search searched-package retorna lista de paquetes que corresponde a la serie \u00abpaquetes buscados\u00bb. aptitude search paquete busca un paquete por el nombre. aptitude search ~dpaquete busca un paquete por la descripci\u00f3n. aptitude show paquete less aptitude install paquete1 paquete2 \u2026 instala varios paquetes con sus dependencias y recomendaciones. aptitude -R install paquete instala un paquete con sus dependencias, pero sin las recomendaciones. aptitude why paquete lista las razones por las que se deber\u00eda instalar el paquete. aptitude why-not paquete lista las razones por las que no se puede instalar el paquete. aptitude -rsvW install paquete simula la instalaci\u00f3n de un paquete con sus dependencias y recomendaciones, detallando cada una. aptitude remove paquete desinstala un paquete. aptitude purge paquete desinstala un paquete y lo limpia de la cache. aptitude clean limpia la cache de paquetes. apt-file -xi search 'sql\u2018 busca todos los paquetes que contengan un archivo o directorio con la expresi\u00f3n sql (sin considerar may\u00fasculas o min\u00fasculas).3)","title":"Actualizador de paquetes apt y aptitude (Debian, Ubuntu y otros)"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#ver-el-contenido-de-un-fichero","text":"Comando Funci\u00f3n cat file1 ver los contenidos de un fichero comenzando desde la primera l\u00ednea. tac file1 ver los contenidos de un fichero comenzando desde la \u00faltima l\u00ednea. more file1 ver el contenido de un fichero de manera paginada. less file1 parecido al commando \u2018more\u2019 pero permite avanzar, retroceder, y buscar (compatible con algunos comandos de vi). head -2 file1 ver las dos primeras l\u00edneas de un fichero (\u00f3 10, si no se especifica la cantidad de l\u00edneas). tail -2 file1 ver las dos \u00faltimas l\u00edneas de un fichero (\u00f3 10, si no se especifica la cantidad de l\u00edneas).","title":"Ver el contenido de un fichero"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#manipulacion-de-texto","text":"Comando Funci\u00f3n cat file1 file2 \u2026 command <> file1_in.txt_or_file1_out.txt cat file1 command( sed, grep, awk, grep, etc\u2026) > result.txt cat file1 command( sed, grep, awk, grep, etc\u2026) >> result.txt grep Aug /var/log/messages buscar palabras \u201cAug\u201d en el fichero \u2018/var/log/messages\u2019. grep ^Aug /var/log/messages buscar palabras que comienzan con \u201cAug\u201d en fichero \u2018/var/log/messages\u2019 grep [0-9] /var/log/messages seleccionar todas las l\u00edneas del fichero \u2018/var/log/messages\u2019 que contienen n\u00fameros. grep Aug -R /var/log/ buscar la cadena \u201cAug\u201d en el directorio \u2018/var/log\u2019 y debajo. sed 's/string1/string2/g' ejemplo.txt reemplazar en ejemplo.txt todas las ocurrencias de \u201cstring1\u201d con \u201cstring2\u201d sed '/^$/d' ejemplo.txt eliminar todas las l\u00edneas en blanco desde el ejemplo.txt sed '/ *#/d; /^$/d' ejemplo.txt eliminar comentarios y l\u00edneas en blanco de ejemplo.txt echo 'ejemplo' tr '[:lower:]' '[:upper:]\u2018 sed -e '1d' ejemplo.txt elimina la primera l\u00ednea del fichero ejemplo.txt sed -n '/string1/p\u2018 visualizar solamente las l\u00edneas que contienen la palabra \u201cstring1\u201d. sed -r 's/(cadena1)(cadena2)/\\2\\1/g\u2018 utilizar expresiones regulares extendidas para intercambiar el orden de dos cadenas de texto, en todas las instancias que aparezcan.","title":"Manipulaci\u00f3n de texto"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#establecer-caracter-y-conversion-de-ficheros","text":"Comando Funci\u00f3n dos2unix filedos.txt fileunix.txt convertir un formato de fichero texto desde MSDOS a UNIX. unix2dos fileunix.txt filedos.txt convertir un formato de fichero de texto desde UNIX a MSDOS. recode ..HTML < page.txt > page.html convertir un fichero de texto en html. recode -l more","title":"Establecer caracter y conversi\u00f3n de ficheros"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#analisis-del-sistema-de-ficheros","text":"Comando Funci\u00f3n badblocks -v /dev/hda1 Chequear los bloques defectuosos en el disco hda1. fsck /dev/hda1 reparar / chequear la integridad del fichero del sistema Linux en el disco hda1. fsck.ext2 /dev/hda1 reparar / chequear la integridad del fichero del sistema ext 2 en el disco hda1. e2fsck /dev/hda1 reparar / chequear la integridad del fichero del sistema ext 2 en el disco hda1. e2fsck -j /dev/hda1 reparar / chequear la integridad del fichero del sistema ext 3 en el disco hda1. fsck.ext3 /dev/hda1 reparar / chequear la integridad del fichero del sistema ext 3 en el disco hda1. fsck.vfat /dev/hda1 reparar / chequear la integridad del fichero sistema fat en el disco hda1. fsck.msdos /dev/hda1 reparar / chequear la integridad de un fichero del sistema dos en el disco hda1. dosfsck /dev/hda1 reparar / chequear la integridad de un fichero del sistema dos en el disco hda1.","title":"An\u00e1lisis del sistema de ficheros"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#formatear-un-sistema-de-ficheros","text":"Comando Funci\u00f3n mkfs /dev/hda1 crear un fichero de sistema tipo Linux en la partici\u00f3n hda1. mke2fs /dev/hda1 crear un fichero de sistema tipo Linux ext 2 en hda1. mke2fs -j /dev/hda1 crear un fichero de sistema tipo Linux ext3 (peri\u00f3dico) en la partici\u00f3n hda1. mkfs -t vfat 32 -F /dev/hda1 crear un fichero de sistema FAT32 en hda1. fdformat -n /dev/fd0 formatear un disco flooply. mkswap /dev/hda3 crear un fichero de sistema swap.","title":"Formatear un sistema de ficheros"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#particion-de-sistema-swap","text":"Comando Funci\u00f3n mkswap /dev/hda3 crear fichero de sistema swap. swapon /dev/hda3 activando una nueva partici\u00f3n swap. swapon /dev/hda2 /dev/hdb3 activar dos particiones swap.","title":"Partici\u00f3n de sistema swap"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#copias-de-seguridad","text":"Comando Funci\u00f3n dump -0aj -f /tmp/home0.bak /home hacer una copia completa del directorio \u2018/home\u2019. dump -1aj -f /tmp/home0.bak /home hacer una copia incremental del directorio \u2018/home\u2019. restore -if /tmp/home0.bak restaurando una copia interactivamente. rsync -rogpav --delete /home /tmp sincronizaci\u00f3n entre directorios. rsync -rogpav -e ssh --delete /home ip_address:/tmp rsync a trav\u00e9s del t\u00fanel SSH. rsync -az -e ssh --delete ip_addr:/home/public /home/local sincronizar un directorio local con un directorio remoto a trav\u00e9s de ssh y de compresi\u00f3n. rsync -az -e ssh --delete /home/local ip_addr:/home/public sincronizar un directorio remoto con un directorio local a trav\u00e9s de ssh y de compresi\u00f3n. dd bs=1M if=/dev/hda gzip dd if=/dev/sda of=/tmp/file1 copiar el contenido de un disco duro a un fichero. (En este caso el disco duro es \u201csda\u201d y el fichero \u201cfile1\u201d). tar -Puf backup.tar /home/user hacer una copia incremental del directorio \u2018/home/user\u2019. tar -czv --exclude=/root/dir1/* -f /var/copias/cfg_$(date +%F_%H%M).tgz /etc /root copiar los directorios /etc y /root (excluyendo el contenido del subdirectorio /root/dir1/) en un archivo comprimido, cuyo nombre contenga la fecha y hora actual. ( cd /tmp/local/ && tar c . ) ssh -C user@ip_addr 'cd /home/share/ && tar x -p\u2018 ( tar c /home ) ssh -C user@ip_addr 'cd /home/backup-home && tar x -p\u2018 tar cf - . (cd /tmp/backup ; tar xf - ) find /home/user1 -name '*.txt' xargs cp -av --target-directory=/home/backup/ --parents find ~/ -type f -not -iname ' .mp ' -not \\( -iregex '.*\\.mozilla/.*' -o -iregex '.*\\.thumbnails/.*' \\) -prune -mtime 14 -print0 xargs -0 tar -czf /var/copias/myhome.tgz find /var/log -name '*.log' tar cv --files-from=- dd if=/dev/hda of=/dev/fd0 bs=512 count=1 hacer una copia del MRB (Master Boot Record) a un disco floppy. dd if=/dev/fd0 of=/dev/hda bs=512 count=1 restaurar la copia del MBR (Master Boot Record) copiada en un floppy.","title":"Copias de seguridad"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#cdrom","text":"Comando Funci\u00f3n cdrecord -v gracetime=2 dev=/dev/cdrom -eject blank=fast -force limpiar o borrar un cd regrabable. mkisofs /dev/cdrom > cd.iso crear una imagen iso de cdrom en disco. mkisofs /dev/cdrom gzip > cd_iso.gz mkisofs -J -allow-leading-dots -R -V \u201cLabel CD\u201d -iso-level 4 -o ./cd.iso data_cd crear una imagen iso de un directorio. cdrecord -v dev=/dev/cdrom cd.iso quemar una imagen iso. gzip -dc cd_iso.gz cdrecord dev=/dev/cdrom - mount -t udf,iso9660 -o loop cd.iso /mnt/iso montar una imagen iso. cd-paranoia -B llevar canciones de un cd a ficheros wav. cd-paranoia -- \u201d-3\u201d llevar las 3 primeras canciones de un cd a ficheros wav. cdrecord --scanbus escanear bus para identificar el canal scsi. dd if=/dev/hdc md5sum eject -v expulsar un medio o disco extra\u00edble, ofreciendo informaci\u00f3n adicional.","title":"CDROM"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#trabajo-con-la-red-lan-y-wifi","text":"Comando Funci\u00f3n ifconfig eth0 mostrar la configuraci\u00f3n de una interfaz de red Ethernet. ifup eth0 activar la interfaz eth0. ifdown eth0 deshabilitar la interfaz eth0. ifconfig eth0 192.168.1.1 netmask 255.255.255.0 configurar una direcci\u00f3n IP. ifconfig eth0 promisc configurar eth0 en modo promiscuo para obtener los paquetes (sniffing). dhclient eth0 activar la interface \u2018eth0\u2019 en modo dhcp. route -n mostrar tabla de rutas. route add -net 0/0 gw IP_Gateway configurar entrada predeterminada. ip route show grep default route add -net 192.168.0.0 netmask 255.255.0.0 gw 192.168.1.1 configurar ruta est\u00e1tica para buscar la red 192.168.0.0/16. route del 0/0 gw IP_gateway eliminar la ruta est\u00e1tica. echo 1 > /proc/sys/net/ipv4/ip_forward activar el redireccionamiento de paquetes ip. hostname mostrar el nombre del host del sistema. host www.example.com buscar el nombre del host para resolver el nombre a una direcci\u00f3n ip (1). nslookup www.example.com buscar el nombre del host para resolver el nombre a una direcci\u00f3m ip y viceversa (2). ip link show mostar el estado de enlace de todas las interfaces. mii-tool eth0 mostar el estado de enlace de eth0. ethtool eth0 mostrar las estad\u00edsticas de la interfaz de red eth0. netstat -tup mostrar todas las conexiones de red activas y sus PID. netstat -tupl mostrar todos los servicios de escucha de red en el sistema y sus PID. netstat -punta mostrar todas las conexiones activas por direcci\u00f3n IP y puerto. tcpdump tcp port 80 mostrar todo el tr\u00e1fico HTTP. iwlist scan mostrar las redes inal\u00e1mbricas. iwconfig eth1 mostrar la configuraci\u00f3n de una interfaz de red inal\u00e1mbrica. whois www.example.com buscar en base de datos Whois. iftop -nNP -i eth0 mostrar en tiempo real las conexiones abiertas en eth0 y su tasa de transferencia. sockstat mostrar informaci\u00f3n sobre las conexiones abiertas. arp-scan -l descubrir en la red las direcciones IP y MAC. nm-tool muestra configuraci\u00f3n de red (en caso de usar Network Manager obtiene los DNS).","title":"Trabajo con la red (LAN Y WIFI)"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#redes-de-microsoft-windows-samba","text":"Comando Funci\u00f3n nbtscan ip_addr resoluci\u00f3n de nombre de red bios. nmblookup -A ip_addr resoluci\u00f3n de nombre de red bios. smbclient -L ip_addr/hostname mostrar acciones remotas de un host en windows.","title":"Redes de Microsoft Windows (Samba)"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#cortafuegos-iptables","text":"Comando Funci\u00f3n iptables -t filter -L mostrar todas las cadenas de la tabla de filtro. iptables -t nat -L mostrar todas las cadenas de la tabla nat. iptables -t filter -F limpiar todas las reglas de la tabla de filtro. iptables -t nat -F limpiar todas las reglas de la tabla nat. iptables -t filter -X borrar cualquier cadena creada por el usuario. iptables -t filter -A INPUT -p tcp --dport telnet -j ACCEPT permitir las conexiones telnet para entar. iptables -t filter -A OUTPUT -p tcp --dport http -j DROP bloquear las conexiones HTTP para salir. iptables -t filter -A FORWARD -p tcp --dport pop3 -j ACCEPT permitir las conexiones POP a una cadena delantera. iptables -t filter -A INPUT -p tcp -m multiport --dports 80,443,8080 -m state --state NEW -m limit --limit 4/sec --limit-burst 8 -j ACCEPT establecer un l\u00edmite de 4 peticiones por segundo de nuevas conexiones, con posibles r\u00e1fagas ocasionales (\u00fatil para pol\u00edticas de denegaci\u00f3n por defecto). iptables -t filter -A INPUT -p tcp -m multiport --dports 80,443,8080 -m state --state ESTABLISHED,RELATED -m connlimit ! --conlimit-above 6 -j ACCEPT establecer un l\u00edmite de 6 conexiones simult\u00e1neas por equipo a nuestro servidor web (\u00fatil para pol\u00edticas de denegaci\u00f3n por defecto). iptables -t filter -A INPUT -j LOG --log-prefix \u201cDROP INPUT\u201d registrando una cadena de entrada. iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE configurar un PAT (Puerto de traducci\u00f3n de direcci\u00f3n) en eth0, ocultando los paquetes de salida forzada. (Indicado para enlaces tipo ppp) iptables -t nat -A POSTROUTING -s 192.168.0.127 -o eth0 -j SNAT --to-source 169.158.158.169 enrutar los paquetes desde 192.168.0.127 hacia otras redes por eth0 y asignarles un direcci\u00f3n ip externa. (Indicado para enlaces tipo ADSL) iptables -t nat -A PREROUTING -d 192.168.0.1 -p tcp -m tcp --dport 22 -j DNAT --to-destination 10.0.0.2:22 redireccionar los paquetes diriguidos de un host a otro. iptables -t nat -S Listar todas las reglas activas en la tabla nat. iptables-save -c > archivo copiar las reglas en un archivo (incluyendo los contadores de paquetes y bytes). iptables-restore -c < archivo Restaurar las reglas desde un archivo (incluyendo los contadores de paquetes y bytes).","title":"Cortafuegos (iptables)"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#monitoreando-y-depurando","text":"Comando Funci\u00f3n top mostrar en tiempo real las tareas de linux. htop mostrar y gestionar las tareas con una interfaz amistosa. ps -eafw muestra las tareas Linux. ps -e -o pid,args --forest muestra las tareas Linux en un modo jer\u00e1rquico. ps -o pid,cmd -ww -C wget listar todas las instancias del comando wget con sus argumentos. pstree mostrar un \u00e1rbol sistema de procesos. pidof pppd mostrar el pid del proceso pppd. kill -9 ID_Processo forzar el cierre de un proceso y terminarlo. kill -1 ID_Processo forzar un proceso para recargar la configuraci\u00f3n. killall Nombre_Proceso terminar un proceso por el nombre del comando y no por el ID. kill -HUP $(ps -A -o state,pid --no-header grep -e '^[Zz]' lsof -p $$ mostrar una lista de ficheros abiertos por procesos. lsof /home/user1 muestra una lista de ficheros abiertos en un camino dado del sistema. strace -c ls >/dev/null mostrar las llamadas del sistema hechas y recibidas por un proceso. strace -f -e open ls >/dev/null mostrar las llamadas a la biblioteca. watch -n1 'cat /proc/interrupts\u2018 mostrar interrupciones en tiempo real. last reboot mostrar historial de reinicio. lsmod mostrar los m\u00f3dulos del kernel cargados. free -m muestra el estado de la RAM en megabytes. smartctl -A /dev/hda monitorear la fiabilidad de un disco duro a trav\u00e9s de SMART. smartctl -i /dev/hda chequear si SMART est\u00e1 activado en un disco duro. tail -f /var/log/dmesg mostrar eventos inherentes al proceso de carga del kernel. tail -f /var/log/messages mostrar los eventos del sistema. multitail --follow-all /var/log/{dmesg,messages} mostrar dos registros de eventos en una misma pantalla.","title":"Monitoreando y depurando"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#seguridad-y-cifrado","text":"Comando Funci\u00f3n base64 /home/archivo > /home/archivo-codificado codifica \u201carchivo\u201d en \u2018base64\u2019 y lo guarda en /home base64 -d /home/archivo-codificado > /home/archivo decodifica \u201carchivo-codificado\u201d y lo guarda en /home openssl req -x509 -nodes -days 3650 -newkey rsa:1024 -out /etc/millave.crt -keyout /etc/millave.key crea un certificado auto-firmado para cifrar el tr\u00e1fico web con SSL. htpasswd -c -m /etc/apache2/.htpasswd nombreusuario genera un archivo \u2018.htpasswd\u2019 para proteger un sitio web con auntenticaci\u00f3n.","title":"Seguridad y Cifrado"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#otros-comandos-utiles","text":"Comando Funci\u00f3n apropos palabraclave mostrar una lista de comandos que pertenecen a las palabras claves de un programa; son \u00fatiles cuando t\u00fa sabes qu\u00e9 hace tu programa, pero desconoces el nombre del comando. man ping mostrar las p\u00e1ginas del manual on-line; por ejemplo, en un comando ping, usar la opci\u00f3n \u2018-k\u2019 para encontrar cualquier comando relacionado. man -t ping ps2pdf - ping.pdf mkbootdisk --device /dev/fd0 uname -r crear un floppy boteable. gpg -c file1 codificar un fichero con guardia de seguridad GNU. gpg file1.gpg decodificar un fichero con Guardia de seguridad GNU. wget -r www.example.com descargar un sitio web completo. wget -c www.example.com/file.iso descargar un fichero con la posibilidad de parar la descargar y reanudar m\u00e1s tarde. echo 'wget -c www.example.com/files.iso ' at 09:00 ldd /usr/bin/ssh mostrar las bibliotecas compartidas requeridas por el programa ssh. alias hh='history\u2018 colocar un alias para un commando. En este caso, para invocar el historial con hh. chsh cambiar el comando Shell. chsh --list-shells es un comando adecuado para saber si tienes que hacer remoto en otra terminal. who -a mostrar quien est\u00e1 registrado, e imprimir hora del \u00faltimo sistema de importaci\u00f3n, procesos muertos, procesos de registro de sistema, procesos activos producidos por init, funcionamiento actual y \u00faltimos cambios del reloj del sistema. echo \"128*1024*1024\" bc sudo !! ejecutar como superusuario el \u00faltimo comando tecleado. clear limpiar la pantalla. uncomando > archivodesalida.txt 2>&1 ejecuta un comando y redirige la salida a un archivo, combinando en este tanto STDOUT como STDERR. uncomando > archivodesalida.txt 2> archivoerrores.txt ejecuta un comando, redirige la salida (STDOUT) a un archivo, y los errores (STDERR) a otro. uncomando | tee archivodesalida.txt ejecuta un comando, muestra la salida en la pantalla y simult\u00e1neamente la escribe a un archivo. 1) Es preciso ejecutarlo con privilegios de root. 2) Para conocer el l\u00edmite de argumentos que xargs admite, puede ejecutarse el comando echo | xargs --show-limits 3)Para que este comando funcione, despu\u00e9s de instalado el paquete apt-file es necesario invocar el comando apt-file update","title":"Otros comandos \u00fatiles"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#fish","text":"","title":"Fish"},{"location":"kb/GNU-Linux/Command%20Line/command%20line/#sustituir-bash-por-fish","text":"sudo apt-get install fish chsh -s /usr/bin/fish","title":"Sustituir bash por fish"},{"location":"kb/GNU-Linux/Command%20Line/script_bash_backups/","text":"Script para realizar backups de la maquina local a un servidor SFTP \u00b6 #!/bin/bash #============================================================================== #TITLE: fullbackuplocal.sh #DESCRIPTION: script for automating the daily backup on my computer #AUTHOR: Javier #DATE: 2020-12-20 #VERSION: 0.2 #USAGE: ./fullbackuplocal.sh #CRON: # example cron for daily backup @ 14:00 pm # min hr mday month wday command # 0 14 * * * /home/javier/Documentos/Programas/autoscripts/fullbackuplocal.sh #============================================================================== # CUSTOM SETTINGS #============================================================================== # File for Excluded files / folders for source backup EXCLUDED_FILES = '/home/javier/Documentos/Programas/autoscripts/exclusiones.txt' #home directory path (Source for backup) HOME_DIR = '/home/javier/' # directory to put the backup files BACKUP_DIR = \"/home/javier/backups/\" #Numbers of days to keep backups files NUMBER_OF_DAYS = 30 # MYSQL Parameters MYSQL_UNAME = root MYSQL_PWORD = # Don't backup databases with these names # Example: starts with mysql (^mysql) or ends with _schema (_schema$) IGNORE_DB = \"(^mysql|_schema $ )\" # include mysql and mysqldump binaries for cron bash user PATH = $PATH :/usr/local/mysql/bin #============================================================================== # METHODS #============================================================================== # Append the date to name of backups files BACKUP_DATE = ` date +%d%b%y-%H_%M ` function delete_old_backups (){ echo \"Deleting $BACKUP_DIR *.gz older than $NUMBER_OF_DAYS days\" find $BACKUP_DIR -type f -name \"*.tar.gz\" -mtime + $NUMBER_OF_DAYS -exec rm {} \\; } function pg_database_list () { local databases = ` sudo -u postgres psql -l -t | cut -d '|' -f1 | sed -e 's/ //g' -e '/^$/d' ` echo \" $databases \" } function backup_pg_database (){ # Pending move here the logic for backup one database a = 1 } function backup_pg_databases (){ local databases = \" $( pg_database_list ) \" for i in $databases ; do if [ \" $i \" ! = \"template0\" ] && [ \" $i \" ! = \"template1\" ] ; then echo Backing up $i to $BACKUP_DIR$i \\_ $BACKUP_DATE .gz sudo -u postgres pg_dump -Fc $i | gzip > $BACKUP_DIR$i \\_ $BACKUP_DATE .gz fi done } function backup_files (){ # make a backup of home directory excluding files and folders specified in the txt file # -z gzip files # -c create new tar file # -v verbose # -p preserve permissions # -f name of the file to create / operate # -X specified files im txt file will not be included in the backup echo \"Executing: tar -X $EXCLUDED_FILES -zcvpf $BACKUP_DIR$BACKUP_DATE .tar.gz $HOME_DIR \" tar -X $EXCLUDED_FILES -zcvpf $BACKUP_DIR$BACKUP_DATE .tar.gz $HOME_DIR } function hr (){ printf '=%.0s' { 1 ..100 } printf \"\\n\" } function backup_config (){ mkdir /tmp/conf-bk- $( date +%Y%m%d ) cd /tmp/conf-bk- $( date +%Y%m%d ) #For General Configuration Files hostname > hostname.out cat /etc/issue > issue.out uname -a > uname.out uptime > uptime.out cat /etc/hosts > hosts.out /bin/df -h>df-h.out pvs > pvs.out vgs > vgs.out lvs > lvs.out /bin/ls -ltr /dev/mapper>mapper.out fdisk -l > fdisk.out cat /etc/fstab > fstab.out cat /etc/exports > exports.out cat /etc/crontab > crontab.out cat /etc/passwd > passwd.out ip link show > ip.out /bin/netstat -in>netstat-in.out /bin/netstat -rn>netstat-rn.out /sbin/ifconfig -a>ifconfig-a.out cat /etc/sysctl.conf > sysctl.out # Apache Sites # Pending --> cp /etc/apache2/sites-available/*.* # Odoo Config # Odoo Logs+ # Some System logs sleep 10s #Create a tar archive tar -cvf /tmp/ $( hostname ) - $( date +%Y%m%d.tar ) /tmp/conf-bk- $( date +%Y%m%d ) sleep 10s #Copy a tar archive to backup folder cp /tmp/ $( hostname ) - $( date +%Y%m%d.tar ) $BACKUP_DIR #Remove the backup config folder cd .. rm -Rf conf-bk- $( date +%Y%m%d ) rm $( hostname ) - $( date +%Y%m%d.tar ) } function mysql_login () { local mysql_login = \"-u $MYSQL_UNAME \" if [ -n \" $MYSQL_PWORD \" ] ; then local mysql_login += \" -p $MYSQL_PWORD \" fi echo $mysql_login } function mysql_database_list () { local show_databases_sql = \"SHOW DATABASES WHERE \\`Database\\` NOT REGEXP ' $IGNORE_DB '\" echo $( mysql $( mysql_login ) -e \" $show_databases_sql \" | awk -F \" \" '{if (NR!=1) print $1}' ) } function echo_status (){ printf '\\r' ; printf ' %0.s' { 0 ..100 } printf '\\r' ; printf \" $1 \" '\\r' } function backup_mysql_database (){ backup_file = \" $BACKUP_DIR$BACKUP_DATE . $database .sql.gz\" output += \" $database => $backup_file \\n\" echo_status \"...backing up $count of $total databases: $database \" $( mysqldump $( mysql_login ) $database | gzip -9 > $backup_file ) } function backup_mysql_databases (){ local databases = $( mysql_database_list ) local total = $( echo $databases | wc -w | xargs ) local output = \"\" local count = 1 for database in $databases ; do backup_mysql_database local count = $(( count+1 )) done echo -ne $output | column -t } function sync_files (){ /usr/bin/rclone sync /home/javier/backups/ backs:/.local/maquinalocal } #============================================================================== # RUN SCRIPT #============================================================================== delete_old_backups hr backup_pg_databases hr backup_mysql_databases hr backup_files hr backup_config hr sync_files printf \"All backed up!\\n\\n\" exit Ejemplo de fichero para exclusiones \u00b6 Crear un fichero exclusiones.txt en la ruta que especifiques en la variable excluded_files del script /home/javier/backups/* /home/javier/Descargas/* /home/javier/M\u00fasica/* /home/javier/V\u00eddeos/* /home/javier/.cache/* /home/javier/Documentos /home/javier/.local/share/Trash/* /home/javier/.local/share/Steam /home/javier/.p2 /home/javier/VirtualBox VMs /home/javier/.gconf/desktop /home/javier/.rnd /home/javier/.wine /home/javier/.mozilla","title":"Script para realizar backups de la maquina local a un servidor SFTP"},{"location":"kb/GNU-Linux/Command%20Line/script_bash_backups/#script-para-realizar-backups-de-la-maquina-local-a-un-servidor-sftp","text":"#!/bin/bash #============================================================================== #TITLE: fullbackuplocal.sh #DESCRIPTION: script for automating the daily backup on my computer #AUTHOR: Javier #DATE: 2020-12-20 #VERSION: 0.2 #USAGE: ./fullbackuplocal.sh #CRON: # example cron for daily backup @ 14:00 pm # min hr mday month wday command # 0 14 * * * /home/javier/Documentos/Programas/autoscripts/fullbackuplocal.sh #============================================================================== # CUSTOM SETTINGS #============================================================================== # File for Excluded files / folders for source backup EXCLUDED_FILES = '/home/javier/Documentos/Programas/autoscripts/exclusiones.txt' #home directory path (Source for backup) HOME_DIR = '/home/javier/' # directory to put the backup files BACKUP_DIR = \"/home/javier/backups/\" #Numbers of days to keep backups files NUMBER_OF_DAYS = 30 # MYSQL Parameters MYSQL_UNAME = root MYSQL_PWORD = # Don't backup databases with these names # Example: starts with mysql (^mysql) or ends with _schema (_schema$) IGNORE_DB = \"(^mysql|_schema $ )\" # include mysql and mysqldump binaries for cron bash user PATH = $PATH :/usr/local/mysql/bin #============================================================================== # METHODS #============================================================================== # Append the date to name of backups files BACKUP_DATE = ` date +%d%b%y-%H_%M ` function delete_old_backups (){ echo \"Deleting $BACKUP_DIR *.gz older than $NUMBER_OF_DAYS days\" find $BACKUP_DIR -type f -name \"*.tar.gz\" -mtime + $NUMBER_OF_DAYS -exec rm {} \\; } function pg_database_list () { local databases = ` sudo -u postgres psql -l -t | cut -d '|' -f1 | sed -e 's/ //g' -e '/^$/d' ` echo \" $databases \" } function backup_pg_database (){ # Pending move here the logic for backup one database a = 1 } function backup_pg_databases (){ local databases = \" $( pg_database_list ) \" for i in $databases ; do if [ \" $i \" ! = \"template0\" ] && [ \" $i \" ! = \"template1\" ] ; then echo Backing up $i to $BACKUP_DIR$i \\_ $BACKUP_DATE .gz sudo -u postgres pg_dump -Fc $i | gzip > $BACKUP_DIR$i \\_ $BACKUP_DATE .gz fi done } function backup_files (){ # make a backup of home directory excluding files and folders specified in the txt file # -z gzip files # -c create new tar file # -v verbose # -p preserve permissions # -f name of the file to create / operate # -X specified files im txt file will not be included in the backup echo \"Executing: tar -X $EXCLUDED_FILES -zcvpf $BACKUP_DIR$BACKUP_DATE .tar.gz $HOME_DIR \" tar -X $EXCLUDED_FILES -zcvpf $BACKUP_DIR$BACKUP_DATE .tar.gz $HOME_DIR } function hr (){ printf '=%.0s' { 1 ..100 } printf \"\\n\" } function backup_config (){ mkdir /tmp/conf-bk- $( date +%Y%m%d ) cd /tmp/conf-bk- $( date +%Y%m%d ) #For General Configuration Files hostname > hostname.out cat /etc/issue > issue.out uname -a > uname.out uptime > uptime.out cat /etc/hosts > hosts.out /bin/df -h>df-h.out pvs > pvs.out vgs > vgs.out lvs > lvs.out /bin/ls -ltr /dev/mapper>mapper.out fdisk -l > fdisk.out cat /etc/fstab > fstab.out cat /etc/exports > exports.out cat /etc/crontab > crontab.out cat /etc/passwd > passwd.out ip link show > ip.out /bin/netstat -in>netstat-in.out /bin/netstat -rn>netstat-rn.out /sbin/ifconfig -a>ifconfig-a.out cat /etc/sysctl.conf > sysctl.out # Apache Sites # Pending --> cp /etc/apache2/sites-available/*.* # Odoo Config # Odoo Logs+ # Some System logs sleep 10s #Create a tar archive tar -cvf /tmp/ $( hostname ) - $( date +%Y%m%d.tar ) /tmp/conf-bk- $( date +%Y%m%d ) sleep 10s #Copy a tar archive to backup folder cp /tmp/ $( hostname ) - $( date +%Y%m%d.tar ) $BACKUP_DIR #Remove the backup config folder cd .. rm -Rf conf-bk- $( date +%Y%m%d ) rm $( hostname ) - $( date +%Y%m%d.tar ) } function mysql_login () { local mysql_login = \"-u $MYSQL_UNAME \" if [ -n \" $MYSQL_PWORD \" ] ; then local mysql_login += \" -p $MYSQL_PWORD \" fi echo $mysql_login } function mysql_database_list () { local show_databases_sql = \"SHOW DATABASES WHERE \\`Database\\` NOT REGEXP ' $IGNORE_DB '\" echo $( mysql $( mysql_login ) -e \" $show_databases_sql \" | awk -F \" \" '{if (NR!=1) print $1}' ) } function echo_status (){ printf '\\r' ; printf ' %0.s' { 0 ..100 } printf '\\r' ; printf \" $1 \" '\\r' } function backup_mysql_database (){ backup_file = \" $BACKUP_DIR$BACKUP_DATE . $database .sql.gz\" output += \" $database => $backup_file \\n\" echo_status \"...backing up $count of $total databases: $database \" $( mysqldump $( mysql_login ) $database | gzip -9 > $backup_file ) } function backup_mysql_databases (){ local databases = $( mysql_database_list ) local total = $( echo $databases | wc -w | xargs ) local output = \"\" local count = 1 for database in $databases ; do backup_mysql_database local count = $(( count+1 )) done echo -ne $output | column -t } function sync_files (){ /usr/bin/rclone sync /home/javier/backups/ backs:/.local/maquinalocal } #============================================================================== # RUN SCRIPT #============================================================================== delete_old_backups hr backup_pg_databases hr backup_mysql_databases hr backup_files hr backup_config hr sync_files printf \"All backed up!\\n\\n\" exit","title":"Script para realizar backups de la maquina local a un servidor SFTP"},{"location":"kb/GNU-Linux/Command%20Line/script_bash_backups/#ejemplo-de-fichero-para-exclusiones","text":"Crear un fichero exclusiones.txt en la ruta que especifiques en la variable excluded_files del script /home/javier/backups/* /home/javier/Descargas/* /home/javier/M\u00fasica/* /home/javier/V\u00eddeos/* /home/javier/.cache/* /home/javier/Documentos /home/javier/.local/share/Trash/* /home/javier/.local/share/Steam /home/javier/.p2 /home/javier/VirtualBox VMs /home/javier/.gconf/desktop /home/javier/.rnd /home/javier/.wine /home/javier/.mozilla","title":"Ejemplo de fichero para exclusiones"},{"location":"kb/GNU-Linux/Compartir%20Ficheros/samba/","text":"Samba \u00b6 Instalaci\u00f3n y documentaci\u00f3n: \u00b6 Para instalar el servidor: apt install samba Para instalar el cliente: apt install cifs-utils y opcionalmente, apt install smbclient Tambi\u00e9n existe el paquete samba-doc . Hay muchos ejemplos de configuraci\u00f3n en /usr/share/doc/samba-doc/htmldocs/index.html y en la carpeta /usr/share/doc/samba-doc/examples . Tambi\u00e9n el propio smb.conf tiene ejemplos. Demonios y puesta en marcha \u00b6 smbd (escucha en los puertos TCP 135 y 445): comparte recursos y controla accesos nmbd (escucha en los puertos UDP / TCP 137,138 y 139): informa a la red de los recursos disponibles v\u00eda netbios Haciendo simplemente systemctl {start | stop} samba , ya se ponen en marcha / paran ambos de golpe Montar un servidor Samba \u00b6 Suponiendo que utilicemos el esquema de seguridad \"User\" (el predeterminado), primero se deben crear en el servidor Linux los \"usuarios Samba\" (los cuales son usuarios propios de Samba que no est\u00e1n pensados \u200b\u200bpara iniciar sesi\u00f3n en Linux sin\u00f3 solo para acceder a las carpetas compartidas v\u00eda Samba). Se crean as\u00ed: useradd -s /sbin/nologin usuariSamba # Una alternativa es usar /etc/samba/ smbusers (ver m\u00e1s abajo) smbpasswd -a usuariSamba # Crea contrase\u00f1a propia de Samba, no del sistema Linux.La contrase\u00f1a, si se usa el \"backend\" llamado \"tdbsam\" (el predeterminado) se guarda en /etc/samba/passdb.tdb . De todas formas, se puede saber siempre donde se guarda exactamente haciendo smbd -b Si se quiere eliminar la contrase\u00f1a Samba, simplemente hay que hacer smbpasswd -x usuariSamba2 . Confirmar que la configuraci\u00f3n del servidor Samba, en el archivo /etc/samba/smb.conf , sea similar a esta: [global] interfaces=192.168.1.122/24 #Tarj de red donde samba escucha (necesita bind interface only=yes) workgroup=nombreAgrupacionMaquinas #Se puede poner cualquier nombre passdb backend = tdbsam:/ruta/passdb.tdb #Por defecto la ruta es /var/lib/samba/private (otro \"backend\"podria ser un servidor LDAP; entonces el valor de esta directiva ser\u00eda ldapsam:ldap://x.x.x.x:n\u00ba) server role = standalone server #otros valores servir\u00edan para federarlo con otros servidores security = user #Otros valores ser\u00edan domain (para hacer de cliente AD; O sea que los usuarios no se validan contra el tdbsam local sin\u00f3 contra un servidor de dominio dedicado a eso) o ads (para hacer de servidor AD) Compartir las carpetas deseadas, indicando para cada una una secci\u00f3n, en el archivo /etc/samba/smb.conf , similar a: [lerelele] #El nombre que se ponga, inventado, ser\u00e1 el que se usar\u00e1 para nombrar el recurso desde otras m\u00e1quinas comment = \"mi carpeta compartida\" path = /ruta/real/carpeta/compartida writable = yes # Tambi\u00e9n est\u00e1 \"read only\", que es la opci\u00f3n justo contraria. Los permisos del sistema cuentan, ojo !! # Es decir: para qu\u00e9 writable = yes funcione, el permiso del grupo \"otros\" de la carpeta en su disco duro debe ser rw # Se pueden definir los permisos de escritura m\u00e1s finamente, especificando una lista de usuarios Samba concretos que pueden # leer / escribir, con las directivas \"write list = pepe juan, @ grupo\" y \"read list = pepe juan, @ grupo\". Un ejemplo pr\u00e1ctico # ser\u00eda hacer un read_only = yes (para todos) y luego especificar usuarios concretos que pueden escribir. Hay que tener en # cuenta, no obstante, que al final siempre acaban aplicando los permisos de los ficheros correspondientes write list = pepe @grup #Llista los \u00fanicos usuarios capaces de escribir en la carpeta compartida (si writable = no) read list = pepe @grup #Llista los \u00fanicos usuarios capaces de leer en la carpeta compartida browseable = yes #Si vale no, ser\u00eda como las carpetas compartidas ocultas de Windows -las que terminan en $ - create mask = 0700 #Los permisos que tendr\u00e1n los nuevos archivos creados directory mask = 0700 #Los permisos que tendr\u00e1n los nuevos subdirectorios creados guest ok = yes #Mode lectura, sin necesidad de usar ning\u00fan usuario / contrase\u00f1a. Equivale a \"public = yes\" guest only = yes # S\u00f3lo funciona con guest ok. Se combina con force user si pueden escribir guest account = nombredelacuentadelsistemausadaenlosaccesosanonimos (normalmente, usuario nobody) valid users = pepe @grup # \u00danicos usuarios / grupos reconocidos por el servidor Samba. Tambi\u00e9n hay \"invalid users\" hosts allow = 192.168.1.123, 127.0.0.0/8 EXCEPT 127.0.0.1 #Llista blanca de clientes permesos hosts deny = 192.168.1.123, 127.0.0.0/8 EXCEPT 127.0.0.1 #Llista negra de clientes prohibidos (en caso de conflicto entre \"hosts allow\" y \"hosts deny\" gana \"hosts allow\" Es muy importante tener en cuenta que no es suficiente con que el usuario tenga permisos de lectura / escritura en la carpeta compartida, sino que adem\u00e1s debe tener permisos de entrar (-x) a todos las carpetas anteriores existentes en la ruta hasta llegar a la carpeta en cuesti\u00f3n Nota En el archivo /etc/samba/smb.conf tambi\u00e9n est\u00e1 la secci\u00f3n predefinida [homes], la cual, entre otros, comparte autom\u00e0ticamente la carpeta personal de los usuarios Samba. La manera de acceder desde un cliente ser\u00eda //ipServSamba/usuariSamba. Reiniciar el servicio: systemctl restart smbd El comando testparm comprueba si el archivo smb.conf est\u00e1 escrito correctamente (no tiene errores de sintaxis) . El comando smbstatus comprueba el estado del servidor Siempre se pueden consultar los logs del servidor general en los ficheros /var/log/samba/log.{smbd,nmbd} Acceder desde un cliente Linux a un servidor Windows / Samba \u00b6 Para listar los recursos compartidos del servidor Windows / Samba: smbclient -L //ipServSamba -U usuariSamba [-N (no passwd for guest)] Cliente tipo FTP interactivo ( permite los comandos help, ls, cd, mget, mput, del, rm, mkdir, rename ...): smbclient // ipServSamba / recurso -U usuariSamba [contrase\u00f1a] Para montar un recurso remoto en un punto de montaje local mount.cifs //ipServSamba/recurso /ruta/punto/montaje/ local -o [guest] [, username = usuariSamba, password = contrase\u00f1a] [, credentials = /ruta/archivo/con/logins], ro, port=n\u00ba El archivo credentials debe tener permisos 600 con propietario root, y tiene una pinta como esta: username=usuariSamba password=contrasenya NOTA a veces hay que a\u00f1adir la opci\u00f3n vers = 1.0 para que el montaje funcione NOTA Otras opciones interesantes son uid=nomUsuarioLocal y gid=nomGrupoLocal, las cuales permiten establecer el propietario y el grupo del punto de montaje al indicado (en vez de root, que ser\u00eda lo normal al haber ejecutado el comando mount con sudo) Tambi\u00e9n se puede utilizar un gestor de ficheros cualquiera (Dolphin, Nautilus ...) y escribir en la barra de direcciones: smb://usuariSamba: contrase\u00f1a@ipServSamba/recurso Tambi\u00e9n se puede montar la carpeta remota de forma autom\u00e1tica en /etc/ fstab : //ipServSamba/recurso /ruta/punto/montaje/local cifs username=..., password=..., [uid=..., gid=..., iocharset=utf8, ...] 0 0 o para mayor seguridad: //ipServSamba/recurso /ruta/punto/montaje/local cifs credentials=/ruta/archivo, [uid=..., gid=.. .,] 0 0 Si no se quiere que se vea la contrase\u00f1a que hay en /etc/fstab , se puede utilizar /etc/samba/smbfstab Nota Otras opciones interesantes son la combinaci\u00f3n noauto, x-systemd-automount, las cuales permiten no montar autom\u00e1ticamente la carpeta en el arranque del sistema (donde podr\u00eda darse el caso de que la red todav\u00eda no estuviera operativa) sino en el momento en que el usuario quiera acceder por primera vez (que esto ocurrir\u00e1 una vez ya ha iniciado sesi\u00f3n y ya est\u00e9 todo en marcha) Para desmontar: smbumount /ruta/punto/montaje/local","title":"Samba"},{"location":"kb/GNU-Linux/Compartir%20Ficheros/samba/#samba","text":"","title":"Samba"},{"location":"kb/GNU-Linux/Compartir%20Ficheros/samba/#instalacion-y-documentacion","text":"Para instalar el servidor: apt install samba Para instalar el cliente: apt install cifs-utils y opcionalmente, apt install smbclient Tambi\u00e9n existe el paquete samba-doc . Hay muchos ejemplos de configuraci\u00f3n en /usr/share/doc/samba-doc/htmldocs/index.html y en la carpeta /usr/share/doc/samba-doc/examples . Tambi\u00e9n el propio smb.conf tiene ejemplos.","title":"Instalaci\u00f3n y documentaci\u00f3n:"},{"location":"kb/GNU-Linux/Compartir%20Ficheros/samba/#demonios-y-puesta-en-marcha","text":"smbd (escucha en los puertos TCP 135 y 445): comparte recursos y controla accesos nmbd (escucha en los puertos UDP / TCP 137,138 y 139): informa a la red de los recursos disponibles v\u00eda netbios Haciendo simplemente systemctl {start | stop} samba , ya se ponen en marcha / paran ambos de golpe","title":"Demonios y puesta en marcha"},{"location":"kb/GNU-Linux/Compartir%20Ficheros/samba/#montar-un-servidor-samba","text":"Suponiendo que utilicemos el esquema de seguridad \"User\" (el predeterminado), primero se deben crear en el servidor Linux los \"usuarios Samba\" (los cuales son usuarios propios de Samba que no est\u00e1n pensados \u200b\u200bpara iniciar sesi\u00f3n en Linux sin\u00f3 solo para acceder a las carpetas compartidas v\u00eda Samba). Se crean as\u00ed: useradd -s /sbin/nologin usuariSamba # Una alternativa es usar /etc/samba/ smbusers (ver m\u00e1s abajo) smbpasswd -a usuariSamba # Crea contrase\u00f1a propia de Samba, no del sistema Linux.La contrase\u00f1a, si se usa el \"backend\" llamado \"tdbsam\" (el predeterminado) se guarda en /etc/samba/passdb.tdb . De todas formas, se puede saber siempre donde se guarda exactamente haciendo smbd -b Si se quiere eliminar la contrase\u00f1a Samba, simplemente hay que hacer smbpasswd -x usuariSamba2 . Confirmar que la configuraci\u00f3n del servidor Samba, en el archivo /etc/samba/smb.conf , sea similar a esta: [global] interfaces=192.168.1.122/24 #Tarj de red donde samba escucha (necesita bind interface only=yes) workgroup=nombreAgrupacionMaquinas #Se puede poner cualquier nombre passdb backend = tdbsam:/ruta/passdb.tdb #Por defecto la ruta es /var/lib/samba/private (otro \"backend\"podria ser un servidor LDAP; entonces el valor de esta directiva ser\u00eda ldapsam:ldap://x.x.x.x:n\u00ba) server role = standalone server #otros valores servir\u00edan para federarlo con otros servidores security = user #Otros valores ser\u00edan domain (para hacer de cliente AD; O sea que los usuarios no se validan contra el tdbsam local sin\u00f3 contra un servidor de dominio dedicado a eso) o ads (para hacer de servidor AD) Compartir las carpetas deseadas, indicando para cada una una secci\u00f3n, en el archivo /etc/samba/smb.conf , similar a: [lerelele] #El nombre que se ponga, inventado, ser\u00e1 el que se usar\u00e1 para nombrar el recurso desde otras m\u00e1quinas comment = \"mi carpeta compartida\" path = /ruta/real/carpeta/compartida writable = yes # Tambi\u00e9n est\u00e1 \"read only\", que es la opci\u00f3n justo contraria. Los permisos del sistema cuentan, ojo !! # Es decir: para qu\u00e9 writable = yes funcione, el permiso del grupo \"otros\" de la carpeta en su disco duro debe ser rw # Se pueden definir los permisos de escritura m\u00e1s finamente, especificando una lista de usuarios Samba concretos que pueden # leer / escribir, con las directivas \"write list = pepe juan, @ grupo\" y \"read list = pepe juan, @ grupo\". Un ejemplo pr\u00e1ctico # ser\u00eda hacer un read_only = yes (para todos) y luego especificar usuarios concretos que pueden escribir. Hay que tener en # cuenta, no obstante, que al final siempre acaban aplicando los permisos de los ficheros correspondientes write list = pepe @grup #Llista los \u00fanicos usuarios capaces de escribir en la carpeta compartida (si writable = no) read list = pepe @grup #Llista los \u00fanicos usuarios capaces de leer en la carpeta compartida browseable = yes #Si vale no, ser\u00eda como las carpetas compartidas ocultas de Windows -las que terminan en $ - create mask = 0700 #Los permisos que tendr\u00e1n los nuevos archivos creados directory mask = 0700 #Los permisos que tendr\u00e1n los nuevos subdirectorios creados guest ok = yes #Mode lectura, sin necesidad de usar ning\u00fan usuario / contrase\u00f1a. Equivale a \"public = yes\" guest only = yes # S\u00f3lo funciona con guest ok. Se combina con force user si pueden escribir guest account = nombredelacuentadelsistemausadaenlosaccesosanonimos (normalmente, usuario nobody) valid users = pepe @grup # \u00danicos usuarios / grupos reconocidos por el servidor Samba. Tambi\u00e9n hay \"invalid users\" hosts allow = 192.168.1.123, 127.0.0.0/8 EXCEPT 127.0.0.1 #Llista blanca de clientes permesos hosts deny = 192.168.1.123, 127.0.0.0/8 EXCEPT 127.0.0.1 #Llista negra de clientes prohibidos (en caso de conflicto entre \"hosts allow\" y \"hosts deny\" gana \"hosts allow\" Es muy importante tener en cuenta que no es suficiente con que el usuario tenga permisos de lectura / escritura en la carpeta compartida, sino que adem\u00e1s debe tener permisos de entrar (-x) a todos las carpetas anteriores existentes en la ruta hasta llegar a la carpeta en cuesti\u00f3n Nota En el archivo /etc/samba/smb.conf tambi\u00e9n est\u00e1 la secci\u00f3n predefinida [homes], la cual, entre otros, comparte autom\u00e0ticamente la carpeta personal de los usuarios Samba. La manera de acceder desde un cliente ser\u00eda //ipServSamba/usuariSamba. Reiniciar el servicio: systemctl restart smbd El comando testparm comprueba si el archivo smb.conf est\u00e1 escrito correctamente (no tiene errores de sintaxis) . El comando smbstatus comprueba el estado del servidor Siempre se pueden consultar los logs del servidor general en los ficheros /var/log/samba/log.{smbd,nmbd}","title":"Montar un servidor Samba"},{"location":"kb/GNU-Linux/Compartir%20Ficheros/samba/#acceder-desde-un-cliente-linux-a-un-servidor-windows-samba","text":"Para listar los recursos compartidos del servidor Windows / Samba: smbclient -L //ipServSamba -U usuariSamba [-N (no passwd for guest)] Cliente tipo FTP interactivo ( permite los comandos help, ls, cd, mget, mput, del, rm, mkdir, rename ...): smbclient // ipServSamba / recurso -U usuariSamba [contrase\u00f1a] Para montar un recurso remoto en un punto de montaje local mount.cifs //ipServSamba/recurso /ruta/punto/montaje/ local -o [guest] [, username = usuariSamba, password = contrase\u00f1a] [, credentials = /ruta/archivo/con/logins], ro, port=n\u00ba El archivo credentials debe tener permisos 600 con propietario root, y tiene una pinta como esta: username=usuariSamba password=contrasenya NOTA a veces hay que a\u00f1adir la opci\u00f3n vers = 1.0 para que el montaje funcione NOTA Otras opciones interesantes son uid=nomUsuarioLocal y gid=nomGrupoLocal, las cuales permiten establecer el propietario y el grupo del punto de montaje al indicado (en vez de root, que ser\u00eda lo normal al haber ejecutado el comando mount con sudo) Tambi\u00e9n se puede utilizar un gestor de ficheros cualquiera (Dolphin, Nautilus ...) y escribir en la barra de direcciones: smb://usuariSamba: contrase\u00f1a@ipServSamba/recurso Tambi\u00e9n se puede montar la carpeta remota de forma autom\u00e1tica en /etc/ fstab : //ipServSamba/recurso /ruta/punto/montaje/local cifs username=..., password=..., [uid=..., gid=..., iocharset=utf8, ...] 0 0 o para mayor seguridad: //ipServSamba/recurso /ruta/punto/montaje/local cifs credentials=/ruta/archivo, [uid=..., gid=.. .,] 0 0 Si no se quiere que se vea la contrase\u00f1a que hay en /etc/fstab , se puede utilizar /etc/samba/smbfstab Nota Otras opciones interesantes son la combinaci\u00f3n noauto, x-systemd-automount, las cuales permiten no montar autom\u00e1ticamente la carpeta en el arranque del sistema (donde podr\u00eda darse el caso de que la red todav\u00eda no estuviera operativa) sino en el momento en que el usuario quiera acceder por primera vez (que esto ocurrir\u00e1 una vez ya ha iniciado sesi\u00f3n y ya est\u00e9 todo en marcha) Para desmontar: smbumount /ruta/punto/montaje/local","title":"Acceder desde un cliente Linux a un servidor Windows / Samba"},{"location":"kb/GNU-Linux/Networking/Networking/","text":"Networking \u00b6 OSI Stack \u00b6 Se recomienda una lectura efusiva de libros relacionados Redes TCP/IP \u00b6 C\u00e1lculo de m\u00e1scaras/rangos de red \u00b6 En las redes TCP/IP el funcionamiento del c\u00e1lculo de m\u00e1scaras de red o rangos IP \u00e9s exactamente igual: Las direcciones IP (192.168.1.0) al igual que sus m\u00e1scaras de red estan formadas por 4 n\u00fameros decimales de entre 1 y 3 d\u00edgitos que van del 0 al 255 ( n\u00ba max. de combinaciones posibles con 8 bits \u2192 (2^8)-2=254 ya que el 0 y el 255 est\u00e1n reservados para rango IP y broadcast respectivamente ) por lo que nos quedar\u00eda: DEC BIN -------------------------------------------------------------------- Ej.IP 192.168.1.0 11000000 10101000 00000001 00000000 Ej.Mask 255.255.0.0 11111111 11111111 00000000 00000000 255.255.255.0 11111111 11111111 11111111 00000000 Tenemos varias formas de expresar la mascara, en binario como en el ejemplo anterior, en notaci\u00f3n decimal ( lo m\u00e1s com\u00fan ) o bien al lado de la IP con una barra ( ej IP/MASK ->> 192.168.1.0/24 (CIDR)) Tabla de m\u00e1scaras de red M\u00c1SCARAS DE RED Binario Decimal CIDR +--------------------------------------------------------------------------------------------------------+ 11111111.11111111.11111111.11111111 255.255.255.255 /32 11111111.11111111.11111111.11111110 255.255.255.254 /31 11111111.11111111.11111111.11111100 255.255.255.252 /30 11111111.11111111.11111111.11111000 255.255.255.248 /29 11111111.11111111.11111111.11110000 255.255.255.240 /28 11111111.11111111.11111111.11100000 255.255.255.224 /27 11111111.11111111.11111111.11000000 255.255.255.192 /26 11111111.11111111.11111111.10000000 255.255.255.128 /25 11111111.11111111.11111111.00000000 255.255.255.0 /24 11111111.11111111.11111110.00000000 255.255.254.0 /23 11111111.11111111.11111100.00000000 255.255.252.0 /22 11111111.11111111.11111000.00000000 255.255.248.0 /21 11111111.11111111.11110000.00000000 255.255.240.0 /20 11111111.11111111.11100000.00000000 255.255.224.0 /19 11111111.11111111.11000000.00000000 255.255.192.0 /18 11111111.11111111.10000000.00000000 255.255.128.0 /17 11111111.11111111.00000000.00000000 255.255.0.0 /16 11111111.11111110.00000000.00000000 255.254.0.0 /15 11111111.11111100.00000000.00000000 255.252.0.0 /14 11111111.11111000.00000000.00000000 255.248.0.0 /13 11111111.11110000.00000000.00000000 255.240.0.0 /12 11111111.11100000.00000000.00000000 255.224.0.0 /11 11111111.11000000.00000000.00000000 255.192.0.0 /10 11111111.10000000.00000000.00000000 255.128.0.0 /9 11111111.00000000.00000000.00000000 255.0.0.0 /8 11111110.00000000.00000000.00000000 254.0.0.0 /7 11111100.00000000.00000000.00000000 252.0.0.0 /6 11111000.00000000.00000000.00000000 248.0.0.0 /5 11110000.00000000.00000000.00000000 240.0.0.0 /4 11100000.00000000.00000000.00000000 224.0.0.0 /3 11000000.00000000.00000000.00000000 192.0.0.0 /2 10000000.00000000.00000000.00000000 128.0.0.0 /1 00000000.00000000.00000000.00000000 0.0.0.0 /0 Vamos a tomar como ejemplo la direcci\u00f3n de red 192.168.0.0 con mascara de subred 255.255.255.0. Teniendo esta direcci\u00f3n de red (u otra direcci\u00f3n de clase C con mascara de subred por defecto) solo podremos tener 254 hosts. Veamos por que: La mascara de subred por defecto de una direcci\u00f3n IP de clase C nos dice que solo el ultimo octeto esta destinado a hosts. Esos 8 n\u00fameros del \u00faltimo octeto, equivalen a 256 n\u00fameros posibles (2^8 = 256). Pero por que antes dije que solo 254 eran validos? De esos 256 n\u00fameros posibles, hay solo 2 que no podremos usar para un host: El 192.168.0.0 y el 192.168.0.255, ya que esas dos direcciones son las direcciones de red y difusi\u00f3n respectivamente. Entonces, (2^8) - 2 = 254. Pero, que pasa si yo se que solo voy a usar 10 de esas 254 direcciones? Como dec\u00eda antes, las subredes pueden ayudarnos, entre otras cosas, a aprovechar direcciones IP. Siguiendo con el ejemplo: Si tenemos la direcci\u00f3n 192.168.0.0 con mascara de subred 255.255.255.0, podemos utilizar por ejemplo 4 de esos 8 bits, para armar subredes. En este caso, la mascara de subred seria 11111111.11111111.11111111.11110000 o 255.255.255.240. Es decir: Tenemos 24 bits de red, 4 de subred y 4 de host. Ahora podremos hacer 14 subredes de 14 host cada una. Y digo 14 y no 16 por que pasa lo mismo que dec\u00eda antes: El calculo se hace elevando el numero 2 (binario) a la cantidad de bits para subred (4) - 2 (red y difusi\u00f3n): (24) \u2013 2 = 14. La cantidad de hosts se calcula de la misma manera. Sabiendo esto, podremos enumerar las 14 subredes que podemos hacer 192.168.0.00010000 (hosts entre .0.17 y .0.30 inclusive) 192.168.0.00100000 (hosts entre .0.33 y .0.46 inclusive) 192.168.0.00110000 (hosts entre .0.49 y .0.62 inclusive) 192.168.0.01000000 (hosts entre .0.65 y .0.78 inclusive) 192.168.0.01010000 (hosts entre .0.81 y .0.94 inclusive) 192.168.0.01100000 (hosts entre .0.97 y .0.110 inclusive) 192.168.0.01110000 (hosts entre .0.113 y .0.126 inclusive) 192.168.0.10000000 (hosts entre .0.129 y .0.142 inclusive) 192.168.0.10010000 (hosts entre .0.145 y .0.158 inclusive) 192.168.0.10100000 (hosts entre .0.161 y .0.174 inclusive) 192.168.0.10110000 (hosts entre .0.177 y .0.190 inclusive) 192.168.0.11000000 (hosts entre .0.193 y .0.206 inclusive) 192.168.0.11010000 (hosts entre .0.209 y .0.222 inclusive) 192.168.0.11100000 (hosts entre .0.225 y .0.238 inclusive) Nomenclatura de tarjetas de red en Linux \u00b6 Las tarjetas de red en sistemas Linux se pueden llamar de las siguientes maneras: lo : Corresponde a la tarjeta \"loopback\". Recordemos que hemos dicho que esta tarjeta f\u00edsicamente no existe (es un \"invento\" del sistema operativo) y suele tener siempre tiene la IP 127.0.0.\u215b. Sirve para establecer una conexi\u00f3n con s\u00ed misma, de tal forma que podemos tener en la misma m\u00e1quina un programa cliente que conecte a un programa servidor sin salir \"fuera\". eno1, eno2 : Tarjetas Ethernet integradas en la placa base ( \"on-board\") ens1, ens2 : Tarjetas Ethernet PCI ( \"slot\") enp2s0, p3p1 : Tarjetas Ethernet que no se pueden localizar de otra forma debido a limitaciones de la BIOS wlp2s0 :tarjetas WiFi Dentro de las m\u00e1quinas virtuales de VirtualBox las tarjetas de red cogen siempre un nombre concreto: la tarjeta correspondiente a la primera pesta\u00f1a del cuadro de configuraci\u00f3n de red se llamar\u00e1 \"enp0s3\" dentro del sistema virtualizado, la segunda \"enp0s8\", la tercera \"enp0s9\" y la cuarta \"enp0s10\". ifconfig / ip \u00b6 Mostrar dispositivos de red y configuraci\u00f3n ifconfig ip addr show / ip a ip link show habilitar una tarjeta de red ifconfig eth0 up ip link set eth0 up deshabilitar una tarjeta de red ifconfig eth0 down ip link set eth0 down Atenci\u00f3n A pesar de que el comando /bin/ip es capaz de hacer lo mismo e incluso mas que ifconfig , es necesario conocer algo de este comando, aunque utilizaremos siempre que podamos el comando /bin/ip ifconfig \u2192 a pelo devuelve un listado de las tarjetas de red levantadas y un p\u00e1rrafo descriptivo. ifconfig eth0 \u2192 solo muestra info de esta tarjeta de red ifconfig <device> <ip> netmask ifconfig eth0:1 10.3.2.1 up \u2192 crear un dispositivo de red virtual (Alias) ifconfig <device> <ip> <mask> up/down (Si no le pones m\u00e1scara la calcula el) si hacemos ifconfig eth0 down puede perderse la IP ifconfig eth0 hw ether 02:01:02:03:04:08 confirmar con ifconfig eth0 Direcci\u00f3n de loopback o de bucle local \u00b6 Evita que salgan paquetes al exterior. Se usa para conectarse a servicios que tenemos en la misma m\u00e1quina. las tarjetas ethernet se numeran con eth0, eth1, eth2\u2026. Para conexiones wireless utilizamos iwconfig que nos mostrar\u00e1 los dispositivos wifi compatibles. utilidad ipcalc (calculadora IP) ipcalc 10.8.0.0/19 Address: 10.8.0.0 00001010.00001000.000 00000.00000000 Netmask: 255.255.224.0 = 19 11111111.11111111.111 00000.00000000 Wildcard: 0.0.31.255 00000000.00000000.000 11111.11111111 => Network: 10.8.0.0/19 00001010.00001000.000 00000.00000000 HostMin: 10.8.0.1 00001010.00001000.000 00000.00000001 HostMax: 10.8.31.254 00001010.00001000.000 11111.11111110 Broadcast: 10.8.31.255 00001010.00001000.000 11111.11111111 Hosts/Net: 8190 Class A, Private Internet mac address las mac address que muestra ifconfig se pueden falsificar, comando macchanger es buena pr\u00e1ctica cambiar la mac address si vamos a trastear. los cambios hechos as\u00ed son ef\u00edmeros, por eso existen unos ficheros de config ficheros de config de red Redhat y Debian utilizan distintos ficheros dentro de la carpeta /etc Redhat /etc/sysconfig/network-scripts/ifcfg Debian /etc/network/interfaces https://wiki.debian.org/es/NetworkConfiguration Ejemplo de fichero /etc/network/interfaces para IP est\u00e1tica Otros ficheros de configuraci\u00f3n /etc/hosts /etc/resolv.conf /etc/network/interfaces Comandos b\u00e1sicos de red en Linux \u00b6 Ver la configuraci\u00f3n actual \u00b6 Estado y configuraci\u00f3n de las tarjetas detectadas \u00b6 El comando ip address show (o bien ip address show dev nomTarjeta si s\u00f3lo se quiere obtener la informaci\u00f3n de una tarjeta determinada) nos muestra: Las direcciones MAC de las tarjetas Su estado respectivo (UP, DOWN) Sus direcciones IP respectivas (y la m\u00e1scara correspondiente) Otros datos (como si permite el env\u00edo \"broadcast\", si est\u00e1 en modo \"promiscuo\", etc). NOTA El comando ip address show se puede escribir de forma m\u00e1s corta as\u00ed: ip a s . Incluso, se puede dejar de escribir el verbo show (o s) porque es la acci\u00f3n por defecto (por lo tanto, se puede hacer ip address o ip a y ser\u00eda lo mismo). Tambi\u00e9n es \u00fatil el par\u00e1metro -c (as\u00ed: ip -c a s ) para ver los datos m\u00e1s relevantes en colores. Para activar / desactivar una tarjeta: ip link set {up|down} dev nomTarjeta Puerta de enlace \u00b6 El comando ip route show (o bien ip route show dev nomTarjeta o sus variantes ip route , ip r s o ip r ) debe mostrar una l\u00ednea que comenzar\u00e1 con la expresi\u00f3n \"default v\u00eda\" seguida de la direcci\u00f3n IP de la puerta de enlace establecida. Este comando puede mostrar m\u00e1s l\u00edneas, pero no nos interesar\u00e1n mucho ... (quiz\u00e1s la m\u00e1s curiosa es una que sirve para indicar que no hay ninguna puerta de enlace para comunicarse con las m\u00e1quinas que pertenezcan a la misma red a la que pertenece nuestra m\u00e1quina). DNS \u00b6 Para saber la direcci\u00f3n IP del servidor DNS configurado en nuestra m\u00e1quina (o las IPs \u2026 si hay m\u00e1s de una se prueba conectar a la primera y si esta falla entonces se prueba la segunda, y as\u00ed) se puede consultar el archivo etc/resolv.conf (concretamente, las l\u00edneas que comienzan por la palabra nameserver). Estos servidores ser\u00e1n los que todas las aplicaciones del sistema (desde el ping hasta el navegador) utilizar\u00e1n para averiguar cu\u00e1l es la IP del nombre que el usuario haya escrito. El contenido de este archivo suele ser gestionado por diferentes programas (como puede ser el cliente dhclient , la aplicaci\u00f3n NetworkManager , el servicio networking , el servicio systemd-networkd/resolved , etc) y es por ello que no se recomienda modificarlo manualmente ya que los cambios realizados a mano podr\u00edan \u00abMachacar\u00bb sin avisar en cualquier momento por cualquiera de estos programas. En este sentido, estos programas ( dhclient, NetworkManager, \u00abnetworking\u00bb, \u00absystemd-networkd / resolved, etc ) guardan los servidores DNS que usan dentro de sus propios archivos de configuraci\u00f3n y los manipulan all\u00ed de forma aut\u00f3noma (por ejemplo NetworkManager usa /var/run/NetworkManager/resolv.conf, \u00absystemd-resolved\u00bb usa /run/systemd/resolve/resolv.conf, \u00abNetworking\u00bb usa la l\u00ednea dns-nameservers dentro de /etc/network/interfaces, etc) pero adem\u00e1s siempre vinculan en forma de enlace simb\u00f3lico su archivo propio respectivo al archivo com\u00fan /etc/resolv.conf para que los programas que utilicen este archivo com\u00fan no tengan problemas en encontrar los servidores DNS. Establecer una configuraci\u00f3n de red est\u00e1tica de forma temporal \u00b6 Para asignar una IP / m\u00e1scara concreta a una tarjeta: ip address add v.x.y.z/n dev nomTarjeta Para borrar una IP / m\u00e1scara concreta de una tarjeta: ip address del v.x.y.z / n dev nomTarjeta NOTA Tambi\u00e9n se puede hacer ip address flush dev nomTarjeta si lo que se quiere es borrar de golpe cualesquiera de las eventuales diferentes direcciones IP que pueda tener la tarjeta indicada Para asignar la puerta de enlace concreta a una tarjeta: ip route add default v\u00eda v.x.y.z dev nomTarjeta . Antes, sin embargo, deber\u00eda borrar la que hab\u00eda asignada antes (si no se hace da error), as\u00ed: ip route del default dev nomTarjeta . NOTA Tambi\u00e9n se puede escribir ip route add 0.0.0.0/0 v\u00eda v.x.y.z dev nomTarjeta . Es equivalente. NOTA De forma alternativa, en vez de hacer ip route del \u2026 y despu\u00e9s ip route add \u2026 , el cambio de puerta de enlace predeterminada se podr\u00eda hacer directamente en un solo paso, as\u00ed: ip route change default v\u00eda v.x.y.z dev nomTarjeta NOTA Tambi\u00e9n se puede indicar que se quiere utilizar una determinada puerta de enlace s\u00f3lo para llegar a una red-destino concreta. En este caso, entonces, no estar\u00edamos hablando de puerta de enlace \u00abpor defecto\u00bb sino de una puerta de enlace \u00abespec\u00edfica\u00bb. La puerta de enlace \u00abpor defecto\u00bb ser\u00eda usada una vez que el sistema hubiera comprobado que el destino deseado no forma parte del conjunto de destinos indicados en puertas de enlace espec\u00edficas. Para crear una puerta de enlace espec\u00edfica hay que ejecutar el comando ip route add ip.red.Destino/Mascara v\u00eda v.x.y.z dev nomTarjeta Se puede a\u00f1adir adem\u00e1s un \u00faltimo par\u00e1metro metric n, que indica la preferencia de la ruta en el caso de que hubieran varias que llevaran al mismo destino (a modo de \u00abbackup\u00bb): un n menor indica una mayor preferencia. NOTA Una vez asignada una direcci\u00f3n IP a una tarjeta, el sistema calcula autom\u00e1ticamente su direcci\u00f3n IP de red correspondiente y genera una ruta a ella (es por eso que es necesario indicar la m\u00e1scara en ip address add \u2026) Por ejemplo, si se asigna la IP 203.0.113.25/24 a la tarjeta enp0s3, se crear\u00e1 autom\u00e1ticamente una ruta en la red 203.0.113.0/24 directa, por lo que el sistema sabr\u00e1 que para comunicarse con hosts de esta red no necesitar\u00e1 ninguna puerta de enlace intermediaria sino que lo podr\u00e1 hacer directamente. Establecer una configuraci\u00f3n est\u00e1tica de forma permanente \u00b6 En sistemas Debian cl\u00e1sicos \u00b6 Todos los comandos anteriores, sin embargo, s\u00f3lo \u00abfuncionan\u00bb mientras la m\u00e1quina se mantiene encendida: si apaga entonces las direcciones IP / m\u00e1scaras y puertas de enlace configuradas con las \u00f3rdenes \u00abip\u00bb anteriores se pierden y hay, pues, que volver a ejecutarlas de nuevo en el siguiente inicio. Para que la configuraci\u00f3n deseada de IP / m\u00e1scara y puerta de enlace (y servidor DNS tambi\u00e9n, gestionado con alguno de los programas comentados en p\u00e1rrafos anteriores) para una determinada tarjeta de red se mantenga de forma permanente en cada reinicio de la m\u00e1quina, hay que escribir los valores adecuados en un determinado archivo. En sistemas Debian/Ubuntu, este archivo se denomina /etc/network/interfaces y debe tener un aspecto similar al siguiente (las l\u00edneas que comienzan por # son comentarios, las tabulaciones son opcionales): # Las l\u00edneas \"auto\" sirven para activar la tarjeta en cuesti\u00f3n (en este #caso la tarjeta \"lo\") auto lo # La l\u00ednea siguiente indica que la tarjeta \"lo\" es de # tipo \"loopback\" (y que, por tanto, tendr\u00e1 la IP 127.0.0.1) iface lo inet loopback # En el mismo archivo se pueden configurar todas las tarjetas que # se quieran: la siguiente se llama enp3s0 auto enp3s0 # La palabra \"static\" indica que los valores de IP, m\u00e1scara, etc # son fijos en cada reinicio iface enp3s0 inet static # A continuaci\u00f3n se indican los valores de IP, m\u00e1scara, puerta de # enlace y servidores DNS que se quieren asignar address v.x.y.z netmask w.w.w.w gateway v.x.y.z dns-nameservers v.x.y.z v.x.y.z Atenci\u00f3n Atenci\u00f3n, la l\u00ednea \u00ab dns-nameservers \u00bb del archivo anterior s\u00f3lo funciona (es decir, se copian los servidores DNS indicados all\u00ed en el archivo central del sistema donde deben estar para ser utilizados: /etc/resolv.conf) si hay instalado un paquete llamado \u00ab resolvconf \u00bb. Si no lo est\u00e1, estas l\u00edneas no se tendr\u00e1n en cuenta. Este archivo es le\u00eddo por un servicio del sistema (un demonio) que se pone en marcha autom\u00e1ticamente al arrancar la m\u00e1quina y que se denomina \u00abnetworking\u00bb. Esto quiere decir que en cualquier momento que hagamos un cambio dentro de este archivo, para que se tenga en cuenta o bien habr\u00e1 que reiniciar la m\u00e1quina o bien simplemente reiniciar el servicio, as\u00ed: sudo systemctl restart networking En sistemas systemd \u00b6 \u00abSystemd-networkd\u00bb es un demonio que gestiona las configuraciones de las diferentes interfaces de red (f\u00edsicas y / o virtuales) de un sistema systemd, representando, pues, una alternativa al demonio \u00abNetworking\u00bb de sistemas Debian as\u00ed como tambi\u00e9n al scripts ifcfg- * cl\u00e1sicos de Fedora / Suse o al Network Manager integrado en muchos escritorios. Para empezar a utilizar este demonio es recomendable detener primero la \u00abcompetencia\u00bb, por ejemplo, en el caso de Ubuntu ejecutando sudo sytemctl disable networking && sudo systemctl stop networking) Y entonces encenderlo junto con el servicio \u00absystemd-resolved\u00bb, as\u00ed, por ejemplo: Note Al igual que ocurr\u00eda con el paquete \u00abresolvconf\u00bb en los sistemas Debian, se necesita tener un servicio adicional instalado (y funcionando) en el sistema llamado \u00absystemd-resolved\u00bb si se quieren especificar entradas DNS expl\u00edcitas en los archivos .network (o bien si se obtienen v\u00eda DHCP). Este servicio lo que hace es, a partir de estas entradas, modificar el archivo /run/systemd/resolve/resolv.conf, el cual, por compatibilidad con muchos programas tradicionales, deber\u00eda apuntar en forma de enlace suave en /etc/resolv.conf (ln -s /run/systemd/resolve/resolv.conf /etc/resolv.conf). Alternativamente, se puede no utilizar systemd-resolved y modificar entonces el archivo /etc/resolv.conf a mano. Se pueden ver el nombre (y tipo y estado) de las interfaces de red actualmente reconocidas en el sistema (y su tipo y estado) mediante el comando networkctl list . Si en la columna SETUP aparece \u00abunmanaged\u00bb significa que esta interfaz concreta no es gestionada por systemd-networkd sino por alg\u00fan otro servicio alternativo. Otra orden que da m\u00e1s informaci\u00f3n es networkctl status . En cualquier caso, para hacer que se gestione por systemd-networkd, por cada interfaz hay que crear un archivo * .network dentro de la carpeta /etc/systemd/network (y reiniciar el servicio). En el caso concreto de querer asignar una IP est\u00e1tica, ser\u00eda necesario, pues, tener un archivo como este (llamado por ejemplo /etc/systemd/network/lalala.network ): [Match] Name=enp1s0 #Identifica la tarjeta a la cual se le aplicar\u00e1 la configuraci\u00f3n [Network] DHCP=no Address=10.1.10.9/24 Gateway=10.1.10.1 DNS=10.1.10.2 #Opcional (Es necesario tener el servicio systemd-resolved funcionando) DNS=10.1.10.3 #Cada servidor DNS ha d'indicar-se en una l\u00ednia separada Los archivos de configuraci\u00f3n de systemd-networkd proporcionados por la distribuci\u00f3n se encuentran en /usr/lib/systemd/network y los administrados por nosotros se tienen que ubicar en /etc/systemd/network . Todos estos archivos se leen -sin distinci\u00f3n de donde est\u00e9n ubicados \u2013 en orden alfanum\u00e9rico seg\u00fan el nombre que tienen, ganando siempre la primera configuraci\u00f3n encontrada en caso de que afectara a la misma tarjeta. Eso s\u00ed, si en las dos carpetas se encuentra un fichero con el mismo nombre, lo que hay bajo /etc/systemd/network anula siempre a lo que hay en /usr/lib/systemd/network (una consecuencia de esto es que si el archivo en /etc/\u2026 apunta a /dev/null, lo que se estar\u00e1 haciendo es deshabilitar. Existen tres tipos diferentes de archivos de configuraci\u00f3n: los \u00ab.network\u00bb aplican la configuraci\u00f3n descrita bajo su secci\u00f3n [Network] a aquellas tarjetas de red que tengan una caracter\u00edstica que concuerde con todos los valores indicados en las diferentes l\u00edneas bajo la secci\u00f3n [Match] (normalmente aqu\u00ed s\u00f3lo indica su nombre mediante una \u00fanica l\u00ednea \u00abName =\u00bb) los \u00ab.netdev\u00bb sirven para crear nuevas interfaces de red de tipo virtual ( \u00abbridges\u00bb, \u00abbonds\u00bb, etc) -la configuraci\u00f3n de red se seguir\u00e1 indicando en su correspondiente archivo .network) los \u00ab.link\u00bb sirven para definir nombres alternativos a las tarjetas de red en el momento de ser reconocidas por el sistema (v\u00eda systemd-udev). En las l\u00edneas bajo la secci\u00f3n [Match] -por ejemplo, en \u00abName =\u00bb, se puede utilizar el comod\u00edn *. En esta l\u00ednea en concreto tambi\u00e9n se puede escribir un conjunto de nombres separados por un espacio en blanco a modo de diferentes alternativas. En los archivos .network puede haber una secci\u00f3n (no vista en los ejemplos anteriores) titulada [Link] bajo la que pueden haber varias l\u00edneas m\u00e1s relacionadas con el comportamiento \u00abhardware\u00bb de la tarjeta, como la l\u00ednea \u00abMACAddress = xx: xx: xx: xx: xx: xx\u00bb, la cual sirve para asignar a la tarjeta en cuesti\u00f3n una direcci\u00f3n MAC ficticia, la l\u00ednea \u00abMTUBytes = no\u00bb, la cual sirve para indicar el tama\u00f1o de la MTU admitida (\u00fatil por ejemplo para activar los \u00abjumbo frames\u00bb si se pone 9000 como valor), o la l\u00ednea \u00abARP = no\u00bb para desactivar el protocolo ARP en la tarjeta en cuesti\u00f3n (activado por defecto). Los archivos .netdev suelen tener s\u00f3lo una secci\u00f3n titulada [netdev], la cual debe incluir dos l\u00edneas obligatoriamente: \u00abName =\u00bb (por asignar un nombre a la interfaz virtual que se crear\u00e1) y \u00abKind =\u00bb (para especificar el tipo de interfaz que ser\u00e1: \u00abbridge\u00bb, \u00abbond\u00bb, \u00abVlan\u00bb, \u00abveth\u00bb, etc). En el caso de que sea de tipo \u00abvlan\u00bb, aparecer\u00e1 entonces una secci\u00f3n titulada [VLAN] incluyendo como m\u00ednimo la l\u00ednea \u00abId =\u00bb para indicar el n\u00famero de VLAN que se est\u00e1 creando. Los archivos .link suelen tener una secci\u00f3n [Match] con la l\u00ednea \u00abMACAddress =\u00bb para identificar la tarjeta de red en cuesti\u00f3n y una secci\u00f3n [Link] que sirve para manipular las caracter\u00edsticas de esta tarjeta, como por ejemplo su nombre (con la l\u00ednea \u00abName =\u00bb y, opcionalmente, la l\u00ednea \u00abDescription =\u00bb). Si no se crea manualmente ning\u00fan archivo .link, la mayor\u00eda de distribuciones ofrecen un archivo .link predeterminado, generalmente llamado 99-default.link (y ubicado en / usr / lib / systemd / network); es por ello que hay que asegurarse que los ficheros .link \u00abmanuales\u00bb tengan un nombre que asegure su lectura antes de la del archivo 99-default.link. Para m\u00e1s informaci\u00f3n sobre las posibilidades que ofrecen todos estos archivos, consultar las p\u00e1ginas del manual \u00absystemd.network\u00bb, \u00abSystemd.netdev\u00bb y \u00absystemd.link\u00bb. Atenci\u00f3n No s\u00f3lo existen el servicio \u00abnetworking\u00bb y \u00absystemd-networkd\u00bb para gestionar las tarjetas de red de nuestro sistema. Tambi\u00e9n podemos encontrar el servicio \u00abNetworkManager\u00bb (sobre todo en sistemas con escritorio) y en las \u00faltimas versiones de Ubuntu el servicio \u00abNetplan\u00bb, entre otros. !!! Establecer una configuraci\u00f3n din\u00e1mica de forma temporal \u00b6 En las configuraciones anteriores, tanto la temporal como la permanente, se establece una direcci\u00f3n IP / m\u00e1scara + puerta de enlace concreta, decidida por nosotros. Este m\u00e9todo puede ser \u00fatil para pocas m\u00e1quinas, pero en una red con muchos equipos, puede llegar a ser bastante farragoso, adem\u00e1s de que f\u00e1cilmente se pueden cometer errores (IPs duplicadas, IP no asignadas). Otro m\u00e9todo para establecer estos datos es el m\u00e9todo \u00abdin\u00e1mico\u00bb, en el que la m\u00e1quina en cuesti\u00f3n no tiene asignada de forma fija IP / m\u00e1scara + puerta de enlace + servidor DNS sino que estos datos los obtiene de la red: all\u00ed deber\u00e1 haber escuchando un ordenador ejecutando un software especial llamado \u00abServidor DHCP\u00bb, el cual sirve precisamente para atender estas peticiones de \u00abdatos de red\u00bb y asignarlas a quien las pida. De este modo, se tiene una gesti\u00f3n centralizada del reparto de direcciones IP / m\u00e1scara + puerta de enlace + servidores DNS sin necesidad de realizar ninguna configuraci\u00f3n espec\u00edfica en las m\u00e1quinas clientes. Eso s\u00ed, claro: primero se deber\u00e1 haber instalado y configurado convenientemente en nuestra red este software \u00abservidor DHCP\u00bb (un ejemplo es el paquete \u00abisc-dhcp-server \u00ab), tarea que no veremos (se presupone que esto ya est\u00e1 hecho). Nota Otro cliente similar es el comando host nomDNS [ip.serv.DNS] Para pedir en un momento determinado una configuraci\u00f3n completa de red (IP, m\u00e1scara, puerta de enlace, servidores DNS, etc) a un servidor DHCP ya funcionando en nuestra LAN hemos de ejecutar un cliente DHCP, como el comando dhclient Dhclient nomTarjeta Pide -para la tarjeta indicada- los datos de red (IP, m\u00e1scara, puerta de enlace, servidor DNS, etc) a alg\u00fan servidor DHCP que est\u00e9 escuchando a la LAN de nuestra m\u00e1quina. -v Muestra por pantalla todo el proceso de petici\u00f3n y respuesta (\u00fatil para ver si va) -r Borra todos los datos de red que pueda tener actualmente la tarjeta indicada Establecer una configuraci\u00f3n din\u00e1mica de forma permanente \u00b6 En sistemas Debian cl\u00e1sicos \u00b6 Para pedir los datos de red a alg\u00fan servidor DHCP de nuestra red, en vez de tener que hacerlo manualmente con el comando dhclient , se puede hacer de forma autom\u00e1tica cada vez que nuestra m\u00e1quina arranque (de modo que nosotros no tengamos que hacer nada y ya tengamos, si todo va bien, estos datos ya asignadas una vez iniciamos sesi\u00f3n). Esto se logra simplemente escribiendo las siguientes l\u00edneas en el archivo /etc/network/interfaces: auto enp3s0 iface enp3s0 inet dhcp En sistemas systemd \u00b6 En el caso concreto de querer asignar una IP din\u00e1mica en un sistema con el demonio systemd-netword funcionando, habr\u00e1 que tener un archivo como este (llamado por ejemplo /etc/systemd/network/lalala.network ): [Match] Name = enp1s0 [Network] DHCP = yes # Tambi\u00e9n podr\u00eda valer ipv4 o ipv6 seg\u00fan el tipo de direcciones IP que queremos recibir ping \u00b6 ping ip o Nombre Maq. Remota Comprueba si la m\u00e1quina remota indicada responde. Sirve, por tanto, para saber si hay conexi\u00f3n de red con aquella m\u00e1quina (si no, podr\u00eda ser debido a cualquier causa: cable mal enchufado o roto, m\u00e1quina remota apagada, etc). En este sentido, son interesantes los datos estad\u00edsticos que aparecen al final (paquetes enviados, recibidos, perdidos, etc) y el tiempo que han tardado en enviarse estos paquetes de prueba (y recibirse la respuesta) -y as\u00ed comprobar la saturaci\u00f3n del medio. -n No resuelve nombres (es decir, no hace la consulta previa en el servidor DNS del sistema). Por lo tanto, s\u00f3lo hace que funcione indicando direcciones IP -c n\u00ba N\u00famero de paquetes de prueba que se enviar\u00e1n (si no se indica, son infinitos y hay que detener el env\u00edo pulsando CTRL + C) -i n\u00baN\u00famero de segundos que se espera para enviar el siguiente paquete -f Mode \u00abflood\u00bb. Env\u00eda paquetes a la m\u00e1xima velocidad posible, mostrando un punto por cada paquete enviado y borr\u00e1ndose el por cada respuesta recibida: por lo tanto, para ir bien habr\u00eda que s\u00f3lo se viera un punto y fuera desapareciendo: si se ven muchos puntos es que hay p\u00e9rdida de paquetes. Hay que ser root para que funcione -I eno1 Indica la tarjeta de red para la que se enviar\u00e1n los paquetes (por si la m\u00e1quina tuviera m\u00e1s de una) mtr \u00b6 mtr ip.o Nom.Maq.Remota Sirve para conocer el camino seguido por un paquete desde la m\u00e1quina origen hasta la indicada, mostrando la IP (o nombre) de todos los routers intermedios a trav\u00e9s de los que va pasando. tambi\u00e9n muestra estad\u00edsticas de tiempo empleado en cada paquete, el mejor tiempo, el peor, los paquetes perdidos, etc -n No resuelve nombres (es decir, no hace la consulta previa en el servidor DNS del sistema). -c n\u00ba N\u00famero de paquetes de prueba que se enviar\u00e1n (si no se indica, son infinitos y hay que parar el env\u00edo pulsando CTRL + C) -i n\u00ba N\u00famero de segundos que se espera para enviar el siguiente paquete ss \u00b6 Muestra datos sobre las conexiones existentes (o que pueden existir) en nuestra m\u00e1quina. Concretamente, muestra el estado de la conexi\u00f3n (los m\u00e1s habituales son ESTABLISHED y LISTEN -este \u00faltimo indica que el puerto est\u00e1 abierto pero sin conexi\u00f3n -\u2026 otros estados a menudo son temporales y terminan derivando en una conexi\u00f3n establecida o bien desapareciendo), muestra la IP y el puerto local utilizados para establecer la conexi\u00f3n (o para escuchar, segundos) y la IP y puerto remoto donde la correspondiente IP + puerto local est\u00e1n conectados. NOTA: Otro cliente similar es el comando host nomDNS [ip.serv.DNS] -t Mostrar s\u00f3lo las conexiones TCP actuales -u Mostrar s\u00f3lo las conexiones UDP actuales -n No resuelve nombres (es decir: muestra IPs y puertos en formato num\u00e9rico en lugar de con nombres) -a (Combinado con -t y/o -u): Muestra, adem\u00e1s de las conexiones actuales, los puertos a la escucha -l (Combinado con -t y / o -u): Muestra s\u00f3lo los puertos a la escucha (las conexiones actuales no) -p (Combinado con -t y / o -u): Muestra 1 columna m\u00e1s: el ejecutable \u00abdetr\u00e1s\u00bb de cada puerto local \u2013s Muestra un resumen con estad\u00edsticas ncat \u00b6 ncat ip.oNom.Maq.Remota noport Cliente Netcat que viene dentro del paquete \u00abnmap\u00bb: realiza una conexi\u00f3n (TCP) en la m\u00e1quina y puerto indicado. Se puede a\u00f1adir el par\u00e1metro -v (modo verboso) y -n (no resuelve nombres), entre otros. -v Modo verboso (-vv es m\u00e1s verboso y -vvv m\u00e1s a\u00fan) ncat -l -k -p n\u00ba Servidor Netcat: pone a la escucha el n\u00ba de puerto (TCP) indicado. el argumento -l sirve para \u00ababrir\u00bb el puerto, el par\u00e1metro -p sirve para indicar el n\u00famero de puerto a abrir y el par\u00e1metro -k permite que se puedan conectar m\u00e1s de un cliente a la vez. -e /ruta/comando Todo lo que se reciba de la red ser\u00e1 pasado al comando indicado, la salida ser\u00e1 devuelta al cliente. Si el comando indicado fuera /Bin/bash, la entrada se entender\u00e1 como un comando a ejecutar (y la salida ser\u00e1 la salida del comando ejecutado). Exemples Ncat Chat Servidor: ncat -l -p 5588 <\u2014> Cliente: ncat ipServidor 5588 El servidor se pone a escuchar en el puerto 5588 (por defecto siempre es TCP), con lo que todo lo que le llegue de la red -es decir, del cliente-lo pasar\u00e1 a la stdout (pantalla), y todo lo que escriba por stdin (teclado) pasar\u00e1 a la red -es decir, hacia el cliente-. Lo mismo ocurre en el otro lado de la comunicaci\u00f3n. Si se a\u00f1ade el par\u00e1metro -k al servidor, m\u00faltiples clientes podr\u00e1n enviar mensajes al servidor y este, lo que env\u00ede, lo enviar\u00e1 a todos sin discriminaci\u00f3n Env\u00edo de un archivo Servidor: ncat -l -p 5555 < archivo <-> Cliente: ncat ipServidor 5555 > archivo Muy similar a lo anterior: el servidor se pone a escuchar en el puerto 5555, pero en vez de responder por teclado a la stdin, la entrada proviene de un archivo, el cual esperar\u00e1 latente a que cuando se establezca una comunicaci\u00f3n por ese puerto, su contenido viaje bit a bit por la red hacia el cliente, el cual lo recibir\u00e1 y lo guardar\u00e1 en forma de archivo otra vez. Lo malo es que tal como se ha hecho, no se sabe cu\u00e1ndo se ha acabado la transferencia: hay que esperar un tiempo prudencial y entonces hacer Ctrl+C. Reproducci\u00f3n de audio en streaming Servidor: ncat -l -p 5858 Cliente: ncat ipServidor 5858 | mpg123 \u2013 El ejemplo es id\u00e9ntico al anterior, teniendo un archivo en este caso de audio. La \u00fanica diferencia es que en el cliente, el archivo no se redirecciona para grabarlo en disco sino que se entuba a un reproductor de audio por consola, como mpg123 (el gui\u00f3n del final es para indicarle que el fichero o lista de reproducci\u00f3n le proviene de la tuber\u00eda). Clonaci\u00f3n de discos por red Servidor: ncat -l -p 5678 | dd of=a.iso.gz <\u2014->Cliente: dd if=/dev/sda | gzip -c | ncat ipServidor 5678 El ejemplo es parecido al anterior: primero en el cliente se comprime bit a bit el contenido del disco \u00absda\u00bb y se le env\u00eda ya comprimido al servidor, el cual recibe este contenido binario y lo almacena en un archivo, bit a bit too. nmap \u00b6 nmap -sn { ipInici-ipFinal [altraIP \u2026] | ipConAsteriscos } Muestra qu\u00e9 ordenadores est\u00e1n presentes en la red. existen muchos otros par\u00e1metros de escaneo (-sU, -sX, -sF, etc) que utilizan diferentes t\u00e9cnicas m\u00e1s o \u2013 r\u00e1pidas / sigilosas / precisas, pero no las veremos. -v Modo verboso (-vv es m\u00e1s verboso y -vvv m\u00e1s a\u00fan) -n No resuelve nombres nmap -p n\u00ba, n\u00ba-n\u00ba ipOrdenador Muestra qu\u00e9 puertos (del rango indicado) tiene abiertos un ordenador concreto. Aqu\u00ed tambi\u00e9n se pueden utilizar diferentes t\u00e9cnicas pero tampoco profundizaremos -O Muestra el sistema operativo del ordenador y los programas \u00abdetr\u00e1s\u00bb de los puertos abiertos. Se puede combinar con el par\u00e1metro -sV, el cual muestra tambi\u00e9n las versiones. El par\u00e1metro -A es la combinaci\u00f3n de los dos. nslookup \u00b6 nslookup nombreDNS [ip.serv.DNS] Cliente DNS que pregunta al servidor indicado o, si no se indica ninguno, al que est\u00e9 configurado en /etc/resolv.conf . Normalmente, adem\u00e1s de devolver la IP (o IPs equivalentes) asociadas al nombre indicado, tambi\u00e9n muestra los \u00abalias\u00bb que tiene este nombre NOTA Otro cliente similar es el comando host nomDNS [ip.serv.DNS] NOTA Otro cliente similar es el comando dig [@ip.serv.DNS] nomDNS. O drill NOTA Otro cliente pero s\u00f3lo compatible con systemd-resolved es systemd-resolve whois \u00b6 whois dominioDNS Consulta en los servidores whois publicos (administrados por la IANA) para averiguar el propietario o registrador del dominio wget \u00b6 wget https://url/un/archivo Descarga al disco duro el archivo indicado -c Contin\u00faa la descarga (si anteriormente fall\u00f3) desde donde se interrumpi\u00f3 -O nombre Indica el nombre que tendr\u00e1 el archivo una vez descargado -r Realiza una descarga recursiva si la URL indicada es la de una carpeta en vez de la de un archivo. Combinado con el par\u00e1metro -l n\u00ba sirve para indicar hasta qu\u00e9 nivel (1 = una subcarpeta, 2 =dos subcarpetas) se quiere descargar \u2026 si no se indica se entiende \u00abinfinito\u00bb -N Descarga s\u00f3lo los archivos m\u00e1s nuevos que los locales -A \u00abext1\u00bb, \u00abext2\u00bb, \u2026 Descarga s\u00f3lo los archivos que encuentre con la extensi\u00f3n indicada El par\u00e1metro contrario (descarga todo excepto los archivos indicados) es -R \u2013no-parent No descarga contenido anterior a la URL indicada -nd Todo lo descarga en la misma carpeta local (sin respetar, pues, la jerarqu\u00eda de carpetas del sitio remoto) -k Una vez hecha la descarga, transforma los enlaces para que todo el contenido se pueda visitar offline (cambia las rutas absolutas para relativas y los recursos no descargados los referencia con la URL completa curl \u00b6 curl https://url/un/archivo Descargar el fichero indicado y muestra en pantalla su contenido -o nombre Descargar archivo indicado y lo guarda en el disco duro con el nombre que se especifique -O Descargar el fichero indicado y lo guarda en el disco duro con el nombre que tenga el original -C \u2013 Contin\u00faa la descarga desde el no de byte indicado (si es un gui\u00f3n, ser\u00e1 a partir de donde se par\u00f3 la descarga -fallida- anterior del mismo archivo -s Modo \u00absilencioso\u00bb (no muestra ni las estad\u00edsticas de descarga ni los errores, nada) -SS Modo \u00absilencioso\u00bb pero mostrando los mensajes de error -v Modo \u00abverboso\u00bb. Sirve para mostrar las cabeceras de cliente enviadas a la petici\u00f3n -Y No descarga el archivo: s\u00f3lo muestra la cabecera de respuesta HTTP del servidor -y Mostrar en pantalla tanto las cabeceras de respuesta como el contenido del archivo pedido -D nombre Guarda en el disco duro, en forma de archivo con el nombre indica, las cabeceras de respuesta -L Si el servidor web devuelve un c\u00f3digo de redirecci\u00f3n (3xx), lo sigue autom\u00e1ticamente -H \u00abcabecera: valor\u00bb Realiza una petici\u00f3n indicando un valor concreto para la cabecera HTTP de cliente indicada. Se pueden poner m\u00faltiples par\u00e1metros -H. \u2013X tipo Realiza una petici\u00f3n del tipo indicado (POST, PUT, etc). Por defecto son GET dig \u00b6 Averiguar MX de un dominio, comando dig dig mx sugestionweb.com ; <<>> DiG 9.10.3-P4-Ubuntu <<>> mx sugestionweb.com ;; global options: +cmd ;; Got answer: ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 12971 ;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 1 ;; OPT PSEUDOSECTION: ; EDNS: version: 0, flags:; udp: 512 ;; QUESTION SECTION: ;sugestionweb.com. IN MX ;; ANSWER SECTION: sugestionweb.com. 14400 IN MX 10 mx1.spamcluster.com. sugestionweb.com. 14400 IN MX 20 mx2.spamcluster.com. ;; Query time: 66 msec ;; SERVER: 127.0.1.1#53(127.0.1.1) ;; WHEN: Thu Jun 07 10:46:19 CEST 2018 ;; MSG SIZE rcvd: 97 Ver la configuraci\u00f3n actual de la red \u00b6 Direcci\u00f3n IP \u00b6 Para ver el estado y configuraci\u00f3n de las tarjetas detectadas se puede usar el comando ip address show (o bien ip address show dev NombreTarjeta si s\u00f3lo se quiere obtener la informaci\u00f3n de una tarjeta determinada). Concretamente nos muestra: Las direcciones MAC de las tarjetas Su estado respectivo (UP, DOWN) Sus direcciones IP respectivas (y la m\u00e1scara correspondiente) Otros datos (como si permite el env\u00edo \u00abbroadcast\u00bb, si est\u00e1 en modo \u00abpromiscuo\u00bb, etc). Note NOTA: El comando ip address show se puede escribir de forma m\u00e1s corta as\u00ed: ip a s. Incluso, se puede dejar de escribir el verbo show (o s) porque es la acci\u00f3n por defecto (por lo tanto, se puede hacer ip address o ip a y ser\u00eda lo mismo). Tambi\u00e9n es \u00fatil el par\u00e1metro -c (as\u00ed: ip -c a s) para ver los datos m\u00e1s relevantes en colores. Puerta de Enlace \u00b6 Para saber, en cambio, cu\u00e1l es la puerta de enlace configurada en nuestra m\u00e1quina, usaremos el comando ip route show (o bien ip route show dev nomTarjeta o sus variantes ip route, ip r s o ip r). Este comando debe mostrar una l\u00ednea que comenzar\u00e1 con la expresi\u00f3n \u00abdefault via\u00bb seguida de la direcci\u00f3n IP de la puerta de enlace establecida. Este comando puede mostrar m\u00e1s l\u00edneas, pero no nos interesar\u00e1n mucho \u2026 (quiz\u00e1s la m\u00e1s curiosa es una que sirve para indicar que no hay ninguna puerta de enlace para comunicarse con las m\u00e1quinas que precisamente pertenezcan a la misma red a la que pertenece nuestra m\u00e1quina). Servidores DNS \u00b6 Para saber la direcci\u00f3n IP del servidor DNS configurado en nuestra m\u00e1quina (o las IPs \u2026 si hay m\u00e1s de una se prueba conectar a la primera y si esta falla entonces se prueba la segunda, y as\u00ed) se puede consultar el archivo /etc/resolv.conf (concretamente, las l\u00edneas que comienzan por la palabra nameserver). Estos servidores ser\u00e1n los que todas las aplicaciones del sistema (desde el ping hasta el navegador) utilizar\u00e1n para averiguar cu\u00e1l es la IP del nombre que el usuario haya escrito. El contenido de este archivo suele ser gestionado por diferentes programas (como puede ser el cliente dhclient, la aplicaci\u00f3n NetworkManager, el servicio \u00abnetworking\u00ab, el servicio \u00absystemd-networkd/resolved\u00ab, etc) y es por ello que no se recomienda modificarlo manualmente ya que los cambios realizados a mano podr\u00edan \u00abMachacar\u00bb sin avisar en cualquier momento por cualquiera de estos programas. En este sentido, estos programas (dhclient, NetworkManager, \u00abnetworking\u00bb, \u00absystemd-networkd / resolved, etc) guardan los servidores DNS que usan dentro de sus propios archivos de configuraci\u00f3n y los manipulan all\u00ed de forma aut\u00f3noma (por ejemplo NetworkManager usa /var/run/NetworkManager/resolv.conf, \u00absystemd-resolved\u00bb usa /run/systemd/resolve/resolv.conf, \u00abNetworking\u00bb usa la l\u00ednea dns-nameservers dentro de /etc/network/interfaces, etc) pero adem\u00e1s siempre vinculan en forma de enlace simb\u00f3lico su archivo propio respectivo al archivo com\u00fan /etc/resolv.conf para que los programas que utilicen este archivo com\u00fan no tengan problemas en encontrar los servidores DNS. NOTA: En ocasiones al consultar el archivo /etc/resolv.conf el \u00fanico servidor que aparece es el 127.0.1.1 , esto probablemente se deba a que est\u00e1 instalado el demonio dnsmasq que guarda una cach\u00e9 de DNS y de DHCP,. En el caso de querer utilizar otros servidores DNS asignados por otro dispositvo por DHCP (un router por ejemplo) podemos encontrarnos que la m\u00e1quina no hace caso. Para solucionarlo, modificaremos el archivo /etc/NetworkManager/NetworkManager.conf y comentaremos la linea dns=dnsmasq con una \u00ab#\u00bb al principio. Despu\u00e9s reiniciaremos el servicio Network Manager con sudo service network-manager restart. Si consultamos de nuevo el fichero /etc/resolv.conf veremos que ahora si asigna los DNS correctamente.","title":"Networking"},{"location":"kb/GNU-Linux/Networking/Networking/#networking","text":"","title":"Networking"},{"location":"kb/GNU-Linux/Networking/Networking/#osi-stack","text":"Se recomienda una lectura efusiva de libros relacionados","title":"OSI Stack"},{"location":"kb/GNU-Linux/Networking/Networking/#redes-tcpip","text":"","title":"Redes TCP/IP"},{"location":"kb/GNU-Linux/Networking/Networking/#calculo-de-mascarasrangos-de-red","text":"En las redes TCP/IP el funcionamiento del c\u00e1lculo de m\u00e1scaras de red o rangos IP \u00e9s exactamente igual: Las direcciones IP (192.168.1.0) al igual que sus m\u00e1scaras de red estan formadas por 4 n\u00fameros decimales de entre 1 y 3 d\u00edgitos que van del 0 al 255 ( n\u00ba max. de combinaciones posibles con 8 bits \u2192 (2^8)-2=254 ya que el 0 y el 255 est\u00e1n reservados para rango IP y broadcast respectivamente ) por lo que nos quedar\u00eda: DEC BIN -------------------------------------------------------------------- Ej.IP 192.168.1.0 11000000 10101000 00000001 00000000 Ej.Mask 255.255.0.0 11111111 11111111 00000000 00000000 255.255.255.0 11111111 11111111 11111111 00000000 Tenemos varias formas de expresar la mascara, en binario como en el ejemplo anterior, en notaci\u00f3n decimal ( lo m\u00e1s com\u00fan ) o bien al lado de la IP con una barra ( ej IP/MASK ->> 192.168.1.0/24 (CIDR)) Tabla de m\u00e1scaras de red M\u00c1SCARAS DE RED Binario Decimal CIDR +--------------------------------------------------------------------------------------------------------+ 11111111.11111111.11111111.11111111 255.255.255.255 /32 11111111.11111111.11111111.11111110 255.255.255.254 /31 11111111.11111111.11111111.11111100 255.255.255.252 /30 11111111.11111111.11111111.11111000 255.255.255.248 /29 11111111.11111111.11111111.11110000 255.255.255.240 /28 11111111.11111111.11111111.11100000 255.255.255.224 /27 11111111.11111111.11111111.11000000 255.255.255.192 /26 11111111.11111111.11111111.10000000 255.255.255.128 /25 11111111.11111111.11111111.00000000 255.255.255.0 /24 11111111.11111111.11111110.00000000 255.255.254.0 /23 11111111.11111111.11111100.00000000 255.255.252.0 /22 11111111.11111111.11111000.00000000 255.255.248.0 /21 11111111.11111111.11110000.00000000 255.255.240.0 /20 11111111.11111111.11100000.00000000 255.255.224.0 /19 11111111.11111111.11000000.00000000 255.255.192.0 /18 11111111.11111111.10000000.00000000 255.255.128.0 /17 11111111.11111111.00000000.00000000 255.255.0.0 /16 11111111.11111110.00000000.00000000 255.254.0.0 /15 11111111.11111100.00000000.00000000 255.252.0.0 /14 11111111.11111000.00000000.00000000 255.248.0.0 /13 11111111.11110000.00000000.00000000 255.240.0.0 /12 11111111.11100000.00000000.00000000 255.224.0.0 /11 11111111.11000000.00000000.00000000 255.192.0.0 /10 11111111.10000000.00000000.00000000 255.128.0.0 /9 11111111.00000000.00000000.00000000 255.0.0.0 /8 11111110.00000000.00000000.00000000 254.0.0.0 /7 11111100.00000000.00000000.00000000 252.0.0.0 /6 11111000.00000000.00000000.00000000 248.0.0.0 /5 11110000.00000000.00000000.00000000 240.0.0.0 /4 11100000.00000000.00000000.00000000 224.0.0.0 /3 11000000.00000000.00000000.00000000 192.0.0.0 /2 10000000.00000000.00000000.00000000 128.0.0.0 /1 00000000.00000000.00000000.00000000 0.0.0.0 /0 Vamos a tomar como ejemplo la direcci\u00f3n de red 192.168.0.0 con mascara de subred 255.255.255.0. Teniendo esta direcci\u00f3n de red (u otra direcci\u00f3n de clase C con mascara de subred por defecto) solo podremos tener 254 hosts. Veamos por que: La mascara de subred por defecto de una direcci\u00f3n IP de clase C nos dice que solo el ultimo octeto esta destinado a hosts. Esos 8 n\u00fameros del \u00faltimo octeto, equivalen a 256 n\u00fameros posibles (2^8 = 256). Pero por que antes dije que solo 254 eran validos? De esos 256 n\u00fameros posibles, hay solo 2 que no podremos usar para un host: El 192.168.0.0 y el 192.168.0.255, ya que esas dos direcciones son las direcciones de red y difusi\u00f3n respectivamente. Entonces, (2^8) - 2 = 254. Pero, que pasa si yo se que solo voy a usar 10 de esas 254 direcciones? Como dec\u00eda antes, las subredes pueden ayudarnos, entre otras cosas, a aprovechar direcciones IP. Siguiendo con el ejemplo: Si tenemos la direcci\u00f3n 192.168.0.0 con mascara de subred 255.255.255.0, podemos utilizar por ejemplo 4 de esos 8 bits, para armar subredes. En este caso, la mascara de subred seria 11111111.11111111.11111111.11110000 o 255.255.255.240. Es decir: Tenemos 24 bits de red, 4 de subred y 4 de host. Ahora podremos hacer 14 subredes de 14 host cada una. Y digo 14 y no 16 por que pasa lo mismo que dec\u00eda antes: El calculo se hace elevando el numero 2 (binario) a la cantidad de bits para subred (4) - 2 (red y difusi\u00f3n): (24) \u2013 2 = 14. La cantidad de hosts se calcula de la misma manera. Sabiendo esto, podremos enumerar las 14 subredes que podemos hacer 192.168.0.00010000 (hosts entre .0.17 y .0.30 inclusive) 192.168.0.00100000 (hosts entre .0.33 y .0.46 inclusive) 192.168.0.00110000 (hosts entre .0.49 y .0.62 inclusive) 192.168.0.01000000 (hosts entre .0.65 y .0.78 inclusive) 192.168.0.01010000 (hosts entre .0.81 y .0.94 inclusive) 192.168.0.01100000 (hosts entre .0.97 y .0.110 inclusive) 192.168.0.01110000 (hosts entre .0.113 y .0.126 inclusive) 192.168.0.10000000 (hosts entre .0.129 y .0.142 inclusive) 192.168.0.10010000 (hosts entre .0.145 y .0.158 inclusive) 192.168.0.10100000 (hosts entre .0.161 y .0.174 inclusive) 192.168.0.10110000 (hosts entre .0.177 y .0.190 inclusive) 192.168.0.11000000 (hosts entre .0.193 y .0.206 inclusive) 192.168.0.11010000 (hosts entre .0.209 y .0.222 inclusive) 192.168.0.11100000 (hosts entre .0.225 y .0.238 inclusive)","title":"C\u00e1lculo de m\u00e1scaras/rangos de red"},{"location":"kb/GNU-Linux/Networking/Networking/#nomenclatura-de-tarjetas-de-red-en-linux","text":"Las tarjetas de red en sistemas Linux se pueden llamar de las siguientes maneras: lo : Corresponde a la tarjeta \"loopback\". Recordemos que hemos dicho que esta tarjeta f\u00edsicamente no existe (es un \"invento\" del sistema operativo) y suele tener siempre tiene la IP 127.0.0.\u215b. Sirve para establecer una conexi\u00f3n con s\u00ed misma, de tal forma que podemos tener en la misma m\u00e1quina un programa cliente que conecte a un programa servidor sin salir \"fuera\". eno1, eno2 : Tarjetas Ethernet integradas en la placa base ( \"on-board\") ens1, ens2 : Tarjetas Ethernet PCI ( \"slot\") enp2s0, p3p1 : Tarjetas Ethernet que no se pueden localizar de otra forma debido a limitaciones de la BIOS wlp2s0 :tarjetas WiFi Dentro de las m\u00e1quinas virtuales de VirtualBox las tarjetas de red cogen siempre un nombre concreto: la tarjeta correspondiente a la primera pesta\u00f1a del cuadro de configuraci\u00f3n de red se llamar\u00e1 \"enp0s3\" dentro del sistema virtualizado, la segunda \"enp0s8\", la tercera \"enp0s9\" y la cuarta \"enp0s10\".","title":"Nomenclatura de tarjetas de red en Linux"},{"location":"kb/GNU-Linux/Networking/Networking/#ifconfig-ip","text":"Mostrar dispositivos de red y configuraci\u00f3n ifconfig ip addr show / ip a ip link show habilitar una tarjeta de red ifconfig eth0 up ip link set eth0 up deshabilitar una tarjeta de red ifconfig eth0 down ip link set eth0 down Atenci\u00f3n A pesar de que el comando /bin/ip es capaz de hacer lo mismo e incluso mas que ifconfig , es necesario conocer algo de este comando, aunque utilizaremos siempre que podamos el comando /bin/ip ifconfig \u2192 a pelo devuelve un listado de las tarjetas de red levantadas y un p\u00e1rrafo descriptivo. ifconfig eth0 \u2192 solo muestra info de esta tarjeta de red ifconfig <device> <ip> netmask ifconfig eth0:1 10.3.2.1 up \u2192 crear un dispositivo de red virtual (Alias) ifconfig <device> <ip> <mask> up/down (Si no le pones m\u00e1scara la calcula el) si hacemos ifconfig eth0 down puede perderse la IP ifconfig eth0 hw ether 02:01:02:03:04:08 confirmar con ifconfig eth0","title":"ifconfig / ip"},{"location":"kb/GNU-Linux/Networking/Networking/#direccion-de-loopback-o-de-bucle-local","text":"Evita que salgan paquetes al exterior. Se usa para conectarse a servicios que tenemos en la misma m\u00e1quina. las tarjetas ethernet se numeran con eth0, eth1, eth2\u2026. Para conexiones wireless utilizamos iwconfig que nos mostrar\u00e1 los dispositivos wifi compatibles. utilidad ipcalc (calculadora IP) ipcalc 10.8.0.0/19 Address: 10.8.0.0 00001010.00001000.000 00000.00000000 Netmask: 255.255.224.0 = 19 11111111.11111111.111 00000.00000000 Wildcard: 0.0.31.255 00000000.00000000.000 11111.11111111 => Network: 10.8.0.0/19 00001010.00001000.000 00000.00000000 HostMin: 10.8.0.1 00001010.00001000.000 00000.00000001 HostMax: 10.8.31.254 00001010.00001000.000 11111.11111110 Broadcast: 10.8.31.255 00001010.00001000.000 11111.11111111 Hosts/Net: 8190 Class A, Private Internet mac address las mac address que muestra ifconfig se pueden falsificar, comando macchanger es buena pr\u00e1ctica cambiar la mac address si vamos a trastear. los cambios hechos as\u00ed son ef\u00edmeros, por eso existen unos ficheros de config ficheros de config de red Redhat y Debian utilizan distintos ficheros dentro de la carpeta /etc Redhat /etc/sysconfig/network-scripts/ifcfg Debian /etc/network/interfaces https://wiki.debian.org/es/NetworkConfiguration Ejemplo de fichero /etc/network/interfaces para IP est\u00e1tica Otros ficheros de configuraci\u00f3n /etc/hosts /etc/resolv.conf /etc/network/interfaces","title":"Direcci\u00f3n de loopback o de bucle local"},{"location":"kb/GNU-Linux/Networking/Networking/#comandos-basicos-de-red-en-linux","text":"","title":"Comandos b\u00e1sicos de red en Linux"},{"location":"kb/GNU-Linux/Networking/Networking/#ver-la-configuracion-actual","text":"","title":"Ver la configuraci\u00f3n actual"},{"location":"kb/GNU-Linux/Networking/Networking/#estado-y-configuracion-de-las-tarjetas-detectadas","text":"El comando ip address show (o bien ip address show dev nomTarjeta si s\u00f3lo se quiere obtener la informaci\u00f3n de una tarjeta determinada) nos muestra: Las direcciones MAC de las tarjetas Su estado respectivo (UP, DOWN) Sus direcciones IP respectivas (y la m\u00e1scara correspondiente) Otros datos (como si permite el env\u00edo \"broadcast\", si est\u00e1 en modo \"promiscuo\", etc). NOTA El comando ip address show se puede escribir de forma m\u00e1s corta as\u00ed: ip a s . Incluso, se puede dejar de escribir el verbo show (o s) porque es la acci\u00f3n por defecto (por lo tanto, se puede hacer ip address o ip a y ser\u00eda lo mismo). Tambi\u00e9n es \u00fatil el par\u00e1metro -c (as\u00ed: ip -c a s ) para ver los datos m\u00e1s relevantes en colores. Para activar / desactivar una tarjeta: ip link set {up|down} dev nomTarjeta","title":"Estado y configuraci\u00f3n de las tarjetas detectadas"},{"location":"kb/GNU-Linux/Networking/Networking/#puerta-de-enlace","text":"El comando ip route show (o bien ip route show dev nomTarjeta o sus variantes ip route , ip r s o ip r ) debe mostrar una l\u00ednea que comenzar\u00e1 con la expresi\u00f3n \"default v\u00eda\" seguida de la direcci\u00f3n IP de la puerta de enlace establecida. Este comando puede mostrar m\u00e1s l\u00edneas, pero no nos interesar\u00e1n mucho ... (quiz\u00e1s la m\u00e1s curiosa es una que sirve para indicar que no hay ninguna puerta de enlace para comunicarse con las m\u00e1quinas que pertenezcan a la misma red a la que pertenece nuestra m\u00e1quina).","title":"Puerta de enlace"},{"location":"kb/GNU-Linux/Networking/Networking/#dns","text":"Para saber la direcci\u00f3n IP del servidor DNS configurado en nuestra m\u00e1quina (o las IPs \u2026 si hay m\u00e1s de una se prueba conectar a la primera y si esta falla entonces se prueba la segunda, y as\u00ed) se puede consultar el archivo etc/resolv.conf (concretamente, las l\u00edneas que comienzan por la palabra nameserver). Estos servidores ser\u00e1n los que todas las aplicaciones del sistema (desde el ping hasta el navegador) utilizar\u00e1n para averiguar cu\u00e1l es la IP del nombre que el usuario haya escrito. El contenido de este archivo suele ser gestionado por diferentes programas (como puede ser el cliente dhclient , la aplicaci\u00f3n NetworkManager , el servicio networking , el servicio systemd-networkd/resolved , etc) y es por ello que no se recomienda modificarlo manualmente ya que los cambios realizados a mano podr\u00edan \u00abMachacar\u00bb sin avisar en cualquier momento por cualquiera de estos programas. En este sentido, estos programas ( dhclient, NetworkManager, \u00abnetworking\u00bb, \u00absystemd-networkd / resolved, etc ) guardan los servidores DNS que usan dentro de sus propios archivos de configuraci\u00f3n y los manipulan all\u00ed de forma aut\u00f3noma (por ejemplo NetworkManager usa /var/run/NetworkManager/resolv.conf, \u00absystemd-resolved\u00bb usa /run/systemd/resolve/resolv.conf, \u00abNetworking\u00bb usa la l\u00ednea dns-nameservers dentro de /etc/network/interfaces, etc) pero adem\u00e1s siempre vinculan en forma de enlace simb\u00f3lico su archivo propio respectivo al archivo com\u00fan /etc/resolv.conf para que los programas que utilicen este archivo com\u00fan no tengan problemas en encontrar los servidores DNS.","title":"DNS"},{"location":"kb/GNU-Linux/Networking/Networking/#establecer-una-configuracion-de-red-estatica-de-forma-temporal","text":"Para asignar una IP / m\u00e1scara concreta a una tarjeta: ip address add v.x.y.z/n dev nomTarjeta Para borrar una IP / m\u00e1scara concreta de una tarjeta: ip address del v.x.y.z / n dev nomTarjeta NOTA Tambi\u00e9n se puede hacer ip address flush dev nomTarjeta si lo que se quiere es borrar de golpe cualesquiera de las eventuales diferentes direcciones IP que pueda tener la tarjeta indicada Para asignar la puerta de enlace concreta a una tarjeta: ip route add default v\u00eda v.x.y.z dev nomTarjeta . Antes, sin embargo, deber\u00eda borrar la que hab\u00eda asignada antes (si no se hace da error), as\u00ed: ip route del default dev nomTarjeta . NOTA Tambi\u00e9n se puede escribir ip route add 0.0.0.0/0 v\u00eda v.x.y.z dev nomTarjeta . Es equivalente. NOTA De forma alternativa, en vez de hacer ip route del \u2026 y despu\u00e9s ip route add \u2026 , el cambio de puerta de enlace predeterminada se podr\u00eda hacer directamente en un solo paso, as\u00ed: ip route change default v\u00eda v.x.y.z dev nomTarjeta NOTA Tambi\u00e9n se puede indicar que se quiere utilizar una determinada puerta de enlace s\u00f3lo para llegar a una red-destino concreta. En este caso, entonces, no estar\u00edamos hablando de puerta de enlace \u00abpor defecto\u00bb sino de una puerta de enlace \u00abespec\u00edfica\u00bb. La puerta de enlace \u00abpor defecto\u00bb ser\u00eda usada una vez que el sistema hubiera comprobado que el destino deseado no forma parte del conjunto de destinos indicados en puertas de enlace espec\u00edficas. Para crear una puerta de enlace espec\u00edfica hay que ejecutar el comando ip route add ip.red.Destino/Mascara v\u00eda v.x.y.z dev nomTarjeta Se puede a\u00f1adir adem\u00e1s un \u00faltimo par\u00e1metro metric n, que indica la preferencia de la ruta en el caso de que hubieran varias que llevaran al mismo destino (a modo de \u00abbackup\u00bb): un n menor indica una mayor preferencia. NOTA Una vez asignada una direcci\u00f3n IP a una tarjeta, el sistema calcula autom\u00e1ticamente su direcci\u00f3n IP de red correspondiente y genera una ruta a ella (es por eso que es necesario indicar la m\u00e1scara en ip address add \u2026) Por ejemplo, si se asigna la IP 203.0.113.25/24 a la tarjeta enp0s3, se crear\u00e1 autom\u00e1ticamente una ruta en la red 203.0.113.0/24 directa, por lo que el sistema sabr\u00e1 que para comunicarse con hosts de esta red no necesitar\u00e1 ninguna puerta de enlace intermediaria sino que lo podr\u00e1 hacer directamente.","title":"Establecer una configuraci\u00f3n de red est\u00e1tica de forma temporal"},{"location":"kb/GNU-Linux/Networking/Networking/#establecer-una-configuracion-estatica-de-forma-permanente","text":"","title":"Establecer una configuraci\u00f3n est\u00e1tica de forma permanente"},{"location":"kb/GNU-Linux/Networking/Networking/#en-sistemas-debian-clasicos","text":"Todos los comandos anteriores, sin embargo, s\u00f3lo \u00abfuncionan\u00bb mientras la m\u00e1quina se mantiene encendida: si apaga entonces las direcciones IP / m\u00e1scaras y puertas de enlace configuradas con las \u00f3rdenes \u00abip\u00bb anteriores se pierden y hay, pues, que volver a ejecutarlas de nuevo en el siguiente inicio. Para que la configuraci\u00f3n deseada de IP / m\u00e1scara y puerta de enlace (y servidor DNS tambi\u00e9n, gestionado con alguno de los programas comentados en p\u00e1rrafos anteriores) para una determinada tarjeta de red se mantenga de forma permanente en cada reinicio de la m\u00e1quina, hay que escribir los valores adecuados en un determinado archivo. En sistemas Debian/Ubuntu, este archivo se denomina /etc/network/interfaces y debe tener un aspecto similar al siguiente (las l\u00edneas que comienzan por # son comentarios, las tabulaciones son opcionales): # Las l\u00edneas \"auto\" sirven para activar la tarjeta en cuesti\u00f3n (en este #caso la tarjeta \"lo\") auto lo # La l\u00ednea siguiente indica que la tarjeta \"lo\" es de # tipo \"loopback\" (y que, por tanto, tendr\u00e1 la IP 127.0.0.1) iface lo inet loopback # En el mismo archivo se pueden configurar todas las tarjetas que # se quieran: la siguiente se llama enp3s0 auto enp3s0 # La palabra \"static\" indica que los valores de IP, m\u00e1scara, etc # son fijos en cada reinicio iface enp3s0 inet static # A continuaci\u00f3n se indican los valores de IP, m\u00e1scara, puerta de # enlace y servidores DNS que se quieren asignar address v.x.y.z netmask w.w.w.w gateway v.x.y.z dns-nameservers v.x.y.z v.x.y.z Atenci\u00f3n Atenci\u00f3n, la l\u00ednea \u00ab dns-nameservers \u00bb del archivo anterior s\u00f3lo funciona (es decir, se copian los servidores DNS indicados all\u00ed en el archivo central del sistema donde deben estar para ser utilizados: /etc/resolv.conf) si hay instalado un paquete llamado \u00ab resolvconf \u00bb. Si no lo est\u00e1, estas l\u00edneas no se tendr\u00e1n en cuenta. Este archivo es le\u00eddo por un servicio del sistema (un demonio) que se pone en marcha autom\u00e1ticamente al arrancar la m\u00e1quina y que se denomina \u00abnetworking\u00bb. Esto quiere decir que en cualquier momento que hagamos un cambio dentro de este archivo, para que se tenga en cuenta o bien habr\u00e1 que reiniciar la m\u00e1quina o bien simplemente reiniciar el servicio, as\u00ed: sudo systemctl restart networking","title":"En sistemas Debian cl\u00e1sicos"},{"location":"kb/GNU-Linux/Networking/Networking/#en-sistemas-systemd","text":"\u00abSystemd-networkd\u00bb es un demonio que gestiona las configuraciones de las diferentes interfaces de red (f\u00edsicas y / o virtuales) de un sistema systemd, representando, pues, una alternativa al demonio \u00abNetworking\u00bb de sistemas Debian as\u00ed como tambi\u00e9n al scripts ifcfg- * cl\u00e1sicos de Fedora / Suse o al Network Manager integrado en muchos escritorios. Para empezar a utilizar este demonio es recomendable detener primero la \u00abcompetencia\u00bb, por ejemplo, en el caso de Ubuntu ejecutando sudo sytemctl disable networking && sudo systemctl stop networking) Y entonces encenderlo junto con el servicio \u00absystemd-resolved\u00bb, as\u00ed, por ejemplo: Note Al igual que ocurr\u00eda con el paquete \u00abresolvconf\u00bb en los sistemas Debian, se necesita tener un servicio adicional instalado (y funcionando) en el sistema llamado \u00absystemd-resolved\u00bb si se quieren especificar entradas DNS expl\u00edcitas en los archivos .network (o bien si se obtienen v\u00eda DHCP). Este servicio lo que hace es, a partir de estas entradas, modificar el archivo /run/systemd/resolve/resolv.conf, el cual, por compatibilidad con muchos programas tradicionales, deber\u00eda apuntar en forma de enlace suave en /etc/resolv.conf (ln -s /run/systemd/resolve/resolv.conf /etc/resolv.conf). Alternativamente, se puede no utilizar systemd-resolved y modificar entonces el archivo /etc/resolv.conf a mano. Se pueden ver el nombre (y tipo y estado) de las interfaces de red actualmente reconocidas en el sistema (y su tipo y estado) mediante el comando networkctl list . Si en la columna SETUP aparece \u00abunmanaged\u00bb significa que esta interfaz concreta no es gestionada por systemd-networkd sino por alg\u00fan otro servicio alternativo. Otra orden que da m\u00e1s informaci\u00f3n es networkctl status . En cualquier caso, para hacer que se gestione por systemd-networkd, por cada interfaz hay que crear un archivo * .network dentro de la carpeta /etc/systemd/network (y reiniciar el servicio). En el caso concreto de querer asignar una IP est\u00e1tica, ser\u00eda necesario, pues, tener un archivo como este (llamado por ejemplo /etc/systemd/network/lalala.network ): [Match] Name=enp1s0 #Identifica la tarjeta a la cual se le aplicar\u00e1 la configuraci\u00f3n [Network] DHCP=no Address=10.1.10.9/24 Gateway=10.1.10.1 DNS=10.1.10.2 #Opcional (Es necesario tener el servicio systemd-resolved funcionando) DNS=10.1.10.3 #Cada servidor DNS ha d'indicar-se en una l\u00ednia separada Los archivos de configuraci\u00f3n de systemd-networkd proporcionados por la distribuci\u00f3n se encuentran en /usr/lib/systemd/network y los administrados por nosotros se tienen que ubicar en /etc/systemd/network . Todos estos archivos se leen -sin distinci\u00f3n de donde est\u00e9n ubicados \u2013 en orden alfanum\u00e9rico seg\u00fan el nombre que tienen, ganando siempre la primera configuraci\u00f3n encontrada en caso de que afectara a la misma tarjeta. Eso s\u00ed, si en las dos carpetas se encuentra un fichero con el mismo nombre, lo que hay bajo /etc/systemd/network anula siempre a lo que hay en /usr/lib/systemd/network (una consecuencia de esto es que si el archivo en /etc/\u2026 apunta a /dev/null, lo que se estar\u00e1 haciendo es deshabilitar. Existen tres tipos diferentes de archivos de configuraci\u00f3n: los \u00ab.network\u00bb aplican la configuraci\u00f3n descrita bajo su secci\u00f3n [Network] a aquellas tarjetas de red que tengan una caracter\u00edstica que concuerde con todos los valores indicados en las diferentes l\u00edneas bajo la secci\u00f3n [Match] (normalmente aqu\u00ed s\u00f3lo indica su nombre mediante una \u00fanica l\u00ednea \u00abName =\u00bb) los \u00ab.netdev\u00bb sirven para crear nuevas interfaces de red de tipo virtual ( \u00abbridges\u00bb, \u00abbonds\u00bb, etc) -la configuraci\u00f3n de red se seguir\u00e1 indicando en su correspondiente archivo .network) los \u00ab.link\u00bb sirven para definir nombres alternativos a las tarjetas de red en el momento de ser reconocidas por el sistema (v\u00eda systemd-udev). En las l\u00edneas bajo la secci\u00f3n [Match] -por ejemplo, en \u00abName =\u00bb, se puede utilizar el comod\u00edn *. En esta l\u00ednea en concreto tambi\u00e9n se puede escribir un conjunto de nombres separados por un espacio en blanco a modo de diferentes alternativas. En los archivos .network puede haber una secci\u00f3n (no vista en los ejemplos anteriores) titulada [Link] bajo la que pueden haber varias l\u00edneas m\u00e1s relacionadas con el comportamiento \u00abhardware\u00bb de la tarjeta, como la l\u00ednea \u00abMACAddress = xx: xx: xx: xx: xx: xx\u00bb, la cual sirve para asignar a la tarjeta en cuesti\u00f3n una direcci\u00f3n MAC ficticia, la l\u00ednea \u00abMTUBytes = no\u00bb, la cual sirve para indicar el tama\u00f1o de la MTU admitida (\u00fatil por ejemplo para activar los \u00abjumbo frames\u00bb si se pone 9000 como valor), o la l\u00ednea \u00abARP = no\u00bb para desactivar el protocolo ARP en la tarjeta en cuesti\u00f3n (activado por defecto). Los archivos .netdev suelen tener s\u00f3lo una secci\u00f3n titulada [netdev], la cual debe incluir dos l\u00edneas obligatoriamente: \u00abName =\u00bb (por asignar un nombre a la interfaz virtual que se crear\u00e1) y \u00abKind =\u00bb (para especificar el tipo de interfaz que ser\u00e1: \u00abbridge\u00bb, \u00abbond\u00bb, \u00abVlan\u00bb, \u00abveth\u00bb, etc). En el caso de que sea de tipo \u00abvlan\u00bb, aparecer\u00e1 entonces una secci\u00f3n titulada [VLAN] incluyendo como m\u00ednimo la l\u00ednea \u00abId =\u00bb para indicar el n\u00famero de VLAN que se est\u00e1 creando. Los archivos .link suelen tener una secci\u00f3n [Match] con la l\u00ednea \u00abMACAddress =\u00bb para identificar la tarjeta de red en cuesti\u00f3n y una secci\u00f3n [Link] que sirve para manipular las caracter\u00edsticas de esta tarjeta, como por ejemplo su nombre (con la l\u00ednea \u00abName =\u00bb y, opcionalmente, la l\u00ednea \u00abDescription =\u00bb). Si no se crea manualmente ning\u00fan archivo .link, la mayor\u00eda de distribuciones ofrecen un archivo .link predeterminado, generalmente llamado 99-default.link (y ubicado en / usr / lib / systemd / network); es por ello que hay que asegurarse que los ficheros .link \u00abmanuales\u00bb tengan un nombre que asegure su lectura antes de la del archivo 99-default.link. Para m\u00e1s informaci\u00f3n sobre las posibilidades que ofrecen todos estos archivos, consultar las p\u00e1ginas del manual \u00absystemd.network\u00bb, \u00abSystemd.netdev\u00bb y \u00absystemd.link\u00bb. Atenci\u00f3n No s\u00f3lo existen el servicio \u00abnetworking\u00bb y \u00absystemd-networkd\u00bb para gestionar las tarjetas de red de nuestro sistema. Tambi\u00e9n podemos encontrar el servicio \u00abNetworkManager\u00bb (sobre todo en sistemas con escritorio) y en las \u00faltimas versiones de Ubuntu el servicio \u00abNetplan\u00bb, entre otros. !!!","title":"En sistemas systemd"},{"location":"kb/GNU-Linux/Networking/Networking/#establecer-una-configuracion-dinamica-de-forma-temporal","text":"En las configuraciones anteriores, tanto la temporal como la permanente, se establece una direcci\u00f3n IP / m\u00e1scara + puerta de enlace concreta, decidida por nosotros. Este m\u00e9todo puede ser \u00fatil para pocas m\u00e1quinas, pero en una red con muchos equipos, puede llegar a ser bastante farragoso, adem\u00e1s de que f\u00e1cilmente se pueden cometer errores (IPs duplicadas, IP no asignadas). Otro m\u00e9todo para establecer estos datos es el m\u00e9todo \u00abdin\u00e1mico\u00bb, en el que la m\u00e1quina en cuesti\u00f3n no tiene asignada de forma fija IP / m\u00e1scara + puerta de enlace + servidor DNS sino que estos datos los obtiene de la red: all\u00ed deber\u00e1 haber escuchando un ordenador ejecutando un software especial llamado \u00abServidor DHCP\u00bb, el cual sirve precisamente para atender estas peticiones de \u00abdatos de red\u00bb y asignarlas a quien las pida. De este modo, se tiene una gesti\u00f3n centralizada del reparto de direcciones IP / m\u00e1scara + puerta de enlace + servidores DNS sin necesidad de realizar ninguna configuraci\u00f3n espec\u00edfica en las m\u00e1quinas clientes. Eso s\u00ed, claro: primero se deber\u00e1 haber instalado y configurado convenientemente en nuestra red este software \u00abservidor DHCP\u00bb (un ejemplo es el paquete \u00abisc-dhcp-server \u00ab), tarea que no veremos (se presupone que esto ya est\u00e1 hecho). Nota Otro cliente similar es el comando host nomDNS [ip.serv.DNS] Para pedir en un momento determinado una configuraci\u00f3n completa de red (IP, m\u00e1scara, puerta de enlace, servidores DNS, etc) a un servidor DHCP ya funcionando en nuestra LAN hemos de ejecutar un cliente DHCP, como el comando dhclient Dhclient nomTarjeta Pide -para la tarjeta indicada- los datos de red (IP, m\u00e1scara, puerta de enlace, servidor DNS, etc) a alg\u00fan servidor DHCP que est\u00e9 escuchando a la LAN de nuestra m\u00e1quina. -v Muestra por pantalla todo el proceso de petici\u00f3n y respuesta (\u00fatil para ver si va) -r Borra todos los datos de red que pueda tener actualmente la tarjeta indicada","title":"Establecer una configuraci\u00f3n din\u00e1mica de forma temporal"},{"location":"kb/GNU-Linux/Networking/Networking/#establecer-una-configuracion-dinamica-de-forma-permanente","text":"","title":"Establecer una configuraci\u00f3n din\u00e1mica de forma permanente"},{"location":"kb/GNU-Linux/Networking/Networking/#en-sistemas-debian-clasicos_1","text":"Para pedir los datos de red a alg\u00fan servidor DHCP de nuestra red, en vez de tener que hacerlo manualmente con el comando dhclient , se puede hacer de forma autom\u00e1tica cada vez que nuestra m\u00e1quina arranque (de modo que nosotros no tengamos que hacer nada y ya tengamos, si todo va bien, estos datos ya asignadas una vez iniciamos sesi\u00f3n). Esto se logra simplemente escribiendo las siguientes l\u00edneas en el archivo /etc/network/interfaces: auto enp3s0 iface enp3s0 inet dhcp","title":"En sistemas Debian cl\u00e1sicos"},{"location":"kb/GNU-Linux/Networking/Networking/#en-sistemas-systemd_1","text":"En el caso concreto de querer asignar una IP din\u00e1mica en un sistema con el demonio systemd-netword funcionando, habr\u00e1 que tener un archivo como este (llamado por ejemplo /etc/systemd/network/lalala.network ): [Match] Name = enp1s0 [Network] DHCP = yes # Tambi\u00e9n podr\u00eda valer ipv4 o ipv6 seg\u00fan el tipo de direcciones IP que queremos recibir","title":"En sistemas systemd"},{"location":"kb/GNU-Linux/Networking/Networking/#ping","text":"ping ip o Nombre Maq. Remota Comprueba si la m\u00e1quina remota indicada responde. Sirve, por tanto, para saber si hay conexi\u00f3n de red con aquella m\u00e1quina (si no, podr\u00eda ser debido a cualquier causa: cable mal enchufado o roto, m\u00e1quina remota apagada, etc). En este sentido, son interesantes los datos estad\u00edsticos que aparecen al final (paquetes enviados, recibidos, perdidos, etc) y el tiempo que han tardado en enviarse estos paquetes de prueba (y recibirse la respuesta) -y as\u00ed comprobar la saturaci\u00f3n del medio. -n No resuelve nombres (es decir, no hace la consulta previa en el servidor DNS del sistema). Por lo tanto, s\u00f3lo hace que funcione indicando direcciones IP -c n\u00ba N\u00famero de paquetes de prueba que se enviar\u00e1n (si no se indica, son infinitos y hay que detener el env\u00edo pulsando CTRL + C) -i n\u00baN\u00famero de segundos que se espera para enviar el siguiente paquete -f Mode \u00abflood\u00bb. Env\u00eda paquetes a la m\u00e1xima velocidad posible, mostrando un punto por cada paquete enviado y borr\u00e1ndose el por cada respuesta recibida: por lo tanto, para ir bien habr\u00eda que s\u00f3lo se viera un punto y fuera desapareciendo: si se ven muchos puntos es que hay p\u00e9rdida de paquetes. Hay que ser root para que funcione -I eno1 Indica la tarjeta de red para la que se enviar\u00e1n los paquetes (por si la m\u00e1quina tuviera m\u00e1s de una)","title":"ping"},{"location":"kb/GNU-Linux/Networking/Networking/#mtr","text":"mtr ip.o Nom.Maq.Remota Sirve para conocer el camino seguido por un paquete desde la m\u00e1quina origen hasta la indicada, mostrando la IP (o nombre) de todos los routers intermedios a trav\u00e9s de los que va pasando. tambi\u00e9n muestra estad\u00edsticas de tiempo empleado en cada paquete, el mejor tiempo, el peor, los paquetes perdidos, etc -n No resuelve nombres (es decir, no hace la consulta previa en el servidor DNS del sistema). -c n\u00ba N\u00famero de paquetes de prueba que se enviar\u00e1n (si no se indica, son infinitos y hay que parar el env\u00edo pulsando CTRL + C) -i n\u00ba N\u00famero de segundos que se espera para enviar el siguiente paquete","title":"mtr"},{"location":"kb/GNU-Linux/Networking/Networking/#ss","text":"Muestra datos sobre las conexiones existentes (o que pueden existir) en nuestra m\u00e1quina. Concretamente, muestra el estado de la conexi\u00f3n (los m\u00e1s habituales son ESTABLISHED y LISTEN -este \u00faltimo indica que el puerto est\u00e1 abierto pero sin conexi\u00f3n -\u2026 otros estados a menudo son temporales y terminan derivando en una conexi\u00f3n establecida o bien desapareciendo), muestra la IP y el puerto local utilizados para establecer la conexi\u00f3n (o para escuchar, segundos) y la IP y puerto remoto donde la correspondiente IP + puerto local est\u00e1n conectados. NOTA: Otro cliente similar es el comando host nomDNS [ip.serv.DNS] -t Mostrar s\u00f3lo las conexiones TCP actuales -u Mostrar s\u00f3lo las conexiones UDP actuales -n No resuelve nombres (es decir: muestra IPs y puertos en formato num\u00e9rico en lugar de con nombres) -a (Combinado con -t y/o -u): Muestra, adem\u00e1s de las conexiones actuales, los puertos a la escucha -l (Combinado con -t y / o -u): Muestra s\u00f3lo los puertos a la escucha (las conexiones actuales no) -p (Combinado con -t y / o -u): Muestra 1 columna m\u00e1s: el ejecutable \u00abdetr\u00e1s\u00bb de cada puerto local \u2013s Muestra un resumen con estad\u00edsticas","title":"ss"},{"location":"kb/GNU-Linux/Networking/Networking/#ncat","text":"ncat ip.oNom.Maq.Remota noport Cliente Netcat que viene dentro del paquete \u00abnmap\u00bb: realiza una conexi\u00f3n (TCP) en la m\u00e1quina y puerto indicado. Se puede a\u00f1adir el par\u00e1metro -v (modo verboso) y -n (no resuelve nombres), entre otros. -v Modo verboso (-vv es m\u00e1s verboso y -vvv m\u00e1s a\u00fan) ncat -l -k -p n\u00ba Servidor Netcat: pone a la escucha el n\u00ba de puerto (TCP) indicado. el argumento -l sirve para \u00ababrir\u00bb el puerto, el par\u00e1metro -p sirve para indicar el n\u00famero de puerto a abrir y el par\u00e1metro -k permite que se puedan conectar m\u00e1s de un cliente a la vez. -e /ruta/comando Todo lo que se reciba de la red ser\u00e1 pasado al comando indicado, la salida ser\u00e1 devuelta al cliente. Si el comando indicado fuera /Bin/bash, la entrada se entender\u00e1 como un comando a ejecutar (y la salida ser\u00e1 la salida del comando ejecutado). Exemples Ncat Chat Servidor: ncat -l -p 5588 <\u2014> Cliente: ncat ipServidor 5588 El servidor se pone a escuchar en el puerto 5588 (por defecto siempre es TCP), con lo que todo lo que le llegue de la red -es decir, del cliente-lo pasar\u00e1 a la stdout (pantalla), y todo lo que escriba por stdin (teclado) pasar\u00e1 a la red -es decir, hacia el cliente-. Lo mismo ocurre en el otro lado de la comunicaci\u00f3n. Si se a\u00f1ade el par\u00e1metro -k al servidor, m\u00faltiples clientes podr\u00e1n enviar mensajes al servidor y este, lo que env\u00ede, lo enviar\u00e1 a todos sin discriminaci\u00f3n Env\u00edo de un archivo Servidor: ncat -l -p 5555 < archivo <-> Cliente: ncat ipServidor 5555 > archivo Muy similar a lo anterior: el servidor se pone a escuchar en el puerto 5555, pero en vez de responder por teclado a la stdin, la entrada proviene de un archivo, el cual esperar\u00e1 latente a que cuando se establezca una comunicaci\u00f3n por ese puerto, su contenido viaje bit a bit por la red hacia el cliente, el cual lo recibir\u00e1 y lo guardar\u00e1 en forma de archivo otra vez. Lo malo es que tal como se ha hecho, no se sabe cu\u00e1ndo se ha acabado la transferencia: hay que esperar un tiempo prudencial y entonces hacer Ctrl+C. Reproducci\u00f3n de audio en streaming Servidor: ncat -l -p 5858 Cliente: ncat ipServidor 5858 | mpg123 \u2013 El ejemplo es id\u00e9ntico al anterior, teniendo un archivo en este caso de audio. La \u00fanica diferencia es que en el cliente, el archivo no se redirecciona para grabarlo en disco sino que se entuba a un reproductor de audio por consola, como mpg123 (el gui\u00f3n del final es para indicarle que el fichero o lista de reproducci\u00f3n le proviene de la tuber\u00eda). Clonaci\u00f3n de discos por red Servidor: ncat -l -p 5678 | dd of=a.iso.gz <\u2014->Cliente: dd if=/dev/sda | gzip -c | ncat ipServidor 5678 El ejemplo es parecido al anterior: primero en el cliente se comprime bit a bit el contenido del disco \u00absda\u00bb y se le env\u00eda ya comprimido al servidor, el cual recibe este contenido binario y lo almacena en un archivo, bit a bit too.","title":"ncat"},{"location":"kb/GNU-Linux/Networking/Networking/#nmap","text":"nmap -sn { ipInici-ipFinal [altraIP \u2026] | ipConAsteriscos } Muestra qu\u00e9 ordenadores est\u00e1n presentes en la red. existen muchos otros par\u00e1metros de escaneo (-sU, -sX, -sF, etc) que utilizan diferentes t\u00e9cnicas m\u00e1s o \u2013 r\u00e1pidas / sigilosas / precisas, pero no las veremos. -v Modo verboso (-vv es m\u00e1s verboso y -vvv m\u00e1s a\u00fan) -n No resuelve nombres nmap -p n\u00ba, n\u00ba-n\u00ba ipOrdenador Muestra qu\u00e9 puertos (del rango indicado) tiene abiertos un ordenador concreto. Aqu\u00ed tambi\u00e9n se pueden utilizar diferentes t\u00e9cnicas pero tampoco profundizaremos -O Muestra el sistema operativo del ordenador y los programas \u00abdetr\u00e1s\u00bb de los puertos abiertos. Se puede combinar con el par\u00e1metro -sV, el cual muestra tambi\u00e9n las versiones. El par\u00e1metro -A es la combinaci\u00f3n de los dos.","title":"nmap"},{"location":"kb/GNU-Linux/Networking/Networking/#nslookup","text":"nslookup nombreDNS [ip.serv.DNS] Cliente DNS que pregunta al servidor indicado o, si no se indica ninguno, al que est\u00e9 configurado en /etc/resolv.conf . Normalmente, adem\u00e1s de devolver la IP (o IPs equivalentes) asociadas al nombre indicado, tambi\u00e9n muestra los \u00abalias\u00bb que tiene este nombre NOTA Otro cliente similar es el comando host nomDNS [ip.serv.DNS] NOTA Otro cliente similar es el comando dig [@ip.serv.DNS] nomDNS. O drill NOTA Otro cliente pero s\u00f3lo compatible con systemd-resolved es systemd-resolve","title":"nslookup"},{"location":"kb/GNU-Linux/Networking/Networking/#whois","text":"whois dominioDNS Consulta en los servidores whois publicos (administrados por la IANA) para averiguar el propietario o registrador del dominio","title":"whois"},{"location":"kb/GNU-Linux/Networking/Networking/#wget","text":"wget https://url/un/archivo Descarga al disco duro el archivo indicado -c Contin\u00faa la descarga (si anteriormente fall\u00f3) desde donde se interrumpi\u00f3 -O nombre Indica el nombre que tendr\u00e1 el archivo una vez descargado -r Realiza una descarga recursiva si la URL indicada es la de una carpeta en vez de la de un archivo. Combinado con el par\u00e1metro -l n\u00ba sirve para indicar hasta qu\u00e9 nivel (1 = una subcarpeta, 2 =dos subcarpetas) se quiere descargar \u2026 si no se indica se entiende \u00abinfinito\u00bb -N Descarga s\u00f3lo los archivos m\u00e1s nuevos que los locales -A \u00abext1\u00bb, \u00abext2\u00bb, \u2026 Descarga s\u00f3lo los archivos que encuentre con la extensi\u00f3n indicada El par\u00e1metro contrario (descarga todo excepto los archivos indicados) es -R \u2013no-parent No descarga contenido anterior a la URL indicada -nd Todo lo descarga en la misma carpeta local (sin respetar, pues, la jerarqu\u00eda de carpetas del sitio remoto) -k Una vez hecha la descarga, transforma los enlaces para que todo el contenido se pueda visitar offline (cambia las rutas absolutas para relativas y los recursos no descargados los referencia con la URL completa","title":"wget"},{"location":"kb/GNU-Linux/Networking/Networking/#curl","text":"curl https://url/un/archivo Descargar el fichero indicado y muestra en pantalla su contenido -o nombre Descargar archivo indicado y lo guarda en el disco duro con el nombre que se especifique -O Descargar el fichero indicado y lo guarda en el disco duro con el nombre que tenga el original -C \u2013 Contin\u00faa la descarga desde el no de byte indicado (si es un gui\u00f3n, ser\u00e1 a partir de donde se par\u00f3 la descarga -fallida- anterior del mismo archivo -s Modo \u00absilencioso\u00bb (no muestra ni las estad\u00edsticas de descarga ni los errores, nada) -SS Modo \u00absilencioso\u00bb pero mostrando los mensajes de error -v Modo \u00abverboso\u00bb. Sirve para mostrar las cabeceras de cliente enviadas a la petici\u00f3n -Y No descarga el archivo: s\u00f3lo muestra la cabecera de respuesta HTTP del servidor -y Mostrar en pantalla tanto las cabeceras de respuesta como el contenido del archivo pedido -D nombre Guarda en el disco duro, en forma de archivo con el nombre indica, las cabeceras de respuesta -L Si el servidor web devuelve un c\u00f3digo de redirecci\u00f3n (3xx), lo sigue autom\u00e1ticamente -H \u00abcabecera: valor\u00bb Realiza una petici\u00f3n indicando un valor concreto para la cabecera HTTP de cliente indicada. Se pueden poner m\u00faltiples par\u00e1metros -H. \u2013X tipo Realiza una petici\u00f3n del tipo indicado (POST, PUT, etc). Por defecto son GET","title":"curl"},{"location":"kb/GNU-Linux/Networking/Networking/#dig","text":"Averiguar MX de un dominio, comando dig dig mx sugestionweb.com ; <<>> DiG 9.10.3-P4-Ubuntu <<>> mx sugestionweb.com ;; global options: +cmd ;; Got answer: ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 12971 ;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 1 ;; OPT PSEUDOSECTION: ; EDNS: version: 0, flags:; udp: 512 ;; QUESTION SECTION: ;sugestionweb.com. IN MX ;; ANSWER SECTION: sugestionweb.com. 14400 IN MX 10 mx1.spamcluster.com. sugestionweb.com. 14400 IN MX 20 mx2.spamcluster.com. ;; Query time: 66 msec ;; SERVER: 127.0.1.1#53(127.0.1.1) ;; WHEN: Thu Jun 07 10:46:19 CEST 2018 ;; MSG SIZE rcvd: 97","title":"dig"},{"location":"kb/GNU-Linux/Networking/Networking/#ver-la-configuracion-actual-de-la-red","text":"","title":"Ver la configuraci\u00f3n actual de la red"},{"location":"kb/GNU-Linux/Networking/Networking/#direccion-ip","text":"Para ver el estado y configuraci\u00f3n de las tarjetas detectadas se puede usar el comando ip address show (o bien ip address show dev NombreTarjeta si s\u00f3lo se quiere obtener la informaci\u00f3n de una tarjeta determinada). Concretamente nos muestra: Las direcciones MAC de las tarjetas Su estado respectivo (UP, DOWN) Sus direcciones IP respectivas (y la m\u00e1scara correspondiente) Otros datos (como si permite el env\u00edo \u00abbroadcast\u00bb, si est\u00e1 en modo \u00abpromiscuo\u00bb, etc). Note NOTA: El comando ip address show se puede escribir de forma m\u00e1s corta as\u00ed: ip a s. Incluso, se puede dejar de escribir el verbo show (o s) porque es la acci\u00f3n por defecto (por lo tanto, se puede hacer ip address o ip a y ser\u00eda lo mismo). Tambi\u00e9n es \u00fatil el par\u00e1metro -c (as\u00ed: ip -c a s) para ver los datos m\u00e1s relevantes en colores.","title":"Direcci\u00f3n IP"},{"location":"kb/GNU-Linux/Networking/Networking/#puerta-de-enlace_1","text":"Para saber, en cambio, cu\u00e1l es la puerta de enlace configurada en nuestra m\u00e1quina, usaremos el comando ip route show (o bien ip route show dev nomTarjeta o sus variantes ip route, ip r s o ip r). Este comando debe mostrar una l\u00ednea que comenzar\u00e1 con la expresi\u00f3n \u00abdefault via\u00bb seguida de la direcci\u00f3n IP de la puerta de enlace establecida. Este comando puede mostrar m\u00e1s l\u00edneas, pero no nos interesar\u00e1n mucho \u2026 (quiz\u00e1s la m\u00e1s curiosa es una que sirve para indicar que no hay ninguna puerta de enlace para comunicarse con las m\u00e1quinas que precisamente pertenezcan a la misma red a la que pertenece nuestra m\u00e1quina).","title":"Puerta de Enlace"},{"location":"kb/GNU-Linux/Networking/Networking/#servidores-dns","text":"Para saber la direcci\u00f3n IP del servidor DNS configurado en nuestra m\u00e1quina (o las IPs \u2026 si hay m\u00e1s de una se prueba conectar a la primera y si esta falla entonces se prueba la segunda, y as\u00ed) se puede consultar el archivo /etc/resolv.conf (concretamente, las l\u00edneas que comienzan por la palabra nameserver). Estos servidores ser\u00e1n los que todas las aplicaciones del sistema (desde el ping hasta el navegador) utilizar\u00e1n para averiguar cu\u00e1l es la IP del nombre que el usuario haya escrito. El contenido de este archivo suele ser gestionado por diferentes programas (como puede ser el cliente dhclient, la aplicaci\u00f3n NetworkManager, el servicio \u00abnetworking\u00ab, el servicio \u00absystemd-networkd/resolved\u00ab, etc) y es por ello que no se recomienda modificarlo manualmente ya que los cambios realizados a mano podr\u00edan \u00abMachacar\u00bb sin avisar en cualquier momento por cualquiera de estos programas. En este sentido, estos programas (dhclient, NetworkManager, \u00abnetworking\u00bb, \u00absystemd-networkd / resolved, etc) guardan los servidores DNS que usan dentro de sus propios archivos de configuraci\u00f3n y los manipulan all\u00ed de forma aut\u00f3noma (por ejemplo NetworkManager usa /var/run/NetworkManager/resolv.conf, \u00absystemd-resolved\u00bb usa /run/systemd/resolve/resolv.conf, \u00abNetworking\u00bb usa la l\u00ednea dns-nameservers dentro de /etc/network/interfaces, etc) pero adem\u00e1s siempre vinculan en forma de enlace simb\u00f3lico su archivo propio respectivo al archivo com\u00fan /etc/resolv.conf para que los programas que utilicen este archivo com\u00fan no tengan problemas en encontrar los servidores DNS. NOTA: En ocasiones al consultar el archivo /etc/resolv.conf el \u00fanico servidor que aparece es el 127.0.1.1 , esto probablemente se deba a que est\u00e1 instalado el demonio dnsmasq que guarda una cach\u00e9 de DNS y de DHCP,. En el caso de querer utilizar otros servidores DNS asignados por otro dispositvo por DHCP (un router por ejemplo) podemos encontrarnos que la m\u00e1quina no hace caso. Para solucionarlo, modificaremos el archivo /etc/NetworkManager/NetworkManager.conf y comentaremos la linea dns=dnsmasq con una \u00ab#\u00bb al principio. Despu\u00e9s reiniciaremos el servicio Network Manager con sudo service network-manager restart. Si consultamos de nuevo el fichero /etc/resolv.conf veremos que ahora si asigna los DNS correctamente.","title":"Servidores DNS"},{"location":"kb/GNU-Linux/Networking/Servidor%20DLNA/","text":"Instalar un servidor DLNA para \u00abAllShare\u00bb de Samsung en Linux \u00b6 MiniDLNA es un servidor DLNA compatible con televisores Samsung y otras marcas. Este standard te permite acceder desde el televisor a las carpetas compartidas que tengas en el PC y de esa forma ver tus contenidos en el televisor. Mi equipo \u00b6 Televisor Samsung LED Series 5 (Compatible con DLNA) Router de Telef\u00f3nica Equipo de sobremesa con Linux Ubuntu 12.04 LTS Conexiones \u00b6 Partimos de que tengas bien configurada tu red, preferiblemente todo con IP\u2019s fijas El televisor, lo he conectado a la red dom\u00e9stica con un PLC El ordenador de sobremesa conectado directamente al Router El 2\u00ba PLC conectado al Router Instalando MiniDLNA en Linux Ubuntu 12.04 LTS. \u00b6 MiniDLNA es un software que, instalado en un ordenador, nos permite compartir ciertas carpetas con tus contenidos (Fotos, videos, musica\u2026) y as\u00ed puedes ver en el televisor esos contenidos. Descargar los fuentes de la \u00faltima versi\u00f3n de MiniDLNA desde http://sourceforge.net/projects/minidlna/files/minidlna/ y descomprimirlos en una carpeta temporal. La misma carpeta de descargas sirve. Los siguientes pasos se realizan desde el terminal, puedes copiar y pegar las \u00f3rdenes\u2026 ejecuta el siguiente comando para quedarte como administrador: sudo su Instalar los fuentes de las librer\u00edas necesarias para la compilaci\u00f3n: apt-get install libavutil-dev libavcodec-dev libavformat-dev libflac-dev Mas fuentes\u2026: apt-get install libvorbis-dev libid3tag0-dev libexif-dev libjpeg62-dev libsqlite3-dev Compilar ./configure; make; make install Copiar el script de arranque a init.d cp linux/minidlna.init.d.script /etc/init.d/minidlna Cambiar los permisos del script chmod 755 /etc/init.d/minidlna Declarar que se arranque en todos los niveles update-rc.d minidlna defaults Modificar el archivo de configuraci\u00f3n sudo gedit /etc/minidlna.conf En el archivo de configuracion, cambiar el directorio o directorios que se van a compartir y que ser\u00e1n accesibles desde el servidor. Descomentar la linea donde asigna la tarjeta de red y que viene comentada por defecto. Si no lo haces, el servicio DLNA no arrancar\u00e1 automaticamente cuando inicies Linux Para arrancar el servidor por primera vez: /etc/init.d/minidlna start Una vez arrancado el servidor, en la televisi\u00f3n, seleccionas el bot\u00f3n de entrada y podr\u00e1s ver el pinguino de Linux. Recursos \u00b6 https://help.ubuntu.com/community/MiniDLNA http://sourceforge.net/projects/minidlna/files/minidlna http://es.wikipedia.org/wiki/Digital_Living_Network_Alliance http://www.dlna.org/","title":"Servidor DLNA"},{"location":"kb/GNU-Linux/Networking/Servidor%20DLNA/#instalar-un-servidor-dlna-para-allshare-de-samsung-en-linux","text":"MiniDLNA es un servidor DLNA compatible con televisores Samsung y otras marcas. Este standard te permite acceder desde el televisor a las carpetas compartidas que tengas en el PC y de esa forma ver tus contenidos en el televisor.","title":"Instalar un servidor DLNA para \u00abAllShare\u00bb de Samsung en Linux"},{"location":"kb/GNU-Linux/Networking/Servidor%20DLNA/#mi-equipo","text":"Televisor Samsung LED Series 5 (Compatible con DLNA) Router de Telef\u00f3nica Equipo de sobremesa con Linux Ubuntu 12.04 LTS","title":"Mi equipo"},{"location":"kb/GNU-Linux/Networking/Servidor%20DLNA/#conexiones","text":"Partimos de que tengas bien configurada tu red, preferiblemente todo con IP\u2019s fijas El televisor, lo he conectado a la red dom\u00e9stica con un PLC El ordenador de sobremesa conectado directamente al Router El 2\u00ba PLC conectado al Router","title":"Conexiones"},{"location":"kb/GNU-Linux/Networking/Servidor%20DLNA/#instalando-minidlna-en-linux-ubuntu-1204-lts","text":"MiniDLNA es un software que, instalado en un ordenador, nos permite compartir ciertas carpetas con tus contenidos (Fotos, videos, musica\u2026) y as\u00ed puedes ver en el televisor esos contenidos. Descargar los fuentes de la \u00faltima versi\u00f3n de MiniDLNA desde http://sourceforge.net/projects/minidlna/files/minidlna/ y descomprimirlos en una carpeta temporal. La misma carpeta de descargas sirve. Los siguientes pasos se realizan desde el terminal, puedes copiar y pegar las \u00f3rdenes\u2026 ejecuta el siguiente comando para quedarte como administrador: sudo su Instalar los fuentes de las librer\u00edas necesarias para la compilaci\u00f3n: apt-get install libavutil-dev libavcodec-dev libavformat-dev libflac-dev Mas fuentes\u2026: apt-get install libvorbis-dev libid3tag0-dev libexif-dev libjpeg62-dev libsqlite3-dev Compilar ./configure; make; make install Copiar el script de arranque a init.d cp linux/minidlna.init.d.script /etc/init.d/minidlna Cambiar los permisos del script chmod 755 /etc/init.d/minidlna Declarar que se arranque en todos los niveles update-rc.d minidlna defaults Modificar el archivo de configuraci\u00f3n sudo gedit /etc/minidlna.conf En el archivo de configuracion, cambiar el directorio o directorios que se van a compartir y que ser\u00e1n accesibles desde el servidor. Descomentar la linea donde asigna la tarjeta de red y que viene comentada por defecto. Si no lo haces, el servicio DLNA no arrancar\u00e1 automaticamente cuando inicies Linux Para arrancar el servidor por primera vez: /etc/init.d/minidlna start Una vez arrancado el servidor, en la televisi\u00f3n, seleccionas el bot\u00f3n de entrada y podr\u00e1s ver el pinguino de Linux.","title":"Instalando MiniDLNA en Linux Ubuntu 12.04 LTS."},{"location":"kb/GNU-Linux/Networking/Servidor%20DLNA/#recursos","text":"https://help.ubuntu.com/community/MiniDLNA http://sourceforge.net/projects/minidlna/files/minidlna http://es.wikipedia.org/wiki/Digital_Living_Network_Alliance http://www.dlna.org/","title":"Recursos"},{"location":"kb/GNU-Linux/Seguridad/Autenticaci%C3%B3n_vs_Autorizaci%C3%B3n/","text":"Autenticaci\u00f3n vs Autorizaci\u00f3n \u00b6 Autenticaci\u00f3n \u00b6 Se denomina \"autenticaci\u00f3n\" al proceso de verificar una identidad . Este proceso implica la identificaci\u00f3n de un elemento (que suele ser un usuario pero tambi\u00e9n puede ser un programa o, en el caso de interacciones por red, incluso una m\u00e1quina) por parte del sistema verificador (que puede ser un programa local como gdm, login, sudo o su o un servidor remoto como SSH, POP / SMTP, etc) Hay muchas maneras de autenticar: mediante contrase\u00f1as simples, contrase\u00f1as de una sola vez (OTP), certificados ,, exploraciones biom\u00e9tricos, etc ... todos estos modos se denominan \"credenciales\" en general. El tipo exacto de credencial requerida estar\u00e1 definido por el mecanismo de autenticaci\u00f3n que el sistema verificador tenga configurado. Los mecanismos m\u00e1s habituales (y que se pueden combinar entre s\u00ed) son: Basado en contrase\u00f1as simples : Permite autenticar usuarios si \u00e9stos proporcionan un nombre y contrase\u00f1a reconocidos como v\u00e1lidos por el sistema verificador. Se basa en algo que el usuario sabe Basado en contrase\u00f1as OTP : A one-time password (OTP) is an automatically generated num\u00e9rico or alphanumeric string of characters that authenticates the user for a single transaction or login session. an OTP is more secure than a static password because it can not be reused. Very often OTPs are involved in some kind of 2FA ( \"Two Factor Authentication\") or MFA ( \"Multiple Factor Authentication\") process where, after user providing a simple password, he / she must generate the OTP in his / her pre-tied hardware device (which can be an specialized one or simply a mobile phone using some specific app -although if using the SMSs one then the OTP is not generated on device but received from third-party server-) to then provide it too so that finalize the authentication. De este modo, las autenticaciones 2FA se basan en algo que el usuario sabe (la contrase\u00f1a simple inicial) m\u00e1s algo que el usuario tiene f\u00edsicamente (el dispositivo hardware / app m\u00f3vil donde se recibe la OTP). Para m\u00e1s informaci\u00f3n puede consultar el articulo: https://www.eff.org/deeplinks/2017/09/guide-common-types-two-factor-authentication-web y tambi\u00e9n https://sec.eff.org/topics/two-factor-authentication NOTA Una \"segunda generaci\u00f3n de autenticaci\u00f3n 2FA es la que hace uso de claves UF2 (\" Universal 2 Factor \") para evitar el uso de apps m\u00f3viles a la hora de gestionar las contrase\u00f1as OTP (debido a sus posibles vulnerabilidades). Las claves UF2 son dispositivos hardware de tipo USB (o tambi\u00e9n inal\u00e1mbricos de tipo NFC) que hacen uso de criptograf\u00eda asim\u00e9trica y se pueden configurar para autenticarse autom\u00e1ticamente contra, sobre todo, aplicaciones web (Correo, redes sociales, etc). More specifically, when a user tries to access a\u00f1o (Previously configured accordingly) account, after first entering static password he / she should glance at the device and enter the displayed 2FA code back into the site or app. Other versions of keys can automatically transfer the 2FA code to the recognized site domain name when plugged into a computer USB puerto (if this domain name has been Introduced Previously into key) without manual intervention. Estas claves pueden estar desarrolladas por diferentes fabricantes (Uno de los m\u00e1s conocidos es Yubico, que fabrica sus \"yubikeys\") pero todos siguen el mismo est\u00e1ndar UF2, estandarizado por la FIDO Alliance (un conglomerado de empresas entre las que se encuentran Google, Facebook, Microsoft, etc). NOTA Otro ejemplo de autenticaci\u00f3n 2FA (esta vez sin que intervengan OTPs, pero) es la proporcionada los cajeros autom\u00e1ticos para que se basa en algo que el usuario tiene f\u00edsicamente (la tarjeta bancaria) y algo que el usuario sabe (el pin). Basado en certificados (de cliente) : Permite autenticar la m\u00e1quina del usuario. Funciona as\u00ed: esta m\u00e1quina env\u00eda un certificado (que es un archivo criptogr\u00e1ficamente vinculado a dicha m\u00e1quina) a trav\u00e9s de la red a un servidor que deber\u00e1 confirmar la validez del certificado y, por tanto, la identidad de la m\u00e1quina en cuesti\u00f3n. Se basa en algo que la m\u00e1quina del usuario guarda NOTA NOTA: El protocolo TLS, muy utilizado en Internet para asegurar las comunicaciones de los navegadores con servidores web (entre otros), utiliza un mecanismo muy similar tambi\u00e9n basado en certificados pero en este caso de servidor. Basado en \"smart cards\" : Variante \"hardware\" del mecanismo anterior. La \"smart card\" (o, m\u00e1s habitual actualmente, una \"app\" de m\u00f3vil) almacena el certificado; cuando el usuario inserta un determinado \"token\" en el sistema, este leer\u00e1 el certificado y conceder\u00e1 el acceso. Se basa en algo que el usuario tiene f\u00edsicamente Biom\u00e9trico : Existen diferentes m\u00e9todos, como la huella dactilar, la forma de la mano, el patr\u00f3n del iris, la voz, etc. En https://cromwell-intl.com/cybersecurity/authentication.html#authtool_biometric se puede consultar una lista de fabricantes de componentes biom\u00e9tricos. Se basa en algo que el usuario es. Mediante Kerberos : Sistema de credenciales de corta duraci\u00f3n y multi-servidor. Funciona as\u00ed: el usuario primero presenta al servidor Kerberos unas credenciales propias (normalmente, son un nombre de usuario y contrase\u00f1a, pero pueden ser de cualquiera de los otros tipos mencionados: certificados, biom\u00e9tricos ... o una combinaci\u00f3n de estos), para identificarse y as\u00ed poder recibir de este servidor la credencial de corta duraci\u00f3n, llamada TGT. Este TGT utilizar\u00e1 a partir de entonces para acceder autom\u00e1ticamente a otros servicios, (Como servidores de correo electr\u00f3nico, de carpetas compartidas, etc). La \"gracia\" de la autenticaci\u00f3n haciendo servir Kerberos es que permite realizar s\u00f3lo un proceso de autenticaci\u00f3n (al principio, para pedir el TGT) porque a partir de entonces se reaprovecha este proceso para acceder a m\u00faltiples servidores diferentes de forma totalmente automatizada (mientras dure el per\u00edodo de validez del TGT, claro.). Este hecho es lo que llama \"Single Sign-On\" o SSO y se utiliza principalmente en entornos corporativos. Nota NOTA: Hay que tener en cuenta que el SSO pone \"todos los huevos en una cesta\": si s\u00f3lo una contrase\u00f1a es robada o adivinada, entonces todos los recursos e identidades est\u00e1n comprometidas. Hay que tener un equilibrio, pues, entre conveniencia y seguridad. Tal como hemos dicho, el sistema verificador debe tener configurado un determinado mecanismo de autenticaci\u00f3n. la tarea de este mecanismo, sea cual sea \u00e9ste, sin embargo, siempre es la misma: comparar cada credencial presentada con las que tenga almacenadas previamente en una (o varias) \"bases de datos\": si ambas credenciales coinciden, la comprobaci\u00f3n ser\u00e1 exitosa y la parte solicitante autenticar\u00e1. En el caso concreto de utilizar la autenticaci\u00f3n basado en contrase\u00f1as, las \"bases de datos\" que consulta el sistema verificador (que es donde, en definitiva, est\u00e1n guardados los nombres y contrase\u00f1as v\u00e1lidos) se pueden encontrar: Localmente dentro del propio sistema verificador. Normalmente en forma de archivos de texto (como es el caso del archivo \"/etc/shadow\" Linux) o de registro binario (como es el caso de Windows) En un servidor remoto que sea accedido cuando sea necesario por el sistema verificador. Este servidor remoto puede ser de diferentes tipos seg\u00fan los requisitos que necesite nuestro sistema de autenticaci\u00f3n particular pero b\u00e1sicamente deben proporcionar un sistema de almacenar nombres y contrase\u00f1as. Los m\u00e1s comunes son: Un servidor LDAP Un sistema gestor de base de datos relacional (SGBD) Un servidor Kerberos (que proporcionar\u00e1 TGTs) Un servidor RADIUS Nota Tanto los servidores LDAP con los SGBDs pueden contener, adem\u00e1s de la informaci\u00f3n estrictamente relacionada con la autenticaci\u00f3n (nombres y contrase\u00f1as, b\u00e1sicamente), diferente informaci\u00f3n extra relacionada con los usuarios autenticados (como datos personales: tel\u00e9fono, email, etc o datos de sistema: ruta de la carpeta personal, shell preferido, etc, etc). De hecho, incluso se podr\u00eda combinar el uso de Kerberos (o RADIUS) con otro servidor LDAP o SGBD, delegando as\u00ed el proceso de autenticaci\u00f3n s\u00f3lo en Kerberos (o RADIUS) y utilizando la base de datos LDAP / relacional s\u00f3lo de fuente de informaci\u00f3n complementaria. RADIUS, por su parte, tambi\u00e9n incorpora ciertas funcionalidades relacionadas con procesos de autorizaciones, principalmente relacionadas con el acceso a redes Autorizaci\u00f3n \u00b6 Se llama \"autorizaci\u00f3n\", por otra parte, al proceso que determina qu\u00e9 puede hacer y / o donde puede acceder el elemento autenticado. Una vez un determinado elemento ha sido identificado (por ejemplo, un usuario), el sistema determinar\u00e1, con los datos que obtenga de este usuario (provenientes de diferentes fuentes), a qu\u00e9 recursos (es decir, a qu\u00e9 programas, carpetas y ficheros, hardware, etc) estar\u00e1 autorizado a entrar / conectar / leer / modificar / escribir / eliminar / ejecutar, etc y en cu\u00e1les no. As\u00ed pues, hay que distinguir entre autenticaci\u00f3n y la autorizaci\u00f3n para que son dos procesos separados. Las fuentes de informaci\u00f3n que puede utilizar el sistema para construir el esquema de autorizaciones de un determinado usuario autenticado son muchas y muy variadas. Desde el sistema de permisos de archivos y carpetas cl\u00e1sico pasando por las ACLs y las \"capabilities\" hasta llegar a esquemas m\u00e1s complejos como los MACs SELinux (o AppArmor) o como los subsistemas proporcionados por sudo o el framework Polk, entre muchos otros. Todo ello combinado con el posible uso de servidores remotos LDAP (o relacionales o RADIUS) para completar toda esta informaci\u00f3n.","title":"Autenticaci\u00f3n vs Autorizaci\u00f3n"},{"location":"kb/GNU-Linux/Seguridad/Autenticaci%C3%B3n_vs_Autorizaci%C3%B3n/#autenticacion-vs-autorizacion","text":"","title":"Autenticaci\u00f3n vs Autorizaci\u00f3n"},{"location":"kb/GNU-Linux/Seguridad/Autenticaci%C3%B3n_vs_Autorizaci%C3%B3n/#autenticacion","text":"Se denomina \"autenticaci\u00f3n\" al proceso de verificar una identidad . Este proceso implica la identificaci\u00f3n de un elemento (que suele ser un usuario pero tambi\u00e9n puede ser un programa o, en el caso de interacciones por red, incluso una m\u00e1quina) por parte del sistema verificador (que puede ser un programa local como gdm, login, sudo o su o un servidor remoto como SSH, POP / SMTP, etc) Hay muchas maneras de autenticar: mediante contrase\u00f1as simples, contrase\u00f1as de una sola vez (OTP), certificados ,, exploraciones biom\u00e9tricos, etc ... todos estos modos se denominan \"credenciales\" en general. El tipo exacto de credencial requerida estar\u00e1 definido por el mecanismo de autenticaci\u00f3n que el sistema verificador tenga configurado. Los mecanismos m\u00e1s habituales (y que se pueden combinar entre s\u00ed) son: Basado en contrase\u00f1as simples : Permite autenticar usuarios si \u00e9stos proporcionan un nombre y contrase\u00f1a reconocidos como v\u00e1lidos por el sistema verificador. Se basa en algo que el usuario sabe Basado en contrase\u00f1as OTP : A one-time password (OTP) is an automatically generated num\u00e9rico or alphanumeric string of characters that authenticates the user for a single transaction or login session. an OTP is more secure than a static password because it can not be reused. Very often OTPs are involved in some kind of 2FA ( \"Two Factor Authentication\") or MFA ( \"Multiple Factor Authentication\") process where, after user providing a simple password, he / she must generate the OTP in his / her pre-tied hardware device (which can be an specialized one or simply a mobile phone using some specific app -although if using the SMSs one then the OTP is not generated on device but received from third-party server-) to then provide it too so that finalize the authentication. De este modo, las autenticaciones 2FA se basan en algo que el usuario sabe (la contrase\u00f1a simple inicial) m\u00e1s algo que el usuario tiene f\u00edsicamente (el dispositivo hardware / app m\u00f3vil donde se recibe la OTP). Para m\u00e1s informaci\u00f3n puede consultar el articulo: https://www.eff.org/deeplinks/2017/09/guide-common-types-two-factor-authentication-web y tambi\u00e9n https://sec.eff.org/topics/two-factor-authentication NOTA Una \"segunda generaci\u00f3n de autenticaci\u00f3n 2FA es la que hace uso de claves UF2 (\" Universal 2 Factor \") para evitar el uso de apps m\u00f3viles a la hora de gestionar las contrase\u00f1as OTP (debido a sus posibles vulnerabilidades). Las claves UF2 son dispositivos hardware de tipo USB (o tambi\u00e9n inal\u00e1mbricos de tipo NFC) que hacen uso de criptograf\u00eda asim\u00e9trica y se pueden configurar para autenticarse autom\u00e1ticamente contra, sobre todo, aplicaciones web (Correo, redes sociales, etc). More specifically, when a user tries to access a\u00f1o (Previously configured accordingly) account, after first entering static password he / she should glance at the device and enter the displayed 2FA code back into the site or app. Other versions of keys can automatically transfer the 2FA code to the recognized site domain name when plugged into a computer USB puerto (if this domain name has been Introduced Previously into key) without manual intervention. Estas claves pueden estar desarrolladas por diferentes fabricantes (Uno de los m\u00e1s conocidos es Yubico, que fabrica sus \"yubikeys\") pero todos siguen el mismo est\u00e1ndar UF2, estandarizado por la FIDO Alliance (un conglomerado de empresas entre las que se encuentran Google, Facebook, Microsoft, etc). NOTA Otro ejemplo de autenticaci\u00f3n 2FA (esta vez sin que intervengan OTPs, pero) es la proporcionada los cajeros autom\u00e1ticos para que se basa en algo que el usuario tiene f\u00edsicamente (la tarjeta bancaria) y algo que el usuario sabe (el pin). Basado en certificados (de cliente) : Permite autenticar la m\u00e1quina del usuario. Funciona as\u00ed: esta m\u00e1quina env\u00eda un certificado (que es un archivo criptogr\u00e1ficamente vinculado a dicha m\u00e1quina) a trav\u00e9s de la red a un servidor que deber\u00e1 confirmar la validez del certificado y, por tanto, la identidad de la m\u00e1quina en cuesti\u00f3n. Se basa en algo que la m\u00e1quina del usuario guarda NOTA NOTA: El protocolo TLS, muy utilizado en Internet para asegurar las comunicaciones de los navegadores con servidores web (entre otros), utiliza un mecanismo muy similar tambi\u00e9n basado en certificados pero en este caso de servidor. Basado en \"smart cards\" : Variante \"hardware\" del mecanismo anterior. La \"smart card\" (o, m\u00e1s habitual actualmente, una \"app\" de m\u00f3vil) almacena el certificado; cuando el usuario inserta un determinado \"token\" en el sistema, este leer\u00e1 el certificado y conceder\u00e1 el acceso. Se basa en algo que el usuario tiene f\u00edsicamente Biom\u00e9trico : Existen diferentes m\u00e9todos, como la huella dactilar, la forma de la mano, el patr\u00f3n del iris, la voz, etc. En https://cromwell-intl.com/cybersecurity/authentication.html#authtool_biometric se puede consultar una lista de fabricantes de componentes biom\u00e9tricos. Se basa en algo que el usuario es. Mediante Kerberos : Sistema de credenciales de corta duraci\u00f3n y multi-servidor. Funciona as\u00ed: el usuario primero presenta al servidor Kerberos unas credenciales propias (normalmente, son un nombre de usuario y contrase\u00f1a, pero pueden ser de cualquiera de los otros tipos mencionados: certificados, biom\u00e9tricos ... o una combinaci\u00f3n de estos), para identificarse y as\u00ed poder recibir de este servidor la credencial de corta duraci\u00f3n, llamada TGT. Este TGT utilizar\u00e1 a partir de entonces para acceder autom\u00e1ticamente a otros servicios, (Como servidores de correo electr\u00f3nico, de carpetas compartidas, etc). La \"gracia\" de la autenticaci\u00f3n haciendo servir Kerberos es que permite realizar s\u00f3lo un proceso de autenticaci\u00f3n (al principio, para pedir el TGT) porque a partir de entonces se reaprovecha este proceso para acceder a m\u00faltiples servidores diferentes de forma totalmente automatizada (mientras dure el per\u00edodo de validez del TGT, claro.). Este hecho es lo que llama \"Single Sign-On\" o SSO y se utiliza principalmente en entornos corporativos. Nota NOTA: Hay que tener en cuenta que el SSO pone \"todos los huevos en una cesta\": si s\u00f3lo una contrase\u00f1a es robada o adivinada, entonces todos los recursos e identidades est\u00e1n comprometidas. Hay que tener un equilibrio, pues, entre conveniencia y seguridad. Tal como hemos dicho, el sistema verificador debe tener configurado un determinado mecanismo de autenticaci\u00f3n. la tarea de este mecanismo, sea cual sea \u00e9ste, sin embargo, siempre es la misma: comparar cada credencial presentada con las que tenga almacenadas previamente en una (o varias) \"bases de datos\": si ambas credenciales coinciden, la comprobaci\u00f3n ser\u00e1 exitosa y la parte solicitante autenticar\u00e1. En el caso concreto de utilizar la autenticaci\u00f3n basado en contrase\u00f1as, las \"bases de datos\" que consulta el sistema verificador (que es donde, en definitiva, est\u00e1n guardados los nombres y contrase\u00f1as v\u00e1lidos) se pueden encontrar: Localmente dentro del propio sistema verificador. Normalmente en forma de archivos de texto (como es el caso del archivo \"/etc/shadow\" Linux) o de registro binario (como es el caso de Windows) En un servidor remoto que sea accedido cuando sea necesario por el sistema verificador. Este servidor remoto puede ser de diferentes tipos seg\u00fan los requisitos que necesite nuestro sistema de autenticaci\u00f3n particular pero b\u00e1sicamente deben proporcionar un sistema de almacenar nombres y contrase\u00f1as. Los m\u00e1s comunes son: Un servidor LDAP Un sistema gestor de base de datos relacional (SGBD) Un servidor Kerberos (que proporcionar\u00e1 TGTs) Un servidor RADIUS Nota Tanto los servidores LDAP con los SGBDs pueden contener, adem\u00e1s de la informaci\u00f3n estrictamente relacionada con la autenticaci\u00f3n (nombres y contrase\u00f1as, b\u00e1sicamente), diferente informaci\u00f3n extra relacionada con los usuarios autenticados (como datos personales: tel\u00e9fono, email, etc o datos de sistema: ruta de la carpeta personal, shell preferido, etc, etc). De hecho, incluso se podr\u00eda combinar el uso de Kerberos (o RADIUS) con otro servidor LDAP o SGBD, delegando as\u00ed el proceso de autenticaci\u00f3n s\u00f3lo en Kerberos (o RADIUS) y utilizando la base de datos LDAP / relacional s\u00f3lo de fuente de informaci\u00f3n complementaria. RADIUS, por su parte, tambi\u00e9n incorpora ciertas funcionalidades relacionadas con procesos de autorizaciones, principalmente relacionadas con el acceso a redes","title":"Autenticaci\u00f3n"},{"location":"kb/GNU-Linux/Seguridad/Autenticaci%C3%B3n_vs_Autorizaci%C3%B3n/#autorizacion","text":"Se llama \"autorizaci\u00f3n\", por otra parte, al proceso que determina qu\u00e9 puede hacer y / o donde puede acceder el elemento autenticado. Una vez un determinado elemento ha sido identificado (por ejemplo, un usuario), el sistema determinar\u00e1, con los datos que obtenga de este usuario (provenientes de diferentes fuentes), a qu\u00e9 recursos (es decir, a qu\u00e9 programas, carpetas y ficheros, hardware, etc) estar\u00e1 autorizado a entrar / conectar / leer / modificar / escribir / eliminar / ejecutar, etc y en cu\u00e1les no. As\u00ed pues, hay que distinguir entre autenticaci\u00f3n y la autorizaci\u00f3n para que son dos procesos separados. Las fuentes de informaci\u00f3n que puede utilizar el sistema para construir el esquema de autorizaciones de un determinado usuario autenticado son muchas y muy variadas. Desde el sistema de permisos de archivos y carpetas cl\u00e1sico pasando por las ACLs y las \"capabilities\" hasta llegar a esquemas m\u00e1s complejos como los MACs SELinux (o AppArmor) o como los subsistemas proporcionados por sudo o el framework Polk, entre muchos otros. Todo ello combinado con el posible uso de servidores remotos LDAP (o relacionales o RADIUS) para completar toda esta informaci\u00f3n.","title":"Autorizaci\u00f3n"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20permisos%20en%20Linux/","text":"Algunos enlaces interesantes \u00b6 http://www.ite.educacion.es/formacion/materiales/85/cd/linux/m1/permisos_de_archivos_y_carpetas.html GRAPH explicativo sobre los permisos de los ficheros: http://mural.uv.es/oshuso/p1.jpg Ver permisos \u00b6 :::bash ls -l total 40 drwxr-xr-x 2 root root 4096 jul 4 11:33 backups drwxr-xr-x 13 root root 4096 jun 24 13:13 cache drwxr-xr-x 2 root root 4096 jun 24 13:15 games drwxr-xr-x 61 root root 4096 jun 26 17:48 lib drwxrwsr-x 2 root staff 4096 may 30 06:18 local lrwxrwxrwx 1 root root 9 jun 24 12:26 lock -> /run/lock drwxr-xr-x 12 root root 4096 jul 4 11:33 log drwxrwsr-x 2 root mail 4096 jul 1 19:08 mail drwxr-xr-x 2 root root 4096 jun 24 12:26 opt lrwxrwxrwx 1 root root 4 jun 24 12:26 run -> /run drwxr-xr-x 8 root root 4096 jun 24 13:13 spool drwxrwxrwt 24 root root 4096 jul 4 12:12 tmp En la primera columna: tipo de fichero puede ser d f o l (directorio, fichero o link) A continuaci\u00f3n hay 3 bloques de 3 caracteres con la siguiente correspondencia num\u00e9rica: r Lectura \u2192 4 w Escritura \u2192 2 x Ejecuci\u00f3n \u2192 1 1er bloque \u2192 Usuario propietario \u2192 o 2\u00ba bloque \u2192 grupo \u2192 g 3er bloque \u2192 Resto del mundo \u2192 u Tabla de relaciones de taquigraf\u00eda num\u00e9rica de permisos VS significado en binario: \u00b6 C\u00f3d Binario Permisos efectivos 0 0 0 0 - - - 1 0 0 1 - - x 2 0 1 0 - w - 3 0 1 1 - w x 4 1 0 0 r - - 5 1 0 1 r - x 6 1 1 0 r w - 7 1 1 1 r w x r = lectura == 4 w = escritura == 2 x = ejecuci\u00f3n == 1 ---------------------------------- TOTAL = 7 - rwx rwx rwx \\ \\ \\ \\ \\ \\===> permisos para resto de usuarios \\ \\===> permisos para grupo del fichero \\===> permisos para propietario del fichero En el siguiente fichero: -rwxr-xr-x linux linux 5343 filename.blah Vemos que tiene permisos de lectura, escritura y ejecuci\u00f3n para el propietario, solo lectura y ejecuci\u00f3n para el grupo al que pertenece y lo mismo para el resto de usuarios. Permisos especiales: \u00b6 +s SUID Bit: Hara que ese fichero se ejecute como el propietario al que pertenece. Los programas SUID est\u00e1n indicados con una s en sus permisos de propietario: rwsr-xr-x, si aparece una S may\u00fascula es que no hay permisos de ejecuci\u00f3n asignados al fichero ejecutable. +g GID Bit: Hara que ese fichero se ejecute como el grupo al que pertenece. Adem\u00e1s si aplicamos este bit al directorio, cualquier archivo creado en dicho directorio, tendr\u00e1 asignado el grupo al que pertenece el directorio. Se indica mediante una s en la posici\u00f3n del bit de ejecuci\u00f3n , si la S aparece may\u00fascula est\u00e1 indicando que el fichero no tiene permnisos de ejecuci\u00f3n. +t Sticky Bit: El Sticky bit se utiliza para permitir que cualquiera pueda escribir y modificar sobre un archivo o directorio, pero que solo su propietario o root pueda eliminarlo. Viene indicado por una t en la posici\u00f3n del bit de ejecuci\u00f3n de los permisos para \"otros usuarios\" o generales. Cambiar los permisos de un fichero \u00b6 chmod \u00b6 chmod a+rx <filename> chmod u+rw <filename> chmod ug+rwx <filename> touch <file> # crea fichero en blanco chmod 000 filename.txt # quita permisos a un fichero chmod -R # recursivo chmod -R 755 /var/www/website.com/includes/ # recursivo chmod -R 740 /etc/ \u2192 le cambia los permisos a la carpeta chmod -R 740 /etc/* # le cambia los permisos a lo que contiene la carpeta, ojo con los ficheros .htaccess o . algo que no entrar\u00edan y deberiamos ejecutar a posteriori: chmod -R 740 /etc/.ht* chmod -R 755 /path/to/dir # directorio y los archivos recursivo. Otra forma de especificar permisos es nombrando con una letra el bloque de usuarios y especificando con + o - si quitamos o agregamos el permiso, por ej. :::bash chmod u-rwx archivo chmod g+rwx archivov u \u2013 due\u00f1o: due\u00f1o del fichero o directorio g \u2013 grupo: grupo al que pertenece el fichero o \u2013 otros: todos los dem\u00e1s usuarios que no son el due\u00f1o ni del grupo a \u2013 todos: incluye al due\u00f1o, al grupo y a otros chmod -r fichero le quita el permiso read a todos chmod +x fichero le asigna el permiso execute a todos chown, chgrp \u00b6 Cambiar el propietario y/o grupo de un fichero chown -R www-data: /var/www/ chown www-data:ftpgroup /var/www/blabla.net/htdocs/ lsattr \u2192 lista atributos de un fichero chattr \u2192 cambia atributos de un fichero chgrp \u2192 para cambiar solo el grupo chown user:group archivo \u2192 cambia el usuario y el grupo al archivo chown user: fichero \u2192 cambia tanto el grupo como el usuario propietario a user selinux \u2192 implementaci\u00f3n de la NSA para m\u00e1xima seguridad Permisos malos \u00b6 777, 666, 555 Permisos bien o normales \u00b6 700, 750, 644 Permiso de ejecuci\u00f3n en carpetas \u00b6 El permiso de ejecuci\u00f3n en una carpeta es el que define si un usuario puede hacer un cd a esa carpeta stat filename \u2192 el comando stat muestra un resumen de las fechas touch filename \u2192 modifica las fechas o crea el archivo si no existe M\u00e1scara de usuario (user mask) \u00b6 umask \u2192 es una orden y una funci\u00f3n en entornos POSIX que establece los permisos por defecto para los nuevos archivos y directorios creados por el proceso actual. Actua a modo de resta. Cualquier bit definido en umask se elimina al crear los archivos. Por ej. umask 044 aplica al usuario que cuando creamos ficheros se crear\u00e1n con 666 - 044 = 622 Por defecto umask est\u00e1 establecido a 022 umask -S ver literalmente lo que va a quitar. Samba tiene una m\u00e1scara y es importante este umask Atributos \u00b6 lsattr \u2192 permite listar los atributos asignados a los ficheros de un sistema de ficheros Linux, mientras que chattr permite modificar dichos atributos, los cuales que utilizamos como complemento al sistema de ACLs (chmod, chown,setfacl\u2026) permitiendo un control m\u00e1s f\u00e9rreo sobre los archivos del filesystem Algunos ejemplos de atributos: a solo permite agregar datos c el kernel comprime y descomprime datos al vuelo A no modifica el tiempo de acceso a un fichero chattr +i lo hace inmutable, root no podr\u00e1 borrar el fichero si ejecutamos umask veremos algo como 0022 (el primer 0 se refiere a los permisos especiales: SUID bit +S SGID bit +G Sticky bit +C - solo el propietario podr\u00e1 borrar el fichero ls -la /usr/bin/passwd -rwsr-xr-x 1 root root 54256 mar 29 2016 /usr/bin/passwd Tiene el +S seteado por lo que el binario se ejecutar\u00e1 como el propietario al que pertenece por ej. /tmp/ tiene el +t seteado y esto indica que solo el propietario (root) podr\u00e1 borrarlo. Para scripts de usuarios que tiene que ejecutar un usuario pero ha de ejecutar comandos de root en forensics se suele hacer Find de los suid en todos los usuarios ```","title":"Gesti\u00f3n de permisos en Linux"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20permisos%20en%20Linux/#algunos-enlaces-interesantes","text":"http://www.ite.educacion.es/formacion/materiales/85/cd/linux/m1/permisos_de_archivos_y_carpetas.html GRAPH explicativo sobre los permisos de los ficheros: http://mural.uv.es/oshuso/p1.jpg","title":"Algunos enlaces interesantes"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20permisos%20en%20Linux/#ver-permisos","text":":::bash ls -l total 40 drwxr-xr-x 2 root root 4096 jul 4 11:33 backups drwxr-xr-x 13 root root 4096 jun 24 13:13 cache drwxr-xr-x 2 root root 4096 jun 24 13:15 games drwxr-xr-x 61 root root 4096 jun 26 17:48 lib drwxrwsr-x 2 root staff 4096 may 30 06:18 local lrwxrwxrwx 1 root root 9 jun 24 12:26 lock -> /run/lock drwxr-xr-x 12 root root 4096 jul 4 11:33 log drwxrwsr-x 2 root mail 4096 jul 1 19:08 mail drwxr-xr-x 2 root root 4096 jun 24 12:26 opt lrwxrwxrwx 1 root root 4 jun 24 12:26 run -> /run drwxr-xr-x 8 root root 4096 jun 24 13:13 spool drwxrwxrwt 24 root root 4096 jul 4 12:12 tmp En la primera columna: tipo de fichero puede ser d f o l (directorio, fichero o link) A continuaci\u00f3n hay 3 bloques de 3 caracteres con la siguiente correspondencia num\u00e9rica: r Lectura \u2192 4 w Escritura \u2192 2 x Ejecuci\u00f3n \u2192 1 1er bloque \u2192 Usuario propietario \u2192 o 2\u00ba bloque \u2192 grupo \u2192 g 3er bloque \u2192 Resto del mundo \u2192 u","title":"Ver permisos"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20permisos%20en%20Linux/#tabla-de-relaciones-de-taquigrafia-numerica-de-permisos-vs-significado-en-binario","text":"C\u00f3d Binario Permisos efectivos 0 0 0 0 - - - 1 0 0 1 - - x 2 0 1 0 - w - 3 0 1 1 - w x 4 1 0 0 r - - 5 1 0 1 r - x 6 1 1 0 r w - 7 1 1 1 r w x r = lectura == 4 w = escritura == 2 x = ejecuci\u00f3n == 1 ---------------------------------- TOTAL = 7 - rwx rwx rwx \\ \\ \\ \\ \\ \\===> permisos para resto de usuarios \\ \\===> permisos para grupo del fichero \\===> permisos para propietario del fichero En el siguiente fichero: -rwxr-xr-x linux linux 5343 filename.blah Vemos que tiene permisos de lectura, escritura y ejecuci\u00f3n para el propietario, solo lectura y ejecuci\u00f3n para el grupo al que pertenece y lo mismo para el resto de usuarios.","title":"Tabla de relaciones de taquigraf\u00eda num\u00e9rica de permisos VS significado en binario:"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20permisos%20en%20Linux/#permisos-especiales","text":"+s SUID Bit: Hara que ese fichero se ejecute como el propietario al que pertenece. Los programas SUID est\u00e1n indicados con una s en sus permisos de propietario: rwsr-xr-x, si aparece una S may\u00fascula es que no hay permisos de ejecuci\u00f3n asignados al fichero ejecutable. +g GID Bit: Hara que ese fichero se ejecute como el grupo al que pertenece. Adem\u00e1s si aplicamos este bit al directorio, cualquier archivo creado en dicho directorio, tendr\u00e1 asignado el grupo al que pertenece el directorio. Se indica mediante una s en la posici\u00f3n del bit de ejecuci\u00f3n , si la S aparece may\u00fascula est\u00e1 indicando que el fichero no tiene permnisos de ejecuci\u00f3n. +t Sticky Bit: El Sticky bit se utiliza para permitir que cualquiera pueda escribir y modificar sobre un archivo o directorio, pero que solo su propietario o root pueda eliminarlo. Viene indicado por una t en la posici\u00f3n del bit de ejecuci\u00f3n de los permisos para \"otros usuarios\" o generales.","title":"Permisos especiales:"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20permisos%20en%20Linux/#cambiar-los-permisos-de-un-fichero","text":"","title":"Cambiar los permisos de un fichero"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20permisos%20en%20Linux/#chmod","text":"chmod a+rx <filename> chmod u+rw <filename> chmod ug+rwx <filename> touch <file> # crea fichero en blanco chmod 000 filename.txt # quita permisos a un fichero chmod -R # recursivo chmod -R 755 /var/www/website.com/includes/ # recursivo chmod -R 740 /etc/ \u2192 le cambia los permisos a la carpeta chmod -R 740 /etc/* # le cambia los permisos a lo que contiene la carpeta, ojo con los ficheros .htaccess o . algo que no entrar\u00edan y deberiamos ejecutar a posteriori: chmod -R 740 /etc/.ht* chmod -R 755 /path/to/dir # directorio y los archivos recursivo. Otra forma de especificar permisos es nombrando con una letra el bloque de usuarios y especificando con + o - si quitamos o agregamos el permiso, por ej. :::bash chmod u-rwx archivo chmod g+rwx archivov u \u2013 due\u00f1o: due\u00f1o del fichero o directorio g \u2013 grupo: grupo al que pertenece el fichero o \u2013 otros: todos los dem\u00e1s usuarios que no son el due\u00f1o ni del grupo a \u2013 todos: incluye al due\u00f1o, al grupo y a otros chmod -r fichero le quita el permiso read a todos chmod +x fichero le asigna el permiso execute a todos","title":"chmod"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20permisos%20en%20Linux/#chown-chgrp","text":"Cambiar el propietario y/o grupo de un fichero chown -R www-data: /var/www/ chown www-data:ftpgroup /var/www/blabla.net/htdocs/ lsattr \u2192 lista atributos de un fichero chattr \u2192 cambia atributos de un fichero chgrp \u2192 para cambiar solo el grupo chown user:group archivo \u2192 cambia el usuario y el grupo al archivo chown user: fichero \u2192 cambia tanto el grupo como el usuario propietario a user selinux \u2192 implementaci\u00f3n de la NSA para m\u00e1xima seguridad","title":"chown, chgrp"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20permisos%20en%20Linux/#permisos-malos","text":"777, 666, 555","title":"Permisos malos"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20permisos%20en%20Linux/#permisos-bien-o-normales","text":"700, 750, 644","title":"Permisos bien o normales"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20permisos%20en%20Linux/#permiso-de-ejecucion-en-carpetas","text":"El permiso de ejecuci\u00f3n en una carpeta es el que define si un usuario puede hacer un cd a esa carpeta stat filename \u2192 el comando stat muestra un resumen de las fechas touch filename \u2192 modifica las fechas o crea el archivo si no existe","title":"Permiso de ejecuci\u00f3n en carpetas"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20permisos%20en%20Linux/#mascara-de-usuario-user-mask","text":"umask \u2192 es una orden y una funci\u00f3n en entornos POSIX que establece los permisos por defecto para los nuevos archivos y directorios creados por el proceso actual. Actua a modo de resta. Cualquier bit definido en umask se elimina al crear los archivos. Por ej. umask 044 aplica al usuario que cuando creamos ficheros se crear\u00e1n con 666 - 044 = 622 Por defecto umask est\u00e1 establecido a 022 umask -S ver literalmente lo que va a quitar. Samba tiene una m\u00e1scara y es importante este umask","title":"M\u00e1scara de usuario (user mask)"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20permisos%20en%20Linux/#atributos","text":"lsattr \u2192 permite listar los atributos asignados a los ficheros de un sistema de ficheros Linux, mientras que chattr permite modificar dichos atributos, los cuales que utilizamos como complemento al sistema de ACLs (chmod, chown,setfacl\u2026) permitiendo un control m\u00e1s f\u00e9rreo sobre los archivos del filesystem Algunos ejemplos de atributos: a solo permite agregar datos c el kernel comprime y descomprime datos al vuelo A no modifica el tiempo de acceso a un fichero chattr +i lo hace inmutable, root no podr\u00e1 borrar el fichero si ejecutamos umask veremos algo como 0022 (el primer 0 se refiere a los permisos especiales: SUID bit +S SGID bit +G Sticky bit +C - solo el propietario podr\u00e1 borrar el fichero ls -la /usr/bin/passwd -rwsr-xr-x 1 root root 54256 mar 29 2016 /usr/bin/passwd Tiene el +S seteado por lo que el binario se ejecutar\u00e1 como el propietario al que pertenece por ej. /tmp/ tiene el +t seteado y esto indica que solo el propietario (root) podr\u00e1 borrarlo. Para scripts de usuarios que tiene que ejecutar un usuario pero ha de ejecutar comandos de root en forensics se suele hacer Find de los suid en todos los usuarios ```","title":"Atributos"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20usuarios%20en%20Linux/","text":"Gesti\u00f3n de Usuarios en Linux \u00b6 Ficheros principales \u00b6 /etc/passwd \u2192 bd del sistema /etc/shadow \u2192 contrase\u00f1as de usuarios /etc/group \u2192 bd de grupos y pertenencias /etc/adduser.conf Ejemplo de fichero /etc/passwd \u00b6 rtkit:x:120:128:RealtimeKit,,,:/proc:/bin/false saned:x:121:129::/var/lib/saned:/bin/false usbmux:x:122:46:usbmux daemon,,,:/var/lib/usbmux:/bin/false javier:x:1000:1000:javier,,,:/home/javier:/bin/bash postgres:x:123:131:PostgreSQL administrator,,,:/var/lib/postgresql:/bin/bash mysql:x:124:132:MySQL Server,,,:/nonexistent:/bin/false Estructura del fichero /etc/passwd \u00b6 User: el root siempre tiene UID = 0 y GID = 0 pwd UID GID data: separado por , homedir: shell Los UID pueden ir de 0 a 65535, normalmente del 0 al 999 son de sistema y los usuarios que se a\u00f1aden posteriormente tienen un UID > 1000 Nota www-data siempre tiene el mismo userid, suele ser el 33, podemos comprobarlo en cualquier sistema con el comando: cat /etc/passwd | grep www-data -i El cual nos devolver\u00e1 algo muy parecido a : www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin Si queremos quitarle la contrase\u00f1a a un usuario le quitamos la x en password Nota Uno de los \u201ctricks\u201d para crear un usuario root sin contrase\u00f1a y dejar una puerta abierta es duplicar la linea de root como toor y le quitamos la x en password. Shells \u00b6 cat /etc/shells \u2192 ver los shells disponibles Si le ponemos a un usuario el shell /bin/false cuando este usuario entre har\u00e1 un exit inmediatamente /usr/bin/nologin \u2192 lee de un fichero txt Gesti\u00f3n de usuarios \u00b6 adduser \u2192 inicia el proceso de agregar usuario mediante un asistente. Hay un fichero de opciones con par\u00e1metros predefinidos en /etc/adduser.conf useradd \u2192 comando de bajo nivel para agregar usuarios con opciones: m homedir d ruta dir home g GID u UID s shell P no usar (fallo de seguridad) deluser nombreusuario --remove-home \u2192 elimina el usuario nombreusuario y su home, por defecto no elimina la home. userdel \u2192 inicia el proceso de borrar un usuario con opciones definidas en /etc/userdel.conf usermod \u2192 modificar usuario. Ej. usermod -s /bin/false usuario \u2192 quita el shell al usuario especificado y le impide hacer login. usermod -m \u2192 mover la home a otra carpeta usermod -a -G sudo javier \u2192 Agrega el usuario Javier al grupo sudo , lo cual le permitir\u00e1 impersonarse en el usuario root mediante el comando sudo Gesti\u00f3n de grupos \u00b6 groupadd nombregrupo \u2192 a\u00f1ade un nuevo grupo al sistema groupdel \u2192 borrar grupo groupmod \u2192 Modificar grupo gpasswd \u2192 los grupos pueden tener contrase\u00f1as newgrp \u2192 para iniciar sesi\u00f3n en un grupo y pedir\u00e1 el password si est\u00e1 establecido vipw \u2192 programa especifico para modificar los ficheros passwd y group de /etc Contrase\u00f1as \u00b6 passwd \u2192 cambia el password para el usuario actual y nuevos chage \u2192 cambia la expiraci\u00f3n del password chage -l usuario \u2192 muestra informaci\u00f3n acerca de la clave y de la cuenta. pwgen \u2192 genera contrase\u00f1as muy feas pwgen -1 \u2192 genera solo una contrase\u00f1a pwgen -nyc 12 \u2192 n - incluye passwords con n\u00fameros \u2192 y - incluye s\u00edmbolos \u2192 c - incluye may\u00fasculas o capitales en la clave \u2192 12 \u2192 hace claves de 12 caracteres Sudo \u00b6 su \u2192 permite al root metamorfosearse en otro usuario su - \u2192 es lo correcto puesto que de esta forma arrastra las variables de entorno su <user> \u2192 va a pedir el password de ese usuario sudo \u2192 permite escalar privilegios y por eso no gusta a ciertos admins. Lee el fichero /etc/sudoers para determinar que usuarios pueden hacer sudo. sudo su - \u2192 permite a un usuario transformarse en root y arrastra sus variables sudo -k \u2192 olvida el password memorizado Se puede bajar el fuente de sudo y compilarlo con frases divertidas, cuando falle te dice cosas. /var/mail/usuario \u2192 correo interno de los usuarios w \u2192 comando para info de los usuarios conectados who \u2192 info de los usuarios en modo reducido whoami \u2192 en un terminal sin prompt o $ nos dice que usuario estamos utilizando id \u2192 parecido a whoami pero nos dice los GID o UID del usuario echo $UID \u2192 nos muestra el UID del usuario $ -> indica que es un usuario del sistema '#' -> indica que es el usuario root Prompt \u00b6 $PS1 define el prompt del usuario, por ej, en ubuntu PS1 = '\\[\\e]0;\\u@\\h: \\w\\a\\]${debian_chroot:+($debian_chroot)}\\u@\\h:\\w\\$ ' /Q /W /t /u /h El prompt puede contener programaci\u00f3n man bash para ver PS1 y $PS2 \u2192 al pulsar en un comando muy largo sale el prompt 2 Buscar en google cool prompt bash para ver mas ejemplos incluso generadores de prompts on line Para definir el prompt de manera permanente para un usuario hacerlo en /root/.bashrc Para definir el prompt de manera permanente para todos los usuarios hacerlo en: /etc/profile Resumen Gesti\u00f3n b\u00e1sica de usuarios en Linux \u00b6 Listado de usuarios cat etc/passwd o lastlog borrar usuarios sudo userdel nombreuser Agregar usuario \u00abjavier\u00bb sudo adduser javier Agregar usuario javier a grupo SUDO usermod -a -G sudo javier Comprobar a que grupos pertenece un usuario (javier) groups javier","title":"Gesti\u00f3n de usuarios en Linux"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20usuarios%20en%20Linux/#gestion-de-usuarios-en-linux","text":"","title":"Gesti\u00f3n de Usuarios en Linux"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20usuarios%20en%20Linux/#ficheros-principales","text":"/etc/passwd \u2192 bd del sistema /etc/shadow \u2192 contrase\u00f1as de usuarios /etc/group \u2192 bd de grupos y pertenencias /etc/adduser.conf","title":"Ficheros principales"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20usuarios%20en%20Linux/#ejemplo-de-fichero-etcpasswd","text":"rtkit:x:120:128:RealtimeKit,,,:/proc:/bin/false saned:x:121:129::/var/lib/saned:/bin/false usbmux:x:122:46:usbmux daemon,,,:/var/lib/usbmux:/bin/false javier:x:1000:1000:javier,,,:/home/javier:/bin/bash postgres:x:123:131:PostgreSQL administrator,,,:/var/lib/postgresql:/bin/bash mysql:x:124:132:MySQL Server,,,:/nonexistent:/bin/false","title":"Ejemplo de fichero /etc/passwd"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20usuarios%20en%20Linux/#estructura-del-fichero-etcpasswd","text":"User: el root siempre tiene UID = 0 y GID = 0 pwd UID GID data: separado por , homedir: shell Los UID pueden ir de 0 a 65535, normalmente del 0 al 999 son de sistema y los usuarios que se a\u00f1aden posteriormente tienen un UID > 1000 Nota www-data siempre tiene el mismo userid, suele ser el 33, podemos comprobarlo en cualquier sistema con el comando: cat /etc/passwd | grep www-data -i El cual nos devolver\u00e1 algo muy parecido a : www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin Si queremos quitarle la contrase\u00f1a a un usuario le quitamos la x en password Nota Uno de los \u201ctricks\u201d para crear un usuario root sin contrase\u00f1a y dejar una puerta abierta es duplicar la linea de root como toor y le quitamos la x en password.","title":"Estructura del fichero /etc/passwd"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20usuarios%20en%20Linux/#shells","text":"cat /etc/shells \u2192 ver los shells disponibles Si le ponemos a un usuario el shell /bin/false cuando este usuario entre har\u00e1 un exit inmediatamente /usr/bin/nologin \u2192 lee de un fichero txt","title":"Shells"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20usuarios%20en%20Linux/#gestion-de-usuarios","text":"adduser \u2192 inicia el proceso de agregar usuario mediante un asistente. Hay un fichero de opciones con par\u00e1metros predefinidos en /etc/adduser.conf useradd \u2192 comando de bajo nivel para agregar usuarios con opciones: m homedir d ruta dir home g GID u UID s shell P no usar (fallo de seguridad) deluser nombreusuario --remove-home \u2192 elimina el usuario nombreusuario y su home, por defecto no elimina la home. userdel \u2192 inicia el proceso de borrar un usuario con opciones definidas en /etc/userdel.conf usermod \u2192 modificar usuario. Ej. usermod -s /bin/false usuario \u2192 quita el shell al usuario especificado y le impide hacer login. usermod -m \u2192 mover la home a otra carpeta usermod -a -G sudo javier \u2192 Agrega el usuario Javier al grupo sudo , lo cual le permitir\u00e1 impersonarse en el usuario root mediante el comando sudo","title":"Gesti\u00f3n de usuarios"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20usuarios%20en%20Linux/#gestion-de-grupos","text":"groupadd nombregrupo \u2192 a\u00f1ade un nuevo grupo al sistema groupdel \u2192 borrar grupo groupmod \u2192 Modificar grupo gpasswd \u2192 los grupos pueden tener contrase\u00f1as newgrp \u2192 para iniciar sesi\u00f3n en un grupo y pedir\u00e1 el password si est\u00e1 establecido vipw \u2192 programa especifico para modificar los ficheros passwd y group de /etc","title":"Gesti\u00f3n de grupos"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20usuarios%20en%20Linux/#contrasenas","text":"passwd \u2192 cambia el password para el usuario actual y nuevos chage \u2192 cambia la expiraci\u00f3n del password chage -l usuario \u2192 muestra informaci\u00f3n acerca de la clave y de la cuenta. pwgen \u2192 genera contrase\u00f1as muy feas pwgen -1 \u2192 genera solo una contrase\u00f1a pwgen -nyc 12 \u2192 n - incluye passwords con n\u00fameros \u2192 y - incluye s\u00edmbolos \u2192 c - incluye may\u00fasculas o capitales en la clave \u2192 12 \u2192 hace claves de 12 caracteres","title":"Contrase\u00f1as"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20usuarios%20en%20Linux/#sudo","text":"su \u2192 permite al root metamorfosearse en otro usuario su - \u2192 es lo correcto puesto que de esta forma arrastra las variables de entorno su <user> \u2192 va a pedir el password de ese usuario sudo \u2192 permite escalar privilegios y por eso no gusta a ciertos admins. Lee el fichero /etc/sudoers para determinar que usuarios pueden hacer sudo. sudo su - \u2192 permite a un usuario transformarse en root y arrastra sus variables sudo -k \u2192 olvida el password memorizado Se puede bajar el fuente de sudo y compilarlo con frases divertidas, cuando falle te dice cosas. /var/mail/usuario \u2192 correo interno de los usuarios w \u2192 comando para info de los usuarios conectados who \u2192 info de los usuarios en modo reducido whoami \u2192 en un terminal sin prompt o $ nos dice que usuario estamos utilizando id \u2192 parecido a whoami pero nos dice los GID o UID del usuario echo $UID \u2192 nos muestra el UID del usuario $ -> indica que es un usuario del sistema '#' -> indica que es el usuario root","title":"Sudo"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20usuarios%20en%20Linux/#prompt","text":"$PS1 define el prompt del usuario, por ej, en ubuntu PS1 = '\\[\\e]0;\\u@\\h: \\w\\a\\]${debian_chroot:+($debian_chroot)}\\u@\\h:\\w\\$ ' /Q /W /t /u /h El prompt puede contener programaci\u00f3n man bash para ver PS1 y $PS2 \u2192 al pulsar en un comando muy largo sale el prompt 2 Buscar en google cool prompt bash para ver mas ejemplos incluso generadores de prompts on line Para definir el prompt de manera permanente para un usuario hacerlo en /root/.bashrc Para definir el prompt de manera permanente para todos los usuarios hacerlo en: /etc/profile","title":"Prompt"},{"location":"kb/GNU-Linux/Seguridad/Gesti%C3%B3n%20de%20usuarios%20en%20Linux/#resumen-gestion-basica-de-usuarios-en-linux","text":"Listado de usuarios cat etc/passwd o lastlog borrar usuarios sudo userdel nombreuser Agregar usuario \u00abjavier\u00bb sudo adduser javier Agregar usuario javier a grupo SUDO usermod -a -G sudo javier Comprobar a que grupos pertenece un usuario (javier) groups javier","title":"Resumen Gesti\u00f3n b\u00e1sica de usuarios en Linux"},{"location":"kb/GNU-Linux/Seguridad/PAM/","text":"PAM \u00b6 Introducci\u00f3n \u00b6 Existen muchas maneras de autenticar usuarios: consultando los logins / passwords locales en la pareja de archivos /etc/passwd y /etc/shadow , o bien consultando en un servidor LDAP, o en una base de datos relacional convencional , o bien a trav\u00e9s de tarjetas hardware, o v\u00eda reconocimiento de huellas dactilares, etc. Esto para los desarrolladores es un problema, porque para que sus programas (como login, gdm, sudo, su, ftp, nfs, ssh, ...) soporten todos estos diferentes m\u00e9todos de autenticaci\u00f3n, deben programar expl\u00edcitamente cada m\u00e9todo por separado (adem\u00e1s de que si apareciera otro m\u00e9todo nuevo, deber\u00eda de recompilarse el programa para que se soportara -en el caso de que fuera posible - o bien reescribir de nuevo el programa completo. PAM es un conjunto de librer\u00edas (b\u00e1sicamente libpam.so pero no s\u00f3lo esa) que hacen de intermediarias entre los m\u00e9todos de autenticaci\u00f3n y los programas que los usan, permitiendo la posibilidad de desarrollar programas de forma independendiente del esquema de autenticaci\u00f3n que se utiliza. La idea es que un programa, gracias a que haya sido desarrollado mediante las librer\u00edas PAM, pueda utilizar un/os determinado/s m\u00f3dulo/s binarios (o un /os otro/s, seg\u00fan le interese) que se encargue/n del \"trabajo sucio\" de autenticaci\u00f3n. El / los m\u00f3dulo/s concreto/s que utilizar\u00e1 el programa en un determinado momento lo/s escoger\u00e1 el administrador del sistema, el cual podr\u00e1 cambiar de m\u00f3dulo/s (de /etc/shadow a LDAP por ejemplo), si as\u00ed lo deseara, sin que el programa correspondiente notara la diferencia. Resumiendo PAM facilita la vida a los desarrolladores para que en vez de escribir una compleja capa de autenticaci\u00f3n para sus programas simplemente tienen que escribir un \"hook\" en PAM, y tambi\u00e9n facilita la vida a los administradores porque pueden configurar la autenticaci\u00f3n de los programas que la necesitan de una forma centralizada y com\u00fan sin necesidad de recordar cada modelo separado para cada programa. Archivos relacionados con PAM \u00b6 Los m\u00f3dulos , ubicados en /usr/lib64/security (Fedora 31) o /lib/x64_64-linux-gnu/security (en Ubuntu) o /lib/x86_64-linux-gnu/security/ Mint 18. Muchos se instalan \"de serie\"junto con las librer\u00edas PAM pero tambi\u00e9n pueden ser \"de terceros\". En cualquier caso, cada m\u00f3dulo implementa un m\u00e9todo de autenticaci\u00f3n diferente y b\u00e1sicamente puede devolver dos valores: \"\u00e9xito\" (PAM_SUCCESS) o \"fallo\" (PAM_PERM_DENIED u otros equivalentes). Nota En Ubuntu estos m\u00f3dulos -y muchos otros- se encuentran dentro del paquete libpam-modules \"(instalado por defecto en el sistema). En Fedora se encuentran en el paquete pam (tambi\u00e9n instalado por defecto) Nota Algunos de los m\u00f3dulos oficiales m\u00e1s importantes son los siguientes (consultar http://www.linux-pam.org/Linux-PAM-html/sag-module-reference.html o bien la p\u00e1gina del manual \"pam_xxx \"para saber m\u00e1s): Los ficheros de configuraci\u00f3n de los m\u00f3dulos anteriores (si es que tienen), ubicados en /etc/security Los ficheros de configuraci\u00f3n proporcionados por cada aplicaci\u00f3n , encargados de establecer qu\u00e9 m\u00e9todos de autenticaci\u00f3n utilizar\u00e1 esta. Son archivos de texto que tienen como nombre el nombre de la aplicaci\u00f3n asociada y est\u00e1n ubicados dentro del directorio /etc/pam.d . M\u00f3dulos \u00b6 M\u00f3dulo Funci\u00f3n pam_unix.so Realiza la autenticaci\u00f3n mediante el m\u00e9todo tradicional ( /etc/passwd y /etc/shadow ). Si se quiere realizar la autenticaci\u00f3n contra usuarios / contrase\u00f1as guardados en bases de datos BerkeleyDB se puede usar entonces el m\u00f3dulo pam_userdb.so pam_deny.so Siempre devuelve fallo. Generalmente se ejecuta si ning\u00fan otro m\u00f3dulo ha tenido \u00e9xito pam_permit.so Siempre devuelve \u00e9xito (por lo tanto, no hay autenticaci\u00f3n, us\u00e1ndose entonces el usuario nobody) pam_cracklib.so Solo es un m\u00f3dulo de tipo \"password\" (ver m\u00e1s abajo). Se asegura de que la contrase\u00f1a empleada tenga un nivel de seguridad suficiente seg\u00fan las reglas establecidas (longitud, variabilidad, etc). Hay otro m\u00f3dulo similar llamado pam_pwquality.so algo m\u00e1s moderno (pero no viene dentro del paquete \"oficial\"). Otro es pam_passwdqc.so (programado por la gente del John The Ripper) pam_pwhistory.so comprueba que, al cambiar una contrase\u00f1a, no haya sido usada antes alguna vez pam_succeed_if.so Da por v\u00e1lida una autenticaci\u00f3n (o no) seg\u00fan el valor de una o m\u00e1s caracter\u00edsticas especificadas (uid, nombre, ruta de carpeta personal, shell por defecto, grupo al que pertenece...) que tenga la cuenta de usuario autenticado pam_access.so Da por v\u00e1lida una autenticaci\u00f3n (o no) seg\u00fan si un/os determinado/s usuario/s o grupo/s accede desde un/os determinado/s terminal/es local/es o bien determinada/s m\u00e1quina/s remota/s -Comprobandor su nombre o su IP. Un m\u00f3dulo que implementa unafuncionalitat similar (aunque se configura diferente) es pam_listfile.so pam_time.so Da por v\u00e1lida una autenticaci\u00f3n (o no) seg\u00fan el momento (hora, d\u00eda ...) en que se hace pam_faillock.so Cuenta el n\u00ba seguidos de intentos de autenticaci\u00f3n fallidos durante un cierto periodo de tiempo con el objetivo de bloquear el acceso. Antiguamente hab\u00eda otro m\u00f3dulo similar llamado \"pam_tally2\" que ha sido retirado por obsoleto ( https://src.fedoraproject.org/rpms/pam/blob/f30/f/pam.spec#_398 ) pam_lastlog.so Bloquea el logueig de un usuario dependiendo de la fecha de su \u00faltimo login pam_faildelay.so Establece el tiempo de espera m\u00ednimo entre introducciones seguidas de contrasenyes erroneas (menos del cual siempre devolver\u00e1 \"fallo\" sea cual sea la contr. escrita) pam_limits.so Solo es un m\u00f3dulo de sesi\u00f3n (ver m\u00e1s abajo). Asigna determinadas limitaciones a los usuarios (n\u00ba m\u00e1ximo de procesos permitidos, n\u00ba m\u00e1ximo de archivos abiertos, etc), seg\u00fan la configuraci\u00f3 indicada en el archivo /etc/security/limits.conf . Actualmente, sin embargo, esta funcionalidad tambi\u00e9n viene incorporada dentro de systemd (ver las directivas \"LimitXXX\" a mano systemd.exec) as\u00ed que todos los servicios gestionados por systemd no usan este m\u00f3dulo para nada. pam_securetty.so Excepto en los terminales listados en el archivo /etc/securetty , proh\u00edbe la autenticaci\u00f3n al root. Si este archivo no existe, se permitir\u00e1 la autenticaci\u00f3n de root desde cualquier terminal pam_nologin.so Si existe el archivo /etc/nologin (cuyo contenido se mostrar\u00e1 en pantalla) , prohibe la autenticaci\u00f3n de todos excepto root pam_wheel.so solo permite actuar como root (mediante su/sudo) a los usuarios del grupo \"wheel\" pam_rootok.so Permite que el usuario \"root\" se pueda autenticar de forma directa (es decir, sin que se le pida ning\u00fan tipo de autenticaci\u00f3n) pam_env.so Permite utilizar variables de entorno definidas dentro de /etc/security/pam_env.conf (o archivo indicado con \"envfile =\") y que pueden ser utilizadas por otros m\u00f3dulos posteriores o tambi\u00e9n por el sistema. pam_echo.so Muestra mensajes personalizados por pantalla pam_motd.so Muestra un mensaje (por defecto el incluido en /etc/motd) una vez el usuario ha logueado. Muchas veces, sin embargo, para hacer esto se usa directamente el archivo /etc/profile o similar pam_exec.so Ejecuta un comando externo pam_mkhomedir.so Crea la carpeta personal de un usuario cuando se loguea por primera vez en el sistema. \u00datil para cuando el usuario no es local sino que se encuentra en alguna BD remota o serv. LDAP pam_systemd.so Nom\u00e9s es un m\u00f3dulo de sesi\u00f3n (ver m\u00e1s abajo). Apoya el servicio systemd-login Tambi\u00e9n existen otros m\u00f3dulos no oficiales pero muy interesantes que se pueden instalar como paquetes est\u00e1ndar (para encontrar estos y muchos otros, puede ejecutar apt search libpam -Ubuntu- o bien dnf search pam -en Fedora -): M\u00f3dulo Funci\u00f3n pam_captcha.so Muestra un texto gr\u00e1fico mediante figlet a modo de captcha. Su p\u00e1gina oficial es https://github.com/jordansissel/pam_captcha Atenci\u00f3n: No est\u00e1 empaquetado en las distribuciones m\u00e1s importantes pam_oath.so Implementa sistema de autenticaci\u00f3n con contrase\u00f1as de un solo uso (OTP). La p\u00e1gina oficial es http://www.nongnu.org/oath-toolkit pam_google_authenticator.so Utilitza los servidores de Google para realizar el logueo en dos pasos (con contrase\u00f1as de un solo uso, las OTP). Su p\u00e1gina oficial es https://github.com/google/google-authenticator-libpam pam_usb.so DEPRECATED Solo permite el inicio de sesi\u00f3n si hay un l\u00e1piz Usb enchufado en el ordenador. Su p\u00e1gina oficial \u00e9s https://github.com/aluzzardi/pam_usb pam_ldap.so Realiza la autenticaci\u00f3n contra usuarios/contrase\u00f1as guardados en un servidor Ldap. La p\u00e1gina oficial es http://www.padl.com/OSS/pam_ldap.html pam_mariadb.so Realiza la autenticaci\u00f3n contra usuarios/contrase\u00f1as guardados en un servidor MariaDB.su pagina oficial es https://mariadb.com/kb/en/ pam_mysql.so Realiza la autenticaci\u00f3n contra usuarios / contrase\u00f1as guardados en un servidor MySQL. Su p\u00e1gina oficial es https://github.com/NigelCunningham/pam-MySQL . Por otra parte, decir que existe un m\u00f3dulo PAM de MySQL oficial, pero es comercial ( https://dev.mysql.com/doc/refman/5.7/en/pam-pluggable-authentication.html pam_pgsql.so Realiza el autentiaci\u00f3 contra usuarios / contrase\u00f1as guardados en un servidor PostgreSQL. Su p\u00e1gina es https://github.com/pam-pgsql/pam-pgsql pam_sqlite3.so Realiza el autentiaci\u00f3 contra usuarios / contrase\u00f1as guardados en un servidor SQLite3. Su p\u00e1gina oficial es https://github.com/HormyAJP/pam_sqlite3 pam_abl.so Bloquea nombres de usuario / IPs remotas que intentan loguearte al sistema (Similar en intenci\u00f3n a fail2ban). Su p\u00e1gina oficial es https://github.com/deksai/pam_abl Nota NOTA: En el caso de querer desarrollar una aplicaci\u00f3n propia (en C) que haga uso de alguno de los m\u00f3dulos anteriores y se aproveche de su funcionalidad, un peque\u00f1o tutorial lo podr\u00e9is encontrar aqu\u00ed: https://fedetask.com/writing-a-linux-pam-aware-application . En el caso de querer desarrollar un m\u00f3dulo PAM propiamente dicho, un peque\u00f1o tutorial lo podr\u00e9is encontrar aqu\u00ed: https://fedetask.com/write-linux-pam-module En cualquier caso, la gu\u00eda oficial del desarrollador PAM se encuentra en http://www.linux-pam.org/Linux-PAM-html/inux-PAM_ADG.html y http://www.linux-pam.org/Linux-PAM-html/Linux-PAM_MWG.html , respectivamente. Archivos de configuraci\u00f3n de las aplicaciones \u00b6 En el punto 3. ya hemos dicho que dentro de /etc/pam.d encontramos los ficheros de configuraci\u00f3n que controlan el comportamiento de las aplicaciones hom\u00f3nimas que utilizan los m\u00f3dulos PAM (login, gdm, ssh, sudo, ...). Estos archivos constan de l\u00edneas formadas por tres campos (explicados a continuaci\u00f3n), donde hay que tener en cuenta que el orden de las l\u00edneas es muy importante (se leen de arriba a abajo): grupo_gestion marca_control m\u00f3dulo [opciones] Grupo de gesti\u00f3n : PAM define cuatro tipos de grupos de gesti\u00f3n, cada uno de los cuales controla un aspecto de la seguridad o autenticaci\u00f3n de cuentas. Se suelen ejecutar con el siguiente orden: \"auth\", luego \"account\" y luego \"Session\"; la acci\u00f3n \"password\" se ejecuta bajo demanda: auth : autentica al usuario. Es decir, comprueba si es un usuario v\u00e1lido y reconocido por el sistema y que tenga una contrase\u00f1a (o el m\u00e9todo de autenticaci\u00f3n utilizado) igual a la proporcionada por la aplicaci\u00f3n. account : autoriza al usuario. Es decir, una vez autenticado, le da acceso -o no- a ciertos recursos del sistema siguiendo las restricciones indicadas: n\u00ba m\u00e0ximo de usuarios, localizaci\u00f3n del usuario, horario, expiraci\u00f3n de la contrase\u00f1a, etc password : acci\u00f3n activada al actualizar contrase\u00f1as session : aplica acciones sobre el usuario ya autorizado que est\u00e1n relacionadas con el inicio y final de sesi\u00f3n (como montar carpetas, utilizar el correo del sistema, habilitar los logs, ejecutar alg\u00fan script, definir variables de entorno, crear carpetas personales, etc) Marca de control : Indica c\u00f3mo debe reaccionar el m\u00f3dulo ante el \u00e9xito (valor devuelto PAM_SUCCESS) o el error (diferentes valores posibles dependiendo del tipo de error) en la autenticaci\u00f3n. En concreto puede valer: requisite : se necesita el \u00e9xito de este m\u00f3dulo. Si falla no se sigue leyendo (y se notifica Error); si se obtiene \u00e9xito, se siguen leyendo las siguientes l\u00edneas \"requisite\" correspondientes a la misma acci\u00f3n (valor 1er campo). En conclusi\u00f3n: s\u00f3lo hay \u00e9xito si todos los m\u00f3dulos \"requisite\" de la misma acci\u00f3n han obtenido \u00e9xito required : igual que con requisite, se necesita el \u00e9xito de este m\u00f3dulo. La diferencia est\u00e1 en que tanto si se obtiene \u00e9xito como si falla, se sigue leyendo el resto de l\u00edneas \"required\" correspondientes al mismo grupo de gesti\u00f3n (valor 1er campo) y no se notifica a la aplicaci\u00f3n el resultado final hasta leer la \u00faltima de estas l\u00edneas. Esto se hace por seguridad, para que un \"hacker\" no sepa qu\u00e9 m\u00f3dulo ha fallado. En conclusi\u00f3n: s\u00f3lo hay \u00e9xito si todos los m\u00f3dulos \"required\" de la misma acci\u00f3n han obtenido \u00e9xito sufficient : si su resultado es \u00e9xito (y los required / requisite anteriores tambi\u00e9n), no se sigue leyendo. Si falla, s\u00ed se sigue leyendo el resto de l\u00edneas correspondientes a la misma acci\u00f3n (valor 1er campo). En conclusi\u00f3n: hay \u00e9xito simplemente con que un solo m\u00f3dulo \"sufficient\" de una determinada acci\u00f3n haya obtenido \u00e9xito. optional : su valor de retorno (\u00e9xito o fallo) no influye en el \u00e9xito para que la autenticaci\u00f3n / autorizaci\u00f3n / ... se efect\u00fae. Simplemente ejecuta el m\u00f3dulo para realizar una determinada tarea y ya est\u00e1. Este valor se suele utilizar con m\u00f3dulos de tipo \"session\". include : incluye el contenido de otro archivo, cuyo nombre se debe indicar al 3 r campo (y su ubicaci\u00f3n ser\u00e1 igualmente /etc/pam.d ). Otro valor similar ser\u00eda substack [opcion1 = valor1 opcio2 = valor2] : permite un control m\u00e1s granular de las condiciones de \u00e9xito y fracaso. Las \"opciones\" corresponden a los diferentes valores de retorno del m\u00f3dulo en cuesti\u00f3n y los \"Valores\" representan la acci\u00f3n que se ejecutar\u00e1 al detectar este retorno concreto. Por ejemplo, entre las \"opciones\" podemos tener: success : el m\u00f3dulo devuelve PAM_SUCCESS ignore : el m\u00f3dulo dice que ignore cualquier l\u00ednea \"account\" posterior ... : Multitud de errores diferentes devueltos por el m\u00f3dulo (ver http://www.linux-pam.org/Linux-PAM-html/sag-configuration-file.html ) default : cualquier valor de retorno no indicado expl\u00edcitamente mediante una \"opci\u00f3n\" Y entre los \"valores\" podemos tener: Un n\u00ba : indica el n\u00famero de l\u00edneas dentro del archivo que se deber\u00e1n saltar para continuar leyendo la configuraci\u00f3n en la l\u00ednea justo despu\u00e9s del salto bad : indica que el m\u00f3dulo devolver\u00e1 \"fallo\" en la aplicaci\u00f3n y se continuar\u00e1 leyendo die : indica que el m\u00f3dulo devolver\u00e1 \"fallo\" en la aplicaci\u00f3n y se dejar\u00e1 de leer ok : Indica que el m\u00f3dulo devolver\u00e1 \"\u00e9xito\" en la aplicaci\u00f3n y se continuar\u00e1 leyendo done : indica que el m\u00f3dulo devolver\u00e1 \"\u00e9xito\" en la aplicaci\u00f3n y se dejar\u00e1 de leer ignore : indica que la \"opci\u00f3n\" correspondiente no se tiene en cuenta (como si no hubiera pasado) Nota: En este sentido, podemos concluir que las palabras \"requisite\", \"required\", \"sufficient\" y \"optional\" no son m\u00e1s que atajos de los siguientes valores, respectivamente: success=ok new_authok_reqd=ok default=die ignore=ignore success=ok new_authok_reqd=ok default=bad ignore=ignore success=done new_authok_reqd=done default=ignore success=ok new_authok_reqd=ok default=ignore NOTA: La diferencia entre el valor \"include\" y el valor \"substack\" es que en este \u00faltimo el fichero \"madre\" ve las l\u00edneas incluidas en \u00e9l como una \u00fanica l\u00ednea con un \u00fanico resultado \"\u00e9xito\" o \"falLO\" M\u00f3dulo : Nombre (o ruta absoluta si es diferente de /lib/security) del archivo correspondiente al m\u00f3dulo PAM utilizado, seguido de los posibles par\u00e1metros que puede recibir. En el caso de que el 2\u00ba campo sea la palabra \"Include\", entonces ser\u00e1 el nombre del archivo de configuraci\u00f3n ubicado en /etc/pam.d cuyo contenido se quiere \"copiar-pegar\". NOTA: Si se quiere saber qu\u00e9 aplicaciones utilizan un m\u00f3dulo PAM concreto, se puede ejecutar simplemente el comando grep \"NomModul\" /etc/pam.d/* NOTA: Si se quiere ver el contenido de alguno de estos archivos de configuraci\u00f3n sin las l\u00edneas de comentarios ni las l\u00edneas vac\u00edas (es decir, s\u00f3lo las l\u00edneas efectivas), un truco es ejecutar, en vez de cat o less, el comando grep -vE \"(^#|^$)\" /etc/pam.d/nomFitxer NOTA: El archivo /etc/pam.d/other sirve para definir las directivas \"auth\", \"account\", \"password\" y \"session\" de cualquier aplicaci\u00f3n que no incorpore ning\u00fan archivo de configuraci\u00f3n PAM propio. Normalmente, este archivo lo deniega todo ... es recomendable su consulta. Hay muchas aplicaciones que comparten el mismo esquema de autenticaci\u00f3n. Las distribuciones m\u00e1s populares facilitan la tarea de administrar de forma centralizada estas aplicaciones (login, su, ssh ...) concentrando la configuraci\u00f3n com\u00fan en los archivos \"common-auth\", \"common-account\", \"common- password \",\" common-session \"(Debian / Ubuntu) o\" system-auth \"y\" assword-auth \"(Fedora / Suse). Por lo tanto, muchas veces s\u00f3lo habr\u00e1 que modificar estos archivos para cambiar el modo de autenticaci\u00f3n de muchas de las aplicaciones del sistema de golpe. Para saber qu\u00e9 aplicaciones utilizan estos archivos comunes (concretamente, por ejemplo el \"common-auth\") basta con hacer grep common-auth /etc/pam.d/* NOTA: La diferencia entre los archivos \" system-auth \" y \" password-auth \" en Fedora / Suse es muy poca: de hecho, apenas hay una o dos l\u00edneas diferentes. En principio, el primer archivo est\u00e1 pensado para ser utilizado en autenticaciones locales (por su, sudo, etc) yel segundo est\u00e1 pensado para ser utilizado en autenticaciones remotas (por ssh, vsftpd, etc) NOTA: En Debian / Ubuntu tambi\u00e9n existe el archivo \" common-session-noninteractive \", el cual sirve a todas aquellas aplicaciones que no proporcionan interactividad (como cron, lagares, samba, ppp, etc) NOTA: Esta configuraci\u00f3n com\u00fan presente en los archivos \"common- \" o \" -auth\" (seg\u00fan sea Debian / Ubuntu o Fedora /Suse, respectivamente) se puede modificar mediante aplicaciones espec\u00edficas que evitan el tener que editar directamente los archivos de texto. Concretamente, en Debian / Ubuntu esta aplicaci\u00f3n se llama palmo-auth-config, a Fedora llama authselect y Suse llama pam-config. Sin embargo, no las estudiaremos. Hay m\u00f3dulos que pueden utilizarse en los cuatro grupos de gesti\u00f3n del 1er campo y otros que s\u00f3lo pueden utilizarse para alg\u00fan valor determinado. En concreto tenemos que (esta informaci\u00f3n se puede obtener de la p\u00e1gina de manual de cada m\u00f3dulo): Los m\u00f3dulos de las listas anteriores que pueden usarse con los cuatro valores son: pam_unix, pam_listfile, pam_succeed_if, pam_permit / deny, pam_echo, pam_rootok, pam_exec Los m\u00f3dulos de las listas anteriores que pueden usarse s\u00f3lo con los valores \"auth\" y \"account\" son: pam_userdb, pam_tally2, pam_lastlog, pam_nologin, pam_wheel Los m\u00f3dulos de las listas anteriores que pueden usarse s\u00f3lo con los valores \"auth\" y \"session\" son: pam_env Los m\u00f3dulos de las listas anteriores que pueden usarse s\u00f3lo con el valor \"auth\" son: pam_securetty, pam_faildelay, pam_captcha, pam_google_authenticator, pam_usb, pam_oath Los m\u00f3dulos de las listas anteriores que pueden usarse s\u00f3lo con el valor \"account\" son: pam_time, pam_access Los m\u00f3dulos de las listas anteriores que pueden usarse s\u00f3lo con el valor \"session\" son: pam_limits, pam_motd, pam_mkhomedir, pam_systemd Los m\u00f3dulos de las listas anteriores que pueden usarse s\u00f3lo con el valor \"password\" son: pam_pwquality, pam_pwhistory Para m\u00e1s ayuda sobre PAM, ver man pam y man pam.d","title":"PAM"},{"location":"kb/GNU-Linux/Seguridad/PAM/#pam","text":"","title":"PAM"},{"location":"kb/GNU-Linux/Seguridad/PAM/#introduccion","text":"Existen muchas maneras de autenticar usuarios: consultando los logins / passwords locales en la pareja de archivos /etc/passwd y /etc/shadow , o bien consultando en un servidor LDAP, o en una base de datos relacional convencional , o bien a trav\u00e9s de tarjetas hardware, o v\u00eda reconocimiento de huellas dactilares, etc. Esto para los desarrolladores es un problema, porque para que sus programas (como login, gdm, sudo, su, ftp, nfs, ssh, ...) soporten todos estos diferentes m\u00e9todos de autenticaci\u00f3n, deben programar expl\u00edcitamente cada m\u00e9todo por separado (adem\u00e1s de que si apareciera otro m\u00e9todo nuevo, deber\u00eda de recompilarse el programa para que se soportara -en el caso de que fuera posible - o bien reescribir de nuevo el programa completo. PAM es un conjunto de librer\u00edas (b\u00e1sicamente libpam.so pero no s\u00f3lo esa) que hacen de intermediarias entre los m\u00e9todos de autenticaci\u00f3n y los programas que los usan, permitiendo la posibilidad de desarrollar programas de forma independendiente del esquema de autenticaci\u00f3n que se utiliza. La idea es que un programa, gracias a que haya sido desarrollado mediante las librer\u00edas PAM, pueda utilizar un/os determinado/s m\u00f3dulo/s binarios (o un /os otro/s, seg\u00fan le interese) que se encargue/n del \"trabajo sucio\" de autenticaci\u00f3n. El / los m\u00f3dulo/s concreto/s que utilizar\u00e1 el programa en un determinado momento lo/s escoger\u00e1 el administrador del sistema, el cual podr\u00e1 cambiar de m\u00f3dulo/s (de /etc/shadow a LDAP por ejemplo), si as\u00ed lo deseara, sin que el programa correspondiente notara la diferencia. Resumiendo PAM facilita la vida a los desarrolladores para que en vez de escribir una compleja capa de autenticaci\u00f3n para sus programas simplemente tienen que escribir un \"hook\" en PAM, y tambi\u00e9n facilita la vida a los administradores porque pueden configurar la autenticaci\u00f3n de los programas que la necesitan de una forma centralizada y com\u00fan sin necesidad de recordar cada modelo separado para cada programa.","title":"Introducci\u00f3n"},{"location":"kb/GNU-Linux/Seguridad/PAM/#archivos-relacionados-con-pam","text":"Los m\u00f3dulos , ubicados en /usr/lib64/security (Fedora 31) o /lib/x64_64-linux-gnu/security (en Ubuntu) o /lib/x86_64-linux-gnu/security/ Mint 18. Muchos se instalan \"de serie\"junto con las librer\u00edas PAM pero tambi\u00e9n pueden ser \"de terceros\". En cualquier caso, cada m\u00f3dulo implementa un m\u00e9todo de autenticaci\u00f3n diferente y b\u00e1sicamente puede devolver dos valores: \"\u00e9xito\" (PAM_SUCCESS) o \"fallo\" (PAM_PERM_DENIED u otros equivalentes). Nota En Ubuntu estos m\u00f3dulos -y muchos otros- se encuentran dentro del paquete libpam-modules \"(instalado por defecto en el sistema). En Fedora se encuentran en el paquete pam (tambi\u00e9n instalado por defecto) Nota Algunos de los m\u00f3dulos oficiales m\u00e1s importantes son los siguientes (consultar http://www.linux-pam.org/Linux-PAM-html/sag-module-reference.html o bien la p\u00e1gina del manual \"pam_xxx \"para saber m\u00e1s): Los ficheros de configuraci\u00f3n de los m\u00f3dulos anteriores (si es que tienen), ubicados en /etc/security Los ficheros de configuraci\u00f3n proporcionados por cada aplicaci\u00f3n , encargados de establecer qu\u00e9 m\u00e9todos de autenticaci\u00f3n utilizar\u00e1 esta. Son archivos de texto que tienen como nombre el nombre de la aplicaci\u00f3n asociada y est\u00e1n ubicados dentro del directorio /etc/pam.d .","title":"Archivos relacionados con PAM"},{"location":"kb/GNU-Linux/Seguridad/PAM/#modulos","text":"M\u00f3dulo Funci\u00f3n pam_unix.so Realiza la autenticaci\u00f3n mediante el m\u00e9todo tradicional ( /etc/passwd y /etc/shadow ). Si se quiere realizar la autenticaci\u00f3n contra usuarios / contrase\u00f1as guardados en bases de datos BerkeleyDB se puede usar entonces el m\u00f3dulo pam_userdb.so pam_deny.so Siempre devuelve fallo. Generalmente se ejecuta si ning\u00fan otro m\u00f3dulo ha tenido \u00e9xito pam_permit.so Siempre devuelve \u00e9xito (por lo tanto, no hay autenticaci\u00f3n, us\u00e1ndose entonces el usuario nobody) pam_cracklib.so Solo es un m\u00f3dulo de tipo \"password\" (ver m\u00e1s abajo). Se asegura de que la contrase\u00f1a empleada tenga un nivel de seguridad suficiente seg\u00fan las reglas establecidas (longitud, variabilidad, etc). Hay otro m\u00f3dulo similar llamado pam_pwquality.so algo m\u00e1s moderno (pero no viene dentro del paquete \"oficial\"). Otro es pam_passwdqc.so (programado por la gente del John The Ripper) pam_pwhistory.so comprueba que, al cambiar una contrase\u00f1a, no haya sido usada antes alguna vez pam_succeed_if.so Da por v\u00e1lida una autenticaci\u00f3n (o no) seg\u00fan el valor de una o m\u00e1s caracter\u00edsticas especificadas (uid, nombre, ruta de carpeta personal, shell por defecto, grupo al que pertenece...) que tenga la cuenta de usuario autenticado pam_access.so Da por v\u00e1lida una autenticaci\u00f3n (o no) seg\u00fan si un/os determinado/s usuario/s o grupo/s accede desde un/os determinado/s terminal/es local/es o bien determinada/s m\u00e1quina/s remota/s -Comprobandor su nombre o su IP. Un m\u00f3dulo que implementa unafuncionalitat similar (aunque se configura diferente) es pam_listfile.so pam_time.so Da por v\u00e1lida una autenticaci\u00f3n (o no) seg\u00fan el momento (hora, d\u00eda ...) en que se hace pam_faillock.so Cuenta el n\u00ba seguidos de intentos de autenticaci\u00f3n fallidos durante un cierto periodo de tiempo con el objetivo de bloquear el acceso. Antiguamente hab\u00eda otro m\u00f3dulo similar llamado \"pam_tally2\" que ha sido retirado por obsoleto ( https://src.fedoraproject.org/rpms/pam/blob/f30/f/pam.spec#_398 ) pam_lastlog.so Bloquea el logueig de un usuario dependiendo de la fecha de su \u00faltimo login pam_faildelay.so Establece el tiempo de espera m\u00ednimo entre introducciones seguidas de contrasenyes erroneas (menos del cual siempre devolver\u00e1 \"fallo\" sea cual sea la contr. escrita) pam_limits.so Solo es un m\u00f3dulo de sesi\u00f3n (ver m\u00e1s abajo). Asigna determinadas limitaciones a los usuarios (n\u00ba m\u00e1ximo de procesos permitidos, n\u00ba m\u00e1ximo de archivos abiertos, etc), seg\u00fan la configuraci\u00f3 indicada en el archivo /etc/security/limits.conf . Actualmente, sin embargo, esta funcionalidad tambi\u00e9n viene incorporada dentro de systemd (ver las directivas \"LimitXXX\" a mano systemd.exec) as\u00ed que todos los servicios gestionados por systemd no usan este m\u00f3dulo para nada. pam_securetty.so Excepto en los terminales listados en el archivo /etc/securetty , proh\u00edbe la autenticaci\u00f3n al root. Si este archivo no existe, se permitir\u00e1 la autenticaci\u00f3n de root desde cualquier terminal pam_nologin.so Si existe el archivo /etc/nologin (cuyo contenido se mostrar\u00e1 en pantalla) , prohibe la autenticaci\u00f3n de todos excepto root pam_wheel.so solo permite actuar como root (mediante su/sudo) a los usuarios del grupo \"wheel\" pam_rootok.so Permite que el usuario \"root\" se pueda autenticar de forma directa (es decir, sin que se le pida ning\u00fan tipo de autenticaci\u00f3n) pam_env.so Permite utilizar variables de entorno definidas dentro de /etc/security/pam_env.conf (o archivo indicado con \"envfile =\") y que pueden ser utilizadas por otros m\u00f3dulos posteriores o tambi\u00e9n por el sistema. pam_echo.so Muestra mensajes personalizados por pantalla pam_motd.so Muestra un mensaje (por defecto el incluido en /etc/motd) una vez el usuario ha logueado. Muchas veces, sin embargo, para hacer esto se usa directamente el archivo /etc/profile o similar pam_exec.so Ejecuta un comando externo pam_mkhomedir.so Crea la carpeta personal de un usuario cuando se loguea por primera vez en el sistema. \u00datil para cuando el usuario no es local sino que se encuentra en alguna BD remota o serv. LDAP pam_systemd.so Nom\u00e9s es un m\u00f3dulo de sesi\u00f3n (ver m\u00e1s abajo). Apoya el servicio systemd-login Tambi\u00e9n existen otros m\u00f3dulos no oficiales pero muy interesantes que se pueden instalar como paquetes est\u00e1ndar (para encontrar estos y muchos otros, puede ejecutar apt search libpam -Ubuntu- o bien dnf search pam -en Fedora -): M\u00f3dulo Funci\u00f3n pam_captcha.so Muestra un texto gr\u00e1fico mediante figlet a modo de captcha. Su p\u00e1gina oficial es https://github.com/jordansissel/pam_captcha Atenci\u00f3n: No est\u00e1 empaquetado en las distribuciones m\u00e1s importantes pam_oath.so Implementa sistema de autenticaci\u00f3n con contrase\u00f1as de un solo uso (OTP). La p\u00e1gina oficial es http://www.nongnu.org/oath-toolkit pam_google_authenticator.so Utilitza los servidores de Google para realizar el logueo en dos pasos (con contrase\u00f1as de un solo uso, las OTP). Su p\u00e1gina oficial es https://github.com/google/google-authenticator-libpam pam_usb.so DEPRECATED Solo permite el inicio de sesi\u00f3n si hay un l\u00e1piz Usb enchufado en el ordenador. Su p\u00e1gina oficial \u00e9s https://github.com/aluzzardi/pam_usb pam_ldap.so Realiza la autenticaci\u00f3n contra usuarios/contrase\u00f1as guardados en un servidor Ldap. La p\u00e1gina oficial es http://www.padl.com/OSS/pam_ldap.html pam_mariadb.so Realiza la autenticaci\u00f3n contra usuarios/contrase\u00f1as guardados en un servidor MariaDB.su pagina oficial es https://mariadb.com/kb/en/ pam_mysql.so Realiza la autenticaci\u00f3n contra usuarios / contrase\u00f1as guardados en un servidor MySQL. Su p\u00e1gina oficial es https://github.com/NigelCunningham/pam-MySQL . Por otra parte, decir que existe un m\u00f3dulo PAM de MySQL oficial, pero es comercial ( https://dev.mysql.com/doc/refman/5.7/en/pam-pluggable-authentication.html pam_pgsql.so Realiza el autentiaci\u00f3 contra usuarios / contrase\u00f1as guardados en un servidor PostgreSQL. Su p\u00e1gina es https://github.com/pam-pgsql/pam-pgsql pam_sqlite3.so Realiza el autentiaci\u00f3 contra usuarios / contrase\u00f1as guardados en un servidor SQLite3. Su p\u00e1gina oficial es https://github.com/HormyAJP/pam_sqlite3 pam_abl.so Bloquea nombres de usuario / IPs remotas que intentan loguearte al sistema (Similar en intenci\u00f3n a fail2ban). Su p\u00e1gina oficial es https://github.com/deksai/pam_abl Nota NOTA: En el caso de querer desarrollar una aplicaci\u00f3n propia (en C) que haga uso de alguno de los m\u00f3dulos anteriores y se aproveche de su funcionalidad, un peque\u00f1o tutorial lo podr\u00e9is encontrar aqu\u00ed: https://fedetask.com/writing-a-linux-pam-aware-application . En el caso de querer desarrollar un m\u00f3dulo PAM propiamente dicho, un peque\u00f1o tutorial lo podr\u00e9is encontrar aqu\u00ed: https://fedetask.com/write-linux-pam-module En cualquier caso, la gu\u00eda oficial del desarrollador PAM se encuentra en http://www.linux-pam.org/Linux-PAM-html/inux-PAM_ADG.html y http://www.linux-pam.org/Linux-PAM-html/Linux-PAM_MWG.html , respectivamente.","title":"M\u00f3dulos"},{"location":"kb/GNU-Linux/Seguridad/PAM/#archivos-de-configuracion-de-las-aplicaciones","text":"En el punto 3. ya hemos dicho que dentro de /etc/pam.d encontramos los ficheros de configuraci\u00f3n que controlan el comportamiento de las aplicaciones hom\u00f3nimas que utilizan los m\u00f3dulos PAM (login, gdm, ssh, sudo, ...). Estos archivos constan de l\u00edneas formadas por tres campos (explicados a continuaci\u00f3n), donde hay que tener en cuenta que el orden de las l\u00edneas es muy importante (se leen de arriba a abajo): grupo_gestion marca_control m\u00f3dulo [opciones] Grupo de gesti\u00f3n : PAM define cuatro tipos de grupos de gesti\u00f3n, cada uno de los cuales controla un aspecto de la seguridad o autenticaci\u00f3n de cuentas. Se suelen ejecutar con el siguiente orden: \"auth\", luego \"account\" y luego \"Session\"; la acci\u00f3n \"password\" se ejecuta bajo demanda: auth : autentica al usuario. Es decir, comprueba si es un usuario v\u00e1lido y reconocido por el sistema y que tenga una contrase\u00f1a (o el m\u00e9todo de autenticaci\u00f3n utilizado) igual a la proporcionada por la aplicaci\u00f3n. account : autoriza al usuario. Es decir, una vez autenticado, le da acceso -o no- a ciertos recursos del sistema siguiendo las restricciones indicadas: n\u00ba m\u00e0ximo de usuarios, localizaci\u00f3n del usuario, horario, expiraci\u00f3n de la contrase\u00f1a, etc password : acci\u00f3n activada al actualizar contrase\u00f1as session : aplica acciones sobre el usuario ya autorizado que est\u00e1n relacionadas con el inicio y final de sesi\u00f3n (como montar carpetas, utilizar el correo del sistema, habilitar los logs, ejecutar alg\u00fan script, definir variables de entorno, crear carpetas personales, etc) Marca de control : Indica c\u00f3mo debe reaccionar el m\u00f3dulo ante el \u00e9xito (valor devuelto PAM_SUCCESS) o el error (diferentes valores posibles dependiendo del tipo de error) en la autenticaci\u00f3n. En concreto puede valer: requisite : se necesita el \u00e9xito de este m\u00f3dulo. Si falla no se sigue leyendo (y se notifica Error); si se obtiene \u00e9xito, se siguen leyendo las siguientes l\u00edneas \"requisite\" correspondientes a la misma acci\u00f3n (valor 1er campo). En conclusi\u00f3n: s\u00f3lo hay \u00e9xito si todos los m\u00f3dulos \"requisite\" de la misma acci\u00f3n han obtenido \u00e9xito required : igual que con requisite, se necesita el \u00e9xito de este m\u00f3dulo. La diferencia est\u00e1 en que tanto si se obtiene \u00e9xito como si falla, se sigue leyendo el resto de l\u00edneas \"required\" correspondientes al mismo grupo de gesti\u00f3n (valor 1er campo) y no se notifica a la aplicaci\u00f3n el resultado final hasta leer la \u00faltima de estas l\u00edneas. Esto se hace por seguridad, para que un \"hacker\" no sepa qu\u00e9 m\u00f3dulo ha fallado. En conclusi\u00f3n: s\u00f3lo hay \u00e9xito si todos los m\u00f3dulos \"required\" de la misma acci\u00f3n han obtenido \u00e9xito sufficient : si su resultado es \u00e9xito (y los required / requisite anteriores tambi\u00e9n), no se sigue leyendo. Si falla, s\u00ed se sigue leyendo el resto de l\u00edneas correspondientes a la misma acci\u00f3n (valor 1er campo). En conclusi\u00f3n: hay \u00e9xito simplemente con que un solo m\u00f3dulo \"sufficient\" de una determinada acci\u00f3n haya obtenido \u00e9xito. optional : su valor de retorno (\u00e9xito o fallo) no influye en el \u00e9xito para que la autenticaci\u00f3n / autorizaci\u00f3n / ... se efect\u00fae. Simplemente ejecuta el m\u00f3dulo para realizar una determinada tarea y ya est\u00e1. Este valor se suele utilizar con m\u00f3dulos de tipo \"session\". include : incluye el contenido de otro archivo, cuyo nombre se debe indicar al 3 r campo (y su ubicaci\u00f3n ser\u00e1 igualmente /etc/pam.d ). Otro valor similar ser\u00eda substack [opcion1 = valor1 opcio2 = valor2] : permite un control m\u00e1s granular de las condiciones de \u00e9xito y fracaso. Las \"opciones\" corresponden a los diferentes valores de retorno del m\u00f3dulo en cuesti\u00f3n y los \"Valores\" representan la acci\u00f3n que se ejecutar\u00e1 al detectar este retorno concreto. Por ejemplo, entre las \"opciones\" podemos tener: success : el m\u00f3dulo devuelve PAM_SUCCESS ignore : el m\u00f3dulo dice que ignore cualquier l\u00ednea \"account\" posterior ... : Multitud de errores diferentes devueltos por el m\u00f3dulo (ver http://www.linux-pam.org/Linux-PAM-html/sag-configuration-file.html ) default : cualquier valor de retorno no indicado expl\u00edcitamente mediante una \"opci\u00f3n\" Y entre los \"valores\" podemos tener: Un n\u00ba : indica el n\u00famero de l\u00edneas dentro del archivo que se deber\u00e1n saltar para continuar leyendo la configuraci\u00f3n en la l\u00ednea justo despu\u00e9s del salto bad : indica que el m\u00f3dulo devolver\u00e1 \"fallo\" en la aplicaci\u00f3n y se continuar\u00e1 leyendo die : indica que el m\u00f3dulo devolver\u00e1 \"fallo\" en la aplicaci\u00f3n y se dejar\u00e1 de leer ok : Indica que el m\u00f3dulo devolver\u00e1 \"\u00e9xito\" en la aplicaci\u00f3n y se continuar\u00e1 leyendo done : indica que el m\u00f3dulo devolver\u00e1 \"\u00e9xito\" en la aplicaci\u00f3n y se dejar\u00e1 de leer ignore : indica que la \"opci\u00f3n\" correspondiente no se tiene en cuenta (como si no hubiera pasado) Nota: En este sentido, podemos concluir que las palabras \"requisite\", \"required\", \"sufficient\" y \"optional\" no son m\u00e1s que atajos de los siguientes valores, respectivamente: success=ok new_authok_reqd=ok default=die ignore=ignore success=ok new_authok_reqd=ok default=bad ignore=ignore success=done new_authok_reqd=done default=ignore success=ok new_authok_reqd=ok default=ignore NOTA: La diferencia entre el valor \"include\" y el valor \"substack\" es que en este \u00faltimo el fichero \"madre\" ve las l\u00edneas incluidas en \u00e9l como una \u00fanica l\u00ednea con un \u00fanico resultado \"\u00e9xito\" o \"falLO\" M\u00f3dulo : Nombre (o ruta absoluta si es diferente de /lib/security) del archivo correspondiente al m\u00f3dulo PAM utilizado, seguido de los posibles par\u00e1metros que puede recibir. En el caso de que el 2\u00ba campo sea la palabra \"Include\", entonces ser\u00e1 el nombre del archivo de configuraci\u00f3n ubicado en /etc/pam.d cuyo contenido se quiere \"copiar-pegar\". NOTA: Si se quiere saber qu\u00e9 aplicaciones utilizan un m\u00f3dulo PAM concreto, se puede ejecutar simplemente el comando grep \"NomModul\" /etc/pam.d/* NOTA: Si se quiere ver el contenido de alguno de estos archivos de configuraci\u00f3n sin las l\u00edneas de comentarios ni las l\u00edneas vac\u00edas (es decir, s\u00f3lo las l\u00edneas efectivas), un truco es ejecutar, en vez de cat o less, el comando grep -vE \"(^#|^$)\" /etc/pam.d/nomFitxer NOTA: El archivo /etc/pam.d/other sirve para definir las directivas \"auth\", \"account\", \"password\" y \"session\" de cualquier aplicaci\u00f3n que no incorpore ning\u00fan archivo de configuraci\u00f3n PAM propio. Normalmente, este archivo lo deniega todo ... es recomendable su consulta. Hay muchas aplicaciones que comparten el mismo esquema de autenticaci\u00f3n. Las distribuciones m\u00e1s populares facilitan la tarea de administrar de forma centralizada estas aplicaciones (login, su, ssh ...) concentrando la configuraci\u00f3n com\u00fan en los archivos \"common-auth\", \"common-account\", \"common- password \",\" common-session \"(Debian / Ubuntu) o\" system-auth \"y\" assword-auth \"(Fedora / Suse). Por lo tanto, muchas veces s\u00f3lo habr\u00e1 que modificar estos archivos para cambiar el modo de autenticaci\u00f3n de muchas de las aplicaciones del sistema de golpe. Para saber qu\u00e9 aplicaciones utilizan estos archivos comunes (concretamente, por ejemplo el \"common-auth\") basta con hacer grep common-auth /etc/pam.d/* NOTA: La diferencia entre los archivos \" system-auth \" y \" password-auth \" en Fedora / Suse es muy poca: de hecho, apenas hay una o dos l\u00edneas diferentes. En principio, el primer archivo est\u00e1 pensado para ser utilizado en autenticaciones locales (por su, sudo, etc) yel segundo est\u00e1 pensado para ser utilizado en autenticaciones remotas (por ssh, vsftpd, etc) NOTA: En Debian / Ubuntu tambi\u00e9n existe el archivo \" common-session-noninteractive \", el cual sirve a todas aquellas aplicaciones que no proporcionan interactividad (como cron, lagares, samba, ppp, etc) NOTA: Esta configuraci\u00f3n com\u00fan presente en los archivos \"common- \" o \" -auth\" (seg\u00fan sea Debian / Ubuntu o Fedora /Suse, respectivamente) se puede modificar mediante aplicaciones espec\u00edficas que evitan el tener que editar directamente los archivos de texto. Concretamente, en Debian / Ubuntu esta aplicaci\u00f3n se llama palmo-auth-config, a Fedora llama authselect y Suse llama pam-config. Sin embargo, no las estudiaremos. Hay m\u00f3dulos que pueden utilizarse en los cuatro grupos de gesti\u00f3n del 1er campo y otros que s\u00f3lo pueden utilizarse para alg\u00fan valor determinado. En concreto tenemos que (esta informaci\u00f3n se puede obtener de la p\u00e1gina de manual de cada m\u00f3dulo): Los m\u00f3dulos de las listas anteriores que pueden usarse con los cuatro valores son: pam_unix, pam_listfile, pam_succeed_if, pam_permit / deny, pam_echo, pam_rootok, pam_exec Los m\u00f3dulos de las listas anteriores que pueden usarse s\u00f3lo con los valores \"auth\" y \"account\" son: pam_userdb, pam_tally2, pam_lastlog, pam_nologin, pam_wheel Los m\u00f3dulos de las listas anteriores que pueden usarse s\u00f3lo con los valores \"auth\" y \"session\" son: pam_env Los m\u00f3dulos de las listas anteriores que pueden usarse s\u00f3lo con el valor \"auth\" son: pam_securetty, pam_faildelay, pam_captcha, pam_google_authenticator, pam_usb, pam_oath Los m\u00f3dulos de las listas anteriores que pueden usarse s\u00f3lo con el valor \"account\" son: pam_time, pam_access Los m\u00f3dulos de las listas anteriores que pueden usarse s\u00f3lo con el valor \"session\" son: pam_limits, pam_motd, pam_mkhomedir, pam_systemd Los m\u00f3dulos de las listas anteriores que pueden usarse s\u00f3lo con el valor \"password\" son: pam_pwquality, pam_pwhistory Para m\u00e1s ayuda sobre PAM, ver man pam y man pam.d","title":"Archivos de configuraci\u00f3n de las aplicaciones"},{"location":"kb/GNU-Linux/Seguridad/lets-encrypt/","text":"Certificados SSL Let\u2019s Encrypt \u00b6 Receta para instalar y renovar autom\u00e1ticamente un certificado SSL Let\u2019s Encrypt \u00b6 # Habilitar m\u00f3dulos necesarios de apache a2enmod ssl a2enmod proxy a2enmod proxy_http a2enmod headers a2enmod expires a2enmod rewrite # Para Odoo Configurar sitio apache con reverse proxy #Agregar repositorios sudo add-apt-repository ppa:certbot/certbot #Actualizar repositorios sudo apt-get update # Instalar certbot sudo apt-get install python-certbot-apache # Obtener certificado e instalar (cambiar example.com) sudo certbot --apache -d example.com -d www.example.com # programar en el cron la linea crontab -e para el root 15 3 * * * /usr/bin/certbot renew --quiet # para que cada dia a las 3:15 de la madrugada intente renovar el certificado","title":"Lets encrypt"},{"location":"kb/GNU-Linux/Seguridad/lets-encrypt/#certificados-ssl-lets-encrypt","text":"","title":"Certificados SSL Let\u2019s Encrypt"},{"location":"kb/GNU-Linux/Seguridad/lets-encrypt/#receta-para-instalar-y-renovar-automaticamente-un-certificado-ssl-lets-encrypt","text":"# Habilitar m\u00f3dulos necesarios de apache a2enmod ssl a2enmod proxy a2enmod proxy_http a2enmod headers a2enmod expires a2enmod rewrite # Para Odoo Configurar sitio apache con reverse proxy #Agregar repositorios sudo add-apt-repository ppa:certbot/certbot #Actualizar repositorios sudo apt-get update # Instalar certbot sudo apt-get install python-certbot-apache # Obtener certificado e instalar (cambiar example.com) sudo certbot --apache -d example.com -d www.example.com # programar en el cron la linea crontab -e para el root 15 3 * * * /usr/bin/certbot renew --quiet # para que cada dia a las 3:15 de la madrugada intente renovar el certificado","title":"Receta para instalar y renovar autom\u00e1ticamente un certificado SSL Let\u2019s Encrypt"},{"location":"kb/GNU-Linux/Seguridad/peerguardian/","text":"Peerguardian Y MoBlock \u00b6 Peerguardian Y MoBlock son aplicaciones que te permiten bloquear el tr\u00e1fico de Internet bas\u00e1ndose en enormes listas de rangos IP. Al bloquear estas conexiones, se supone que aumenta tu privacidad, ya que ning\u00fan tr\u00e1fico proveniente de tu m\u00e1quina llegar\u00e1 a su destino, tampoco llegar\u00e1 a tu m\u00e1quina nada proveniente de esas direcciones IP bloqueadas\u2026 MoBlock para Linux y Peerguardian para Windows\u2026 Puedes descargarlo desde los siguientes enlaces: Peerguardian: http://sourceforge.net/projects/peerguardian/ (Versi\u00f3n linux disponible!) MoBlock: https://help.ubuntu.com/community/MoBlock","title":"Peerguardian"},{"location":"kb/GNU-Linux/Seguridad/peerguardian/#peerguardian-y-moblock","text":"Peerguardian Y MoBlock son aplicaciones que te permiten bloquear el tr\u00e1fico de Internet bas\u00e1ndose en enormes listas de rangos IP. Al bloquear estas conexiones, se supone que aumenta tu privacidad, ya que ning\u00fan tr\u00e1fico proveniente de tu m\u00e1quina llegar\u00e1 a su destino, tampoco llegar\u00e1 a tu m\u00e1quina nada proveniente de esas direcciones IP bloqueadas\u2026 MoBlock para Linux y Peerguardian para Windows\u2026 Puedes descargarlo desde los siguientes enlaces: Peerguardian: http://sourceforge.net/projects/peerguardian/ (Versi\u00f3n linux disponible!) MoBlock: https://help.ubuntu.com/community/MoBlock","title":"Peerguardian Y MoBlock"},{"location":"kb/GNU-Linux/Seguridad/selinux/","text":"SELinux \u00b6 DAC vs MAC \u00b6 Linux con seguridad mejorada (SELinux, https://github.com/SELinuxProject ) es un m\u00f3dulo del n\u00facleo que implementa un sistema de control de acceso obligatorio (MAC). Fue desarrollado como un reemplazo para el Control de acceso discrecional (DAC) que se incluye con la mayor\u00eda de las distribuciones de Linux. Si solo usa un sistema DAC (por ejemplo, el modelo de permisos est\u00e1ndar / ACL): Los administradores no tienen forma de controlar a los usuarios: un usuario podr\u00eda establecer permisos legibles para todo el mundo en archivos confidenciales (como las claves ssh). Incluso podr\u00eda hacer chmod +rwx en todo su directorio de inicio y nada le detendr\u00eda. La misma raz\u00f3n puede extenderse a cualquier programa (tal vez troyano) ejecutado por ese usuario porque los procesos heredan los permisos del usuario. En resumen: un usuario normal puede otorgar (y restringir) el acceso a sus archivos de propiedad a otros usuarios y grupos o incluso cambiar el propietario del archivo, dejando expuestos los archivos cr\u00edticos a cuentas que no necesitan este acceso. Es cierto que se podr\u00eda restringir a este usuario el acceso a algunos archivos, pero eso es discrecional: no hay forma de que el administrador pueda aplicarlo a cada archivo individual en el sistema. El acceso a la ra\u00edz (o sudo) en un sistema DAC le da a la persona (quiz\u00e1s hackeada) o al programa (quiz\u00e1s troyanizado) permisos para realizar lo deseado en una m\u00e1quina. En esencia, hay dos niveles de privilegio (ra\u00edz y usuario), y no hay una manera f\u00e1cil de aplicar un modelo de privilegios m\u00ednimos (las jaulas chroot no son una opci\u00f3n porque tambi\u00e9n son discrecionales). Pero si est\u00e1 utilizando un sistema MAC, los usuarios no podr\u00e1n evitar las reglas establecidas previamente por el administrador del sistema. Estas reglas definen lo que un usuario o proceso puede hacer, limitando cada proceso a su dominio propio para que el proceso pueda interactuar solo con ciertos tipos de archivos y otros procesos permitidos o dominios. Esto evita que un hacker secuestre cualquier proceso para obtener acceso a todo el sistema. Esta restricci\u00f3n es implementada desde el nivel del n\u00facleo: se aplica a medida que la pol\u00edtica SELinux se carga en la memoria y, por lo tanto, el control de acceso se vuelve obligatorio. En SELinux todo est\u00e1 denegado: el sysadmin debe escribir una serie de pol\u00edticas de excepciones para dar a cada elemento del sistema (un servicio, tipo de proceso o usuario) solo el acceso requerido para funcionar (a archivos, puertos, tuber\u00edas, ...). Si un servicio, programa o usuario posteriormente intenta acceder o modificar un archivo o recurso que no es necesario funcionalmente, entonces se deniega el acceso y se registra la acci\u00f3n. Por ejemplo, el usuario de Apache solo puede acceder al directorio /var/www/html y nada m\u00e1s porque hay una pol\u00edtica SELinux que manda eso. No hay acceso por defecto, incluso si usted es el usuario root. Debido a que SELinux se implementa dentro del n\u00facleo, no es necesario que las aplicaciones individuales sean especialmente desarrolladas para trabajar bajo SELinux aunque, por supuesto, si se desarrollan para observar el error y los c\u00f3digos que devuelve SELinux podr\u00edan funcionar mejor. Si SELinux bloquea una acci\u00f3n, la aplicaci\u00f3n subyacente es informada con un un error de tipo normal (o, al menos, convencional) de \"acceso denegado\" a la solicitud. Una gran introducci\u00f3n a SELinux es https://wiki.gentoo.org/wiki/SELinux/Quick_introduction y, en general, https://wiki.gentoo.org/wiki/SELinux sitio completo. Activaci\u00f3n de SELinux \u00b6 SELinux tiene dos modos de funcionamiento: permisivo y obligatorio . El modo permisivo permite que el sistema funcione mediante el uso de sus sistemas DAC regulares mientras registra cada violaci\u00f3n a SELinux. El modo obligatorio impone una estricta denegaci\u00f3n de acceso a cualquier cosa que no est\u00e9 expl\u00edcitamente permitida por las pol\u00edticas de SELinux. Puedes ver en que modo se est\u00e1 ejecutando SELinux con el comando getenforce . Otro comando que se puede usar para saber lo mismo (aunque muestra otros datos informativos) es sestatus Nota NOTA: El significado de la informaci\u00f3n mostrada por este comando, entre otros argumentos interesantes, se explica en https://www.thegeekstuff.com/2017/06/selinux-sestatus/ Puede cambiar inmediatamente al modo deseado simplemente ejecutando sudo setenforce permisive (o sudo setenforce enforcing) Si desea que este cambio sea permanente, debe modificar el archivo /etc/selinux/config (que es enlazado por /etc/sysconfig/selinux ). Espec\u00edficamente deber\u00edas tener esta l\u00ednea ... SELINUX=permissive (o SELINUX=enforcing) ... y luego reiniciar el sistema. Por dise\u00f1o, SELinux permite escribir diferentes pol\u00edticas que son intercambiables editando la l\u00ednea SELINUXTYPE = en el archivo /etc/sysconfig/selinux . La pol\u00edtica predeterminada es la pol\u00edtica \"targeted\" que confina procesos del sistema preseleccionados. Por defecto, muchos procesos del sistema ya est\u00e1n preseleccionados y \"dirigidos\" por SELinux desde su instalaci\u00f3n (incluidos httpd, named, dhcpd, mysqld, etc.) pero todos los otros procesos del sistema y todos los programas de espacio de usuario restantes se ejecutan en un dominio no confinado y no quedan cubiertos por el modelo de protecci\u00f3n SELinux. Un objetivo podr\u00eda ser apuntar a cada proceso para obligarlos a ejecutarse en un dominio confinado para que la pol\u00edtica \"targeted\" proteja tantos procesos clave como sea posible, pero eso es responsabilidad de los mantenedores de paquetes. La alternativa ser\u00eda un modelo de denegaci\u00f3n por defecto donde cada acceso es denegado a menos que lo apruebe la pol\u00edtica: ser\u00eda una implementaci\u00f3n muy segura, pero esto tambi\u00e9n significa que los desarrolladores tienen que anticipar todos los permisos posibles que cada proceso puede necesitar en cada \u00fanico objeto posible. Entonces, en resumen, el comportamiento predeterminado hace que SELinux se ocupe solo de ciertos procesos. La pol\u00edtica SELinux \"targeted\" se proporciona con 4 formas de control de acceso: Type Enforcement (TE) : Type Enforcement es el mecanismo principal de control de acceso utilizado en la pol\u00edtica dirigida Role-Based Access Control (RBAC) : Control de acceso basado en roles, basado en usuarios de SELinux (no necesariamente el mismo que el Usuario de Linux), pero no se utiliza en la configuraci\u00f3n predeterminada de la pol\u00edtica de destino Multi-Level Security (MLS) :Seguridad multinivel, no se usa com\u00fanmente y a menudo se oculta en la pol\u00edtica de destino predeterminada. Multi-Category Security (MCS) :Seguridad multicategor\u00eda, una extensi\u00f3n de seguridad multinivel, utilizada en la pol\u00edtica espec\u00edfica para implementar la compartimentaci\u00f3n de m\u00e1quinas virtuales y contenedores a trav\u00e9s de sVirt. Conceptos b\u00e1sicos de SELinux \u00b6 Pol\u00edtica \u00b6 La pol\u00edtica de SELinux no es algo que reemplace la seguridad tradicional de DAC. Si una regla DAC proh\u00edbe un acceso de usuario a un archivo, las reglas de pol\u00edtica de SELinux no se evaluar\u00e1n porque la primera l\u00ednea de defensa ya ha bloqueado el acceso. Las decisiones de seguridad de SELinux entran en juego despu\u00e9s de que se haya evaluado la seguridad de DAC. As\u00ed que si se deniega el acceso a un recurso, primero verifique los permisos comunes de acceso. Pero tenga en cuenta que si el DAC y el MAC entran en conflicto, La pol\u00edtica de SELinux tiene prioridad. Entonces, supongamos que cambia, como root, la propiedad del servicio httpd a cualquiera (ejecutando el comando chmod 777 httpd ); la pol\u00edtica predeterminada de SELinux todav\u00eda evita cualquier intento de un usuario de matar el servidor web. Una pol\u00edtica de SELinux define el acceso de los usuarios a los roles, el acceso de los roles a los dominios y el acceso de los dominios a los tipos. Primero, el usuario tiene que estar autorizado para acceder a un rol, y luego el rol tiene que estar autorizado para acceder al dominio. El dominio a su vez est\u00e1 restringido para acceder solo a ciertos tipos de archivos: Usuarios y Roles \u00b6 SELinux tiene un conjunto de usuarios preconstruidos. Cada cuenta de usuario normal de Linux se asigna a uno o m\u00e1s Usuarios de SELinux. Un rol solo se usa cuando SELinux est\u00e1 configurado para implementar RBAC (por lo que no se usa de manera predeterminada). Un rol es un filtro: define qu\u00e9 usuarios pueden asumir el rol en cuesti\u00f3n y qu\u00e9 dominio puede desempe\u00f1ar este rol Dominio \u00b6 Un dominio es el contexto dentro del cual se puede ejecutar un proceso SELinux. Ese contexto es como una envoltura alrededor del proceso: le dice al proceso lo que puede y no puede hacer. Por ejemplo, el dominio definir\u00e1 qu\u00e9 archivos, directorios, enlaces, dispositivos o puertos son accesibles para el proceso. Tipo \u00b6 Un tipo es el contexto de un archivo que estipula el prop\u00f3sito del archivo. Por ejemplo, el contexto de un archivo puede dictar que es una p\u00e1gina web, o que el archivo pertenece al directorio /etc , o que el propietario del archivo es un usuario espec\u00edfico de SELinux. La pol\u00edtica en s\u00ed es un conjunto de reglas que dicen que este usuario y este usuario solo pueden asumir este rol y este rol, y esos roles est\u00e1n autorizados para acceder solo a este y este dominio. Los dominios a su vez solo pueden acceder a determinados tipos de archivos. Consejo de terminolog\u00eda En general, cuando llamamos a algo como \"sujeto\" de SELinux nos referiremos a un proceso que puede potencialmente afectar un objeto. Un \"objeto\" de SELinux es cualquier cosa sobre la que se pueda actuar: puede ser un archivo, un directorio, un puerto, un z\u00f3calo tcp, el cursor o quiz\u00e1s un servidor X. Las acciones que un sujeto puede realizar en un objeto son las del sujeto Consejo de terminolog\u00eda el \u00faltimo paso, donde un proceso que se ejecuta dentro de un dominio particular solo puede realizar ciertas operaciones en ciertos tipos de objetos, se llama Type Enforcement (TE). Par\u00e1metros -Z \u00b6 Como acabamos de decir, el modelo primario o cumplimiento de SELinux se llama \"Type Enforcement\". B\u00e1sicamente, esto significa que definimos una \"etiqueta\" en un proceso en funci\u00f3n de su tipo, y una \"etiqueta\" en un objeto del sistema de archivos basado en su tipo, tambi\u00e9n. Las reglas de pol\u00edtica controlan el acceso entre los sujetos etiquetados (procesos, demonios) y objetos etiquetados (carpetas, archivos, dispositivos, puertos ...) -o m\u00e1s espec\u00edficamente, controlan qu\u00e9 usuarios pueden obtener qu\u00e9 roles y cada rol espec\u00edfico impone una restricci\u00f3n sobre a qu\u00e9 tipo de archivos puede acceder el usuario. Estas etiquetas (algunas veces llamadas \"contextos\" tambi\u00e9n) se almacenan como atributos extendidos en el sistema de archivos o, para objetos que no son archivos (como procesos y puertos) son administrados por el n\u00facleo. El formato de la etiqueta es: usuario: rol: tipo: sensibilidad Veamos la etiqueta o contexto de un archivo, por ejemplo, del archivo /etc/fstab usando el par\u00e1metro -Z del comando ls : ls -lZ /etc/fstab -rw-rw-r--. 1 root root system_u:object_r:etc_t:s0 709 oct 29 18:02 /etc/fstab Adem\u00e1s de los permisos y propiedad de archivos est\u00e1ndar, podemos ver el contexto de seguridad de SELinux campos: system_u: object_r: etc_t: s0 . Como puede ver, los usuarios de SELinux tienen el sufijo _u , los roles tienen el sufijo _r y los tipos (para archivos) o dominios (para procesos) tienen el sufijo _t . Nota El modificador -Z funcionar\u00e1 con la mayor\u00eda de las utilidades para mostrar los contextos de seguridad de SELinux ( ps -eZ , id -Z , cp -Z , mkdir -Z , ss -Z ) * Cada cuenta de usuario de Linux se asigna a un usuario de SELinux, y en en este caso, el usuario root que posee el archivo se asigna al usuario system_u SELinux. Esta asignaci\u00f3n se realiza mediante la pol\u00edtica SELinux. La segunda parte especifica el rol SELinux, que es object_r. Hablamos de roles luego Lo m\u00e1s importante aqu\u00ed es la tercera parte, el tipo de archivo que se muestra aqu\u00ed como etc_t . Esta es la parte que define a qu\u00e9 tipo pertenece el archivo o directorio. Podemos ver que la mayor\u00eda de los archivos en el directorio /etc pertenecen a etc_t . Tambi\u00e9n podemos ver que algunos archivos pueden pertenecer a otros tipos, como locale.conf que tiene un tipo locale_t . Incluso cuando todos los archivos enumerados aqu\u00ed tienen los mismos usuarios y propietarios de grupos, Sus tipos podr\u00edan ser diferentes. La cuarta parte del contexto de seguridad, s0 , tiene que ver con la seguridad multinivel o MLS. B\u00e1sicamente esto es otra forma de hacer cumplir la pol\u00edtica de seguridad de SELinux diferente de la \"dirigida\", y esta parte muestra la sensibilidad del recurso ( s0 ). No hablaremos de esto porque es un tema muy avanzado. Si observamos el contexto de seguridad SELinux de un archivo en nuestro directorio de inicio, veremos algo as\u00ed como esto: unconfined_u: object_r: user_home_t: s0 Por lo que podemos inferir que el tipo user_home_t es el tipo predeterminado para archivos en el directorio de inicio de un usuario. Tambi\u00e9n podemos ver la etiqueta de un binario (no en ejecuci\u00f3n): si hacemos ls -lZ /bin/ssh , veremos que su contexto es system_u: object_r: ssh_exec_t: s0 El usuario, el rol y la sensibilidad funcionan tanto para archivos como para procesos. Sin embargo, el dominio es exclusivo para los procesos. Un dominio le da al proceso un contexto para ejecutarse: es como una burbuja alrededor del proceso que lo limita. Este confinamiento asegura que cada dominio de proceso solo pueda actuar sobre ciertos tipos de archivos y nada m\u00e1s. Usando este modelo, incluso si un proceso es secuestrado por otro proceso malicioso o usuario, lo peor que puede hacer es da\u00f1ar los archivos a los que tiene acceso. Si quieres conocer el contexto de seguridad SELinux de un proceso; por ejemplo, el demonio journald ( systemd-journal ), podr\u00eda hacer ...: :::bash # Probado En Fedora 31 ps -eZ | grep \"systemd-journal\" system_u:system_r:syslogd_t:s0 469 ? 00:00:00 systemd-journal ... y ver\u00e1 que los campos de contexto de SELinux ahora son: system_u: system_r: syslogd_t: s0 por lo que sus dominios son syslogd_t . El acceso solo se permite entre dominios y tipos similares: un proceso que se ejecuta en el contexto httpd_t, por ejemplo, puede interactuar con un objeto con la etiqueta httpd_something_t. Entonces, cuando Apache se ejecuta en el dominio \"httpd_t\" puede leer \"/var/www/html/index.html\" porque es del tipo \"httpd_sys_content_t\" pero no puede acceder a \"/home/username/myfile.txt\" aunque este archivo sea legible porque El contexto de seguridad de SELinux del archivo \"/home/username/myfile.txt\" no es del tipo \"httpd_t\". Si Apache fuera a ser explotado, suponiendo por el bien de este ejemplo que el derecho de la cuenta ra\u00edz necesitaba efectuar un reinicio de SELinux no se obtuvo el etiquetado en otro contexto, no podr\u00eda iniciar ning\u00fan proceso que no est\u00e9 en httpd_t dominio (que evita la escalada de privilegios) o acceder a cualquier archivo que no est\u00e9 en un dominio relacionado con httpd_t. A menos que lo especifique la pol\u00edtica, los procesos y archivos se crean con los contextos de sus padres. As\u00ed que si tenemos un proceso llamado \"proc_a\" que genera otro proceso llamado \"proc_b\", el proceso generado se ejecutar\u00e1 en el mismo dominio que \"proc_a\" a menos que la pol\u00edtica de SELinux especifique lo contrario. Del mismo modo, si tenemos un directorio con un tipo de \"some_context_t\", cualquier archivo o directorio creado debajo tendr\u00e1 el mismo tipo contexto a menos que la pol\u00edtica diga lo contrario. Esta herencia no se conserva cuando los archivos se copian a otro ubicaci\u00f3n. En una operaci\u00f3n de copia, el archivo o directorio copiado asumir\u00e1 el contexto de tipo de la ubicaci\u00f3n de destino Este cambio de contexto puede ser anulado por la cl\u00e1usula --preserver = context en el comando cp. (disponible del paquete \"setools-console\") Comandos B\u00e1sicos SELinux \u00b6 semanage \u00b6 Podemos usar \u2018semanage\u2019 para cambiar el contexto de un archivo / directorio (de manera similar a c\u00f3mo 'chown' o 'chmod' puede usarse para cambiar la propiedad o los permisos de archivo est\u00e1ndar de un archivo). Por ejemplo, para cambiar el contexto de /home/dan/html , ejecute los siguientes comandos: sudo semanage fcontext -a -t httpd_sys_content_t \u2018/home/dan/html(/.*)?\u2019 Nota si no conoce la etiqueta pero conoce un archivo con la etiqueta equivalente que desea, puede hacer: `sudo semanage fcontext -a -e /ruta/archivo1/ruta/archivo2` Para verificar el contexto de seguridad de todos los archivos / directorios en el sistema de archivos podemos ejecutar: sudo semanage fcontext -l chcon \u00b6 Sin embargo, otro comando que se puede usar para hacer lo mismo (es decir: cambiar el contexto de un archivo o archivos / directorios (opcionalmente recursivamente con el par\u00e1metro -R) es chcon : sudo chcon -vR -t httpd_sys_content_t / home / dan / html Nota NOTA: Si no conoce la etiqueta pero conoce un archivo con el etiquetado equivalente que desea, puede hacer lo siguiente: sudo chcon -referencia /ruta/archivo1 /ruta/archivo2 Nota NOTA: Puede cambiar todo el contexto simplemente haciendo chcon user:role:type:sensibilidad /ruta/archivo o cualquier otra parte de el contexto con -los argumentos -u, -r o -l , respectivamente. La modificaci\u00f3n de los contextos de seguridad de ambas maneras (a trav\u00e9s de semanage fcontext -a o chcon ) persistir\u00e1 entre reinicios del sistema pero en caso de haber ejecutado el cambio a trav\u00e9s de chcon , durar\u00e1 solo hasta que la porci\u00f3n modificada del sistema de archivos se vuelve a etiquetar. Si desea que un cambio de contexto sea permanente, incluso despu\u00e9s de que un sistema de archivos completo se vuelve a etiquetar, debe usar semanage fcontext -a . Eso es porque este \u00faltimo escribe una regla personalizada local (un denominado M\u00f3dulo de pol\u00edticas) en /etc/selinux/targeted/contexts/files/file_contexts.local para que pueda \"recordar\" m\u00e1s tarde, si es necesario volver a aplicarlo. restorecon \u00b6 El comando restorecon se puede usar para restaurar los contextos de seguridad SELinux predeterminados de los archivos Usemos Apache como ejemplo: supongamos que un usuario edita una copia de index.html en su directorio de inicio y mueve ( mv ) el archivo a DocumentRoot /var/www/html (que tiene un contexto diferente por defecto: \"Httpd_sys_content_t\"). Mientras que el comando copy ( cp ) generalmente har\u00e1 que el archivo adopte el contexto de seguridad del directorio de destino, move ( mv ) mantendr\u00e1 el contexto de seguridad de la fuente. Entonces Apache no podr\u00e1 cargar este archivo porque no tendr\u00e1 la etiqueta correcta. Podr\u00edamos usar el comando chcon para cambiar el contexto de seguridad de los archivos en cuesti\u00f3n, pero como los archivos ahora est\u00e1n en el Apache DocumentRoot predeterminado ( /var/www/html ) solo debemos restaurar los contextos de seguridad predeterminados para ese directorio o archivo (s). De hecho, ejecutar chcon requiere que sepas el contexto correcto para el archivo, pero restorecon no necesita esto especificado. para restaurar solo el archivo index.html, usar\u00edamos ...: sudo restorecon -v /var/www/html/index.html ... o para restaurar recursivamente los contextos de seguridad predeterminados para todo el directorio: sudo restorecon -Rv / var / www / html Como dijimos, el sistema sabe qu\u00e9 contexto aplicar cuando ejecuta restorecon porque SELinux \"Recuerda\" el contexto de cada archivo o directorio: se enumeran los contextos de archivos que ya existen en el sistema en el archivo /etc/selinux/targeted/contexts/files/file_contexts . Es un archivo grande y enumera cada tipo de archivo asociado con cada aplicaci\u00f3n y su contexto","title":"Selinux"},{"location":"kb/GNU-Linux/Seguridad/selinux/#selinux","text":"","title":"SELinux"},{"location":"kb/GNU-Linux/Seguridad/selinux/#dac-vs-mac","text":"Linux con seguridad mejorada (SELinux, https://github.com/SELinuxProject ) es un m\u00f3dulo del n\u00facleo que implementa un sistema de control de acceso obligatorio (MAC). Fue desarrollado como un reemplazo para el Control de acceso discrecional (DAC) que se incluye con la mayor\u00eda de las distribuciones de Linux. Si solo usa un sistema DAC (por ejemplo, el modelo de permisos est\u00e1ndar / ACL): Los administradores no tienen forma de controlar a los usuarios: un usuario podr\u00eda establecer permisos legibles para todo el mundo en archivos confidenciales (como las claves ssh). Incluso podr\u00eda hacer chmod +rwx en todo su directorio de inicio y nada le detendr\u00eda. La misma raz\u00f3n puede extenderse a cualquier programa (tal vez troyano) ejecutado por ese usuario porque los procesos heredan los permisos del usuario. En resumen: un usuario normal puede otorgar (y restringir) el acceso a sus archivos de propiedad a otros usuarios y grupos o incluso cambiar el propietario del archivo, dejando expuestos los archivos cr\u00edticos a cuentas que no necesitan este acceso. Es cierto que se podr\u00eda restringir a este usuario el acceso a algunos archivos, pero eso es discrecional: no hay forma de que el administrador pueda aplicarlo a cada archivo individual en el sistema. El acceso a la ra\u00edz (o sudo) en un sistema DAC le da a la persona (quiz\u00e1s hackeada) o al programa (quiz\u00e1s troyanizado) permisos para realizar lo deseado en una m\u00e1quina. En esencia, hay dos niveles de privilegio (ra\u00edz y usuario), y no hay una manera f\u00e1cil de aplicar un modelo de privilegios m\u00ednimos (las jaulas chroot no son una opci\u00f3n porque tambi\u00e9n son discrecionales). Pero si est\u00e1 utilizando un sistema MAC, los usuarios no podr\u00e1n evitar las reglas establecidas previamente por el administrador del sistema. Estas reglas definen lo que un usuario o proceso puede hacer, limitando cada proceso a su dominio propio para que el proceso pueda interactuar solo con ciertos tipos de archivos y otros procesos permitidos o dominios. Esto evita que un hacker secuestre cualquier proceso para obtener acceso a todo el sistema. Esta restricci\u00f3n es implementada desde el nivel del n\u00facleo: se aplica a medida que la pol\u00edtica SELinux se carga en la memoria y, por lo tanto, el control de acceso se vuelve obligatorio. En SELinux todo est\u00e1 denegado: el sysadmin debe escribir una serie de pol\u00edticas de excepciones para dar a cada elemento del sistema (un servicio, tipo de proceso o usuario) solo el acceso requerido para funcionar (a archivos, puertos, tuber\u00edas, ...). Si un servicio, programa o usuario posteriormente intenta acceder o modificar un archivo o recurso que no es necesario funcionalmente, entonces se deniega el acceso y se registra la acci\u00f3n. Por ejemplo, el usuario de Apache solo puede acceder al directorio /var/www/html y nada m\u00e1s porque hay una pol\u00edtica SELinux que manda eso. No hay acceso por defecto, incluso si usted es el usuario root. Debido a que SELinux se implementa dentro del n\u00facleo, no es necesario que las aplicaciones individuales sean especialmente desarrolladas para trabajar bajo SELinux aunque, por supuesto, si se desarrollan para observar el error y los c\u00f3digos que devuelve SELinux podr\u00edan funcionar mejor. Si SELinux bloquea una acci\u00f3n, la aplicaci\u00f3n subyacente es informada con un un error de tipo normal (o, al menos, convencional) de \"acceso denegado\" a la solicitud. Una gran introducci\u00f3n a SELinux es https://wiki.gentoo.org/wiki/SELinux/Quick_introduction y, en general, https://wiki.gentoo.org/wiki/SELinux sitio completo.","title":"DAC vs MAC"},{"location":"kb/GNU-Linux/Seguridad/selinux/#activacion-de-selinux","text":"SELinux tiene dos modos de funcionamiento: permisivo y obligatorio . El modo permisivo permite que el sistema funcione mediante el uso de sus sistemas DAC regulares mientras registra cada violaci\u00f3n a SELinux. El modo obligatorio impone una estricta denegaci\u00f3n de acceso a cualquier cosa que no est\u00e9 expl\u00edcitamente permitida por las pol\u00edticas de SELinux. Puedes ver en que modo se est\u00e1 ejecutando SELinux con el comando getenforce . Otro comando que se puede usar para saber lo mismo (aunque muestra otros datos informativos) es sestatus Nota NOTA: El significado de la informaci\u00f3n mostrada por este comando, entre otros argumentos interesantes, se explica en https://www.thegeekstuff.com/2017/06/selinux-sestatus/ Puede cambiar inmediatamente al modo deseado simplemente ejecutando sudo setenforce permisive (o sudo setenforce enforcing) Si desea que este cambio sea permanente, debe modificar el archivo /etc/selinux/config (que es enlazado por /etc/sysconfig/selinux ). Espec\u00edficamente deber\u00edas tener esta l\u00ednea ... SELINUX=permissive (o SELINUX=enforcing) ... y luego reiniciar el sistema. Por dise\u00f1o, SELinux permite escribir diferentes pol\u00edticas que son intercambiables editando la l\u00ednea SELINUXTYPE = en el archivo /etc/sysconfig/selinux . La pol\u00edtica predeterminada es la pol\u00edtica \"targeted\" que confina procesos del sistema preseleccionados. Por defecto, muchos procesos del sistema ya est\u00e1n preseleccionados y \"dirigidos\" por SELinux desde su instalaci\u00f3n (incluidos httpd, named, dhcpd, mysqld, etc.) pero todos los otros procesos del sistema y todos los programas de espacio de usuario restantes se ejecutan en un dominio no confinado y no quedan cubiertos por el modelo de protecci\u00f3n SELinux. Un objetivo podr\u00eda ser apuntar a cada proceso para obligarlos a ejecutarse en un dominio confinado para que la pol\u00edtica \"targeted\" proteja tantos procesos clave como sea posible, pero eso es responsabilidad de los mantenedores de paquetes. La alternativa ser\u00eda un modelo de denegaci\u00f3n por defecto donde cada acceso es denegado a menos que lo apruebe la pol\u00edtica: ser\u00eda una implementaci\u00f3n muy segura, pero esto tambi\u00e9n significa que los desarrolladores tienen que anticipar todos los permisos posibles que cada proceso puede necesitar en cada \u00fanico objeto posible. Entonces, en resumen, el comportamiento predeterminado hace que SELinux se ocupe solo de ciertos procesos. La pol\u00edtica SELinux \"targeted\" se proporciona con 4 formas de control de acceso: Type Enforcement (TE) : Type Enforcement es el mecanismo principal de control de acceso utilizado en la pol\u00edtica dirigida Role-Based Access Control (RBAC) : Control de acceso basado en roles, basado en usuarios de SELinux (no necesariamente el mismo que el Usuario de Linux), pero no se utiliza en la configuraci\u00f3n predeterminada de la pol\u00edtica de destino Multi-Level Security (MLS) :Seguridad multinivel, no se usa com\u00fanmente y a menudo se oculta en la pol\u00edtica de destino predeterminada. Multi-Category Security (MCS) :Seguridad multicategor\u00eda, una extensi\u00f3n de seguridad multinivel, utilizada en la pol\u00edtica espec\u00edfica para implementar la compartimentaci\u00f3n de m\u00e1quinas virtuales y contenedores a trav\u00e9s de sVirt.","title":"Activaci\u00f3n de SELinux"},{"location":"kb/GNU-Linux/Seguridad/selinux/#conceptos-basicos-de-selinux","text":"","title":"Conceptos b\u00e1sicos de SELinux"},{"location":"kb/GNU-Linux/Seguridad/selinux/#politica","text":"La pol\u00edtica de SELinux no es algo que reemplace la seguridad tradicional de DAC. Si una regla DAC proh\u00edbe un acceso de usuario a un archivo, las reglas de pol\u00edtica de SELinux no se evaluar\u00e1n porque la primera l\u00ednea de defensa ya ha bloqueado el acceso. Las decisiones de seguridad de SELinux entran en juego despu\u00e9s de que se haya evaluado la seguridad de DAC. As\u00ed que si se deniega el acceso a un recurso, primero verifique los permisos comunes de acceso. Pero tenga en cuenta que si el DAC y el MAC entran en conflicto, La pol\u00edtica de SELinux tiene prioridad. Entonces, supongamos que cambia, como root, la propiedad del servicio httpd a cualquiera (ejecutando el comando chmod 777 httpd ); la pol\u00edtica predeterminada de SELinux todav\u00eda evita cualquier intento de un usuario de matar el servidor web. Una pol\u00edtica de SELinux define el acceso de los usuarios a los roles, el acceso de los roles a los dominios y el acceso de los dominios a los tipos. Primero, el usuario tiene que estar autorizado para acceder a un rol, y luego el rol tiene que estar autorizado para acceder al dominio. El dominio a su vez est\u00e1 restringido para acceder solo a ciertos tipos de archivos:","title":"Pol\u00edtica"},{"location":"kb/GNU-Linux/Seguridad/selinux/#usuarios-y-roles","text":"SELinux tiene un conjunto de usuarios preconstruidos. Cada cuenta de usuario normal de Linux se asigna a uno o m\u00e1s Usuarios de SELinux. Un rol solo se usa cuando SELinux est\u00e1 configurado para implementar RBAC (por lo que no se usa de manera predeterminada). Un rol es un filtro: define qu\u00e9 usuarios pueden asumir el rol en cuesti\u00f3n y qu\u00e9 dominio puede desempe\u00f1ar este rol","title":"Usuarios y Roles"},{"location":"kb/GNU-Linux/Seguridad/selinux/#dominio","text":"Un dominio es el contexto dentro del cual se puede ejecutar un proceso SELinux. Ese contexto es como una envoltura alrededor del proceso: le dice al proceso lo que puede y no puede hacer. Por ejemplo, el dominio definir\u00e1 qu\u00e9 archivos, directorios, enlaces, dispositivos o puertos son accesibles para el proceso.","title":"Dominio"},{"location":"kb/GNU-Linux/Seguridad/selinux/#tipo","text":"Un tipo es el contexto de un archivo que estipula el prop\u00f3sito del archivo. Por ejemplo, el contexto de un archivo puede dictar que es una p\u00e1gina web, o que el archivo pertenece al directorio /etc , o que el propietario del archivo es un usuario espec\u00edfico de SELinux. La pol\u00edtica en s\u00ed es un conjunto de reglas que dicen que este usuario y este usuario solo pueden asumir este rol y este rol, y esos roles est\u00e1n autorizados para acceder solo a este y este dominio. Los dominios a su vez solo pueden acceder a determinados tipos de archivos. Consejo de terminolog\u00eda En general, cuando llamamos a algo como \"sujeto\" de SELinux nos referiremos a un proceso que puede potencialmente afectar un objeto. Un \"objeto\" de SELinux es cualquier cosa sobre la que se pueda actuar: puede ser un archivo, un directorio, un puerto, un z\u00f3calo tcp, el cursor o quiz\u00e1s un servidor X. Las acciones que un sujeto puede realizar en un objeto son las del sujeto Consejo de terminolog\u00eda el \u00faltimo paso, donde un proceso que se ejecuta dentro de un dominio particular solo puede realizar ciertas operaciones en ciertos tipos de objetos, se llama Type Enforcement (TE).","title":"Tipo"},{"location":"kb/GNU-Linux/Seguridad/selinux/#parametros-z","text":"Como acabamos de decir, el modelo primario o cumplimiento de SELinux se llama \"Type Enforcement\". B\u00e1sicamente, esto significa que definimos una \"etiqueta\" en un proceso en funci\u00f3n de su tipo, y una \"etiqueta\" en un objeto del sistema de archivos basado en su tipo, tambi\u00e9n. Las reglas de pol\u00edtica controlan el acceso entre los sujetos etiquetados (procesos, demonios) y objetos etiquetados (carpetas, archivos, dispositivos, puertos ...) -o m\u00e1s espec\u00edficamente, controlan qu\u00e9 usuarios pueden obtener qu\u00e9 roles y cada rol espec\u00edfico impone una restricci\u00f3n sobre a qu\u00e9 tipo de archivos puede acceder el usuario. Estas etiquetas (algunas veces llamadas \"contextos\" tambi\u00e9n) se almacenan como atributos extendidos en el sistema de archivos o, para objetos que no son archivos (como procesos y puertos) son administrados por el n\u00facleo. El formato de la etiqueta es: usuario: rol: tipo: sensibilidad Veamos la etiqueta o contexto de un archivo, por ejemplo, del archivo /etc/fstab usando el par\u00e1metro -Z del comando ls : ls -lZ /etc/fstab -rw-rw-r--. 1 root root system_u:object_r:etc_t:s0 709 oct 29 18:02 /etc/fstab Adem\u00e1s de los permisos y propiedad de archivos est\u00e1ndar, podemos ver el contexto de seguridad de SELinux campos: system_u: object_r: etc_t: s0 . Como puede ver, los usuarios de SELinux tienen el sufijo _u , los roles tienen el sufijo _r y los tipos (para archivos) o dominios (para procesos) tienen el sufijo _t . Nota El modificador -Z funcionar\u00e1 con la mayor\u00eda de las utilidades para mostrar los contextos de seguridad de SELinux ( ps -eZ , id -Z , cp -Z , mkdir -Z , ss -Z ) * Cada cuenta de usuario de Linux se asigna a un usuario de SELinux, y en en este caso, el usuario root que posee el archivo se asigna al usuario system_u SELinux. Esta asignaci\u00f3n se realiza mediante la pol\u00edtica SELinux. La segunda parte especifica el rol SELinux, que es object_r. Hablamos de roles luego Lo m\u00e1s importante aqu\u00ed es la tercera parte, el tipo de archivo que se muestra aqu\u00ed como etc_t . Esta es la parte que define a qu\u00e9 tipo pertenece el archivo o directorio. Podemos ver que la mayor\u00eda de los archivos en el directorio /etc pertenecen a etc_t . Tambi\u00e9n podemos ver que algunos archivos pueden pertenecer a otros tipos, como locale.conf que tiene un tipo locale_t . Incluso cuando todos los archivos enumerados aqu\u00ed tienen los mismos usuarios y propietarios de grupos, Sus tipos podr\u00edan ser diferentes. La cuarta parte del contexto de seguridad, s0 , tiene que ver con la seguridad multinivel o MLS. B\u00e1sicamente esto es otra forma de hacer cumplir la pol\u00edtica de seguridad de SELinux diferente de la \"dirigida\", y esta parte muestra la sensibilidad del recurso ( s0 ). No hablaremos de esto porque es un tema muy avanzado. Si observamos el contexto de seguridad SELinux de un archivo en nuestro directorio de inicio, veremos algo as\u00ed como esto: unconfined_u: object_r: user_home_t: s0 Por lo que podemos inferir que el tipo user_home_t es el tipo predeterminado para archivos en el directorio de inicio de un usuario. Tambi\u00e9n podemos ver la etiqueta de un binario (no en ejecuci\u00f3n): si hacemos ls -lZ /bin/ssh , veremos que su contexto es system_u: object_r: ssh_exec_t: s0 El usuario, el rol y la sensibilidad funcionan tanto para archivos como para procesos. Sin embargo, el dominio es exclusivo para los procesos. Un dominio le da al proceso un contexto para ejecutarse: es como una burbuja alrededor del proceso que lo limita. Este confinamiento asegura que cada dominio de proceso solo pueda actuar sobre ciertos tipos de archivos y nada m\u00e1s. Usando este modelo, incluso si un proceso es secuestrado por otro proceso malicioso o usuario, lo peor que puede hacer es da\u00f1ar los archivos a los que tiene acceso. Si quieres conocer el contexto de seguridad SELinux de un proceso; por ejemplo, el demonio journald ( systemd-journal ), podr\u00eda hacer ...: :::bash # Probado En Fedora 31 ps -eZ | grep \"systemd-journal\" system_u:system_r:syslogd_t:s0 469 ? 00:00:00 systemd-journal ... y ver\u00e1 que los campos de contexto de SELinux ahora son: system_u: system_r: syslogd_t: s0 por lo que sus dominios son syslogd_t . El acceso solo se permite entre dominios y tipos similares: un proceso que se ejecuta en el contexto httpd_t, por ejemplo, puede interactuar con un objeto con la etiqueta httpd_something_t. Entonces, cuando Apache se ejecuta en el dominio \"httpd_t\" puede leer \"/var/www/html/index.html\" porque es del tipo \"httpd_sys_content_t\" pero no puede acceder a \"/home/username/myfile.txt\" aunque este archivo sea legible porque El contexto de seguridad de SELinux del archivo \"/home/username/myfile.txt\" no es del tipo \"httpd_t\". Si Apache fuera a ser explotado, suponiendo por el bien de este ejemplo que el derecho de la cuenta ra\u00edz necesitaba efectuar un reinicio de SELinux no se obtuvo el etiquetado en otro contexto, no podr\u00eda iniciar ning\u00fan proceso que no est\u00e9 en httpd_t dominio (que evita la escalada de privilegios) o acceder a cualquier archivo que no est\u00e9 en un dominio relacionado con httpd_t. A menos que lo especifique la pol\u00edtica, los procesos y archivos se crean con los contextos de sus padres. As\u00ed que si tenemos un proceso llamado \"proc_a\" que genera otro proceso llamado \"proc_b\", el proceso generado se ejecutar\u00e1 en el mismo dominio que \"proc_a\" a menos que la pol\u00edtica de SELinux especifique lo contrario. Del mismo modo, si tenemos un directorio con un tipo de \"some_context_t\", cualquier archivo o directorio creado debajo tendr\u00e1 el mismo tipo contexto a menos que la pol\u00edtica diga lo contrario. Esta herencia no se conserva cuando los archivos se copian a otro ubicaci\u00f3n. En una operaci\u00f3n de copia, el archivo o directorio copiado asumir\u00e1 el contexto de tipo de la ubicaci\u00f3n de destino Este cambio de contexto puede ser anulado por la cl\u00e1usula --preserver = context en el comando cp. (disponible del paquete \"setools-console\")","title":"Par\u00e1metros -Z"},{"location":"kb/GNU-Linux/Seguridad/selinux/#comandos-basicos-selinux","text":"","title":"Comandos B\u00e1sicos SELinux"},{"location":"kb/GNU-Linux/Seguridad/selinux/#semanage","text":"Podemos usar \u2018semanage\u2019 para cambiar el contexto de un archivo / directorio (de manera similar a c\u00f3mo 'chown' o 'chmod' puede usarse para cambiar la propiedad o los permisos de archivo est\u00e1ndar de un archivo). Por ejemplo, para cambiar el contexto de /home/dan/html , ejecute los siguientes comandos: sudo semanage fcontext -a -t httpd_sys_content_t \u2018/home/dan/html(/.*)?\u2019 Nota si no conoce la etiqueta pero conoce un archivo con la etiqueta equivalente que desea, puede hacer: `sudo semanage fcontext -a -e /ruta/archivo1/ruta/archivo2` Para verificar el contexto de seguridad de todos los archivos / directorios en el sistema de archivos podemos ejecutar: sudo semanage fcontext -l","title":"semanage"},{"location":"kb/GNU-Linux/Seguridad/selinux/#chcon","text":"Sin embargo, otro comando que se puede usar para hacer lo mismo (es decir: cambiar el contexto de un archivo o archivos / directorios (opcionalmente recursivamente con el par\u00e1metro -R) es chcon : sudo chcon -vR -t httpd_sys_content_t / home / dan / html Nota NOTA: Si no conoce la etiqueta pero conoce un archivo con el etiquetado equivalente que desea, puede hacer lo siguiente: sudo chcon -referencia /ruta/archivo1 /ruta/archivo2 Nota NOTA: Puede cambiar todo el contexto simplemente haciendo chcon user:role:type:sensibilidad /ruta/archivo o cualquier otra parte de el contexto con -los argumentos -u, -r o -l , respectivamente. La modificaci\u00f3n de los contextos de seguridad de ambas maneras (a trav\u00e9s de semanage fcontext -a o chcon ) persistir\u00e1 entre reinicios del sistema pero en caso de haber ejecutado el cambio a trav\u00e9s de chcon , durar\u00e1 solo hasta que la porci\u00f3n modificada del sistema de archivos se vuelve a etiquetar. Si desea que un cambio de contexto sea permanente, incluso despu\u00e9s de que un sistema de archivos completo se vuelve a etiquetar, debe usar semanage fcontext -a . Eso es porque este \u00faltimo escribe una regla personalizada local (un denominado M\u00f3dulo de pol\u00edticas) en /etc/selinux/targeted/contexts/files/file_contexts.local para que pueda \"recordar\" m\u00e1s tarde, si es necesario volver a aplicarlo.","title":"chcon"},{"location":"kb/GNU-Linux/Seguridad/selinux/#restorecon","text":"El comando restorecon se puede usar para restaurar los contextos de seguridad SELinux predeterminados de los archivos Usemos Apache como ejemplo: supongamos que un usuario edita una copia de index.html en su directorio de inicio y mueve ( mv ) el archivo a DocumentRoot /var/www/html (que tiene un contexto diferente por defecto: \"Httpd_sys_content_t\"). Mientras que el comando copy ( cp ) generalmente har\u00e1 que el archivo adopte el contexto de seguridad del directorio de destino, move ( mv ) mantendr\u00e1 el contexto de seguridad de la fuente. Entonces Apache no podr\u00e1 cargar este archivo porque no tendr\u00e1 la etiqueta correcta. Podr\u00edamos usar el comando chcon para cambiar el contexto de seguridad de los archivos en cuesti\u00f3n, pero como los archivos ahora est\u00e1n en el Apache DocumentRoot predeterminado ( /var/www/html ) solo debemos restaurar los contextos de seguridad predeterminados para ese directorio o archivo (s). De hecho, ejecutar chcon requiere que sepas el contexto correcto para el archivo, pero restorecon no necesita esto especificado. para restaurar solo el archivo index.html, usar\u00edamos ...: sudo restorecon -v /var/www/html/index.html ... o para restaurar recursivamente los contextos de seguridad predeterminados para todo el directorio: sudo restorecon -Rv / var / www / html Como dijimos, el sistema sabe qu\u00e9 contexto aplicar cuando ejecuta restorecon porque SELinux \"Recuerda\" el contexto de cada archivo o directorio: se enumeran los contextos de archivos que ya existen en el sistema en el archivo /etc/selinux/targeted/contexts/files/file_contexts . Es un archivo grande y enumera cada tipo de archivo asociado con cada aplicaci\u00f3n y su contexto","title":"restorecon"},{"location":"kb/GNU-Linux/Seguridad/ssh/","text":"SSH \u00b6 SSH Keys y seguridad linux \u00b6 Conectarse sin contrase\u00f1as \u00b6 Si nunca te has creado una llave ssh, elimina, si existe, en local la carpeta ~/.ssh En local ejecutamos los siguientes comandos para crearla de nuevo: mkdir ~/.ssh chmod 700 ~/.ssh Generar el par de claves RSA (p\u00fablica y privada): ssh-keygen -t rsa -b 4096 -C \"hola@example.com\" Nota -t indica el tipo de clave a generar, podr\u00eda ser \u201cdsa\u201d, \u201cecdsa\u201d, \u201ced25519\u201d, o \u201crsa\u201d. -b bits Especifica el n\u00famero de bits en la clave para crear. Para claves RSA, el tama\u00f1o m\u00ednimo es de 1024 bits y el predeterminado es de 2048 bits. -C \"Comentario\": Establece una etiqueta identificativa para esta clave Se transfiere la clave al host utilizando el comando local ssh-copy-id user@tuserver.example.com El comando ssh-copy-id pedir\u00e1 por \u00faltima la vez la clave y despu\u00e9s copiar\u00e1 nuestra clave al host de destino. ssh-add para que nuestro cliente ssh tenga en cuenta las nuevas claves generadas. Ya se puede conectar sin contrase\u00f1a utilizando ssh clientes.sugestionweb.com -l root Agregar las claves al ssh-agent \u00b6 Iniciar el agente SSH en segundo plano. $ eval \"$(ssh-agent -s)\" > Agent pid 59566 Agrega tu llave privada SSH al ssh-agent. Si creaste tu llave con un nombre distinto, o si est\u00e1s agregando una llave existente que tiene un nombre distinto, reemplaza id_rsa en el comando con el nombre de tu archivo de llave privada. $ ssh-add ~/.ssh/id_rsa Eliminar de local la clave ssh de un servidor \u00b6 ssh-keygen -f \"/root/.ssh/known_hosts\" -R 192.168.1.38 Deshabilitar autenticaci\u00f3n por passwords \u00b6 Primero copia de seguridad del fichero sshd_config actual y solo lectura con: sudo cp /etc/ssh/sshd_config /etc/ssh/sshd_config.factory-defaults sudo chmod a-w /etc/ssh/sshd_config.factory-defaults Para poder hacer util lo anteriormente mencionado dejaremos solo la autenticaci\u00f3n por clave eliminando la autenticaci\u00f3n por password para esto editaremos de nuevo /etc/ssh/sshd_config PasswordAuthentication no De est\u00e1 forma se elimina el impacto de ataques por fuerza bruta. No permitir logeo como root \u00b6 Puesto que root es el usuario con mas privilegios y el que se suele intentar explotar pues no permitiremos el logeo como root a\u00f1adiendo en /etc/ssh/sshd_config PermitRootLogin no Para reiniciar el servicio ssh despu\u00e9s de hacer cambios en la config. service ssh restart Banear a las ips que hacen mas de 5 logeos erroneos \u00b6 apt-get install fail2ban una vez instalado crearemos una directiva para ssh sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local nano /etc/fail2ban/jail.local Comprobamos la siguiente directiva [ssh]enabled = true port = ssh filter = sshd logpath = /var/log/auth.log maxretry = 5 reiniciamos fail2ban service fail2ban restart","title":"Ssh"},{"location":"kb/GNU-Linux/Seguridad/ssh/#ssh","text":"","title":"SSH"},{"location":"kb/GNU-Linux/Seguridad/ssh/#ssh-keys-y-seguridad-linux","text":"","title":"SSH Keys y seguridad linux"},{"location":"kb/GNU-Linux/Seguridad/ssh/#conectarse-sin-contrasenas","text":"Si nunca te has creado una llave ssh, elimina, si existe, en local la carpeta ~/.ssh En local ejecutamos los siguientes comandos para crearla de nuevo: mkdir ~/.ssh chmod 700 ~/.ssh Generar el par de claves RSA (p\u00fablica y privada): ssh-keygen -t rsa -b 4096 -C \"hola@example.com\" Nota -t indica el tipo de clave a generar, podr\u00eda ser \u201cdsa\u201d, \u201cecdsa\u201d, \u201ced25519\u201d, o \u201crsa\u201d. -b bits Especifica el n\u00famero de bits en la clave para crear. Para claves RSA, el tama\u00f1o m\u00ednimo es de 1024 bits y el predeterminado es de 2048 bits. -C \"Comentario\": Establece una etiqueta identificativa para esta clave Se transfiere la clave al host utilizando el comando local ssh-copy-id user@tuserver.example.com El comando ssh-copy-id pedir\u00e1 por \u00faltima la vez la clave y despu\u00e9s copiar\u00e1 nuestra clave al host de destino. ssh-add para que nuestro cliente ssh tenga en cuenta las nuevas claves generadas. Ya se puede conectar sin contrase\u00f1a utilizando ssh clientes.sugestionweb.com -l root","title":"Conectarse sin contrase\u00f1as"},{"location":"kb/GNU-Linux/Seguridad/ssh/#agregar-las-claves-al-ssh-agent","text":"Iniciar el agente SSH en segundo plano. $ eval \"$(ssh-agent -s)\" > Agent pid 59566 Agrega tu llave privada SSH al ssh-agent. Si creaste tu llave con un nombre distinto, o si est\u00e1s agregando una llave existente que tiene un nombre distinto, reemplaza id_rsa en el comando con el nombre de tu archivo de llave privada. $ ssh-add ~/.ssh/id_rsa","title":"Agregar las claves al ssh-agent"},{"location":"kb/GNU-Linux/Seguridad/ssh/#eliminar-de-local-la-clave-ssh-de-un-servidor","text":"ssh-keygen -f \"/root/.ssh/known_hosts\" -R 192.168.1.38","title":"Eliminar de local la clave ssh de un servidor"},{"location":"kb/GNU-Linux/Seguridad/ssh/#deshabilitar-autenticacion-por-passwords","text":"Primero copia de seguridad del fichero sshd_config actual y solo lectura con: sudo cp /etc/ssh/sshd_config /etc/ssh/sshd_config.factory-defaults sudo chmod a-w /etc/ssh/sshd_config.factory-defaults Para poder hacer util lo anteriormente mencionado dejaremos solo la autenticaci\u00f3n por clave eliminando la autenticaci\u00f3n por password para esto editaremos de nuevo /etc/ssh/sshd_config PasswordAuthentication no De est\u00e1 forma se elimina el impacto de ataques por fuerza bruta.","title":"Deshabilitar autenticaci\u00f3n por passwords"},{"location":"kb/GNU-Linux/Seguridad/ssh/#no-permitir-logeo-como-root","text":"Puesto que root es el usuario con mas privilegios y el que se suele intentar explotar pues no permitiremos el logeo como root a\u00f1adiendo en /etc/ssh/sshd_config PermitRootLogin no Para reiniciar el servicio ssh despu\u00e9s de hacer cambios en la config. service ssh restart","title":"No permitir logeo como root"},{"location":"kb/GNU-Linux/Seguridad/ssh/#banear-a-las-ips-que-hacen-mas-de-5-logeos-erroneos","text":"apt-get install fail2ban una vez instalado crearemos una directiva para ssh sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local nano /etc/fail2ban/jail.local Comprobamos la siguiente directiva [ssh]enabled = true port = ssh filter = sshd logpath = /var/log/auth.log maxretry = 5 reiniciamos fail2ban service fail2ban restart","title":"Banear a las ips que hacen mas de 5 logeos erroneos"},{"location":"kb/GNU-Linux/Sistema/Estructura%20de%20carpetas/","text":"Estructura de carpetas (FHS Filesystem Hierarchy Standard) \u00b6 Carpeta Descripci\u00f3n /bin binarios esenciales para que linux funcione /boot Im\u00e1genes de Kernel, datos del GRUB y todo lo necesario para que Linux arranque. /dev Son devices o dispositivos (si hacemos cat /dev/psaux y movemos el rat\u00f3n veremos lo que este env\u00eda. Ojo aqu\u00ed con root, un pipe al disco duro podr\u00eda cepillarse los datos /etc configuraciones de todos los programas que afectan a todos los usuarios passwd \u2192 fichero de contrase\u00f1as y usuarios del sistema config de Apache, mySQL, Tomcat, Crons del sistema etc\u2026 /home directorios personales de cada usuario del sistema /lib y /lib64 Librer\u00edas y librer\u00edas de 64 bits /lost + found Al hacer fsck, los trozos de ficheros que se encuentran van aqu\u00ed /media Aqu\u00ed se montan los ficheros de un pendrive o hd automaticamente /mnt Viene vac\u00edo por defecto y es para que el usuario pueda montar sistemas de archivos /opt Instalacion de programas sin repositorios /proc Es un directorio volatil, pseudo file-system Encontramos n\u00fameros que corresponden a los PID de los procesos por ej. cat /proc/cpuinfo nos dar\u00e1 info acerca de la CPU cat /proc/interrupts dentro de ACPI en un portatil tendremos battery e info de las bater\u00edas /root El usuario root es el \u00fanico que tiene la home separada /run Algunos procesos guardan un PID en /run para evitar que se hagan operaciones simultaneas que puedan afectar al sistema. Por ej. apt-get guarda un fichero aqu\u00ed para evitar que se ejecuten dos instancias simultaneas y evitar conflictos. /sbin Binarios de superusuario, por ej. subir el firewall, montar un disco etc. operaciones que un usuario raso no puede hacer. /srv Lugar espec\u00edfico de datos que son servidos por el sistema. /sys Una variante de /proc mas evolucionada /tmp un directorio temporal donde todo el mundo puede escribir, muchas apps lo usan para dejar datos temporales y lo podemos usar para dejar datos vol\u00e1tiles. Se borra de forma autom\u00e1tica en cada reinicio. /usr Contiene varios subdirectorios: /bin \u2192 programas que instalamos adicionalmente. /include y /lib \u2192 Librerias que no son esenciales para el sistema /sbin \u2192 utilidades de red y otras utils sin interfaz por ej. tcpdump, ufw /share \u2192 Datos que utiliza el sistema para todos los programas que hemos instalado /src \u2192 Archivos de c\u00f3digo fuente se colocan aqu\u00ed /local - /bin \u2192 Archivos de script que creemos van aqu\u00ed, datos locales de este servidor. /var almacena datos de cach\u00e9, registro de apt-get, logs, ficheros f\u00edsicos de bases de datos, permite diagnosticar el origen de un problema.Otras carpetas dentro de /var son: /lib/mysql \u2192 ficheros f\u00edsicos de la BD /log \u2192 Ficheros de registro /daemon.log \u2192 \u00bfAlgo no arranca? /mail \u2192 correo interno /spool \u2192 Tareas a la espera de ser ejecutadas, pool de impresi\u00f3n, correos pendientes, Cron de usuarios","title":"Estructura de carpetas"},{"location":"kb/GNU-Linux/Sistema/Estructura%20de%20carpetas/#estructura-de-carpetas-fhs-filesystem-hierarchy-standard","text":"Carpeta Descripci\u00f3n /bin binarios esenciales para que linux funcione /boot Im\u00e1genes de Kernel, datos del GRUB y todo lo necesario para que Linux arranque. /dev Son devices o dispositivos (si hacemos cat /dev/psaux y movemos el rat\u00f3n veremos lo que este env\u00eda. Ojo aqu\u00ed con root, un pipe al disco duro podr\u00eda cepillarse los datos /etc configuraciones de todos los programas que afectan a todos los usuarios passwd \u2192 fichero de contrase\u00f1as y usuarios del sistema config de Apache, mySQL, Tomcat, Crons del sistema etc\u2026 /home directorios personales de cada usuario del sistema /lib y /lib64 Librer\u00edas y librer\u00edas de 64 bits /lost + found Al hacer fsck, los trozos de ficheros que se encuentran van aqu\u00ed /media Aqu\u00ed se montan los ficheros de un pendrive o hd automaticamente /mnt Viene vac\u00edo por defecto y es para que el usuario pueda montar sistemas de archivos /opt Instalacion de programas sin repositorios /proc Es un directorio volatil, pseudo file-system Encontramos n\u00fameros que corresponden a los PID de los procesos por ej. cat /proc/cpuinfo nos dar\u00e1 info acerca de la CPU cat /proc/interrupts dentro de ACPI en un portatil tendremos battery e info de las bater\u00edas /root El usuario root es el \u00fanico que tiene la home separada /run Algunos procesos guardan un PID en /run para evitar que se hagan operaciones simultaneas que puedan afectar al sistema. Por ej. apt-get guarda un fichero aqu\u00ed para evitar que se ejecuten dos instancias simultaneas y evitar conflictos. /sbin Binarios de superusuario, por ej. subir el firewall, montar un disco etc. operaciones que un usuario raso no puede hacer. /srv Lugar espec\u00edfico de datos que son servidos por el sistema. /sys Una variante de /proc mas evolucionada /tmp un directorio temporal donde todo el mundo puede escribir, muchas apps lo usan para dejar datos temporales y lo podemos usar para dejar datos vol\u00e1tiles. Se borra de forma autom\u00e1tica en cada reinicio. /usr Contiene varios subdirectorios: /bin \u2192 programas que instalamos adicionalmente. /include y /lib \u2192 Librerias que no son esenciales para el sistema /sbin \u2192 utilidades de red y otras utils sin interfaz por ej. tcpdump, ufw /share \u2192 Datos que utiliza el sistema para todos los programas que hemos instalado /src \u2192 Archivos de c\u00f3digo fuente se colocan aqu\u00ed /local - /bin \u2192 Archivos de script que creemos van aqu\u00ed, datos locales de este servidor. /var almacena datos de cach\u00e9, registro de apt-get, logs, ficheros f\u00edsicos de bases de datos, permite diagnosticar el origen de un problema.Otras carpetas dentro de /var son: /lib/mysql \u2192 ficheros f\u00edsicos de la BD /log \u2192 Ficheros de registro /daemon.log \u2192 \u00bfAlgo no arranca? /mail \u2192 correo interno /spool \u2192 Tareas a la espera de ser ejecutadas, pool de impresi\u00f3n, correos pendientes, Cron de usuarios","title":"Estructura de carpetas (FHS Filesystem Hierarchy Standard)"},{"location":"kb/GNU-Linux/Sistema/Systemd/","text":"Systemd \u00b6 Introducci\u00f3n \u00b6 Systemd es varias cosas: El proceso Init (PID 1) del sistema El gestor de demonios Un intermediario entre aplicaciones de usuario y ciertas partes de la API del kernel de Linux Despu\u00e9s del Kernel0 es uno de los componentes mas importantes de Linux La configuraci\u00f3n general de systemd se encuentra en el archivo /etc/systemd/system.conf ; muchos valores por defecto est\u00e1n all\u00ed establecidos. Para saber la versi\u00f3n actual de systemd que hay funcionando el sistema, hacer systemctl --version Documentaci\u00f3n extensa sobre Systemd: https://freedesktop.org/wiki/Software/systemd/ \"Units\": tipos y ubicaci\u00f3n \u00b6 Todo lo que es gestionado por systemd se llama \"unit\" y cada \"unit\" es descrita por un archivo de configuraci\u00f3n propio, el cual tendr\u00e1 una extensi\u00f3n diferente seg\u00fan el tipo de de unidad que se trate: .service : Describe la configuraci\u00f3n de un demonio .socket : Describe la configuraci\u00f3n de un socket (de tipo UNIX o TCP / IP) asociado a un .service .device : Describe un dispositivo hardware reconocido por el kernel (v\u00eda udev o sysfs) gestionado por systemd .mount : Describe un punto de montaje gestionado por systemd .automount : Describe un punto de automontaje asociado a un .mount .swap : Describe una partici\u00f3n o archivo de intercambio gestionado por systemd .target : Define un grupo de Units (se utiliza a modo de \"metapaquete\" de Units) .path : Describe una carpeta o archivo monitorizado por la API Inotify del kernel .timer : Describe la temporizaci\u00f3n / activaci\u00f3n de una tarea programada (usando el programador systemd) .slice : Define un grupo de Units asociadas a procesos para administrar y limitar los recursos comunes (CPU, memoria, discos, red). Usa internamente los llamados \"cgroups\" del kernel Los archivos de configuraci\u00f3n de las Units (sean del tipo que sean) pueden estar repartidos en tres carpetas distintas: /usr/lib/systemd/system : Para Units proporcionadas por los paquetes instalados en el sistema /run/systemd/system : Para Units generadas en tiempo real durante la ejecuci\u00f3n del sistema. no persistentes /etc/systemd/system : Para Units proporcionadas por el administrador del sistema Los archivos en /etc/... sobreescriben los archivos hom\u00f3nimos que est\u00e9n en /run/... los cuales sobreescriben los que est\u00e9n en /usr/lib/... (o en algunas distribuciones, /lib/... ). Si no tienen el mismo nombre, todos los archivos de las tres carpetas se mezclan ordenados por su nombre de forma numericoalfab\u00e8tica y se van leyendo en este orden hasta el final. Por otra parte, si dentro de /usr/lib/... , /run/... o /etc/... hay una carpeta llamada como una unit seguido del sufijo \".d\", cualquier archivo con extensi\u00f3n * .conf que haya en su interior ser\u00e1 le\u00eddo justo despu\u00e9s de los ficheros de configuraci\u00f3n de la unit pertinente. Esto sirve para poder a\u00f1adir (o sobreescribir) opciones de configuraci\u00f3n concretas (las presentes en estos archivos) sin tener que tocar las configuraciones \"gen\u00e9ricas\" de la unit. por ejemplo: el archivo /usr/lib/systemd/system/beep.service.d/foo.conf puede ser \u00fatil para modificar la configuraci\u00f3n definida en /usr/lib/systemd/systemd/beep.service (y de este modo, hacer posible que un paquete pueda cambiar la configuraci\u00f3n establecida por otro) y el archivo /etc/systemd/system/beep.service.d/foo.conf puede ser \u00fatil para modificar la configuraci\u00f3n definida en /usr/lib/systemd/system/beep.service (y de este modo, hacer posible que un administrador pueda cambiar ciertas partes de la configuraci\u00f3n de la unit preempaquetada al sistema sin tener que reemplazar completamente). Estos archivos \"override\" (concretamente con el nombre /etc/systemd/system/nomUnit.d/override.conf ) se pueden generar de una manera muy c\u00f3moda y r\u00e1pida con la orden systemctl edit nomUnit Algunas \"units\" contienen un s\u00edmbolo @ en su nombre (por ejemplo, nom@cadena.service ); esto significa que son instancias de una unit-plantilla, el archivo de configuraci\u00f3n de la cual es el que no contiene la parte \"Cadena\" en su nombre (as\u00ed: nombre @.service). La parte \"cadena\" es el identificador de la instancia (de hecho, dentro del archivo de configuraci\u00f3n de la unit-plantilla el valor \"cadena\" sustituye todas las ocurrencias del especificador especial %i). Comandos para gestionar Units \u00b6 A continuaci\u00f3n algunos de los comandos m\u00e1s importantes para gestionar Units principalmente (No exclusivamente) de tipo \"service\": systemctl [list-Units] [-t {service | socket | ...}] [--all | --failed | --state = inactive] Muestra el estado de las Units que est\u00e1n \"activas\" (del tipo indicado, si no se indica, aparecen todas). Si se escribe --state = inactive se muestra el estado de las Units que est\u00e1n \"inactivas\" Como valor del par\u00e1metro --state tambi\u00e9n se puede poner cualquier valor v\u00e1lido de la columna SUB Si se escribe --failed se muestra el estado de todas las Units con errores Si se escribe --all se muestra el estado de todas las Units ( \"activas\", \"inactivas\", con errores y otros) -La diferencia entre las columnas LOAD, ACTIVE y SUB la dice la salida de la propia comando: LOAD = Indica si la Unit ha sido cargada en RAM. Posibles valores: \"loaded\", \"error\", \"Masked\" ACTIVE = Estado gen\u00e9rico de la unit. Posibles valores: \"active\", \"inactive\", \"failed\", \"(des) activating\" SUB = Estado m\u00e1s concreto de la unit, depende del tipo de unit, posibles valores \"plugged\", \"mounted\", \"running\", \"exited\", \"waiting\", \"listening\", etc systemctl [-t {service | socket | ...}] list-unit-files El subcomando list-units s\u00f3lo muestra las units que systemd ha intentado leer y cargar en memoria. Ya que systemd s\u00f3lo lee las units que \u00e9l piensa que necesita, as\u00ed no incluye necesariamente todas las units disponibles en el sistema. Para ver todas las units, incluyendo aquellas que systemd no ha intentando ni siquiera cargar, hay que utilizar list-unit-files . Este subcomando muestra el \"estado de carga\" de cada unit y sus posibles valores son: \"enabled\" o \"enabled-runtime\" : La unit se activar\u00e1 en el siguiente reinicio -y subsiguientes-. NOTA Esto se consigue gracias a la existencia de un enlace al archivo de configuraci\u00f3n de la unit en cuesti\u00f3n dentro de la carpeta /etc/systemd/system/nomTarget.target.wants , creado en alg\u00fan momento previo con el comando systemctl enable (ver m\u00e1s abajo) o de forma manual con ln -s \"static\" : La unit no tiene secci\u00f3n \"[Install]\" en su archivo de configuraci\u00f3n. Esto hace que los comandos systemctl enable (y sobre todo systemctl disable ) no funcionen. Por tanto, el hecho de que la unit est\u00e9 activada o no en un determinado \"target\" depender\u00e1 de la existencia \"est\u00e1tica\" de su enlace correspondiente dentro de la carpeta /etc/systemd/system/nomTarget.target.wants . Este tipo de units suelen estar asociadas a las que realizan una acci\u00f3n \"oneshot\" o bien a las que son usadas s\u00f3lo como dependencia de alguna otra unit (y por tanto no deben ejecutarse por s\u00ed mismas) \"generated\" : La unit se activar\u00e1 mediante un mecanismo autom\u00e1tico especial llamado \"generator\", ejecutado al arrancar el sistema. Cada unit en este estado tiene su propio \"generator\". \"transient\" : La unit es temporal y no sobrevivir\u00e1 al siguiente reinicio \"disabled\" : La unit est\u00e1 desactivada y, por tanto, no se pondr\u00e1 en marcha en los siguientes reinicios (gracias a la inexistencia del enlace correspondiente dentro de /etc/systemd/system/nomTarget.target.wants ). Tampoco podr\u00e1 ser iniciada autom\u00e1ticamente mediante otros sistemas (como v\u00eda socket, v\u00eda D-Bus o bien v\u00eda conexi\u00f3n de hardware. No obstante, podr\u00e1 ser puesta en marcha en cualquier momento \"manualmente\" ejecutando systemctl start ( ver m\u00e1s abajo) \"Masked\" o \"Masked-runtime\" : La unit est\u00e1 Enmascarada (es decir, est\u00e1 desactivada y, por tanto, no se pondr\u00e1 en marcha en los siguientes reinicios ni autom\u00e1ticamente, pero adem\u00e1s, tampoco podr\u00e1 ser puesta nunca en marcha manualmente con systemctl start ni siquiera si es una dependencia de otro servicio) systemctl {start | stop | restart} nomUnit[.service] Activa / Desactiva / Reiniciar la unit indicada inmediatamente siguiendo las indicaciones escritas en su archivo de configuraci\u00f3n correspondiente. !!! note \"NOTA\" Si la unit no fuera de tipo \".service\", entonces habr\u00e1 que indicar su tipo expl\u00edcitamente \u00faltima su nombre (por ejemplo, systemctl start nomUnit.socket ). Esta norma es extensiva para el resto de comandos systemctl {enable | disable} nomUnit[.service] Activar\u00e1 / desactivar\u00e1 autom\u00e1ticamente la unit indicada a partir del siguiente reinicio (y siguientes) !!! note \"NOTA\" En realidad lo que hace enable / disable es crear / eliminar un enlace dentro de la carpeta /etc/systemd/systemd/nomTarget.target.wants al archivo de configuraci\u00f3n de la unit en cuesti\u00f3n (donde \"nomTarget\" viene definido en la directiva WantedBy de la secci\u00f3n \"[Install]\" de dicho archivo). systemctl {mask | unmask} nomUnit [.service] Enmascara / desenmascarar la unit indicada. !!! note \"NOTA\" Esto lo consigue vinculando el archivo de configuraci\u00f3n ubicado en /etc/... de la unit en cuesti\u00f3n a /dev/null systemctl is-enabled nomUnit[.service] Devuelve $? = 0 si la unit indicada est\u00e1 configurada para activarse en los siguientes reinicios (es decir, si est\u00e1 en los estados listados para systemctl list-unit-files : \"enabled\", \"enabled-runtime\", \"static\", \"Generated\" o \"transient\") y adem\u00e1s, muestra en pantalla este estado. systemctl is-active nomUnit [.service] Devuelve $? = 0 si la unit indicada est\u00e1 activa y, adem\u00e1s, muestra en pantalla este estado (valor listado en la columna ACTIVE de systemctl list-units) systemctl is-failed nomUnit[.service] Devuelve $? = 0 si la unit indicada fall\u00f3 al intentar activarse y, adem\u00e1s, muestra en pantalla este estado. Si no queremos que se muestren los estados en pantalla (esto tambi\u00e9n por is-enabled y is-active ), se puede a\u00f1adir el par\u00e1metro -q NOTA Una unit puede estar en estado \"failed\" por m\u00faltiples razones: porque el proceso ha terminado con un c\u00f3digo de error diferente de 0, porque ha finalizado de forma anormal, porque se ha superado un timeout determinado, etc. systemctl status {nomUnit [.service] | PID} Muestra el estado e informaci\u00f3n variada sobre la Unit o proceso indicado. Si se indica una unit se puede ver ...: Loaded: loaded (/usr/lib/systemd/system/cups.service; enabled; vendor preset: disabled) Active: active (running) since Sat 2017-11-18 20:48:06 CET; 4h 2min agosto Docs: man: cupsd (8) Main PID : 745 (cupsd) Status: \"Scheduler is running ...\" Tasks: 1 (l\u00edmite: 4915) CGroup: /system.slice/cups.service \u2514\u2500745 / usr / sbin / cupsd -l \u00daltimas l\u00edneas de journald -u (se puede usar los par\u00e1metros hom\u00f3nimos -n n\u00ba y -o xxx) Los valores para la l\u00ednea \"Loaded:\" son los mismos que aparecen en la columna LOAD de list-units Seguidamente se indican los valores del estado actual y el predefinido por paquete, que ser\u00e1n uno de los detallados anteriormente al hablar de list-unit-files Los valores para la l\u00ednea \"Active:\" son los mismos que aparecen en la columna ACTIVE de list-Units El punto ( \"\u25cf\") es blanco si la unit est\u00e1 \"inactive\"; rojo si \"failed\" o verde si \"active\" Si se indica un PID en vez de una unit, se puede ver la misma informaci\u00f3n, pero esta manera puede ser \u00fatil para conocer la unit a la que est\u00e1 asociado un determinado proceso, por ejemplo (aunque para conocer esta informaci\u00f3n tambi\u00e9n se podr\u00edan observar los valores de la columna \"unit\" mostrada para el comando ps -o si as\u00ed se indica con el par\u00e1metro -o ): cups.service - CUPS Scheduler Loaded: loaded ( /usr/lib/systemd/system/cups.service ; enabled; vendor preset: Active: active (running) since Sat 2017-11-18 20:48:06 CET; 4h 2min agosto Docs: man: cupsd (8) Main PID: 745 (cupsd) Status: \"Scheduler is running ...\" Tasks: 1 (l\u00edmite: 4915) CGroup: /system.slice/cups.service \u2514\u2500745 / usr / sbin / cupsd -l \u00daltimas l\u00edneas de journald _PID = (se puede usar los par\u00e1metros hom\u00f3nimos -n n\u00ba y -o xxx) systemctl show {nomUnit [.service] | PID} Muestra la configuraci\u00f3n actual de la Unit (obtenida a partir del archivo general system.conf y del archivo de configuraci\u00f3n propio de la unit) indicada en un formato adecuado para ser procesado por m\u00e1quinas. con el par\u00e1metro -p \"nomClave, OtroNombre,... se pueden obtener s\u00f3lo las parejas clave <-> valor deseadas. systemctl daemon-reload Actualizar todos los archivos de configuraci\u00f3n de Units nuevas o modificadas desde la \u00faltima vez que se puso en marcha systemd (incluyendo los generators). systemctl help nomUnit [.service] Abre la p\u00e1gina man asociada a la Unit indicada (en su fichero de configuraci\u00f3n debe venir indicada) systemctl edit nomUnit [.service] Crea (con el editor de texto predeterminado del sistema) un fichero de configuraci\u00f3n (inicialmente vac\u00edo) para la Unit indicada llamado /etc/systemd/system/nomUnit.tipusUnit.d/override.conf para sobrescribir (o ampliar) la configuraci\u00f3n ya existente por ella. Una vez guardados los cambios, recarga la Unit autom\u00e1ticamente con esta nueva configuraci\u00f3n. Si se quisiera editar directamente el archivo /etc/systemd/system/nomUnit.tipoUnit , hay que a\u00f1adir entonces el par\u00e1metro --full systemctl cat nomUnit [.service] Muestra la configuraci\u00f3n final actual resultante de haber le\u00eddo los diferentes ficheros de configuraci\u00f3n posibles de la Unit indicada systemd-delta Muestra qu\u00e9 archivos de configuraci\u00f3n de Units est\u00e1n sobreescritos o ampliados (de /usr /lib a /etc y / o con archivos \"overrides\"), enmascarados, redireccionados (con la l\u00ednea Alias \u200b\u200b= de la secci\u00f3n [Install]), etc y por cu\u00e1les systemctl kill [--signal = n\u00ba] nomUnit [.service] Env\u00eda una se\u00f1al concreta (indicada con el par\u00e1metro --signal ; por defecto es la n\u00ba15, SIGTERM) a todos los procesos asociados a la Unit indicada. !!! note \"NOTA\" kill goes directly and sends a signal to every process in the group, however stop goes through the official configured way to shut down a service, i.e. invokes the stop command configured with ExecStop= in the service file. Usually stop should be sufficient. kill is the tougher version, for cases where you either don't want the official shutdown command of a service to run, or when the service is hosed and hung in other ways. Servicios Systemd por Usuario \u00b6 Systemd tambi\u00e9n permite definir servicios para que no est\u00e9n asociados al sistema global sino que \u00fanicamente formen parte de la sesi\u00f3n de un usuario est\u00e1ndar, gener\u00e1ndose una instancia particular del servicio para cada usuario activo en la m\u00e1quina. De este modo, cada instancia se iniciar\u00e1 autom\u00e1ticamente despu\u00e9s de iniciar la sesi\u00f3n de un usuario y se parar\u00e1 al salir. !!! note \"NOTA\" Esto es posible gracias a que justo despu\u00e9s del primer inicio de sesi\u00f3n que se realice al sistema se pone en marcha (gracias al m\u00f3dulo PAM \"pam_systemd\") el comando systemd -user ( que es quien permitir\u00e1 este funcionamiento individual para todas las sesiones de usuarios que se inicien a partir de entonces), adem\u00e1s del proceso con PID 1 propiamente dicho, que es systemd -system . El proceso systemd -user finalizar\u00e1 autom\u00e1ticamente justo despu\u00e9s de haberse cerrado el \u00faltimo inicio de sesi\u00f3n existente al sistema. Los ficheros de configuraci\u00f3n de las Units \"de tipo usuario\" se encuentran en otras carpetas separadas de las de las Units \"de sistema\". Concretamente (se muestran en orden de precedencia ascendente): /usr/lib/systemd/user : Para Units proporcionados por los paquetes instalados en el sistema ~/.local/share/systemd/user : Para Units de paquetes que han sido instaladas en la carpeta personal /etc/systemd/user : Para Units proporcionados por administrador del sistema ~/.config/systemd/user : Para Units construidas por el propio usuario !!! note \"NOTA\" La variable especial %h se puede utilizar dentro de los archivos de configuraci\u00f3n de las Units \"de usuario\" para indicar la ruta de la carpeta personal del usuario en cuesti\u00f3n. Otra caracter\u00edstica de las Units \"de usuario\" es que pueden ser gestionadas por parte de este usuario sin que deba ser administrador del sistema; esto lo puede hacer con las mismas \u00f3rdenes systemctl... ya conocidas a\u00f1adiendo el par\u00e1metro --user . As\u00ed, por ejemplo, para arrancar un servicio autom\u00e1ticamente cada vez que se inicie nuestra sesi\u00f3n habr\u00e1 que ejecutar systemctl --user enable nomUnit ; para ver el estado de todas nuestras Units \"de usuario\" habr\u00e1 que hacer systemctl --user list-units ; para recargar las Units modificadas habr\u00e1 que hacer systemctl --user daemon-reload , etc Ejemplo de servicio por usuario para mkDocs Autoarrancable al iniciar sesi\u00f3n \u00b6 Crearemos un servicio de usuario que permitir\u00e1 arrancar el comando mkdocs con la opci\u00f3n serve y har\u00e1 disponible de forma autom\u00e1tica el servidor web incorporado de mkDocs para consultar estas notas. Creamos un fichero ~/.config/systemd/user/docs.service con el contenido: [Unit] Description = MkDocs Notas [Service] Type = simple ExecStart = /usr/local/bin/mkdocs serve -f /home/javier/Documentos/Documentos/docs/mkdocs.yml [Install] WantedBy = multi-user.target * A continuaci\u00f3n recargamos las units con el comando reload, activamos el servicio para sucesivos reinicios y hacemos que arranque, con los siguientes comandos: systemctl --user daemon-reload systemctl --user enable docs systemctl --user start docs !!! note \"Nota\" observa el uso del par\u00e1metro --user en los coomandos anteriores, lo cual indica que las operaciones solo afectan al usuario actual, no a todo el sistema. ##Ficheros configuraci\u00f3n de Units Estructura interna \u00b6 La estructura interna de los archivos de configuraci\u00f3n de las Units est\u00e1 organizada en secciones, distinguidas cada una por un encabezamiento sensible a may\u00fasculas y min\u00fasculas rodeado de corchetes ( [Encabezamiento] ). Dentro de las secciones se definen diferentes directivas (tambi\u00e9n may\u00fasculas y min\u00fasculas) en la forma de parejas NomDirectiva = valor , donde el valor puede ser una palabra, una frase, una ruta, un n\u00famero, true/yes, false/no, una fecha, etc, dependiendo de su significado. !!! note \"NOTA\" NOTA: Tambi\u00e9n pueden existir directivas donde no se escriba ning\u00fan valor (es decir, as\u00ed: NomDirectiva = ). En este caso, se estar\u00e1 \"Reseteando\" (es decir, anulando) el valor que previamente se hubiera dado en otro sitio ####Secci\u00f3n [Unit] La primera secci\u00f3n (aunque el orden no importa) suele ser la llamada [Unit] y se utiliza para definir datos sobre la propia Unit en s\u00ed y la relaci\u00f3n que tiene con otras Units. algunas de sus directivas m\u00e1s habituales son: Description = Una breve descripci\u00f3n de la Unit Su valor es devuelto por diferente herramientas systemd * Documentation = man: sshd (8) https: //ruta/pag.html Proporciona una lista de URIS que apuntan a documentaci\u00f3n de la Unit. El comando systemctl status las muestra * Wants = unservicio.service otro.servicio untarget.target ... Lista las Units que deber\u00edan estar iniciadas para que el Unit en cuesti\u00f3n pueda funcionar correctamente. Si no lo est\u00e1n ya, systemd las iniciar\u00e1 en paralelo junto con el Unit en cuesti\u00f3n; si se quiere indicar un cierto orden en vez de iniciar todas en paralelo, se puede utilizar las directivas After = o Before =. Si alguna de las Units listadas falla al iniciarse, el Unit en cuesti\u00f3n se iniciar\u00e1 igualmente * Requires = unservicio.service otro.service untarget.target ... Lista las Units que imprescindiblemente deben estar iniciadas para que el Unit en cuesti\u00f3n pueda funcionar correctamente. Si no lo est\u00e1n ya, systemd las iniciar\u00e1 en paralelo junto con el Unit en cuesti\u00f3n; si se quiere indicar un cierto orden en vez de iniciar todas en paralelo, se puede utilizar las directivas After = o Before =. Si alguna de las Units listadas falla al iniciarse, el Unit en cuesti\u00f3n tambi\u00e9n fallar\u00e1 autom\u00e1ticamente * BindsTo = unservei.service unaltre.service untarget.target ... Similar a Requires = pero, adem\u00e1s, hace que el Unit en cuesti\u00f3n se detenga autom\u00e1ticamente si alguna de las Units asociadas finaliza. * Before = unservei.service unaltre.service untarget.target ... Indica, de las Units listadas en las directivas Wants = o Requires =, qu\u00e9 no se iniciar\u00e1n en paralelo sino tras la Unit en cuesti\u00f3n. Si aqu\u00ed se indicara alguna Unit que no se encontrara listada en Wants = o Requires =, esta directiva no se tendr\u00e1 en cuenta. * After = unservei.service unaltre.service untarget.target ... Indica, de las Units listadas en las directivas Wants = o Requires =, qu\u00e9 no se iniciar\u00e1n en paralelo sino antes de la Unit en cuesti\u00f3n. Si aqu\u00ed se indicara alguna Unit que no se encontrara listada en Wants = o Requires =, esta directiva no se tendr\u00e1 en cuenta. !!! note \"NOTA\" Lo m\u00e1s t\u00edpico es tener una Unit A que necesita que la Unit B est\u00e9 funcionando previamente para poderse poner en marcha. En este caso, simplemente habr\u00eda que a\u00f1adir las l\u00edneas Requires = B y After = B en la secci\u00f3n [Unit] del Unit A. Si la dependencia es opcional, se puede sustituir Requires = B por Wants = B Conflicts = unservei.service unaltre.service ... Lista las Units que no pueden estar funcionando a la vez que el Unit en cuesti\u00f3n. iniciar una Unit con esta directiva causar\u00e1 que las aqu\u00ed listadas se detengan autom\u00e1ticamente. ConditionXXXX = ... Hay un conjunto de directivas que empiezan por \"Condition\" que permiten al administrador comprobar ciertas condiciones antes de iniciar el Unit. Si la condici\u00f3n no se cumple, la Unit es ignorada. Algunos ejemplos son: ConditionKernelCommandLine = param [= valor] ConditionACPower = {yes | no} ConditionPathExists = [!] / Ruta / archivo / o / carpeta ConditionPathExistsGlob = [!] / Ruta / archivos / o / carpetas ConditionPathIsDirectory = [!] / Ruta / carpeta ConditionPathIsSymbolicLink = [!] / Ruta / enlace ConditionPathIsMountPoint = [!] / Ruta / carpeta ConditionPathIsReadWrite = [!] / Ruta / archivo / o / carpeta ConditionDirectoryNotEmpty = [!] / Ruta / carpeta ConditionFileNotEmpty = [!] / Ruta / archivo ConditionFileIsExecutable = [!] / Ruta / archivo AssertXXXX = ... Al igual que con \"ConditionXXX\", hay un conjunto de directivas que empiezan por \"Assert\" que permiten al administrador comprobar ciertas condiciones antes de iniciar el Unit. la diferencia es que aqu\u00ed, si la condici\u00f3n no se cumple, se emite un error. .OnFailure = unaunit.service otro.service ... Indica las Units que se activar\u00e1n cuando la Unit en cuesti\u00f3n entre en estado \"failed\". esta directiva puede utilizarse, por ejemplo, para ejecutar una Unit que env\u00ede un correo electr\u00f3nico cuando la Unit en cuesti\u00f3n, que podr\u00e1 ser un servicio, falle. AllowIsolate = yes Esta directiva s\u00f3lo tiene sentido para Units de tipo target. Si su valor es \"yes\" (por defecto es \"no\") indica que el target en cuesti\u00f3n admitir\u00e1 que se le aplique el comando systemctl Isolate (ver m\u00e1s abajo) ####Secci\u00f3n [Install] Por otra parte, la \u00faltima secci\u00f3n (aunque el orden no importa) de un archivo de configuraci\u00f3n de una Unit siempre suele ser la llamada [ Install ] , la cual, atenci\u00f3n, es opcional. Se utiliza para definir c\u00f3mo y cuando la Unit puede ser activada o desactivada. Algunas de sus directivas m\u00e1s habituales son: WantedBy = untarget.target unaltre.target ... Indica los targets donde el Unit en cuesti\u00f3n se activar\u00e1 al ejecutar el comando systemctl enable Cuando se ejecuta este comando, lo que pasa es que por cada target indicado aqu\u00ed aparecer\u00e1,dentro de cada carpeta /etc/systemd/system/nomTarget.wants respectiva, un enlace simb\u00f3lico apuntando al propio archivo de configuraci\u00f3n del Unit en cuesti\u00f3n. La existencia de este enlace es el que realmente activa de forma efectiva un servicio autom\u00e1ticamente. Eliminar los links de todas las carpetas \"nomTarget.wants\" pertinentes implica desactivar la Unit (que es lo que hace, de hecho,el comando systemctl disable a partir de la lista de targets que encuentra en la l\u00ednea WantedBy = ). Por ejemplo, si el archivo de configuraci\u00f3n de la Unit en cuesti\u00f3n (que llamaremos pepito.service) tiene una l\u00ednea como WantedBy = multi-user.target, al ejecutar systemctl enable pepito.service aparecer\u00e1 dentro de la carpeta /etc/systemd/system/multi-user.wants un link apuntando a este archivo de configuraci\u00f3n * RequiredBy = untarget.target unaltre.target ... Similar a WantedBy = pero donde el fallo del Unit en cuesti\u00f3n al ejecutar systemctl enable har\u00e1 que los targets indicados aqu\u00ed no puedan llegar a alcanzarse. La carpeta donde se encuentra el link de la Unit en este caso se denomina /etc/systemd/system/nomTarget.requires * Alias \u200b\u200b= unaltrenom.tipusUnit Permite al Unit en cuesti\u00f3n ser activada con systemctl enable utilizando otro nombre diferente * Also = unservei.service unaltre.service ... Permite activar o desactivar diferentes Units como conjunto. La lista debe consistir en todas las Units que tambi\u00e9n se quieren tener habilitadas cuando la Unit en cuesti\u00f3n est\u00e9 habilitada ####Secci\u00f3n [Service] (para Units de tipo .service): Dependiendo del tipo de Unit que tengamos nos podremos encontrar con diferentes secciones espec\u00edficas dentro de su fichero de configuraci\u00f3n, normalmente escritas entre la secci\u00f3n [Unit] el principio y la secci\u00f3n [Install] del final (si existe). En el caso de las Units de tipo \"service\", por ejemplo, nos encontramos con la secci\u00f3n espec\u00edfica llamada [Service] , la cual puede incluir diferentes directivas como las siguientes: !!! note \"NOTA\" Las Units de tipo device, snapshot y target no tienen secciones espec\u00edficas Type = maneraDarrancar Existen diferentes m\u00e9todos para iniciar un servicio, y el m\u00e9todo elegido, el cual depender\u00e1 del tipo de ejecutable a poner en marcha, se indicar\u00e1 en esta directiva. Las posibilidades m\u00e1s comunes son: * simple : El servicio nativamente se queda en primer plano de forma indefinida y es systemd quien lo pone en segundo plano (le crea un fichero PID, lo para cuando sea necesario, etc). Systemd interpreta que el servicio est\u00e1 listo luego que el ejecutable asociado se pone en marcha (aunque esto sea demasiado pronto para que no est\u00e9 listo todav\u00eda para recibir peticiones) * forking : El servicio nativamente ya se pone en segundo plano. Systemd interpreta que el servicio est\u00e1 listo cuando pasa efectivamente a segundo plano. En este caso conviene indicar tambi\u00e9n la directiva PidFile=/ruta/fitxer.pid para que systemd tenga un control sobre qu\u00e9 proceso es el que est\u00e1 en segundo plano y lo pueda identificar * oneshot : \u00datil para scripts, que se ejecutan (haciendo systemctl start igualmente) una vez y finalizan.Systemd esperar\u00e1 hasta que el proceso finalice e interpreta que est\u00e1 listo cuando haya finalizado. Se puede considerar el uso de la directiva RemainAfterExit = yes para \"enga\u00f1ar\" a systemd dici\u00e9ndole que el servicio contin\u00faa activo aunque el proceso haya finalizado; en este caso, la directiva ExecStop = no se llegar\u00e1 a hacer efectiva nunca. Tambi\u00e9n est\u00e1n las posibilidades dbus (similar a \"simple\" pero systemd interpreta que est\u00e1 listo cuando el nombre indicado en BusName = ha sido adquirido), idle (similar a \"simple\" pero con la ejecuci\u00f3n retrasada hasta que no se ejecute nada m\u00e1s; se puede utilizar este m\u00e9todo, por ejemplo, para emitir un sonido justo despu\u00e9s de la finalizaci\u00f3n del arranque del sistema.) y notify (El sistema m\u00e1s completo, donde se establece un canal de comunicaci\u00f3n interno entre el servicio y Systemd para notificarse estados y eventos v\u00eda la API propia de systemd sd_notify () y donde Systemd interpreta que est\u00e1 listo cuando recibe el estado correspondiente a trav\u00e9s de este canal; si queremos que scripts utilicen este m\u00e9todo hay que usar el comando systemd-notify ) * ExecStart = /ruta/ejecutable param1 param2 ... Indica el comando (y par\u00e1metros) a ejecutar cuando se realiza un systemctl start Si la ruta de el ejecutable comienza con un gui\u00f3n ( \"-\"), valores de retorno del comando diferentes de 0 (que normalmente se considerar\u00edan se\u00f1al de error) se considerar\u00e1n como v\u00e1lidos. !!! note \"Nota\" Podemos utilizar incluso la directiva SuccessExitStatus = para indicar qu\u00e9 valor consideramos como salida exitosa del programa !!! note \"Nota\" No habr\u00eda que escribir la ruta absoluta del ejecutable si \u00e9sta se encuentra en la lista de rutas que muestra el comando systemd-path , pero en general se recomienda escribirla para evitar sorpresas !!! note \"Nota\" No se permiten escribir redireccionador ( \">\", \">>\", \"<\". \"|\") Ni el s\u00edmbolo \"&\" para pasar a segundo plano * ExecStartPre = /ruta/ejecutable param1 param2 ... Indica el comando (y par\u00e1metros) a ejecutar antes de lo indicado en ExecStart. pueden haber m\u00e1s de una l\u00ednea ExecStartPre en el mismo archivo, ejecut\u00e1ndose entonces cada una por orden. la ruta del ejecutable tambi\u00e9n puede ir precedida de un gui\u00f3n ( \"-\"), con el mismo significado * ExecStartPost = / ruta / ejecutable param1 param2 ... Indica el comando (y par\u00e1metros) a ejecutar despu\u00e9s de la indicada en ExecStart. pueden haber m\u00e1s de una l\u00ednea ExecStartPost en el mismo archivo, ejecut\u00e1ndose entonces cada por orden. un ejemplo de posible uso: el env\u00edo de un correo justo despu\u00e9s de haberse puesto en marcha el servicio correspondiente.La ruta del ejecutable tambi\u00e9n puede ir precedida de un gui\u00f3n ( \"-\"), con el mismo significado * ExecStop = /ruta/ejecutable param1 param2 ... Indica el comando (y par\u00e1metros) a ejecutar cuando se realiza un systemctl stop Hay que tener en cuenta que en el caso de un servicio de tipo \"oneshot\", si no se especifica la directiva RemainAfterExit = yes , el comando indicada en ExecStop se ejecutar\u00e1 autom\u00e1ticamente justo tras ExecStart. * ExecStopPost = / ruta / ejecutable param1 param2 ... Indica el comando (y par\u00e1metros) a ejecutar despu\u00e9s de lo indicado en ExecStop. pueden haber m\u00e1s de una l\u00ednea ExecStartPost al mismo archivo, ejecut\u00e1ndose entonces cada por orden. * Restart = {always | no | on-success | on-failure | ...} Indica las circunstancias bajo las que systemd intentar\u00e1 reiniciar autom\u00e1ticamente un servicio que haya finalizado. En concreto, el valor \"always\" indica que en cualquier tipo de finalizaci\u00f3n se volver\u00e1 a intentar reiniciar; el valor \"no\" indica que en ning\u00fan finalizaci\u00f3n intentar\u00e1 reiniciar, el valor \"on-success\" indica que s\u00f3lo se intentar\u00e1 reiniciar si la finalizaci\u00f3n ha sido correcta y \"on-failure\" si la finalizaci\u00f3n no lo ha sido debido a cualquier tipo de fallo (ya sea que se ha sobrepasado el tiempo de espera del arranque o el apagado, que se ha devuelto un valor diferente de 0, etc) !!! note \"Nota\" Se podr\u00eda dar el caso de que un servicio estuviera reinici\u00e1ndose todo el rato. Con StartLimitBurts = se puede configurar el n\u00famero m\u00e1ximo de veces que se quiere que se reinicie y con StartLimitIntervalSec = se puede configurar el tiempo durante el cual se contar\u00e1 este n\u00famero m\u00e1ximo de veces. Si se llega a este n\u00famero dentro de este tiempo, el servicio no se volver\u00e1 a reiniciar autom\u00e1ticamente y tampoco se podr\u00e1 iniciar manualmente hasta pasado el tiempo indicado (momento en el que se vuelve a contar). Tambi\u00e9n existe la directiva StartLimitAction = , que sirve para indicar la acci\u00f3n a realizar cuando se alcanza el n\u00famero m\u00e1ximo de reinicios; su valor por defecto es \"None\" pero puede valer tambi\u00e9n \"reboot\" (reinicio limpio), \"reboot-force\" (reinicio abrupto) y \"reboot-immediate\" (reinicio muy abrupto) * RestartSec = n\u00bas Indica el n\u00famero de segundos que systemd esperar\u00e1 al reiniciar el servicio despu\u00e9s de que haya detenido (si as\u00ed lo marca la directiva Restart =). * TimeoutSec = n\u00ba Indica el n\u00famero de segundos que systemd esperar\u00e1 a que el servicio en cuesti\u00f3n inicie o detenga antes de marcarlo como \"failed\" (y reiniciarlo si fuera el caso debido a la configuraci\u00f3n de la directiva Restart =). Se puede indicar espec\u00edficamente un tiempo de espera s\u00f3lo para el inicio con la directiva TimeoutStartSec = y otro tiempo de espera diferente por el apag\u00f3n con la directiva TimeoutStopSec = . Si no se especifica nada, se toma el valor por defecto (5 min) que est\u00e1 indicado en /etc/systemd/system.conf * RemainAfterExit = yes Tal como ya lo hemos comentado, esta directiva se utiliza en servicios de tipo \"oneshot\" para que la directiva ExecStop = no se ejecute al terminar la ejecuci\u00f3n del comando sino al hacer systemctl stop * PidFile = /ruta/fitxer.pid Tal como ya lo hemos comentado, esta directiva se utiliza en servicios de tipo \"forking\" para se\u00f1alar a systemd cu\u00e1l ser\u00e1 el archivo PID utilizado por el servicio de manera que pueda controlar m\u00e1s f\u00e1cilmente. * User = unusuari * Group = ungrup Set the user or group that the processes are executed as, respectively. They can take a single user/group name, or a numeric ID as argument. For system services (services run by the system service manager, i.e. managed by PID 1) the default is \"root\". For user services of any other user, switching user identity is not permitted, hence the only valid setting is the same user the user's service manager is running as. If no group is set, the default group of the user is used. * WorkingDirectory = / ruta / carpeta Indica el directorio de trabajo del servicio en cuesti\u00f3n. Si no se especifica esta directiva, el valor por defecto es \"/\" (en el caso de servicios de sistema) o $ HOME (en el caso de servicios de usuario , es decir, iniciados con --user -). Si la ruta se precede con un s\u00edmbolo \"-\", el hecho de que la carpeta correspondiente no exista no se interpretar\u00e1 como un error. Si se ha indicado la directiva User =, se puede escribir \"~\" como valor de esta directiva, equivalente as\u00ed a la ruta de la carpeta personal del usuario indicado en User =. * StandardOutput = {null | tty | journal | socket} Indica donde se imprimir\u00e1 la salida est\u00e1ndar de los programas indicados en las directivas ExecStart =, y ExecStop =. El valor \"null\" representa el destino / dev / null. El valor \"tty\" representa un terminal (ya sea de tipo virtual - / dev / ttyX- o pseudo - / dev / pts / X-), el cual deber\u00e1 ser especificado mediante la directiva TTYPath = . El valor \"journal\" es el valor por defecto (es decir, que si el programa en cuesti\u00f3n imprimiera algo en la pantalla del terminal al ejecutarse en primer plano, esta salida se redireccionar\u00e1 el Journal en ejecutarse v\u00eda un archivo .service). El valor \"socket\" sirve para indicar que la salida debe enviarse al socket asociado al servidor con el fin de viajar al otro extremo de la comunicaci\u00f3n (ver m\u00e1s adelante). !!! note \"NOTA\" NOTA: El hecho de que por defecto la salida est\u00e1ndar vaya a parar en el Journal se puede cambiar de forma general para todas las Units en la directiva DefaultStandardOutput del archivo /etc/systemd/system.conf !!! note \"NOTA\" Tambi\u00e9n existe la directiva StandardError = {null | tty | journal | socket} , similar a StandardOutput = pero para la salida de error ###EJERCICIOS Todos los ejercicios se har\u00e1n en una m\u00e1quina virtual donde el usuario pueda tener permisos de administrador: A) Ejecutar systemctl list-Units -t service | grep ufw (si est\u00e1s en Ubuntu) o systemctl list-Units -t service | grep firewalld (si est\u00e1 en Fedora). \u00bfQu\u00e9 significa la palabra \"loaded\"? Y \"active\"? Confirma esto ejecutando systemctl status ufw / systemctl status firewalld B) Ahora enmascara la Unit ufw / firewalld. \u00bfQu\u00e9 pasa realmente cuando s'enmascara una Unit? Pista: consulte donde apunta el reci\u00e9n creado archivo /etc/systemd/system/ufw.service (o /etc/systemd/system/firewalld.service ) C) Ejecutar systemctl list-Units -t service | grep ufw (o systemctl list-Units -t service | grep firewalld ) de nuevo. \u00bfPor qu\u00e9 todav\u00eda aparece la palabra \"active\"? Confirma esto ejecutando systemctl status ufw / systemctl status firewalld D) Si ahora ejecutas systemctl stop ufw (o systemctl stop firewalld ) , \u00bfqu\u00e9 muestra systemctl list-Units -t service | grep ufw (o systemctl list-Units -t service | grep firewalld )? \u00bfPor qu\u00e9? \u00bfQu\u00e9 deber\u00edas hacer para que vieras algo? Pista: usa el par\u00e1metro --all E) Ejecutar el comando systemd-delta . \u00bfQu\u00e9 significa la relaci\u00f3n indicada entre los dos archivos que aparecen en la l\u00ednea [Masked]? \u00bfY entre los dos archivos que aparecen en las l\u00edneas [EXTENDED]? !!! note \"NOTA\" Tambi\u00e9n podr\u00eda haber alguna pareja de archivo en l\u00edneas [overrides] o incluso [EQUIVALENTE] F) Intenta iniciar el Unit ufw (o firewalld) todav\u00eda Enmascarado. Puedes? Desenmascara y vuelve a intentarlo. puedes ahora? G) Ejecutar el comando systemctl edit ufw (o systemctl edit firewalld ) y, en el editor de texto que aparece, escribe la l\u00ednea Description = Hola amigo y guarda. A continuaci\u00f3n, ejecuta systemctl cat ufw (o systemctl cat firewalld ) . \u00bfQu\u00e9 ves? Y si vuelves a ejecutar systemd-delta ? 2. A) Crear un archivo llamado /etc/systemd/system/pepe.service con el siguiente contenido ...: [Unit] Description = Pepe se colega [Service] Type = oneshot ExecStart = / bin / ls -l ExecStop = / bin / df -h [Install] WantedBy = multi-user.target ... y a continuaci\u00f3n (despu\u00e9s de systemctl daemon-reload ) ejecuta systemctl start pepe Qu\u00e9 ves? Y si haces journalctl -e , \u00bfqu\u00e9 ves? \u00bfPor qu\u00e9? B) \u00bfQu\u00e9 deber\u00edas modificar del archivo anterior para que el comando /bin/df -h no se ejecutara justo despu\u00e9s de /bin/ls -l sino s\u00f3lo cuando se escriba systemctl stop pepe ? Pista: consulta la explicaci\u00f3n del tipo \"oneshot\" en la teor\u00eda. Pru\u00e9balo utilizando los comandos systemctl -full edit pepe , systemctl daemon-reload y, de nuevo, journalctl -e C) Para qu\u00e9 sirve la l\u00ednea WantedBy = ... ? O dicho de otro modo: \u00bfqu\u00e9 relaci\u00f3n tiene esta l\u00ednea con el comando systemctl enable ? Pista: observa el contenido de la carpeta /etc/systemd/system/multi-user.target.wants D) \u00bfQu\u00e9 deber\u00edas modificar del archivo anterior para que la salida de los comandos ejecutadas por la Unit (ya sea \u200b\u200ba ExectStart = o a ExecStop =) no vaya a parar al Journal sino que se visualice el terminal / dev / tty4? Pru\u00e9balo. 3.-a) Crear un script llamado /opt/yeah con el siguiente contenido (y dale permisos de ejecuci\u00f3n): #!/bin/bash while [[true]] do curl -s ipinfo.io/ip / Bin / sleep 3``` d\u00e9 b) Crear un archivo llamado \"/etc/systemd/system/pepa.service\" con el siguiente contenido ...: [Unit] Description = Pepa se colega [Service] Type = simple ExecStartPre = / usr / bin / systemd-cat -t PEPA -p grito echo \"Empieza\" ExecStart = / opt / yeah ExecStop = / usr / bin / systemd-cat -t PEPA -p grito echo \"Termino\" # StandardOutput = null [Install] WantedBy = multi-user.target ... y a continuaci\u00f3n (despu\u00e9s de systemctl daemon-reload ) ejecuta systemctl start pepa . Si haces journalctl -f , que ves? \u00bfPor qu\u00e9? Y si ejecutas systemctl stop pepa , que ves entonces en el Journal? \u00bfPor qu\u00e9? Y si Descomentas la l\u00ednea que aparece comentada y vuelves a probar? 4.-a) Crear un archivo llamado \"fiufiu.service\" dentro de \"/ etc/systemd / system\" con el siguiente contenido ...: [Unido] Description = All we are saying is give peace a chance [Service] Type = simple ExecStart = /usr/bin/nc -l -p 5555 Restart = on-success ... y seguidamente ponerlo en marcha con el comando sudo systemctl start fiufiu . Comprueba con systemctl status fiufiu (o tambi\u00e9n con ss -tnl ) que se haya iniciado correctamente b) Ejecutar el comando journalctl -ef y seguidamente, abre otro terminal para ejecutar en ellos el comando nc 127.0.0.1 5555 . Escribe algo la conexi\u00f3n abierta para este cliente Netcat y observa a la vez lo que aparece en tiempo real en el Journal. \u00bfQu\u00e9 pasa? \u00bfPor qu\u00e9? c) Cerrar el cliente y vuelve a ejecutar. \u00bfEl servicio sigue funcionando? Ahora comenta la l\u00ednea Restart = ... que aparece en el archivo fiufiu.service, reinicia el servicio y vuelve a ejecutar el cliente un par de veces. la primera vez deber\u00e1 conectarse sin problemas como siempre pero la segunda ya no. \u00bfPor qu\u00e9? 5.-a) Instal.la el paquete \"apache2\" y observa, ejecutando el comando systemctl cat apache2 , el valor que tiene la directiva Restart =. Ejecuta entonces systemctl --signal = 9 kill apache2 y comprueba con systemctl status apache2 si el servicio reinicia solo o no. \u00bfPor qu\u00e9 pasa lo que pasa? b) Cambiar ahora el valor de la directiva Restart = del Unit del Apache2 mediante systemctl edit --full apache2 para que valga \"no\" (recuerda que escribir como primera l\u00ednea el t\u00edtulo de la secci\u00f3n a la que pertenece la directiva que quieres sobreescribir -es decir, [Service] -). Despu\u00e9s de hacer systemctl daemon-reload (y de comprobar que la modificaci\u00f3n es efectiva con systemd-delta o tambi\u00e9n systemctl cat apache2 ) , inicia el servicio de nuevo y comprueba que efectivamente est\u00e9 iniciado. Vuelve a matar de nuevo con systemctl -signal = 9 kill apache2 y vuelve a comprobar de nuevo si el servicio ha reiniciado autom\u00e1ticamente o no. \u00bfQu\u00e9 pasa ahora? c) Agregar mediante systemctl edit apache2 la l\u00ednea necesaria para llamar a una Unit que se encargue ejecutarse en el modo \"oneshot\" el comando play /ruta/un/fitxer.mp3 cada vez que el Apache finalice debido a alguna situaci\u00f3n inesperada (como por ejemplo ser\u00eda una se\u00f1al kill 9) NOTA\" El comando play encarga de reproducir el archivo de sonido indicado y admite muchos formatos posibles, no s\u00f3lo mp3. Forma parte del paquete \"sox 6.a) Ejecuta systemctl disable ufw (o systemctl disable firewalld ) y seguidamente systemctl show --property \"Wants\" multi-user.target | grep -E \"(ufw | firewalld) \" \u00bfQu\u00e9 ves? \u00bfPor qu\u00e9? Pista: observa el mensaje que aparece en pantalla al deshabilitar el servicio ufw b) Y si ahora ejecutas systemctl enable ufw (o systemctl enable firewalld ) y vuelves a ejecutar el mismo comando? \u00bfQu\u00e9 ves ahora? \u00bfPor qu\u00e9? Pista: observa el contenido de la carpeta /etc/systemd/system/multi-user.target.wants c) Deduce y di por qu\u00e9 la l\u00ednea After = de la Unit ufw.service (o firewalld.service) tiene el valor que tiene. d) systemd puede no ser el proceso INIT de nuestro sistema Linux: aunque sea el m\u00e1s extendido con diferencia, te puedes encontrar distribuciones que utilicen sistemas INIT alternativos. Dime, de los siguientes comandos, cu\u00e1les sirven para comprobar si el proceso INIT de tu sistema es systemd (o no): file /sbin/init man init pgrep ^systemd $ ##Targets Podemos definir un \"target\" como un \"estado\" del sistema definido por un determinado conjunto de servicios puestos en marcha (y otros que no). La idea es que, al arrancar el sistema, se llegue a un determinado \"target\" (Y, opcionalmente, a partir de all\u00ed, poder pasar a otro si fuera necesario). A continuaci\u00f3n se listan los \"targets\" m\u00e1s importantes (todos ellos ubicados dentro de /usr/lib/systemd/system ): poweroff.target (o \"runlevel0.target\") Si se llega a este \"target\", se apaga el sistema reboot.target (o \"runlevel6.target\"): Si se llega a este \"target\", se reinicia el sistema rescue.target (o \"runlevel1.target\"): Si se llega a este \"target\", se inicia el sistema en modo texto,sin red y s\u00f3lo por el usuario root. Ser\u00eda similar a otro target llamado \" emergency.target \", pero el \"emergency\" es m\u00e1s \"radical\" que el \"rescate\" porque gracias a montar la partici\u00f3n ra\u00edz en modo s\u00f3lo lectura permite arrancar sistemas que el \"rescate\" quiz\u00e1s no puede. multi-user.target (o \"runlevel3.target\"): En este caso se inicia el sistema en modo texto pero con red y multiusuario (el target predeterminado en servidores) graphical.target (o \"runlevel5.target\"): En este caso, se inicia el sistema en modo gr\u00e1fico con red y multiusuario (el target por defecto en sistemas de escritorio) Implica haber pasado por el target \"multi-user\" previamente. Otros targets predefinidos que se instalan con systemd y que hay que conocer son: ctrl-alt-del.target Target activado cuando es pulsado CTRL + ALT + SUPR. Por defecto es un enlace a \"reboot.target\" sysinit.target Target que ejecuta los primeros scripts de arranque sockets.target Target que activa, al arrancar, todas las Units de tipo \"socket\". Se recomienda, por tanto, que todos los archivos de configuraci\u00f3n de una Unit \"socket\" tengan a su l\u00ednea Wants = este target indicado (o bien WantedBy =) timers.target Target que activa, al arrancar, todas las Units de tipo \"timer\". Se recomienda, por tanto, que todos los archivos de configuraci\u00f3n de una Unit \"timer\" tengan a su l\u00ednea Wants = este target indicado (o bien WantedBy =) paths.target Target que activa, al arrancar, todas las Units de tipo \"path\". Se recomienda, por tanto, que todos los archivos de configuraci\u00f3n de una Unit \"path\" tengan a su l\u00ednea Wants = este target indicado (o bien WantedBy =) swap.target Target que habilita la memoria swap basic.target Target que pone en marcha todos los target relacionados con puntos de montaje, memorias swaps,paths, timers, sockets y otras unidades b\u00e1sicas necesarias para el funcionamiento del sistema. initrd-fs.target El generador systemd-fstab-generator a\u00f1ade autom\u00e1ticamente las Units indicadas en la directiva Before = de esta Unit a la Unit especial \"sysroot-usr.mount\" (adem\u00e1s de todos los puntos de montaje existentes en /etc/fstab que tengan establecidas las opciones \"auto\" y \"X-initrd.mount\"). Ver m\u00e1s adelante una explicaci\u00f3n de las Units de tipo mount. initrd-root-fs.target El generador systemd-fstab-generator a\u00f1ade autom\u00e1ticamente las Units indicadas en la directiva Before = de esta Unit a la Unit especial \"sysroot-usr.mount\", la cual es generada a partir de los par\u00e1metros del kernel. Lo estudiaremos m\u00e1s adelante local-fs.target El generador systemd-fstab-generator a\u00f1ade autom\u00e1ticamente las Units indicadas en la directiva Before = de esta Unit a todas las Units de tipo \"mount\" que se refieren a puntos de montaje locales. Tambi\u00e9n a\u00f1ade a este target las dependencias de tipo Wants = correspondientes a los puntos de montaje existentes en /etc/fstab que tienen la opci\u00f3n \"auto\" establecida. Ver m\u00e1s adelante una explicaci\u00f3n de las Units de tipo mount. network-online.target Target que se activa autom\u00e1ticamente en cuanto el subsistema de red es funcional.Cualquier servicio que tenga que trabajar en red se deber\u00e1 iniciar al menos en este target !!! note \"NOTA\" Existe otro tarjet relacionado con la red llamado \"pre-network.target\" que est\u00e1 pensado para iniciar servicios antes de que cualquier tarjeta de red se configure. Su prop\u00f3sito principal es hacerlo servir con servicios de tipo cortafuegos, para establecer las reglas antes de que la configuraci\u00f3n de red funcione. Estos servicios deber\u00e1n tener una l\u00ednea Before = network-pre.target y tambi\u00e9n una l\u00ednea Wants = network-pre.target en su archivo de configuraci\u00f3n !!! note \"NOTA\" Existe otro tarjet relacionado con la red llamado simplemente \"network.target\" que s\u00f3lo indica que el stack software de red ya se ha cargado en memoria pero esto no implica que las interfaces se hayan configurado todav\u00eda. este target est\u00e1 m\u00e1s pensado para el proceso de apagado de la m\u00e1quina para realizar este proceso de forma ordenada: pues la orden de apagado es al rev\u00e9s que el de arranque, cualquier Unit que tenga una l\u00ednea After = network.target apagar\u00e1 antes que la red se descargue y esto har\u00e1 que esta Unit apague sin interrumpir ninguna conexi\u00f3n que est\u00e9 pendiente * printer.target Target que se activa autom\u00e1ticamente tan pronto como una impresora es enchufada o aparece disponible durante el arranque. Aqu\u00ed donde se suele iniciar, por ejemplo, el servicio Cups. * sound.target Target que se activa autom\u00e1ticamente tan pronto como una tarjeta de audio es enchufada o aparece disponible durante el arranque. * bluetooth.target Target que se activa autom\u00e1ticamente tan pronto como un controlador Bluetooth es enchufado o aparece disponible durante el arranque. * smartcard.target Target que se activa autom\u00e1ticamente tan pronto como un controlador Smartcard es enchufado o aparece disponible durante el arranque. * system-update.target Target especial utilizada para actualizaciones del sistema. El generador systemd-System- update-generator redireccionar\u00e1 el proceso de arranque autom\u00e1ticamente a este target si la carpeta /system-update existe * umount.target Target que desmonta todos los puntos \"mount\" y \"automount\" durante el apagado del sistema * final.target Target utilizado durante el apagado del sistema que puede utilizarse para apagar los \u00faltimos servicios despu\u00e9s de que los servicios \"normales\" ya se han detenido y los puntos de montaje se han desmontado. Para saber el target donde nos encontramos en este momento podemos hacer: systemctl get-default Hay que tener en cuenta que m\u00faltiples targets pueden estar activados a la vez. Un target activado indica que systemd ha intentado iniciar todas las Units asociadas a este target. Esto significa que el comando anterior s\u00f3lo nos dice cu\u00e1l es el target \"final\" donde hemos llegado, pero a lo largo del camino desde el arranque de la m\u00e1quina hasta llegar a este target \"final\" se han ido activando diferentes targets a modo de \"escalones\" intermedios. para ver todos los targets activados, hay que hacer systemctl list-Units -type = target Se puede cambiar el target actual a otro simplemente ejecutando: systemctl Isolate nomTargetDesti.target Para cambiar el target por defecto donde ir\u00e1 a parar autom\u00e1ticamente a cada arranque del sistema se puede hacer: systemctl set-default nomTargetDefecte.target !!! note \"Nota\" El comando anterior, en realidad lo \u00fanico que hace es revincular el link \"/etc/systemd/system/default.target\" en el archivo * .Target adecuado. !!! note \"Nota\" Otra manera de entrar al final del arranque del sistema en un determinado target predeterminado es a\u00f1adir la l\u00ednea systemd.unit = nomTargetDestino.target a la lista de par\u00e1metros del kernel indicada en la configuraci\u00f3n del gestor de arranque. Hay una serie de comandos espec\u00edficos para pasar a determinados estados (poweroff, reboot, etc) que se pueden usar en vez del comando systemctl Isolate gen\u00e9rica. Por ejemplo: sudo systemctl rescue : Similar a systemctl Isolate rescue.target sudo systemctl poweroff (o sudo poweroff a secas): Similar a - systemctl Isolate poweroff.target sudo systemctl reboot (o sudo reboot a secas): Similar a systemctl Isolate reboot.target Si se quiere detener (-P) o reiniciar (-r) la m\u00e1quina en un momento futuro determinado (hh: mm), entonces habr\u00e1 que ejecutar el comando: sudo shutdown {-P | -r} hh: mm Si se quiere detener (-P) o reiniciar (-r) la m\u00e1quina dentro de una cierta cantidad de minutos, entonces habr\u00e1 que ejecutar el comando: sudo shutdown {-P | -r} + m !!! note \"Nota\" Dentro de la carpeta /usr/lib/systemd/system-shutdown pueden haber archivos * .shutdown, que son scripts ejecutables que se ejecutar\u00e1n justo antes del apagado / reinicio del sistema (es decir, justo al poner en marcha los servicios \"poweroff.service\" o \"Reboot.service\"). Quien ejecutar\u00e1 estos scripts es el binario /usr/lib/systemd/systemd-shutdown, el cual es invocado siempre por estos servicios, que lo colocan como PID 1 y es el responsable de desmontar los sistemas de ficheros, deshabilitar la swap, matar los procesos que queden pendientes, etc. En los scripts ejecutados por /usr/lib/systemd/systemd-shutdown podemos utilizar un par\u00e1metro ($1) que puede valer \"poweroff\" o \"reboot\" dependiendo de la acci\u00f3n que realizar\u00e1 y que nos podr\u00eda servir para distinguir qu\u00e9 queremos que haga este script seg\u00fan la acci\u00f3n indicada. Todos los scripts se ejecutan en paralelo. Hay que tener en cuenta, finalmente, que el sistema de ficheros en ese momento permanece montado pero en modo s\u00f3lo lectura. !!! note \"Nota\" En el comando systemctl reboot le podemos a\u00f1adir varios par\u00e1metros interesantes, los cuales s\u00f3lo funcionan, sin embargo, en sistemas UEFI que han arrancado mediante el gestor de arranque systemd-boot: - --firmware-setup : INDICATE to the system s firmware to reboot into the firmware setup interface (aka the \"UEFI control panel\") - --boot-loader-menu = n\u00basegons : INDICATE to the system s boot loader to show the boot loader menu on the following boot the number of seconds specified as value. Pass 0 value in order to disable the menu timeout. - -boot-loader-entry = entryID : INDICATE to the system s boot loader to boot into a specific boot loader entry on the following boot. Lo que hacen los par\u00e1metros anteriores es modificar determinados valores de variables EFI concretas (tal como se podr\u00eda haber hecho tambi\u00e9n con el comando efibootmgr ) para as\u00ed modificar el comportamiento de la UEFI el pr\u00f3ximo arranque Por otra parte, con el comando sudo systemctl suspend podemos suspender el sistema (o dicho de otro manera, nos permiten llegar al target suspend.target\") y con el comando sudo systemctl hibernate la podemos poner a hibernar (o dicho de otro modo, permiten llegar al target \"hibernate.target\"). \"Suspender\" significa que se guarda todo el estado del sistema en la RAM y se apaga la mayor\u00eda de dispositivos de la m\u00e1quina; cuando se pone en marcha de nuevo, el sistema restaura su estado previo de la RAM sin tener que reiniciarse de nuevo: este proceso es muy r\u00e1pido pero tiene el inconveniente de que obliga a mantener con alimentaci\u00f3n el\u00e9ctrica la m\u00e1quina todo el tiempo. \"Hibernar\" significa que se guarda todo el estado del sistema en el disco duro (si tiene espacio libre) y se apaga por completo la m\u00e1quina: cuando se pone en marcha de nuevo, el sistema restaura su estado previo desde el disco duro sin tener que reiniciar de nuevo: este proceso es bastante lento pero tiene la ventaja de no tener que mantener con alimentaci\u00f3n el\u00e9ctrica la m\u00e1quina. !!! note \"Nota\" Dentro de la carpeta \"/ usr / lib / systemd / system-sleep\" pueden haber archivos * .sleep, que son scripts ejecutables que se ejecutar\u00e1n justo antes de la hibernaci\u00f3n o suspensi\u00f3n del sistema (es decir, justo en poner en marcha internamente los servicios \"systemd-hibernate.service \"o\" systemd-suspend.service \", los cuales, por cierto, nunca deben ser invocados directamente con systemctl start ... sino utilizando los comandos explicadas en el p\u00e1rrafo anterior: systemctl hibernate o systemctl suspend ). Quien ejecutar\u00e1 estos scripts es el binario / usr / lib / systemd / systemd-sleep, el cual es invocado siempre por estos servicios y admite dos par\u00e1metros que podemos utilizar en estos scripts como $ 1 y $ 2 respectivamente. El primer par\u00e1metro puede valer \"pre\" o \"post\" dependiendo de si la m\u00e1quina est\u00e1 yendo a la suspensi\u00f3n / hibernaci\u00f3n o est\u00e1 volviendo, respectivamente. El segundo par\u00e1metro puede valer \"suspend\" o \"hibernate\" dependiendo de la acci\u00f3n que realizar\u00e1 y que nos podr\u00eda server para distinguir qu\u00e9 queremos que haga este script seg\u00fan la acci\u00f3n indicada. Todos los scripts ejecutan en paralelo. Si se quiere realizar una tarea larga y asegurarse de que la m\u00e1quina no se suspender\u00e1 o apagar\u00e1 mientras tanto, se puede invocar el comando correspondiente a esta tarea as\u00ed: systemd-inhibit comando_largo El comando systemd-inhibit --list muestra las tareas que tienen este truco en marcha. Si se quiere especificar una acci\u00f3n concreta a inhibir se puede indicar con el par\u00e1metro - what = acci\u00f3n , donde \"acci\u00f3n\" puede ser por ejemplo la palabra \"Shutdown\" o \"sleep\" (equivalente a hibernaci\u00f3n o suspensi\u00f3n), entre otros. Encontrar\u00e1 m\u00e1s informaci\u00f3n en los primeros p\u00e1rrafos de https://www.freedesktop.org/wiki/Software/systemd/inhibit/ Para que el inicio con systemctl start de un determinado servicio (o target) se produzca dentro de un target determinado -llamemosle el \"a.target\" - desde el propio archivo de configuraci\u00f3n del servicio en cuesti\u00f3n hay que escribir las directivas Wants = a.target, Requires = a.target y / o After = a.target (estas directivas se aseguran de llegar primero al target \"a.target\" para iniciar entonces el servicio en cuesti\u00f3n). Por otra parte, tambi\u00e9n existe la directiva Conflicts = a.target , la que se asegura de no estar en el target \"a.target\" para poder iniciar el servicio en cuesti\u00f3n. En el caso de querer iniciar siempre un servicio determinado autom\u00e1ticamente en el target \"a.target\", entonces habr\u00e1 que escribir adem\u00e1s las directivas WantedBy = a.target o RequiredBy = a.target del archivo de configuraci\u00f3n del servicio (en este \u00faltimo caso, al hacer systemctl enable nomServei se crea un enlace a su archivo de configuraci\u00f3n dentro de /lib/systemd/system/a.target.wants ). Los archivos de configuraci\u00f3n de los targets s\u00f3lo tienen secciones Unit (y muy pocas la secci\u00f3n [Install]). En este sentido, es interesante consultar los archivos correspondientes, por ejemplo, a multi-user.target o graphical.target: s\u00f3lo encontramos las directivas Description, Documentation, Wants, Requires, After,Conflicts y AllowIsolate (ya partir de ellas podemos deducir las dependencias que hay entre targets ... aunque por eso hay comandos espec\u00edficos que enseguida veremos). ###EJERCICIOS: Crear un target nuevo llamado \"manolo.target\" donde el sistema deber\u00e1 entrar justo despu\u00e9s de activar graphical.target (es decir, debe ser el \u00faltimo target al activarse). La idea ser\u00e1 asegurarte de que entras en este target para ejecutar un determinado servicio (lo llamaremos \"manolo.service\") el \u00faltimo de todos. para hacer esto, tienes que hacer lo siguiente: A) Crear un nuevo fichero llamado \"/etc/systemd/system/manolo.target\" con el siguiente contenido: [Unit] Description = Manolo is kind Documentation = http: //www.lecturas.com Requires = graphical.target After = graphical.target Conflicts = rescue.service rescue.target AllowIsolate = yes B) Crear un nuevo fichero llamado \"/etc/systemd/system/manolo.service\" con el siguiente contenido: [Unit] Description = Manolo is soberbio Documentation = http: //www.hola.com Requires = manolo.target After = manolo.target [Service] ExecStart = / usr / bin / printf \"MANOLO \\ n\" RemainAfterExit = yes [Install] WantedBy = manolo.target C) Ejecutar systemctl enable manolo.service y reinicia la m\u00e1quina. \u00bfCrees que el servicio \"manolo\" estar\u00e1 funcionando autom\u00e1ticamente o no? \u00bfPor qu\u00e9 lo crees? Compru\u00e9balo ejecutando el comando systemctl status manolo.service (o tambi\u00e9n observando si aparece la palabra \"MANOLO\" en el Journal). PISTA: La respuesta de porque el servicio \"manolo\" estar\u00e1 funcionando (o no) se encuentra en lo que muestra el comando systemctl list-Units -t target | grep \"manolo\" y en entender el significado de la l\u00ednea WantedBy = D) A continuaci\u00f3n ejecuta systemctl start manolo.service . Despu\u00e9s de observar que el servicio se haya puesto en marcha correctamente (en la salida del comando systemctl status manolo.service o tambi\u00e9n observando si aparece la palabra \"MANOLO\" en el Journal), \u00bfcrees que el comando systemctl list-Units -t target | grep \"manolo\" mostrar\u00e1 algo diferente respecto del apartado anterior? \u00bfPor qu\u00e9 lo crees? PISTA: La respuesta se encuentra en entender el significado de las l\u00edneas Requires = y After = del archivo \"manolo.service\" e) Ejecutar systemctl set-default manolo.target y vuelve a reiniciar la m\u00e1quina. \u00bfCrees que el servicio \"manolo\" ahora estar\u00e1 funcionando autom\u00e1ticamente o no? \u00bfPor qu\u00e9 lo crees? Compru\u00e9balo ejecutando el comando systemctl status manolo.service (o tambi\u00e9n observando si aparece la palabra \"MANOLO\" en el Journal). PISTA: La respuesta se encuentra en entender el significado de las l\u00edneas Requires = y After = del archivo \"manolo.target\" 2. A) Entra en el target de rescate. \u00bfQu\u00e9 pasa? B) Entra en el target de suspensi\u00f3n. \u00bfQu\u00e9 pasa? C) Entra en el target multi-user. \u00bfQu\u00e9 pasa? D) Crear un script ejecutable dentro de la carpeta \"/usr/lib/systemd/system-sleep\" con el siguiente contenido ...: #! / Bin / bash if [[ \"$ 1\" == \"pre\"]] then echo \"we are suspending oro hibernating at $ (date) ...\"> / tmp / systemd_suspend_test Elif [[ \"$ 1\" == \"post\"]] then echo \"... and we are back from $ (date)\" >> / tmp / systemd_suspend_test fin ... y prueba a suspender el sistema y volver a \"despertar\". \u00bfQu\u00e9 pasar\u00e1? e) \u00bfPara qu\u00e9 sirve este programa: https://github.com/ryran/reboot-guard ? ##Boot chain Para saber la jerarqu\u00eda de dependencias de targets para llegar a iniciar un target (o service!) Determinado se puede utilizar el comando: systemctl list-dependencies nomTarget.target (o nomUnit.service ) !!! note \"Nota\" Una forma alternativa de obtener una informaci\u00f3n similar ser\u00eda ejecutando systemctl show -p \"Wants\" nomTarget.target && systemctl show -p \"Requires\" nomTarget.target . Tambi\u00e9n se puede ejecutar systemctl status Las dependencias mostradas se corresponden a Units que han sido \"required\" o \"wanted\" por las Units superiores. Las dependencias recursivas s\u00f3lo se muestran los targets intermedios; si se quieren ver tambi\u00e9n por los service, mounts paths, socket, etc intermedios hay que incluir el par\u00e1metro --all al comando anterior. Tambi\u00e9n se pueden mostrar cu\u00e1les Units dependen para funcionar del correcto inicio de un target (o service!) determinado con el comando: systemctl list-dependencias --reverse nomTarget.target (o nomUnit.service ) !!! note \"Nota\" Una forma alternativa de obtener una informaci\u00f3n similar ser\u00eda ejecutando systemctl show -p \"WantedBy\" nomTarget.target && systemctl show -p \"RequiredBy\" nomTarget.target Otros par\u00e1metros interesantes de este comando son --before y - after , los cuales sirven para mostrar Units que dependen para funcionar del correcto inicio anterior o posterior de un target, respectivamente. Por otra parte, respecto al arranque del sistema podemos obtener una informaci\u00f3n m\u00e1s detallada sobre los tiempos que tarda cada Unit en cargarse y el orden en que lo hace gracias al comando systemd-analyze, tiene varias posibilidades systemd-analyze : Muestra el tiempo total empleado en el arranque del sistema y qu\u00e9 parte de este tiempo ha sido empleado en tareas del kernel, qu\u00e9 parte en uso de initrd y qu\u00e9 parte en tareas de usuario systemd-analyze blame : Muestra los tiempos disgregados por servicio. Hay que indicar que estos tiempos son \"en paralelo \", as\u00ed que la suma total que sale ser\u00e1 siempre muy superior al tiempo real empleado en el arranque. systemd-analyze dot [nomTarget.target] | dot -T {png | svg} -o foto. {png | svg} : Genera una salida que si se pasa a la aplicaci\u00f3n \"dot\" (perteneciente al paquete \"GraphViz\") generar\u00e1 finalmente un gr\u00e1fico (En formato png o svg) donde se pueden visualizar todas las dependencias del target (o servicio!) indicado (o, si no se indica, del \"default.target\"; tambi\u00e9n se pueden indicar comodines en el nombre del target / servicio). systemd-analyze plot [nomTarget.target]> something.svg : Genera un gr\u00e1fico donde se muestra los tiempos de ejecuci\u00f3n y de bloqueo de cada Unit durante el arranque hasta llegar al target (o servicio!) indicado (o, si no se indica, del \"default.target\") systemd-analyze critical-chain [nomTarget.target] : Muestra el \u00e1rbol de dependencias bloqueantes por target (o servicio!) indicado. El tiempo mostrado despu\u00e9s de \"@\" indica el tiempo que hace que la Unit est\u00e1 activa; el tiempo mostrado despu\u00e9s de \"+\" indica el tiempo que la Unit ha tardado en activarse. Otras opciones del comando systemd-analyze son syscall-filter, verify, dump, log-level, security, time ...Se puede ver si, una vez iniciado el sistema, a\u00fan quedan tareas pertenecientes al arranque para completar ejecutando el comando systemctl list-jobs ###EJERCICIOS 1.- a) \u00bfQu\u00e9 targets deben haberse iniciado para que el servicio gdm se pueda poner en marcha? (esto lo puedes saber con el comando systemctl list-dependencies ... ) b) Ejecutar el comando systemctl list-dependencies --reverse gdm.service Qu\u00e9 ves? c) \u00bfQu\u00e9 hace el comando tree / etc / systemd / system y para qu\u00e9 podr\u00eda servirte? 2.-a) Ejecutar systemd-analyze plot ... y observa qu\u00e9 Unit bloquea m\u00e1s tiempo el arranque de tu sistema. prueba de desactivarla (esperemos no romper nada!) y reinicia. Ejecuta ahora systemd-analyze blame para comprobar si el tiempo total de arranque ha disminuido efectivamente. b) Instal.la el paquete \"GraphViz\" y genera un gr\u00e1fico Png con las dependencias del target multi-user. Haz una lista de las dependencias all\u00ed mostradas y adjunta la captura del gr\u00e1fico Plantillas \u00b6 Una plantilla es un archivo de configuraci\u00f3n de tipo \"service\" que tiene la particularidad de permitir poner en marcha variantes de un mismo servicio sin tener que escribir un archivo \"service\" diferente para cada variante. B\u00e1sicamente, para utilizar una plantilla hay que hacer los siguientes pasos: 1.- El archivo \"service\" que har\u00e1 de plantilla debe llamarse \"nomServicio@.service\". Es decir, hay que indicar el s\u00edmbolo arroba antes del punto 2.- El contenido de este archivo plantilla puede ser exactamente igual que el de un archivo \"service\" est\u00e1ndar 3.- A la hora de iniciar, parar, activar, desactivar, ver el estado, etc de una plantilla, se deber\u00e1 indicar el identificador concreto de la variante con la que queremos trabajar. Este identificador se establece la primera vez que arranca la variante y simplemente consiste en una cadena entre la arroba y el punto, as\u00ed: systemctl start nomServicio@identificador.service A partir de aqu\u00ed, este identificador se har\u00e1 servir de la misma manera por el resto de tareas relacionadas con la gesti\u00f3n de esta variante. !!! note \"Nota\" An instance file is usually created as a symbolic link to the template file, with the link name including the instance identifier. In this way, multiple links with unique Identifiers can point back to a single template file. When managing instance Unit, systemd will look for a file with the exact instance name you Specify on the command line to use but if it can not find one, it will look for an associated template file. 4.- La gracia de las plantillas es que el valor del identificador indicado en el punto anterior se puede utilizar din\u00e1micamente dentro del contenido del archivo plantilla (concretamente mediante el s\u00edmbolo \" % y \"), de lo que seg\u00fan el valor que haya adquirido% y por esa variante se podr\u00eda poner en marcha el servicio escuchando en un puerto diferente (si% y representa un n\u00famero de puerto), o bien utilizando un archivo de configuraci\u00f3n diferente (si% y representa un nombre de archivo), o lo que nos convenga. !!! note \"Nota\" Otros s\u00edmbolos especiales que se pueden indicar en un archivo de configuraci\u00f3n de una plantilla pueden ser %p : representa the Unit name prefijo (this is the Portion of the Unit name that comes before the @ symbol) - %n : representa the full resulting Unit name (% p plus% e) - %u : The name of the user configured to run the Unit. - %U : The same as above, but as a numeric UID instead of name. - %H : The host name of the system that is running the Unit. - %% : This is used to insert a literal percentage sign. Pongamos un ejemplo. Imaginemos que tenemos un determinado servidor web que queremos ejecutar con dos configuraciones diferentes a la vez. La soluci\u00f3n ser\u00eda crear un archivo plantilla llamado por ejemplo Servidorweb@.service con un contenido similar al siguiente: [Unit] Description = My HTTP server [Service] Type = simple ExecStart = /usr/sbin/WebServer --config-file /etc/%i.conf [Install] WantedBy = multi-user.target Con este archivo, se podr\u00eda iniciar entonces el servidor dos veces, cada una indicando el nombre del archivo de configuraci\u00f3n deseado, as\u00ed: sudo systemctl start servidorweb@config1.service sudo systemctl start servidorweb@config2.service Los comandos anteriores lo que har\u00e1n ser\u00e1 ejecutar, respectivamente, los comandos: /usr/sbin/WebServer -config-file /etc/config1.conf y /usr/sbin/WebServer -config-file /etc/config2.conf ###EJERCICIOS: 1.-a) Crear un archivo plantilla que permita poner en marcha diferentes servidores Ncat de forma permanente (Recuerda el par\u00e1metro -k) escuchando cada uno de ellos en un puerto diferente. !!! note \"Nota\" Deber\u00e1s instalar el paquete \"nmap\" para disponer del comando ncat b) Iniciar un servidor Ncat a partir de la plantilla anterior escuchando en el puerto 2.222 y otro escuchando en el puerto 3333. Comprueba que, efectivamente, estos dos puertos est\u00e9n abiertos observando la salida del comando ss -tnl c) Conecta con el cliente Ncat a uno de los servidores anteriores y env\u00edale alg\u00fan mensaje. Cerrar el cliente (con CTRL + C) y ahora vuelve a ejecutarlo para conectar al otro servidor; vuelve a enviarle alg\u00fan otro mensaje y ci\u00e9rralo de nuevo. Observa las \u00faltimas l\u00edneas del Journal: \u00bfqu\u00e9 ves? 2.- Lee el siguiente p\u00e1rrafo y seguidamente contesta: When the user switches consoles using Ctrl+Alt+F2, Ctrl+Alt+F3,and so on, a new terminal then is spawned. In this case systemd calls a service named getty@.service providing the appropriate argument such as tty2 or tty3 to the unitfile. The %i identifier provides this argument value to the agetty binary so the terminal starts on that new console (as itcan seen in ExecStart= line from template file) a) Para qu\u00e9 sirve el comando agetty ? Busca en su p\u00e1gina del manual que hace su par\u00e1metro -a y a\u00f1\u00e1delo a la invocaci\u00f3n del comando escrita a la l\u00ednea ExecStart de dentro del archivo getty@.service (recuerda ejecutar sudo systemctl daemon-reload justo despu\u00e9s). \u00bfQu\u00e9 pasa ahora cuando pulses Ctrl + Alt + F2, etc? b) enmascara la instancia tty5 de la plantilla getty@.service. \u00bfQu\u00e9 pasa ahora si haces Ctrl + Alt + F5? NOTA: Es posible que tambi\u00e9n hayas de enmascarar la plantilla autovt @ .service para que funcione el ejercicio NOTA: Hay otras maneras m\u00e1s sofisticadas de desactivar terminales virtuales pero las veremos m\u00e1s adelante c) \u00bfQu\u00e9 te muestra el comando systemctl status getty@* ? 3.- Supongamos que tienes un archivo llamado /etc/systemd/system/pepe@.service con el siguiente contenido: [Unit] Description = lerele [Service] Type = oneshot ExecStart = / usr / local / bin / systemd-email% y admin@elpuig.xeill.net User = nobody Group = systemd-journal donde \"systemd-email\" es un bash shell script escrito por nosotros dise\u00f1ado para enviar correos (suponiendo que tenemos un servidor Postfix o similar configurado en la m\u00e1quina) que tiene el siguiente c\u00f3digo: #!/bin/bash systemctl status -full \"$1\" | mail -s \"$1\" $2 y se supone que has a\u00f1adido la l\u00ednea OnFailure=pepe@%i.service en la secci\u00f3n [Unit] del archivo \".service\" correspondiente al / los servicio / s que quiere monitorear. a) \u00bfQu\u00e9 comando deber\u00edas ejecutar para poner en marcha una instancia del servicio-plantilla pepe @ que se encargase de enviar mails en el momento que el servicio Cups falle? ##Sockets Un aspecto muy interesante de systemd es que permite que un servidor no est\u00e9 permanentemente encendido sino que s\u00f3lo arranque \"bajo demanda\" (es decir, cuando detecte una conexi\u00f3n, normalmente externa). De este modo, este servidor no consume m\u00e1s recursos que los m\u00ednimos imprescindibles, en el momento justo. Para lograr esto, lo que pasa es que s\u00ed hay un componente \"escuchando\" todo el rato posibles intentos de conexiones, pero este componente no es la Unit \"service\" en s\u00ed sino un \"perro guardi\u00e1n\" que s\u00f3lo despertar\u00e1 Unit \"service\" cuando sea necesario. Este \"perro guardi\u00e1n\" es la Unit de tipo \"socket\". Cada archivo de configuraci\u00f3n de una Unit \"socket\" debe tener exactamente el mismo nombre que el archivo de configuraci\u00f3n de la Unit \"service\" que quiere despertar (es decir, si tenemos el servicio \"a.service\", el socket correspondiente deber\u00e1 llamarse \"a.socket\"). La idea es tener la Unit \"socket\" siempre encendido ( systemctl enable a.socket ) pero la Unit \"service\" no ( systemctl disable a.service ); cuando se detecte una conexi\u00f3n, el \"socket\" autom\u00e1ticamente encender\u00e1 la Unit \"service\" (esto se puede ver haciendo systemctl status a.service mientras existe la conexi\u00f3n) y la apagar\u00e1 de nuevo pasado un determinado tiempo sin actividad (por defecto 5 minutos). Obviamente, si par\u00e1ramos el \"socket\" ( systemctl stop a.socket ) o lo deshabilitamos para el pr\u00f3ximo reinicio ( systemctl disable a.socket ) ya no habr\u00eda \"perro guardi\u00e1n\" atento y, por tanto, el servicio ya no se pondr\u00eda en marcha autom\u00e1ticamente. Para cambiar el puerto donde escucha un \"socket\" (entre otras cosas) hay que modificar la configuraci\u00f3n del \"Socket\" propiamente dicho y eso no depende de la configuraci\u00f3n del servidor en cuesti\u00f3n. Los archivos de configuraci\u00f3n de cada \"socket\" se pueden encontrar, como cualquier otra Unit, o bien dentro de la carpeta \"/ usr / lib / systemd / system\" o bien dentro de \"/ etc / systemd / system\" y se puede utilizar igualmente el comando systemctl edit a.socket para generar archivos \"override\". La secci\u00f3n que nos interesa en estos tipos de ficheros es la secci\u00f3n [Socket] , lo puede contener alguna de las siguientes directivas m\u00e1s importantes: ListenStream = [IP:] n\u00bapuerto Indica el n\u00famero de puerto TCP por donde escuchar\u00e1 el socket. Opcionalmente, se puede indicar una IP concreta para especificar que s\u00f3lo escuchar\u00e1 en el puerto ofrecido por aquella IP y ninguna m\u00e1s. !!! note \"Nota\" Se pueden indicar varias l\u00edneas ListemStream para hacer que el socket escuche en varios puertos a la vez. Por otra parte, como esta l\u00ednea puede estar escrita en diferentes archivos, si se quiere asegurar que s\u00f3lo se escuche en un puerto concreto sin tener en cuenta otras l\u00edneas que pueda haber le\u00eddo systemd previamente, se puede a\u00f1adir primero una l\u00ednea ListemStream vac\u00eda (as\u00ed: ListemStream = ) y luego la l\u00ednea ListenStream asociada al puerto deseado; lo que hace la l\u00ednea ListemStream vac\u00eda es \"resetear\" todas las l\u00edneas ListemStream anteriores * ListenDatagram = [IP:] n\u00baport Indica el n\u00famero de puerto UDP por donde escuchar\u00e1 el socket. Opcionalmente, se puede indicar una IP concreta para especificar que s\u00f3lo escuchar\u00e1 en el puerto ofrecido por aquella IP y ninguna m\u00e1s. * ListenSequentialPacket = /ruta/arxiu.socket Indica el socket de tipo UNIX por donde se escuchar\u00e1. S\u00f3lo sirve para comunicaciones entre procesos de la misma m\u00e1quina * Service = unNomAlternatiu Si el nombre del archivo \"service\" no es igual que el nombre del archivo \"socket\", aqu\u00ed se puede indicar entonces el nombre que tiene el archivo \"service\" para que el socket el sepa encontrar. * Accept = yes Si se indica, hace que se genere una instancia del servicio diferente para cada conexi\u00f3n. \u00datil cuando se utilizan plantillas. Si su valor es no (por defecto) s\u00f3lo una instancia del servicio gestionar\u00e1 todas las conexiones. El comando systemctl status * .socket nos permite saber cu\u00e1ntos y cu\u00e1les sockets est\u00e1n escuchando ahora mismo; el valor \"Accepted\" muestra cu\u00e1ntas conexiones se han realizado en total desde que el socket ha sido iniciado y el valor \"Connected\" muestra cu\u00e1ntas conexiones est\u00e1n actualmente activas Como cualquier otra Unit, se pueden ver la lista de sockets con el comando systemctl list-Units -t socket pero adem\u00e1s disponemos del comando espec\u00edfico systemctl list-sockets , el cual informa de qu\u00e9 servicio correspondiente activan y en qu\u00e9 puerto / socket UNIX escuchan. ###EJERCICIOS: 1.-a) Crea el fichero /etc/systemd/system/dateserver.socket con el siguiente contenido: [Unit] Description = Servicio de fecha en el puerto 55555 [Socket] ListenStream = 55555 Accept = true [Install] WantedBy = sockets.target b) Crear el fichero /etc/systemd/system/dateserver@.service con el siguiente contenido: [Unit] Description = Servicio de fecha [Service] Type = simple ExecStart = / opt / dateserver.sh StandardOutput = socket StandardError = journal c) Crear el fichero /opt/dateserver.sh con el siguiente contenido (y dale permisos de ejecuci\u00f3n!): #!/bin/bash while [[true]] do # Atenci\u00f3n: comprueba que date se encuentre dentro de /usr/bin; dependiendo de la distribuci\u00f3n eso cambia /usr/bin/date sleep 1 done d) Abre un terminal y ejecuta el comando nc ipServidor 55555 . \u00bfQu\u00e9 ves? Abre otro terminal diferente y ejecuta el mismo comando. \u00bfQu\u00e9 ves? \u00bfQu\u00e9 te muestra el comando systemctl status dateserver.socket ? \u00bfY el comando systemctl status dateserver@* ? \u00bfY el comando systemctl list-Units dateserver @ * ? 2.- Haz que el servidor SSH que tengas instal.lat a la m\u00e1quina (si no lo tienes, instal.la'l) inicie s\u00f3lo a trav\u00e9s de un socket. concretamente: a) Crear el fichero \"/etc/systemd/system/sshMitjo.socket\" con el siguiente contenido: [Unit] Description = Mi SSH Socket [Socket] ListenStream = 22 Accept = yes [Install] WantedBy = sockets.target b) Crear el fichero \"/etc/systemd/system/sshMitjo@.service\" con el siguiente contenido: [Unido] Description = Mi SSH Server [Service] Type = simple ExecStart = - / usr / sbin / sshd -y StandardInput = socket StandardOutput = socket !!! note \"Nota\" Aqu\u00ed la clave est\u00e1 en la combinaci\u00f3n del par\u00e1metro -y del binario sshd (el cual hace que habilitar la posibilidad de que pueda recibir peticiones a trav\u00e9s de sockets), y la directiva StandardInput (lo realiza de forma efectiva este tipo de comunicaci\u00f3n entre el socket y el servidor SSH) !!! note \"Nota\" Important is the \"-\" in front of the binary name. This ensures that the exit status of the per-connection sshd process isforgotten by systemd. Normally, systemd will store the exit status of a all service instances that die abnormally. SSH will sometimesdie abnormally with an exit code of 1 or similar, and we want to make sure that this doesn't cause systemd to keep aroundinformation for numerous previous connections that died this way (until this information is forgotten with systemctl reset-failed). c) Ejecutar el comando systemctl enable sshMitjo.socket y systemctl disable ssh.service (si fuera necesario) y reinicia la m\u00e1quina. Una vez hecho, comprueba que el socket sshMitjo est\u00e9 funcionando pero no el servicio sshMitjo. Ejecuta ssh usuario @ ipServidor para entrar en el servidor SSH (deber\u00edas de conseguir sin problemas) y comprueba seguidamente que ahora s\u00ed est\u00e1 funcionando una instancia del servicio sshMitjo d) \u00bfQu\u00e9 har\u00eda un comando como systemctl killsshd@172.31.0.52 : 22-172.31.0.4: 47779.service ? 3.-a) En el ejercicio anterior hemos tenido la suerte de que el servidor SSH ofrece un par\u00e1metro (-y) que le permite delegar la apertura de los sockets (puertos) a un \"agente externo\" como es systemd. Pero no siempre tendremos un servidor que ofrezca esta posibilidad. En este sentido, lee los siguientes p\u00e1rrafos y resumen con tus propias palabras que explica: One of the limitations of socket activation is that it requires the activated application to be aware that it may be socket-activated; theprocess of accepting an existing socket is different from creating a listening socket from scratch. Consequently a lot of widely usedapplications don't support it. The systemd developers have known that it may take some time to get activation support everywhere, sothey introduced \"systemd-socket-proxyd\", a small TCP and Unix domain socket proxy server. This does understand activation, andwill sit between the network and our server, transparently forwarding packets between the two. The steps to use this tool are: Step 1: We create a socket that listens on the port that will eventually be served by the proxy/server combination. Step 2: On the first connection to the socket systemd activates the proxy service and hands it the socket. Step 3: When the proxy is started the corresponding server is first brought up (thanks to the Requires/After dependency) The proxy then shuttles all traffic between the server and the network. The only trick here is that we need to bind the server to a portother than the real-target port (8080 instead of 80 if we are running a webserver, for instance). This is because that port will beowned by the socket/proxy, and you can't bind two processes to the same socket and interface. Step 1: \"myserver-proxy.socket\" file [Socket] ListenStream=0.0.0.0:80 [Install] WantedBy=sockets.target Step 2: \"myserver-proxy.service\" file [Unit] Requires=myserver.service After=myserver.service [Service] ExecStart=/usr/lib/systemd/systemd-socket-proxyd 127.0.0.1:8080 Step 3: \"myserver.service\" file [Unit] Description=Server example (replace ExecStart value with something more realistic) [Service] # We listening server's listening port only to loopback interface because it's there where input packages comes from proxyExecStart=/usr/bin/ncat -k -l 127.0.0.1 8080","title":"Systemd"},{"location":"kb/GNU-Linux/Sistema/Systemd/#systemd","text":"","title":"Systemd"},{"location":"kb/GNU-Linux/Sistema/Systemd/#introduccion","text":"Systemd es varias cosas: El proceso Init (PID 1) del sistema El gestor de demonios Un intermediario entre aplicaciones de usuario y ciertas partes de la API del kernel de Linux Despu\u00e9s del Kernel0 es uno de los componentes mas importantes de Linux La configuraci\u00f3n general de systemd se encuentra en el archivo /etc/systemd/system.conf ; muchos valores por defecto est\u00e1n all\u00ed establecidos. Para saber la versi\u00f3n actual de systemd que hay funcionando el sistema, hacer systemctl --version Documentaci\u00f3n extensa sobre Systemd: https://freedesktop.org/wiki/Software/systemd/","title":"Introducci\u00f3n"},{"location":"kb/GNU-Linux/Sistema/Systemd/#units-tipos-y-ubicacion","text":"Todo lo que es gestionado por systemd se llama \"unit\" y cada \"unit\" es descrita por un archivo de configuraci\u00f3n propio, el cual tendr\u00e1 una extensi\u00f3n diferente seg\u00fan el tipo de de unidad que se trate: .service : Describe la configuraci\u00f3n de un demonio .socket : Describe la configuraci\u00f3n de un socket (de tipo UNIX o TCP / IP) asociado a un .service .device : Describe un dispositivo hardware reconocido por el kernel (v\u00eda udev o sysfs) gestionado por systemd .mount : Describe un punto de montaje gestionado por systemd .automount : Describe un punto de automontaje asociado a un .mount .swap : Describe una partici\u00f3n o archivo de intercambio gestionado por systemd .target : Define un grupo de Units (se utiliza a modo de \"metapaquete\" de Units) .path : Describe una carpeta o archivo monitorizado por la API Inotify del kernel .timer : Describe la temporizaci\u00f3n / activaci\u00f3n de una tarea programada (usando el programador systemd) .slice : Define un grupo de Units asociadas a procesos para administrar y limitar los recursos comunes (CPU, memoria, discos, red). Usa internamente los llamados \"cgroups\" del kernel Los archivos de configuraci\u00f3n de las Units (sean del tipo que sean) pueden estar repartidos en tres carpetas distintas: /usr/lib/systemd/system : Para Units proporcionadas por los paquetes instalados en el sistema /run/systemd/system : Para Units generadas en tiempo real durante la ejecuci\u00f3n del sistema. no persistentes /etc/systemd/system : Para Units proporcionadas por el administrador del sistema Los archivos en /etc/... sobreescriben los archivos hom\u00f3nimos que est\u00e9n en /run/... los cuales sobreescriben los que est\u00e9n en /usr/lib/... (o en algunas distribuciones, /lib/... ). Si no tienen el mismo nombre, todos los archivos de las tres carpetas se mezclan ordenados por su nombre de forma numericoalfab\u00e8tica y se van leyendo en este orden hasta el final. Por otra parte, si dentro de /usr/lib/... , /run/... o /etc/... hay una carpeta llamada como una unit seguido del sufijo \".d\", cualquier archivo con extensi\u00f3n * .conf que haya en su interior ser\u00e1 le\u00eddo justo despu\u00e9s de los ficheros de configuraci\u00f3n de la unit pertinente. Esto sirve para poder a\u00f1adir (o sobreescribir) opciones de configuraci\u00f3n concretas (las presentes en estos archivos) sin tener que tocar las configuraciones \"gen\u00e9ricas\" de la unit. por ejemplo: el archivo /usr/lib/systemd/system/beep.service.d/foo.conf puede ser \u00fatil para modificar la configuraci\u00f3n definida en /usr/lib/systemd/systemd/beep.service (y de este modo, hacer posible que un paquete pueda cambiar la configuraci\u00f3n establecida por otro) y el archivo /etc/systemd/system/beep.service.d/foo.conf puede ser \u00fatil para modificar la configuraci\u00f3n definida en /usr/lib/systemd/system/beep.service (y de este modo, hacer posible que un administrador pueda cambiar ciertas partes de la configuraci\u00f3n de la unit preempaquetada al sistema sin tener que reemplazar completamente). Estos archivos \"override\" (concretamente con el nombre /etc/systemd/system/nomUnit.d/override.conf ) se pueden generar de una manera muy c\u00f3moda y r\u00e1pida con la orden systemctl edit nomUnit Algunas \"units\" contienen un s\u00edmbolo @ en su nombre (por ejemplo, nom@cadena.service ); esto significa que son instancias de una unit-plantilla, el archivo de configuraci\u00f3n de la cual es el que no contiene la parte \"Cadena\" en su nombre (as\u00ed: nombre @.service). La parte \"cadena\" es el identificador de la instancia (de hecho, dentro del archivo de configuraci\u00f3n de la unit-plantilla el valor \"cadena\" sustituye todas las ocurrencias del especificador especial %i).","title":"\"Units\": tipos y ubicaci\u00f3n"},{"location":"kb/GNU-Linux/Sistema/Systemd/#comandos-para-gestionar-units","text":"A continuaci\u00f3n algunos de los comandos m\u00e1s importantes para gestionar Units principalmente (No exclusivamente) de tipo \"service\": systemctl [list-Units] [-t {service | socket | ...}] [--all | --failed | --state = inactive] Muestra el estado de las Units que est\u00e1n \"activas\" (del tipo indicado, si no se indica, aparecen todas). Si se escribe --state = inactive se muestra el estado de las Units que est\u00e1n \"inactivas\" Como valor del par\u00e1metro --state tambi\u00e9n se puede poner cualquier valor v\u00e1lido de la columna SUB Si se escribe --failed se muestra el estado de todas las Units con errores Si se escribe --all se muestra el estado de todas las Units ( \"activas\", \"inactivas\", con errores y otros) -La diferencia entre las columnas LOAD, ACTIVE y SUB la dice la salida de la propia comando: LOAD = Indica si la Unit ha sido cargada en RAM. Posibles valores: \"loaded\", \"error\", \"Masked\" ACTIVE = Estado gen\u00e9rico de la unit. Posibles valores: \"active\", \"inactive\", \"failed\", \"(des) activating\" SUB = Estado m\u00e1s concreto de la unit, depende del tipo de unit, posibles valores \"plugged\", \"mounted\", \"running\", \"exited\", \"waiting\", \"listening\", etc systemctl [-t {service | socket | ...}] list-unit-files El subcomando list-units s\u00f3lo muestra las units que systemd ha intentado leer y cargar en memoria. Ya que systemd s\u00f3lo lee las units que \u00e9l piensa que necesita, as\u00ed no incluye necesariamente todas las units disponibles en el sistema. Para ver todas las units, incluyendo aquellas que systemd no ha intentando ni siquiera cargar, hay que utilizar list-unit-files . Este subcomando muestra el \"estado de carga\" de cada unit y sus posibles valores son: \"enabled\" o \"enabled-runtime\" : La unit se activar\u00e1 en el siguiente reinicio -y subsiguientes-. NOTA Esto se consigue gracias a la existencia de un enlace al archivo de configuraci\u00f3n de la unit en cuesti\u00f3n dentro de la carpeta /etc/systemd/system/nomTarget.target.wants , creado en alg\u00fan momento previo con el comando systemctl enable (ver m\u00e1s abajo) o de forma manual con ln -s \"static\" : La unit no tiene secci\u00f3n \"[Install]\" en su archivo de configuraci\u00f3n. Esto hace que los comandos systemctl enable (y sobre todo systemctl disable ) no funcionen. Por tanto, el hecho de que la unit est\u00e9 activada o no en un determinado \"target\" depender\u00e1 de la existencia \"est\u00e1tica\" de su enlace correspondiente dentro de la carpeta /etc/systemd/system/nomTarget.target.wants . Este tipo de units suelen estar asociadas a las que realizan una acci\u00f3n \"oneshot\" o bien a las que son usadas s\u00f3lo como dependencia de alguna otra unit (y por tanto no deben ejecutarse por s\u00ed mismas) \"generated\" : La unit se activar\u00e1 mediante un mecanismo autom\u00e1tico especial llamado \"generator\", ejecutado al arrancar el sistema. Cada unit en este estado tiene su propio \"generator\". \"transient\" : La unit es temporal y no sobrevivir\u00e1 al siguiente reinicio \"disabled\" : La unit est\u00e1 desactivada y, por tanto, no se pondr\u00e1 en marcha en los siguientes reinicios (gracias a la inexistencia del enlace correspondiente dentro de /etc/systemd/system/nomTarget.target.wants ). Tampoco podr\u00e1 ser iniciada autom\u00e1ticamente mediante otros sistemas (como v\u00eda socket, v\u00eda D-Bus o bien v\u00eda conexi\u00f3n de hardware. No obstante, podr\u00e1 ser puesta en marcha en cualquier momento \"manualmente\" ejecutando systemctl start ( ver m\u00e1s abajo) \"Masked\" o \"Masked-runtime\" : La unit est\u00e1 Enmascarada (es decir, est\u00e1 desactivada y, por tanto, no se pondr\u00e1 en marcha en los siguientes reinicios ni autom\u00e1ticamente, pero adem\u00e1s, tampoco podr\u00e1 ser puesta nunca en marcha manualmente con systemctl start ni siquiera si es una dependencia de otro servicio) systemctl {start | stop | restart} nomUnit[.service] Activa / Desactiva / Reiniciar la unit indicada inmediatamente siguiendo las indicaciones escritas en su archivo de configuraci\u00f3n correspondiente. !!! note \"NOTA\" Si la unit no fuera de tipo \".service\", entonces habr\u00e1 que indicar su tipo expl\u00edcitamente \u00faltima su nombre (por ejemplo, systemctl start nomUnit.socket ). Esta norma es extensiva para el resto de comandos systemctl {enable | disable} nomUnit[.service] Activar\u00e1 / desactivar\u00e1 autom\u00e1ticamente la unit indicada a partir del siguiente reinicio (y siguientes) !!! note \"NOTA\" En realidad lo que hace enable / disable es crear / eliminar un enlace dentro de la carpeta /etc/systemd/systemd/nomTarget.target.wants al archivo de configuraci\u00f3n de la unit en cuesti\u00f3n (donde \"nomTarget\" viene definido en la directiva WantedBy de la secci\u00f3n \"[Install]\" de dicho archivo). systemctl {mask | unmask} nomUnit [.service] Enmascara / desenmascarar la unit indicada. !!! note \"NOTA\" Esto lo consigue vinculando el archivo de configuraci\u00f3n ubicado en /etc/... de la unit en cuesti\u00f3n a /dev/null systemctl is-enabled nomUnit[.service] Devuelve $? = 0 si la unit indicada est\u00e1 configurada para activarse en los siguientes reinicios (es decir, si est\u00e1 en los estados listados para systemctl list-unit-files : \"enabled\", \"enabled-runtime\", \"static\", \"Generated\" o \"transient\") y adem\u00e1s, muestra en pantalla este estado. systemctl is-active nomUnit [.service] Devuelve $? = 0 si la unit indicada est\u00e1 activa y, adem\u00e1s, muestra en pantalla este estado (valor listado en la columna ACTIVE de systemctl list-units) systemctl is-failed nomUnit[.service] Devuelve $? = 0 si la unit indicada fall\u00f3 al intentar activarse y, adem\u00e1s, muestra en pantalla este estado. Si no queremos que se muestren los estados en pantalla (esto tambi\u00e9n por is-enabled y is-active ), se puede a\u00f1adir el par\u00e1metro -q NOTA Una unit puede estar en estado \"failed\" por m\u00faltiples razones: porque el proceso ha terminado con un c\u00f3digo de error diferente de 0, porque ha finalizado de forma anormal, porque se ha superado un timeout determinado, etc. systemctl status {nomUnit [.service] | PID} Muestra el estado e informaci\u00f3n variada sobre la Unit o proceso indicado. Si se indica una unit se puede ver ...: Loaded: loaded (/usr/lib/systemd/system/cups.service; enabled; vendor preset: disabled) Active: active (running) since Sat 2017-11-18 20:48:06 CET; 4h 2min agosto Docs: man: cupsd (8) Main PID : 745 (cupsd) Status: \"Scheduler is running ...\" Tasks: 1 (l\u00edmite: 4915) CGroup: /system.slice/cups.service \u2514\u2500745 / usr / sbin / cupsd -l \u00daltimas l\u00edneas de journald -u (se puede usar los par\u00e1metros hom\u00f3nimos -n n\u00ba y -o xxx) Los valores para la l\u00ednea \"Loaded:\" son los mismos que aparecen en la columna LOAD de list-units Seguidamente se indican los valores del estado actual y el predefinido por paquete, que ser\u00e1n uno de los detallados anteriormente al hablar de list-unit-files Los valores para la l\u00ednea \"Active:\" son los mismos que aparecen en la columna ACTIVE de list-Units El punto ( \"\u25cf\") es blanco si la unit est\u00e1 \"inactive\"; rojo si \"failed\" o verde si \"active\" Si se indica un PID en vez de una unit, se puede ver la misma informaci\u00f3n, pero esta manera puede ser \u00fatil para conocer la unit a la que est\u00e1 asociado un determinado proceso, por ejemplo (aunque para conocer esta informaci\u00f3n tambi\u00e9n se podr\u00edan observar los valores de la columna \"unit\" mostrada para el comando ps -o si as\u00ed se indica con el par\u00e1metro -o ): cups.service - CUPS Scheduler Loaded: loaded ( /usr/lib/systemd/system/cups.service ; enabled; vendor preset: Active: active (running) since Sat 2017-11-18 20:48:06 CET; 4h 2min agosto Docs: man: cupsd (8) Main PID: 745 (cupsd) Status: \"Scheduler is running ...\" Tasks: 1 (l\u00edmite: 4915) CGroup: /system.slice/cups.service \u2514\u2500745 / usr / sbin / cupsd -l \u00daltimas l\u00edneas de journald _PID = (se puede usar los par\u00e1metros hom\u00f3nimos -n n\u00ba y -o xxx) systemctl show {nomUnit [.service] | PID} Muestra la configuraci\u00f3n actual de la Unit (obtenida a partir del archivo general system.conf y del archivo de configuraci\u00f3n propio de la unit) indicada en un formato adecuado para ser procesado por m\u00e1quinas. con el par\u00e1metro -p \"nomClave, OtroNombre,... se pueden obtener s\u00f3lo las parejas clave <-> valor deseadas. systemctl daemon-reload Actualizar todos los archivos de configuraci\u00f3n de Units nuevas o modificadas desde la \u00faltima vez que se puso en marcha systemd (incluyendo los generators). systemctl help nomUnit [.service] Abre la p\u00e1gina man asociada a la Unit indicada (en su fichero de configuraci\u00f3n debe venir indicada) systemctl edit nomUnit [.service] Crea (con el editor de texto predeterminado del sistema) un fichero de configuraci\u00f3n (inicialmente vac\u00edo) para la Unit indicada llamado /etc/systemd/system/nomUnit.tipusUnit.d/override.conf para sobrescribir (o ampliar) la configuraci\u00f3n ya existente por ella. Una vez guardados los cambios, recarga la Unit autom\u00e1ticamente con esta nueva configuraci\u00f3n. Si se quisiera editar directamente el archivo /etc/systemd/system/nomUnit.tipoUnit , hay que a\u00f1adir entonces el par\u00e1metro --full systemctl cat nomUnit [.service] Muestra la configuraci\u00f3n final actual resultante de haber le\u00eddo los diferentes ficheros de configuraci\u00f3n posibles de la Unit indicada systemd-delta Muestra qu\u00e9 archivos de configuraci\u00f3n de Units est\u00e1n sobreescritos o ampliados (de /usr /lib a /etc y / o con archivos \"overrides\"), enmascarados, redireccionados (con la l\u00ednea Alias \u200b\u200b= de la secci\u00f3n [Install]), etc y por cu\u00e1les systemctl kill [--signal = n\u00ba] nomUnit [.service] Env\u00eda una se\u00f1al concreta (indicada con el par\u00e1metro --signal ; por defecto es la n\u00ba15, SIGTERM) a todos los procesos asociados a la Unit indicada. !!! note \"NOTA\" kill goes directly and sends a signal to every process in the group, however stop goes through the official configured way to shut down a service, i.e. invokes the stop command configured with ExecStop= in the service file. Usually stop should be sufficient. kill is the tougher version, for cases where you either don't want the official shutdown command of a service to run, or when the service is hosed and hung in other ways.","title":"Comandos para gestionar Units"},{"location":"kb/GNU-Linux/Sistema/Systemd/#servicios-systemd-por-usuario","text":"Systemd tambi\u00e9n permite definir servicios para que no est\u00e9n asociados al sistema global sino que \u00fanicamente formen parte de la sesi\u00f3n de un usuario est\u00e1ndar, gener\u00e1ndose una instancia particular del servicio para cada usuario activo en la m\u00e1quina. De este modo, cada instancia se iniciar\u00e1 autom\u00e1ticamente despu\u00e9s de iniciar la sesi\u00f3n de un usuario y se parar\u00e1 al salir. !!! note \"NOTA\" Esto es posible gracias a que justo despu\u00e9s del primer inicio de sesi\u00f3n que se realice al sistema se pone en marcha (gracias al m\u00f3dulo PAM \"pam_systemd\") el comando systemd -user ( que es quien permitir\u00e1 este funcionamiento individual para todas las sesiones de usuarios que se inicien a partir de entonces), adem\u00e1s del proceso con PID 1 propiamente dicho, que es systemd -system . El proceso systemd -user finalizar\u00e1 autom\u00e1ticamente justo despu\u00e9s de haberse cerrado el \u00faltimo inicio de sesi\u00f3n existente al sistema. Los ficheros de configuraci\u00f3n de las Units \"de tipo usuario\" se encuentran en otras carpetas separadas de las de las Units \"de sistema\". Concretamente (se muestran en orden de precedencia ascendente): /usr/lib/systemd/user : Para Units proporcionados por los paquetes instalados en el sistema ~/.local/share/systemd/user : Para Units de paquetes que han sido instaladas en la carpeta personal /etc/systemd/user : Para Units proporcionados por administrador del sistema ~/.config/systemd/user : Para Units construidas por el propio usuario !!! note \"NOTA\" La variable especial %h se puede utilizar dentro de los archivos de configuraci\u00f3n de las Units \"de usuario\" para indicar la ruta de la carpeta personal del usuario en cuesti\u00f3n. Otra caracter\u00edstica de las Units \"de usuario\" es que pueden ser gestionadas por parte de este usuario sin que deba ser administrador del sistema; esto lo puede hacer con las mismas \u00f3rdenes systemctl... ya conocidas a\u00f1adiendo el par\u00e1metro --user . As\u00ed, por ejemplo, para arrancar un servicio autom\u00e1ticamente cada vez que se inicie nuestra sesi\u00f3n habr\u00e1 que ejecutar systemctl --user enable nomUnit ; para ver el estado de todas nuestras Units \"de usuario\" habr\u00e1 que hacer systemctl --user list-units ; para recargar las Units modificadas habr\u00e1 que hacer systemctl --user daemon-reload , etc","title":"Servicios Systemd por Usuario"},{"location":"kb/GNU-Linux/Sistema/Systemd/#ejemplo-de-servicio-por-usuario-para-mkdocs-autoarrancable-al-iniciar-sesion","text":"Crearemos un servicio de usuario que permitir\u00e1 arrancar el comando mkdocs con la opci\u00f3n serve y har\u00e1 disponible de forma autom\u00e1tica el servidor web incorporado de mkDocs para consultar estas notas. Creamos un fichero ~/.config/systemd/user/docs.service con el contenido: [Unit] Description = MkDocs Notas [Service] Type = simple ExecStart = /usr/local/bin/mkdocs serve -f /home/javier/Documentos/Documentos/docs/mkdocs.yml [Install] WantedBy = multi-user.target * A continuaci\u00f3n recargamos las units con el comando reload, activamos el servicio para sucesivos reinicios y hacemos que arranque, con los siguientes comandos: systemctl --user daemon-reload systemctl --user enable docs systemctl --user start docs !!! note \"Nota\" observa el uso del par\u00e1metro --user en los coomandos anteriores, lo cual indica que las operaciones solo afectan al usuario actual, no a todo el sistema. ##Ficheros configuraci\u00f3n de Units","title":"Ejemplo de servicio por usuario para mkDocs Autoarrancable al iniciar sesi\u00f3n"},{"location":"kb/GNU-Linux/Sistema/Systemd/#estructura-interna","text":"La estructura interna de los archivos de configuraci\u00f3n de las Units est\u00e1 organizada en secciones, distinguidas cada una por un encabezamiento sensible a may\u00fasculas y min\u00fasculas rodeado de corchetes ( [Encabezamiento] ). Dentro de las secciones se definen diferentes directivas (tambi\u00e9n may\u00fasculas y min\u00fasculas) en la forma de parejas NomDirectiva = valor , donde el valor puede ser una palabra, una frase, una ruta, un n\u00famero, true/yes, false/no, una fecha, etc, dependiendo de su significado. !!! note \"NOTA\" NOTA: Tambi\u00e9n pueden existir directivas donde no se escriba ning\u00fan valor (es decir, as\u00ed: NomDirectiva = ). En este caso, se estar\u00e1 \"Reseteando\" (es decir, anulando) el valor que previamente se hubiera dado en otro sitio ####Secci\u00f3n [Unit] La primera secci\u00f3n (aunque el orden no importa) suele ser la llamada [Unit] y se utiliza para definir datos sobre la propia Unit en s\u00ed y la relaci\u00f3n que tiene con otras Units. algunas de sus directivas m\u00e1s habituales son: Description = Una breve descripci\u00f3n de la Unit Su valor es devuelto por diferente herramientas systemd * Documentation = man: sshd (8) https: //ruta/pag.html Proporciona una lista de URIS que apuntan a documentaci\u00f3n de la Unit. El comando systemctl status las muestra * Wants = unservicio.service otro.servicio untarget.target ... Lista las Units que deber\u00edan estar iniciadas para que el Unit en cuesti\u00f3n pueda funcionar correctamente. Si no lo est\u00e1n ya, systemd las iniciar\u00e1 en paralelo junto con el Unit en cuesti\u00f3n; si se quiere indicar un cierto orden en vez de iniciar todas en paralelo, se puede utilizar las directivas After = o Before =. Si alguna de las Units listadas falla al iniciarse, el Unit en cuesti\u00f3n se iniciar\u00e1 igualmente * Requires = unservicio.service otro.service untarget.target ... Lista las Units que imprescindiblemente deben estar iniciadas para que el Unit en cuesti\u00f3n pueda funcionar correctamente. Si no lo est\u00e1n ya, systemd las iniciar\u00e1 en paralelo junto con el Unit en cuesti\u00f3n; si se quiere indicar un cierto orden en vez de iniciar todas en paralelo, se puede utilizar las directivas After = o Before =. Si alguna de las Units listadas falla al iniciarse, el Unit en cuesti\u00f3n tambi\u00e9n fallar\u00e1 autom\u00e1ticamente * BindsTo = unservei.service unaltre.service untarget.target ... Similar a Requires = pero, adem\u00e1s, hace que el Unit en cuesti\u00f3n se detenga autom\u00e1ticamente si alguna de las Units asociadas finaliza. * Before = unservei.service unaltre.service untarget.target ... Indica, de las Units listadas en las directivas Wants = o Requires =, qu\u00e9 no se iniciar\u00e1n en paralelo sino tras la Unit en cuesti\u00f3n. Si aqu\u00ed se indicara alguna Unit que no se encontrara listada en Wants = o Requires =, esta directiva no se tendr\u00e1 en cuenta. * After = unservei.service unaltre.service untarget.target ... Indica, de las Units listadas en las directivas Wants = o Requires =, qu\u00e9 no se iniciar\u00e1n en paralelo sino antes de la Unit en cuesti\u00f3n. Si aqu\u00ed se indicara alguna Unit que no se encontrara listada en Wants = o Requires =, esta directiva no se tendr\u00e1 en cuenta. !!! note \"NOTA\" Lo m\u00e1s t\u00edpico es tener una Unit A que necesita que la Unit B est\u00e9 funcionando previamente para poderse poner en marcha. En este caso, simplemente habr\u00eda que a\u00f1adir las l\u00edneas Requires = B y After = B en la secci\u00f3n [Unit] del Unit A. Si la dependencia es opcional, se puede sustituir Requires = B por Wants = B Conflicts = unservei.service unaltre.service ... Lista las Units que no pueden estar funcionando a la vez que el Unit en cuesti\u00f3n. iniciar una Unit con esta directiva causar\u00e1 que las aqu\u00ed listadas se detengan autom\u00e1ticamente. ConditionXXXX = ... Hay un conjunto de directivas que empiezan por \"Condition\" que permiten al administrador comprobar ciertas condiciones antes de iniciar el Unit. Si la condici\u00f3n no se cumple, la Unit es ignorada. Algunos ejemplos son: ConditionKernelCommandLine = param [= valor] ConditionACPower = {yes | no} ConditionPathExists = [!] / Ruta / archivo / o / carpeta ConditionPathExistsGlob = [!] / Ruta / archivos / o / carpetas ConditionPathIsDirectory = [!] / Ruta / carpeta ConditionPathIsSymbolicLink = [!] / Ruta / enlace ConditionPathIsMountPoint = [!] / Ruta / carpeta ConditionPathIsReadWrite = [!] / Ruta / archivo / o / carpeta ConditionDirectoryNotEmpty = [!] / Ruta / carpeta ConditionFileNotEmpty = [!] / Ruta / archivo ConditionFileIsExecutable = [!] / Ruta / archivo AssertXXXX = ... Al igual que con \"ConditionXXX\", hay un conjunto de directivas que empiezan por \"Assert\" que permiten al administrador comprobar ciertas condiciones antes de iniciar el Unit. la diferencia es que aqu\u00ed, si la condici\u00f3n no se cumple, se emite un error. .OnFailure = unaunit.service otro.service ... Indica las Units que se activar\u00e1n cuando la Unit en cuesti\u00f3n entre en estado \"failed\". esta directiva puede utilizarse, por ejemplo, para ejecutar una Unit que env\u00ede un correo electr\u00f3nico cuando la Unit en cuesti\u00f3n, que podr\u00e1 ser un servicio, falle. AllowIsolate = yes Esta directiva s\u00f3lo tiene sentido para Units de tipo target. Si su valor es \"yes\" (por defecto es \"no\") indica que el target en cuesti\u00f3n admitir\u00e1 que se le aplique el comando systemctl Isolate (ver m\u00e1s abajo) ####Secci\u00f3n [Install] Por otra parte, la \u00faltima secci\u00f3n (aunque el orden no importa) de un archivo de configuraci\u00f3n de una Unit siempre suele ser la llamada [ Install ] , la cual, atenci\u00f3n, es opcional. Se utiliza para definir c\u00f3mo y cuando la Unit puede ser activada o desactivada. Algunas de sus directivas m\u00e1s habituales son: WantedBy = untarget.target unaltre.target ... Indica los targets donde el Unit en cuesti\u00f3n se activar\u00e1 al ejecutar el comando systemctl enable Cuando se ejecuta este comando, lo que pasa es que por cada target indicado aqu\u00ed aparecer\u00e1,dentro de cada carpeta /etc/systemd/system/nomTarget.wants respectiva, un enlace simb\u00f3lico apuntando al propio archivo de configuraci\u00f3n del Unit en cuesti\u00f3n. La existencia de este enlace es el que realmente activa de forma efectiva un servicio autom\u00e1ticamente. Eliminar los links de todas las carpetas \"nomTarget.wants\" pertinentes implica desactivar la Unit (que es lo que hace, de hecho,el comando systemctl disable a partir de la lista de targets que encuentra en la l\u00ednea WantedBy = ). Por ejemplo, si el archivo de configuraci\u00f3n de la Unit en cuesti\u00f3n (que llamaremos pepito.service) tiene una l\u00ednea como WantedBy = multi-user.target, al ejecutar systemctl enable pepito.service aparecer\u00e1 dentro de la carpeta /etc/systemd/system/multi-user.wants un link apuntando a este archivo de configuraci\u00f3n * RequiredBy = untarget.target unaltre.target ... Similar a WantedBy = pero donde el fallo del Unit en cuesti\u00f3n al ejecutar systemctl enable har\u00e1 que los targets indicados aqu\u00ed no puedan llegar a alcanzarse. La carpeta donde se encuentra el link de la Unit en este caso se denomina /etc/systemd/system/nomTarget.requires * Alias \u200b\u200b= unaltrenom.tipusUnit Permite al Unit en cuesti\u00f3n ser activada con systemctl enable utilizando otro nombre diferente * Also = unservei.service unaltre.service ... Permite activar o desactivar diferentes Units como conjunto. La lista debe consistir en todas las Units que tambi\u00e9n se quieren tener habilitadas cuando la Unit en cuesti\u00f3n est\u00e9 habilitada ####Secci\u00f3n [Service] (para Units de tipo .service): Dependiendo del tipo de Unit que tengamos nos podremos encontrar con diferentes secciones espec\u00edficas dentro de su fichero de configuraci\u00f3n, normalmente escritas entre la secci\u00f3n [Unit] el principio y la secci\u00f3n [Install] del final (si existe). En el caso de las Units de tipo \"service\", por ejemplo, nos encontramos con la secci\u00f3n espec\u00edfica llamada [Service] , la cual puede incluir diferentes directivas como las siguientes: !!! note \"NOTA\" Las Units de tipo device, snapshot y target no tienen secciones espec\u00edficas Type = maneraDarrancar Existen diferentes m\u00e9todos para iniciar un servicio, y el m\u00e9todo elegido, el cual depender\u00e1 del tipo de ejecutable a poner en marcha, se indicar\u00e1 en esta directiva. Las posibilidades m\u00e1s comunes son: * simple : El servicio nativamente se queda en primer plano de forma indefinida y es systemd quien lo pone en segundo plano (le crea un fichero PID, lo para cuando sea necesario, etc). Systemd interpreta que el servicio est\u00e1 listo luego que el ejecutable asociado se pone en marcha (aunque esto sea demasiado pronto para que no est\u00e9 listo todav\u00eda para recibir peticiones) * forking : El servicio nativamente ya se pone en segundo plano. Systemd interpreta que el servicio est\u00e1 listo cuando pasa efectivamente a segundo plano. En este caso conviene indicar tambi\u00e9n la directiva PidFile=/ruta/fitxer.pid para que systemd tenga un control sobre qu\u00e9 proceso es el que est\u00e1 en segundo plano y lo pueda identificar * oneshot : \u00datil para scripts, que se ejecutan (haciendo systemctl start igualmente) una vez y finalizan.Systemd esperar\u00e1 hasta que el proceso finalice e interpreta que est\u00e1 listo cuando haya finalizado. Se puede considerar el uso de la directiva RemainAfterExit = yes para \"enga\u00f1ar\" a systemd dici\u00e9ndole que el servicio contin\u00faa activo aunque el proceso haya finalizado; en este caso, la directiva ExecStop = no se llegar\u00e1 a hacer efectiva nunca. Tambi\u00e9n est\u00e1n las posibilidades dbus (similar a \"simple\" pero systemd interpreta que est\u00e1 listo cuando el nombre indicado en BusName = ha sido adquirido), idle (similar a \"simple\" pero con la ejecuci\u00f3n retrasada hasta que no se ejecute nada m\u00e1s; se puede utilizar este m\u00e9todo, por ejemplo, para emitir un sonido justo despu\u00e9s de la finalizaci\u00f3n del arranque del sistema.) y notify (El sistema m\u00e1s completo, donde se establece un canal de comunicaci\u00f3n interno entre el servicio y Systemd para notificarse estados y eventos v\u00eda la API propia de systemd sd_notify () y donde Systemd interpreta que est\u00e1 listo cuando recibe el estado correspondiente a trav\u00e9s de este canal; si queremos que scripts utilicen este m\u00e9todo hay que usar el comando systemd-notify ) * ExecStart = /ruta/ejecutable param1 param2 ... Indica el comando (y par\u00e1metros) a ejecutar cuando se realiza un systemctl start Si la ruta de el ejecutable comienza con un gui\u00f3n ( \"-\"), valores de retorno del comando diferentes de 0 (que normalmente se considerar\u00edan se\u00f1al de error) se considerar\u00e1n como v\u00e1lidos. !!! note \"Nota\" Podemos utilizar incluso la directiva SuccessExitStatus = para indicar qu\u00e9 valor consideramos como salida exitosa del programa !!! note \"Nota\" No habr\u00eda que escribir la ruta absoluta del ejecutable si \u00e9sta se encuentra en la lista de rutas que muestra el comando systemd-path , pero en general se recomienda escribirla para evitar sorpresas !!! note \"Nota\" No se permiten escribir redireccionador ( \">\", \">>\", \"<\". \"|\") Ni el s\u00edmbolo \"&\" para pasar a segundo plano * ExecStartPre = /ruta/ejecutable param1 param2 ... Indica el comando (y par\u00e1metros) a ejecutar antes de lo indicado en ExecStart. pueden haber m\u00e1s de una l\u00ednea ExecStartPre en el mismo archivo, ejecut\u00e1ndose entonces cada una por orden. la ruta del ejecutable tambi\u00e9n puede ir precedida de un gui\u00f3n ( \"-\"), con el mismo significado * ExecStartPost = / ruta / ejecutable param1 param2 ... Indica el comando (y par\u00e1metros) a ejecutar despu\u00e9s de la indicada en ExecStart. pueden haber m\u00e1s de una l\u00ednea ExecStartPost en el mismo archivo, ejecut\u00e1ndose entonces cada por orden. un ejemplo de posible uso: el env\u00edo de un correo justo despu\u00e9s de haberse puesto en marcha el servicio correspondiente.La ruta del ejecutable tambi\u00e9n puede ir precedida de un gui\u00f3n ( \"-\"), con el mismo significado * ExecStop = /ruta/ejecutable param1 param2 ... Indica el comando (y par\u00e1metros) a ejecutar cuando se realiza un systemctl stop Hay que tener en cuenta que en el caso de un servicio de tipo \"oneshot\", si no se especifica la directiva RemainAfterExit = yes , el comando indicada en ExecStop se ejecutar\u00e1 autom\u00e1ticamente justo tras ExecStart. * ExecStopPost = / ruta / ejecutable param1 param2 ... Indica el comando (y par\u00e1metros) a ejecutar despu\u00e9s de lo indicado en ExecStop. pueden haber m\u00e1s de una l\u00ednea ExecStartPost al mismo archivo, ejecut\u00e1ndose entonces cada por orden. * Restart = {always | no | on-success | on-failure | ...} Indica las circunstancias bajo las que systemd intentar\u00e1 reiniciar autom\u00e1ticamente un servicio que haya finalizado. En concreto, el valor \"always\" indica que en cualquier tipo de finalizaci\u00f3n se volver\u00e1 a intentar reiniciar; el valor \"no\" indica que en ning\u00fan finalizaci\u00f3n intentar\u00e1 reiniciar, el valor \"on-success\" indica que s\u00f3lo se intentar\u00e1 reiniciar si la finalizaci\u00f3n ha sido correcta y \"on-failure\" si la finalizaci\u00f3n no lo ha sido debido a cualquier tipo de fallo (ya sea que se ha sobrepasado el tiempo de espera del arranque o el apagado, que se ha devuelto un valor diferente de 0, etc) !!! note \"Nota\" Se podr\u00eda dar el caso de que un servicio estuviera reinici\u00e1ndose todo el rato. Con StartLimitBurts = se puede configurar el n\u00famero m\u00e1ximo de veces que se quiere que se reinicie y con StartLimitIntervalSec = se puede configurar el tiempo durante el cual se contar\u00e1 este n\u00famero m\u00e1ximo de veces. Si se llega a este n\u00famero dentro de este tiempo, el servicio no se volver\u00e1 a reiniciar autom\u00e1ticamente y tampoco se podr\u00e1 iniciar manualmente hasta pasado el tiempo indicado (momento en el que se vuelve a contar). Tambi\u00e9n existe la directiva StartLimitAction = , que sirve para indicar la acci\u00f3n a realizar cuando se alcanza el n\u00famero m\u00e1ximo de reinicios; su valor por defecto es \"None\" pero puede valer tambi\u00e9n \"reboot\" (reinicio limpio), \"reboot-force\" (reinicio abrupto) y \"reboot-immediate\" (reinicio muy abrupto) * RestartSec = n\u00bas Indica el n\u00famero de segundos que systemd esperar\u00e1 al reiniciar el servicio despu\u00e9s de que haya detenido (si as\u00ed lo marca la directiva Restart =). * TimeoutSec = n\u00ba Indica el n\u00famero de segundos que systemd esperar\u00e1 a que el servicio en cuesti\u00f3n inicie o detenga antes de marcarlo como \"failed\" (y reiniciarlo si fuera el caso debido a la configuraci\u00f3n de la directiva Restart =). Se puede indicar espec\u00edficamente un tiempo de espera s\u00f3lo para el inicio con la directiva TimeoutStartSec = y otro tiempo de espera diferente por el apag\u00f3n con la directiva TimeoutStopSec = . Si no se especifica nada, se toma el valor por defecto (5 min) que est\u00e1 indicado en /etc/systemd/system.conf * RemainAfterExit = yes Tal como ya lo hemos comentado, esta directiva se utiliza en servicios de tipo \"oneshot\" para que la directiva ExecStop = no se ejecute al terminar la ejecuci\u00f3n del comando sino al hacer systemctl stop * PidFile = /ruta/fitxer.pid Tal como ya lo hemos comentado, esta directiva se utiliza en servicios de tipo \"forking\" para se\u00f1alar a systemd cu\u00e1l ser\u00e1 el archivo PID utilizado por el servicio de manera que pueda controlar m\u00e1s f\u00e1cilmente. * User = unusuari * Group = ungrup Set the user or group that the processes are executed as, respectively. They can take a single user/group name, or a numeric ID as argument. For system services (services run by the system service manager, i.e. managed by PID 1) the default is \"root\". For user services of any other user, switching user identity is not permitted, hence the only valid setting is the same user the user's service manager is running as. If no group is set, the default group of the user is used. * WorkingDirectory = / ruta / carpeta Indica el directorio de trabajo del servicio en cuesti\u00f3n. Si no se especifica esta directiva, el valor por defecto es \"/\" (en el caso de servicios de sistema) o $ HOME (en el caso de servicios de usuario , es decir, iniciados con --user -). Si la ruta se precede con un s\u00edmbolo \"-\", el hecho de que la carpeta correspondiente no exista no se interpretar\u00e1 como un error. Si se ha indicado la directiva User =, se puede escribir \"~\" como valor de esta directiva, equivalente as\u00ed a la ruta de la carpeta personal del usuario indicado en User =. * StandardOutput = {null | tty | journal | socket} Indica donde se imprimir\u00e1 la salida est\u00e1ndar de los programas indicados en las directivas ExecStart =, y ExecStop =. El valor \"null\" representa el destino / dev / null. El valor \"tty\" representa un terminal (ya sea de tipo virtual - / dev / ttyX- o pseudo - / dev / pts / X-), el cual deber\u00e1 ser especificado mediante la directiva TTYPath = . El valor \"journal\" es el valor por defecto (es decir, que si el programa en cuesti\u00f3n imprimiera algo en la pantalla del terminal al ejecutarse en primer plano, esta salida se redireccionar\u00e1 el Journal en ejecutarse v\u00eda un archivo .service). El valor \"socket\" sirve para indicar que la salida debe enviarse al socket asociado al servidor con el fin de viajar al otro extremo de la comunicaci\u00f3n (ver m\u00e1s adelante). !!! note \"NOTA\" NOTA: El hecho de que por defecto la salida est\u00e1ndar vaya a parar en el Journal se puede cambiar de forma general para todas las Units en la directiva DefaultStandardOutput del archivo /etc/systemd/system.conf !!! note \"NOTA\" Tambi\u00e9n existe la directiva StandardError = {null | tty | journal | socket} , similar a StandardOutput = pero para la salida de error ###EJERCICIOS Todos los ejercicios se har\u00e1n en una m\u00e1quina virtual donde el usuario pueda tener permisos de administrador: A) Ejecutar systemctl list-Units -t service | grep ufw (si est\u00e1s en Ubuntu) o systemctl list-Units -t service | grep firewalld (si est\u00e1 en Fedora). \u00bfQu\u00e9 significa la palabra \"loaded\"? Y \"active\"? Confirma esto ejecutando systemctl status ufw / systemctl status firewalld B) Ahora enmascara la Unit ufw / firewalld. \u00bfQu\u00e9 pasa realmente cuando s'enmascara una Unit? Pista: consulte donde apunta el reci\u00e9n creado archivo /etc/systemd/system/ufw.service (o /etc/systemd/system/firewalld.service ) C) Ejecutar systemctl list-Units -t service | grep ufw (o systemctl list-Units -t service | grep firewalld ) de nuevo. \u00bfPor qu\u00e9 todav\u00eda aparece la palabra \"active\"? Confirma esto ejecutando systemctl status ufw / systemctl status firewalld D) Si ahora ejecutas systemctl stop ufw (o systemctl stop firewalld ) , \u00bfqu\u00e9 muestra systemctl list-Units -t service | grep ufw (o systemctl list-Units -t service | grep firewalld )? \u00bfPor qu\u00e9? \u00bfQu\u00e9 deber\u00edas hacer para que vieras algo? Pista: usa el par\u00e1metro --all E) Ejecutar el comando systemd-delta . \u00bfQu\u00e9 significa la relaci\u00f3n indicada entre los dos archivos que aparecen en la l\u00ednea [Masked]? \u00bfY entre los dos archivos que aparecen en las l\u00edneas [EXTENDED]? !!! note \"NOTA\" Tambi\u00e9n podr\u00eda haber alguna pareja de archivo en l\u00edneas [overrides] o incluso [EQUIVALENTE] F) Intenta iniciar el Unit ufw (o firewalld) todav\u00eda Enmascarado. Puedes? Desenmascara y vuelve a intentarlo. puedes ahora? G) Ejecutar el comando systemctl edit ufw (o systemctl edit firewalld ) y, en el editor de texto que aparece, escribe la l\u00ednea Description = Hola amigo y guarda. A continuaci\u00f3n, ejecuta systemctl cat ufw (o systemctl cat firewalld ) . \u00bfQu\u00e9 ves? Y si vuelves a ejecutar systemd-delta ? 2. A) Crear un archivo llamado /etc/systemd/system/pepe.service con el siguiente contenido ...: [Unit] Description = Pepe se colega [Service] Type = oneshot ExecStart = / bin / ls -l ExecStop = / bin / df -h [Install] WantedBy = multi-user.target ... y a continuaci\u00f3n (despu\u00e9s de systemctl daemon-reload ) ejecuta systemctl start pepe Qu\u00e9 ves? Y si haces journalctl -e , \u00bfqu\u00e9 ves? \u00bfPor qu\u00e9? B) \u00bfQu\u00e9 deber\u00edas modificar del archivo anterior para que el comando /bin/df -h no se ejecutara justo despu\u00e9s de /bin/ls -l sino s\u00f3lo cuando se escriba systemctl stop pepe ? Pista: consulta la explicaci\u00f3n del tipo \"oneshot\" en la teor\u00eda. Pru\u00e9balo utilizando los comandos systemctl -full edit pepe , systemctl daemon-reload y, de nuevo, journalctl -e C) Para qu\u00e9 sirve la l\u00ednea WantedBy = ... ? O dicho de otro modo: \u00bfqu\u00e9 relaci\u00f3n tiene esta l\u00ednea con el comando systemctl enable ? Pista: observa el contenido de la carpeta /etc/systemd/system/multi-user.target.wants D) \u00bfQu\u00e9 deber\u00edas modificar del archivo anterior para que la salida de los comandos ejecutadas por la Unit (ya sea \u200b\u200ba ExectStart = o a ExecStop =) no vaya a parar al Journal sino que se visualice el terminal / dev / tty4? Pru\u00e9balo. 3.-a) Crear un script llamado /opt/yeah con el siguiente contenido (y dale permisos de ejecuci\u00f3n): #!/bin/bash while [[true]] do curl -s ipinfo.io/ip / Bin / sleep 3``` d\u00e9 b) Crear un archivo llamado \"/etc/systemd/system/pepa.service\" con el siguiente contenido ...: [Unit] Description = Pepa se colega [Service] Type = simple ExecStartPre = / usr / bin / systemd-cat -t PEPA -p grito echo \"Empieza\" ExecStart = / opt / yeah ExecStop = / usr / bin / systemd-cat -t PEPA -p grito echo \"Termino\" # StandardOutput = null [Install] WantedBy = multi-user.target ... y a continuaci\u00f3n (despu\u00e9s de systemctl daemon-reload ) ejecuta systemctl start pepa . Si haces journalctl -f , que ves? \u00bfPor qu\u00e9? Y si ejecutas systemctl stop pepa , que ves entonces en el Journal? \u00bfPor qu\u00e9? Y si Descomentas la l\u00ednea que aparece comentada y vuelves a probar? 4.-a) Crear un archivo llamado \"fiufiu.service\" dentro de \"/ etc/systemd / system\" con el siguiente contenido ...: [Unido] Description = All we are saying is give peace a chance [Service] Type = simple ExecStart = /usr/bin/nc -l -p 5555 Restart = on-success ... y seguidamente ponerlo en marcha con el comando sudo systemctl start fiufiu . Comprueba con systemctl status fiufiu (o tambi\u00e9n con ss -tnl ) que se haya iniciado correctamente b) Ejecutar el comando journalctl -ef y seguidamente, abre otro terminal para ejecutar en ellos el comando nc 127.0.0.1 5555 . Escribe algo la conexi\u00f3n abierta para este cliente Netcat y observa a la vez lo que aparece en tiempo real en el Journal. \u00bfQu\u00e9 pasa? \u00bfPor qu\u00e9? c) Cerrar el cliente y vuelve a ejecutar. \u00bfEl servicio sigue funcionando? Ahora comenta la l\u00ednea Restart = ... que aparece en el archivo fiufiu.service, reinicia el servicio y vuelve a ejecutar el cliente un par de veces. la primera vez deber\u00e1 conectarse sin problemas como siempre pero la segunda ya no. \u00bfPor qu\u00e9? 5.-a) Instal.la el paquete \"apache2\" y observa, ejecutando el comando systemctl cat apache2 , el valor que tiene la directiva Restart =. Ejecuta entonces systemctl --signal = 9 kill apache2 y comprueba con systemctl status apache2 si el servicio reinicia solo o no. \u00bfPor qu\u00e9 pasa lo que pasa? b) Cambiar ahora el valor de la directiva Restart = del Unit del Apache2 mediante systemctl edit --full apache2 para que valga \"no\" (recuerda que escribir como primera l\u00ednea el t\u00edtulo de la secci\u00f3n a la que pertenece la directiva que quieres sobreescribir -es decir, [Service] -). Despu\u00e9s de hacer systemctl daemon-reload (y de comprobar que la modificaci\u00f3n es efectiva con systemd-delta o tambi\u00e9n systemctl cat apache2 ) , inicia el servicio de nuevo y comprueba que efectivamente est\u00e9 iniciado. Vuelve a matar de nuevo con systemctl -signal = 9 kill apache2 y vuelve a comprobar de nuevo si el servicio ha reiniciado autom\u00e1ticamente o no. \u00bfQu\u00e9 pasa ahora? c) Agregar mediante systemctl edit apache2 la l\u00ednea necesaria para llamar a una Unit que se encargue ejecutarse en el modo \"oneshot\" el comando play /ruta/un/fitxer.mp3 cada vez que el Apache finalice debido a alguna situaci\u00f3n inesperada (como por ejemplo ser\u00eda una se\u00f1al kill 9) NOTA\" El comando play encarga de reproducir el archivo de sonido indicado y admite muchos formatos posibles, no s\u00f3lo mp3. Forma parte del paquete \"sox 6.a) Ejecuta systemctl disable ufw (o systemctl disable firewalld ) y seguidamente systemctl show --property \"Wants\" multi-user.target | grep -E \"(ufw | firewalld) \" \u00bfQu\u00e9 ves? \u00bfPor qu\u00e9? Pista: observa el mensaje que aparece en pantalla al deshabilitar el servicio ufw b) Y si ahora ejecutas systemctl enable ufw (o systemctl enable firewalld ) y vuelves a ejecutar el mismo comando? \u00bfQu\u00e9 ves ahora? \u00bfPor qu\u00e9? Pista: observa el contenido de la carpeta /etc/systemd/system/multi-user.target.wants c) Deduce y di por qu\u00e9 la l\u00ednea After = de la Unit ufw.service (o firewalld.service) tiene el valor que tiene. d) systemd puede no ser el proceso INIT de nuestro sistema Linux: aunque sea el m\u00e1s extendido con diferencia, te puedes encontrar distribuciones que utilicen sistemas INIT alternativos. Dime, de los siguientes comandos, cu\u00e1les sirven para comprobar si el proceso INIT de tu sistema es systemd (o no): file /sbin/init man init pgrep ^systemd $ ##Targets Podemos definir un \"target\" como un \"estado\" del sistema definido por un determinado conjunto de servicios puestos en marcha (y otros que no). La idea es que, al arrancar el sistema, se llegue a un determinado \"target\" (Y, opcionalmente, a partir de all\u00ed, poder pasar a otro si fuera necesario). A continuaci\u00f3n se listan los \"targets\" m\u00e1s importantes (todos ellos ubicados dentro de /usr/lib/systemd/system ): poweroff.target (o \"runlevel0.target\") Si se llega a este \"target\", se apaga el sistema reboot.target (o \"runlevel6.target\"): Si se llega a este \"target\", se reinicia el sistema rescue.target (o \"runlevel1.target\"): Si se llega a este \"target\", se inicia el sistema en modo texto,sin red y s\u00f3lo por el usuario root. Ser\u00eda similar a otro target llamado \" emergency.target \", pero el \"emergency\" es m\u00e1s \"radical\" que el \"rescate\" porque gracias a montar la partici\u00f3n ra\u00edz en modo s\u00f3lo lectura permite arrancar sistemas que el \"rescate\" quiz\u00e1s no puede. multi-user.target (o \"runlevel3.target\"): En este caso se inicia el sistema en modo texto pero con red y multiusuario (el target predeterminado en servidores) graphical.target (o \"runlevel5.target\"): En este caso, se inicia el sistema en modo gr\u00e1fico con red y multiusuario (el target por defecto en sistemas de escritorio) Implica haber pasado por el target \"multi-user\" previamente. Otros targets predefinidos que se instalan con systemd y que hay que conocer son: ctrl-alt-del.target Target activado cuando es pulsado CTRL + ALT + SUPR. Por defecto es un enlace a \"reboot.target\" sysinit.target Target que ejecuta los primeros scripts de arranque sockets.target Target que activa, al arrancar, todas las Units de tipo \"socket\". Se recomienda, por tanto, que todos los archivos de configuraci\u00f3n de una Unit \"socket\" tengan a su l\u00ednea Wants = este target indicado (o bien WantedBy =) timers.target Target que activa, al arrancar, todas las Units de tipo \"timer\". Se recomienda, por tanto, que todos los archivos de configuraci\u00f3n de una Unit \"timer\" tengan a su l\u00ednea Wants = este target indicado (o bien WantedBy =) paths.target Target que activa, al arrancar, todas las Units de tipo \"path\". Se recomienda, por tanto, que todos los archivos de configuraci\u00f3n de una Unit \"path\" tengan a su l\u00ednea Wants = este target indicado (o bien WantedBy =) swap.target Target que habilita la memoria swap basic.target Target que pone en marcha todos los target relacionados con puntos de montaje, memorias swaps,paths, timers, sockets y otras unidades b\u00e1sicas necesarias para el funcionamiento del sistema. initrd-fs.target El generador systemd-fstab-generator a\u00f1ade autom\u00e1ticamente las Units indicadas en la directiva Before = de esta Unit a la Unit especial \"sysroot-usr.mount\" (adem\u00e1s de todos los puntos de montaje existentes en /etc/fstab que tengan establecidas las opciones \"auto\" y \"X-initrd.mount\"). Ver m\u00e1s adelante una explicaci\u00f3n de las Units de tipo mount. initrd-root-fs.target El generador systemd-fstab-generator a\u00f1ade autom\u00e1ticamente las Units indicadas en la directiva Before = de esta Unit a la Unit especial \"sysroot-usr.mount\", la cual es generada a partir de los par\u00e1metros del kernel. Lo estudiaremos m\u00e1s adelante local-fs.target El generador systemd-fstab-generator a\u00f1ade autom\u00e1ticamente las Units indicadas en la directiva Before = de esta Unit a todas las Units de tipo \"mount\" que se refieren a puntos de montaje locales. Tambi\u00e9n a\u00f1ade a este target las dependencias de tipo Wants = correspondientes a los puntos de montaje existentes en /etc/fstab que tienen la opci\u00f3n \"auto\" establecida. Ver m\u00e1s adelante una explicaci\u00f3n de las Units de tipo mount. network-online.target Target que se activa autom\u00e1ticamente en cuanto el subsistema de red es funcional.Cualquier servicio que tenga que trabajar en red se deber\u00e1 iniciar al menos en este target !!! note \"NOTA\" Existe otro tarjet relacionado con la red llamado \"pre-network.target\" que est\u00e1 pensado para iniciar servicios antes de que cualquier tarjeta de red se configure. Su prop\u00f3sito principal es hacerlo servir con servicios de tipo cortafuegos, para establecer las reglas antes de que la configuraci\u00f3n de red funcione. Estos servicios deber\u00e1n tener una l\u00ednea Before = network-pre.target y tambi\u00e9n una l\u00ednea Wants = network-pre.target en su archivo de configuraci\u00f3n !!! note \"NOTA\" Existe otro tarjet relacionado con la red llamado simplemente \"network.target\" que s\u00f3lo indica que el stack software de red ya se ha cargado en memoria pero esto no implica que las interfaces se hayan configurado todav\u00eda. este target est\u00e1 m\u00e1s pensado para el proceso de apagado de la m\u00e1quina para realizar este proceso de forma ordenada: pues la orden de apagado es al rev\u00e9s que el de arranque, cualquier Unit que tenga una l\u00ednea After = network.target apagar\u00e1 antes que la red se descargue y esto har\u00e1 que esta Unit apague sin interrumpir ninguna conexi\u00f3n que est\u00e9 pendiente * printer.target Target que se activa autom\u00e1ticamente tan pronto como una impresora es enchufada o aparece disponible durante el arranque. Aqu\u00ed donde se suele iniciar, por ejemplo, el servicio Cups. * sound.target Target que se activa autom\u00e1ticamente tan pronto como una tarjeta de audio es enchufada o aparece disponible durante el arranque. * bluetooth.target Target que se activa autom\u00e1ticamente tan pronto como un controlador Bluetooth es enchufado o aparece disponible durante el arranque. * smartcard.target Target que se activa autom\u00e1ticamente tan pronto como un controlador Smartcard es enchufado o aparece disponible durante el arranque. * system-update.target Target especial utilizada para actualizaciones del sistema. El generador systemd-System- update-generator redireccionar\u00e1 el proceso de arranque autom\u00e1ticamente a este target si la carpeta /system-update existe * umount.target Target que desmonta todos los puntos \"mount\" y \"automount\" durante el apagado del sistema * final.target Target utilizado durante el apagado del sistema que puede utilizarse para apagar los \u00faltimos servicios despu\u00e9s de que los servicios \"normales\" ya se han detenido y los puntos de montaje se han desmontado. Para saber el target donde nos encontramos en este momento podemos hacer: systemctl get-default Hay que tener en cuenta que m\u00faltiples targets pueden estar activados a la vez. Un target activado indica que systemd ha intentado iniciar todas las Units asociadas a este target. Esto significa que el comando anterior s\u00f3lo nos dice cu\u00e1l es el target \"final\" donde hemos llegado, pero a lo largo del camino desde el arranque de la m\u00e1quina hasta llegar a este target \"final\" se han ido activando diferentes targets a modo de \"escalones\" intermedios. para ver todos los targets activados, hay que hacer systemctl list-Units -type = target Se puede cambiar el target actual a otro simplemente ejecutando: systemctl Isolate nomTargetDesti.target Para cambiar el target por defecto donde ir\u00e1 a parar autom\u00e1ticamente a cada arranque del sistema se puede hacer: systemctl set-default nomTargetDefecte.target !!! note \"Nota\" El comando anterior, en realidad lo \u00fanico que hace es revincular el link \"/etc/systemd/system/default.target\" en el archivo * .Target adecuado. !!! note \"Nota\" Otra manera de entrar al final del arranque del sistema en un determinado target predeterminado es a\u00f1adir la l\u00ednea systemd.unit = nomTargetDestino.target a la lista de par\u00e1metros del kernel indicada en la configuraci\u00f3n del gestor de arranque. Hay una serie de comandos espec\u00edficos para pasar a determinados estados (poweroff, reboot, etc) que se pueden usar en vez del comando systemctl Isolate gen\u00e9rica. Por ejemplo: sudo systemctl rescue : Similar a systemctl Isolate rescue.target sudo systemctl poweroff (o sudo poweroff a secas): Similar a - systemctl Isolate poweroff.target sudo systemctl reboot (o sudo reboot a secas): Similar a systemctl Isolate reboot.target Si se quiere detener (-P) o reiniciar (-r) la m\u00e1quina en un momento futuro determinado (hh: mm), entonces habr\u00e1 que ejecutar el comando: sudo shutdown {-P | -r} hh: mm Si se quiere detener (-P) o reiniciar (-r) la m\u00e1quina dentro de una cierta cantidad de minutos, entonces habr\u00e1 que ejecutar el comando: sudo shutdown {-P | -r} + m !!! note \"Nota\" Dentro de la carpeta /usr/lib/systemd/system-shutdown pueden haber archivos * .shutdown, que son scripts ejecutables que se ejecutar\u00e1n justo antes del apagado / reinicio del sistema (es decir, justo al poner en marcha los servicios \"poweroff.service\" o \"Reboot.service\"). Quien ejecutar\u00e1 estos scripts es el binario /usr/lib/systemd/systemd-shutdown, el cual es invocado siempre por estos servicios, que lo colocan como PID 1 y es el responsable de desmontar los sistemas de ficheros, deshabilitar la swap, matar los procesos que queden pendientes, etc. En los scripts ejecutados por /usr/lib/systemd/systemd-shutdown podemos utilizar un par\u00e1metro ($1) que puede valer \"poweroff\" o \"reboot\" dependiendo de la acci\u00f3n que realizar\u00e1 y que nos podr\u00eda servir para distinguir qu\u00e9 queremos que haga este script seg\u00fan la acci\u00f3n indicada. Todos los scripts se ejecutan en paralelo. Hay que tener en cuenta, finalmente, que el sistema de ficheros en ese momento permanece montado pero en modo s\u00f3lo lectura. !!! note \"Nota\" En el comando systemctl reboot le podemos a\u00f1adir varios par\u00e1metros interesantes, los cuales s\u00f3lo funcionan, sin embargo, en sistemas UEFI que han arrancado mediante el gestor de arranque systemd-boot: - --firmware-setup : INDICATE to the system s firmware to reboot into the firmware setup interface (aka the \"UEFI control panel\") - --boot-loader-menu = n\u00basegons : INDICATE to the system s boot loader to show the boot loader menu on the following boot the number of seconds specified as value. Pass 0 value in order to disable the menu timeout. - -boot-loader-entry = entryID : INDICATE to the system s boot loader to boot into a specific boot loader entry on the following boot. Lo que hacen los par\u00e1metros anteriores es modificar determinados valores de variables EFI concretas (tal como se podr\u00eda haber hecho tambi\u00e9n con el comando efibootmgr ) para as\u00ed modificar el comportamiento de la UEFI el pr\u00f3ximo arranque Por otra parte, con el comando sudo systemctl suspend podemos suspender el sistema (o dicho de otro manera, nos permiten llegar al target suspend.target\") y con el comando sudo systemctl hibernate la podemos poner a hibernar (o dicho de otro modo, permiten llegar al target \"hibernate.target\"). \"Suspender\" significa que se guarda todo el estado del sistema en la RAM y se apaga la mayor\u00eda de dispositivos de la m\u00e1quina; cuando se pone en marcha de nuevo, el sistema restaura su estado previo de la RAM sin tener que reiniciarse de nuevo: este proceso es muy r\u00e1pido pero tiene el inconveniente de que obliga a mantener con alimentaci\u00f3n el\u00e9ctrica la m\u00e1quina todo el tiempo. \"Hibernar\" significa que se guarda todo el estado del sistema en el disco duro (si tiene espacio libre) y se apaga por completo la m\u00e1quina: cuando se pone en marcha de nuevo, el sistema restaura su estado previo desde el disco duro sin tener que reiniciar de nuevo: este proceso es bastante lento pero tiene la ventaja de no tener que mantener con alimentaci\u00f3n el\u00e9ctrica la m\u00e1quina. !!! note \"Nota\" Dentro de la carpeta \"/ usr / lib / systemd / system-sleep\" pueden haber archivos * .sleep, que son scripts ejecutables que se ejecutar\u00e1n justo antes de la hibernaci\u00f3n o suspensi\u00f3n del sistema (es decir, justo en poner en marcha internamente los servicios \"systemd-hibernate.service \"o\" systemd-suspend.service \", los cuales, por cierto, nunca deben ser invocados directamente con systemctl start ... sino utilizando los comandos explicadas en el p\u00e1rrafo anterior: systemctl hibernate o systemctl suspend ). Quien ejecutar\u00e1 estos scripts es el binario / usr / lib / systemd / systemd-sleep, el cual es invocado siempre por estos servicios y admite dos par\u00e1metros que podemos utilizar en estos scripts como $ 1 y $ 2 respectivamente. El primer par\u00e1metro puede valer \"pre\" o \"post\" dependiendo de si la m\u00e1quina est\u00e1 yendo a la suspensi\u00f3n / hibernaci\u00f3n o est\u00e1 volviendo, respectivamente. El segundo par\u00e1metro puede valer \"suspend\" o \"hibernate\" dependiendo de la acci\u00f3n que realizar\u00e1 y que nos podr\u00eda server para distinguir qu\u00e9 queremos que haga este script seg\u00fan la acci\u00f3n indicada. Todos los scripts ejecutan en paralelo. Si se quiere realizar una tarea larga y asegurarse de que la m\u00e1quina no se suspender\u00e1 o apagar\u00e1 mientras tanto, se puede invocar el comando correspondiente a esta tarea as\u00ed: systemd-inhibit comando_largo El comando systemd-inhibit --list muestra las tareas que tienen este truco en marcha. Si se quiere especificar una acci\u00f3n concreta a inhibir se puede indicar con el par\u00e1metro - what = acci\u00f3n , donde \"acci\u00f3n\" puede ser por ejemplo la palabra \"Shutdown\" o \"sleep\" (equivalente a hibernaci\u00f3n o suspensi\u00f3n), entre otros. Encontrar\u00e1 m\u00e1s informaci\u00f3n en los primeros p\u00e1rrafos de https://www.freedesktop.org/wiki/Software/systemd/inhibit/ Para que el inicio con systemctl start de un determinado servicio (o target) se produzca dentro de un target determinado -llamemosle el \"a.target\" - desde el propio archivo de configuraci\u00f3n del servicio en cuesti\u00f3n hay que escribir las directivas Wants = a.target, Requires = a.target y / o After = a.target (estas directivas se aseguran de llegar primero al target \"a.target\" para iniciar entonces el servicio en cuesti\u00f3n). Por otra parte, tambi\u00e9n existe la directiva Conflicts = a.target , la que se asegura de no estar en el target \"a.target\" para poder iniciar el servicio en cuesti\u00f3n. En el caso de querer iniciar siempre un servicio determinado autom\u00e1ticamente en el target \"a.target\", entonces habr\u00e1 que escribir adem\u00e1s las directivas WantedBy = a.target o RequiredBy = a.target del archivo de configuraci\u00f3n del servicio (en este \u00faltimo caso, al hacer systemctl enable nomServei se crea un enlace a su archivo de configuraci\u00f3n dentro de /lib/systemd/system/a.target.wants ). Los archivos de configuraci\u00f3n de los targets s\u00f3lo tienen secciones Unit (y muy pocas la secci\u00f3n [Install]). En este sentido, es interesante consultar los archivos correspondientes, por ejemplo, a multi-user.target o graphical.target: s\u00f3lo encontramos las directivas Description, Documentation, Wants, Requires, After,Conflicts y AllowIsolate (ya partir de ellas podemos deducir las dependencias que hay entre targets ... aunque por eso hay comandos espec\u00edficos que enseguida veremos). ###EJERCICIOS: Crear un target nuevo llamado \"manolo.target\" donde el sistema deber\u00e1 entrar justo despu\u00e9s de activar graphical.target (es decir, debe ser el \u00faltimo target al activarse). La idea ser\u00e1 asegurarte de que entras en este target para ejecutar un determinado servicio (lo llamaremos \"manolo.service\") el \u00faltimo de todos. para hacer esto, tienes que hacer lo siguiente: A) Crear un nuevo fichero llamado \"/etc/systemd/system/manolo.target\" con el siguiente contenido: [Unit] Description = Manolo is kind Documentation = http: //www.lecturas.com Requires = graphical.target After = graphical.target Conflicts = rescue.service rescue.target AllowIsolate = yes B) Crear un nuevo fichero llamado \"/etc/systemd/system/manolo.service\" con el siguiente contenido: [Unit] Description = Manolo is soberbio Documentation = http: //www.hola.com Requires = manolo.target After = manolo.target [Service] ExecStart = / usr / bin / printf \"MANOLO \\ n\" RemainAfterExit = yes [Install] WantedBy = manolo.target C) Ejecutar systemctl enable manolo.service y reinicia la m\u00e1quina. \u00bfCrees que el servicio \"manolo\" estar\u00e1 funcionando autom\u00e1ticamente o no? \u00bfPor qu\u00e9 lo crees? Compru\u00e9balo ejecutando el comando systemctl status manolo.service (o tambi\u00e9n observando si aparece la palabra \"MANOLO\" en el Journal). PISTA: La respuesta de porque el servicio \"manolo\" estar\u00e1 funcionando (o no) se encuentra en lo que muestra el comando systemctl list-Units -t target | grep \"manolo\" y en entender el significado de la l\u00ednea WantedBy = D) A continuaci\u00f3n ejecuta systemctl start manolo.service . Despu\u00e9s de observar que el servicio se haya puesto en marcha correctamente (en la salida del comando systemctl status manolo.service o tambi\u00e9n observando si aparece la palabra \"MANOLO\" en el Journal), \u00bfcrees que el comando systemctl list-Units -t target | grep \"manolo\" mostrar\u00e1 algo diferente respecto del apartado anterior? \u00bfPor qu\u00e9 lo crees? PISTA: La respuesta se encuentra en entender el significado de las l\u00edneas Requires = y After = del archivo \"manolo.service\" e) Ejecutar systemctl set-default manolo.target y vuelve a reiniciar la m\u00e1quina. \u00bfCrees que el servicio \"manolo\" ahora estar\u00e1 funcionando autom\u00e1ticamente o no? \u00bfPor qu\u00e9 lo crees? Compru\u00e9balo ejecutando el comando systemctl status manolo.service (o tambi\u00e9n observando si aparece la palabra \"MANOLO\" en el Journal). PISTA: La respuesta se encuentra en entender el significado de las l\u00edneas Requires = y After = del archivo \"manolo.target\" 2. A) Entra en el target de rescate. \u00bfQu\u00e9 pasa? B) Entra en el target de suspensi\u00f3n. \u00bfQu\u00e9 pasa? C) Entra en el target multi-user. \u00bfQu\u00e9 pasa? D) Crear un script ejecutable dentro de la carpeta \"/usr/lib/systemd/system-sleep\" con el siguiente contenido ...: #! / Bin / bash if [[ \"$ 1\" == \"pre\"]] then echo \"we are suspending oro hibernating at $ (date) ...\"> / tmp / systemd_suspend_test Elif [[ \"$ 1\" == \"post\"]] then echo \"... and we are back from $ (date)\" >> / tmp / systemd_suspend_test fin ... y prueba a suspender el sistema y volver a \"despertar\". \u00bfQu\u00e9 pasar\u00e1? e) \u00bfPara qu\u00e9 sirve este programa: https://github.com/ryran/reboot-guard ? ##Boot chain Para saber la jerarqu\u00eda de dependencias de targets para llegar a iniciar un target (o service!) Determinado se puede utilizar el comando: systemctl list-dependencies nomTarget.target (o nomUnit.service ) !!! note \"Nota\" Una forma alternativa de obtener una informaci\u00f3n similar ser\u00eda ejecutando systemctl show -p \"Wants\" nomTarget.target && systemctl show -p \"Requires\" nomTarget.target . Tambi\u00e9n se puede ejecutar systemctl status Las dependencias mostradas se corresponden a Units que han sido \"required\" o \"wanted\" por las Units superiores. Las dependencias recursivas s\u00f3lo se muestran los targets intermedios; si se quieren ver tambi\u00e9n por los service, mounts paths, socket, etc intermedios hay que incluir el par\u00e1metro --all al comando anterior. Tambi\u00e9n se pueden mostrar cu\u00e1les Units dependen para funcionar del correcto inicio de un target (o service!) determinado con el comando: systemctl list-dependencias --reverse nomTarget.target (o nomUnit.service ) !!! note \"Nota\" Una forma alternativa de obtener una informaci\u00f3n similar ser\u00eda ejecutando systemctl show -p \"WantedBy\" nomTarget.target && systemctl show -p \"RequiredBy\" nomTarget.target Otros par\u00e1metros interesantes de este comando son --before y - after , los cuales sirven para mostrar Units que dependen para funcionar del correcto inicio anterior o posterior de un target, respectivamente. Por otra parte, respecto al arranque del sistema podemos obtener una informaci\u00f3n m\u00e1s detallada sobre los tiempos que tarda cada Unit en cargarse y el orden en que lo hace gracias al comando systemd-analyze, tiene varias posibilidades systemd-analyze : Muestra el tiempo total empleado en el arranque del sistema y qu\u00e9 parte de este tiempo ha sido empleado en tareas del kernel, qu\u00e9 parte en uso de initrd y qu\u00e9 parte en tareas de usuario systemd-analyze blame : Muestra los tiempos disgregados por servicio. Hay que indicar que estos tiempos son \"en paralelo \", as\u00ed que la suma total que sale ser\u00e1 siempre muy superior al tiempo real empleado en el arranque. systemd-analyze dot [nomTarget.target] | dot -T {png | svg} -o foto. {png | svg} : Genera una salida que si se pasa a la aplicaci\u00f3n \"dot\" (perteneciente al paquete \"GraphViz\") generar\u00e1 finalmente un gr\u00e1fico (En formato png o svg) donde se pueden visualizar todas las dependencias del target (o servicio!) indicado (o, si no se indica, del \"default.target\"; tambi\u00e9n se pueden indicar comodines en el nombre del target / servicio). systemd-analyze plot [nomTarget.target]> something.svg : Genera un gr\u00e1fico donde se muestra los tiempos de ejecuci\u00f3n y de bloqueo de cada Unit durante el arranque hasta llegar al target (o servicio!) indicado (o, si no se indica, del \"default.target\") systemd-analyze critical-chain [nomTarget.target] : Muestra el \u00e1rbol de dependencias bloqueantes por target (o servicio!) indicado. El tiempo mostrado despu\u00e9s de \"@\" indica el tiempo que hace que la Unit est\u00e1 activa; el tiempo mostrado despu\u00e9s de \"+\" indica el tiempo que la Unit ha tardado en activarse. Otras opciones del comando systemd-analyze son syscall-filter, verify, dump, log-level, security, time ...Se puede ver si, una vez iniciado el sistema, a\u00fan quedan tareas pertenecientes al arranque para completar ejecutando el comando systemctl list-jobs ###EJERCICIOS 1.- a) \u00bfQu\u00e9 targets deben haberse iniciado para que el servicio gdm se pueda poner en marcha? (esto lo puedes saber con el comando systemctl list-dependencies ... ) b) Ejecutar el comando systemctl list-dependencies --reverse gdm.service Qu\u00e9 ves? c) \u00bfQu\u00e9 hace el comando tree / etc / systemd / system y para qu\u00e9 podr\u00eda servirte? 2.-a) Ejecutar systemd-analyze plot ... y observa qu\u00e9 Unit bloquea m\u00e1s tiempo el arranque de tu sistema. prueba de desactivarla (esperemos no romper nada!) y reinicia. Ejecuta ahora systemd-analyze blame para comprobar si el tiempo total de arranque ha disminuido efectivamente. b) Instal.la el paquete \"GraphViz\" y genera un gr\u00e1fico Png con las dependencias del target multi-user. Haz una lista de las dependencias all\u00ed mostradas y adjunta la captura del gr\u00e1fico","title":"Estructura interna"},{"location":"kb/GNU-Linux/Sistema/Systemd/#plantillas","text":"Una plantilla es un archivo de configuraci\u00f3n de tipo \"service\" que tiene la particularidad de permitir poner en marcha variantes de un mismo servicio sin tener que escribir un archivo \"service\" diferente para cada variante. B\u00e1sicamente, para utilizar una plantilla hay que hacer los siguientes pasos: 1.- El archivo \"service\" que har\u00e1 de plantilla debe llamarse \"nomServicio@.service\". Es decir, hay que indicar el s\u00edmbolo arroba antes del punto 2.- El contenido de este archivo plantilla puede ser exactamente igual que el de un archivo \"service\" est\u00e1ndar 3.- A la hora de iniciar, parar, activar, desactivar, ver el estado, etc de una plantilla, se deber\u00e1 indicar el identificador concreto de la variante con la que queremos trabajar. Este identificador se establece la primera vez que arranca la variante y simplemente consiste en una cadena entre la arroba y el punto, as\u00ed: systemctl start nomServicio@identificador.service A partir de aqu\u00ed, este identificador se har\u00e1 servir de la misma manera por el resto de tareas relacionadas con la gesti\u00f3n de esta variante. !!! note \"Nota\" An instance file is usually created as a symbolic link to the template file, with the link name including the instance identifier. In this way, multiple links with unique Identifiers can point back to a single template file. When managing instance Unit, systemd will look for a file with the exact instance name you Specify on the command line to use but if it can not find one, it will look for an associated template file. 4.- La gracia de las plantillas es que el valor del identificador indicado en el punto anterior se puede utilizar din\u00e1micamente dentro del contenido del archivo plantilla (concretamente mediante el s\u00edmbolo \" % y \"), de lo que seg\u00fan el valor que haya adquirido% y por esa variante se podr\u00eda poner en marcha el servicio escuchando en un puerto diferente (si% y representa un n\u00famero de puerto), o bien utilizando un archivo de configuraci\u00f3n diferente (si% y representa un nombre de archivo), o lo que nos convenga. !!! note \"Nota\" Otros s\u00edmbolos especiales que se pueden indicar en un archivo de configuraci\u00f3n de una plantilla pueden ser %p : representa the Unit name prefijo (this is the Portion of the Unit name that comes before the @ symbol) - %n : representa the full resulting Unit name (% p plus% e) - %u : The name of the user configured to run the Unit. - %U : The same as above, but as a numeric UID instead of name. - %H : The host name of the system that is running the Unit. - %% : This is used to insert a literal percentage sign. Pongamos un ejemplo. Imaginemos que tenemos un determinado servidor web que queremos ejecutar con dos configuraciones diferentes a la vez. La soluci\u00f3n ser\u00eda crear un archivo plantilla llamado por ejemplo Servidorweb@.service con un contenido similar al siguiente: [Unit] Description = My HTTP server [Service] Type = simple ExecStart = /usr/sbin/WebServer --config-file /etc/%i.conf [Install] WantedBy = multi-user.target Con este archivo, se podr\u00eda iniciar entonces el servidor dos veces, cada una indicando el nombre del archivo de configuraci\u00f3n deseado, as\u00ed: sudo systemctl start servidorweb@config1.service sudo systemctl start servidorweb@config2.service Los comandos anteriores lo que har\u00e1n ser\u00e1 ejecutar, respectivamente, los comandos: /usr/sbin/WebServer -config-file /etc/config1.conf y /usr/sbin/WebServer -config-file /etc/config2.conf ###EJERCICIOS: 1.-a) Crear un archivo plantilla que permita poner en marcha diferentes servidores Ncat de forma permanente (Recuerda el par\u00e1metro -k) escuchando cada uno de ellos en un puerto diferente. !!! note \"Nota\" Deber\u00e1s instalar el paquete \"nmap\" para disponer del comando ncat b) Iniciar un servidor Ncat a partir de la plantilla anterior escuchando en el puerto 2.222 y otro escuchando en el puerto 3333. Comprueba que, efectivamente, estos dos puertos est\u00e9n abiertos observando la salida del comando ss -tnl c) Conecta con el cliente Ncat a uno de los servidores anteriores y env\u00edale alg\u00fan mensaje. Cerrar el cliente (con CTRL + C) y ahora vuelve a ejecutarlo para conectar al otro servidor; vuelve a enviarle alg\u00fan otro mensaje y ci\u00e9rralo de nuevo. Observa las \u00faltimas l\u00edneas del Journal: \u00bfqu\u00e9 ves? 2.- Lee el siguiente p\u00e1rrafo y seguidamente contesta: When the user switches consoles using Ctrl+Alt+F2, Ctrl+Alt+F3,and so on, a new terminal then is spawned. In this case systemd calls a service named getty@.service providing the appropriate argument such as tty2 or tty3 to the unitfile. The %i identifier provides this argument value to the agetty binary so the terminal starts on that new console (as itcan seen in ExecStart= line from template file) a) Para qu\u00e9 sirve el comando agetty ? Busca en su p\u00e1gina del manual que hace su par\u00e1metro -a y a\u00f1\u00e1delo a la invocaci\u00f3n del comando escrita a la l\u00ednea ExecStart de dentro del archivo getty@.service (recuerda ejecutar sudo systemctl daemon-reload justo despu\u00e9s). \u00bfQu\u00e9 pasa ahora cuando pulses Ctrl + Alt + F2, etc? b) enmascara la instancia tty5 de la plantilla getty@.service. \u00bfQu\u00e9 pasa ahora si haces Ctrl + Alt + F5? NOTA: Es posible que tambi\u00e9n hayas de enmascarar la plantilla autovt @ .service para que funcione el ejercicio NOTA: Hay otras maneras m\u00e1s sofisticadas de desactivar terminales virtuales pero las veremos m\u00e1s adelante c) \u00bfQu\u00e9 te muestra el comando systemctl status getty@* ? 3.- Supongamos que tienes un archivo llamado /etc/systemd/system/pepe@.service con el siguiente contenido: [Unit] Description = lerele [Service] Type = oneshot ExecStart = / usr / local / bin / systemd-email% y admin@elpuig.xeill.net User = nobody Group = systemd-journal donde \"systemd-email\" es un bash shell script escrito por nosotros dise\u00f1ado para enviar correos (suponiendo que tenemos un servidor Postfix o similar configurado en la m\u00e1quina) que tiene el siguiente c\u00f3digo: #!/bin/bash systemctl status -full \"$1\" | mail -s \"$1\" $2 y se supone que has a\u00f1adido la l\u00ednea OnFailure=pepe@%i.service en la secci\u00f3n [Unit] del archivo \".service\" correspondiente al / los servicio / s que quiere monitorear. a) \u00bfQu\u00e9 comando deber\u00edas ejecutar para poner en marcha una instancia del servicio-plantilla pepe @ que se encargase de enviar mails en el momento que el servicio Cups falle? ##Sockets Un aspecto muy interesante de systemd es que permite que un servidor no est\u00e9 permanentemente encendido sino que s\u00f3lo arranque \"bajo demanda\" (es decir, cuando detecte una conexi\u00f3n, normalmente externa). De este modo, este servidor no consume m\u00e1s recursos que los m\u00ednimos imprescindibles, en el momento justo. Para lograr esto, lo que pasa es que s\u00ed hay un componente \"escuchando\" todo el rato posibles intentos de conexiones, pero este componente no es la Unit \"service\" en s\u00ed sino un \"perro guardi\u00e1n\" que s\u00f3lo despertar\u00e1 Unit \"service\" cuando sea necesario. Este \"perro guardi\u00e1n\" es la Unit de tipo \"socket\". Cada archivo de configuraci\u00f3n de una Unit \"socket\" debe tener exactamente el mismo nombre que el archivo de configuraci\u00f3n de la Unit \"service\" que quiere despertar (es decir, si tenemos el servicio \"a.service\", el socket correspondiente deber\u00e1 llamarse \"a.socket\"). La idea es tener la Unit \"socket\" siempre encendido ( systemctl enable a.socket ) pero la Unit \"service\" no ( systemctl disable a.service ); cuando se detecte una conexi\u00f3n, el \"socket\" autom\u00e1ticamente encender\u00e1 la Unit \"service\" (esto se puede ver haciendo systemctl status a.service mientras existe la conexi\u00f3n) y la apagar\u00e1 de nuevo pasado un determinado tiempo sin actividad (por defecto 5 minutos). Obviamente, si par\u00e1ramos el \"socket\" ( systemctl stop a.socket ) o lo deshabilitamos para el pr\u00f3ximo reinicio ( systemctl disable a.socket ) ya no habr\u00eda \"perro guardi\u00e1n\" atento y, por tanto, el servicio ya no se pondr\u00eda en marcha autom\u00e1ticamente. Para cambiar el puerto donde escucha un \"socket\" (entre otras cosas) hay que modificar la configuraci\u00f3n del \"Socket\" propiamente dicho y eso no depende de la configuraci\u00f3n del servidor en cuesti\u00f3n. Los archivos de configuraci\u00f3n de cada \"socket\" se pueden encontrar, como cualquier otra Unit, o bien dentro de la carpeta \"/ usr / lib / systemd / system\" o bien dentro de \"/ etc / systemd / system\" y se puede utilizar igualmente el comando systemctl edit a.socket para generar archivos \"override\". La secci\u00f3n que nos interesa en estos tipos de ficheros es la secci\u00f3n [Socket] , lo puede contener alguna de las siguientes directivas m\u00e1s importantes: ListenStream = [IP:] n\u00bapuerto Indica el n\u00famero de puerto TCP por donde escuchar\u00e1 el socket. Opcionalmente, se puede indicar una IP concreta para especificar que s\u00f3lo escuchar\u00e1 en el puerto ofrecido por aquella IP y ninguna m\u00e1s. !!! note \"Nota\" Se pueden indicar varias l\u00edneas ListemStream para hacer que el socket escuche en varios puertos a la vez. Por otra parte, como esta l\u00ednea puede estar escrita en diferentes archivos, si se quiere asegurar que s\u00f3lo se escuche en un puerto concreto sin tener en cuenta otras l\u00edneas que pueda haber le\u00eddo systemd previamente, se puede a\u00f1adir primero una l\u00ednea ListemStream vac\u00eda (as\u00ed: ListemStream = ) y luego la l\u00ednea ListenStream asociada al puerto deseado; lo que hace la l\u00ednea ListemStream vac\u00eda es \"resetear\" todas las l\u00edneas ListemStream anteriores * ListenDatagram = [IP:] n\u00baport Indica el n\u00famero de puerto UDP por donde escuchar\u00e1 el socket. Opcionalmente, se puede indicar una IP concreta para especificar que s\u00f3lo escuchar\u00e1 en el puerto ofrecido por aquella IP y ninguna m\u00e1s. * ListenSequentialPacket = /ruta/arxiu.socket Indica el socket de tipo UNIX por donde se escuchar\u00e1. S\u00f3lo sirve para comunicaciones entre procesos de la misma m\u00e1quina * Service = unNomAlternatiu Si el nombre del archivo \"service\" no es igual que el nombre del archivo \"socket\", aqu\u00ed se puede indicar entonces el nombre que tiene el archivo \"service\" para que el socket el sepa encontrar. * Accept = yes Si se indica, hace que se genere una instancia del servicio diferente para cada conexi\u00f3n. \u00datil cuando se utilizan plantillas. Si su valor es no (por defecto) s\u00f3lo una instancia del servicio gestionar\u00e1 todas las conexiones. El comando systemctl status * .socket nos permite saber cu\u00e1ntos y cu\u00e1les sockets est\u00e1n escuchando ahora mismo; el valor \"Accepted\" muestra cu\u00e1ntas conexiones se han realizado en total desde que el socket ha sido iniciado y el valor \"Connected\" muestra cu\u00e1ntas conexiones est\u00e1n actualmente activas Como cualquier otra Unit, se pueden ver la lista de sockets con el comando systemctl list-Units -t socket pero adem\u00e1s disponemos del comando espec\u00edfico systemctl list-sockets , el cual informa de qu\u00e9 servicio correspondiente activan y en qu\u00e9 puerto / socket UNIX escuchan. ###EJERCICIOS: 1.-a) Crea el fichero /etc/systemd/system/dateserver.socket con el siguiente contenido: [Unit] Description = Servicio de fecha en el puerto 55555 [Socket] ListenStream = 55555 Accept = true [Install] WantedBy = sockets.target b) Crear el fichero /etc/systemd/system/dateserver@.service con el siguiente contenido: [Unit] Description = Servicio de fecha [Service] Type = simple ExecStart = / opt / dateserver.sh StandardOutput = socket StandardError = journal c) Crear el fichero /opt/dateserver.sh con el siguiente contenido (y dale permisos de ejecuci\u00f3n!): #!/bin/bash while [[true]] do # Atenci\u00f3n: comprueba que date se encuentre dentro de /usr/bin; dependiendo de la distribuci\u00f3n eso cambia /usr/bin/date sleep 1 done d) Abre un terminal y ejecuta el comando nc ipServidor 55555 . \u00bfQu\u00e9 ves? Abre otro terminal diferente y ejecuta el mismo comando. \u00bfQu\u00e9 ves? \u00bfQu\u00e9 te muestra el comando systemctl status dateserver.socket ? \u00bfY el comando systemctl status dateserver@* ? \u00bfY el comando systemctl list-Units dateserver @ * ? 2.- Haz que el servidor SSH que tengas instal.lat a la m\u00e1quina (si no lo tienes, instal.la'l) inicie s\u00f3lo a trav\u00e9s de un socket. concretamente: a) Crear el fichero \"/etc/systemd/system/sshMitjo.socket\" con el siguiente contenido: [Unit] Description = Mi SSH Socket [Socket] ListenStream = 22 Accept = yes [Install] WantedBy = sockets.target b) Crear el fichero \"/etc/systemd/system/sshMitjo@.service\" con el siguiente contenido: [Unido] Description = Mi SSH Server [Service] Type = simple ExecStart = - / usr / sbin / sshd -y StandardInput = socket StandardOutput = socket !!! note \"Nota\" Aqu\u00ed la clave est\u00e1 en la combinaci\u00f3n del par\u00e1metro -y del binario sshd (el cual hace que habilitar la posibilidad de que pueda recibir peticiones a trav\u00e9s de sockets), y la directiva StandardInput (lo realiza de forma efectiva este tipo de comunicaci\u00f3n entre el socket y el servidor SSH) !!! note \"Nota\" Important is the \"-\" in front of the binary name. This ensures that the exit status of the per-connection sshd process isforgotten by systemd. Normally, systemd will store the exit status of a all service instances that die abnormally. SSH will sometimesdie abnormally with an exit code of 1 or similar, and we want to make sure that this doesn't cause systemd to keep aroundinformation for numerous previous connections that died this way (until this information is forgotten with systemctl reset-failed). c) Ejecutar el comando systemctl enable sshMitjo.socket y systemctl disable ssh.service (si fuera necesario) y reinicia la m\u00e1quina. Una vez hecho, comprueba que el socket sshMitjo est\u00e9 funcionando pero no el servicio sshMitjo. Ejecuta ssh usuario @ ipServidor para entrar en el servidor SSH (deber\u00edas de conseguir sin problemas) y comprueba seguidamente que ahora s\u00ed est\u00e1 funcionando una instancia del servicio sshMitjo d) \u00bfQu\u00e9 har\u00eda un comando como systemctl killsshd@172.31.0.52 : 22-172.31.0.4: 47779.service ? 3.-a) En el ejercicio anterior hemos tenido la suerte de que el servidor SSH ofrece un par\u00e1metro (-y) que le permite delegar la apertura de los sockets (puertos) a un \"agente externo\" como es systemd. Pero no siempre tendremos un servidor que ofrezca esta posibilidad. En este sentido, lee los siguientes p\u00e1rrafos y resumen con tus propias palabras que explica: One of the limitations of socket activation is that it requires the activated application to be aware that it may be socket-activated; theprocess of accepting an existing socket is different from creating a listening socket from scratch. Consequently a lot of widely usedapplications don't support it. The systemd developers have known that it may take some time to get activation support everywhere, sothey introduced \"systemd-socket-proxyd\", a small TCP and Unix domain socket proxy server. This does understand activation, andwill sit between the network and our server, transparently forwarding packets between the two. The steps to use this tool are: Step 1: We create a socket that listens on the port that will eventually be served by the proxy/server combination. Step 2: On the first connection to the socket systemd activates the proxy service and hands it the socket. Step 3: When the proxy is started the corresponding server is first brought up (thanks to the Requires/After dependency) The proxy then shuttles all traffic between the server and the network. The only trick here is that we need to bind the server to a portother than the real-target port (8080 instead of 80 if we are running a webserver, for instance). This is because that port will beowned by the socket/proxy, and you can't bind two processes to the same socket and interface. Step 1: \"myserver-proxy.socket\" file [Socket] ListenStream=0.0.0.0:80 [Install] WantedBy=sockets.target Step 2: \"myserver-proxy.service\" file [Unit] Requires=myserver.service After=myserver.service [Service] ExecStart=/usr/lib/systemd/systemd-socket-proxyd 127.0.0.1:8080 Step 3: \"myserver.service\" file [Unit] Description=Server example (replace ExecStart value with something more realistic) [Service] # We listening server's listening port only to loopback interface because it's there where input packages comes from proxyExecStart=/usr/bin/ncat -k -l 127.0.0.1 8080","title":"Plantillas"},{"location":"kb/GNU-Linux/Sistema/kernel/","text":"ldconfig -v \u2192 regenera la cach\u00e9 de librerias, Para poder ver algo, activamos el verbose a 1, si no no muestra informaci\u00f3n uname \u2192 muestra \u201cLinux\u201d uname -a \u2192 muestra la versi\u00f3n del kernel, arquitectura \u2026 Linux debian 3.16.0-4-amd64 #1 SMP Debian 3.16.7-ckt25-2 (2016-04-08) x86_64 GNU/Linux uname -r \u2192 solo muestra la versi\u00f3n del kernel 3.16.0-4-amd64 3 \u2192 Release del Kernel (si es par es stable, si es impar es unstable) 16 \u2192 Major Version 0-4 \u2192 Revision y patch amd64 \u2192 arquitectura echo \u201cestoy usando kernel: uname -r \u201d lsmod \u2192 muestra los m\u00f3dulos del kernel cargados ahora mismo. Breve introducci\u00f3n a la gesti\u00f3n de m\u00f3dulos del kernel \u00b6 Los m\u00f3dulos del kernel son archivos con extensi\u00f3n \".ko\" (de \"kernel object\") y se encuentran en la carpeta /lib/modules/$(uname -r) . Para a\u00f1adir su funcionalidad particular a la que proporciona el propio kernel por defecto, hay que cargarlos en memoria. Como veremos enseguida, esto se puede hacer de dos maneras: de forma temporal (hasta que se reinicie la m\u00e1quina) o bien de forma permanente. A continuaci\u00f3n se listan algunas de los comandos que pueden ayudar a la gesti\u00f3n de los m\u00f3dulos: Informaci\u00f3n de m\u00f3dulos \u00b6 lsmod : muestra la lista de los m\u00f3dulos actualmente cargados, su tama\u00f1o (en bytes), y el n\u00famero y nombre de otros m\u00f3dulos que utilizan el m\u00f3dulo en cuesti\u00f3n como dependencia necesaria para ellos poder funcionar correctamente. modinfo nomModul: muestra informaci\u00f3n sobre el m\u00f3dulo indicado (ruta, descripci\u00f3n, licencia, autor, dependencias, ... y sobre todo, la lista de par\u00e1metros que puede admitir). Esta informaci\u00f3n se puede filtrar con diferentes par\u00e1metros; por ejemplo, modinfo -p nomModul s\u00f3lo muestra los par\u00e1metros que puede admitir, modinfo -n nomModul s\u00f3lo muestra la ruta, etc. Otra herramienta que se puede utilizar para obtener informaci\u00f3n sobre un determinado m\u00f3dulo (incluida en el paquete \"sysfsutils\") es SysTools -v -m mac80211_hwsim (donde, por ejemplo, mac80211_hwsim es un m\u00f3dulo que permite simular tarjetas wifi) Cargar y descargar m\u00f3dulos \u00b6 modprobe nomModul [param1 = valor1] [param1 = valor1] [...]: Carga de forma temporal el m\u00f3dulo indicado. Opcionalmente se puede indicar una lista de par\u00e1metros con el valor que queramos asignar a cada uno de ellos. Por ejemplo, en el caso de querer simular cuatro tarjetas wifi, habr\u00e1 cargar el m\u00f3dulo mac80211_hwsim as\u00ed: modprobe mac80211_hwsim radios = 4 modprobe -r nomModul (o tambi\u00e9n rmmod nomModul): Descargar el m\u00f3dulo indicado. Nota: En el caso de que el m\u00f3dulo estuviera integrado dentro del kernel (es decir, que no hubiera que cargarlo expl\u00edcitamente con modprobe porque ya viene cargado \"de serie\") pero quisi\u00e9ramos alterar el / los valor / es de alguno de sus par\u00e1metros por defecto, el truco ser\u00eda a\u00f1adir esta lista de par\u00e1metros (con la sintaxis nomModul.param1 = valor1 nomModul.param2 = valor2, etc) a la \"kernel command line\", manipulable dentro de la configuraci\u00f3n del gestor de arranque usado. Por ejemplo, en caso del Grub, esta lista habr\u00eda que escribirla en la l\u00ednea GRUB_CMDLINE_LINUX del archivo /etc/default/grub . Nota: Gracias a la informaci\u00f3n obtenida por la herramienta depmod, modprobe carga autom\u00e1ticamente adem\u00e1s todos los m\u00f3dulos que sean dependencias del indicado (cosa que, por ejemplo, el coomando insmod nomModul , que tambi\u00e9n sirve para cargar m\u00f3dulos de forma temporal, no hace). En general, la carga de m\u00f3dulos se hace autom\u00e1ticamente cuando es necesario (por ejemplo, cuando se introduce un dispositivo USB, para acceder a su sistema de ficheros) gracias al componente del sistema llamado Udev. No obstante, en alg\u00fan caso conviene establecer \"a mano\" la carga de un m\u00f3dulo de forma permanente. Esto se hace modificando dos archivos: /etc/modules-load.d/nomModul.conf : debe contener una sola l\u00ednea consistente s\u00f3lo en el nombre del m\u00f3dulo. Por ejemplo, si queremos cargar de forma permanente el m\u00f3dulo \"mac80211_hwsim\" hay que crear un archivo llamado /etc/modules-load.d/mac80211_hwsim.conf con la l\u00ednea: mac80211_hwsim /etc/modprobe.d/nomModul.conf : debe contener una lista de los par\u00e1metros (cada uno en una l\u00ednea diferente) que se aplicar\u00e1n a la carga del m\u00f3dulo indicado. Cada l\u00ednea de este archivo debe tener la siguiente sintaxis: options nomModul paramX = valorX . Por ejemplo, si queremos que el m\u00f3dulo Mac80211_hwsim se cargue simulando 4 tarjetas WiFi, hay que crear un archivo llamado /etc/modprobe.d/mac80211_hwsim.conf con la l\u00ednea: options mac80211_hwsim radios = 4 . Alias \u00b6 Otra cosa que podemos hacer con los m\u00f3dulos es crear alias (es decir, nombres alternativos) de manera que podamos indicar estos nombres alternativos (generalmente m\u00e1s cortos y / o f\u00e1ciles de recordar) a la hora de ejecutar los comandos modprobe y similares. Esto se hace creando un archivo (por cada alias): /etc/modprobe.d/nomAlias.conf : debe contener una l\u00ednea con la siguiente sintaxis: alias nomAlias nomModul , donde \"nomAlias\" admite comodines para permitir diferentes alias alternativos por el mismo nomModul. As\u00ed, si quisi\u00e9ramos llamar \"wifiQUALSEVOLCOSA\" al m\u00f3dulo mac80211_hwsim, habr\u00eda que crear un archivo llamado /etc/modprobe.d/wifi.conf que contenga la siguiente l\u00ednea: alias wifi * mac80211_hwsim Bloquear m\u00f3dulos \u00b6 Finalmente, otra cosa que se puede hacer con los m\u00f3dulos es bloquearlos para impedir su carga. Esto puede ser \u00fatil si, por ejemplo, sabemos que el hardware asociado no se necesita o si la carga del m\u00f3dulos da problemas. Esto se hace creando un archivo (\u00fanico para todos los m\u00f3dulos a bloquear) que se puede llamar como queramos pero que en general se suele llamar blacklist.conf : /etc/modprobe.d/blacklist.conf : debe contener una lista de los nombres de los m\u00f3dulos a bloquear (Cada uno en una l\u00ednea diferente). Cada l\u00ednea de este archivo debe tener la siguiente sintaxis: blacklist nomModul Por ejemplo, si queremos bloquear el m\u00f3dulo \"mac80211_hwsim\", hay que crear (o o editar si ya existe) el archivo /etc/modprobe.d/blacklist.conf y hacer que contenga la l\u00ednea: blacklist mac80211_hwsim Nota: The blacklist command will blacklist a module so that it will not be loaded automatically, but the module may be loaded if another non-blacklisted module depends on it or if it is loaded manually.However, there is a workaround for this behaviour; the install command instructs modprobe to run a custom command instead of inserting the module in the kernel as normal, so you can force the module to always fail loading with this line in /etc/modprobe.d/blacklist.conf : install module_name /bin/false This will effectively blacklist that module and any other that depends on it. Nota: You can also blacklist modules from the bootloader. This can be very useful if a broken module makes it impossible to boot your system. Simply add modprobe.blacklist=modname1,modname2,modname3 to your bootloader's kernel line. Para m\u00e1s informaci\u00f3n, consultar man modprobe.d Problemas y soluciones \u00b6 Liberar espacio en /boot eliminar kernels antiguos \u00b6 Aparece un mensaje durante las actualizaciones advirtiendo que \u00abEl volumen \u00abboot\u00bb solo tiene 1,7MB de espacio en disco libre.\u00bb Para eliminar kernels antiguos Obtener un listado de todos los kernels activos en /boot sudo dpkg --get-selections | grep linux-image Aparecer\u00e1 algo as\u00ed: linux-image-4.13.0-36-generic install linux-image-4.13.0-37-generic install linux-image-4.13.0-38-generic install linux-image-4.13.0-39-generic install linux-image-4.13.0-41-generic install linux-image-4.13.0-43-generic install linux-image-extra-4.13.0-36-generic install linux-image-extra-4.13.0-37-generic install linux-image-extra-4.13.0-38-generic install linux-image-extra-4.13.0-39-generic install linux-image-extra-4.13.0-41-generic install linux-image-extra-4.13.0-43-generic install Eliminamos con el comando: sudo apt purge linux-image-4.10.0-38-generic linux-image-extra-4.10.0-38-generic","title":"Kernel"},{"location":"kb/GNU-Linux/Sistema/kernel/#breve-introduccion-a-la-gestion-de-modulos-del-kernel","text":"Los m\u00f3dulos del kernel son archivos con extensi\u00f3n \".ko\" (de \"kernel object\") y se encuentran en la carpeta /lib/modules/$(uname -r) . Para a\u00f1adir su funcionalidad particular a la que proporciona el propio kernel por defecto, hay que cargarlos en memoria. Como veremos enseguida, esto se puede hacer de dos maneras: de forma temporal (hasta que se reinicie la m\u00e1quina) o bien de forma permanente. A continuaci\u00f3n se listan algunas de los comandos que pueden ayudar a la gesti\u00f3n de los m\u00f3dulos:","title":"Breve introducci\u00f3n a la gesti\u00f3n de m\u00f3dulos del kernel"},{"location":"kb/GNU-Linux/Sistema/kernel/#informacion-de-modulos","text":"lsmod : muestra la lista de los m\u00f3dulos actualmente cargados, su tama\u00f1o (en bytes), y el n\u00famero y nombre de otros m\u00f3dulos que utilizan el m\u00f3dulo en cuesti\u00f3n como dependencia necesaria para ellos poder funcionar correctamente. modinfo nomModul: muestra informaci\u00f3n sobre el m\u00f3dulo indicado (ruta, descripci\u00f3n, licencia, autor, dependencias, ... y sobre todo, la lista de par\u00e1metros que puede admitir). Esta informaci\u00f3n se puede filtrar con diferentes par\u00e1metros; por ejemplo, modinfo -p nomModul s\u00f3lo muestra los par\u00e1metros que puede admitir, modinfo -n nomModul s\u00f3lo muestra la ruta, etc. Otra herramienta que se puede utilizar para obtener informaci\u00f3n sobre un determinado m\u00f3dulo (incluida en el paquete \"sysfsutils\") es SysTools -v -m mac80211_hwsim (donde, por ejemplo, mac80211_hwsim es un m\u00f3dulo que permite simular tarjetas wifi)","title":"Informaci\u00f3n de m\u00f3dulos"},{"location":"kb/GNU-Linux/Sistema/kernel/#cargar-y-descargar-modulos","text":"modprobe nomModul [param1 = valor1] [param1 = valor1] [...]: Carga de forma temporal el m\u00f3dulo indicado. Opcionalmente se puede indicar una lista de par\u00e1metros con el valor que queramos asignar a cada uno de ellos. Por ejemplo, en el caso de querer simular cuatro tarjetas wifi, habr\u00e1 cargar el m\u00f3dulo mac80211_hwsim as\u00ed: modprobe mac80211_hwsim radios = 4 modprobe -r nomModul (o tambi\u00e9n rmmod nomModul): Descargar el m\u00f3dulo indicado. Nota: En el caso de que el m\u00f3dulo estuviera integrado dentro del kernel (es decir, que no hubiera que cargarlo expl\u00edcitamente con modprobe porque ya viene cargado \"de serie\") pero quisi\u00e9ramos alterar el / los valor / es de alguno de sus par\u00e1metros por defecto, el truco ser\u00eda a\u00f1adir esta lista de par\u00e1metros (con la sintaxis nomModul.param1 = valor1 nomModul.param2 = valor2, etc) a la \"kernel command line\", manipulable dentro de la configuraci\u00f3n del gestor de arranque usado. Por ejemplo, en caso del Grub, esta lista habr\u00eda que escribirla en la l\u00ednea GRUB_CMDLINE_LINUX del archivo /etc/default/grub . Nota: Gracias a la informaci\u00f3n obtenida por la herramienta depmod, modprobe carga autom\u00e1ticamente adem\u00e1s todos los m\u00f3dulos que sean dependencias del indicado (cosa que, por ejemplo, el coomando insmod nomModul , que tambi\u00e9n sirve para cargar m\u00f3dulos de forma temporal, no hace). En general, la carga de m\u00f3dulos se hace autom\u00e1ticamente cuando es necesario (por ejemplo, cuando se introduce un dispositivo USB, para acceder a su sistema de ficheros) gracias al componente del sistema llamado Udev. No obstante, en alg\u00fan caso conviene establecer \"a mano\" la carga de un m\u00f3dulo de forma permanente. Esto se hace modificando dos archivos: /etc/modules-load.d/nomModul.conf : debe contener una sola l\u00ednea consistente s\u00f3lo en el nombre del m\u00f3dulo. Por ejemplo, si queremos cargar de forma permanente el m\u00f3dulo \"mac80211_hwsim\" hay que crear un archivo llamado /etc/modules-load.d/mac80211_hwsim.conf con la l\u00ednea: mac80211_hwsim /etc/modprobe.d/nomModul.conf : debe contener una lista de los par\u00e1metros (cada uno en una l\u00ednea diferente) que se aplicar\u00e1n a la carga del m\u00f3dulo indicado. Cada l\u00ednea de este archivo debe tener la siguiente sintaxis: options nomModul paramX = valorX . Por ejemplo, si queremos que el m\u00f3dulo Mac80211_hwsim se cargue simulando 4 tarjetas WiFi, hay que crear un archivo llamado /etc/modprobe.d/mac80211_hwsim.conf con la l\u00ednea: options mac80211_hwsim radios = 4 .","title":"Cargar y descargar m\u00f3dulos"},{"location":"kb/GNU-Linux/Sistema/kernel/#alias","text":"Otra cosa que podemos hacer con los m\u00f3dulos es crear alias (es decir, nombres alternativos) de manera que podamos indicar estos nombres alternativos (generalmente m\u00e1s cortos y / o f\u00e1ciles de recordar) a la hora de ejecutar los comandos modprobe y similares. Esto se hace creando un archivo (por cada alias): /etc/modprobe.d/nomAlias.conf : debe contener una l\u00ednea con la siguiente sintaxis: alias nomAlias nomModul , donde \"nomAlias\" admite comodines para permitir diferentes alias alternativos por el mismo nomModul. As\u00ed, si quisi\u00e9ramos llamar \"wifiQUALSEVOLCOSA\" al m\u00f3dulo mac80211_hwsim, habr\u00eda que crear un archivo llamado /etc/modprobe.d/wifi.conf que contenga la siguiente l\u00ednea: alias wifi * mac80211_hwsim","title":"Alias"},{"location":"kb/GNU-Linux/Sistema/kernel/#bloquear-modulos","text":"Finalmente, otra cosa que se puede hacer con los m\u00f3dulos es bloquearlos para impedir su carga. Esto puede ser \u00fatil si, por ejemplo, sabemos que el hardware asociado no se necesita o si la carga del m\u00f3dulos da problemas. Esto se hace creando un archivo (\u00fanico para todos los m\u00f3dulos a bloquear) que se puede llamar como queramos pero que en general se suele llamar blacklist.conf : /etc/modprobe.d/blacklist.conf : debe contener una lista de los nombres de los m\u00f3dulos a bloquear (Cada uno en una l\u00ednea diferente). Cada l\u00ednea de este archivo debe tener la siguiente sintaxis: blacklist nomModul Por ejemplo, si queremos bloquear el m\u00f3dulo \"mac80211_hwsim\", hay que crear (o o editar si ya existe) el archivo /etc/modprobe.d/blacklist.conf y hacer que contenga la l\u00ednea: blacklist mac80211_hwsim Nota: The blacklist command will blacklist a module so that it will not be loaded automatically, but the module may be loaded if another non-blacklisted module depends on it or if it is loaded manually.However, there is a workaround for this behaviour; the install command instructs modprobe to run a custom command instead of inserting the module in the kernel as normal, so you can force the module to always fail loading with this line in /etc/modprobe.d/blacklist.conf : install module_name /bin/false This will effectively blacklist that module and any other that depends on it. Nota: You can also blacklist modules from the bootloader. This can be very useful if a broken module makes it impossible to boot your system. Simply add modprobe.blacklist=modname1,modname2,modname3 to your bootloader's kernel line. Para m\u00e1s informaci\u00f3n, consultar man modprobe.d","title":"Bloquear m\u00f3dulos"},{"location":"kb/GNU-Linux/Sistema/kernel/#problemas-y-soluciones","text":"","title":"Problemas y soluciones"},{"location":"kb/GNU-Linux/Sistema/kernel/#liberar-espacio-en-boot-eliminar-kernels-antiguos","text":"Aparece un mensaje durante las actualizaciones advirtiendo que \u00abEl volumen \u00abboot\u00bb solo tiene 1,7MB de espacio en disco libre.\u00bb Para eliminar kernels antiguos Obtener un listado de todos los kernels activos en /boot sudo dpkg --get-selections | grep linux-image Aparecer\u00e1 algo as\u00ed: linux-image-4.13.0-36-generic install linux-image-4.13.0-37-generic install linux-image-4.13.0-38-generic install linux-image-4.13.0-39-generic install linux-image-4.13.0-41-generic install linux-image-4.13.0-43-generic install linux-image-extra-4.13.0-36-generic install linux-image-extra-4.13.0-37-generic install linux-image-extra-4.13.0-38-generic install linux-image-extra-4.13.0-39-generic install linux-image-extra-4.13.0-41-generic install linux-image-extra-4.13.0-43-generic install Eliminamos con el comando: sudo apt purge linux-image-4.10.0-38-generic linux-image-extra-4.10.0-38-generic","title":"Liberar espacio en /boot eliminar kernels antiguos"},{"location":"kb/GNU-Linux/Software/Apache/","text":"Redirigir dominio en Apache example.com a www.example.com \u00b6 En ocasiones interesa que, si un usuario o motor de b\u00fasqueda intenta acceder al dominio sin las www, por ej. example.com, Apache le redireccione a www.example.com Para estos casos, el redireccionamiento 301 es el m\u00e1s adecuado. La Redirecci\u00f3n 301 consiste en configurar el servidor web para que, cuando llegue el robot del buscador, o cualquier otra visita, \u00e9sta sepa que la p\u00e1gina se ha movido definitivamente a otra nueva direcci\u00f3n (URL). Mediante este redireccionamiento, se traspasar\u00e1n al mismo tiempo los valores de PageRank y de backlinks que ya dispon\u00edamos en nuestra vieja URL. Este n\u00famero 301 se trata realmente de un 'estado' del servidor web. Al igual que nos encontramos con los mensajes '404 Not Found' o '500 Internal Server Error', el '301 Moved Permanently' se trata de un estado de los est\u00e1ndares del protocolo HTTP. En el archivo de configuraci\u00f3n del sitio web, normalmente ubicado en la ruta /etc/apache2/sites-available buscamos la clave VirtualHost y agregamos al final <VirtualHost *:80> ... RewriteEngine On RewriteCond %{HTTP_HOST} ^example\\.com RewriteRule ^(.*)$ http://www.example.com$1 [R=permanent,L] ...","title":"Apache"},{"location":"kb/GNU-Linux/Software/Apache/#redirigir-dominio-en-apache-examplecom-a-wwwexamplecom","text":"En ocasiones interesa que, si un usuario o motor de b\u00fasqueda intenta acceder al dominio sin las www, por ej. example.com, Apache le redireccione a www.example.com Para estos casos, el redireccionamiento 301 es el m\u00e1s adecuado. La Redirecci\u00f3n 301 consiste en configurar el servidor web para que, cuando llegue el robot del buscador, o cualquier otra visita, \u00e9sta sepa que la p\u00e1gina se ha movido definitivamente a otra nueva direcci\u00f3n (URL). Mediante este redireccionamiento, se traspasar\u00e1n al mismo tiempo los valores de PageRank y de backlinks que ya dispon\u00edamos en nuestra vieja URL. Este n\u00famero 301 se trata realmente de un 'estado' del servidor web. Al igual que nos encontramos con los mensajes '404 Not Found' o '500 Internal Server Error', el '301 Moved Permanently' se trata de un estado de los est\u00e1ndares del protocolo HTTP. En el archivo de configuraci\u00f3n del sitio web, normalmente ubicado en la ruta /etc/apache2/sites-available buscamos la clave VirtualHost y agregamos al final <VirtualHost *:80> ... RewriteEngine On RewriteCond %{HTTP_HOST} ^example\\.com RewriteRule ^(.*)$ http://www.example.com$1 [R=permanent,L] ...","title":"Redirigir dominio en Apache example.com a www.example.com"},{"location":"kb/GNU-Linux/Software/Exim/","text":"Exim + Ipv6 + Gmail \u00b6 Nos comunica un cliente que los mensajes le vienen devueltos con este mensaje: This message was created automatically by mail delivery software. A message that you sent could not be delivered to one or more of its recipients. This is a permanent error. The following address(es) failed: perez******@gmail.com SMTP error from remote mail server after end of data: host gmail-smtp-in.l.google.com [2a00:1450:400c:c06::1a]: 550-5.7.1 [2001:41d0:52:400::a67] Our system has detected that this message does 550-5.7.1 not meet IPv6 sending guidelines regarding PTR records and 550-5.7.1 authentication. Please review 550-5.7.1 https://support.google.com/mail/?p=ipv6_authentication_error for more 550 5.7.1 information. a125si20128233wmf.3 - gsmtp ------ This is a copy of the message, including all the headers. ------ Lo que hago es desactivar el IPV6 en el exim: nano /etc/exim4/exim4.conf.template y agrego la linea SPAMASSASSIN = yes SPAM_SCORE = 50 CLAMD = yes disable_ipv6 = true domainlist local_domains = dsearch;/etc/exim4/domains/","title":"Exim"},{"location":"kb/GNU-Linux/Software/Exim/#exim-ipv6-gmail","text":"Nos comunica un cliente que los mensajes le vienen devueltos con este mensaje: This message was created automatically by mail delivery software. A message that you sent could not be delivered to one or more of its recipients. This is a permanent error. The following address(es) failed: perez******@gmail.com SMTP error from remote mail server after end of data: host gmail-smtp-in.l.google.com [2a00:1450:400c:c06::1a]: 550-5.7.1 [2001:41d0:52:400::a67] Our system has detected that this message does 550-5.7.1 not meet IPv6 sending guidelines regarding PTR records and 550-5.7.1 authentication. Please review 550-5.7.1 https://support.google.com/mail/?p=ipv6_authentication_error for more 550 5.7.1 information. a125si20128233wmf.3 - gsmtp ------ This is a copy of the message, including all the headers. ------ Lo que hago es desactivar el IPV6 en el exim: nano /etc/exim4/exim4.conf.template y agrego la linea SPAMASSASSIN = yes SPAM_SCORE = 50 CLAMD = yes disable_ipv6 = true domainlist local_domains = dsearch;/etc/exim4/domains/","title":"Exim + Ipv6 + Gmail"},{"location":"kb/GNU-Linux/Software/Instalar%20Grafana/","text":"Instalar Grafana \u00b6 Instalar la \u00faltima versi\u00f3n Open Source OSS release: sudo apt-get install -y apt-transport-https sudo apt-get install -y software-properties-common wget wget -q -O - https://packages.grafana.com/gpg.key | sudo apt-key add - Agregar este repositorio a las fuentes para versiones estables: echo \"deb https://packages.grafana.com/oss/deb stable main\" | sudo tee -a /etc/apt/sources.list.d/grafana.list Despu\u00e9s de agregar el repositorio: sudo apt-get update sudo apt-get install grafana Arrancar el servicio y verificar que todo es correcto sudo systemctl daemon-reload sudo systemctl start grafana-server sudo systemctl status grafana-server tiene que decir algo como \u25cf grafana-server.service - Grafana instance Loaded: loaded (/lib/systemd/system/grafana-server.service; disabled; vendor Active: active (running) since Tue 2020-12-08 00:09:48 CET; 6s ago Docs: http://docs.grafana.org Configurar el servicio de grafana para que arranque al inicio sudo systemctl enable grafana-server.service Configurar grafana con SSL \u00b6 modificar el fichero de configuracion quitando los ; de las lineas donde modifiquemos los valores [server] # Protocol (http or https) protocol = https # The public facing domain name used to access grafana from a browser domain = veeamtech.ddns.net # Redirect to correct domain if host header does not match domain # Prevents DNS rebinding attacks enforce_domain = true # https certs & key file cert_file = /etc/letsencrypt/live/veeamtech.ddns.net/cert.pem cert_key = /etc/letsencrypt/live/veeamtech.ddns.net/privkey.pem La ruta de los certificados puede ser diferente, por ej. en un servidor con HestiaCP instalado la ruta de los certificados podr\u00eda ser /usr/local/hestia/ssl/ y para que el usuario de grafana tuviera permisos habr\u00eda que incluirlo en alguno de los grupos que pueden acceder a los certificados. Para hacer login por primera vez ir a https://nombredelhost:3000/ usuario y password \u2192 admin Hacer Click en OK y cambiar la clave por una mas robusta. Fuente https://grafana.com/docs/grafana/latest/installation/debian/#install-from-apt-repository","title":"Instalar Grafana"},{"location":"kb/GNU-Linux/Software/Instalar%20Grafana/#instalar-grafana","text":"Instalar la \u00faltima versi\u00f3n Open Source OSS release: sudo apt-get install -y apt-transport-https sudo apt-get install -y software-properties-common wget wget -q -O - https://packages.grafana.com/gpg.key | sudo apt-key add - Agregar este repositorio a las fuentes para versiones estables: echo \"deb https://packages.grafana.com/oss/deb stable main\" | sudo tee -a /etc/apt/sources.list.d/grafana.list Despu\u00e9s de agregar el repositorio: sudo apt-get update sudo apt-get install grafana Arrancar el servicio y verificar que todo es correcto sudo systemctl daemon-reload sudo systemctl start grafana-server sudo systemctl status grafana-server tiene que decir algo como \u25cf grafana-server.service - Grafana instance Loaded: loaded (/lib/systemd/system/grafana-server.service; disabled; vendor Active: active (running) since Tue 2020-12-08 00:09:48 CET; 6s ago Docs: http://docs.grafana.org Configurar el servicio de grafana para que arranque al inicio sudo systemctl enable grafana-server.service","title":"Instalar Grafana"},{"location":"kb/GNU-Linux/Software/Instalar%20Grafana/#configurar-grafana-con-ssl","text":"modificar el fichero de configuracion quitando los ; de las lineas donde modifiquemos los valores [server] # Protocol (http or https) protocol = https # The public facing domain name used to access grafana from a browser domain = veeamtech.ddns.net # Redirect to correct domain if host header does not match domain # Prevents DNS rebinding attacks enforce_domain = true # https certs & key file cert_file = /etc/letsencrypt/live/veeamtech.ddns.net/cert.pem cert_key = /etc/letsencrypt/live/veeamtech.ddns.net/privkey.pem La ruta de los certificados puede ser diferente, por ej. en un servidor con HestiaCP instalado la ruta de los certificados podr\u00eda ser /usr/local/hestia/ssl/ y para que el usuario de grafana tuviera permisos habr\u00eda que incluirlo en alguno de los grupos que pueden acceder a los certificados. Para hacer login por primera vez ir a https://nombredelhost:3000/ usuario y password \u2192 admin Hacer Click en OK y cambiar la clave por una mas robusta. Fuente https://grafana.com/docs/grafana/latest/installation/debian/#install-from-apt-repository","title":"Configurar grafana con SSL"},{"location":"kb/GNU-Linux/Software/MailCatcher/","text":"MailCatcher \u00b6 MailCatcher es un servicio que ejecuta un servidor SMTP que captura todos los mensajes enviados y los muestra en una interfaz web. Al ejecutar el servicio, solo tienes que redirigir el tr\u00e1fico de tus env\u00edos de emails a smtp://127.0.0.1:1025 en vez de a tu servidor SMTP Para luego poder comprobar los emails que han llegado simplemente tenemos que acceder a http://127.0.0.1:1080 . https://mailcatcher.me/ Imagen de docker \u00b6 docker run -d -p 1080 :1080 -p 1025 :1025 --name mailcatcher schickling/mailcatcher Restart imagen de docker \u00b6 sudo docker restart mailcatcher","title":"MailCatcher"},{"location":"kb/GNU-Linux/Software/MailCatcher/#mailcatcher","text":"MailCatcher es un servicio que ejecuta un servidor SMTP que captura todos los mensajes enviados y los muestra en una interfaz web. Al ejecutar el servicio, solo tienes que redirigir el tr\u00e1fico de tus env\u00edos de emails a smtp://127.0.0.1:1025 en vez de a tu servidor SMTP Para luego poder comprobar los emails que han llegado simplemente tenemos que acceder a http://127.0.0.1:1080 . https://mailcatcher.me/","title":"MailCatcher"},{"location":"kb/GNU-Linux/Software/MailCatcher/#imagen-de-docker","text":"docker run -d -p 1080 :1080 -p 1025 :1025 --name mailcatcher schickling/mailcatcher","title":"Imagen de docker"},{"location":"kb/GNU-Linux/Software/MailCatcher/#restart-imagen-de-docker","text":"sudo docker restart mailcatcher","title":"Restart imagen de docker"},{"location":"kb/GNU-Linux/Software/PostgreSQL/","text":"Configurar PostgreSQL para permitir conexiones remotas \u00b6 Por defecto, PostgreSQL solo permite conexiones desde el localhost a trav\u00e9s del puerto 5432. netstat -nlt Conexiones activas de Internet (solo servidores) Proto Recib Enviad Direcci\u00f3n local Direcci\u00f3n remota Estado tcp 0 0 0.0.0.0:10000 0.0.0.0:* ESCUCHAR tcp 0 0 127.0.0.1:5940 0.0.0.0:* ESCUCHAR tcp 0 0 127.0.1.1:53 0.0.0.0:* ESCUCHAR tcp 0 0 127.0.0.1:631 0.0.0.0:* ESCUCHAR tcp 0 0 127.0.0.1:5432 0.0.0.0:* ESCUCHAR tcp 0 0 127.0.0.1:25 0.0.0.0:* ESCUCHAR tcp 0 0 0.0.0.0:17500 0.0.0.0:* ESCUCHAR tcp 0 0 127.0.0.1:17600 0.0.0.0:* ESCUCHAR tcp 0 0 127.0.0.1:17603 0.0.0.0:* ESCUCHAR tcp 0 0 127.0.0.1:3306 0.0.0.0:* ESCUCHAR tcp 0 0 127.0.0.1:587 0.0.0.0:* ESCUCHAR tcp 0 0 0.0.0.0:5900 0.0.0.0:* ESCUCHAR tcp6 0 0 :::10000 :::* ESCUCHAR tcp6 0 0 :::80 :::* ESCUCHAR tcp6 0 0 ::1:631 :::* ESCUCHAR tcp6 0 0 :::17500 :::* ESCUCHAR tcp6 0 0 :::5900 :::* ESCUCHAR Para cambiar este comportamiento por defecto, editamos el fichero de configuraci\u00f3n de PostgreSQL que en Ubuntu Server est\u00e1 ubicado en la carpeta /etc/postgresql/ \u2026. nano /etc/postgresql/9.3/main/postgresql.conf En la l\u00ednea donde pone listen_addresses = 'localhost' lo cambiamos por listen_addresses = '*' Y reiniciamos postgreSQL con el comando sudo service postgresql restart Tambi\u00e9n ha de modificarse el fichero pg_hba.conf en la misma carpeta agregando una linea como la siguiente (Ver los comentarios dentro del fichero para mas informaci\u00f3n) host all all 192.168.1.0/24 md5","title":"Configurar PostgreSQL para permitir conexiones remotas"},{"location":"kb/GNU-Linux/Software/PostgreSQL/#configurar-postgresql-para-permitir-conexiones-remotas","text":"Por defecto, PostgreSQL solo permite conexiones desde el localhost a trav\u00e9s del puerto 5432. netstat -nlt Conexiones activas de Internet (solo servidores) Proto Recib Enviad Direcci\u00f3n local Direcci\u00f3n remota Estado tcp 0 0 0.0.0.0:10000 0.0.0.0:* ESCUCHAR tcp 0 0 127.0.0.1:5940 0.0.0.0:* ESCUCHAR tcp 0 0 127.0.1.1:53 0.0.0.0:* ESCUCHAR tcp 0 0 127.0.0.1:631 0.0.0.0:* ESCUCHAR tcp 0 0 127.0.0.1:5432 0.0.0.0:* ESCUCHAR tcp 0 0 127.0.0.1:25 0.0.0.0:* ESCUCHAR tcp 0 0 0.0.0.0:17500 0.0.0.0:* ESCUCHAR tcp 0 0 127.0.0.1:17600 0.0.0.0:* ESCUCHAR tcp 0 0 127.0.0.1:17603 0.0.0.0:* ESCUCHAR tcp 0 0 127.0.0.1:3306 0.0.0.0:* ESCUCHAR tcp 0 0 127.0.0.1:587 0.0.0.0:* ESCUCHAR tcp 0 0 0.0.0.0:5900 0.0.0.0:* ESCUCHAR tcp6 0 0 :::10000 :::* ESCUCHAR tcp6 0 0 :::80 :::* ESCUCHAR tcp6 0 0 ::1:631 :::* ESCUCHAR tcp6 0 0 :::17500 :::* ESCUCHAR tcp6 0 0 :::5900 :::* ESCUCHAR Para cambiar este comportamiento por defecto, editamos el fichero de configuraci\u00f3n de PostgreSQL que en Ubuntu Server est\u00e1 ubicado en la carpeta /etc/postgresql/ \u2026. nano /etc/postgresql/9.3/main/postgresql.conf En la l\u00ednea donde pone listen_addresses = 'localhost' lo cambiamos por listen_addresses = '*' Y reiniciamos postgreSQL con el comando sudo service postgresql restart Tambi\u00e9n ha de modificarse el fichero pg_hba.conf en la misma carpeta agregando una linea como la siguiente (Ver los comentarios dentro del fichero para mas informaci\u00f3n) host all all 192.168.1.0/24 md5","title":"Configurar PostgreSQL para permitir conexiones remotas"},{"location":"kb/GNU-Linux/Software/Prometheus/","text":"Prometheus \u00b6 \u00bfQu\u00e9 es Prometheus? \u00b6 Prometheus es una aplicaci\u00f3n de software de c\u00f3digo abierto que se utiliza para la supervisi\u00f3n y alerta de eventos. Registra m\u00e9tricas en tiempo real en una base de datos de series de tiempo (que permite una alta dimensionalidad) construida utilizando un modelo de extracci\u00f3n HTTP, con consultas flexibles y alertas en tiempo real. El proyecto est\u00e1 escrito en Go y tiene licencia de Apache 2 License, con c\u00f3digo fuente disponible en GitHub. \u00bfC\u00f3mo instalar Prometheus en un servidor Linux? \u00b6 Requisitos \u00b6 Abrir el puerto 9090 en el firewall Actualizar el sistema con sudo apt-get update && sudo apt-get upgrade Descargar el \u00faltimo binario desde la p\u00e1gina de Prometheus cd /tmp wget https://github.com/prometheus/prometheus/releases/download/v2.23.0/prometheus-2.23.0.linux-amd64.tar.gz Descomprimirlo tar -xvf prometheus-2.23.0.linux-amd64.tar.gz Renombrar la carpeta mv prometheus-2.23.0.linux-amd64 prometheus-files Instalaci\u00f3n \u00b6 Crear un usuario, los directorios requeridos y hacer que el usuario sea el propietario de esos directorios: sudo useradd --no-create-home --shell /bin/false prometheus sudo mkdir /etc/prometheus sudo mkdir /var/lib/prometheus sudo chown prometheus:prometheus /etc/prometheus sudo chown prometheus:prometheus /var/lib/prometheus Copiar prometheus y el binario promtool desde la carpeta prometheus-files a /usr/local/bin y cambiar el propietario al usuario prometheus. sudo cp prometheus-files/prometheus /usr/local/bin/ sudo cp prometheus-files/promtool /usr/local/bin/ sudo chown prometheus:prometheus /usr/local/bin/prometheus sudo chown prometheus:prometheus /usr/local/bin/promtool Mover los directorios consoles y console_libraries desde prometheus-files a /etc/prometheus y cambiar el propietario al usuario prometheus. sudo cp -r prometheus-files/consoles /etc/prometheus sudo cp -r prometheus-files/console_libraries /etc/prometheus sudo chown -R prometheus:prometheus /etc/prometheus/consoles sudo chown -R prometheus:prometheus /etc/prometheus/console_libraries Configurar Prometheus \u00b6 La configuraci\u00f3n de Prometheus se hace desde el fichero /etc/prometheus/prometheus.yml . Crear el fichero de configuraci\u00f3n prometheus.yml. \u00b6 sudo nano /etc/prometheus/prometheus.yml Copiar el siguiente contenido al fichero prometheus.yml global: scrape_interval: 10s scrape_configs: - job_name: 'prometheus' scrape_interval: 5s static_configs: - targets: ['localhost:9090'] Cambiar el propietario del fichero de configuraci\u00f3n al usuario prometheus sudo chown prometheus:prometheus /etc/prometheus/prometheus.yml Configurar el servicio Prometheus \u00b6 Crear un fichero de servicio. sudo nano /etc/systemd/system/prometheus.service Copiar el siguiente contenido dentro del fichero [Unit] Description=Prometheus Wants=network-online.target After=network-online.target [Service] User=prometheus Group=prometheus Type=simple ExecStart=/usr/local/bin/prometheus \\ --config.file /etc/prometheus/prometheus.yml \\ --storage.tsdb.path /var/lib/prometheus/ \\ --web.console.templates=/etc/prometheus/consoles \\ --web.console.libraries=/etc/prometheus/console_libraries [Install] WantedBy=multi-user.target Recargar el servicio systemd para registrar el servicio prometheus y iniciarlo. sudo systemctl daemon-reload sudo systemctl start prometheus Chequear el status usando. sudo systemctl status prometheus El status debe mostrar algo parecido a: \u25cf prometheus.service - Prometheus Loaded: loaded (/etc/systemd/system/prometheus.service; enabled; vendor preset: enabled) Active: active (running) since Mon 2020-12-07 19:41:02 CET; 2h 8min ago Activar el servicio para que se cargue en el arranque sudo systemctl enable prometheus.service Acceder al Web UI de Prometheus \u00b6 Ahora debe poder accederse al interfaz web de Prometheus en la direcci\u00f3n http://<prometheus-ip>:9090/graph Hasta ahora se ha configurado el servidor Prometheus. Ser\u00e1 necesario registrar los targets en el fichero prometheus.yml file para obtener las m\u00e9tricas desde las fuentes de datos. Po ejemplo, si se quieren monitorizar 10 servidores, las direcciones IP de esos servidores deber\u00e1n a\u00f1adirese como \"target\" en el fichero de configuraci\u00f3n para que el servidor haga scraping de los datos. El servidor a monitorizar debe tener \"Node Exporter\" instalado y disponible para que Prometheus lo visite y adquiera los datos. Fuentes https://devopscube.com/install-configure-prometheus-linux/ C\u00f3mo monitorizar servidores Linux usando Prometheus Node Exporter \u00b6 Requisitos \u00b6 Port 9100 opened in server firewall as Prometheus reads metrics on this port. Instalar Node Exporter Binary \u00b6 Descargar el \u00faltimo paquete de node exporter. Chequear cual es la \u00faltima versi\u00f3n en la secci\u00f3n Downloads del sitio web de prometheus y adaptar el siguiente comando. cd /tmp wget https://github.com/prometheus/node_exporter/releases/download/v1.0.1/node_exporter-1.0.1.linux-amd64.tar.gz Descomprimir el fichero descargado tar -xvf node_exporter-1.0.1.linux-amd64.tar.gz Mover el binario node-exporter a /usr/local/bin sudo mv node_exporter-1.0.1.linux-amd64/node_exporter /usr/local/bin/ Nota: En el momento de escribir este art\u00edculo, la \u00faltima versi\u00f3n era node_exporter-1.0.1.linux-amd64 pero esto puede cambiar y hay que ir a buscar siempre la \u00faltima versi\u00f3n en github o en la seccion downloads del sitio web de prometheus Crear un servicio personalizado \u00b6 Crear un usuario node_exporter para ejecutar el servicio sudo useradd -rs /bin/false node_exporter Crear un servicio de tipo systemd para node_exporter sudo nano /etc/systemd/system/node_exporter.service El fichero de servicio ha de tener el siguiente contenido [Unit] Description=Node Exporter After=network.target [Service] User=node_exporter Group=node_exporter Type=simple ExecStart=/usr/local/bin/node_exporter --web.listen-address=\"127.0.0.1:9100\" [Install] WantedBy=multi-user.target Nota: El ejecutable node_exporter admite distintos par\u00e1metros a la hora de lanzarlo, algunos par\u00e1metros interesantes son por ej. --web.listen-address el cual especifica en que tarjeta de red y puerto se ha de mantener a la escucha el exportador de datos, al decirle 127.0.0.1 evitamos que el resultado del exporter sea p\u00fablico, luego haremos mediante un proxy nginx cargaremos esta direcci\u00f3n solo desde determinadas IP. Recargar y iniciar el servicio node_exporter sudo systemctl daemon-reload sudo systemctl start node_exporter Chequear el status del servicio sudo systemctl status node_exporter Activar el servicio para que se arranque en el inicio sudo systemctl enable node_exporter Ahora node exporter estar\u00e1 exportando m\u00e9tricas en el puerto 9100 solo para el localhost. Podemos hacer un wget desde la misma m\u00e1quina y comprobar desde la red externa que el sitio no es accesible cd /tmp wget http://127.0.0.1:9100/metrics cat /tmp/index.html Proteger por IP y hacer accesible con proxy Nginx \u00b6 Creamos un sitio en nginx para el exporter sudo su nano /etc/nginx/sites-available/open_exporter Definimos el servidor con este contenido server { listen 9101; location / { allow 192.168.1.10; deny all; proxy_pass http://localhost:9100; } } Nota: En el ejemplo, la directiva allow restringe el acceso a la ip 192.168.1.10 habilitamos el sitio creando un enlace en la carpeta sites-enabled ls -s /etc/nginx/sites-avaiable/open_exporter /etc/nginx/sites-enabled/open_exporter reiniciamos nginx systemctl restart nginx Configurar el servidor a monitorizar como target en Prometheus \u00b6 Nota: Esta configuraci\u00f3n ha de realizarse en el servidor Prometheus Modificar el fichero de configuraci\u00f3n prometheus.yml sudo nano /etc/prometheus/prometheus.yml En la secci\u00f3n scrape a\u00f1adir el node exporter target como se muestra debajo, cambiando la IP 192.168.1.11 por la IP del servidor donde se haya configurado el node exporter. El nombre del Job puede ser cualquiera, es a efectos de identificaci\u00f3n. ... - job_name: 'node_exporter_metrics' scrape_interval: 5s static_configs: - targets: ['192.168.1.11:9100'] Reiniciar el servicio prometheus para que los cambios surjan efecto. sudo systemctl restart prometheus Configurar Blackbox exporter para m\u00e9tricas web, DNS y otros interesantes \u00b6 Descargar BlackBox Exporter Ir a la p\u00e1gina oficial para obtener el \u00faltimo binario disponible. Yo estoy descargando blackbox_exporter-0.18.0.linux-amd64.tar.gz https://github.com/prometheus/blackbox_exporter/releases Descargar y extraer sudo su cd /tmp wget https://github.com/prometheus/blackbox_exporter/releases/download/v0.18.0/blackbox_exporter-0.18.0.linux-amd64.tar.gz tar -xzf blackbox_exporter-0.18.0.linux-amd64.tar.gz mv blackbox_exporter-0.18.0.linux-amd64 blackbox_exporter mv blackbox_exporter /usr/local/bin Dentro de la carpeta blackbox_exporter hay 2 ficheros importantes: blackbox_exporter: Ejecutable para el servicio blackbox.yml: Fichero de configuraci\u00f3n para blackbox donde se definen los chequeos. Algunos flags que pueden usarse. ./blackbox_exporter -h --config.file=\"blackbox.yml\" Blackbox exporter configuration file. --web.listen-address=\":9115\" The address to listen on for HTTP requests. --timeout-offset=0.5 Offset to subtract from timeout in seconds. --config.check If true validate the config file and then exit. --history.limit=100 The maximum amount of items to keep in the history. Crear usuario para Blackbox y asignar permisos sudo useradd -rs /bin/false blackbox sudo chmod -R 777 /usr/local/bin/blackbox_exporter sudo chown -R blackbox:blackbox /usr/local/bin/blackbox_exporter Crear servicio para blackbox sudo nano /etc/systemd/system/blackbox.service con este contenido [Unit] Description=Blackbox Exporter Service Wants=network-online.target After=network-online.target [Service] Type=simple User=blackbox Group=blackbox ExecStart=/usr/local/bin/blackbox_exporter/blackbox_exporter --config.file=\"/usr/local/bin/blackbox_exporter/blackbox.yml\" --web.listen-address=\"127.0.0.1:9115\" [Install] WantedBy=multi-user.target Activamos el servicio y lo probamos sudo systemctl daemon-reload sudo systemctl start blackbox.service sudo systemctl enable blackbox.service sudo systemctl status blackbox.service wget http://localhost:9115/ Integrando blackbox con prometheus Vamos a monitorizar github.com sudo nano /etc/prometheus/prometheus.yml agregamos el job - job_name: 'blackbox' metrics_path: /probe params: module: ['http_2xx'] # Look for a HTTP 200 response. static_configs: - targets: - https://github.com - https://google.com relabel_configs: - source_labels: [__address__] target_label: __param_target - source_labels: [__param_target] target_label: instance - target_label: __address__ replacement: 127.0.0.1:9115 # The blackbox exporter's real hostname:port. Reiniciamos Prometheus sudo systemctl restart prometheus.service https://github.com/prometheus/blackbox_exporter https://geekflare.com/monitor-website-with-blackbox-prometheus-grafana/","title":"Prometheus"},{"location":"kb/GNU-Linux/Software/Prometheus/#prometheus","text":"","title":"Prometheus"},{"location":"kb/GNU-Linux/Software/Prometheus/#que-es-prometheus","text":"Prometheus es una aplicaci\u00f3n de software de c\u00f3digo abierto que se utiliza para la supervisi\u00f3n y alerta de eventos. Registra m\u00e9tricas en tiempo real en una base de datos de series de tiempo (que permite una alta dimensionalidad) construida utilizando un modelo de extracci\u00f3n HTTP, con consultas flexibles y alertas en tiempo real. El proyecto est\u00e1 escrito en Go y tiene licencia de Apache 2 License, con c\u00f3digo fuente disponible en GitHub.","title":"\u00bfQu\u00e9 es Prometheus?"},{"location":"kb/GNU-Linux/Software/Prometheus/#como-instalar-prometheus-en-un-servidor-linux","text":"","title":"\u00bfC\u00f3mo instalar Prometheus en un servidor Linux?"},{"location":"kb/GNU-Linux/Software/Prometheus/#requisitos","text":"Abrir el puerto 9090 en el firewall Actualizar el sistema con sudo apt-get update && sudo apt-get upgrade Descargar el \u00faltimo binario desde la p\u00e1gina de Prometheus cd /tmp wget https://github.com/prometheus/prometheus/releases/download/v2.23.0/prometheus-2.23.0.linux-amd64.tar.gz Descomprimirlo tar -xvf prometheus-2.23.0.linux-amd64.tar.gz Renombrar la carpeta mv prometheus-2.23.0.linux-amd64 prometheus-files","title":"Requisitos"},{"location":"kb/GNU-Linux/Software/Prometheus/#instalacion","text":"Crear un usuario, los directorios requeridos y hacer que el usuario sea el propietario de esos directorios: sudo useradd --no-create-home --shell /bin/false prometheus sudo mkdir /etc/prometheus sudo mkdir /var/lib/prometheus sudo chown prometheus:prometheus /etc/prometheus sudo chown prometheus:prometheus /var/lib/prometheus Copiar prometheus y el binario promtool desde la carpeta prometheus-files a /usr/local/bin y cambiar el propietario al usuario prometheus. sudo cp prometheus-files/prometheus /usr/local/bin/ sudo cp prometheus-files/promtool /usr/local/bin/ sudo chown prometheus:prometheus /usr/local/bin/prometheus sudo chown prometheus:prometheus /usr/local/bin/promtool Mover los directorios consoles y console_libraries desde prometheus-files a /etc/prometheus y cambiar el propietario al usuario prometheus. sudo cp -r prometheus-files/consoles /etc/prometheus sudo cp -r prometheus-files/console_libraries /etc/prometheus sudo chown -R prometheus:prometheus /etc/prometheus/consoles sudo chown -R prometheus:prometheus /etc/prometheus/console_libraries","title":"Instalaci\u00f3n"},{"location":"kb/GNU-Linux/Software/Prometheus/#configurar-prometheus","text":"La configuraci\u00f3n de Prometheus se hace desde el fichero /etc/prometheus/prometheus.yml .","title":"Configurar Prometheus"},{"location":"kb/GNU-Linux/Software/Prometheus/#crear-el-fichero-de-configuracion-prometheusyml","text":"sudo nano /etc/prometheus/prometheus.yml Copiar el siguiente contenido al fichero prometheus.yml global: scrape_interval: 10s scrape_configs: - job_name: 'prometheus' scrape_interval: 5s static_configs: - targets: ['localhost:9090'] Cambiar el propietario del fichero de configuraci\u00f3n al usuario prometheus sudo chown prometheus:prometheus /etc/prometheus/prometheus.yml","title":"Crear el fichero de configuraci\u00f3n prometheus.yml."},{"location":"kb/GNU-Linux/Software/Prometheus/#configurar-el-servicio-prometheus","text":"Crear un fichero de servicio. sudo nano /etc/systemd/system/prometheus.service Copiar el siguiente contenido dentro del fichero [Unit] Description=Prometheus Wants=network-online.target After=network-online.target [Service] User=prometheus Group=prometheus Type=simple ExecStart=/usr/local/bin/prometheus \\ --config.file /etc/prometheus/prometheus.yml \\ --storage.tsdb.path /var/lib/prometheus/ \\ --web.console.templates=/etc/prometheus/consoles \\ --web.console.libraries=/etc/prometheus/console_libraries [Install] WantedBy=multi-user.target Recargar el servicio systemd para registrar el servicio prometheus y iniciarlo. sudo systemctl daemon-reload sudo systemctl start prometheus Chequear el status usando. sudo systemctl status prometheus El status debe mostrar algo parecido a: \u25cf prometheus.service - Prometheus Loaded: loaded (/etc/systemd/system/prometheus.service; enabled; vendor preset: enabled) Active: active (running) since Mon 2020-12-07 19:41:02 CET; 2h 8min ago Activar el servicio para que se cargue en el arranque sudo systemctl enable prometheus.service","title":"Configurar el servicio Prometheus"},{"location":"kb/GNU-Linux/Software/Prometheus/#acceder-al-web-ui-de-prometheus","text":"Ahora debe poder accederse al interfaz web de Prometheus en la direcci\u00f3n http://<prometheus-ip>:9090/graph Hasta ahora se ha configurado el servidor Prometheus. Ser\u00e1 necesario registrar los targets en el fichero prometheus.yml file para obtener las m\u00e9tricas desde las fuentes de datos. Po ejemplo, si se quieren monitorizar 10 servidores, las direcciones IP de esos servidores deber\u00e1n a\u00f1adirese como \"target\" en el fichero de configuraci\u00f3n para que el servidor haga scraping de los datos. El servidor a monitorizar debe tener \"Node Exporter\" instalado y disponible para que Prometheus lo visite y adquiera los datos. Fuentes https://devopscube.com/install-configure-prometheus-linux/","title":"Acceder al Web UI de Prometheus"},{"location":"kb/GNU-Linux/Software/Prometheus/#como-monitorizar-servidores-linux-usando-prometheus-node-exporter","text":"","title":"C\u00f3mo monitorizar servidores Linux usando Prometheus Node Exporter"},{"location":"kb/GNU-Linux/Software/Prometheus/#requisitos_1","text":"Port 9100 opened in server firewall as Prometheus reads metrics on this port.","title":"Requisitos"},{"location":"kb/GNU-Linux/Software/Prometheus/#instalar-node-exporter-binary","text":"Descargar el \u00faltimo paquete de node exporter. Chequear cual es la \u00faltima versi\u00f3n en la secci\u00f3n Downloads del sitio web de prometheus y adaptar el siguiente comando. cd /tmp wget https://github.com/prometheus/node_exporter/releases/download/v1.0.1/node_exporter-1.0.1.linux-amd64.tar.gz Descomprimir el fichero descargado tar -xvf node_exporter-1.0.1.linux-amd64.tar.gz Mover el binario node-exporter a /usr/local/bin sudo mv node_exporter-1.0.1.linux-amd64/node_exporter /usr/local/bin/ Nota: En el momento de escribir este art\u00edculo, la \u00faltima versi\u00f3n era node_exporter-1.0.1.linux-amd64 pero esto puede cambiar y hay que ir a buscar siempre la \u00faltima versi\u00f3n en github o en la seccion downloads del sitio web de prometheus","title":"Instalar Node Exporter Binary"},{"location":"kb/GNU-Linux/Software/Prometheus/#crear-un-servicio-personalizado","text":"Crear un usuario node_exporter para ejecutar el servicio sudo useradd -rs /bin/false node_exporter Crear un servicio de tipo systemd para node_exporter sudo nano /etc/systemd/system/node_exporter.service El fichero de servicio ha de tener el siguiente contenido [Unit] Description=Node Exporter After=network.target [Service] User=node_exporter Group=node_exporter Type=simple ExecStart=/usr/local/bin/node_exporter --web.listen-address=\"127.0.0.1:9100\" [Install] WantedBy=multi-user.target Nota: El ejecutable node_exporter admite distintos par\u00e1metros a la hora de lanzarlo, algunos par\u00e1metros interesantes son por ej. --web.listen-address el cual especifica en que tarjeta de red y puerto se ha de mantener a la escucha el exportador de datos, al decirle 127.0.0.1 evitamos que el resultado del exporter sea p\u00fablico, luego haremos mediante un proxy nginx cargaremos esta direcci\u00f3n solo desde determinadas IP. Recargar y iniciar el servicio node_exporter sudo systemctl daemon-reload sudo systemctl start node_exporter Chequear el status del servicio sudo systemctl status node_exporter Activar el servicio para que se arranque en el inicio sudo systemctl enable node_exporter Ahora node exporter estar\u00e1 exportando m\u00e9tricas en el puerto 9100 solo para el localhost. Podemos hacer un wget desde la misma m\u00e1quina y comprobar desde la red externa que el sitio no es accesible cd /tmp wget http://127.0.0.1:9100/metrics cat /tmp/index.html","title":"Crear un servicio personalizado"},{"location":"kb/GNU-Linux/Software/Prometheus/#proteger-por-ip-y-hacer-accesible-con-proxy-nginx","text":"Creamos un sitio en nginx para el exporter sudo su nano /etc/nginx/sites-available/open_exporter Definimos el servidor con este contenido server { listen 9101; location / { allow 192.168.1.10; deny all; proxy_pass http://localhost:9100; } } Nota: En el ejemplo, la directiva allow restringe el acceso a la ip 192.168.1.10 habilitamos el sitio creando un enlace en la carpeta sites-enabled ls -s /etc/nginx/sites-avaiable/open_exporter /etc/nginx/sites-enabled/open_exporter reiniciamos nginx systemctl restart nginx","title":"Proteger por IP y hacer accesible con proxy Nginx"},{"location":"kb/GNU-Linux/Software/Prometheus/#configurar-el-servidor-a-monitorizar-como-target-en-prometheus","text":"Nota: Esta configuraci\u00f3n ha de realizarse en el servidor Prometheus Modificar el fichero de configuraci\u00f3n prometheus.yml sudo nano /etc/prometheus/prometheus.yml En la secci\u00f3n scrape a\u00f1adir el node exporter target como se muestra debajo, cambiando la IP 192.168.1.11 por la IP del servidor donde se haya configurado el node exporter. El nombre del Job puede ser cualquiera, es a efectos de identificaci\u00f3n. ... - job_name: 'node_exporter_metrics' scrape_interval: 5s static_configs: - targets: ['192.168.1.11:9100'] Reiniciar el servicio prometheus para que los cambios surjan efecto. sudo systemctl restart prometheus","title":"Configurar el servidor a monitorizar como target en Prometheus"},{"location":"kb/GNU-Linux/Software/Prometheus/#configurar-blackbox-exporter-para-metricas-web-dns-y-otros-interesantes","text":"Descargar BlackBox Exporter Ir a la p\u00e1gina oficial para obtener el \u00faltimo binario disponible. Yo estoy descargando blackbox_exporter-0.18.0.linux-amd64.tar.gz https://github.com/prometheus/blackbox_exporter/releases Descargar y extraer sudo su cd /tmp wget https://github.com/prometheus/blackbox_exporter/releases/download/v0.18.0/blackbox_exporter-0.18.0.linux-amd64.tar.gz tar -xzf blackbox_exporter-0.18.0.linux-amd64.tar.gz mv blackbox_exporter-0.18.0.linux-amd64 blackbox_exporter mv blackbox_exporter /usr/local/bin Dentro de la carpeta blackbox_exporter hay 2 ficheros importantes: blackbox_exporter: Ejecutable para el servicio blackbox.yml: Fichero de configuraci\u00f3n para blackbox donde se definen los chequeos. Algunos flags que pueden usarse. ./blackbox_exporter -h --config.file=\"blackbox.yml\" Blackbox exporter configuration file. --web.listen-address=\":9115\" The address to listen on for HTTP requests. --timeout-offset=0.5 Offset to subtract from timeout in seconds. --config.check If true validate the config file and then exit. --history.limit=100 The maximum amount of items to keep in the history. Crear usuario para Blackbox y asignar permisos sudo useradd -rs /bin/false blackbox sudo chmod -R 777 /usr/local/bin/blackbox_exporter sudo chown -R blackbox:blackbox /usr/local/bin/blackbox_exporter Crear servicio para blackbox sudo nano /etc/systemd/system/blackbox.service con este contenido [Unit] Description=Blackbox Exporter Service Wants=network-online.target After=network-online.target [Service] Type=simple User=blackbox Group=blackbox ExecStart=/usr/local/bin/blackbox_exporter/blackbox_exporter --config.file=\"/usr/local/bin/blackbox_exporter/blackbox.yml\" --web.listen-address=\"127.0.0.1:9115\" [Install] WantedBy=multi-user.target Activamos el servicio y lo probamos sudo systemctl daemon-reload sudo systemctl start blackbox.service sudo systemctl enable blackbox.service sudo systemctl status blackbox.service wget http://localhost:9115/ Integrando blackbox con prometheus Vamos a monitorizar github.com sudo nano /etc/prometheus/prometheus.yml agregamos el job - job_name: 'blackbox' metrics_path: /probe params: module: ['http_2xx'] # Look for a HTTP 200 response. static_configs: - targets: - https://github.com - https://google.com relabel_configs: - source_labels: [__address__] target_label: __param_target - source_labels: [__param_target] target_label: instance - target_label: __address__ replacement: 127.0.0.1:9115 # The blackbox exporter's real hostname:port. Reiniciamos Prometheus sudo systemctl restart prometheus.service https://github.com/prometheus/blackbox_exporter https://geekflare.com/monitor-website-with-blackbox-prometheus-grafana/","title":"Configurar Blackbox exporter para m\u00e9tricas web, DNS y otros interesantes"},{"location":"kb/GNU-Linux/Software/VestaCP/","text":"VestaCP \u00b6 VestaCP ftp 530 Login incorrect \u00b6 El servidor siempre devuelve un error Login incorrect con las cuentas FTP reci\u00e9n creadas. Esto sucede por que se les asigna a los usuarios ftp el login /usr/sbin/nologin (Esto se puede comprobar en /etc/passwd) Y ese login no est\u00e1 registrado en los shells en el fichero /etc/shells Por lo que a\u00f1adiendo la linea /usr/sbin/nologin al fichero /etc/shells se soluciona el problema Agregar certificado let\u2019s Encrypt a Vesta \u00b6 Partiendo de una instalaci\u00f3n estandard donde Vesta CP est\u00e1 funcionando en el puerto 8083 y podemos acceder a https://maquina.example.com:8083 Buscamos, Vesta CP el sitio web correspondiente a maquina.example.com , si no existe lo creamos, aunque lo mas probable es que ya exista bajo la cuenta admin Activamos Let\u2019s encrypt para el sitio web correspondiente a maquina.example.com , esto nos generar\u00e1 los certificados y vesta se encargar\u00e1 de renovar los certificados de forma autom\u00e1tica. los certificados quedar\u00e1n generados en la carpeta /home/admin/conf/web/ y ser\u00e1n dos ficheros el crt y el .key ambos con el nombre del dominio y comenzando por ssl. cat /home/admin/conf/web/ssl.maquina.example.com.crt cat /home/admin/conf/web/ssl.maquina.example.com.key Ahora se han de establecer unos symlinks para el sitio vesta cp que tenemos corriendo en el puerto 8083 , y enlazarlo para que use los certificados creados para el sitio web en el paso anterior y en el puerto 80. Previamente podemos renombrar los certificados existentes. Despu\u00e9s dejamos los permisos como estaban para los certificados anteriores. mv /usr/local/vesta/ssl/certificate.crt /usr/local/vesta/ssl/unusablecer.crt mv /usr/local/vesta/ssl/certificate.key /usr/local/vesta/ssl/unusablecer.key ln -s /home/admin/conf/web/ssl.maquina.example.com.crt /usr/local/vesta/ssl/certificate.crt ln -s /home/admin/conf/web/ssl.maquina.example.com.key /usr/local/vesta/ssl/certificate.key chown root:dovecot certificate.crt chown root:dovecot certificate.key Listo, ahora cuando el certificado se renueve para el sitio corriendo en el puerto 80, el sitio vesta coger\u00e1 esos certificados. Instalar WordPress en Vesta \u00b6 Se crea el usuario en vestacp, el sitio web, la base de datos y el correo Se descarga en local la ultima copia de wordpress desde https://es.wordpress.org/ Se descomprime en local y se copia el archivo wp-config-sample.php como wp-config.php. Se extrae un conjunto de claves desde https://api.wordpress.org/secret-key/1.1/salt/ y se colocan en el wp-config.php Se ponen en el wp.config las siguientes lineas para evitar que pida datos FTP en las actualizaciones: define('FTP_USER', 'usuarioftp'); define('FTP_PASS', 'claveftp'); define('FTP_HOST', 'ipservidor'); Se suben a la carpeta web del servidor \u00abpublic_html\u00bb los archivos descomprimidos Se accede al dominio para comenzar la instalaci\u00f3n En la instalaci\u00f3n escoger un nombre de usuario robusto que no sea el del mismo dominio Se crea un archivo .htaccess con el contenido Options All -Indexes y se le dan permisos (777) . Despu\u00e9s vas a tu panel de administrador de wordpress y definimos los permalinks Se crea una carpeta wp-content/uploads y se le dan permisos a la carpeta uploads SSL Por dominio de correo en Vesta \u00b6 Se trata de copiar los certificados en la carpeta /usr/local/vesta/ssl/ con el nombre de la ip por ej. 92.222.165.33.crt 92.222.165.33.pem 92.222.165.33.key Editamos el fichero de config del exim nano /etc/exim4/exim4.conf.template y lo dejamos as\u00ed: tls_advertise_hosts = * tls_certificate = /usr/local/vesta/ssl/$received_ip_address.cert tls_privatekey = /usr/local/vesta/ssl/$received_ip_address.key Editamos el fichero de config del dovecot nano /etc/dovecot/conf.d/10-ssl.conf y agregamos local 92.222.165.33 { ssl_cert = </usr/local/vesta/ssl/92.222.165.33.crt ssl_key = </usr/local/vesta/ssl/92.222.165.33.key } restartamos los servicios service dovecot restart service exim4 restart y listos En caso de que haya un certificado intermedio CA hay que concatenarlo al final del fichero CRT correspondiente a la IP","title":"VestaCP"},{"location":"kb/GNU-Linux/Software/VestaCP/#vestacp","text":"","title":"VestaCP"},{"location":"kb/GNU-Linux/Software/VestaCP/#vestacp-ftp-530-login-incorrect","text":"El servidor siempre devuelve un error Login incorrect con las cuentas FTP reci\u00e9n creadas. Esto sucede por que se les asigna a los usuarios ftp el login /usr/sbin/nologin (Esto se puede comprobar en /etc/passwd) Y ese login no est\u00e1 registrado en los shells en el fichero /etc/shells Por lo que a\u00f1adiendo la linea /usr/sbin/nologin al fichero /etc/shells se soluciona el problema","title":"VestaCP ftp 530 Login incorrect"},{"location":"kb/GNU-Linux/Software/VestaCP/#agregar-certificado-lets-encrypt-a-vesta","text":"Partiendo de una instalaci\u00f3n estandard donde Vesta CP est\u00e1 funcionando en el puerto 8083 y podemos acceder a https://maquina.example.com:8083 Buscamos, Vesta CP el sitio web correspondiente a maquina.example.com , si no existe lo creamos, aunque lo mas probable es que ya exista bajo la cuenta admin Activamos Let\u2019s encrypt para el sitio web correspondiente a maquina.example.com , esto nos generar\u00e1 los certificados y vesta se encargar\u00e1 de renovar los certificados de forma autom\u00e1tica. los certificados quedar\u00e1n generados en la carpeta /home/admin/conf/web/ y ser\u00e1n dos ficheros el crt y el .key ambos con el nombre del dominio y comenzando por ssl. cat /home/admin/conf/web/ssl.maquina.example.com.crt cat /home/admin/conf/web/ssl.maquina.example.com.key Ahora se han de establecer unos symlinks para el sitio vesta cp que tenemos corriendo en el puerto 8083 , y enlazarlo para que use los certificados creados para el sitio web en el paso anterior y en el puerto 80. Previamente podemos renombrar los certificados existentes. Despu\u00e9s dejamos los permisos como estaban para los certificados anteriores. mv /usr/local/vesta/ssl/certificate.crt /usr/local/vesta/ssl/unusablecer.crt mv /usr/local/vesta/ssl/certificate.key /usr/local/vesta/ssl/unusablecer.key ln -s /home/admin/conf/web/ssl.maquina.example.com.crt /usr/local/vesta/ssl/certificate.crt ln -s /home/admin/conf/web/ssl.maquina.example.com.key /usr/local/vesta/ssl/certificate.key chown root:dovecot certificate.crt chown root:dovecot certificate.key Listo, ahora cuando el certificado se renueve para el sitio corriendo en el puerto 80, el sitio vesta coger\u00e1 esos certificados.","title":"Agregar certificado let\u2019s Encrypt a Vesta"},{"location":"kb/GNU-Linux/Software/VestaCP/#instalar-wordpress-en-vesta","text":"Se crea el usuario en vestacp, el sitio web, la base de datos y el correo Se descarga en local la ultima copia de wordpress desde https://es.wordpress.org/ Se descomprime en local y se copia el archivo wp-config-sample.php como wp-config.php. Se extrae un conjunto de claves desde https://api.wordpress.org/secret-key/1.1/salt/ y se colocan en el wp-config.php Se ponen en el wp.config las siguientes lineas para evitar que pida datos FTP en las actualizaciones: define('FTP_USER', 'usuarioftp'); define('FTP_PASS', 'claveftp'); define('FTP_HOST', 'ipservidor'); Se suben a la carpeta web del servidor \u00abpublic_html\u00bb los archivos descomprimidos Se accede al dominio para comenzar la instalaci\u00f3n En la instalaci\u00f3n escoger un nombre de usuario robusto que no sea el del mismo dominio Se crea un archivo .htaccess con el contenido Options All -Indexes y se le dan permisos (777) . Despu\u00e9s vas a tu panel de administrador de wordpress y definimos los permalinks Se crea una carpeta wp-content/uploads y se le dan permisos a la carpeta uploads","title":"Instalar WordPress en Vesta"},{"location":"kb/GNU-Linux/Software/VestaCP/#ssl-por-dominio-de-correo-en-vesta","text":"Se trata de copiar los certificados en la carpeta /usr/local/vesta/ssl/ con el nombre de la ip por ej. 92.222.165.33.crt 92.222.165.33.pem 92.222.165.33.key Editamos el fichero de config del exim nano /etc/exim4/exim4.conf.template y lo dejamos as\u00ed: tls_advertise_hosts = * tls_certificate = /usr/local/vesta/ssl/$received_ip_address.cert tls_privatekey = /usr/local/vesta/ssl/$received_ip_address.key Editamos el fichero de config del dovecot nano /etc/dovecot/conf.d/10-ssl.conf y agregamos local 92.222.165.33 { ssl_cert = </usr/local/vesta/ssl/92.222.165.33.crt ssl_key = </usr/local/vesta/ssl/92.222.165.33.key } restartamos los servicios service dovecot restart service exim4 restart y listos En caso de que haya un certificado intermedio CA hay que concatenarlo al final del fichero CRT correspondiente a la IP","title":"SSL Por dominio de correo en Vesta"},{"location":"kb/GNU-Linux/Software/comandos%20postgres/","text":"PostgreSQL \u00b6 PostgreSQL es un Sistema de gesti\u00f3n de bases de datos relacional orientado a objetos y libre. The root user is an account on the system independent from Postgres. There is only one root user. A superuser is an account in Postgres with access to everything. There may be many superusers. System accounts and Postgres accounts are different things, although unless you specify a Postgres username when you connect to the database (through utilities like psql, createdb, dropdb, or otherwise), it will use the current system user's name in hopes that there is a corresponding Postgres account with the same name. The root user does not, by default, have a corresponding account in Postgres. When you install Postgres on *nix, it creates both a superuser named postgres and a system user named postgres. Therefore, when you need to do something with Postgres as the built-in superuser, you have two options: You may sudo su - postgres to become the postgres system user and execute your command (createdb, psql, etc). Because the system user has the same name as the database superuser, your command will connect as the appropriate account. You may specify the username to execute as with the -U switch, eg psql -U postgres .... Depending on your Postgres server's authentication settings, you may be required to enter a password with either or both connection methods. comandos postgres \u00b6 # Hacer un backup de una base de datos pg_dump nombasedatos > ~/ruta/nombrearchivo.sql # Restaurar un backup de una base de datos psql -U usuario -h host -d database -f /ruta/fichero/copia.sql Modo Consola \u00b6 Para acceder a la consola Psql ejecutar el comando psql y opcioinalmente indicar un nombre de usuario psql -U [username]; Ver usuarios desde modo consola \u00b6 \\du Salir del modo consola \u00b6 \\q Modo Gr\u00e1fico \u00b6 Un completo gestor gr\u00e1fico es pgAdminIII Gesti\u00f3n de bases de datos y usuarios \u00b6 Crear cuenta de usuario \u00b6 Los siguientes comandos para agregar o crear una cuenta de usuario y otorgar permiso para la base de datos: adduser \u2013 Comando Linux utilizado para agregar un usuario al sistema psql \u2013 El front-end para PostgreSQL en l\u00ednea de comandos CREATE USER \u2013 Agregar un nuevo usuario al motor de base de datos PostgreSQL CREATE DATABASE nombre; \u2013 Crear una base de datos GRANT ALL PRIVILEGES \u2013 Definir privilegios de acceso ALTER ROLE nombreusuario WITH SUPERUSER; --> Hace un usuario superuser de postgresql","title":"Comandos postgres"},{"location":"kb/GNU-Linux/Software/comandos%20postgres/#postgresql","text":"PostgreSQL es un Sistema de gesti\u00f3n de bases de datos relacional orientado a objetos y libre. The root user is an account on the system independent from Postgres. There is only one root user. A superuser is an account in Postgres with access to everything. There may be many superusers. System accounts and Postgres accounts are different things, although unless you specify a Postgres username when you connect to the database (through utilities like psql, createdb, dropdb, or otherwise), it will use the current system user's name in hopes that there is a corresponding Postgres account with the same name. The root user does not, by default, have a corresponding account in Postgres. When you install Postgres on *nix, it creates both a superuser named postgres and a system user named postgres. Therefore, when you need to do something with Postgres as the built-in superuser, you have two options: You may sudo su - postgres to become the postgres system user and execute your command (createdb, psql, etc). Because the system user has the same name as the database superuser, your command will connect as the appropriate account. You may specify the username to execute as with the -U switch, eg psql -U postgres .... Depending on your Postgres server's authentication settings, you may be required to enter a password with either or both connection methods.","title":"PostgreSQL"},{"location":"kb/GNU-Linux/Software/comandos%20postgres/#comandos-postgres","text":"# Hacer un backup de una base de datos pg_dump nombasedatos > ~/ruta/nombrearchivo.sql # Restaurar un backup de una base de datos psql -U usuario -h host -d database -f /ruta/fichero/copia.sql","title":"comandos postgres"},{"location":"kb/GNU-Linux/Software/comandos%20postgres/#modo-consola","text":"Para acceder a la consola Psql ejecutar el comando psql y opcioinalmente indicar un nombre de usuario psql -U [username];","title":"Modo Consola"},{"location":"kb/GNU-Linux/Software/comandos%20postgres/#ver-usuarios-desde-modo-consola","text":"\\du","title":"Ver usuarios desde modo consola"},{"location":"kb/GNU-Linux/Software/comandos%20postgres/#salir-del-modo-consola","text":"\\q","title":"Salir del modo consola"},{"location":"kb/GNU-Linux/Software/comandos%20postgres/#modo-grafico","text":"Un completo gestor gr\u00e1fico es pgAdminIII","title":"Modo Gr\u00e1fico"},{"location":"kb/GNU-Linux/Software/comandos%20postgres/#gestion-de-bases-de-datos-y-usuarios","text":"","title":"Gesti\u00f3n de bases de datos y usuarios"},{"location":"kb/GNU-Linux/Software/comandos%20postgres/#crear-cuenta-de-usuario","text":"Los siguientes comandos para agregar o crear una cuenta de usuario y otorgar permiso para la base de datos: adduser \u2013 Comando Linux utilizado para agregar un usuario al sistema psql \u2013 El front-end para PostgreSQL en l\u00ednea de comandos CREATE USER \u2013 Agregar un nuevo usuario al motor de base de datos PostgreSQL CREATE DATABASE nombre; \u2013 Crear una base de datos GRANT ALL PRIVILEGES \u2013 Definir privilegios de acceso ALTER ROLE nombreusuario WITH SUPERUSER; --> Hace un usuario superuser de postgresql","title":"Crear cuenta de usuario"},{"location":"kb/GNU-Linux/Software/rclone/","text":"rclone \u00b6 La navaja suiza del almacenamiento en nube Es un programa de linea de comandos para realizar sincronizaciones de carpetas y ficheros ubicados en distintas m\u00e1quinas o en distintos servicios de nube como dropbox, google drive, FTP, SFTP, etc. Es muy util para hacer copias de seguridad y mantener sincronizados directorios con servicios de almacenamiento. Instalaci\u00f3n \u00b6 curl https://rclone.org/install.sh | sudo bash Configuraci\u00f3n \u00b6 La configuracion se realiza mediante un asistente de configuraci\u00f3n que aparece cuando escribimos rclone config Por defecto toda la configuraci\u00f3n se guarda en .config/rclone/rclone.conf Remotos disponibles \u00b6 Choose a number from below, or type in your own value 1 / 1Fichier \\ \"fichier\" 2 / Alias for an existing remote \\ \"alias\" 3 / Amazon Drive \\ \"amazon cloud drive\" 4 / Amazon S3 Compliant Storage Provider (AWS, Alibaba, Ceph, Digital Ocean, Dreamhost, IBM COS, Minio, Tencent COS, etc) \\ \"s3\" 5 / Backblaze B2 \\ \"b2\" 6 / Box \\ \"box\" 7 / Cache a remote \\ \"cache\" 8 / Citrix Sharefile \\ \"sharefile\" 9 / Dropbox \\ \"dropbox\" 10 / Encrypt/Decrypt a remote \\ \"crypt\" 11 / FTP Connection \\ \"ftp\" 12 / Google Cloud Storage (this is not Google Drive) \\ \"google cloud storage\" 13 / Google Drive \\ \"drive\" 14 / Google Photos \\ \"google photos\" 15 / Hubic \\ \"hubic\" 16 / In memory object storage system. \\ \"memory\" 17 / Jottacloud \\ \"jottacloud\" 18 / Koofr \\ \"koofr\" 19 / Local Disk \\ \"local\" 20 / Mail.ru Cloud \\ \"mailru\" 21 / Mega \\ \"mega\" 22 / Microsoft Azure Blob Storage \\ \"azureblob\" 23 / Microsoft OneDrive \\ \"onedrive\" 24 / OpenDrive \\ \"opendrive\" 25 / OpenStack Swift (Rackspace Cloud Files, Memset Memstore, OVH) \\ \"swift\" 26 / Pcloud \\ \"pcloud\" 27 / Put.io \\ \"putio\" 28 / QingCloud Object Storage \\ \"qingstor\" 29 / SSH/SFTP Connection \\ \"sftp\" 30 / Sugarsync \\ \"sugarsync\" 31 / Tardigrade Decentralized Cloud Storage \\ \"tardigrade\" 32 / Transparently chunk/split large files \\ \"chunker\" 33 / Union merges the contents of several upstream fs \\ \"union\" 34 / Webdav \\ \"webdav\" 35 / Yandex Disk \\ \"yandex\" 36 / http Connection \\ \"http\" 37 / premiumize.me \\ \"premiumizeme\" 38 / seafile \\ \"seafile\" Ejemplo de configuraci\u00f3n \u00b6 Queremos mantener sincronizada nuestra carpeta /home/javier/backups con otra carpeta SFTP en otro servidor al cual tenemos acceso por SFTP. Ejecutamos rclone config y creamos un nuevo remoto seleccionando la opci\u00f3n n) New remote Asignamos un nombre a ese remoto por ej. backs Seleccionamos el tipo 12 correspondiente a SSH/SFTP terminamos el asistente introduciendo los valores SFTP usuario, password y host. Ahora podremos ejecutar un ls sobre el remoto para ver los ficheros que hay: rclone ls backs:/ O podremos sincronizar una carpeta con ese remoto con un comando similar a rclone sync /home/javier/backups/ backs:/.local/maquinalocal","title":"Rclone"},{"location":"kb/GNU-Linux/Software/rclone/#rclone","text":"La navaja suiza del almacenamiento en nube Es un programa de linea de comandos para realizar sincronizaciones de carpetas y ficheros ubicados en distintas m\u00e1quinas o en distintos servicios de nube como dropbox, google drive, FTP, SFTP, etc. Es muy util para hacer copias de seguridad y mantener sincronizados directorios con servicios de almacenamiento.","title":"rclone"},{"location":"kb/GNU-Linux/Software/rclone/#instalacion","text":"curl https://rclone.org/install.sh | sudo bash","title":"Instalaci\u00f3n"},{"location":"kb/GNU-Linux/Software/rclone/#configuracion","text":"La configuracion se realiza mediante un asistente de configuraci\u00f3n que aparece cuando escribimos rclone config Por defecto toda la configuraci\u00f3n se guarda en .config/rclone/rclone.conf","title":"Configuraci\u00f3n"},{"location":"kb/GNU-Linux/Software/rclone/#remotos-disponibles","text":"Choose a number from below, or type in your own value 1 / 1Fichier \\ \"fichier\" 2 / Alias for an existing remote \\ \"alias\" 3 / Amazon Drive \\ \"amazon cloud drive\" 4 / Amazon S3 Compliant Storage Provider (AWS, Alibaba, Ceph, Digital Ocean, Dreamhost, IBM COS, Minio, Tencent COS, etc) \\ \"s3\" 5 / Backblaze B2 \\ \"b2\" 6 / Box \\ \"box\" 7 / Cache a remote \\ \"cache\" 8 / Citrix Sharefile \\ \"sharefile\" 9 / Dropbox \\ \"dropbox\" 10 / Encrypt/Decrypt a remote \\ \"crypt\" 11 / FTP Connection \\ \"ftp\" 12 / Google Cloud Storage (this is not Google Drive) \\ \"google cloud storage\" 13 / Google Drive \\ \"drive\" 14 / Google Photos \\ \"google photos\" 15 / Hubic \\ \"hubic\" 16 / In memory object storage system. \\ \"memory\" 17 / Jottacloud \\ \"jottacloud\" 18 / Koofr \\ \"koofr\" 19 / Local Disk \\ \"local\" 20 / Mail.ru Cloud \\ \"mailru\" 21 / Mega \\ \"mega\" 22 / Microsoft Azure Blob Storage \\ \"azureblob\" 23 / Microsoft OneDrive \\ \"onedrive\" 24 / OpenDrive \\ \"opendrive\" 25 / OpenStack Swift (Rackspace Cloud Files, Memset Memstore, OVH) \\ \"swift\" 26 / Pcloud \\ \"pcloud\" 27 / Put.io \\ \"putio\" 28 / QingCloud Object Storage \\ \"qingstor\" 29 / SSH/SFTP Connection \\ \"sftp\" 30 / Sugarsync \\ \"sugarsync\" 31 / Tardigrade Decentralized Cloud Storage \\ \"tardigrade\" 32 / Transparently chunk/split large files \\ \"chunker\" 33 / Union merges the contents of several upstream fs \\ \"union\" 34 / Webdav \\ \"webdav\" 35 / Yandex Disk \\ \"yandex\" 36 / http Connection \\ \"http\" 37 / premiumize.me \\ \"premiumizeme\" 38 / seafile \\ \"seafile\"","title":"Remotos disponibles"},{"location":"kb/GNU-Linux/Software/rclone/#ejemplo-de-configuracion","text":"Queremos mantener sincronizada nuestra carpeta /home/javier/backups con otra carpeta SFTP en otro servidor al cual tenemos acceso por SFTP. Ejecutamos rclone config y creamos un nuevo remoto seleccionando la opci\u00f3n n) New remote Asignamos un nombre a ese remoto por ej. backs Seleccionamos el tipo 12 correspondiente a SSH/SFTP terminamos el asistente introduciendo los valores SFTP usuario, password y host. Ahora podremos ejecutar un ls sobre el remoto para ver los ficheros que hay: rclone ls backs:/ O podremos sincronizar una carpeta con ese remoto con un comando similar a rclone sync /home/javier/backups/ backs:/.local/maquinalocal","title":"Ejemplo de configuraci\u00f3n"},{"location":"kb/GNU-Linux/Software/terminator/","text":"Terminator \u00b6 Existen distintos paquetes para emulaci\u00f3n de terminales, aparte del estandard que se incluye con cada distribuci\u00f3n. Uno muy chulo es Terminator: Comando Funci\u00f3n Ctrl-Shift-E divide la vista verticalmente Ctrl-Shift-O divide la vista horizontalmente. Ctrl-Shift-P will focus be active on the previous view. Ctrl-Shift-N will focus be active on the next view. Ctrl-Shift-W will close the view where the focus is on. Ctrl-Shift-Q will exit terminator. Ctrl-Shift-X will focus active window and enlarge it","title":"Terminator"},{"location":"kb/GNU-Linux/Software/terminator/#terminator","text":"Existen distintos paquetes para emulaci\u00f3n de terminales, aparte del estandard que se incluye con cada distribuci\u00f3n. Uno muy chulo es Terminator: Comando Funci\u00f3n Ctrl-Shift-E divide la vista verticalmente Ctrl-Shift-O divide la vista horizontalmente. Ctrl-Shift-P will focus be active on the previous view. Ctrl-Shift-N will focus be active on the next view. Ctrl-Shift-W will close the view where the focus is on. Ctrl-Shift-Q will exit terminator. Ctrl-Shift-X will focus active window and enlarge it","title":"Terminator"},{"location":"kb/GNU-Linux/Software/wordpress/","text":"No se pueden subir imagenes a WordPress \u00b6 Aparece un error parecido al siguiente: \u201cUnable to create directory /wp-content/uploads//. Is its parent directory writable by the server?\u201d Warning Atenci\u00f3n: Por ah\u00ed he visto muchos art\u00edculos que dicen \u201ccambia los permisos a 757 o 777\u201d. No recomiendo en absoluto eso\u2026 Chequear que usuario ejecuta Apache: En el caso de ubuntu server, est\u00e1 escrito en /etc/apache2/envvars y dice algo como: export APACHE_RUN_USER=www-data export APACHE_RUN_GROUP=www-data Vemos que el grupo, en este caso, es www-data. Se crea el directorio para las im\u00e1genes: $ mkdir /wp-contents/uploads Se cambia el grupo propietario de la carpeta a www-data (-R de recursive, tambi\u00e9n a todos los archivos que contenga) : $ chgrp -R www-data /wp-contents/uploads $ chmod g+w /wp-contents/uploads o si lo prefieres: $ chmod 775 /wp-contents/uploads Cambiar el \u00faltimo d\u00edgito de los permisos a 7 es peligroso porque cualquier usuario podr\u00eda editar los ficheros.","title":"Wordpress"},{"location":"kb/GNU-Linux/Software/wordpress/#no-se-pueden-subir-imagenes-a-wordpress","text":"Aparece un error parecido al siguiente: \u201cUnable to create directory /wp-content/uploads//. Is its parent directory writable by the server?\u201d Warning Atenci\u00f3n: Por ah\u00ed he visto muchos art\u00edculos que dicen \u201ccambia los permisos a 757 o 777\u201d. No recomiendo en absoluto eso\u2026 Chequear que usuario ejecuta Apache: En el caso de ubuntu server, est\u00e1 escrito en /etc/apache2/envvars y dice algo como: export APACHE_RUN_USER=www-data export APACHE_RUN_GROUP=www-data Vemos que el grupo, en este caso, es www-data. Se crea el directorio para las im\u00e1genes: $ mkdir /wp-contents/uploads Se cambia el grupo propietario de la carpeta a www-data (-R de recursive, tambi\u00e9n a todos los archivos que contenga) : $ chgrp -R www-data /wp-contents/uploads $ chmod g+w /wp-contents/uploads o si lo prefieres: $ chmod 775 /wp-contents/uploads Cambiar el \u00faltimo d\u00edgito de los permisos a 7 es peligroso porque cualquier usuario podr\u00eda editar los ficheros.","title":"No se pueden subir imagenes a WordPress"},{"location":"kb/GNU-Linux/Software/mkDocs/","text":"MkDocs \u00b6 Sobre MkDocs \u00b6 MkDocs es un generador de sitios est\u00e1tico r\u00e1pido, simple y francamente magn\u00edfico que est\u00e1 orientado a la creaci\u00f3n de documentaci\u00f3n de proyectos. Los archivos fuente de documentaci\u00f3n est\u00e1n escritos en Markdown y configurados con un \u00fanico archivo de configuraci\u00f3n YAML. Este sitio web est\u00e1 construido con MkDocs Enlaces \u00b6 MkDocs Sitio Oficial Material for MkDocs Dark Theme for Material","title":"MkDocs"},{"location":"kb/GNU-Linux/Software/mkDocs/#mkdocs","text":"","title":"MkDocs"},{"location":"kb/GNU-Linux/Software/mkDocs/#sobre-mkdocs","text":"MkDocs es un generador de sitios est\u00e1tico r\u00e1pido, simple y francamente magn\u00edfico que est\u00e1 orientado a la creaci\u00f3n de documentaci\u00f3n de proyectos. Los archivos fuente de documentaci\u00f3n est\u00e1n escritos en Markdown y configurados con un \u00fanico archivo de configuraci\u00f3n YAML. Este sitio web est\u00e1 construido con MkDocs","title":"Sobre MkDocs"},{"location":"kb/GNU-Linux/Software/mkDocs/#enlaces","text":"MkDocs Sitio Oficial Material for MkDocs Dark Theme for Material","title":"Enlaces"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/","text":"Changelog \u00b6 Material for MkDocs Insiders \u00b6 1.12.1 _ December 8, 2020 \u00b6 Fixed empty language selector being shown 1.12.0 _ December 6, 2020 \u00b6 Added support for adding a language selector 1.11.2 _ November 29, 2020 \u00b6 Fixed #2068 : Search highlight interprets code blocks as JavaScript 1.11.1 _ November 29, 2020 \u00b6 Refactored styling to be more stable and easier to adjust Fixed some styling regressions from latest features 1.11.0 _ November 22, 2020 \u00b6 Added support for rendering admonitions as inline blocks 1.10.0 _ November 15, 2020 \u00b6 Added support for integrating table of contents into navigation 1.9.0 _ November 7, 2020 \u00b6 Added support for hiding navigation and table of contents on any page Removed autohiding table of contents when empty 1.8.0 _ November 1, 2020 \u00b6 Added support for navigation sections Fixed appearance of inactive search suggestions 1.7.0 _ October 25, 2020 \u00b6 Added support for deploying multiple versions Fixed alignment of sidebar when content area is too small 1.6.0 _ October 11, 2020 \u00b6 Added support for search suggestions to save keystrokes Added support for removing Made with Material for MkDocs from footer Fixed #1915 : search should go to first result by pressing Enter 1.5.1 _ September 21, 2020 \u00b6 Fixed content area stretching to whole width for long code blocks 1.5.0 _ September 19, 2020 \u00b6 Added support for autohiding table of contents when empty 1.4.1 _ September 6, 2020 \u00b6 Improved typeahead and search result relevance and scoring 1.4.0 _ August 30, 2020 \u00b6 Added support for autohiding header on scroll 1.3.0 _ August 26, 2020 \u00b6 Added support for user-selectable color palettes 1.2.0 _ August 11, 2020 \u00b6 Added feature to expand navigation by default 1.1.0 _ August 3, 2020 \u00b6 Added highlighting of search results 1.0.0 _ July 14, 2020 \u00b6 Added grouping of search results Added missing query terms to search result Improved search result relevance and scoring Material for MkDocs \u00b6 6.1.7 _ December 6, 2020 \u00b6 Fixed #2081 : Fixed stats for private GitHub repositories Fixed alignment for admonition icon alignment for right-to-left languages 6.1.6 _ November 22, 2020 \u00b6 Fixed #2048 : Math formulas show scrollbars (Windows) 6.1.5 _ November 15, 2020 \u00b6 Fixed search reset button not showing/hiding correctly 6.1.4 _ November 7, 2020 \u00b6 Fixed sidebar jitter when scrolling footer into view 6.1.3 _ November 5, 2020 \u00b6 Added support for keywords meta tag Fixed #2027 : Line numbers don't scale with smaller font size Fixed link colors for black and white on slate color scheme Removed focus outline on scrolling code blocks for pointer devices 6.1.2 _ October 31, 2020 \u00b6 Fixed sizing of icons in admonitions, task lists, etc. (6.1.1 regression) 6.1.1 _ October 31, 2020 \u00b6 Fixed #2019 : Page title not correctly updated when using instant loading 6.1.0 _ October 17, 2020 \u00b6 Fixed #1973 : Added support for printing in dark mode Fixed #1974 : Added support for printing content tabs Fixed #1995 : Improved customizability of details extension 6.0.2 _ October 4, 2020 \u00b6 Added Georgian translations Added escaping for link title attributes where necessary Fixed #1956 : Pages with whitespace in names have invalid links in search Removed unnecessary (duplicated) link title attributes 6.0.1 _ September 26, 2020 \u00b6 Fixed stemmer support for file:// protocol through iframe-worker Fixed details marker showing for search result in Firefox Fixed tabbing behavior when search query is not empty Switched TypeScript compilation target to ES2015 Reduced size of JavaScript by 30% ( 176kb \u2192 124kb ) Removed mkdocs and readthedocs themes from Docker image 6.0.0 _ September 25, 2020 \u00b6 Improved search result look and feel Improved search result stability while typing Improved search result grouping (pages + headings) Improved search result relevance and scoring Added display of missing query terms to search results Reduced size of vendor bundle by 25% ( 84kb \u2192 67kb ) Reduced size of the Docker image to improve CI build performance Removed hero partial in favor of custom implementation Removed deprecated front matter features 5.5.14 _ September 23, 2020 \u00b6 Improved spacing around image captions Fixed #1939 : Long tables cause header overlap in print view 5.5.13 _ September 19, 2020 \u00b6 Improved abbreviations on touch devices 5.5.12 _ August 31, 2020 \u00b6 Fixed #1638 : occasional 404 for images when using instant loading 5.5.11 _ August 28, 2020 \u00b6 Fixed Disqus integration, as the minifier killed the config 5.5.10 _ August 28, 2020 \u00b6 Improved rendering by moving Disqus integration after page load Fixed #1887 : Moved navigation icons to CSS to reduce size of HTML 5.5.9 _ August 26, 2020 \u00b6 Added Esperanto translations Fixed #1884 : External links not included in navigation tabs 5.5.8 _ August 23, 2020 \u00b6 Removed focus outline on details and content tabs for pointer devices Improved accessibility of content tabs (now navigable via arrow keys) Fixed #1877 : 404 on search index when search is disabled Fixed some memleaks in observable subscriptions Fixed color definitions for theme-color meta tag 5.5.7 _ August 16, 2020 \u00b6 Improved contrast ratio to 4.5:1 for syntax highlighting Improved contrast ratio to 4.5:1 for table of contents 5.5.6 _ August 12, 2020 \u00b6 Switched base template for 404.html to main.html Fixed #1864 : GitHub organisation stats not loading 5.5.5 _ August 11, 2020 \u00b6 Fixed missing vendor and worker distribution files 5.5.4 _ August 11, 2020 \u00b6 Added support for sortable data tables 5.5.3 _ August 4, 2020 \u00b6 Fixed search for languages other than English (5.5.1 regression) 5.5.2 _ August 3, 2020 \u00b6 Improved highlight colors and spacing for ins , del and mark Changed some keyboard symbols for better equivalents Removed focus outline for details and code blocks on touch devices Fixed margins for admonitions (5.5.1 regression) Fixed too small content tab labels (5.5.1 regression) Fixed icon repeating for custom admonition icons 5.5.1 _ August 1, 2020 \u00b6 Improved typesetting by basing font-size and spacings on em Improved print view by slightly scaling down font-size Changed custom site title (metadata) to be suffixed with site name Fixed top- and bottom spacing of paragraphs inside table cells 5.5.0 _ July 24, 2020 \u00b6 Rewrite of entire documentation Rewrite of syntax highlighting to be customizable with CSS variables Improved syntax highlighting to work with light and dark theme Improved slate color scheme to be more customizable and easier on the eyes Added licenses of icon sets to distribution files Fixed stale document titles in Google Analytics when using instant loading Fixed width of previous and next footer links for tablet and above Fixed issues with top scroll margin for footnotes Fixed top margin for tabbed content when using a JavaScript highlighter Deprecated metadata-based redirects, source links and heroes 5.4.0 _ June 29, 2020 \u00b6 Added support to wrap searches in quotes to switch from OR to AND Fixed highlighting of numbers in search results 5.3.3 _ June 24, 2020 \u00b6 Added Bengali translations Fixed #1773 : Search for numbers does not return any result (regression) 5.3.2 _ June 21, 2020 \u00b6 Improved search typeahead experience with non-Latin characters Fixed #1753 : Japanese search doesn't work anymore 5.3.1 _ June 20, 2020 \u00b6 Fixed #1761 : Duplication of search worker when subscribing to observable 5.3.0 _ June 15, 2020 \u00b6 Added support for color schemes based on user preference Fixed #1755 : Tokenizer separator setting ignored 5.2.3 _ June 6, 2020 \u00b6 Improved search typeahead behavior for some languages ( de , fr , ...) Improved styles for scrollbars on Firefox Fixed #1741 : Removed preconnect hint for Google Analytics 5.2.2 _ May 26, 2020 \u00b6 Fixed #1728 : Legacy Edge doesn't support deg values in hsla colors 5.2.1 _ May 22, 2020 \u00b6 Fixed color of links in table headers, e.g. footnotes Fixed color scheme not being applied without primary or accent color Fixed hover delay for links inside code blocks 5.2.0 _ May 18, 2020 \u00b6 Added color schemes implementation + dark mode Fixed #1583 : Missing option for separate link colors 5.1.7 _ May 16, 2020 \u00b6 Added keyboard focus support for overflowing code blocks Fixed #1696 : Infinite loop in some cases when using instant loading 5.1.6 _ May 9, 2020 \u00b6 Added Burmese translations Added general anchor offset solution using scroll-margin-top Fixed #1653 : Instant loading shouldn't intercept links to *.html files 5.1.5 _ May 3, 2020 \u00b6 Added name attribute for social links to set link title Fixed #1623 : Allow arbitrary links in social links Fixed #1664 : Height of iframe is not adjustable Fixed #1667 : Sidebars are scrolled to bottom on load (bug in Chrome 81+) 5.1.4 _ April 30, 2020 \u00b6 Switched to @mdi/svg Material Design icon package Fixed #1655 : Navigation may disappear after switching viewports Fixed #1659 : Unnecessary scrollbar for search results on Windows Fixed occasional distortions for images with explicit dimensions Fixed errors in German translations 5.1.3 _ April 26, 2020 \u00b6 Fixed overflowing content area after switch to flexbox 5.1.2 _ April 26, 2020 \u00b6 Added status information to search observable Added status information to search modal Removed announcement bar from print media Removed media query packing logic due to race conditions Fixed #1520 : Gracefully disable search on file:// if Worker fails Fixed re-submission of query after search is initialized Fixed jitter of sidebars on all browsers by switching to sticky 5.1.1 _ April 17, 2020 \u00b6 Added new FontAwesome icons Fixed #1609 : Instant loading doesn't honor target=_blank Fixed GitHub stars count rounding errors Fixed GitLab stars count retrieval 5.1.0 _ April 12, 2020 \u00b6 Added support for icons from Markdown through mkdocs-material-extensions 5.0.2 _ April 10, 2020 \u00b6 Added CSS source maps to distribution files Fixed errors in Chinese (Traditional) translations Fixed creation of stale directory on installation from git Improved overflow scrolling behavior on iOS (reduced bundle size by 4kb ) 5.0.1 _ April 7, 2020 \u00b6 Fixed syntax error in Spanish translation 5.0.0 _ April 7, 2020 \u00b6 Reactive architecture \u2013 try app.dialog$.next(\"Hi!\") in the console Instant loading \u2013 make Material behave like a Single Page Application Improved CSS customization with CSS variables \u2013 set your brand's colors Improved CSS resilience, e.g. proper sidebar locking for customized headers Improved icon integration and configuration \u2013 now including over 5k icons Added possibility to use any icon for logo, repository and social links Search UI does not freeze anymore (moved to web worker) Search index built only once when using instant loading Improved extensible keyboard handling Support for prebuilt search indexes Support for displaying stars and forks for GitLab repositories Support for scroll snapping of sidebars and search results Reduced HTML and CSS footprint due to deprecation of Internet Explorer support Slight facelifting of some UI elements (admonitions, tables, ...) 4.6.3 _ February 14, 2020 \u00b6 Removed optional third-party plugins from requirements.txt Updated Docker image to contain all supported third-party plugins 4.6.2 _ February 8, 2020 \u00b6 Added Romanian translations Fixed #1451 : Inconsistent spacing for fenced code blocks 4.6.1 _ February 8, 2020 \u00b6 Fixed #1324 : Metadata author only rendering first character Fixed #1393 : Set tabindex to 0 for skip to content link Fixed code blocks after Markdown 3.2 release Fixed errors in Japanese translations Improved Google Lighthouse score 4.6.0 _ December 11, 2019 \u00b6 Added support for mkdocs-git-revision-date-localized-plugin Fixed invalid character in Google Fonts URL 4.5.1 _ December 2, 2019 \u00b6 Added Thai translations Fixed missing assets in GitHub release .zip and .tar.gz 4.5.0 _ November 16, 2019 \u00b6 Fixed #1330 : Upgraded EmojiOne to Tweomji due to licensing issues Fixed #1339 : Temporarily pinned PyMdown and Markdown due to Fixed errors in Greek translations Improved GitHub statistics retrieval 4.4.3 _ October 3, 2019 \u00b6 Added Estonian translations Fixed removal of copyright banners in minified JavaScript Removed unnecessary title attributes from links in table of contents 4.4.2 _ August 27, 2019 \u00b6 Added Afrikaans translations Fixed broken page title when h1 contained HTML tags Improved accessibility for IE users Removed unnecessary title attributes from links in navigation 4.4.1 _ August 22, 2019 \u00b6 Added support for black as a primary color Fixed broken footer bar when h1 contained HTML tags 4.4.0 _ June 15, 2019 \u00b6 Added Slovenian translations Reverted template minification in favor of mkdocs-minify-plugin Fixed #1114 : Tabs don't reappear when default font-size is smaller than 16 4.3.1 _ May 23, 2019 \u00b6 Fixed spelling error in Danish translations 4.3.0 _ May 17, 2019 \u00b6 Added support for changing header through metadata title property Added font-display: swap to Google Font loading logic Removed whitespace from templates, saving 4kb ( .7kb gzipped) per request Fixed alignment of repository icons on tablet and desktop 4.2.0 _ April 28, 2019 \u00b6 Added Norwegian (Nynorsk) translations Fixed loss of focus in non-form input elements due to search hotkeys Fixed #1067 : Search hotkeys not working for mobile/tablet screensize Fixed #1068 : Search not correctly aligned for tablet screensize 4.1.2 _ April 16, 2019 \u00b6 Fixed #1072 : HTML tags appearing in navigation link titles 4.1.1 _ March 28, 2019 \u00b6 Fixed minor CSS errors detected during validation 4.1.0 _ March 22, 2019 \u00b6 Fixed #1023 : Search for Asian languages broken after Lunr.js update Fixed #1026 : contenteditable elements loose focus on hotkeys 4.0.2 _ March 1, 2019 \u00b6 Fixed #1012 : HTML character entities appear in search result titles 4.0.1 _ February 13, 2019 \u00b6 Fixed #762 , #816 : Glitch in sidebar when collapsing items Fixed #869 : Automatically expand details before printing 4.0.0 _ February 13, 2019 \u00b6 Added background on hover for table rows Removed Google Tag Manager and reverted to Google Analytics Removed blocks in partials - Jinja doesn't support them Fixed #911 : Chrome breaks layout if system language is Chinese ( BREAKING ) Fixed #976 : Removed FastClick 3.3.0 _ January 29, 2019 \u00b6 Moved Google Analytics integration into head using Google Tag Manager Fixed #972 : Unicode slugifier breaks table of contents blur on scroll Fixed #974 : Additional links in table of contents break blur on scroll 3.2.0 _ December 28, 2018 \u00b6 Added support for redirects using metadata refresh Fixed #921 : Load Google Analytics snippet asynchronously 3.1.0 _ November 17, 2018 \u00b6 Added support for Progressive Web App Manifest Fixed #915 : Search bug in Safari (upgraded Lunr.js) 3.0.6 _ October 26, 2018 \u00b6 Added Taiwanese translations Fixed #906 : JavaScript code blocks evaluated in search results 3.0.5 _ October 23, 2018 \u00b6 Added Croatian and Indonesian translations Fixed #899 : Skip-to-content link invalid from 2 nd level on Fixed #902 : Missing URL filter in footer for FontAwesome link 3.0.4 _ September 3, 2018 \u00b6 Updated Dutch translations Fixed #856 : Removed preconnect meta tag if Google Fonts are disabled 3.0.3 _ August 7, 2018 \u00b6 Fixed #841 : Additional path levels for extra CSS and JS 3.0.2 _ August 6, 2018 \u00b6 Fixed #839 : Lunr.js stemmer imports incorrect 3.0.1 _ August 5, 2018 \u00b6 Fixed #838 : Search result links incorrect 3.0.0 _ August 5, 2018 \u00b6 Upgraded MkDocs to 1.0 ( BREAKING ) Upgraded Python in official Docker image to 3.6 Added Serbian and Serbo-Croatian translations 2.9.4 _ July 29, 2018 \u00b6 Fixed build error after MkDocs upgrade 2.9.3 _ July 29, 2018 \u00b6 Added link to home for logo in drawer Fixed dependency problems between MkDocs and Tornado 2.9.2 _ June 29, 2018 \u00b6 Added Hindi and Czech translations 2.9.1 _ June 18, 2018 \u00b6 Added support for different spellings for theme color Fixed #799 : Added support for webfont minification in production Fixed #800 : Added .highlighttable as an alias for .codehilitetable 2.9.0 _ June 13, 2018 \u00b6 Added support for theme color on Android Fixed #796 : Rendering of nested tabbed code blocks 2.8.0 _ June 10, 2018 \u00b6 Added support for grouping code blocks with tabs Added Material and FontAwesome icon fonts to distribution files (GDPR) Added note on compliance with GDPR Added Slovak translations Fixed #790 : Prefixed id attributes with __ to avoid name clashes 2.7.3 _ April 26, 2018 \u00b6 Added Finnish translations 2.7.2 _ April 9, 2018 \u00b6 Fixed rendering issue for details on Edge 2.7.1 _ March 21, 2018 \u00b6 Added Galician translations Fixed #730 : Scroll chasing error on home page if Disqus is enabled Fixed #736 : Reset drawer and search upon back button invocation 2.7.0 _ March 6, 2018 \u00b6 Added ability to set absolute URL for logo Added Hebrew translations 2.6.6 _ February 22, 2018 \u00b6 Added preconnect for Google Fonts for faster loading Fixed #710 : With tabs sidebar disappears if JavaScript is not available 2.6.5 _ February 22, 2018 \u00b6 Reverted --dev-addr flag removal from Dockerfile 2.6.4 _ February 21, 2018 \u00b6 Added Catalan translations Fixed incorrect margins for buttons in Firefox and Safari Replaced package manager yarn with npm 5.6 Reverted GitHub stars rounding method Removed --dev-addr flag from Dockerfile for Windows compatibility 2.6.3 _ February 18, 2018 \u00b6 Added Vietnamese translations 2.6.2 _ February 12, 2018 \u00b6 Added Arabic translations Fixed incorrect rounding of amount of GitHub stars Fixed double-layered borders for tables 2.6.1 _ February 11, 2018 \u00b6 Added ability to override Disqus integration using metadata Fixed #690 : Duplicate slashes in source file URLs Fixed #696 : Active page highlight not working with default palette Adjusted German translations 2.6.0 _ February 2, 2018 \u00b6 Moved default search configuration to default translation (English) Added support to automatically set text direction from translation Added support to disable search stop word filter in translation Added support to disable search trimmer in translation Added Persian translations Fixed support for Polish search Fixed disappearing GitHub, GitLab and Bitbucket repository icons 2.5.5 _ January 31, 2018 \u00b6 Added Hungarian translations 2.5.4 _ January 29, 2018 \u00b6 Fixed #683 : gh-deploy fails inside Docker 2.5.3 _ January 25, 2018 \u00b6 Added Ukrainian translations 2.5.2 _ January 22, 2018 \u00b6 Added default search language mappings for all localizations Fixed #673 : Error loading non-existent search language Fixed #675 : Uncaught reference error when search plugin disabled 2.5.1 _ January 20, 2018 \u00b6 Fixed permalink for main headline Improved missing translation handling with English as a fallback Improved accessibility with skip-to-content link 2.5.0 _ January 13, 2018 \u00b6 Added support for right-to-left languages 2.4.0 _ January 11, 2018 \u00b6 Added focus state for clipboard buttons Fixed #400 : Search bar steals tab focus Fixed search not closing on Enter when result is selected Fixed search not closing when losing focus due to Tab Fixed collapsed navigation links getting focus Fixed outline being cut off on Tab focus of navigation links Fixed bug with first search result navigation being ignored Removed search result navigation via Tab (use Up and Down ) Removed outline resets for links Improved general tabbing behavior on desktop 2.3.0 _ January 9, 2018 \u00b6 Added example (synonym: snippet ) style for admonitions Added synonym abstract for summary style for admonitions 2.2.6 _ December 27, 2017 \u00b6 Added Turkish translations Fixed unclickable area below header in case JavaScript is not available 2.2.5 _ December 18, 2017 \u00b6 Fixed #639 : Broken default favicon 2.2.4 _ December 18, 2017 \u00b6 Fixed #638 : Build breaks with Jinja < 2.9 2.2.3 _ December 13, 2017 \u00b6 Fixed #630 : Admonition sets padding on any last child Adjusted Chinese (Traditional) translations 2.2.2 _ December 8, 2017 \u00b6 Added Dutch translations Adjusted targeted link and footnote offsets Simplified admonition styles and fixed padding bug 2.2.1 _ December 2, 2017 \u00b6 Fixed #616 : Minor styling error with title-only admonitions Removed border for table of contents and improved spacing 2.2.0 _ November 22, 2017 \u00b6 Added support for hero teaser Added Portuguese translations Fixed #586 : Footnote backref target offset regression Fixed #605 : Search stemmers not correctly loaded 2.1.1 _ November 21, 2017 \u00b6 Replaced deprecated babel-preset-es2015 with babel-preset-env Refactored Gulp build pipeline with Webpack Removed right border on sidebars Fixed broken color transition on header 2.1.0 _ November 19, 2017 \u00b6 Added support for white as a primary color Added support for sliding site name and title Fixed redundant clipboard button when using line numbers on code blocks Improved header appearance by making it taller Improved tabs appearance Improved CSS customizability by leveraging inheritance Removed scroll shadows via background-attachment 2.0.4 _ November 5, 2017 \u00b6 Fixed details not opening with footnote reference 2.0.3 _ November 5, 2017 \u00b6 Added Japanese translations Fixed #540 : Jumping to anchor inside details doesn't open it Fixed active link colors in footer 2.0.2 _ November 1, 2017 \u00b6 Added Russian translations Fixed #542 : Horizontal scrollbar between 1220px and 1234px Fixed #553 : Metadata values only rendering first character Fixed #558 : Flash of unstyled content Fixed favicon regression caused by deprecation upstream 2.0.1 _ October 31, 2017 \u00b6 Fixed error when initializing search Fixed styles for link to edit the current page Fixed styles on nested admonition in details 2.0.0 _ October 31, 2017 \u00b6 Upgraded MkDocs to 0.17.1 ( BREAKING ) Added support for easier configuration of search tokenizer Added support to disable search Added Korean translations 1.12.2 _ October 26, 2017 \u00b6 Added Italian, Norwegian, French and Chinese translations 1.12.1 _ October 22, 2017 \u00b6 Added Polish, Swedish and Spanish translations Improved downward compatibility with custom partials Temporarily pinned MkDocs version within Docker image to 0.16.3 Fixed #519 : Missing theme configuration file 1.12.0 _ October 20, 2017 \u00b6 Added support for setting language(s) via mkdocs.yml Added support for default localization Added German and Danish translations Fixed #374 : Search bar misalignment on big screens 1.11.0 _ October 19, 2017 \u00b6 Added localization to clipboard Refactored localization logic 1.10.4 _ October 18, 2017 \u00b6 Improved print styles of code blocks Improved search UX (don't close on enter if no selection) Fixed #495 : Vertical scrollbar on short pages 1.10.3 _ October 11, 2017 \u00b6 Fixed #484 : Vertical scrollbar on some MathJax formulas Fixed #483 : Footnote backref target offset regression 1.10.2 _ October 6, 2017 \u00b6 Fixed #468 : Sidebar shows scrollbar if content is shorter (in Safari) 1.10.1 _ September 14, 2017 \u00b6 Fixed #455 : Bold code blocks rendered with normal font weight 1.10.0 _ September 1, 2017 \u00b6 Added support to make logo default icon configurable Fixed uninitialized overflow scrolling on main pane for iOS Fixed error in mobile navigation in case JavaScript is not available Fixed incorrect color transition for nested panes in mobile navigation Improved checkbox styles for Tasklist from PyMdown Extension package 1.9.0 _ August 29, 2017 \u00b6 Added info (synonym: todo ) style for admonitions Added question (synonym: help , faq ) style for admonitions Added support for Details from PyMdown Extensions package Improved admonition styles to match details Improved styles for social links in footer Replaced ligatures with Unicode code points to avoid broken layout Upgraded PyMdown Extensions package dependency to >= 3.4 1.8.1 _ August 7, 2017 \u00b6 Fixed #421 : Missing pagination for GitHub API 1.8.0 _ August 2, 2017 \u00b6 Added support for lazy-loading of search results for better performance Added support for customization of search tokenizer/separator Fixed #424 : Search doesn't handle capital letters anymore Fixed #419 : Search doesn't work on whole words 1.7.5 _ July 25, 2017 \u00b6 Fixed #398 : Forms broken due to search shortcuts Improved search overall user experience Improved search matching and highlighting Improved search accessibility 1.7.4 _ June 21, 2017 \u00b6 Fixed functional link colors in table of contents for active palette Fixed #368 : Compatibility issues with IE11 1.7.3 _ June 7, 2017 \u00b6 Fixed error when setting language to Japanese for site search 1.7.2 _ June 6, 2017 \u00b6 Fixed offset of search box when repo_url is not set Fixed non-disappearing tooltip 1.7.1 _ June 1, 2017 \u00b6 Fixed wrong z-index order of header, overlay and drawer Fixed wrong offset of targeted footnote back references 1.7.0 _ June 1, 2017 \u00b6 Added \"copy to clipboard\" buttons to code blocks Added support for multilingual site search Fixed search term highlighting for non-latin languages 1.6.4 _ May 24, 2017 \u00b6 Fixed #337 : JavaScript error for GitHub organization URLs 1.6.3 _ May 16, 2017 \u00b6 Fixed #329 : Broken source stats for private or unknown GitHub repos 1.6.2 _ May 15, 2017 \u00b6 Fixed #316 : Fatal error for git clone on Windows Fixed #320 : Chrome 58 creates double underline for abbr tags Fixed #323 : Ligatures rendered inside code blocks Fixed miscalculated sidebar height due to missing margin collapse Changed deprecated MathJax CDN to Cloudflare 1.6.1 _ April 23, 2017 \u00b6 Fixed following of active/focused element if search input is focused Fixed layer order of search component elements 1.6.0 _ April 22, 2017 \u00b6 Added build test for Docker image on Travis Added search overlay for better user experience (focus) Added language from localizations to html tag Fixed #270 : source links broken for absolute URLs Fixed missing top spacing for first targeted element in content Fixed too small footnote divider when using larger font sizes 1.5.5 _ April 20, 2017 \u00b6 Fixed #282 : Browser search ( Meta + F ) is hijacked 1.5.4 _ April 8, 2017 \u00b6 Fixed broken highlighting for two or more search terms Fixed missing search results when only a h1 is present Fixed unresponsive overlay on Android 1.5.3 _ April 7, 2017 \u00b6 Fixed deprecated calls for template variables Fixed wrong palette color for focused search result Fixed JavaScript errors on 404 page Fixed missing top spacing on 404 page Fixed missing right spacing on overflow of source container 1.5.2 _ April 5, 2017 \u00b6 Added requirements as explicit dependencies in setup.py Fixed non-synchronized transitions in search form 1.5.1 _ March 30, 2017 \u00b6 Fixed rendering and offset of targeted footnotes Fixed #238 : Link on logo is not set to site_url 1.5.0 _ March 24, 2017 \u00b6 Added support for localization of search placeholder Added keyboard events for quick access of search Added keyboard events for search control Added opacity on hover for search buttons Added git hook to skip CI build on non-src changes Fixed non-resetting search placeholder when input is cleared Fixed error for unescaped parentheses in search term Fixed #229 : Button to clear search missing Fixed #231 : Escape key doesn't exit search Removed old-style figures from font feature settings 1.4.1 _ March 16, 2017 \u00b6 Fixed invalid destructuring attempt on NodeList (in Safari, Edge, IE) 1.4.0 _ March 16, 2017 \u00b6 Added support for grouping searched sections by documents Added support for highlighting of search terms Added support for localization of search results Fixed #216 : table of contents icon doesn't show if h1 is not present Reworked style and layout of search results for better usability 1.3.0 _ March 11, 2017 \u00b6 Added support for page-specific title and description using metadata Added support for linking source files to documentation Fixed jitter and offset of sidebar when zooming browser Fixed incorrectly initialized tablet sidebar height Fixed regression for #1 : GitHub stars break if repo_url ends with a / Fixed undesired white line below copyright footer due to base font scaling Fixed issue with whitespace in path for scripts Fixed #205 : support non-fixed (static) header Refactored footnote references for better visibility Reduced repaints to a minimum for non-tabs configuration Reduced contrast of edit button (slightly) 1.2.0 _ March 3, 2017 \u00b6 Added quote (synonym: cite ) style for admonitions Added help message to build pipeline Fixed wrong navigation link colors when applying palette Fixed #197 : Link missing in tabs navigation on deeply nested items Removed unnecessary dev dependencies 1.1.1 _ February 26, 2017 \u00b6 Fixed incorrectly displayed nested lists when using tabs 1.1.0 _ February 26, 2017 \u00b6 Added tabs navigation feature (optional) Added Disqus integration (optional) Added a high resolution Favicon with the new logo Added static type checking using Facebook's Flow Fixed #173 : Dictionary elements have no bottom spacing Fixed #175 : Tables cannot be set to 100% width Fixed race conditions in build related to asset revisioning Fixed accidentally re-introduced Permalink on top-level headline Fixed alignment of logo in drawer on IE11 Refactored styles related to tables Refactored and automated Docker build and PyPI release Refactored build scripts 1.0.5 _ February 18, 2017 \u00b6 Fixed #153 : Sidebar flows out of constrained area in Chrome 56 Fixed #159 : Footer jitter due to JavaScript if content is short 1.0.4 _ February 16, 2017 \u00b6 Fixed #142 : Documentation build errors if h1 is defined as raw HTML Fixed #164 : PyPI release does not build and install Fixed offsets of targeted headlines Increased sidebar font size by 0.12rem 1.0.3 _ January 22, 2017 \u00b6 Fixed #117 : Table of contents items don't blur on fast scrolling Refactored sidebar positioning logic Further reduction of repaints 1.0.2 _ January 15, 2017 \u00b6 Fixed #108 : Horizontal scrollbar in content area 1.0.1 _ January 14, 2017 \u00b6 Fixed massive repaints happening when scrolling Fixed footer back reference positions in case of overflow Fixed header logo from showing when the menu icon is rendered Changed scrollbar behavior to only show when content overflows 1.0.0 _ January 13, 2017 \u00b6 Introduced Webpack for more sophisticated JavaScript bundling Introduced ESLint and Stylelint for code style checks Introduced more accurate Material Design colors and shadows Introduced modular scales for harmonic font sizing Introduced git-hooks for better development workflow Rewrite of CSS using the BEM methodology and SassDoc guidelines Rewrite of JavaScript using ES6 and Babel as a transpiler Rewrite of Admonition, Permalinks and CodeHilite integration Rewrite of the complete typographical system Rewrite of Gulp asset pipeline in ES6 and separation of tasks Removed Bower as a dependency in favor of NPM Removed custom icon build in favor of the Material Design icon set Removed _blank targets on links due to vulnerability: http://bit.ly/1Mk2Rtw Removed unversioned assets from build directory Restructured templates into base templates and partials Added build and watch scripts in package.json Added support for Metadata and Footnotes Markdown extensions Added support for PyMdown Extensions package Added support for collapsible sections in navigation Added support for separate table of contents Added support for better accessibility through REM-based layout Added icons for GitHub, GitLab and BitBucket integrations Added more detailed documentation on specimen, extensions etc. Added a 404.html error page for deployment on GitHub Pages Fixed live reload chain in watch mode when saving a template Fixed variable references to work with MkDocs 0.16 0.2.4 _ June 26, 2016 \u00b6 Fixed improperly set default favicon Fixed #33 : Protocol relative URL for webfonts doesn't work with file:// Fixed #34 : IE11 on Windows 7 doesn't honor max-width on main tag Fixed #35 : Add styling for blockquotes 0.2.3 _ May 16, 2016 \u00b6 Fixed #25 : Highlight inline fenced blocks Fixed #26 : Better highlighting for keystrokes Fixed #30 : Suboptimal syntax highlighting for PHP 0.2.2 _ March 20, 2016 \u00b6 Fixed #15 : Document Pygments dependency for CodeHilite Fixed #16 : Favicon could not be set through mkdocs.yml Fixed #17 : Put version into own container for styling Fixed #20 : Fix rounded borders for tables 0.2.1 _ March 12, 2016 \u00b6 Fixed #10 : Invisible header after closing search bar with ESC key Fixed #13 : Table cells don't wrap Fixed empty list in table of contents when no headline is defined Corrected wrong path for static asset monitoring in Gulpfile.js Set up tracking of site search for Google Analytics 0.2.0 _ February 24, 2016 \u00b6 Fixed #6 : Include multiple color palettes via mkdocs.yml Fixed #7 : Better colors for links inside admonition notes and warnings Fixed #9 : Text for prev/next footer navigation should be customizable Refactored templates (replaced if / else with modifiers where possible) 0.1.3 _ February 21, 2016 \u00b6 Fixed #3 : Ordered lists within an unordered list have ::before content Fixed #4 : Click on Logo/Title without Github-Repository: \"None\" Fixed #5 : Page without headlines renders empty list in table of contents Moved Modernizr to top to ensure basic usability in IE8 0.1.2 _ February 16, 2016 \u00b6 Fixed styles for deep navigational hierarchies Fixed webfont delivery problem when hosted in subdirectories Fixed print styles in mobile/tablet configuration Added option to configure fonts in mkdocs.yml with fallbacks Changed styles for admonition notes and warnings Set download link to latest version if available Set up tracking of outgoing links and actions for Google Analytics 0.1.1 _ February 11, 2016 \u00b6 Fixed #1 : GitHub stars don't work if the repo_url ends with a / Updated NPM and Bower dependencies to most recent versions Changed footer/copyright link to Material theme to GitHub pages Made MkDocs building/serving in build process optional Set up continuous integration with Travis 0.1.0 _ February 9, 2016 \u00b6 Initial release","title":"Changelog"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#changelog","text":"","title":"Changelog"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#material-for-mkdocs-insiders","text":"","title":"Material for MkDocs Insiders"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#1121-_-december-8-2020","text":"Fixed empty language selector being shown","title":"1.12.1 _ December 8, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#1120-_-december-6-2020","text":"Added support for adding a language selector","title":"1.12.0 _ December 6, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#1112-_-november-29-2020","text":"Fixed #2068 : Search highlight interprets code blocks as JavaScript","title":"1.11.2 _ November 29, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#1111-_-november-29-2020","text":"Refactored styling to be more stable and easier to adjust Fixed some styling regressions from latest features","title":"1.11.1 _ November 29, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#1110-_-november-22-2020","text":"Added support for rendering admonitions as inline blocks","title":"1.11.0 _ November 22, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#1100-_-november-15-2020","text":"Added support for integrating table of contents into navigation","title":"1.10.0 _ November 15, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#190-_-november-7-2020","text":"Added support for hiding navigation and table of contents on any page Removed autohiding table of contents when empty","title":"1.9.0 _ November 7, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#180-_-november-1-2020","text":"Added support for navigation sections Fixed appearance of inactive search suggestions","title":"1.8.0 _ November 1, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#170-_-october-25-2020","text":"Added support for deploying multiple versions Fixed alignment of sidebar when content area is too small","title":"1.7.0 _ October 25, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#160-_-october-11-2020","text":"Added support for search suggestions to save keystrokes Added support for removing Made with Material for MkDocs from footer Fixed #1915 : search should go to first result by pressing Enter","title":"1.6.0 _ October 11, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#151-_-september-21-2020","text":"Fixed content area stretching to whole width for long code blocks","title":"1.5.1 _ September 21, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#150-_-september-19-2020","text":"Added support for autohiding table of contents when empty","title":"1.5.0 _ September 19, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#141-_-september-6-2020","text":"Improved typeahead and search result relevance and scoring","title":"1.4.1 _ September 6, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#140-_-august-30-2020","text":"Added support for autohiding header on scroll","title":"1.4.0 _ August 30, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#130-_-august-26-2020","text":"Added support for user-selectable color palettes","title":"1.3.0 _ August 26, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#120-_-august-11-2020","text":"Added feature to expand navigation by default","title":"1.2.0 _ August 11, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#110-_-august-3-2020","text":"Added highlighting of search results","title":"1.1.0 _ August 3, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#100-_-july-14-2020","text":"Added grouping of search results Added missing query terms to search result Improved search result relevance and scoring","title":"1.0.0 _ July 14, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#material-for-mkdocs","text":"","title":"Material for MkDocs"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#617-_-december-6-2020","text":"Fixed #2081 : Fixed stats for private GitHub repositories Fixed alignment for admonition icon alignment for right-to-left languages","title":"6.1.7 _ December 6, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#616-_-november-22-2020","text":"Fixed #2048 : Math formulas show scrollbars (Windows)","title":"6.1.6 _ November 22, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#615-_-november-15-2020","text":"Fixed search reset button not showing/hiding correctly","title":"6.1.5 _ November 15, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#614-_-november-7-2020","text":"Fixed sidebar jitter when scrolling footer into view","title":"6.1.4 _ November 7, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#613-_-november-5-2020","text":"Added support for keywords meta tag Fixed #2027 : Line numbers don't scale with smaller font size Fixed link colors for black and white on slate color scheme Removed focus outline on scrolling code blocks for pointer devices","title":"6.1.3 _ November 5, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#612-_-october-31-2020","text":"Fixed sizing of icons in admonitions, task lists, etc. (6.1.1 regression)","title":"6.1.2 _ October 31, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#611-_-october-31-2020","text":"Fixed #2019 : Page title not correctly updated when using instant loading","title":"6.1.1 _ October 31, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#610-_-october-17-2020","text":"Fixed #1973 : Added support for printing in dark mode Fixed #1974 : Added support for printing content tabs Fixed #1995 : Improved customizability of details extension","title":"6.1.0 _ October 17, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#602-_-october-4-2020","text":"Added Georgian translations Added escaping for link title attributes where necessary Fixed #1956 : Pages with whitespace in names have invalid links in search Removed unnecessary (duplicated) link title attributes","title":"6.0.2 _ October 4, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#601-_-september-26-2020","text":"Fixed stemmer support for file:// protocol through iframe-worker Fixed details marker showing for search result in Firefox Fixed tabbing behavior when search query is not empty Switched TypeScript compilation target to ES2015 Reduced size of JavaScript by 30% ( 176kb \u2192 124kb ) Removed mkdocs and readthedocs themes from Docker image","title":"6.0.1 _ September 26, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#600-_-september-25-2020","text":"Improved search result look and feel Improved search result stability while typing Improved search result grouping (pages + headings) Improved search result relevance and scoring Added display of missing query terms to search results Reduced size of vendor bundle by 25% ( 84kb \u2192 67kb ) Reduced size of the Docker image to improve CI build performance Removed hero partial in favor of custom implementation Removed deprecated front matter features","title":"6.0.0 _ September 25, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#5514-_-september-23-2020","text":"Improved spacing around image captions Fixed #1939 : Long tables cause header overlap in print view","title":"5.5.14 _ September 23, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#5513-_-september-19-2020","text":"Improved abbreviations on touch devices","title":"5.5.13 _ September 19, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#5512-_-august-31-2020","text":"Fixed #1638 : occasional 404 for images when using instant loading","title":"5.5.12 _ August 31, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#5511-_-august-28-2020","text":"Fixed Disqus integration, as the minifier killed the config","title":"5.5.11 _ August 28, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#5510-_-august-28-2020","text":"Improved rendering by moving Disqus integration after page load Fixed #1887 : Moved navigation icons to CSS to reduce size of HTML","title":"5.5.10 _ August 28, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#559-_-august-26-2020","text":"Added Esperanto translations Fixed #1884 : External links not included in navigation tabs","title":"5.5.9 _ August 26, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#558-_-august-23-2020","text":"Removed focus outline on details and content tabs for pointer devices Improved accessibility of content tabs (now navigable via arrow keys) Fixed #1877 : 404 on search index when search is disabled Fixed some memleaks in observable subscriptions Fixed color definitions for theme-color meta tag","title":"5.5.8 _ August 23, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#557-_-august-16-2020","text":"Improved contrast ratio to 4.5:1 for syntax highlighting Improved contrast ratio to 4.5:1 for table of contents","title":"5.5.7 _ August 16, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#556-_-august-12-2020","text":"Switched base template for 404.html to main.html Fixed #1864 : GitHub organisation stats not loading","title":"5.5.6 _ August 12, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#555-_-august-11-2020","text":"Fixed missing vendor and worker distribution files","title":"5.5.5 _ August 11, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#554-_-august-11-2020","text":"Added support for sortable data tables","title":"5.5.4 _ August 11, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#553-_-august-4-2020","text":"Fixed search for languages other than English (5.5.1 regression)","title":"5.5.3 _ August 4, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#552-_-august-3-2020","text":"Improved highlight colors and spacing for ins , del and mark Changed some keyboard symbols for better equivalents Removed focus outline for details and code blocks on touch devices Fixed margins for admonitions (5.5.1 regression) Fixed too small content tab labels (5.5.1 regression) Fixed icon repeating for custom admonition icons","title":"5.5.2 _ August 3, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#551-_-august-1-2020","text":"Improved typesetting by basing font-size and spacings on em Improved print view by slightly scaling down font-size Changed custom site title (metadata) to be suffixed with site name Fixed top- and bottom spacing of paragraphs inside table cells","title":"5.5.1 _ August 1, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#550-_-july-24-2020","text":"Rewrite of entire documentation Rewrite of syntax highlighting to be customizable with CSS variables Improved syntax highlighting to work with light and dark theme Improved slate color scheme to be more customizable and easier on the eyes Added licenses of icon sets to distribution files Fixed stale document titles in Google Analytics when using instant loading Fixed width of previous and next footer links for tablet and above Fixed issues with top scroll margin for footnotes Fixed top margin for tabbed content when using a JavaScript highlighter Deprecated metadata-based redirects, source links and heroes","title":"5.5.0 _ July 24, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#540-_-june-29-2020","text":"Added support to wrap searches in quotes to switch from OR to AND Fixed highlighting of numbers in search results","title":"5.4.0 _ June 29, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#533-_-june-24-2020","text":"Added Bengali translations Fixed #1773 : Search for numbers does not return any result (regression)","title":"5.3.3 _ June 24, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#532-_-june-21-2020","text":"Improved search typeahead experience with non-Latin characters Fixed #1753 : Japanese search doesn't work anymore","title":"5.3.2 _ June 21, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#531-_-june-20-2020","text":"Fixed #1761 : Duplication of search worker when subscribing to observable","title":"5.3.1 _ June 20, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#530-_-june-15-2020","text":"Added support for color schemes based on user preference Fixed #1755 : Tokenizer separator setting ignored","title":"5.3.0 _ June 15, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#523-_-june-6-2020","text":"Improved search typeahead behavior for some languages ( de , fr , ...) Improved styles for scrollbars on Firefox Fixed #1741 : Removed preconnect hint for Google Analytics","title":"5.2.3 _ June 6, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#522-_-may-26-2020","text":"Fixed #1728 : Legacy Edge doesn't support deg values in hsla colors","title":"5.2.2 _ May 26, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#521-_-may-22-2020","text":"Fixed color of links in table headers, e.g. footnotes Fixed color scheme not being applied without primary or accent color Fixed hover delay for links inside code blocks","title":"5.2.1 _ May 22, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#520-_-may-18-2020","text":"Added color schemes implementation + dark mode Fixed #1583 : Missing option for separate link colors","title":"5.2.0 _ May 18, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#517-_-may-16-2020","text":"Added keyboard focus support for overflowing code blocks Fixed #1696 : Infinite loop in some cases when using instant loading","title":"5.1.7 _ May 16, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#516-_-may-9-2020","text":"Added Burmese translations Added general anchor offset solution using scroll-margin-top Fixed #1653 : Instant loading shouldn't intercept links to *.html files","title":"5.1.6 _ May 9, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#515-_-may-3-2020","text":"Added name attribute for social links to set link title Fixed #1623 : Allow arbitrary links in social links Fixed #1664 : Height of iframe is not adjustable Fixed #1667 : Sidebars are scrolled to bottom on load (bug in Chrome 81+)","title":"5.1.5 _ May 3, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#514-_-april-30-2020","text":"Switched to @mdi/svg Material Design icon package Fixed #1655 : Navigation may disappear after switching viewports Fixed #1659 : Unnecessary scrollbar for search results on Windows Fixed occasional distortions for images with explicit dimensions Fixed errors in German translations","title":"5.1.4 _ April 30, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#513-_-april-26-2020","text":"Fixed overflowing content area after switch to flexbox","title":"5.1.3 _ April 26, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#512-_-april-26-2020","text":"Added status information to search observable Added status information to search modal Removed announcement bar from print media Removed media query packing logic due to race conditions Fixed #1520 : Gracefully disable search on file:// if Worker fails Fixed re-submission of query after search is initialized Fixed jitter of sidebars on all browsers by switching to sticky","title":"5.1.2 _ April 26, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#511-_-april-17-2020","text":"Added new FontAwesome icons Fixed #1609 : Instant loading doesn't honor target=_blank Fixed GitHub stars count rounding errors Fixed GitLab stars count retrieval","title":"5.1.1 _ April 17, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#510-_-april-12-2020","text":"Added support for icons from Markdown through mkdocs-material-extensions","title":"5.1.0 _ April 12, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#502-_-april-10-2020","text":"Added CSS source maps to distribution files Fixed errors in Chinese (Traditional) translations Fixed creation of stale directory on installation from git Improved overflow scrolling behavior on iOS (reduced bundle size by 4kb )","title":"5.0.2 _ April 10, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#501-_-april-7-2020","text":"Fixed syntax error in Spanish translation","title":"5.0.1 _ April 7, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#500-_-april-7-2020","text":"Reactive architecture \u2013 try app.dialog$.next(\"Hi!\") in the console Instant loading \u2013 make Material behave like a Single Page Application Improved CSS customization with CSS variables \u2013 set your brand's colors Improved CSS resilience, e.g. proper sidebar locking for customized headers Improved icon integration and configuration \u2013 now including over 5k icons Added possibility to use any icon for logo, repository and social links Search UI does not freeze anymore (moved to web worker) Search index built only once when using instant loading Improved extensible keyboard handling Support for prebuilt search indexes Support for displaying stars and forks for GitLab repositories Support for scroll snapping of sidebars and search results Reduced HTML and CSS footprint due to deprecation of Internet Explorer support Slight facelifting of some UI elements (admonitions, tables, ...)","title":"5.0.0 _ April 7, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#463-_-february-14-2020","text":"Removed optional third-party plugins from requirements.txt Updated Docker image to contain all supported third-party plugins","title":"4.6.3 _ February 14, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#462-_-february-8-2020","text":"Added Romanian translations Fixed #1451 : Inconsistent spacing for fenced code blocks","title":"4.6.2 _ February 8, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#461-_-february-8-2020","text":"Fixed #1324 : Metadata author only rendering first character Fixed #1393 : Set tabindex to 0 for skip to content link Fixed code blocks after Markdown 3.2 release Fixed errors in Japanese translations Improved Google Lighthouse score","title":"4.6.1 _ February 8, 2020"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#460-_-december-11-2019","text":"Added support for mkdocs-git-revision-date-localized-plugin Fixed invalid character in Google Fonts URL","title":"4.6.0 _ December 11, 2019"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#451-_-december-2-2019","text":"Added Thai translations Fixed missing assets in GitHub release .zip and .tar.gz","title":"4.5.1 _ December 2, 2019"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#450-_-november-16-2019","text":"Fixed #1330 : Upgraded EmojiOne to Tweomji due to licensing issues Fixed #1339 : Temporarily pinned PyMdown and Markdown due to Fixed errors in Greek translations Improved GitHub statistics retrieval","title":"4.5.0 _ November 16, 2019"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#443-_-october-3-2019","text":"Added Estonian translations Fixed removal of copyright banners in minified JavaScript Removed unnecessary title attributes from links in table of contents","title":"4.4.3 _ October 3, 2019"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#442-_-august-27-2019","text":"Added Afrikaans translations Fixed broken page title when h1 contained HTML tags Improved accessibility for IE users Removed unnecessary title attributes from links in navigation","title":"4.4.2 _ August 27, 2019"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#441-_-august-22-2019","text":"Added support for black as a primary color Fixed broken footer bar when h1 contained HTML tags","title":"4.4.1 _ August 22, 2019"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#440-_-june-15-2019","text":"Added Slovenian translations Reverted template minification in favor of mkdocs-minify-plugin Fixed #1114 : Tabs don't reappear when default font-size is smaller than 16","title":"4.4.0 _ June 15, 2019"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#431-_-may-23-2019","text":"Fixed spelling error in Danish translations","title":"4.3.1 _ May 23, 2019"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#430-_-may-17-2019","text":"Added support for changing header through metadata title property Added font-display: swap to Google Font loading logic Removed whitespace from templates, saving 4kb ( .7kb gzipped) per request Fixed alignment of repository icons on tablet and desktop","title":"4.3.0 _ May 17, 2019"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#420-_-april-28-2019","text":"Added Norwegian (Nynorsk) translations Fixed loss of focus in non-form input elements due to search hotkeys Fixed #1067 : Search hotkeys not working for mobile/tablet screensize Fixed #1068 : Search not correctly aligned for tablet screensize","title":"4.2.0 _ April 28, 2019"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#412-_-april-16-2019","text":"Fixed #1072 : HTML tags appearing in navigation link titles","title":"4.1.2 _ April 16, 2019"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#411-_-march-28-2019","text":"Fixed minor CSS errors detected during validation","title":"4.1.1 _ March 28, 2019"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#410-_-march-22-2019","text":"Fixed #1023 : Search for Asian languages broken after Lunr.js update Fixed #1026 : contenteditable elements loose focus on hotkeys","title":"4.1.0 _ March 22, 2019"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#402-_-march-1-2019","text":"Fixed #1012 : HTML character entities appear in search result titles","title":"4.0.2 _ March 1, 2019"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#401-_-february-13-2019","text":"Fixed #762 , #816 : Glitch in sidebar when collapsing items Fixed #869 : Automatically expand details before printing","title":"4.0.1 _ February 13, 2019"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#400-_-february-13-2019","text":"Added background on hover for table rows Removed Google Tag Manager and reverted to Google Analytics Removed blocks in partials - Jinja doesn't support them Fixed #911 : Chrome breaks layout if system language is Chinese ( BREAKING ) Fixed #976 : Removed FastClick","title":"4.0.0 _ February 13, 2019"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#330-_-january-29-2019","text":"Moved Google Analytics integration into head using Google Tag Manager Fixed #972 : Unicode slugifier breaks table of contents blur on scroll Fixed #974 : Additional links in table of contents break blur on scroll","title":"3.3.0 _ January 29, 2019"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#320-_-december-28-2018","text":"Added support for redirects using metadata refresh Fixed #921 : Load Google Analytics snippet asynchronously","title":"3.2.0 _ December 28, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#310-_-november-17-2018","text":"Added support for Progressive Web App Manifest Fixed #915 : Search bug in Safari (upgraded Lunr.js)","title":"3.1.0 _ November 17, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#306-_-october-26-2018","text":"Added Taiwanese translations Fixed #906 : JavaScript code blocks evaluated in search results","title":"3.0.6 _ October 26, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#305-_-october-23-2018","text":"Added Croatian and Indonesian translations Fixed #899 : Skip-to-content link invalid from 2 nd level on Fixed #902 : Missing URL filter in footer for FontAwesome link","title":"3.0.5 _ October 23, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#304-_-september-3-2018","text":"Updated Dutch translations Fixed #856 : Removed preconnect meta tag if Google Fonts are disabled","title":"3.0.4 _ September 3, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#303-_-august-7-2018","text":"Fixed #841 : Additional path levels for extra CSS and JS","title":"3.0.3 _ August 7, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#302-_-august-6-2018","text":"Fixed #839 : Lunr.js stemmer imports incorrect","title":"3.0.2 _ August 6, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#301-_-august-5-2018","text":"Fixed #838 : Search result links incorrect","title":"3.0.1 _ August 5, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#300-_-august-5-2018","text":"Upgraded MkDocs to 1.0 ( BREAKING ) Upgraded Python in official Docker image to 3.6 Added Serbian and Serbo-Croatian translations","title":"3.0.0 _ August 5, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#294-_-july-29-2018","text":"Fixed build error after MkDocs upgrade","title":"2.9.4 _ July 29, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#293-_-july-29-2018","text":"Added link to home for logo in drawer Fixed dependency problems between MkDocs and Tornado","title":"2.9.3 _ July 29, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#292-_-june-29-2018","text":"Added Hindi and Czech translations","title":"2.9.2 _ June 29, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#291-_-june-18-2018","text":"Added support for different spellings for theme color Fixed #799 : Added support for webfont minification in production Fixed #800 : Added .highlighttable as an alias for .codehilitetable","title":"2.9.1 _ June 18, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#290-_-june-13-2018","text":"Added support for theme color on Android Fixed #796 : Rendering of nested tabbed code blocks","title":"2.9.0 _ June 13, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#280-_-june-10-2018","text":"Added support for grouping code blocks with tabs Added Material and FontAwesome icon fonts to distribution files (GDPR) Added note on compliance with GDPR Added Slovak translations Fixed #790 : Prefixed id attributes with __ to avoid name clashes","title":"2.8.0 _ June 10, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#273-_-april-26-2018","text":"Added Finnish translations","title":"2.7.3 _ April 26, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#272-_-april-9-2018","text":"Fixed rendering issue for details on Edge","title":"2.7.2 _ April 9, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#271-_-march-21-2018","text":"Added Galician translations Fixed #730 : Scroll chasing error on home page if Disqus is enabled Fixed #736 : Reset drawer and search upon back button invocation","title":"2.7.1 _ March 21, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#270-_-march-6-2018","text":"Added ability to set absolute URL for logo Added Hebrew translations","title":"2.7.0 _ March 6, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#266-_-february-22-2018","text":"Added preconnect for Google Fonts for faster loading Fixed #710 : With tabs sidebar disappears if JavaScript is not available","title":"2.6.6 _ February 22, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#265-_-february-22-2018","text":"Reverted --dev-addr flag removal from Dockerfile","title":"2.6.5 _ February 22, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#264-_-february-21-2018","text":"Added Catalan translations Fixed incorrect margins for buttons in Firefox and Safari Replaced package manager yarn with npm 5.6 Reverted GitHub stars rounding method Removed --dev-addr flag from Dockerfile for Windows compatibility","title":"2.6.4 _ February 21, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#263-_-february-18-2018","text":"Added Vietnamese translations","title":"2.6.3 _ February 18, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#262-_-february-12-2018","text":"Added Arabic translations Fixed incorrect rounding of amount of GitHub stars Fixed double-layered borders for tables","title":"2.6.2 _ February 12, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#261-_-february-11-2018","text":"Added ability to override Disqus integration using metadata Fixed #690 : Duplicate slashes in source file URLs Fixed #696 : Active page highlight not working with default palette Adjusted German translations","title":"2.6.1 _ February 11, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#260-_-february-2-2018","text":"Moved default search configuration to default translation (English) Added support to automatically set text direction from translation Added support to disable search stop word filter in translation Added support to disable search trimmer in translation Added Persian translations Fixed support for Polish search Fixed disappearing GitHub, GitLab and Bitbucket repository icons","title":"2.6.0 _ February 2, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#255-_-january-31-2018","text":"Added Hungarian translations","title":"2.5.5 _ January 31, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#254-_-january-29-2018","text":"Fixed #683 : gh-deploy fails inside Docker","title":"2.5.4 _ January 29, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#253-_-january-25-2018","text":"Added Ukrainian translations","title":"2.5.3 _ January 25, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#252-_-january-22-2018","text":"Added default search language mappings for all localizations Fixed #673 : Error loading non-existent search language Fixed #675 : Uncaught reference error when search plugin disabled","title":"2.5.2 _ January 22, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#251-_-january-20-2018","text":"Fixed permalink for main headline Improved missing translation handling with English as a fallback Improved accessibility with skip-to-content link","title":"2.5.1 _ January 20, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#250-_-january-13-2018","text":"Added support for right-to-left languages","title":"2.5.0 _ January 13, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#240-_-january-11-2018","text":"Added focus state for clipboard buttons Fixed #400 : Search bar steals tab focus Fixed search not closing on Enter when result is selected Fixed search not closing when losing focus due to Tab Fixed collapsed navigation links getting focus Fixed outline being cut off on Tab focus of navigation links Fixed bug with first search result navigation being ignored Removed search result navigation via Tab (use Up and Down ) Removed outline resets for links Improved general tabbing behavior on desktop","title":"2.4.0 _ January 11, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#230-_-january-9-2018","text":"Added example (synonym: snippet ) style for admonitions Added synonym abstract for summary style for admonitions","title":"2.3.0 _ January 9, 2018"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#226-_-december-27-2017","text":"Added Turkish translations Fixed unclickable area below header in case JavaScript is not available","title":"2.2.6 _ December 27, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#225-_-december-18-2017","text":"Fixed #639 : Broken default favicon","title":"2.2.5 _ December 18, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#224-_-december-18-2017","text":"Fixed #638 : Build breaks with Jinja < 2.9","title":"2.2.4 _ December 18, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#223-_-december-13-2017","text":"Fixed #630 : Admonition sets padding on any last child Adjusted Chinese (Traditional) translations","title":"2.2.3 _ December 13, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#222-_-december-8-2017","text":"Added Dutch translations Adjusted targeted link and footnote offsets Simplified admonition styles and fixed padding bug","title":"2.2.2 _ December 8, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#221-_-december-2-2017","text":"Fixed #616 : Minor styling error with title-only admonitions Removed border for table of contents and improved spacing","title":"2.2.1 _ December 2, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#220-_-november-22-2017","text":"Added support for hero teaser Added Portuguese translations Fixed #586 : Footnote backref target offset regression Fixed #605 : Search stemmers not correctly loaded","title":"2.2.0 _ November 22, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#211-_-november-21-2017","text":"Replaced deprecated babel-preset-es2015 with babel-preset-env Refactored Gulp build pipeline with Webpack Removed right border on sidebars Fixed broken color transition on header","title":"2.1.1 _ November 21, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#210-_-november-19-2017","text":"Added support for white as a primary color Added support for sliding site name and title Fixed redundant clipboard button when using line numbers on code blocks Improved header appearance by making it taller Improved tabs appearance Improved CSS customizability by leveraging inheritance Removed scroll shadows via background-attachment","title":"2.1.0 _ November 19, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#204-_-november-5-2017","text":"Fixed details not opening with footnote reference","title":"2.0.4 _ November 5, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#203-_-november-5-2017","text":"Added Japanese translations Fixed #540 : Jumping to anchor inside details doesn't open it Fixed active link colors in footer","title":"2.0.3 _ November 5, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#202-_-november-1-2017","text":"Added Russian translations Fixed #542 : Horizontal scrollbar between 1220px and 1234px Fixed #553 : Metadata values only rendering first character Fixed #558 : Flash of unstyled content Fixed favicon regression caused by deprecation upstream","title":"2.0.2 _ November 1, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#201-_-october-31-2017","text":"Fixed error when initializing search Fixed styles for link to edit the current page Fixed styles on nested admonition in details","title":"2.0.1 _ October 31, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#200-_-october-31-2017","text":"Upgraded MkDocs to 0.17.1 ( BREAKING ) Added support for easier configuration of search tokenizer Added support to disable search Added Korean translations","title":"2.0.0 _ October 31, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#1122-_-october-26-2017","text":"Added Italian, Norwegian, French and Chinese translations","title":"1.12.2 _ October 26, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#1121-_-october-22-2017","text":"Added Polish, Swedish and Spanish translations Improved downward compatibility with custom partials Temporarily pinned MkDocs version within Docker image to 0.16.3 Fixed #519 : Missing theme configuration file","title":"1.12.1 _ October 22, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#1120-_-october-20-2017","text":"Added support for setting language(s) via mkdocs.yml Added support for default localization Added German and Danish translations Fixed #374 : Search bar misalignment on big screens","title":"1.12.0 _ October 20, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#1110-_-october-19-2017","text":"Added localization to clipboard Refactored localization logic","title":"1.11.0 _ October 19, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#1104-_-october-18-2017","text":"Improved print styles of code blocks Improved search UX (don't close on enter if no selection) Fixed #495 : Vertical scrollbar on short pages","title":"1.10.4 _ October 18, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#1103-_-october-11-2017","text":"Fixed #484 : Vertical scrollbar on some MathJax formulas Fixed #483 : Footnote backref target offset regression","title":"1.10.3 _ October 11, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#1102-_-october-6-2017","text":"Fixed #468 : Sidebar shows scrollbar if content is shorter (in Safari)","title":"1.10.2 _ October 6, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#1101-_-september-14-2017","text":"Fixed #455 : Bold code blocks rendered with normal font weight","title":"1.10.1 _ September 14, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#1100-_-september-1-2017","text":"Added support to make logo default icon configurable Fixed uninitialized overflow scrolling on main pane for iOS Fixed error in mobile navigation in case JavaScript is not available Fixed incorrect color transition for nested panes in mobile navigation Improved checkbox styles for Tasklist from PyMdown Extension package","title":"1.10.0 _ September 1, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#190-_-august-29-2017","text":"Added info (synonym: todo ) style for admonitions Added question (synonym: help , faq ) style for admonitions Added support for Details from PyMdown Extensions package Improved admonition styles to match details Improved styles for social links in footer Replaced ligatures with Unicode code points to avoid broken layout Upgraded PyMdown Extensions package dependency to >= 3.4","title":"1.9.0 _ August 29, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#181-_-august-7-2017","text":"Fixed #421 : Missing pagination for GitHub API","title":"1.8.1 _ August 7, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#180-_-august-2-2017","text":"Added support for lazy-loading of search results for better performance Added support for customization of search tokenizer/separator Fixed #424 : Search doesn't handle capital letters anymore Fixed #419 : Search doesn't work on whole words","title":"1.8.0 _ August 2, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#175-_-july-25-2017","text":"Fixed #398 : Forms broken due to search shortcuts Improved search overall user experience Improved search matching and highlighting Improved search accessibility","title":"1.7.5 _ July 25, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#174-_-june-21-2017","text":"Fixed functional link colors in table of contents for active palette Fixed #368 : Compatibility issues with IE11","title":"1.7.4 _ June 21, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#173-_-june-7-2017","text":"Fixed error when setting language to Japanese for site search","title":"1.7.3 _ June 7, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#172-_-june-6-2017","text":"Fixed offset of search box when repo_url is not set Fixed non-disappearing tooltip","title":"1.7.2 _ June 6, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#171-_-june-1-2017","text":"Fixed wrong z-index order of header, overlay and drawer Fixed wrong offset of targeted footnote back references","title":"1.7.1 _ June 1, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#170-_-june-1-2017","text":"Added \"copy to clipboard\" buttons to code blocks Added support for multilingual site search Fixed search term highlighting for non-latin languages","title":"1.7.0 _ June 1, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#164-_-may-24-2017","text":"Fixed #337 : JavaScript error for GitHub organization URLs","title":"1.6.4 _ May 24, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#163-_-may-16-2017","text":"Fixed #329 : Broken source stats for private or unknown GitHub repos","title":"1.6.3 _ May 16, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#162-_-may-15-2017","text":"Fixed #316 : Fatal error for git clone on Windows Fixed #320 : Chrome 58 creates double underline for abbr tags Fixed #323 : Ligatures rendered inside code blocks Fixed miscalculated sidebar height due to missing margin collapse Changed deprecated MathJax CDN to Cloudflare","title":"1.6.2 _ May 15, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#161-_-april-23-2017","text":"Fixed following of active/focused element if search input is focused Fixed layer order of search component elements","title":"1.6.1 _ April 23, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#160-_-april-22-2017","text":"Added build test for Docker image on Travis Added search overlay for better user experience (focus) Added language from localizations to html tag Fixed #270 : source links broken for absolute URLs Fixed missing top spacing for first targeted element in content Fixed too small footnote divider when using larger font sizes","title":"1.6.0 _ April 22, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#155-_-april-20-2017","text":"Fixed #282 : Browser search ( Meta + F ) is hijacked","title":"1.5.5 _ April 20, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#154-_-april-8-2017","text":"Fixed broken highlighting for two or more search terms Fixed missing search results when only a h1 is present Fixed unresponsive overlay on Android","title":"1.5.4 _ April 8, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#153-_-april-7-2017","text":"Fixed deprecated calls for template variables Fixed wrong palette color for focused search result Fixed JavaScript errors on 404 page Fixed missing top spacing on 404 page Fixed missing right spacing on overflow of source container","title":"1.5.3 _ April 7, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#152-_-april-5-2017","text":"Added requirements as explicit dependencies in setup.py Fixed non-synchronized transitions in search form","title":"1.5.2 _ April 5, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#151-_-march-30-2017","text":"Fixed rendering and offset of targeted footnotes Fixed #238 : Link on logo is not set to site_url","title":"1.5.1 _ March 30, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#150-_-march-24-2017","text":"Added support for localization of search placeholder Added keyboard events for quick access of search Added keyboard events for search control Added opacity on hover for search buttons Added git hook to skip CI build on non-src changes Fixed non-resetting search placeholder when input is cleared Fixed error for unescaped parentheses in search term Fixed #229 : Button to clear search missing Fixed #231 : Escape key doesn't exit search Removed old-style figures from font feature settings","title":"1.5.0 _ March 24, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#141-_-march-16-2017","text":"Fixed invalid destructuring attempt on NodeList (in Safari, Edge, IE)","title":"1.4.1 _ March 16, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#140-_-march-16-2017","text":"Added support for grouping searched sections by documents Added support for highlighting of search terms Added support for localization of search results Fixed #216 : table of contents icon doesn't show if h1 is not present Reworked style and layout of search results for better usability","title":"1.4.0 _ March 16, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#130-_-march-11-2017","text":"Added support for page-specific title and description using metadata Added support for linking source files to documentation Fixed jitter and offset of sidebar when zooming browser Fixed incorrectly initialized tablet sidebar height Fixed regression for #1 : GitHub stars break if repo_url ends with a / Fixed undesired white line below copyright footer due to base font scaling Fixed issue with whitespace in path for scripts Fixed #205 : support non-fixed (static) header Refactored footnote references for better visibility Reduced repaints to a minimum for non-tabs configuration Reduced contrast of edit button (slightly)","title":"1.3.0 _ March 11, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#120-_-march-3-2017","text":"Added quote (synonym: cite ) style for admonitions Added help message to build pipeline Fixed wrong navigation link colors when applying palette Fixed #197 : Link missing in tabs navigation on deeply nested items Removed unnecessary dev dependencies","title":"1.2.0 _ March 3, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#111-_-february-26-2017","text":"Fixed incorrectly displayed nested lists when using tabs","title":"1.1.1 _ February 26, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#110-_-february-26-2017","text":"Added tabs navigation feature (optional) Added Disqus integration (optional) Added a high resolution Favicon with the new logo Added static type checking using Facebook's Flow Fixed #173 : Dictionary elements have no bottom spacing Fixed #175 : Tables cannot be set to 100% width Fixed race conditions in build related to asset revisioning Fixed accidentally re-introduced Permalink on top-level headline Fixed alignment of logo in drawer on IE11 Refactored styles related to tables Refactored and automated Docker build and PyPI release Refactored build scripts","title":"1.1.0 _ February 26, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#105-_-february-18-2017","text":"Fixed #153 : Sidebar flows out of constrained area in Chrome 56 Fixed #159 : Footer jitter due to JavaScript if content is short","title":"1.0.5 _ February 18, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#104-_-february-16-2017","text":"Fixed #142 : Documentation build errors if h1 is defined as raw HTML Fixed #164 : PyPI release does not build and install Fixed offsets of targeted headlines Increased sidebar font size by 0.12rem","title":"1.0.4 _ February 16, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#103-_-january-22-2017","text":"Fixed #117 : Table of contents items don't blur on fast scrolling Refactored sidebar positioning logic Further reduction of repaints","title":"1.0.3 _ January 22, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#102-_-january-15-2017","text":"Fixed #108 : Horizontal scrollbar in content area","title":"1.0.2 _ January 15, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#101-_-january-14-2017","text":"Fixed massive repaints happening when scrolling Fixed footer back reference positions in case of overflow Fixed header logo from showing when the menu icon is rendered Changed scrollbar behavior to only show when content overflows","title":"1.0.1 _ January 14, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#100-_-january-13-2017","text":"Introduced Webpack for more sophisticated JavaScript bundling Introduced ESLint and Stylelint for code style checks Introduced more accurate Material Design colors and shadows Introduced modular scales for harmonic font sizing Introduced git-hooks for better development workflow Rewrite of CSS using the BEM methodology and SassDoc guidelines Rewrite of JavaScript using ES6 and Babel as a transpiler Rewrite of Admonition, Permalinks and CodeHilite integration Rewrite of the complete typographical system Rewrite of Gulp asset pipeline in ES6 and separation of tasks Removed Bower as a dependency in favor of NPM Removed custom icon build in favor of the Material Design icon set Removed _blank targets on links due to vulnerability: http://bit.ly/1Mk2Rtw Removed unversioned assets from build directory Restructured templates into base templates and partials Added build and watch scripts in package.json Added support for Metadata and Footnotes Markdown extensions Added support for PyMdown Extensions package Added support for collapsible sections in navigation Added support for separate table of contents Added support for better accessibility through REM-based layout Added icons for GitHub, GitLab and BitBucket integrations Added more detailed documentation on specimen, extensions etc. Added a 404.html error page for deployment on GitHub Pages Fixed live reload chain in watch mode when saving a template Fixed variable references to work with MkDocs 0.16","title":"1.0.0 _ January 13, 2017"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#024-_-june-26-2016","text":"Fixed improperly set default favicon Fixed #33 : Protocol relative URL for webfonts doesn't work with file:// Fixed #34 : IE11 on Windows 7 doesn't honor max-width on main tag Fixed #35 : Add styling for blockquotes","title":"0.2.4 _ June 26, 2016"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#023-_-may-16-2016","text":"Fixed #25 : Highlight inline fenced blocks Fixed #26 : Better highlighting for keystrokes Fixed #30 : Suboptimal syntax highlighting for PHP","title":"0.2.3 _ May 16, 2016"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#022-_-march-20-2016","text":"Fixed #15 : Document Pygments dependency for CodeHilite Fixed #16 : Favicon could not be set through mkdocs.yml Fixed #17 : Put version into own container for styling Fixed #20 : Fix rounded borders for tables","title":"0.2.2 _ March 20, 2016"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#021-_-march-12-2016","text":"Fixed #10 : Invisible header after closing search bar with ESC key Fixed #13 : Table cells don't wrap Fixed empty list in table of contents when no headline is defined Corrected wrong path for static asset monitoring in Gulpfile.js Set up tracking of site search for Google Analytics","title":"0.2.1 _ March 12, 2016"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#020-_-february-24-2016","text":"Fixed #6 : Include multiple color palettes via mkdocs.yml Fixed #7 : Better colors for links inside admonition notes and warnings Fixed #9 : Text for prev/next footer navigation should be customizable Refactored templates (replaced if / else with modifiers where possible)","title":"0.2.0 _ February 24, 2016"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#013-_-february-21-2016","text":"Fixed #3 : Ordered lists within an unordered list have ::before content Fixed #4 : Click on Logo/Title without Github-Repository: \"None\" Fixed #5 : Page without headlines renders empty list in table of contents Moved Modernizr to top to ensure basic usability in IE8","title":"0.1.3 _ February 21, 2016"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#012-_-february-16-2016","text":"Fixed styles for deep navigational hierarchies Fixed webfont delivery problem when hosted in subdirectories Fixed print styles in mobile/tablet configuration Added option to configure fonts in mkdocs.yml with fallbacks Changed styles for admonition notes and warnings Set download link to latest version if available Set up tracking of outgoing links and actions for Google Analytics","title":"0.1.2 _ February 16, 2016"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#011-_-february-11-2016","text":"Fixed #1 : GitHub stars don't work if the repo_url ends with a / Updated NPM and Bower dependencies to most recent versions Changed footer/copyright link to Material theme to GitHub pages Made MkDocs building/serving in build process optional Set up continuous integration with Travis","title":"0.1.1 _ February 11, 2016"},{"location":"kb/GNU-Linux/Software/mkDocs/changelog/#010-_-february-9-2016","text":"Initial release","title":"0.1.0 _ February 9, 2016"},{"location":"kb/GNU-Linux/Software/mkDocs/creating-your-site/","text":"Creating your site \u00b6 After you've installed Material for MkDocs, you can bootstrap your project documentation using the mkdocs executable. Go to the directory where you want your project to be located and enter: mkdocs new . Alternatively, if you're running Material for MkDocs from within Docker, use: Unix docker run --rm -it -v ${PWD}:/docs squidfunk/mkdocs-material new . Windows docker run --rm -it -v \"%cd%\":/docs squidfunk/mkdocs-material new . This will create the following structure: . \u251c\u2500 docs/ \u2502 \u2514\u2500 index.md \u2514\u2500 mkdocs.yml Configuration \u00b6 Minimal configuration \u00b6 To enable the theme, you can now simply add the following lines to mkdocs.yml . Note that since there are several installation methods , configuration will be slightly different: pip, docker theme : name : material git theme : name : null custom_dir : mkdocs-material/material # 404 page static_templates : - 404.html # Necessary for search to work properly include_search_page : false search_index_only : true # Default values, taken from mkdocs_theme.yml language : en font : text : Roboto code : Roboto Mono favicon : assets/favicon.png icon : logo : logo If you cloned Material for MkDocs from GitHub, you must list all of the themes' defaults, because mkdocs_theme.yml is not loaded automatically as described in the official documentation . Advanced configuration \u00b6 Material for MkDocs comes with a lot of configuration options. The setup section explains in great detail how to configure and customize colors, fonts, icons and much more: Changing the colors Changing the fonts Changing the language Changing the logo and icons Setting up navigation Setting up site search Setting up site analytics Setting up versioning Setting up the header Setting up the footer Adding a git repository Adding a comment system Previewing as you write \u00b6 MkDocs includes a live preview server, so you can preview your changes as you write your documentation. The server will automatically rebuild the site upon saving. Start it with: mkdocs serve If you're running Material for MkDocs from within Docker, use: Unix docker run --rm -it -p 8000:8000 -v ${PWD}:/docs squidfunk/mkdocs-material Windows docker run --rm -it -p 8000:8000 -v \"%cd%\":/docs squidfunk/mkdocs-material Point your browser to localhost:8000 and you should see: Building your site \u00b6 When you're finished editing, you can build a static site from your Markdown files with: mkdocs build The contents of this directory make up your project documentation. There's no need for operating a database or server, as it is completely self-contained. The site can be hosted on GitHub Pages , GitLab Pages , a CDN of your choice or your private web space.","title":"Creating your site"},{"location":"kb/GNU-Linux/Software/mkDocs/creating-your-site/#creating-your-site","text":"After you've installed Material for MkDocs, you can bootstrap your project documentation using the mkdocs executable. Go to the directory where you want your project to be located and enter: mkdocs new . Alternatively, if you're running Material for MkDocs from within Docker, use: Unix docker run --rm -it -v ${PWD}:/docs squidfunk/mkdocs-material new . Windows docker run --rm -it -v \"%cd%\":/docs squidfunk/mkdocs-material new . This will create the following structure: . \u251c\u2500 docs/ \u2502 \u2514\u2500 index.md \u2514\u2500 mkdocs.yml","title":"Creating your site"},{"location":"kb/GNU-Linux/Software/mkDocs/creating-your-site/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/creating-your-site/#minimal-configuration","text":"To enable the theme, you can now simply add the following lines to mkdocs.yml . Note that since there are several installation methods , configuration will be slightly different: pip, docker theme : name : material git theme : name : null custom_dir : mkdocs-material/material # 404 page static_templates : - 404.html # Necessary for search to work properly include_search_page : false search_index_only : true # Default values, taken from mkdocs_theme.yml language : en font : text : Roboto code : Roboto Mono favicon : assets/favicon.png icon : logo : logo If you cloned Material for MkDocs from GitHub, you must list all of the themes' defaults, because mkdocs_theme.yml is not loaded automatically as described in the official documentation .","title":"Minimal configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/creating-your-site/#advanced-configuration","text":"Material for MkDocs comes with a lot of configuration options. The setup section explains in great detail how to configure and customize colors, fonts, icons and much more: Changing the colors Changing the fonts Changing the language Changing the logo and icons Setting up navigation Setting up site search Setting up site analytics Setting up versioning Setting up the header Setting up the footer Adding a git repository Adding a comment system","title":"Advanced configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/creating-your-site/#previewing-as-you-write","text":"MkDocs includes a live preview server, so you can preview your changes as you write your documentation. The server will automatically rebuild the site upon saving. Start it with: mkdocs serve If you're running Material for MkDocs from within Docker, use: Unix docker run --rm -it -p 8000:8000 -v ${PWD}:/docs squidfunk/mkdocs-material Windows docker run --rm -it -p 8000:8000 -v \"%cd%\":/docs squidfunk/mkdocs-material Point your browser to localhost:8000 and you should see:","title":"Previewing as you write"},{"location":"kb/GNU-Linux/Software/mkDocs/creating-your-site/#building-your-site","text":"When you're finished editing, you can build a static site from your Markdown files with: mkdocs build The contents of this directory make up your project documentation. There's no need for operating a database or server, as it is completely self-contained. The site can be hosted on GitHub Pages , GitLab Pages , a CDN of your choice or your private web space.","title":"Building your site"},{"location":"kb/GNU-Linux/Software/mkDocs/customization/","text":"Customization \u00b6 Project documentation is as diverse as the projects themselves and Material for MkDocs is a great starting point for making it look beautiful. However, as you write your documentation, you may reach a point where small adjustments are necessary to preserve your brand's style. Adding assets \u00b6 MkDocs provides several ways to customize a theme. In order to make a few tweaks to Material for MkDocs, you can just add your stylesheets and JavaScript files to the docs directory. Additional CSS \u00b6 If you want to tweak some colors or change the spacing of certain elements, you can do this in a separate stylesheet. The easiest way is by creating a new stylesheet file in the docs directory: . \u251c\u2500 docs/ \u2502 \u2514\u2500 stylesheets/ \u2502 \u2514\u2500 extra.css \u2514\u2500 mkdocs.yml Then, add the following line to mkdocs.yml : extra_css : - stylesheets/extra.css Spin up the live preview server and start typing your changes in your additional stylesheet file \u2013 you should see them almost instantly after saving. Additional JavaScript \u00b6 The same is true for additional JavaScript. If you want to integrate another syntax highlighter or add some custom logic to your theme, create a new JavaScript file in the docs directory: . \u251c\u2500 docs/ \u2502 \u2514\u2500 javascripts/ \u2502 \u2514\u2500 extra.js \u2514\u2500 mkdocs.yml Then, add the following line to mkdocs.yml : extra_javascript : - javascripts/extra.js Further assistance can be found in the MkDocs documentation . Extending the theme \u00b6 If you want to alter the HTML source (e.g. add or remove some parts), you can extend the theme. MkDocs supports theme extension , an easy way to override parts of Material for MkDocs without forking from git. This ensures that you can update to the latest version more easily. Setup and theme structure \u00b6 Enable Material for MkDocs as usual in mkdocs.yml , and create a new folder for overrides which you then reference using the custom_dir key: theme : name : material custom_dir : overrides Theme extension prerequisites As the custom_dir variable is used for the theme extension process, Material for MkDocs needs to be installed via pip and referenced with the name parameter in mkdocs.yml . It will not work when cloning from git . The structure in the overrides directory must mirror the directory structure of the original theme, as any file in the overrides directory will replace the file with the same name which is part of the original theme. Besides, further assets may also be put in the overrides directory. The directory layout of the theme is as follows: . \u251c\u2500 .icons/ # Bundled icon sets \u251c\u2500 assets/ \u2502 \u251c\u2500 images/ # Images and icons \u2502 \u251c\u2500 javascripts/ # JavaScript \u2502 \u2514\u2500 stylesheets/ # Stylesheets \u251c\u2500 partials/ \u2502 \u251c\u2500 integrations/ # Third-party integrations \u2502 \u2502 \u251c\u2500 analytics.html # - Google Analytics \u2502 \u2502 \u2514\u2500 disqus.html # - Disqus \u2502 \u251c\u2500 language/ # Localized languages \u2502 \u251c\u2500 footer.html # Footer bar \u2502 \u251c\u2500 header.html # Header bar \u2502 \u251c\u2500 language.html # Localized labels \u2502 \u251c\u2500 logo.html # Logo in header and sidebar \u2502 \u251c\u2500 nav.html # Main navigation \u2502 \u251c\u2500 nav-item.html # Main navigation item \u2502 \u251c\u2500 palette.html # Color palette \u2502 \u251c\u2500 search.html # Search box \u2502 \u251c\u2500 social.html # Social links \u2502 \u251c\u2500 source.html # Repository information \u2502 \u251c\u2500 source-date.html # Last updated date \u2502 \u251c\u2500 source-link.html # Link to source file \u2502 \u251c\u2500 tabs.html # Tabs navigation \u2502 \u251c\u2500 tabs-item.html # Tabs navigation item \u2502 \u251c\u2500 toc.html # Table of contents \u2502 \u2514\u2500 toc-item.html # Table of contents item \u251c\u2500 404 .html # 404 error page \u251c\u2500 base.html # Base template \u2514\u2500 main.html # Default page Overriding partials \u00b6 In order to override a partial, we can replace it with a file of the same name and location in the overrides directory. For example, to replace the original footer.html , create a footer.html file in the overrides/partials directory: . \u251c\u2500 overrides/ \u2502 \u2514\u2500 partials/ \u2502 \u2514\u2500 footer.html \u2514\u2500 mkdocs.yml MkDocs will now use the new partial when rendering the theme. This can be done with any file. Overriding blocks \u00b6 Besides overriding partials, it's also possible to override (and extend) template blocks , which are defined inside the templates and wrap specific features. To override a block, create a main.html file inside the overrides directory: . \u251c\u2500 overrides/ \u2502 \u2514\u2500 main.html \u2514\u2500 mkdocs.yml Then, e.g. to override the site title, add the following line to main.html : {% extends \"base.html\" %} {% block htmltitle %} < title > Lorem ipsum dolor sit amet </ title > {% endblock %} Material for MkDocs provides the following template blocks: Block name Wrapped contents analytics Wraps the Google Analytics integration announce Wraps the announcement bar config Wraps the JavaScript application config content Wraps the main content disqus Wraps the Disqus integration extrahead Empty block to add custom meta tags fonts Wraps the font definitions footer Wraps the footer with navigation and copyright header Wraps the fixed header bar hero Wraps the hero teaser (if available) htmltitle Wraps the <title> tag libs Wraps the JavaScript libraries (header) scripts Wraps the JavaScript application (footer) source Wraps the linked source files site_meta Wraps the meta tags in the document head site_nav Wraps the site navigation and table of contents styles Wraps the stylesheets (also extra sources) tabs Wraps the tabs navigation (if available) For more on this topic refer to the MkDocs documentation . Theme development \u00b6 Material for MkDocs uses Webpack as a build tool to leverage modern web technologies like TypeScript and SASS . If you want to make more fundamental changes, it may be necessary to make the adjustments directly in the source of the theme and recompile it. Environment setup \u00b6 In order to start development on Material for MkDocs, a Node.js version of at least 12 is required. First, clone the repository: git clone https://github.com/squidfunk/mkdocs-material Next, all dependencies need to be installed, which is done with: cd mkdocs-material pip install -r requirements.txt pip install mkdocs-minify-plugin pip install mkdocs-redirects npm install Development mode \u00b6 Start the Webpack watchdog with: npm start Then, in a second session, start the MkDocs server with: mkdocs serve Point your browser to localhost:8000 and you should see this documentation in front of you. Automatically generated files Never make any changes in the material directory, as the contents of this directory are automatically generated from the src directory and will be overridden when the theme is built. Building the theme \u00b6 When you're finished making your changes, you can build the theme by invoking: npm run build This triggers the production-level compilation and minification of all stylesheets and JavaScript sources. When the command exits, the final files are located in the material directory. Add the theme_dir variable pointing to the aforementioned directory in the original mkdocs.yml . Now you can run mkdocs build and you should see your documentation with your changes to the original theme.","title":"Customization"},{"location":"kb/GNU-Linux/Software/mkDocs/customization/#customization","text":"Project documentation is as diverse as the projects themselves and Material for MkDocs is a great starting point for making it look beautiful. However, as you write your documentation, you may reach a point where small adjustments are necessary to preserve your brand's style.","title":"Customization"},{"location":"kb/GNU-Linux/Software/mkDocs/customization/#adding-assets","text":"MkDocs provides several ways to customize a theme. In order to make a few tweaks to Material for MkDocs, you can just add your stylesheets and JavaScript files to the docs directory.","title":"Adding assets"},{"location":"kb/GNU-Linux/Software/mkDocs/customization/#additional-css","text":"If you want to tweak some colors or change the spacing of certain elements, you can do this in a separate stylesheet. The easiest way is by creating a new stylesheet file in the docs directory: . \u251c\u2500 docs/ \u2502 \u2514\u2500 stylesheets/ \u2502 \u2514\u2500 extra.css \u2514\u2500 mkdocs.yml Then, add the following line to mkdocs.yml : extra_css : - stylesheets/extra.css Spin up the live preview server and start typing your changes in your additional stylesheet file \u2013 you should see them almost instantly after saving.","title":"Additional CSS"},{"location":"kb/GNU-Linux/Software/mkDocs/customization/#additional-javascript","text":"The same is true for additional JavaScript. If you want to integrate another syntax highlighter or add some custom logic to your theme, create a new JavaScript file in the docs directory: . \u251c\u2500 docs/ \u2502 \u2514\u2500 javascripts/ \u2502 \u2514\u2500 extra.js \u2514\u2500 mkdocs.yml Then, add the following line to mkdocs.yml : extra_javascript : - javascripts/extra.js Further assistance can be found in the MkDocs documentation .","title":"Additional JavaScript"},{"location":"kb/GNU-Linux/Software/mkDocs/customization/#extending-the-theme","text":"If you want to alter the HTML source (e.g. add or remove some parts), you can extend the theme. MkDocs supports theme extension , an easy way to override parts of Material for MkDocs without forking from git. This ensures that you can update to the latest version more easily.","title":"Extending the theme"},{"location":"kb/GNU-Linux/Software/mkDocs/customization/#setup-and-theme-structure","text":"Enable Material for MkDocs as usual in mkdocs.yml , and create a new folder for overrides which you then reference using the custom_dir key: theme : name : material custom_dir : overrides Theme extension prerequisites As the custom_dir variable is used for the theme extension process, Material for MkDocs needs to be installed via pip and referenced with the name parameter in mkdocs.yml . It will not work when cloning from git . The structure in the overrides directory must mirror the directory structure of the original theme, as any file in the overrides directory will replace the file with the same name which is part of the original theme. Besides, further assets may also be put in the overrides directory. The directory layout of the theme is as follows: . \u251c\u2500 .icons/ # Bundled icon sets \u251c\u2500 assets/ \u2502 \u251c\u2500 images/ # Images and icons \u2502 \u251c\u2500 javascripts/ # JavaScript \u2502 \u2514\u2500 stylesheets/ # Stylesheets \u251c\u2500 partials/ \u2502 \u251c\u2500 integrations/ # Third-party integrations \u2502 \u2502 \u251c\u2500 analytics.html # - Google Analytics \u2502 \u2502 \u2514\u2500 disqus.html # - Disqus \u2502 \u251c\u2500 language/ # Localized languages \u2502 \u251c\u2500 footer.html # Footer bar \u2502 \u251c\u2500 header.html # Header bar \u2502 \u251c\u2500 language.html # Localized labels \u2502 \u251c\u2500 logo.html # Logo in header and sidebar \u2502 \u251c\u2500 nav.html # Main navigation \u2502 \u251c\u2500 nav-item.html # Main navigation item \u2502 \u251c\u2500 palette.html # Color palette \u2502 \u251c\u2500 search.html # Search box \u2502 \u251c\u2500 social.html # Social links \u2502 \u251c\u2500 source.html # Repository information \u2502 \u251c\u2500 source-date.html # Last updated date \u2502 \u251c\u2500 source-link.html # Link to source file \u2502 \u251c\u2500 tabs.html # Tabs navigation \u2502 \u251c\u2500 tabs-item.html # Tabs navigation item \u2502 \u251c\u2500 toc.html # Table of contents \u2502 \u2514\u2500 toc-item.html # Table of contents item \u251c\u2500 404 .html # 404 error page \u251c\u2500 base.html # Base template \u2514\u2500 main.html # Default page","title":"Setup and theme structure"},{"location":"kb/GNU-Linux/Software/mkDocs/customization/#overriding-partials","text":"In order to override a partial, we can replace it with a file of the same name and location in the overrides directory. For example, to replace the original footer.html , create a footer.html file in the overrides/partials directory: . \u251c\u2500 overrides/ \u2502 \u2514\u2500 partials/ \u2502 \u2514\u2500 footer.html \u2514\u2500 mkdocs.yml MkDocs will now use the new partial when rendering the theme. This can be done with any file.","title":"Overriding partials"},{"location":"kb/GNU-Linux/Software/mkDocs/customization/#overriding-blocks","text":"Besides overriding partials, it's also possible to override (and extend) template blocks , which are defined inside the templates and wrap specific features. To override a block, create a main.html file inside the overrides directory: . \u251c\u2500 overrides/ \u2502 \u2514\u2500 main.html \u2514\u2500 mkdocs.yml Then, e.g. to override the site title, add the following line to main.html : {% extends \"base.html\" %} {% block htmltitle %} < title > Lorem ipsum dolor sit amet </ title > {% endblock %} Material for MkDocs provides the following template blocks: Block name Wrapped contents analytics Wraps the Google Analytics integration announce Wraps the announcement bar config Wraps the JavaScript application config content Wraps the main content disqus Wraps the Disqus integration extrahead Empty block to add custom meta tags fonts Wraps the font definitions footer Wraps the footer with navigation and copyright header Wraps the fixed header bar hero Wraps the hero teaser (if available) htmltitle Wraps the <title> tag libs Wraps the JavaScript libraries (header) scripts Wraps the JavaScript application (footer) source Wraps the linked source files site_meta Wraps the meta tags in the document head site_nav Wraps the site navigation and table of contents styles Wraps the stylesheets (also extra sources) tabs Wraps the tabs navigation (if available) For more on this topic refer to the MkDocs documentation .","title":"Overriding blocks"},{"location":"kb/GNU-Linux/Software/mkDocs/customization/#theme-development","text":"Material for MkDocs uses Webpack as a build tool to leverage modern web technologies like TypeScript and SASS . If you want to make more fundamental changes, it may be necessary to make the adjustments directly in the source of the theme and recompile it.","title":"Theme development"},{"location":"kb/GNU-Linux/Software/mkDocs/customization/#environment-setup","text":"In order to start development on Material for MkDocs, a Node.js version of at least 12 is required. First, clone the repository: git clone https://github.com/squidfunk/mkdocs-material Next, all dependencies need to be installed, which is done with: cd mkdocs-material pip install -r requirements.txt pip install mkdocs-minify-plugin pip install mkdocs-redirects npm install","title":"Environment setup"},{"location":"kb/GNU-Linux/Software/mkDocs/customization/#development-mode","text":"Start the Webpack watchdog with: npm start Then, in a second session, start the MkDocs server with: mkdocs serve Point your browser to localhost:8000 and you should see this documentation in front of you. Automatically generated files Never make any changes in the material directory, as the contents of this directory are automatically generated from the src directory and will be overridden when the theme is built.","title":"Development mode"},{"location":"kb/GNU-Linux/Software/mkDocs/customization/#building-the-theme","text":"When you're finished making your changes, you can build the theme by invoking: npm run build This triggers the production-level compilation and minification of all stylesheets and JavaScript sources. When the command exits, the final files are located in the material directory. Add the theme_dir variable pointing to the aforementioned directory in the original mkdocs.yml . Now you can run mkdocs build and you should see your documentation with your changes to the original theme.","title":"Building the theme"},{"location":"kb/GNU-Linux/Software/mkDocs/data-privacy/","text":"Data privacy \u00b6 In itself, Material for MkDocs does not perform any tracking and should adhere to the General Data Protection Regulation (GDPR), but it integrates with some third-party services that may not. Third-party services \u00b6 Google Fonts \u00b6 Material for MkDocs makes fonts configurable by relying on Google Fonts CDN, which may be in breach with GDPR. The usage of Google's CDN can be easily disabled via mkdocs.yml . Google Analytics and Disqus \u00b6 Material for MkDocs comes with optional Google Analytics and Disqus integrations, both of which must be enabled explicitly, so there's no immediate action if you don't use those.","title":"Data privacy"},{"location":"kb/GNU-Linux/Software/mkDocs/data-privacy/#data-privacy","text":"In itself, Material for MkDocs does not perform any tracking and should adhere to the General Data Protection Regulation (GDPR), but it integrates with some third-party services that may not.","title":"Data privacy"},{"location":"kb/GNU-Linux/Software/mkDocs/data-privacy/#third-party-services","text":"","title":"Third-party services"},{"location":"kb/GNU-Linux/Software/mkDocs/data-privacy/#google-fonts","text":"Material for MkDocs makes fonts configurable by relying on Google Fonts CDN, which may be in breach with GDPR. The usage of Google's CDN can be easily disabled via mkdocs.yml .","title":"Google Fonts"},{"location":"kb/GNU-Linux/Software/mkDocs/data-privacy/#google-analytics-and-disqus","text":"Material for MkDocs comes with optional Google Analytics and Disqus integrations, both of which must be enabled explicitly, so there's no immediate action if you don't use those.","title":"Google Analytics and Disqus"},{"location":"kb/GNU-Linux/Software/mkDocs/deprecations/","text":"Deprecations \u00b6 This page includes a list of deprecations, indicating which features of Material for MkDocs were replaced with newer, more flexible alternatives, and thus should not be used anymore. Front matter \u00b6 Redirect \u00b6 Deprecated: 5.5 \u00b7 Removed: 6.0 The redirect key, which could be added via Metadata , allowed to specify a redirect from within a document to a new address, which is a good idea when moving content around: --- redirect: /path/to/new/file --- The redirects plugin provides the ability to define redirect mappings via mkdocs.yml , which is considered to be a much better solution to achieve the same result. It can be installed with pip : pip install mkdocs-redirects Redirect mappings can then be added to mkdocs.yml : plugins : - redirects : redirect_maps : path/to/old/file.md : path/to/new/file.md Source link \u00b6 Deprecated: 5.5 \u00b7 Removed: 6.0 The source and path keys, which could be added via Metadata , showed a source icon at the top right corner of a document, linking a document to a single source file: --- path: tree/master/docs source: deprecations.md --- Only a single source file could be linked, which is useless if a document refers to multiple files (or multiple sections within a single file). A more flexible approach is to use the new icon integration : [:octicons-file-code-24: Source](https://github.com/squidfunk/mkdocs-material/blob/master/docs/deprecations.md) This will render as Source , which can be included at arbitrary positions in any document. Hero \u00b6 Deprecated: 5.5 \u00b7 Removed: 6.0 The hero key, which could be added via Metadata , allowed to render a simple, text-only and page-local teaser text as part of a document. It could be set from front matter with: --- hero: Lorem ipsum dolor sit amet --- The recommended way is to override the hero block via theme extension for a specific page, which has the nice side effect that hero templates can be shared among multiple pages: Markdown --- template: overrides/hero.html --- Template {% block hero %} <!-- Add custom hero here --> {% endblock %} Docker image \u00b6 Bundled plugins \u00b6 Deprecated: 5.5 \u00b7 Removed: 6.0 Over the last years, the Docker image has continually increased in size. For CI it's important that download times are as short as possible, which is why the following plugins will be removed: mkdocs-awesome-pages-plugin mkdocs-git-revision-date-localized-plugin Note that it's trivial to install plugins inside the Docker image before building your documentation. See the installation guide for a step-by-step guide.","title":"Deprecations"},{"location":"kb/GNU-Linux/Software/mkDocs/deprecations/#deprecations","text":"This page includes a list of deprecations, indicating which features of Material for MkDocs were replaced with newer, more flexible alternatives, and thus should not be used anymore.","title":"Deprecations"},{"location":"kb/GNU-Linux/Software/mkDocs/deprecations/#front-matter","text":"","title":"Front matter"},{"location":"kb/GNU-Linux/Software/mkDocs/deprecations/#redirect","text":"Deprecated: 5.5 \u00b7 Removed: 6.0 The redirect key, which could be added via Metadata , allowed to specify a redirect from within a document to a new address, which is a good idea when moving content around: --- redirect: /path/to/new/file --- The redirects plugin provides the ability to define redirect mappings via mkdocs.yml , which is considered to be a much better solution to achieve the same result. It can be installed with pip : pip install mkdocs-redirects Redirect mappings can then be added to mkdocs.yml : plugins : - redirects : redirect_maps : path/to/old/file.md : path/to/new/file.md","title":"Redirect"},{"location":"kb/GNU-Linux/Software/mkDocs/deprecations/#source-link","text":"Deprecated: 5.5 \u00b7 Removed: 6.0 The source and path keys, which could be added via Metadata , showed a source icon at the top right corner of a document, linking a document to a single source file: --- path: tree/master/docs source: deprecations.md --- Only a single source file could be linked, which is useless if a document refers to multiple files (or multiple sections within a single file). A more flexible approach is to use the new icon integration : [:octicons-file-code-24: Source](https://github.com/squidfunk/mkdocs-material/blob/master/docs/deprecations.md) This will render as Source , which can be included at arbitrary positions in any document.","title":"Source link"},{"location":"kb/GNU-Linux/Software/mkDocs/deprecations/#hero","text":"Deprecated: 5.5 \u00b7 Removed: 6.0 The hero key, which could be added via Metadata , allowed to render a simple, text-only and page-local teaser text as part of a document. It could be set from front matter with: --- hero: Lorem ipsum dolor sit amet --- The recommended way is to override the hero block via theme extension for a specific page, which has the nice side effect that hero templates can be shared among multiple pages: Markdown --- template: overrides/hero.html --- Template {% block hero %} <!-- Add custom hero here --> {% endblock %}","title":"Hero"},{"location":"kb/GNU-Linux/Software/mkDocs/deprecations/#docker-image","text":"","title":"Docker image"},{"location":"kb/GNU-Linux/Software/mkDocs/deprecations/#bundled-plugins","text":"Deprecated: 5.5 \u00b7 Removed: 6.0 Over the last years, the Docker image has continually increased in size. For CI it's important that download times are as short as possible, which is why the following plugins will be removed: mkdocs-awesome-pages-plugin mkdocs-git-revision-date-localized-plugin Note that it's trivial to install plugins inside the Docker image before building your documentation. See the installation guide for a step-by-step guide.","title":"Bundled plugins"},{"location":"kb/GNU-Linux/Software/mkDocs/getting-started/","text":"Getting started \u00b6 Material for MkDocs is a theme for MkDocs , a static site generator geared towards (technical) project documentation. If you're familiar with Python, you can install Material for MkDocs with pip , the Python package manager. If not, we recommended using docker . In case you're running into problems, consult the troubleshooting section. Installation \u00b6 with pip \u00b6 Material for MkDocs can be installed with pip : Material for MkDocs pip install mkdocs-material Insiders pip install git+https:// ${ GH_TOKEN } @github.com/squidfunk/mkdocs-material-insiders.git This will automatically install compatible versions of all dependencies: MkDocs , Markdown , Pygments and Python Markdown Extensions . Material for MkDocs always strives to support the latest versions, so there's no need to install those packages separately. Note that in order to install Material for MkDocs Insiders , you'll need to become a sponsor , create a personal access token 1 , and set the GH_TOKEN environment variable to the token's value. with docker \u00b6 The official Docker image is a great way to get up and running in a few minutes, as it comes with all dependencies pre-installed. Pull the image for the latest version with: Material for MkDocs docker pull squidfunk/mkdocs-material Insiders docker login -u ${GH_USERNAME} -p ${GH_TOKEN} ghcr.io docker pull ghcr.io/squidfunk/mkdocs-material-insiders The mkdocs executable is provided as an entry point and serve is the default command. If you're not familiar with Docker don't worry, we have you covered in the following sections. The following plugins are bundled with the Docker image: mkdocs-minify-plugin mkdocs-redirects Note that in order to install Material for MkDocs Insiders , you'll need to become a sponsor , create a personal access token 2 , and set the GH_TOKEN environment variable to the token's value. How can I add plugins to the Docker image? Material for MkDocs bundles useful and common plugins while trying not to blow up the size of the official image. If the plugin you want to use is not included, create a new Dockerfile and extend the official Docker image with your custom installation routine: FROM squidfunk/mkdocs-material RUN pip install ... Next, you can build the image with the following command: docker build -t squidfunk/mkdocs-material . The new image can be used exactly like the official image. with git \u00b6 Material for MkDocs can be directly used from GitHub by cloning the repository into a subfolder of your project root which might be useful if you want to use the very latest version: Material for MkDocs git clone https://github.com/squidfunk/mkdocs-material.git Insiders git clone git@github.com:squidfunk/mkdocs-material-insiders.git mkdocs-material The theme will reside in the folder mkdocs-material/material . When cloning from git , you must install all required dependencies yourself: pip install -r mkdocs-material/requirements.txt Note that in order to install Material for MkDocs Insiders , you'll need to become a sponsor . In order to use pip to install from the private repository over HTTPS, the personal access token requires the repo scope. The creation and usage of an access token is only necessary when installing Insiders over HTTPS, which is the recommended way when building from within a CI/CD workflow, e.g. using GitHub Pages or GitLab Pages . \u21a9 If you want to use docker to pull the private Docker image from the GitHub Container Registry , the personal access token requires the read:packages scope. Note that you need to login before pulling the Docker image. As an example, see the publish workflow of the Material for MkDocs repository. \u21a9","title":"Getting started"},{"location":"kb/GNU-Linux/Software/mkDocs/getting-started/#getting-started","text":"Material for MkDocs is a theme for MkDocs , a static site generator geared towards (technical) project documentation. If you're familiar with Python, you can install Material for MkDocs with pip , the Python package manager. If not, we recommended using docker . In case you're running into problems, consult the troubleshooting section.","title":"Getting started"},{"location":"kb/GNU-Linux/Software/mkDocs/getting-started/#installation","text":"","title":"Installation"},{"location":"kb/GNU-Linux/Software/mkDocs/getting-started/#with-pip","text":"Material for MkDocs can be installed with pip : Material for MkDocs pip install mkdocs-material Insiders pip install git+https:// ${ GH_TOKEN } @github.com/squidfunk/mkdocs-material-insiders.git This will automatically install compatible versions of all dependencies: MkDocs , Markdown , Pygments and Python Markdown Extensions . Material for MkDocs always strives to support the latest versions, so there's no need to install those packages separately. Note that in order to install Material for MkDocs Insiders , you'll need to become a sponsor , create a personal access token 1 , and set the GH_TOKEN environment variable to the token's value.","title":"with pip"},{"location":"kb/GNU-Linux/Software/mkDocs/getting-started/#with-docker","text":"The official Docker image is a great way to get up and running in a few minutes, as it comes with all dependencies pre-installed. Pull the image for the latest version with: Material for MkDocs docker pull squidfunk/mkdocs-material Insiders docker login -u ${GH_USERNAME} -p ${GH_TOKEN} ghcr.io docker pull ghcr.io/squidfunk/mkdocs-material-insiders The mkdocs executable is provided as an entry point and serve is the default command. If you're not familiar with Docker don't worry, we have you covered in the following sections. The following plugins are bundled with the Docker image: mkdocs-minify-plugin mkdocs-redirects Note that in order to install Material for MkDocs Insiders , you'll need to become a sponsor , create a personal access token 2 , and set the GH_TOKEN environment variable to the token's value. How can I add plugins to the Docker image? Material for MkDocs bundles useful and common plugins while trying not to blow up the size of the official image. If the plugin you want to use is not included, create a new Dockerfile and extend the official Docker image with your custom installation routine: FROM squidfunk/mkdocs-material RUN pip install ... Next, you can build the image with the following command: docker build -t squidfunk/mkdocs-material . The new image can be used exactly like the official image.","title":"with docker"},{"location":"kb/GNU-Linux/Software/mkDocs/getting-started/#with-git","text":"Material for MkDocs can be directly used from GitHub by cloning the repository into a subfolder of your project root which might be useful if you want to use the very latest version: Material for MkDocs git clone https://github.com/squidfunk/mkdocs-material.git Insiders git clone git@github.com:squidfunk/mkdocs-material-insiders.git mkdocs-material The theme will reside in the folder mkdocs-material/material . When cloning from git , you must install all required dependencies yourself: pip install -r mkdocs-material/requirements.txt Note that in order to install Material for MkDocs Insiders , you'll need to become a sponsor . In order to use pip to install from the private repository over HTTPS, the personal access token requires the repo scope. The creation and usage of an access token is only necessary when installing Insiders over HTTPS, which is the recommended way when building from within a CI/CD workflow, e.g. using GitHub Pages or GitLab Pages . \u21a9 If you want to use docker to pull the private Docker image from the GitHub Container Registry , the personal access token requires the read:packages scope. Note that you need to login before pulling the Docker image. As an example, see the publish workflow of the Material for MkDocs repository. \u21a9","title":"with git"},{"location":"kb/GNU-Linux/Software/mkDocs/insiders/","text":"Insiders \u00b6 Material for MkDocs uses the sponsorware release strategy, which means that new features are first exclusively released to sponsors as part of Material for MkDocs Insiders . Read on to learn how sponsorship works , and how you can become a sponsor . A demo is worth a thousand words \u2014 check it out at squidfunk.github.io/mkdocs-material-insiders How sponsorship works \u00b6 New features will first land in Material for MkDocs Insiders, which means that sponsors will have access immediately . Every feature is tied to a funding goal in monthly subscriptions. If a funding goal is hit, the features that are tied to it are merged back into Material for MkDocs and released for general availability. Bugfixes will always be released simultaneously in both editions. See the roadmap for a list of already available and upcoming features, and for demonstration purposes, the official documentation built with Material for MkDocs Insiders. Join awesome sponsors You can sponsor publicly or privately. As a public sponsor, you'll be listed here with your GitHub avatar, showing your support for Material for MkDocs! Become a sponsor fetch(\"https://gpiqp43wvb.execute-api.us-east-1.amazonaws.com/_/\").then(function(e){return e.json()}).then(function(e){var t=document.querySelector(\".tx-sponsor__list\"),n=0;for(var o of e.sponsors)if(\"PUBLIC\"===o.type){var s;(s=document.createElement(\"a\")).href=o.url,s.title=\"@\"+o.name,s.className=\"tx-sponsor__item\",t.appendChild(s);var r=document.createElement(\"img\");r.src=o.image,s.appendChild(r)}else n++;(s=document.createElement(\"a\")).href=\"https://github.com/sponsors/squidfunk\",s.title=\"[private]\",s.innerText=\"+\"+n,s.className=\"tx-sponsor__item tx-sponsor__item--private\",t.appendChild(s),document.querySelector(\".tx-sponsor__count\").innerText=e.sponsors.length,document.querySelector(\".tx-sponsor\").removeAttribute(\"hidden\")}).catch(console.log); .tx-sponsor { margin: 2em 0; } .tx-sponsor .md-button { background-color: #e91e63; border-color: #e91e63; } .tx-sponsor__list { overflow: auto; } .tx-sponsor__item { display: block; float: left; width: 3.2rem; height: 3.2rem; margin: 0.1rem; border-radius: 100%; overflow: hidden; } .tx-sponsor__item img { display: block; width: 100%; height: auto; } .md-typeset .tx-sponsor__item--private { background: #CCC; color: #666; font-size: 1.2rem; line-height: 3.2rem; text-align: center; font-weight: bold; } How to become a sponsor \u00b6 So you've decided to become a sponsor? Great! You're just three easy steps away from enjoying the latest features of Material for MkDocs Insiders. Complete the following steps and you're in: Visit squidfunk's sponsor profile and pick a tier that includes exclusive access to squidfunk's sponsorware, which is any tier from $10/month . Select the tier and complete the checkout. Within 24 hours, you will become a collaborator of the private Material for MkDocs Insiders GitHub repository, a fork of Material for MkDocs with brand new and exclusive features . Create a personal access token , which allows installing Material for MkDocs Insiders from any destination, including other CI providers like GitLab or Bitbucket . Congratulations! You're now officially a sponsor and will get updates for Material for MkDocs Insiders, until you decide to cancel your monthly subscription, which you can do at any time. Available features \u00b6 The following list shows which features are currently only available in Material for MkDocs Insiders. You can click on each feature to learn more about it: Remove Made with Material for MkDocs from footer Support for user-toggleable themes (light/dark mode switch) Support for deploying multiple versions Support for deploying multiple languages Search suggestions help to save keystrokes Highlighting of matched search terms in content area Search goes to first result on Enter (I'm feeling lucky) Navigation can be grouped into sections Navigation can be always expanded Navigation and table of contents can be hidden Table of contents can be integrated into navigation Header can be automatically hidden on scrolling Support for Admonitions as inline blocks Roadmap \u00b6 The following list of funding goals \u2013 named after varieties of chili peppers I'm growing on my balcony \u2013 shows which features are already available in Material for MkDocs Insiders. Madame Jeanette \u00b6 Funding goal: $500 \u00b7 Status: Generally available Improved search result grouping (pages + headings) Improved search result relevance and scoring Display of missing query terms in search results Prairie Fire \u00b6 Funding goal: $1,000 \u00b7 Status: Insiders only Navigation can be grouped into sections Navigation can be always expanded Navigation and table of contents can be hidden Table of contents can be integrated into navigation Header can be automatically hidden on scrolling Bhut Jolokia \u00b6 Funding goal: $1,500 \u00b7 Status: Insiders only Support for Admonitions as inline blocks Support for deploying multiple versions Support for deploying multiple languages Black Pearl \u00b6 Funding goal: $2,000 \u00b7 Status: Insiders only Support for user-toggleable themes (light/dark mode switch) Support for user-toggleable code-block styles (light/dark mode switch) Table of contents auto-collapses and expands only the active section Biquinho Vermelho \u00b6 Funding goal: $2,500 \u00b7 Status: Insiders only Search suggestions help to save keystrokes Highlighting of matched search terms in content area Search goes to first result on Enter (I'm feeling lucky) Table of contents shows which sections have search results Support for displaying a user's last searches Improved search result summaries Caribbean Red \u00b6 Funding goal: $3,000 \u00b7 Status: Insiders only Remove Made with Material for MkDocs from footer Brand-new and exclusive vertical layout Frequently asked questions \u00b6 Compatibility \u00b6 We're running an open source project and want to make sure that users can build the documentation without having access to Insiders. Is that still possible? Yes. Material for MkDocs Insiders strives to be compatible with Material for MkDocs, so all new features are implemented as feature flags and all improvements (e.g. search) do not require any changes to existing configuration. This means that your users will be able to build the docs locally with the regular version and when they push their changes to CI/CD, they will be built with Material for MkDocs Insiders. For this reason, it's recommended to install Insiders only in CI, as you don't want to expose your GH_TOKEN to users. Terms \u00b6 We're using Material for MkDocs to build the developer documentation of a commercial project. Can we use Material for MkDocs Insiders under the same terms? Yes. Whether you're an individual or a company, you may use Material for MkDocs Insiders precisely under the same terms as Material for MkDocs, which are given by the MIT license . However, we kindly ask you to respect the following guidelines: Please don't distribute the source code from Material for MkDocs Insiders. You may freely use it for public, private or commercial projects, fork it, mirror it, do whatever you want with it, but please don't release the source code, as it would cannibalize the sponsorware strategy. If you cancel your subscription, you're removed as a collaborator and will miss out on future updates of Material for MkDocs Insiders. However, you may use the latest version that's available to you as long as you like . Just remember that GitHub deletes private forks .","title":"<span hidden>Insiders</span> :logo: :material-plus: :octicons-heart-fill-24:{: .tx-heart }"},{"location":"kb/GNU-Linux/Software/mkDocs/insiders/#insiders","text":"Material for MkDocs uses the sponsorware release strategy, which means that new features are first exclusively released to sponsors as part of Material for MkDocs Insiders . Read on to learn how sponsorship works , and how you can become a sponsor . A demo is worth a thousand words \u2014 check it out at squidfunk.github.io/mkdocs-material-insiders","title":"Insiders   "},{"location":"kb/GNU-Linux/Software/mkDocs/insiders/#how-sponsorship-works","text":"New features will first land in Material for MkDocs Insiders, which means that sponsors will have access immediately . Every feature is tied to a funding goal in monthly subscriptions. If a funding goal is hit, the features that are tied to it are merged back into Material for MkDocs and released for general availability. Bugfixes will always be released simultaneously in both editions. See the roadmap for a list of already available and upcoming features, and for demonstration purposes, the official documentation built with Material for MkDocs Insiders.","title":"How sponsorship works"},{"location":"kb/GNU-Linux/Software/mkDocs/insiders/#how-to-become-a-sponsor","text":"So you've decided to become a sponsor? Great! You're just three easy steps away from enjoying the latest features of Material for MkDocs Insiders. Complete the following steps and you're in: Visit squidfunk's sponsor profile and pick a tier that includes exclusive access to squidfunk's sponsorware, which is any tier from $10/month . Select the tier and complete the checkout. Within 24 hours, you will become a collaborator of the private Material for MkDocs Insiders GitHub repository, a fork of Material for MkDocs with brand new and exclusive features . Create a personal access token , which allows installing Material for MkDocs Insiders from any destination, including other CI providers like GitLab or Bitbucket . Congratulations! You're now officially a sponsor and will get updates for Material for MkDocs Insiders, until you decide to cancel your monthly subscription, which you can do at any time.","title":"How to become a sponsor"},{"location":"kb/GNU-Linux/Software/mkDocs/insiders/#available-features","text":"The following list shows which features are currently only available in Material for MkDocs Insiders. You can click on each feature to learn more about it: Remove Made with Material for MkDocs from footer Support for user-toggleable themes (light/dark mode switch) Support for deploying multiple versions Support for deploying multiple languages Search suggestions help to save keystrokes Highlighting of matched search terms in content area Search goes to first result on Enter (I'm feeling lucky) Navigation can be grouped into sections Navigation can be always expanded Navigation and table of contents can be hidden Table of contents can be integrated into navigation Header can be automatically hidden on scrolling Support for Admonitions as inline blocks","title":"Available features"},{"location":"kb/GNU-Linux/Software/mkDocs/insiders/#roadmap","text":"The following list of funding goals \u2013 named after varieties of chili peppers I'm growing on my balcony \u2013 shows which features are already available in Material for MkDocs Insiders.","title":"Roadmap"},{"location":"kb/GNU-Linux/Software/mkDocs/insiders/#madame-jeanette","text":"Funding goal: $500 \u00b7 Status: Generally available Improved search result grouping (pages + headings) Improved search result relevance and scoring Display of missing query terms in search results","title":"Madame Jeanette"},{"location":"kb/GNU-Linux/Software/mkDocs/insiders/#prairie-fire","text":"Funding goal: $1,000 \u00b7 Status: Insiders only Navigation can be grouped into sections Navigation can be always expanded Navigation and table of contents can be hidden Table of contents can be integrated into navigation Header can be automatically hidden on scrolling","title":"Prairie Fire"},{"location":"kb/GNU-Linux/Software/mkDocs/insiders/#bhut-jolokia","text":"Funding goal: $1,500 \u00b7 Status: Insiders only Support for Admonitions as inline blocks Support for deploying multiple versions Support for deploying multiple languages","title":"Bhut Jolokia"},{"location":"kb/GNU-Linux/Software/mkDocs/insiders/#black-pearl","text":"Funding goal: $2,000 \u00b7 Status: Insiders only Support for user-toggleable themes (light/dark mode switch) Support for user-toggleable code-block styles (light/dark mode switch) Table of contents auto-collapses and expands only the active section","title":"Black Pearl"},{"location":"kb/GNU-Linux/Software/mkDocs/insiders/#biquinho-vermelho","text":"Funding goal: $2,500 \u00b7 Status: Insiders only Search suggestions help to save keystrokes Highlighting of matched search terms in content area Search goes to first result on Enter (I'm feeling lucky) Table of contents shows which sections have search results Support for displaying a user's last searches Improved search result summaries","title":"Biquinho Vermelho"},{"location":"kb/GNU-Linux/Software/mkDocs/insiders/#caribbean-red","text":"Funding goal: $3,000 \u00b7 Status: Insiders only Remove Made with Material for MkDocs from footer Brand-new and exclusive vertical layout","title":"Caribbean Red"},{"location":"kb/GNU-Linux/Software/mkDocs/insiders/#frequently-asked-questions","text":"","title":"Frequently asked questions"},{"location":"kb/GNU-Linux/Software/mkDocs/insiders/#compatibility","text":"We're running an open source project and want to make sure that users can build the documentation without having access to Insiders. Is that still possible? Yes. Material for MkDocs Insiders strives to be compatible with Material for MkDocs, so all new features are implemented as feature flags and all improvements (e.g. search) do not require any changes to existing configuration. This means that your users will be able to build the docs locally with the regular version and when they push their changes to CI/CD, they will be built with Material for MkDocs Insiders. For this reason, it's recommended to install Insiders only in CI, as you don't want to expose your GH_TOKEN to users.","title":"Compatibility"},{"location":"kb/GNU-Linux/Software/mkDocs/insiders/#terms","text":"We're using Material for MkDocs to build the developer documentation of a commercial project. Can we use Material for MkDocs Insiders under the same terms? Yes. Whether you're an individual or a company, you may use Material for MkDocs Insiders precisely under the same terms as Material for MkDocs, which are given by the MIT license . However, we kindly ask you to respect the following guidelines: Please don't distribute the source code from Material for MkDocs Insiders. You may freely use it for public, private or commercial projects, fork it, mirror it, do whatever you want with it, but please don't release the source code, as it would cannibalize the sponsorware strategy. If you cancel your subscription, you're removed as a collaborator and will miss out on future updates of Material for MkDocs Insiders. However, you may use the latest version that's available to you as long as you like . Just remember that GitHub deletes private forks .","title":"Terms"},{"location":"kb/GNU-Linux/Software/mkDocs/publishing-your-site/","text":"Publishing your site \u00b6 The great thing about hosting project documentation in a git repository is the ability to deploy it automatically when new changes are pushed. MkDocs makes this ridiculously simple. GitHub Pages \u00b6 If you're already hosting your code on GitHub, GitHub Pages is certainly the most convenient way to publish your project documentation. It's free of charge and pretty easy to set up. with GitHub Actions \u00b6 Using GitHub Actions you can automate the deployment of your project documentation. At the root of your repository, create a new GitHub Actions workflow, e.g. .github/workflows/ci.yml , and copy and paste the following contents: Material for MkDocs name : ci on : push : branches : - master - main jobs : deploy : runs-on : ubuntu-latest steps : - uses : actions/checkout@v2 - uses : actions/setup-python@v2 with : python-version : 3.x - run : pip install mkdocs-material - run : mkdocs gh-deploy --force Insiders name : ci on : push : branches : - master - main jobs : deploy : runs-on : ubuntu-latest if : github.event.pull_request.head.repo.fork == false steps : - uses : actions/checkout@v2 - uses : actions/setup-python@v2 with : python-version : 3.x - run : pip install git+https://${GH_TOKEN}@github.com/squidfunk/mkdocs-material-insiders.git - run : mkdocs gh-deploy --force env : GH_TOKEN : ${{ secrets.GH_TOKEN }} Now, when a new commit is pushed to either the master or main branches, the static site is automatically built and deployed. Commit and push the file to your repository to see the workflow in action. Your documentation should shortly appear at <username>.github.io/<repository> . Remember to set the GH_TOKEN environment variable to the value of your personal access token when using Material for MkDocs Insiders , which can be done using secrets . with MkDocs \u00b6 If you prefer to deploy your project documentation manually, you can just invoke the following command from the directory containing the mkdocs.yml file: mkdocs gh-deploy --force GitLab Pages \u00b6 If you're hosting your code on GitLab, deploying to GitLab Pages can be done by using the GitLab CI task runner. At the root of your repository, create a task definition named .gitlab-ci.yml and copy and paste the following contents: Material for MkDocs image : python:latest pages : stage : deploy only : - master script : - pip install mkdocs-material - mkdocs build --site-dir public artifacts : paths : - public Insiders image : python:latest deploy : stage : deploy only : - master script : - pip install git+https://${GH_TOKEN}@github.com/squidfunk/mkdocs-material-insiders.git - mkdocs build --site-dir public artifacts : paths : - public Now, when a new commit is pushed to master , the static site is automatically built and deployed. Commit and push the file to your repository to see the workflow in action. Your documentation should shortly appear at <username>.gitlab.io/<repository> . Remember to set the GH_TOKEN environment variable to the value of your personal access token when using Material for MkDocs Insiders , which can be done using masked custom variables .","title":"Publishing your site"},{"location":"kb/GNU-Linux/Software/mkDocs/publishing-your-site/#publishing-your-site","text":"The great thing about hosting project documentation in a git repository is the ability to deploy it automatically when new changes are pushed. MkDocs makes this ridiculously simple.","title":"Publishing your site"},{"location":"kb/GNU-Linux/Software/mkDocs/publishing-your-site/#github-pages","text":"If you're already hosting your code on GitHub, GitHub Pages is certainly the most convenient way to publish your project documentation. It's free of charge and pretty easy to set up.","title":"GitHub Pages"},{"location":"kb/GNU-Linux/Software/mkDocs/publishing-your-site/#with-github-actions","text":"Using GitHub Actions you can automate the deployment of your project documentation. At the root of your repository, create a new GitHub Actions workflow, e.g. .github/workflows/ci.yml , and copy and paste the following contents: Material for MkDocs name : ci on : push : branches : - master - main jobs : deploy : runs-on : ubuntu-latest steps : - uses : actions/checkout@v2 - uses : actions/setup-python@v2 with : python-version : 3.x - run : pip install mkdocs-material - run : mkdocs gh-deploy --force Insiders name : ci on : push : branches : - master - main jobs : deploy : runs-on : ubuntu-latest if : github.event.pull_request.head.repo.fork == false steps : - uses : actions/checkout@v2 - uses : actions/setup-python@v2 with : python-version : 3.x - run : pip install git+https://${GH_TOKEN}@github.com/squidfunk/mkdocs-material-insiders.git - run : mkdocs gh-deploy --force env : GH_TOKEN : ${{ secrets.GH_TOKEN }} Now, when a new commit is pushed to either the master or main branches, the static site is automatically built and deployed. Commit and push the file to your repository to see the workflow in action. Your documentation should shortly appear at <username>.github.io/<repository> . Remember to set the GH_TOKEN environment variable to the value of your personal access token when using Material for MkDocs Insiders , which can be done using secrets .","title":"with GitHub Actions"},{"location":"kb/GNU-Linux/Software/mkDocs/publishing-your-site/#with-mkdocs","text":"If you prefer to deploy your project documentation manually, you can just invoke the following command from the directory containing the mkdocs.yml file: mkdocs gh-deploy --force","title":"with MkDocs"},{"location":"kb/GNU-Linux/Software/mkDocs/publishing-your-site/#gitlab-pages","text":"If you're hosting your code on GitLab, deploying to GitLab Pages can be done by using the GitLab CI task runner. At the root of your repository, create a task definition named .gitlab-ci.yml and copy and paste the following contents: Material for MkDocs image : python:latest pages : stage : deploy only : - master script : - pip install mkdocs-material - mkdocs build --site-dir public artifacts : paths : - public Insiders image : python:latest deploy : stage : deploy only : - master script : - pip install git+https://${GH_TOKEN}@github.com/squidfunk/mkdocs-material-insiders.git - mkdocs build --site-dir public artifacts : paths : - public Now, when a new commit is pushed to master , the static site is automatically built and deployed. Commit and push the file to your repository to see the workflow in action. Your documentation should shortly appear at <username>.gitlab.io/<repository> . Remember to set the GH_TOKEN environment variable to the value of your personal access token when using Material for MkDocs Insiders , which can be done using masked custom variables .","title":"GitLab Pages"},{"location":"kb/GNU-Linux/Software/mkDocs/troubleshooting/","text":"Troubleshooting \u00b6 Theme not recognized \u00b6 Operating systems: Error: Unrecognized theme mkdocs serve # => INFO - Building documentation... # => ERROR - Config value: 'theme'. Error: Unrecognised theme 'material'. # => ... # => ConfigurationError: Aborted with 1 Configuration Errors! If you run into this error, the most common reason is that you installed MkDocs through some package manager (e.g. brew or apt-get ) and Material for MkDocs through pip , so both packages end up in different locations. MkDocs only checks its install location for themes. Inadequate permissions \u00b6 Operating systems: Error: Permission denied pip install mkdocs-material # => Could not install packages due to an EnvironmentError: [Errno 13] Permission denied: '...' # => Consider using the --user option or check the permissions. When you're running the pre-installed version of Python on macOS, pip tries to install packages in a folder for which your user might not have the adequate permissions. There are three possible solutions for this, the recommended one of which is to use virtual environments: Virtual environments If you're installing Material for MkDocs with pip , the easiest way to make sure that you end up with the correct versions and without any incompatibility problems between packages it to use a virtual environment . First, ensure that you have a Python version of 3 or higher installed: python --version If you're good to go, create and activate a virtual environment with: python -m venv venv source ./venv/bin/activate Note that the second venv is the name of the folder where to create the virtual environment \u2013 you may choose it as you like. Your terminal should now print (venv) before the prompt and the python executable should be located inside the folder you just created. Next, install Material for MkDocs with pip , which will download and install all packages in the venv folder you just created, including MkDocs and its dependencies: pip install mkdocs-material Verify that MkDocs and Material for MkDocs were both installed correctly: mkdocs --version mkdocs serve --help MkDocs should list material as an option under the --theme flag. When you're finished working with MkDocs, you can exit the virtual environment with: deactivate User space Provide the --user flag to the install command and pip will install the package in a user-site location. While this is not a global installation, it's still not isolated and may lead to problems when you use different versions of Material for MkDocs in other projects: pip install --user mkdocs-material Upgrade Python Upgrade your Python installation by installing Python with Homebrew . This should eliminate a lot of problems you will run into with pip . Yet, it's still not an isolated installation which may also lead to the same problems as installing in user space: brew upgrade python","title":"Troubleshooting"},{"location":"kb/GNU-Linux/Software/mkDocs/troubleshooting/#troubleshooting","text":"","title":"Troubleshooting"},{"location":"kb/GNU-Linux/Software/mkDocs/troubleshooting/#theme-not-recognized","text":"Operating systems: Error: Unrecognized theme mkdocs serve # => INFO - Building documentation... # => ERROR - Config value: 'theme'. Error: Unrecognised theme 'material'. # => ... # => ConfigurationError: Aborted with 1 Configuration Errors! If you run into this error, the most common reason is that you installed MkDocs through some package manager (e.g. brew or apt-get ) and Material for MkDocs through pip , so both packages end up in different locations. MkDocs only checks its install location for themes.","title":"Theme not recognized"},{"location":"kb/GNU-Linux/Software/mkDocs/troubleshooting/#inadequate-permissions","text":"Operating systems: Error: Permission denied pip install mkdocs-material # => Could not install packages due to an EnvironmentError: [Errno 13] Permission denied: '...' # => Consider using the --user option or check the permissions. When you're running the pre-installed version of Python on macOS, pip tries to install packages in a folder for which your user might not have the adequate permissions. There are three possible solutions for this, the recommended one of which is to use virtual environments: Virtual environments If you're installing Material for MkDocs with pip , the easiest way to make sure that you end up with the correct versions and without any incompatibility problems between packages it to use a virtual environment . First, ensure that you have a Python version of 3 or higher installed: python --version If you're good to go, create and activate a virtual environment with: python -m venv venv source ./venv/bin/activate Note that the second venv is the name of the folder where to create the virtual environment \u2013 you may choose it as you like. Your terminal should now print (venv) before the prompt and the python executable should be located inside the folder you just created. Next, install Material for MkDocs with pip , which will download and install all packages in the venv folder you just created, including MkDocs and its dependencies: pip install mkdocs-material Verify that MkDocs and Material for MkDocs were both installed correctly: mkdocs --version mkdocs serve --help MkDocs should list material as an option under the --theme flag. When you're finished working with MkDocs, you can exit the virtual environment with: deactivate User space Provide the --user flag to the install command and pip will install the package in a user-site location. While this is not a global installation, it's still not isolated and may lead to problems when you use different versions of Material for MkDocs in other projects: pip install --user mkdocs-material Upgrade Python Upgrade your Python installation by installing Python with Homebrew . This should eliminate a lot of problems you will run into with pip . Yet, it's still not an isolated installation which may also lead to the same problems as installing in user space: brew upgrade python","title":"Inadequate permissions"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/","text":"Upgrading \u00b6 Upgrade to the latest version with: pip install --upgrade mkdocs-material Inspect the currently installed version with: pip show mkdocs-material Upgrading from 5.x to 6.x \u00b6 What's new? \u00b6 Improved search result look and feel Improved search result stability while typing Improved search result grouping (pages + headings) Improved search result relevance and scoring Added display of missing query terms to search results Reduced size of vendor bundle by 25% (84kb \u2192 67kb) Reduced size of the Docker image to improve CI build performance Removed hero partial in favor of custom implementation Removed deprecated front matter features Changes to mkdocs.yml \u00b6 Following is a list of changes that need to be made to mkdocs.yml . Note that you only have to adjust the value if you defined it, so if your configuration does not contain the key, you can skip it. theme.features \u00b6 All feature flags that can be set from mkdocs.yml , like tabs and instant loading , are now prefixed with the name of the component or function they apply to, e.g. navigation.* : 6.x theme : features : - navigation.tabs - navigation.instant 5.x theme : features : - tabs - instant Changes to *.html files \u00b6 The templates have undergone a set of changes to make them future-proof. If you've used theme extension to override a block or template, make sure that it matches the new structure: If you've overridden a block , check base.html for potential changes If you've overridden a template , check the respective *.html file for potential changes base.html @@ -22,13 +22,6 @@ {% import \"partials/language.html\" as lang with context %} -<!-- Theme options --> -{% set palette = config.theme.palette %} -{% if not palette is mapping %} - {% set palette = palette | first %} -{% endif %} -{% set font = config.theme.font %} - <!doctype html> <html lang=\"{{ lang.t('language') }}\" class=\"no-js\"> <head> @@ -45,21 +38,8 @@ <meta name=\"description\" content=\"{{ config.site_description }}\" /> {% endif %} - <!-- Redirect --> - {% if page and page.meta and page.meta.redirect %} - <script> - var anchor = window.location.hash.substr(1) - location.href = '{{ page.meta.redirect }}' + - (anchor ? '#' + anchor : '') - </script> - - <!-- Fallback in case JavaScript is not available --> - <meta http-equiv=\"refresh\" content=\"0; url={{ page.meta.redirect }}\" /> - <meta name=\"robots\" content=\"noindex\" /> - <link rel=\"canonical\" href=\"{{ page.meta.redirect }}\" /> - <!-- Canonical --> - {% elif page.canonical_url %} + {% if page.canonical_url %} <link rel=\"canonical\" href=\"{{ page.canonical_url }}\" /> {% endif %} @@ -96,20 +76,21 @@ <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/main.css' | url }}\" /> <!-- Extra color palette --> - {% if palette.scheme or palette.primary or palette.accent %} + {% if config.theme.palette %} + {% set palette = config.theme.palette %} <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/palette.css' | url }}\" /> - {% endif %} - <!-- Theme-color meta tag for Android --> - {% if palette.primary %} - {% import \"partials/palette.html\" as map %} - {% set primary = map.primary( - palette.primary | replace(\" \", \"-\") | lower - ) %} - <meta name=\"theme-color\" content=\"{{ primary }}\" /> + <!-- Theme-color meta tag for Android --> + {% if palette.primary %} + {% import \"partials/palette.html\" as map %} + {% set primary = map.primary( + palette.primary | replace(\" \", \"-\") | lower + ) %} + <meta name=\"theme-color\" content=\"{{ primary }}\" /> + {% endif %} {% endif %} {% endblock %} @@ -120,7 +101,8 @@ {% block fonts %} <!-- Load fonts from Google --> - {% if font != false %} + {% if config.theme.font != false %} + {% set font = config.theme.font %} <link href=\"https://fonts.gstatic.com\" rel=\"preconnect\" crossorigin /> <link rel=\"stylesheet\" @@ -169,8 +151,12 @@ <!-- Text direction and color palette, if defined --> {% set direction = config.theme.direction or lang.t('direction') %} - {% if palette.scheme or palette.primary or palette.accent %} - {% set scheme = palette.scheme | lower %} + {% if config.theme.palette %} + {% set palette = config.theme.palette %} + {% if not palette is mapping %} + {% set palette = palette | first %} + {% endif %} + {% set scheme = palette.scheme | replace(\" \", \"-\") | lower %} {% set primary = palette.primary | replace(\" \", \"-\") | lower %} {% set accent = palette.accent | replace(\" \", \"-\") | lower %} <body @@ -179,18 +165,19 @@ data-md-color-primary=\"{{ primary }}\" data-md-color-accent=\"{{ accent }}\" > + + <!-- Experimental: set color scheme based on preference --> + {% if \"preference\" == scheme %} + <script> + if (matchMedia(\"(prefers-color-scheme: dark)\").matches) + document.body.setAttribute(\"data-md-color-scheme\", \"slate\") + </script> + {% endif %} + {% else %} <body dir=\"{{ direction }}\"> {% endif %} - <!-- Experimental: set color scheme based on preference --> - {% if \"preference\" == palette.scheme %} - <script> - if (matchMedia(\"(prefers-color-scheme: dark)\").matches) - document.body.setAttribute(\"data-md-color-scheme\", \"slate\") - </script> - {% endif %} - <!-- State toggles - we need to set autocomplete=\"off\" in order to reset the drawer on back button invocation in some browsers @@ -243,15 +230,11 @@ <div class=\"md-container\" data-md-component=\"container\"> <!-- Hero teaser --> - {% block hero %} - {% if page and page.meta and page.meta.hero %} - {% include \"partials/hero.html\" with context %} - {% endif %} - {% endblock %} + {% block hero %}{% endblock %} <!-- Tabs navigation --> {% block tabs %} - {% if \"tabs\" in config.theme.features %} + {% if \"navigation.tabs\" in config.theme.features %} {% include \"partials/tabs.html\" %} {% endif %} {% endblock %} @@ -310,13 +293,6 @@ </a> {% endif %} - <!-- Link to source file --> - {% block source %} - {% if page and page.meta and page.meta.source %} - {% include \"partials/source-link.html\" %} - {% endif %} - {% endblock %} - <!-- Hack: check whether the content contains a h1 headline. If it doesn't, the page title (or respectively site name) is used @@ -370,7 +346,10 @@ \"search.result.placeholder\", \"search.result.none\", \"search.result.one\", - \"search.result.other\" + \"search.result.other\", + \"search.result.more.one\", + \"search.result.more.other\", + \"search.result.term.missing\" ] -%} {%- set _ = translations.update({ key: lang.t(key) }) -%} {%- endfor -%} partials/hero.html @@ -1,12 +0,0 @@ -{#- - This file was automatically generated - do not edit --#} -{% set class = \"md-hero\" %} -{% if \"tabs\" not in config.theme.features %} - {% set class = \"md-hero md-hero--expand\" %} -{% endif %} -<div class=\"{{ class }}\" data-md-component=\"hero\"> - <div class=\"md-hero__inner md-grid\"> - {{ page.meta.hero }} - </div> -</div> partials/source-link -{#- - This file was automatically generated - do not edit --#} -{% import \"partials/language.html\" as lang with context %} -{% set repo = config.repo_url %} -{% if repo | last == \"/\" %} - {% set repo = repo[:-1] %} -{% endif %} -{% set path = page.meta.path | default(\"\") %} -<a href=\"{{ [repo, path, page.meta.source] | join('/') }}\" title=\"{{ page.meta.source }}\" class=\"md-content__button md-icon\"> - {{ lang.t(\"meta.source\") }} - {% set icon = config.theme.icon.repo or \"fontawesome/brands/git-alt\" %} - {% include \".icons/\" ~ icon ~ \".svg\" %} -</a> Upgrading from 4.x to 5.x \u00b6 What's new? \u00b6 Reactive architecture \u2013 try app . dialog$ . next ( \"Hi!\" ) in the console Instant loading \u2013 make Material behave like a Single Page Application Improved CSS customization with CSS variables \u2013 set your brand's colors Improved CSS resilience, e.g. proper sidebar locking for customized headers Improved icon integration and configuration \u2013 now including over 5k icons Added possibility to use any icon for logo, repository and social links Search UI does not freeze anymore (moved to web worker) Search index built only once when using instant loading Improved extensible keyboard handling Support for prebuilt search indexes Support for displaying stars and forks for GitLab repositories Support for scroll snapping of sidebars and search results Reduced HTML and CSS footprint due to deprecation of Internet Explorer support Slight facelifting of some UI elements (Admonitions, tables, ...) Changes to mkdocs.yml \u00b6 Following is a list of changes that need to be made to mkdocs.yml . Note that you only have to adjust the value if you defined it, so if your configuration does not contain the key, you can skip it. theme.feature \u00b6 Optional features like tabs and instant loading are now implemented as flags and can be enabled by listing them in mkdocs.yml under theme.features : 5.x theme : features : - tabs - instant 4.x theme : feature : tabs : true theme.logo.icon \u00b6 The logo icon configuration was centralized under theme.icon.logo and can now be set to any of the icons bundled with the theme : 5.x theme : icon : logo : material/cloud 4.x theme : logo : icon : cloud extra.repo_icon \u00b6 The repo icon configuration was centralized under theme.icon.repo and can now be set to any of the icons bundled with the theme : 5.x theme : icon : repo : fontawesome/brands/gitlab 4.x extra : repo_icon : gitlab extra.search.* \u00b6 Search is now configured as part of the plugin options . Note that the search languages must now be listed as an array of strings and the tokenizer was renamed to separator : 5.x plugins : - search : separator : '[\\s\\-\\.]+' lang : - en - de - ru 4.x extra : search : language : en, de, ru tokenizer : '[\\s\\-\\.]+' extra.social.* \u00b6 Social links stayed in the same place, but the type key was renamed to icon in order to match the new way of specifying which icon to be used: 5.x extra : social : - icon : fontawesome/brands/github-alt link : https://github.com/squidfunk 4.x extra : social : - type : github link : https://github.com/squidfunk Changes to *.html files \u00b6 The templates have undergone a set of changes to make them future-proof. If you've used theme extension to override a block or template, make sure that it matches the new structure: If you've overridden a block , check base.html for potential changes If you've overridden a template , check the respective *.html file for potential changes base.html @@ -2,7 +2,6 @@ This file was automatically generated - do not edit -#} {% import \"partials/language.html\" as lang with context %} -{% set feature = config.theme.feature %} {% set palette = config.theme.palette %} {% set font = config.theme.font %} <!doctype html> @@ -30,19 +29,6 @@ {% elif config.site_author %} <meta name=\"author\" content=\"{{ config.site_author }}\"> {% endif %} - {% for key in [ - \"clipboard.copy\", - \"clipboard.copied\", - \"search.language\", - \"search.pipeline.stopwords\", - \"search.pipeline.trimmer\", - \"search.result.none\", - \"search.result.one\", - \"search.result.other\", - \"search.tokenizer\" - ] %} - <meta name=\"lang:{{ key }}\" content=\"{{ lang.t(key) }}\"> - {% endfor %} <link rel=\"shortcut icon\" href=\"{{ config.theme.favicon | url }}\"> <meta name=\"generator\" content=\"mkdocs-{{ mkdocs_version }}, mkdocs-material-5.0.0\"> {% endblock %} @@ -56,9 +42,9 @@ {% endif %} {% endblock %} {% block styles %} - <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/application.********.css' | url }}\"> + <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/main.********.min.css' | url }}\"> {% if palette.primary or palette.accent %} - <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/application-palette.********.css' | url }}\"> + <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/palette.********.min.css' | url }}\"> {% endif %} {% if palette.primary %} {% import \"partials/palette.html\" as map %} @@ -69,20 +55,17 @@ {% endif %} {% endblock %} {% block libs %} - <script src=\"{{ 'assets/javascripts/modernizr.********.js' | url }}\"></script> {% endblock %} {% block fonts %} {% if font != false %} <link href=\"https://fonts.gstatic.com\" rel=\"preconnect\" crossorigin> <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family={{ font.text | replace(' ', '+') + ':300,400,400i,700%7C' + font.code | replace(' ', '+') }}&display=fallback\"> <style>body,input{font-family:\"{{ font.text }}\",\"Helvetica Neue\",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:\"{{ font.code }}\",\"Courier New\",Courier,monospace}</style> {% endif %} {% endblock %} - <link rel=\"stylesheet\" href=\"{{ 'assets/fonts/material-icons.css' | url }}\"> {% if config.extra.manifest %} <link rel=\"manifest\" href=\"{{ config.extra.manifest | url }}\" crossorigin=\"use-credentials\"> {% endif %} @@ -95,47 +77,50 @@ {% endblock %} {% block extrahead %}{% endblock %} </head> + {% set direction = config.theme.direction | default(lang.t('direction')) %} {% if palette.primary or palette.accent %} {% set primary = palette.primary | replace(\" \", \"-\") | lower %} {% set accent = palette.accent | replace(\" \", \"-\") | lower %} - <body dir=\"{{ lang.t('direction') }}\" data-md-color-primary=\"{{ primary }}\" data-md-color-accent=\"{{ accent }}\"> + <body dir=\"{{ direction }}\" data-md-color-primary=\"{{ primary }}\" data-md-color-accent=\"{{ accent }}\"> {% else %} - <body dir=\"{{ lang.t('direction') }}\"> + <body dir=\"{{ direction }}\"> {% endif %} - <svg class=\"md-svg\"> - <defs> - {% set platform = config.extra.repo_icon or config.repo_url %} - {% if \"github\" in platform %} - {% include \"assets/images/icons/github.f0b8504a.svg\" %} - {% elif \"gitlab\" in platform %} - {% include \"assets/images/icons/gitlab.6dd19c00.svg\" %} - {% elif \"bitbucket\" in platform %} - {% include \"assets/images/icons/bitbucket.1b09e088.svg\" %} - {% endif %} - </defs> - </svg> <input class=\"md-toggle\" data-md-toggle=\"drawer\" type=\"checkbox\" id=\"__drawer\" autocomplete=\"off\"> <input class=\"md-toggle\" data-md-toggle=\"search\" type=\"checkbox\" id=\"__search\" autocomplete=\"off\"> - <label class=\"md-overlay\" data-md-component=\"overlay\" for=\"__drawer\"></label> + <label class=\"md-overlay\" for=\"__drawer\"></label> + <div data-md-component=\"skip\"> + {% if page.toc | first is defined %} + {% set skip = page.toc | first %} + <a href=\"{{ skip.url | url }}\" class=\"md-skip\"> + {{ lang.t('skip.link.title') }} + </a> + {% endif %} + </div> + <div data-md-component=\"announce\"> + {% if self.announce() %} + <aside class=\"md-announce\"> + <div class=\"md-announce__inner md-grid md-typeset\"> + {% block announce %}{% endblock %} + </div> + </aside> + {% endif %} + </div> {% block header %} {% include \"partials/header.html\" %} {% endblock %} - <div class=\"md-container\"> + <div class=\"md-container\" data-md-component=\"container\"> {% block hero %} {% if page and page.meta and page.meta.hero %} {% include \"partials/hero.html\" with context %} {% endif %} {% endblock %} - {% if feature.tabs %} - {% include \"partials/tabs.html\" %} - {% endif %} + {% block tabs %} + {% if \"tabs\" in config.theme.features %} + {% include \"partials/tabs.html\" %} + {% endif %} + {% endblock %} - <main class=\"md-main\" role=\"main\"> - <div class=\"md-main__inner md-grid\" data-md-component=\"container\"> + <main class=\"md-main\" data-md-component=\"main\"> + <div class=\"md-main__inner md-grid\"> {% block site_nav %} {% if nav %} <div class=\"md-sidebar md-sidebar--primary\" data-md-component=\"navigation\"> @@ -160,41 +141,25 @@ <article class=\"md-content__inner md-typeset\"> {% block content %} {% if page.edit_url %} - <a href=\"{{ page.edit_url }}\" title=\"{{ lang.t('edit.link.title') }}\" class=\"md-icon md-content__icon\">&#xE3C9;</a> + <a href=\"{{ page.edit_url }}\" title=\"{{ lang.t('edit.link.title') }}\" class=\"md-content__button md-icon\"> + {% include \".icons/material/pencil.svg\" %} + </a> {% endif %} + {% block source %} + {% if page and page.meta and page.meta.source %} + {% include \"partials/source-link.html\" %} + {% endif %} + {% endblock %} {% if not \"\\x3ch1\" in page.content %} <h1>{{ page.title | default(config.site_name, true)}}</h1> {% endif %} {{ page.content }} - {% block source %} - {% if page and page.meta and page.meta.source %} - <h2 id=\"__source\">{{ lang.t(\"meta.source\") }}</h2> - {% set repo = config.repo_url %} - {% if repo | last == \"/\" %} - {% set repo = repo[:-1] %} - {% endif %} - {% set path = page.meta.path | default([\"\"]) %} - {% set file = page.meta.source %} - <a href=\"{{ [repo, path, file] | join('/') }}\" title=\"{{ file }}\" class=\"md-source-file\"> - {{ file }} - </a> - {% endif %} - {% endblock %} + {% if page and page.meta %} + {% if page.meta.git_revision_date_localized or + page.meta.revision_date + %} + {% include \"partials/source-date.html\" %} - {% if page and page.meta and ( - page.meta.git_revision_date_localized or - page.meta.revision_date - ) %} - {% set label = lang.t(\"source.revision.date\") %} - <hr> - <div class=\"md-source-date\"> - <small> - {% if page.meta.git_revision_date_localized %} - {{ label }}: <span class=\"git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago\"><span class=\"timeago\" datetime=\"2020-12-17T00:42:44+00:00\" locale=\"es\"></span></span><span class=\"git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date\">2020-12-17</span> - {% elif page.meta.revision_date %} - {{ label }}: {{ page.meta.revision_date }} - {% endif %} - </small> - </div> {% endif %} {% endblock %} {% block disqus %} @@ -208,29 +174,35 @@ {% include \"partials/footer.html\" %} {% endblock %} </div> {% block scripts %} - <script src=\"{{ 'assets/javascripts/application.********.js' | url }}\"></script> - {% if lang.t(\"search.language\") != \"en\" %} - {% set languages = lang.t(\"search.language\").split(\",\") %} - {% if languages | length and languages[0] != \"\" %} - {% set path = \"assets/javascripts/lunr/\" %} - <script src=\"{{ (path ~ 'lunr.stemmer.support.js') | url }}\"></script> - {% for language in languages | map(\"trim\") %} - {% if language != \"en\" %} - {% if language == \"ja\" %} - <script src=\"{{ (path ~ 'tinyseg.js') | url }}\"></script> - {% endif %} - {% if language in (\"ar\", \"da\", \"de\", \"es\", \"fi\", \"fr\", \"hu\", \"it\", \"ja\", \"nl\", \"no\", \"pt\", \"ro\", \"ru\", \"sv\", \"th\", \"tr\", \"vi\") %} - <script src=\"{{ (path ~ 'lunr.' ~ language ~ '.js') | url }}\"></script> - {% endif %} - {% endif %} - {% endfor %} - {% if languages | length > 1 %} - <script src=\"{{ (path ~ 'lunr.multi.js') | url }}\"></script> - {% endif %} - {% endif %} - {% endif %} - <script>app.initialize({version:\"{{ mkdocs_version }}\",url:{base:\"{{ base_url }}\"}})</script> + <script src=\"{{ 'assets/javascripts/vendor.********.min.js' | url }}\"></script> + <script src=\"{{ 'assets/javascripts/bundle.********.min.js' | url }}\"></script> + {%- set translations = {} -%} + {%- for key in [ + \"clipboard.copy\", + \"clipboard.copied\", + \"search.config.lang\", + \"search.config.pipeline\", + \"search.config.separator\", + \"search.result.placeholder\", + \"search.result.none\", + \"search.result.one\", + \"search.result.other\" + ] -%} + {%- set _ = translations.update({ key: lang.t(key) }) -%} + {%- endfor -%} + <script id=\"__lang\" type=\"application/json\"> + {{- translations | tojson -}} + </script> + {% block config %}{% endblock %} + <script> + app = initialize({ + base: \"{{ base_url }}\", + features: {{ config.theme.features | tojson }}, + search: Object.assign({ + worker: \"{{ 'assets/javascripts/worker/search.********.min.js' | url }}\" + }, typeof search !== \"undefined\" && search) + }) + </script> {% for path in config[\"extra_javascript\"] %} <script src=\"{{ path | url }}\"></script> {% endfor %} partials/footer.html @@ -5,34 +5,34 @@ <div class=\"md-footer-nav\"> - <nav class=\"md-footer-nav__inner md-grid\"> + <nav class=\"md-footer-nav__inner md-grid\" aria-label=\"{{ lang.t('footer.title') }}\"> {% if page.previous_page %} - <a href=\"{{ page.previous_page.url | url }}\" title=\"{{ page.previous_page.title | striptags }}\" class=\"md-flex md-footer-nav__link md-footer-nav__link--prev\" rel=\"prev\"> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <i class=\"md-icon md-icon--arrow-back md-footer-nav__button\"></i> + <a href=\"{{ page.previous_page.url | url }}\" title=\"{{ page.previous_page.title | striptags }}\" class=\"md-footer-nav__link md-footer-nav__link--prev\" rel=\"prev\"> + <div class=\"md-footer-nav__button md-icon\"> + {% include \".icons/material/arrow-left.svg\" %} </div> - <div class=\"md-flex__cell md-flex__cell--stretch md-footer-nav__title\"> - <span class=\"md-flex__ellipsis\"> + <div class=\"md-footer-nav__title\"> + <div class=\"md-ellipsis\"> <span class=\"md-footer-nav__direction\"> {{ lang.t(\"footer.previous\") }} </span> {{ page.previous_page.title }} - </span> + </div> </div> </a> {% endif %} {% if page.next_page %} - <a href=\"{{ page.next_page.url | url }}\" title=\"{{ page.next_page.title | striptags }}\" class=\"md-flex md-footer-nav__link md-footer-nav__link--next\" rel=\"next\"> - <div class=\"md-flex__cell md-flex__cell--stretch md-footer-nav__title\"> - <span class=\"md-flex__ellipsis\"> + <a href=\"{{ page.next_page.url | url }}\" title=\"{{ page.next_page.title | striptags }}\" class=\"md-footer-nav__link md-footer-nav__link--next\" rel=\"next\"> + <div class=\"md-footer-nav__title\"> + <div class=\"md-ellipsis\"> <span class=\"md-footer-nav__direction\"> {{ lang.t(\"footer.next\") }} </span> {{ page.next_page.title }} - </span> + </div> </div> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <i class=\"md-icon md-icon--arrow-forward md-footer-nav__button\"></i> + <div class=\"md-footer-nav__button md-icon\"> + {% include \".icons/material/arrow-right.svg\" %} </div> </a> {% endif %} partials/header.html @@ -2,51 +2,43 @@ This file was automatically generated - do not edit -#} <header class=\"md-header\" data-md-component=\"header\"> - <nav class=\"md-header-nav md-grid\"> - <div class=\"md-flex\"> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <a href=\"{{ config.site_url | default(nav.homepage.url, true) | url }}\" title=\"{{ config.site_name }}\" aria-label=\"{{ config.site_name }}\" class=\"md-header-nav__button md-logo\"> - {% if config.theme.logo.icon %} - <i class=\"md-icon\">{{ config.theme.logo.icon }}</i> - {% else %} - <img alt=\"logo\" src=\"{{ config.theme.logo | url }}\" width=\"24\" height=\"24\"> - {% endif %} - </a> - </div> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <label class=\"md-icon md-icon--menu md-header-nav__button\" for=\"__drawer\"></label> - </div> - <div class=\"md-flex__cell md-flex__cell--stretch\"> - <div class=\"md-flex__ellipsis md-header-nav__title\" data-md-component=\"title\"> - {% if config.site_name == page.title %} - {{ config.site_name }} - {% else %} - <span class=\"md-header-nav__topic\"> - {{ config.site_name }} - </span> - <span class=\"md-header-nav__topic\"> - {% if page and page.meta and page.meta.title %} - {{ page.meta.title }} - {% else %} - {{ page.title }} - {% endif %} - </span> - {% endif %} + <nav class=\"md-header-nav md-grid\" aria-label=\"{{ lang.t('header.title') }}\"> + <a href=\"{{ config.site_url | default(nav.homepage.url, true) | url }}\" title=\"{{ config.site_name }}\" class=\"md-header-nav__button md-logo\" aria-label=\"{{ config.site_name }}\"> + {% include \"partials/logo.html\" %} + </a> + <label class=\"md-header-nav__button md-icon\" for=\"__drawer\"> + {% include \".icons/material/menu\" ~ \".svg\" %} + </label> + <div class=\"md-header-nav__title\" data-md-component=\"header-title\"> + {% if config.site_name == page.title %} + <div class=\"md-header-nav__ellipsis md-ellipsis\"> + {{ config.site_name }} </div> - </div> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - {% if \"search\" in config[\"plugins\"] %} - <label class=\"md-icon md-icon--search md-header-nav__button\" for=\"__search\"></label> - {% include \"partials/search.html\" %} - {% endif %} - </div> - {% if config.repo_url %} - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <div class=\"md-header-nav__source\"> - {% include \"partials/source.html\" %} - </div> + {% else %} + <div class=\"md-header-nav__ellipsis\"> + <span class=\"md-header-nav__topic md-ellipsis\"> + {{ config.site_name }} + </span> + <span class=\"md-header-nav__topic md-ellipsis\"> + {% if page and page.meta and page.meta.title %} + {{ page.meta.title }} + {% else %} + {{ page.title }} + {% endif %} + </span> </div> {% endif %} </div> + {% if \"search\" in config[\"plugins\"] %} + <label class=\"md-header-nav__button md-icon\" for=\"__search\"> + {% include \".icons/material/magnify.svg\" %} + </label> + {% include \"partials/search.html\" %} + {% endif %} + {% if config.repo_url %} + <div class=\"md-header-nav__source\"> + {% include \"partials/source.html\" %} + </div> + {% endif %} </nav> </header> partials/hero.html @@ -1,9 +1,8 @@ {#- This file was automatically generated - do not edit -#} -{% set feature = config.theme.feature %} {% set class = \"md-hero\" %} -{% if not feature.tabs %} +{% if \"tabs\" not in config.theme.features %} {% set class = \"md-hero md-hero--expand\" %} {% endif %} <div class=\"{{ class }}\" data-md-component=\"hero\"> partials/language.html @@ -3,12 +3,4 @@ -#} {% import \"partials/language/\" + config.theme.language + \".html\" as lang %} {% import \"partials/language/en.html\" as fallback %} -{% macro t(key) %}{{ { - \"direction\": config.theme.direction, - \"search.language\": ( - config.extra.search | default({}) - ).language, - \"search.tokenizer\": ( - config.extra.search | default({}) - ).tokenizer | default(\"\", true), -}[key] or lang.t(key) or fallback.t(key) }}{% endmacro %} +{% macro t(key) %}{{ lang.t(key) | default(fallback.t(key)) }}{% endmacro %} partials/logo.html @@ -0,0 +1,9 @@ +{#- + This file was automatically generated - do not edit +-#} +{% if config.theme.logo %} + <img src=\"{{ config.theme.logo | url }}\" alt=\"logo\"> +{% else %} + {% set icon = config.theme.icon.logo or \"material/library\" %} + {% include \".icons/\" ~ icon ~ \".svg\" %} +{% endif %} partials/nav-item.html @@ -14,9 +14,15 @@ {% endif %} <label class=\"md-nav__link\" for=\"{{ path }}\"> {{ nav_item.title }} + <span class=\"md-nav__icon md-icon\"> + {% include \".icons/material/chevron-right.svg\" %} + </span> </label> - <nav class=\"md-nav\" data-md-component=\"collapsible\" data-md-level=\"{{ level }}\"> + <nav class=\"md-nav\" aria-label=\"{{ nav_item.title }}\" data-md-level=\"{{ level }}\"> <label class=\"md-nav__title\" for=\"{{ path }}\"> + <span class=\"md-nav__icon md-icon\"> + {% include \".icons/material/arrow-left.svg\" %} + </span> {{ nav_item.title }} </label> <ul class=\"md-nav__list\" data-md-scrollfix> @@ -39,6 +45,9 @@ {% if toc | first is defined %} <label class=\"md-nav__link md-nav__link--active\" for=\"__toc\"> {{ nav_item.title }} + <span class=\"md-nav__icon md-icon\"> + {% include \".icons/material/table-of-contents.svg\" %} + </span> </label> {% endif %} <a href=\"{{ nav_item.url | url }}\" title=\"{{ nav_item.title | striptags }}\" class=\"md-nav__link md-nav__link--active\"> partials/nav.html @@ -1,14 +1,10 @@ {#- This file was automatically generated - do not edit -#} -<nav class=\"md-nav md-nav--primary\" data-md-level=\"0\"> - <label class=\"md-nav__title md-nav__title--site\" for=\"__drawer\"> - <a href=\"{{ config.site_url | default(nav.homepage.url, true) | url }}\" title=\"{{ config.site_name }}\" class=\"md-nav__button md-logo\"> - {% if config.theme.logo.icon %} - <i class=\"md-icon\">{{ config.theme.logo.icon }}</i> - {% else %} - <img alt=\"logo\" src=\"{{ config.theme.logo | url }}\" width=\"48\" height=\"48\"> - {% endif %} +<nav class=\"md-nav md-nav--primary\" aria-label=\"{{ lang.t('nav.title') }}\" data-md-level=\"0\"> + <label class=\"md-nav__title\" for=\"__drawer\"> + <a href=\"{{ config.site_url | default(nav.homepage.url, true) | url }}\" title=\"{{ config.site_name }}\" class=\"md-nav__button md-logo\" aria-label=\"{{ config.site_name }}\"> + {% include \"partials/logo.html\" %} </a> {{ config.site_name }} </label> partials/search.html @@ -6,15 +6,18 @@ <label class=\"md-search__overlay\" for=\"__search\"></label> <div class=\"md-search__inner\" role=\"search\"> <form class=\"md-search__form\" name=\"search\"> - <input type=\"text\" class=\"md-search__input\" name=\"query\" aria-label=\"Search\" placeholder=\"{{ lang.t('search.placeholder') }}\" autocapitalize=\"off\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" data-md-component=\"query\" data-md-state=\"active\"> + <input type=\"text\" class=\"md-search__input\" name=\"query\" aria-label=\"{{ lang.t('search.placeholder') }}\" placeholder=\"{{ lang.t('search.placeholder') }}\" autocapitalize=\"off\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" data-md-component=\"search-query\" data-md-state=\"active\"> <label class=\"md-search__icon md-icon\" for=\"__search\"> + {% include \".icons/material/magnify.svg\" %} + {% include \".icons/material/arrow-left.svg\" %} </label> - <button type=\"reset\" class=\"md-icon md-search__icon\" data-md-component=\"reset\" tabindex=\"-1\"> - &#xE5CD; + <button type=\"reset\" class=\"md-search__icon md-icon\" aria-label=\"{{ lang.t('search.reset') }}\" data-md-component=\"search-reset\" tabindex=\"-1\"> + {% include \".icons/material/close.svg\" %} </button> </form> <div class=\"md-search__output\"> <div class=\"md-search__scrollwrap\" data-md-scrollfix> - <div class=\"md-search-result\" data-md-component=\"result\"> + <div class=\"md-search-result\" data-md-component=\"search-result\"> <div class=\"md-search-result__meta\"> {{ lang.t(\"search.result.placeholder\") }} </div> partials/social.html @@ -3,9 +3,12 @@ -#} {% if config.extra.social %} <div class=\"md-footer-social\"> - <link rel=\"stylesheet\" href=\"{{ 'assets/fonts/font-awesome.css' | url }}\"> {% for social in config.extra.social %} - <a href=\"{{ social.link }}\" target=\"_blank\" rel=\"noopener\" title=\"{{ social.type }}\" class=\"md-footer-social__link fa fa-{{ social.type }}\"></a> + {% set _,rest = social.link.split(\"//\") %} + {% set domain = rest.split(\"/\")[0] %} + <a href=\"{{ social.link }}\" target=\"_blank\" rel=\"noopener\" title=\"{{ domain }}\" class=\"md-footer-social__link\"> + {% include \".icons/\" ~ social.icon ~ \".svg\" %} + </a> {% endfor %} </div> {% endif %} partials/source-date.html @@ -0,0 +1,15 @@ +{#- + This file was automatically generated - do not edit +-#} +{% import \"partials/language.html\" as lang with context %} +{% set label = lang.t(\"source.revision.date\") %} +<hr> +<div class=\"md-source-date\"> + <small> + {% if page.meta.git_revision_date_localized %} + {{ label }}: <span class=\"git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago\"><span class=\"timeago\" datetime=\"2020-12-17T00:42:44+00:00\" locale=\"es\"></span></span><span class=\"git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date\">2020-12-17</span> + {% elif page.meta.revision_date %} + {{ label }}: {{ page.meta.revision_date }} + {% endif %} + </small> +</div> partials/source-link.html @@ -0,0 +1,13 @@ +{#- + This file was automatically generated - do not edit +-#} +{% import \"partials/language.html\" as lang with context %} +{% set repo = config.repo_url %} +{% if repo | last == \"/\" %} + {% set repo = repo[:-1] %} +{% endif %} +{% set path = page.meta.path | default([\"\"]) %} +<a href=\"{{ [repo, path, page.meta.source] | join('/') }}\" title=\"{{ file }}\" class=\"md-content__button md-icon\"> + {{ lang.t(\"meta.source\") }} + {% include \".icons/\" ~ config.theme.icon.repo ~ \".svg\" %} +</a> partials/source.html @@ -2,24 +2,11 @@ This file was automatically generated - do not edit -#} {% import \"partials/language.html\" as lang with context %} -{% set platform = config.extra.repo_icon or config.repo_url %} -{% if \"github\" in platform %} - {% set repo_type = \"github\" %} -{% elif \"gitlab\" in platform %} - {% set repo_type = \"gitlab\" %} -{% elif \"bitbucket\" in platform %} - {% set repo_type = \"bitbucket\" %} -{% else %} - {% set repo_type = \"\" %} -{% endif %} -<a href=\"{{ config.repo_url }}\" title=\"{{ lang.t('source.link.title') }}\" class=\"md-source\" data-md-source=\"{{ repo_type }}\"> - {% if repo_type %} - <div class=\"md-source__icon\"> - <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"> - <use xlink:href=\"#__{{ repo_type }}\" width=\"24\" height=\"24\"></use> - </svg> - </div> - {% endif %} +<a href=\"{{ config.repo_url }}\" title=\"{{ lang.t('source.link.title') }}\" class=\"md-source\"> + <div class=\"md-source__icon md-icon\"> + {% set icon = config.theme.icon.repo or \"fontawesome/brands/git-alt\" %} + {% include \".icons/\" ~ icon ~ \".svg\" %} + </div> <div class=\"md-source__repository\"> {{ config.repo_name }} </div> partials/tabs-item.html @@ -1,7 +1,7 @@ {#- This file was automatically generated - do not edit -#} -{% if nav_item.is_homepage %} +{% if nav_item.is_homepage or nav_item.url == \"index.html\" %} <li class=\"md-tabs__item\"> {% if not page.ancestors | length and nav | selectattr(\"url\", page.url) %} <a href=\"{{ nav_item.url | url }}\" class=\"md-tabs__link md-tabs__link--active\"> partials/tabs.html @@ -5,7 +5,7 @@ {% if page.ancestors | length > 0 %} {% set class = \"md-tabs md-tabs--active\" %} {% endif %} -<nav class=\"{{ class }}\" data-md-component=\"tabs\"> +<nav class=\"{{ class }}\" aria-label=\"{{ lang.t('tabs.title') }}\" data-md-component=\"tabs\"> <div class=\"md-tabs__inner md-grid\"> <ul class=\"md-tabs__list\"> {% for nav_item in nav %} partials/toc-item.html @@ -6,7 +6,7 @@ {{ toc_item.title }} </a> {% if toc_item.children %} - <nav class=\"md-nav\"> + <nav class=\"md-nav\" aria-label=\"{{ toc_item.title }}\"> <ul class=\"md-nav__list\"> {% for toc_item in toc_item.children %} {% include \"partials/toc-item.html\" %} partials/toc.html @@ -2,35 +2,22 @@ This file was automatically generated - do not edit -#} {% import \"partials/language.html\" as lang with context %} -<nav class=\"md-nav md-nav--secondary\"> +<nav class=\"md-nav md-nav--secondary\" aria-label=\"{{ lang.t('toc.title') }}\"> {% endif %} {% if toc | first is defined %} <label class=\"md-nav__title\" for=\"__toc\"> + <span class=\"md-nav__icon md-icon\"> + {% include \".icons/material/arrow-left.svg\" %} + </span> {{ lang.t(\"toc.title\") }} </label> <ul class=\"md-nav__list\" data-md-scrollfix> {% for toc_item in toc %} {% include \"partials/toc-item.html\" %} {% endfor %} - {% if page.meta.source and page.meta.source | length > 0 %} - <li class=\"md-nav__item\"> - <a href=\"#__source\" class=\"md-nav__link md-nav__link--active\"> - {{ lang.t(\"meta.source\") }} - </a> - </li> - {% endif %} - {% set disqus = config.extra.disqus %} - {% if page and page.meta and page.meta.disqus is string %} - {% set disqus = page.meta.disqus %} - {% endif %} - {% if not page.is_homepage and disqus %} - <li class=\"md-nav__item\"> - <a href=\"#__comments\" class=\"md-nav__link md-nav__link--active\"> - {{ lang.t(\"meta.comments\") }} - </a> - </li> - {% endif %} </ul> {% endif %} </nav> Upgrading from 3.x to 4.x \u00b6 What's new? \u00b6 Material for MkDocs 4 fixes incorrect layout on Chinese systems. The fix includes a mandatory change of the base font-size from 10px to 20px which means all rem values needed to be updated. Within the theme, px to rem calculation is now encapsulated in a new function called px2rem which is part of the SASS code base. If you use Material for MkDocs with custom CSS that is based on rem values, note that those values must now be divided by 2. Now, 1.0rem doesn't map to 10px , but 20px . To learn more about the problem and implications, please refer to #911 in which the problem was discovered and fixed. Changes to mkdocs.yml \u00b6 None. Changes to *.html files \u00b6 None.","title":"Upgrading"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#upgrading","text":"Upgrade to the latest version with: pip install --upgrade mkdocs-material Inspect the currently installed version with: pip show mkdocs-material","title":"Upgrading"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#upgrading-from-5x-to-6x","text":"","title":"Upgrading from 5.x to 6.x"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#whats-new","text":"Improved search result look and feel Improved search result stability while typing Improved search result grouping (pages + headings) Improved search result relevance and scoring Added display of missing query terms to search results Reduced size of vendor bundle by 25% (84kb \u2192 67kb) Reduced size of the Docker image to improve CI build performance Removed hero partial in favor of custom implementation Removed deprecated front matter features","title":"What's new?"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#changes-to-mkdocsyml","text":"Following is a list of changes that need to be made to mkdocs.yml . Note that you only have to adjust the value if you defined it, so if your configuration does not contain the key, you can skip it.","title":"Changes to mkdocs.yml"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#themefeatures","text":"All feature flags that can be set from mkdocs.yml , like tabs and instant loading , are now prefixed with the name of the component or function they apply to, e.g. navigation.* : 6.x theme : features : - navigation.tabs - navigation.instant 5.x theme : features : - tabs - instant","title":"theme.features"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#changes-to-html-files","text":"The templates have undergone a set of changes to make them future-proof. If you've used theme extension to override a block or template, make sure that it matches the new structure: If you've overridden a block , check base.html for potential changes If you've overridden a template , check the respective *.html file for potential changes base.html @@ -22,13 +22,6 @@ {% import \"partials/language.html\" as lang with context %} -<!-- Theme options --> -{% set palette = config.theme.palette %} -{% if not palette is mapping %} - {% set palette = palette | first %} -{% endif %} -{% set font = config.theme.font %} - <!doctype html> <html lang=\"{{ lang.t('language') }}\" class=\"no-js\"> <head> @@ -45,21 +38,8 @@ <meta name=\"description\" content=\"{{ config.site_description }}\" /> {% endif %} - <!-- Redirect --> - {% if page and page.meta and page.meta.redirect %} - <script> - var anchor = window.location.hash.substr(1) - location.href = '{{ page.meta.redirect }}' + - (anchor ? '#' + anchor : '') - </script> - - <!-- Fallback in case JavaScript is not available --> - <meta http-equiv=\"refresh\" content=\"0; url={{ page.meta.redirect }}\" /> - <meta name=\"robots\" content=\"noindex\" /> - <link rel=\"canonical\" href=\"{{ page.meta.redirect }}\" /> - <!-- Canonical --> - {% elif page.canonical_url %} + {% if page.canonical_url %} <link rel=\"canonical\" href=\"{{ page.canonical_url }}\" /> {% endif %} @@ -96,20 +76,21 @@ <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/main.css' | url }}\" /> <!-- Extra color palette --> - {% if palette.scheme or palette.primary or palette.accent %} + {% if config.theme.palette %} + {% set palette = config.theme.palette %} <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/palette.css' | url }}\" /> - {% endif %} - <!-- Theme-color meta tag for Android --> - {% if palette.primary %} - {% import \"partials/palette.html\" as map %} - {% set primary = map.primary( - palette.primary | replace(\" \", \"-\") | lower - ) %} - <meta name=\"theme-color\" content=\"{{ primary }}\" /> + <!-- Theme-color meta tag for Android --> + {% if palette.primary %} + {% import \"partials/palette.html\" as map %} + {% set primary = map.primary( + palette.primary | replace(\" \", \"-\") | lower + ) %} + <meta name=\"theme-color\" content=\"{{ primary }}\" /> + {% endif %} {% endif %} {% endblock %} @@ -120,7 +101,8 @@ {% block fonts %} <!-- Load fonts from Google --> - {% if font != false %} + {% if config.theme.font != false %} + {% set font = config.theme.font %} <link href=\"https://fonts.gstatic.com\" rel=\"preconnect\" crossorigin /> <link rel=\"stylesheet\" @@ -169,8 +151,12 @@ <!-- Text direction and color palette, if defined --> {% set direction = config.theme.direction or lang.t('direction') %} - {% if palette.scheme or palette.primary or palette.accent %} - {% set scheme = palette.scheme | lower %} + {% if config.theme.palette %} + {% set palette = config.theme.palette %} + {% if not palette is mapping %} + {% set palette = palette | first %} + {% endif %} + {% set scheme = palette.scheme | replace(\" \", \"-\") | lower %} {% set primary = palette.primary | replace(\" \", \"-\") | lower %} {% set accent = palette.accent | replace(\" \", \"-\") | lower %} <body @@ -179,18 +165,19 @@ data-md-color-primary=\"{{ primary }}\" data-md-color-accent=\"{{ accent }}\" > + + <!-- Experimental: set color scheme based on preference --> + {% if \"preference\" == scheme %} + <script> + if (matchMedia(\"(prefers-color-scheme: dark)\").matches) + document.body.setAttribute(\"data-md-color-scheme\", \"slate\") + </script> + {% endif %} + {% else %} <body dir=\"{{ direction }}\"> {% endif %} - <!-- Experimental: set color scheme based on preference --> - {% if \"preference\" == palette.scheme %} - <script> - if (matchMedia(\"(prefers-color-scheme: dark)\").matches) - document.body.setAttribute(\"data-md-color-scheme\", \"slate\") - </script> - {% endif %} - <!-- State toggles - we need to set autocomplete=\"off\" in order to reset the drawer on back button invocation in some browsers @@ -243,15 +230,11 @@ <div class=\"md-container\" data-md-component=\"container\"> <!-- Hero teaser --> - {% block hero %} - {% if page and page.meta and page.meta.hero %} - {% include \"partials/hero.html\" with context %} - {% endif %} - {% endblock %} + {% block hero %}{% endblock %} <!-- Tabs navigation --> {% block tabs %} - {% if \"tabs\" in config.theme.features %} + {% if \"navigation.tabs\" in config.theme.features %} {% include \"partials/tabs.html\" %} {% endif %} {% endblock %} @@ -310,13 +293,6 @@ </a> {% endif %} - <!-- Link to source file --> - {% block source %} - {% if page and page.meta and page.meta.source %} - {% include \"partials/source-link.html\" %} - {% endif %} - {% endblock %} - <!-- Hack: check whether the content contains a h1 headline. If it doesn't, the page title (or respectively site name) is used @@ -370,7 +346,10 @@ \"search.result.placeholder\", \"search.result.none\", \"search.result.one\", - \"search.result.other\" + \"search.result.other\", + \"search.result.more.one\", + \"search.result.more.other\", + \"search.result.term.missing\" ] -%} {%- set _ = translations.update({ key: lang.t(key) }) -%} {%- endfor -%} partials/hero.html @@ -1,12 +0,0 @@ -{#- - This file was automatically generated - do not edit --#} -{% set class = \"md-hero\" %} -{% if \"tabs\" not in config.theme.features %} - {% set class = \"md-hero md-hero--expand\" %} -{% endif %} -<div class=\"{{ class }}\" data-md-component=\"hero\"> - <div class=\"md-hero__inner md-grid\"> - {{ page.meta.hero }} - </div> -</div> partials/source-link -{#- - This file was automatically generated - do not edit --#} -{% import \"partials/language.html\" as lang with context %} -{% set repo = config.repo_url %} -{% if repo | last == \"/\" %} - {% set repo = repo[:-1] %} -{% endif %} -{% set path = page.meta.path | default(\"\") %} -<a href=\"{{ [repo, path, page.meta.source] | join('/') }}\" title=\"{{ page.meta.source }}\" class=\"md-content__button md-icon\"> - {{ lang.t(\"meta.source\") }} - {% set icon = config.theme.icon.repo or \"fontawesome/brands/git-alt\" %} - {% include \".icons/\" ~ icon ~ \".svg\" %} -</a>","title":"Changes to *.html files"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#upgrading-from-4x-to-5x","text":"","title":"Upgrading from 4.x to 5.x"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#whats-new_1","text":"Reactive architecture \u2013 try app . dialog$ . next ( \"Hi!\" ) in the console Instant loading \u2013 make Material behave like a Single Page Application Improved CSS customization with CSS variables \u2013 set your brand's colors Improved CSS resilience, e.g. proper sidebar locking for customized headers Improved icon integration and configuration \u2013 now including over 5k icons Added possibility to use any icon for logo, repository and social links Search UI does not freeze anymore (moved to web worker) Search index built only once when using instant loading Improved extensible keyboard handling Support for prebuilt search indexes Support for displaying stars and forks for GitLab repositories Support for scroll snapping of sidebars and search results Reduced HTML and CSS footprint due to deprecation of Internet Explorer support Slight facelifting of some UI elements (Admonitions, tables, ...)","title":"What's new?"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#changes-to-mkdocsyml_1","text":"Following is a list of changes that need to be made to mkdocs.yml . Note that you only have to adjust the value if you defined it, so if your configuration does not contain the key, you can skip it.","title":"Changes to mkdocs.yml"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#themefeature","text":"Optional features like tabs and instant loading are now implemented as flags and can be enabled by listing them in mkdocs.yml under theme.features : 5.x theme : features : - tabs - instant 4.x theme : feature : tabs : true","title":"theme.feature"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#themelogoicon","text":"The logo icon configuration was centralized under theme.icon.logo and can now be set to any of the icons bundled with the theme : 5.x theme : icon : logo : material/cloud 4.x theme : logo : icon : cloud","title":"theme.logo.icon"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#extrarepo_icon","text":"The repo icon configuration was centralized under theme.icon.repo and can now be set to any of the icons bundled with the theme : 5.x theme : icon : repo : fontawesome/brands/gitlab 4.x extra : repo_icon : gitlab","title":"extra.repo_icon"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#extrasearch","text":"Search is now configured as part of the plugin options . Note that the search languages must now be listed as an array of strings and the tokenizer was renamed to separator : 5.x plugins : - search : separator : '[\\s\\-\\.]+' lang : - en - de - ru 4.x extra : search : language : en, de, ru tokenizer : '[\\s\\-\\.]+'","title":"extra.search.*"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#extrasocial","text":"Social links stayed in the same place, but the type key was renamed to icon in order to match the new way of specifying which icon to be used: 5.x extra : social : - icon : fontawesome/brands/github-alt link : https://github.com/squidfunk 4.x extra : social : - type : github link : https://github.com/squidfunk","title":"extra.social.*"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#changes-to-html-files_1","text":"The templates have undergone a set of changes to make them future-proof. If you've used theme extension to override a block or template, make sure that it matches the new structure: If you've overridden a block , check base.html for potential changes If you've overridden a template , check the respective *.html file for potential changes base.html @@ -2,7 +2,6 @@ This file was automatically generated - do not edit -#} {% import \"partials/language.html\" as lang with context %} -{% set feature = config.theme.feature %} {% set palette = config.theme.palette %} {% set font = config.theme.font %} <!doctype html> @@ -30,19 +29,6 @@ {% elif config.site_author %} <meta name=\"author\" content=\"{{ config.site_author }}\"> {% endif %} - {% for key in [ - \"clipboard.copy\", - \"clipboard.copied\", - \"search.language\", - \"search.pipeline.stopwords\", - \"search.pipeline.trimmer\", - \"search.result.none\", - \"search.result.one\", - \"search.result.other\", - \"search.tokenizer\" - ] %} - <meta name=\"lang:{{ key }}\" content=\"{{ lang.t(key) }}\"> - {% endfor %} <link rel=\"shortcut icon\" href=\"{{ config.theme.favicon | url }}\"> <meta name=\"generator\" content=\"mkdocs-{{ mkdocs_version }}, mkdocs-material-5.0.0\"> {% endblock %} @@ -56,9 +42,9 @@ {% endif %} {% endblock %} {% block styles %} - <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/application.********.css' | url }}\"> + <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/main.********.min.css' | url }}\"> {% if palette.primary or palette.accent %} - <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/application-palette.********.css' | url }}\"> + <link rel=\"stylesheet\" href=\"{{ 'assets/stylesheets/palette.********.min.css' | url }}\"> {% endif %} {% if palette.primary %} {% import \"partials/palette.html\" as map %} @@ -69,20 +55,17 @@ {% endif %} {% endblock %} {% block libs %} - <script src=\"{{ 'assets/javascripts/modernizr.********.js' | url }}\"></script> {% endblock %} {% block fonts %} {% if font != false %} <link href=\"https://fonts.gstatic.com\" rel=\"preconnect\" crossorigin> <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family={{ font.text | replace(' ', '+') + ':300,400,400i,700%7C' + font.code | replace(' ', '+') }}&display=fallback\"> <style>body,input{font-family:\"{{ font.text }}\",\"Helvetica Neue\",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:\"{{ font.code }}\",\"Courier New\",Courier,monospace}</style> {% endif %} {% endblock %} - <link rel=\"stylesheet\" href=\"{{ 'assets/fonts/material-icons.css' | url }}\"> {% if config.extra.manifest %} <link rel=\"manifest\" href=\"{{ config.extra.manifest | url }}\" crossorigin=\"use-credentials\"> {% endif %} @@ -95,47 +77,50 @@ {% endblock %} {% block extrahead %}{% endblock %} </head> + {% set direction = config.theme.direction | default(lang.t('direction')) %} {% if palette.primary or palette.accent %} {% set primary = palette.primary | replace(\" \", \"-\") | lower %} {% set accent = palette.accent | replace(\" \", \"-\") | lower %} - <body dir=\"{{ lang.t('direction') }}\" data-md-color-primary=\"{{ primary }}\" data-md-color-accent=\"{{ accent }}\"> + <body dir=\"{{ direction }}\" data-md-color-primary=\"{{ primary }}\" data-md-color-accent=\"{{ accent }}\"> {% else %} - <body dir=\"{{ lang.t('direction') }}\"> + <body dir=\"{{ direction }}\"> {% endif %} - <svg class=\"md-svg\"> - <defs> - {% set platform = config.extra.repo_icon or config.repo_url %} - {% if \"github\" in platform %} - {% include \"assets/images/icons/github.f0b8504a.svg\" %} - {% elif \"gitlab\" in platform %} - {% include \"assets/images/icons/gitlab.6dd19c00.svg\" %} - {% elif \"bitbucket\" in platform %} - {% include \"assets/images/icons/bitbucket.1b09e088.svg\" %} - {% endif %} - </defs> - </svg> <input class=\"md-toggle\" data-md-toggle=\"drawer\" type=\"checkbox\" id=\"__drawer\" autocomplete=\"off\"> <input class=\"md-toggle\" data-md-toggle=\"search\" type=\"checkbox\" id=\"__search\" autocomplete=\"off\"> - <label class=\"md-overlay\" data-md-component=\"overlay\" for=\"__drawer\"></label> + <label class=\"md-overlay\" for=\"__drawer\"></label> + <div data-md-component=\"skip\"> + {% if page.toc | first is defined %} + {% set skip = page.toc | first %} + <a href=\"{{ skip.url | url }}\" class=\"md-skip\"> + {{ lang.t('skip.link.title') }} + </a> + {% endif %} + </div> + <div data-md-component=\"announce\"> + {% if self.announce() %} + <aside class=\"md-announce\"> + <div class=\"md-announce__inner md-grid md-typeset\"> + {% block announce %}{% endblock %} + </div> + </aside> + {% endif %} + </div> {% block header %} {% include \"partials/header.html\" %} {% endblock %} - <div class=\"md-container\"> + <div class=\"md-container\" data-md-component=\"container\"> {% block hero %} {% if page and page.meta and page.meta.hero %} {% include \"partials/hero.html\" with context %} {% endif %} {% endblock %} - {% if feature.tabs %} - {% include \"partials/tabs.html\" %} - {% endif %} + {% block tabs %} + {% if \"tabs\" in config.theme.features %} + {% include \"partials/tabs.html\" %} + {% endif %} + {% endblock %} - <main class=\"md-main\" role=\"main\"> - <div class=\"md-main__inner md-grid\" data-md-component=\"container\"> + <main class=\"md-main\" data-md-component=\"main\"> + <div class=\"md-main__inner md-grid\"> {% block site_nav %} {% if nav %} <div class=\"md-sidebar md-sidebar--primary\" data-md-component=\"navigation\"> @@ -160,41 +141,25 @@ <article class=\"md-content__inner md-typeset\"> {% block content %} {% if page.edit_url %} - <a href=\"{{ page.edit_url }}\" title=\"{{ lang.t('edit.link.title') }}\" class=\"md-icon md-content__icon\">&#xE3C9;</a> + <a href=\"{{ page.edit_url }}\" title=\"{{ lang.t('edit.link.title') }}\" class=\"md-content__button md-icon\"> + {% include \".icons/material/pencil.svg\" %} + </a> {% endif %} + {% block source %} + {% if page and page.meta and page.meta.source %} + {% include \"partials/source-link.html\" %} + {% endif %} + {% endblock %} {% if not \"\\x3ch1\" in page.content %} <h1>{{ page.title | default(config.site_name, true)}}</h1> {% endif %} {{ page.content }} - {% block source %} - {% if page and page.meta and page.meta.source %} - <h2 id=\"__source\">{{ lang.t(\"meta.source\") }}</h2> - {% set repo = config.repo_url %} - {% if repo | last == \"/\" %} - {% set repo = repo[:-1] %} - {% endif %} - {% set path = page.meta.path | default([\"\"]) %} - {% set file = page.meta.source %} - <a href=\"{{ [repo, path, file] | join('/') }}\" title=\"{{ file }}\" class=\"md-source-file\"> - {{ file }} - </a> - {% endif %} - {% endblock %} + {% if page and page.meta %} + {% if page.meta.git_revision_date_localized or + page.meta.revision_date + %} + {% include \"partials/source-date.html\" %} - {% if page and page.meta and ( - page.meta.git_revision_date_localized or - page.meta.revision_date - ) %} - {% set label = lang.t(\"source.revision.date\") %} - <hr> - <div class=\"md-source-date\"> - <small> - {% if page.meta.git_revision_date_localized %} - {{ label }}: <span class=\"git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago\"><span class=\"timeago\" datetime=\"2020-12-17T00:42:44+00:00\" locale=\"es\"></span></span><span class=\"git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date\">2020-12-17</span> - {% elif page.meta.revision_date %} - {{ label }}: {{ page.meta.revision_date }} - {% endif %} - </small> - </div> {% endif %} {% endblock %} {% block disqus %} @@ -208,29 +174,35 @@ {% include \"partials/footer.html\" %} {% endblock %} </div> {% block scripts %} - <script src=\"{{ 'assets/javascripts/application.********.js' | url }}\"></script> - {% if lang.t(\"search.language\") != \"en\" %} - {% set languages = lang.t(\"search.language\").split(\",\") %} - {% if languages | length and languages[0] != \"\" %} - {% set path = \"assets/javascripts/lunr/\" %} - <script src=\"{{ (path ~ 'lunr.stemmer.support.js') | url }}\"></script> - {% for language in languages | map(\"trim\") %} - {% if language != \"en\" %} - {% if language == \"ja\" %} - <script src=\"{{ (path ~ 'tinyseg.js') | url }}\"></script> - {% endif %} - {% if language in (\"ar\", \"da\", \"de\", \"es\", \"fi\", \"fr\", \"hu\", \"it\", \"ja\", \"nl\", \"no\", \"pt\", \"ro\", \"ru\", \"sv\", \"th\", \"tr\", \"vi\") %} - <script src=\"{{ (path ~ 'lunr.' ~ language ~ '.js') | url }}\"></script> - {% endif %} - {% endif %} - {% endfor %} - {% if languages | length > 1 %} - <script src=\"{{ (path ~ 'lunr.multi.js') | url }}\"></script> - {% endif %} - {% endif %} - {% endif %} - <script>app.initialize({version:\"{{ mkdocs_version }}\",url:{base:\"{{ base_url }}\"}})</script> + <script src=\"{{ 'assets/javascripts/vendor.********.min.js' | url }}\"></script> + <script src=\"{{ 'assets/javascripts/bundle.********.min.js' | url }}\"></script> + {%- set translations = {} -%} + {%- for key in [ + \"clipboard.copy\", + \"clipboard.copied\", + \"search.config.lang\", + \"search.config.pipeline\", + \"search.config.separator\", + \"search.result.placeholder\", + \"search.result.none\", + \"search.result.one\", + \"search.result.other\" + ] -%} + {%- set _ = translations.update({ key: lang.t(key) }) -%} + {%- endfor -%} + <script id=\"__lang\" type=\"application/json\"> + {{- translations | tojson -}} + </script> + {% block config %}{% endblock %} + <script> + app = initialize({ + base: \"{{ base_url }}\", + features: {{ config.theme.features | tojson }}, + search: Object.assign({ + worker: \"{{ 'assets/javascripts/worker/search.********.min.js' | url }}\" + }, typeof search !== \"undefined\" && search) + }) + </script> {% for path in config[\"extra_javascript\"] %} <script src=\"{{ path | url }}\"></script> {% endfor %} partials/footer.html @@ -5,34 +5,34 @@ <div class=\"md-footer-nav\"> - <nav class=\"md-footer-nav__inner md-grid\"> + <nav class=\"md-footer-nav__inner md-grid\" aria-label=\"{{ lang.t('footer.title') }}\"> {% if page.previous_page %} - <a href=\"{{ page.previous_page.url | url }}\" title=\"{{ page.previous_page.title | striptags }}\" class=\"md-flex md-footer-nav__link md-footer-nav__link--prev\" rel=\"prev\"> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <i class=\"md-icon md-icon--arrow-back md-footer-nav__button\"></i> + <a href=\"{{ page.previous_page.url | url }}\" title=\"{{ page.previous_page.title | striptags }}\" class=\"md-footer-nav__link md-footer-nav__link--prev\" rel=\"prev\"> + <div class=\"md-footer-nav__button md-icon\"> + {% include \".icons/material/arrow-left.svg\" %} </div> - <div class=\"md-flex__cell md-flex__cell--stretch md-footer-nav__title\"> - <span class=\"md-flex__ellipsis\"> + <div class=\"md-footer-nav__title\"> + <div class=\"md-ellipsis\"> <span class=\"md-footer-nav__direction\"> {{ lang.t(\"footer.previous\") }} </span> {{ page.previous_page.title }} - </span> + </div> </div> </a> {% endif %} {% if page.next_page %} - <a href=\"{{ page.next_page.url | url }}\" title=\"{{ page.next_page.title | striptags }}\" class=\"md-flex md-footer-nav__link md-footer-nav__link--next\" rel=\"next\"> - <div class=\"md-flex__cell md-flex__cell--stretch md-footer-nav__title\"> - <span class=\"md-flex__ellipsis\"> + <a href=\"{{ page.next_page.url | url }}\" title=\"{{ page.next_page.title | striptags }}\" class=\"md-footer-nav__link md-footer-nav__link--next\" rel=\"next\"> + <div class=\"md-footer-nav__title\"> + <div class=\"md-ellipsis\"> <span class=\"md-footer-nav__direction\"> {{ lang.t(\"footer.next\") }} </span> {{ page.next_page.title }} - </span> + </div> </div> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <i class=\"md-icon md-icon--arrow-forward md-footer-nav__button\"></i> + <div class=\"md-footer-nav__button md-icon\"> + {% include \".icons/material/arrow-right.svg\" %} </div> </a> {% endif %} partials/header.html @@ -2,51 +2,43 @@ This file was automatically generated - do not edit -#} <header class=\"md-header\" data-md-component=\"header\"> - <nav class=\"md-header-nav md-grid\"> - <div class=\"md-flex\"> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <a href=\"{{ config.site_url | default(nav.homepage.url, true) | url }}\" title=\"{{ config.site_name }}\" aria-label=\"{{ config.site_name }}\" class=\"md-header-nav__button md-logo\"> - {% if config.theme.logo.icon %} - <i class=\"md-icon\">{{ config.theme.logo.icon }}</i> - {% else %} - <img alt=\"logo\" src=\"{{ config.theme.logo | url }}\" width=\"24\" height=\"24\"> - {% endif %} - </a> - </div> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <label class=\"md-icon md-icon--menu md-header-nav__button\" for=\"__drawer\"></label> - </div> - <div class=\"md-flex__cell md-flex__cell--stretch\"> - <div class=\"md-flex__ellipsis md-header-nav__title\" data-md-component=\"title\"> - {% if config.site_name == page.title %} - {{ config.site_name }} - {% else %} - <span class=\"md-header-nav__topic\"> - {{ config.site_name }} - </span> - <span class=\"md-header-nav__topic\"> - {% if page and page.meta and page.meta.title %} - {{ page.meta.title }} - {% else %} - {{ page.title }} - {% endif %} - </span> - {% endif %} + <nav class=\"md-header-nav md-grid\" aria-label=\"{{ lang.t('header.title') }}\"> + <a href=\"{{ config.site_url | default(nav.homepage.url, true) | url }}\" title=\"{{ config.site_name }}\" class=\"md-header-nav__button md-logo\" aria-label=\"{{ config.site_name }}\"> + {% include \"partials/logo.html\" %} + </a> + <label class=\"md-header-nav__button md-icon\" for=\"__drawer\"> + {% include \".icons/material/menu\" ~ \".svg\" %} + </label> + <div class=\"md-header-nav__title\" data-md-component=\"header-title\"> + {% if config.site_name == page.title %} + <div class=\"md-header-nav__ellipsis md-ellipsis\"> + {{ config.site_name }} </div> - </div> - <div class=\"md-flex__cell md-flex__cell--shrink\"> - {% if \"search\" in config[\"plugins\"] %} - <label class=\"md-icon md-icon--search md-header-nav__button\" for=\"__search\"></label> - {% include \"partials/search.html\" %} - {% endif %} - </div> - {% if config.repo_url %} - <div class=\"md-flex__cell md-flex__cell--shrink\"> - <div class=\"md-header-nav__source\"> - {% include \"partials/source.html\" %} - </div> + {% else %} + <div class=\"md-header-nav__ellipsis\"> + <span class=\"md-header-nav__topic md-ellipsis\"> + {{ config.site_name }} + </span> + <span class=\"md-header-nav__topic md-ellipsis\"> + {% if page and page.meta and page.meta.title %} + {{ page.meta.title }} + {% else %} + {{ page.title }} + {% endif %} + </span> </div> {% endif %} </div> + {% if \"search\" in config[\"plugins\"] %} + <label class=\"md-header-nav__button md-icon\" for=\"__search\"> + {% include \".icons/material/magnify.svg\" %} + </label> + {% include \"partials/search.html\" %} + {% endif %} + {% if config.repo_url %} + <div class=\"md-header-nav__source\"> + {% include \"partials/source.html\" %} + </div> + {% endif %} </nav> </header> partials/hero.html @@ -1,9 +1,8 @@ {#- This file was automatically generated - do not edit -#} -{% set feature = config.theme.feature %} {% set class = \"md-hero\" %} -{% if not feature.tabs %} +{% if \"tabs\" not in config.theme.features %} {% set class = \"md-hero md-hero--expand\" %} {% endif %} <div class=\"{{ class }}\" data-md-component=\"hero\"> partials/language.html @@ -3,12 +3,4 @@ -#} {% import \"partials/language/\" + config.theme.language + \".html\" as lang %} {% import \"partials/language/en.html\" as fallback %} -{% macro t(key) %}{{ { - \"direction\": config.theme.direction, - \"search.language\": ( - config.extra.search | default({}) - ).language, - \"search.tokenizer\": ( - config.extra.search | default({}) - ).tokenizer | default(\"\", true), -}[key] or lang.t(key) or fallback.t(key) }}{% endmacro %} +{% macro t(key) %}{{ lang.t(key) | default(fallback.t(key)) }}{% endmacro %} partials/logo.html @@ -0,0 +1,9 @@ +{#- + This file was automatically generated - do not edit +-#} +{% if config.theme.logo %} + <img src=\"{{ config.theme.logo | url }}\" alt=\"logo\"> +{% else %} + {% set icon = config.theme.icon.logo or \"material/library\" %} + {% include \".icons/\" ~ icon ~ \".svg\" %} +{% endif %} partials/nav-item.html @@ -14,9 +14,15 @@ {% endif %} <label class=\"md-nav__link\" for=\"{{ path }}\"> {{ nav_item.title }} + <span class=\"md-nav__icon md-icon\"> + {% include \".icons/material/chevron-right.svg\" %} + </span> </label> - <nav class=\"md-nav\" data-md-component=\"collapsible\" data-md-level=\"{{ level }}\"> + <nav class=\"md-nav\" aria-label=\"{{ nav_item.title }}\" data-md-level=\"{{ level }}\"> <label class=\"md-nav__title\" for=\"{{ path }}\"> + <span class=\"md-nav__icon md-icon\"> + {% include \".icons/material/arrow-left.svg\" %} + </span> {{ nav_item.title }} </label> <ul class=\"md-nav__list\" data-md-scrollfix> @@ -39,6 +45,9 @@ {% if toc | first is defined %} <label class=\"md-nav__link md-nav__link--active\" for=\"__toc\"> {{ nav_item.title }} + <span class=\"md-nav__icon md-icon\"> + {% include \".icons/material/table-of-contents.svg\" %} + </span> </label> {% endif %} <a href=\"{{ nav_item.url | url }}\" title=\"{{ nav_item.title | striptags }}\" class=\"md-nav__link md-nav__link--active\"> partials/nav.html @@ -1,14 +1,10 @@ {#- This file was automatically generated - do not edit -#} -<nav class=\"md-nav md-nav--primary\" data-md-level=\"0\"> - <label class=\"md-nav__title md-nav__title--site\" for=\"__drawer\"> - <a href=\"{{ config.site_url | default(nav.homepage.url, true) | url }}\" title=\"{{ config.site_name }}\" class=\"md-nav__button md-logo\"> - {% if config.theme.logo.icon %} - <i class=\"md-icon\">{{ config.theme.logo.icon }}</i> - {% else %} - <img alt=\"logo\" src=\"{{ config.theme.logo | url }}\" width=\"48\" height=\"48\"> - {% endif %} +<nav class=\"md-nav md-nav--primary\" aria-label=\"{{ lang.t('nav.title') }}\" data-md-level=\"0\"> + <label class=\"md-nav__title\" for=\"__drawer\"> + <a href=\"{{ config.site_url | default(nav.homepage.url, true) | url }}\" title=\"{{ config.site_name }}\" class=\"md-nav__button md-logo\" aria-label=\"{{ config.site_name }}\"> + {% include \"partials/logo.html\" %} </a> {{ config.site_name }} </label> partials/search.html @@ -6,15 +6,18 @@ <label class=\"md-search__overlay\" for=\"__search\"></label> <div class=\"md-search__inner\" role=\"search\"> <form class=\"md-search__form\" name=\"search\"> - <input type=\"text\" class=\"md-search__input\" name=\"query\" aria-label=\"Search\" placeholder=\"{{ lang.t('search.placeholder') }}\" autocapitalize=\"off\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" data-md-component=\"query\" data-md-state=\"active\"> + <input type=\"text\" class=\"md-search__input\" name=\"query\" aria-label=\"{{ lang.t('search.placeholder') }}\" placeholder=\"{{ lang.t('search.placeholder') }}\" autocapitalize=\"off\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" data-md-component=\"search-query\" data-md-state=\"active\"> <label class=\"md-search__icon md-icon\" for=\"__search\"> + {% include \".icons/material/magnify.svg\" %} + {% include \".icons/material/arrow-left.svg\" %} </label> - <button type=\"reset\" class=\"md-icon md-search__icon\" data-md-component=\"reset\" tabindex=\"-1\"> - &#xE5CD; + <button type=\"reset\" class=\"md-search__icon md-icon\" aria-label=\"{{ lang.t('search.reset') }}\" data-md-component=\"search-reset\" tabindex=\"-1\"> + {% include \".icons/material/close.svg\" %} </button> </form> <div class=\"md-search__output\"> <div class=\"md-search__scrollwrap\" data-md-scrollfix> - <div class=\"md-search-result\" data-md-component=\"result\"> + <div class=\"md-search-result\" data-md-component=\"search-result\"> <div class=\"md-search-result__meta\"> {{ lang.t(\"search.result.placeholder\") }} </div> partials/social.html @@ -3,9 +3,12 @@ -#} {% if config.extra.social %} <div class=\"md-footer-social\"> - <link rel=\"stylesheet\" href=\"{{ 'assets/fonts/font-awesome.css' | url }}\"> {% for social in config.extra.social %} - <a href=\"{{ social.link }}\" target=\"_blank\" rel=\"noopener\" title=\"{{ social.type }}\" class=\"md-footer-social__link fa fa-{{ social.type }}\"></a> + {% set _,rest = social.link.split(\"//\") %} + {% set domain = rest.split(\"/\")[0] %} + <a href=\"{{ social.link }}\" target=\"_blank\" rel=\"noopener\" title=\"{{ domain }}\" class=\"md-footer-social__link\"> + {% include \".icons/\" ~ social.icon ~ \".svg\" %} + </a> {% endfor %} </div> {% endif %} partials/source-date.html @@ -0,0 +1,15 @@ +{#- + This file was automatically generated - do not edit +-#} +{% import \"partials/language.html\" as lang with context %} +{% set label = lang.t(\"source.revision.date\") %} +<hr> +<div class=\"md-source-date\"> + <small> + {% if page.meta.git_revision_date_localized %} + {{ label }}: <span class=\"git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago\"><span class=\"timeago\" datetime=\"2020-12-17T00:42:44+00:00\" locale=\"es\"></span></span><span class=\"git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date\">2020-12-17</span> + {% elif page.meta.revision_date %} + {{ label }}: {{ page.meta.revision_date }} + {% endif %} + </small> +</div> partials/source-link.html @@ -0,0 +1,13 @@ +{#- + This file was automatically generated - do not edit +-#} +{% import \"partials/language.html\" as lang with context %} +{% set repo = config.repo_url %} +{% if repo | last == \"/\" %} + {% set repo = repo[:-1] %} +{% endif %} +{% set path = page.meta.path | default([\"\"]) %} +<a href=\"{{ [repo, path, page.meta.source] | join('/') }}\" title=\"{{ file }}\" class=\"md-content__button md-icon\"> + {{ lang.t(\"meta.source\") }} + {% include \".icons/\" ~ config.theme.icon.repo ~ \".svg\" %} +</a> partials/source.html @@ -2,24 +2,11 @@ This file was automatically generated - do not edit -#} {% import \"partials/language.html\" as lang with context %} -{% set platform = config.extra.repo_icon or config.repo_url %} -{% if \"github\" in platform %} - {% set repo_type = \"github\" %} -{% elif \"gitlab\" in platform %} - {% set repo_type = \"gitlab\" %} -{% elif \"bitbucket\" in platform %} - {% set repo_type = \"bitbucket\" %} -{% else %} - {% set repo_type = \"\" %} -{% endif %} -<a href=\"{{ config.repo_url }}\" title=\"{{ lang.t('source.link.title') }}\" class=\"md-source\" data-md-source=\"{{ repo_type }}\"> - {% if repo_type %} - <div class=\"md-source__icon\"> - <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"> - <use xlink:href=\"#__{{ repo_type }}\" width=\"24\" height=\"24\"></use> - </svg> - </div> - {% endif %} +<a href=\"{{ config.repo_url }}\" title=\"{{ lang.t('source.link.title') }}\" class=\"md-source\"> + <div class=\"md-source__icon md-icon\"> + {% set icon = config.theme.icon.repo or \"fontawesome/brands/git-alt\" %} + {% include \".icons/\" ~ icon ~ \".svg\" %} + </div> <div class=\"md-source__repository\"> {{ config.repo_name }} </div> partials/tabs-item.html @@ -1,7 +1,7 @@ {#- This file was automatically generated - do not edit -#} -{% if nav_item.is_homepage %} +{% if nav_item.is_homepage or nav_item.url == \"index.html\" %} <li class=\"md-tabs__item\"> {% if not page.ancestors | length and nav | selectattr(\"url\", page.url) %} <a href=\"{{ nav_item.url | url }}\" class=\"md-tabs__link md-tabs__link--active\"> partials/tabs.html @@ -5,7 +5,7 @@ {% if page.ancestors | length > 0 %} {% set class = \"md-tabs md-tabs--active\" %} {% endif %} -<nav class=\"{{ class }}\" data-md-component=\"tabs\"> +<nav class=\"{{ class }}\" aria-label=\"{{ lang.t('tabs.title') }}\" data-md-component=\"tabs\"> <div class=\"md-tabs__inner md-grid\"> <ul class=\"md-tabs__list\"> {% for nav_item in nav %} partials/toc-item.html @@ -6,7 +6,7 @@ {{ toc_item.title }} </a> {% if toc_item.children %} - <nav class=\"md-nav\"> + <nav class=\"md-nav\" aria-label=\"{{ toc_item.title }}\"> <ul class=\"md-nav__list\"> {% for toc_item in toc_item.children %} {% include \"partials/toc-item.html\" %} partials/toc.html @@ -2,35 +2,22 @@ This file was automatically generated - do not edit -#} {% import \"partials/language.html\" as lang with context %} -<nav class=\"md-nav md-nav--secondary\"> +<nav class=\"md-nav md-nav--secondary\" aria-label=\"{{ lang.t('toc.title') }}\"> {% endif %} {% if toc | first is defined %} <label class=\"md-nav__title\" for=\"__toc\"> + <span class=\"md-nav__icon md-icon\"> + {% include \".icons/material/arrow-left.svg\" %} + </span> {{ lang.t(\"toc.title\") }} </label> <ul class=\"md-nav__list\" data-md-scrollfix> {% for toc_item in toc %} {% include \"partials/toc-item.html\" %} {% endfor %} - {% if page.meta.source and page.meta.source | length > 0 %} - <li class=\"md-nav__item\"> - <a href=\"#__source\" class=\"md-nav__link md-nav__link--active\"> - {{ lang.t(\"meta.source\") }} - </a> - </li> - {% endif %} - {% set disqus = config.extra.disqus %} - {% if page and page.meta and page.meta.disqus is string %} - {% set disqus = page.meta.disqus %} - {% endif %} - {% if not page.is_homepage and disqus %} - <li class=\"md-nav__item\"> - <a href=\"#__comments\" class=\"md-nav__link md-nav__link--active\"> - {{ lang.t(\"meta.comments\") }} - </a> - </li> - {% endif %} </ul> {% endif %} </nav>","title":"Changes to *.html files"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#upgrading-from-3x-to-4x","text":"","title":"Upgrading from 3.x to 4.x"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#whats-new_2","text":"Material for MkDocs 4 fixes incorrect layout on Chinese systems. The fix includes a mandatory change of the base font-size from 10px to 20px which means all rem values needed to be updated. Within the theme, px to rem calculation is now encapsulated in a new function called px2rem which is part of the SASS code base. If you use Material for MkDocs with custom CSS that is based on rem values, note that those values must now be divided by 2. Now, 1.0rem doesn't map to 10px , but 20px . To learn more about the problem and implications, please refer to #911 in which the problem was discovered and fixed.","title":"What's new?"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#changes-to-mkdocsyml_2","text":"None.","title":"Changes to mkdocs.yml"},{"location":"kb/GNU-Linux/Software/mkDocs/upgrading/#changes-to-html-files_2","text":"None.","title":"Changes to *.html files"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/abbreviations/","text":"Abbreviations \u00b6 Technical documentation often incurs the usage of a lot of acronyms, which may need additional explanation, especially for new user of your project. For these matters, Material for MkDocs uses a combination of Markdown extensions to enable site-wide glossaries. Configuration \u00b6 Abbreviations \u00b6 The Abbreviations extension, which is part of the standard Markdown library, allows to add additional content to parts of the text which are then shown on hover , e.g. for glossaries: markdown_extensions : - abbr Snippets \u00b6 The Snippets extension, which is part of Python Markdown Extensions , allows to insert content from other files or other, regular content, and can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.snippets Usage \u00b6 Adding abbreviations \u00b6 When the Abbreviations extension is enabled, abbreviations can be defined with a special syntax similar to URLs and footnotes at any point in the Markdown document. Example : The HTML specification is maintained by the W3C. *[HTML]: Hyper Text Markup Language *[W3C]: World Wide Web Consortium Result : The HTML specification is maintained by the W3C . Adding a glossary \u00b6 When Snippets is enabled, content from other files can be embedded, which is especially useful to include abbreviations from a central file \u2013 a glossary \u2013 and embed them into any other file. Example : docs/page.md The HTML specification is maintained by the W3C. --8<--\u200b \"includes/abbreviations.md\" includes/abbreviations.md *[HTML]: Hyper Text Markup Language *[W3C]: World Wide Web Consortium Result : The HTML specification is maintained by the W3C . Remember to locate the Markdown file containing the definitions outside of the docs folder (here includes is used), or MkDocs may complain about an unreferenced file.","title":"Abbreviations"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/abbreviations/#abbreviations","text":"Technical documentation often incurs the usage of a lot of acronyms, which may need additional explanation, especially for new user of your project. For these matters, Material for MkDocs uses a combination of Markdown extensions to enable site-wide glossaries.","title":"Abbreviations"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/abbreviations/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/abbreviations/#abbreviations_1","text":"The Abbreviations extension, which is part of the standard Markdown library, allows to add additional content to parts of the text which are then shown on hover , e.g. for glossaries: markdown_extensions : - abbr","title":"Abbreviations"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/abbreviations/#snippets","text":"The Snippets extension, which is part of Python Markdown Extensions , allows to insert content from other files or other, regular content, and can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.snippets","title":"Snippets"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/abbreviations/#usage","text":"","title":"Usage"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/abbreviations/#adding-abbreviations","text":"When the Abbreviations extension is enabled, abbreviations can be defined with a special syntax similar to URLs and footnotes at any point in the Markdown document. Example : The HTML specification is maintained by the W3C. *[HTML]: Hyper Text Markup Language *[W3C]: World Wide Web Consortium Result : The HTML specification is maintained by the W3C .","title":"Adding abbreviations"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/abbreviations/#adding-a-glossary","text":"When Snippets is enabled, content from other files can be embedded, which is especially useful to include abbreviations from a central file \u2013 a glossary \u2013 and embed them into any other file. Example : docs/page.md The HTML specification is maintained by the W3C. --8<--\u200b \"includes/abbreviations.md\" includes/abbreviations.md *[HTML]: Hyper Text Markup Language *[W3C]: World Wide Web Consortium Result : The HTML specification is maintained by the W3C . Remember to locate the Markdown file containing the definitions outside of the docs folder (here includes is used), or MkDocs may complain about an unreferenced file.","title":"Adding a glossary"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/admonitions/","text":"Admonitions \u00b6 Admonitions, also known as call-outs , are an excellent choice for including side content without significantly interrupting the document flow. Material for MkDocs provides several different types of admonitions and allows for the inclusion and nesting of arbitrary content. Configuration \u00b6 Admonition \u00b6 Source \u00b7 Extension The Admonition extension, which is part of the standard Markdown library, is integrated with Material for MkDocs and can be enabled via mkdocs.yml : markdown_extensions : - admonition Details \u00b6 Source \u00b7 Extension The Details extension, which is part of Python Markdown Extensions , adds the ability to make admonitions collapsible . It can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.details SuperFences \u00b6 The SuperFences extension, which is also part of Python Markdown Extensions , allows for the nesting of code and content blocks inside admonitions , and is therefore strongly recommended: markdown_extensions : - pymdownx.superfences Usage \u00b6 Admonitions follow a simple syntax: a block must start with !!! , followed by a single keyword which is used as the type qualifier of the block. The content of the block then follows on the next line, indented by four spaces. Example : !!! note Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Result : Note Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Changing the title \u00b6 By default, the title will equal the type qualifier in titlecase. However, it can be changed by adding a quoted string containing valid Markdown (including links, formatting, ...) after the type qualifier. Example : !!! note \"Phasellus posuere in sem ut cursus\" Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Result : Phasellus posuere in sem ut cursus Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Removing the title \u00b6 Similar to changing the title , the icon and title can be omitted entirely by adding an empty string directly after the type qualifier. Note that this will not work for collapsible blocks . Example : !!! note \"\" Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Result : Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Embedded content \u00b6 Admonitions can contain all kinds of text content, including headlines, lists, paragraphs and other blocks. While the parser from the standard Markdown library doesn't account for nested blocks, the SuperFences extension adds the ability to nest arbitrary content inside admonitions. Example : !!! note Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. ``` python def bubble_sort(items): for i in range(len(items)): for j in range(len(items) - 1 - i): if items[j] > items[j + 1]: items[j], items[j + 1] = items[j + 1], items[j] ``` Nunc eu odio eleifend, blandit leo a, volutpat sapien. Phasellus posuere in sem ut cursus. Nullam sit amet tincidunt ipsum, sit amet elementum turpis. Etiam ipsum quam, mattis in purus vitae, lacinia fermentum enim. Result : Note Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. def bubble_sort ( items ): for i in range ( len ( items )): for j in range ( len ( items ) - 1 - i ): if items [ j ] > items [ j + 1 ]: items [ j ], items [ j + 1 ] = items [ j + 1 ], items [ j ] Nunc eu odio eleifend, blandit leo a, volutpat sapien. Phasellus posuere in sem ut cursus. Nullam sit amet tincidunt ipsum, sit amet elementum turpis. Etiam ipsum quam, mattis in purus vitae, lacinia fermentum enim. Collapsible blocks \u00b6 The Details extension adds support for rendering collapsible admonition blocks. This is useful for FAQs or content that is of secondary nature. A details block follows the syntax and semantics of admonition blocks, but must start with ??? . Example : ??? note Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Result : Note Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Adding a + after ??? will render the block as open on page load: Example : ???+ note Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Result : Note Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Inline blocks \u00b6 Source \u00b7 Experimental \u00b7 Insiders only Admonitions and Details can also be rendered as inline blocks (i.e. sidebars), moving them to the right using the inline + end modifiers, or to the left using only the inline modifier. Example : !!! info inline end Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Result : inline end inline Supported types \u00b6 Following is a list of type qualifiers provided by Material for MkDocs, whereas the default type, and thus fallback for unknown type qualifiers, is note : note , seealso Note Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. abstract , summary , tldr Abstract Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. info , todo Info Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. tip , hint , important Tip Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. success , check , done Success Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. question , help , faq Question Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. warning , caution , attention Warning Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. failure , fail , missing Failure Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. danger , error Danger Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. bug Bug Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. example Example Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. quote , cite Quote Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Customization \u00b6 Custom admonitions \u00b6 If you want to add a custom admonition type, all you need is a color and an svg icon. Copy the icon's svg code from the .icons folder and add the following CSS to an additional stylesheet : : root { -- md-admonition-icon--pied-piper : url ( 'data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path d=\"M244 246c-3.2-2-6.3-2.9-10.1-2.9-6.6 0-12.6 3.2-19.3 3.7l1.7 4.9zm135.9 197.9c-19 0-64.1 9.5-79.9 19.8l6.9 45.1c35.7 6.1 70.1 3.6 106-9.8-4.8-10-23.5-55.1-33-55.1zM340.8 177c6.6 2.8 11.5 9.2 22.7 22.1 2-1.4 7.5-5.2 7.5-8.6 0-4.9-11.8-13.2-13.2-23 11.2-5.7 25.2-6 37.6-8.9 68.1-16.4 116.3-52.9 146.8-116.7C548.3 29.3 554 16.1 554.6 2l-2 2.6c-28.4 50-33 63.2-81.3 100-31.9 24.4-69.2 40.2-106.6 54.6l-6.3-.3v-21.8c-19.6 1.6-19.7-14.6-31.6-23-18.7 20.6-31.6 40.8-58.9 51.1-12.7 4.8-19.6 10-25.9 21.8 34.9-16.4 91.2-13.5 98.8-10zM555.5 0l-.6 1.1-.3.9.6-.6zm-59.2 382.1c-33.9-56.9-75.3-118.4-150-115.5l-.3-6c-1.1-13.5 32.8 3.2 35.1-31l-14.4 7.2c-19.8-45.7-8.6-54.3-65.5-54.3-14.7 0-26.7 1.7-41.4 4.6 2.9 18.6 2.2 36.7-10.9 50.3l19.5 5.5c-1.7 3.2-2.9 6.3-2.9 9.8 0 21 42.8 2.9 42.8 33.6 0 18.4-36.8 60.1-54.9 60.1-8 0-53.7-50-53.4-60.1l.3-4.6 52.3-11.5c13-2.6 12.3-22.7-2.9-22.7-3.7 0-43.1 9.2-49.4 10.6-2-5.2-7.5-14.1-13.8-14.1-3.2 0-6.3 3.2-9.5 4-9.2 2.6-31 2.9-21.5 20.1L15.9 298.5c-5.5 1.1-8.9 6.3-8.9 11.8 0 6 5.5 10.9 11.5 10.9 8 0 131.3-28.4 147.4-32.2 2.6 3.2 4.6 6.3 7.8 8.6 20.1 14.4 59.8 85.9 76.4 85.9 24.1 0 58-22.4 71.3-41.9 3.2-4.3 6.9-7.5 12.4-6.9.6 13.8-31.6 34.2-33 43.7-1.4 10.2-1 35.2-.3 41.1 26.7 8.1 52-3.6 77.9-2.9 4.3-21 10.6-41.9 9.8-63.5l-.3-9.5c-1.4-34.2-10.9-38.5-34.8-58.6-1.1-1.1-2.6-2.6-3.7-4 2.2-1.4 1.1-1 4.6-1.7 88.5 0 56.3 183.6 111.5 229.9 33.1-15 72.5-27.9 103.5-47.2-29-25.6-52.6-45.7-72.7-79.9zm-196.2 46.1v27.2l11.8-3.4-2.9-23.8zm-68.7-150.4l24.1 61.2 21-13.8-31.3-50.9zm84.4 154.9l2 12.4c9-1.5 58.4-6.6 58.4-14.1 0-1.4-.6-3.2-.9-4.6-26.8 0-36.9 3.8-59.5 6.3z\"/></svg>' ) } . md-typeset . admonition . pied-piper , . md-typeset details . pied-piper { border-color : rgb ( 43 , 155 , 70 ); } . md-typeset . pied-piper > . admonition-title , . md-typeset . pied-piper > summary { background-color : rgba ( 43 , 155 , 70 , 0.1 ); } . md-typeset . pied-piper > . admonition-title :: before , . md-typeset . pied-piper > summary :: before { background-color : rgb ( 43 , 155 , 70 ); -webkit- mask-image : var ( -- md - admonition - icon -- pied - piper ); mask-image : var ( -- md - admonition - icon -- pied - piper ); } You should now be able to create an admonition of the pied-piper type. Note that you can also use this technique to override existing admonition icons or colors. You can even add animations . :root { --md-admonition-icon--pied-piper: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path d=\"M244 246c-3.2-2-6.3-2.9-10.1-2.9-6.6 0-12.6 3.2-19.3 3.7l1.7 4.9zm135.9 197.9c-19 0-64.1 9.5-79.9 19.8l6.9 45.1c35.7 6.1 70.1 3.6 106-9.8-4.8-10-23.5-55.1-33-55.1zM340.8 177c6.6 2.8 11.5 9.2 22.7 22.1 2-1.4 7.5-5.2 7.5-8.6 0-4.9-11.8-13.2-13.2-23 11.2-5.7 25.2-6 37.6-8.9 68.1-16.4 116.3-52.9 146.8-116.7C548.3 29.3 554 16.1 554.6 2l-2 2.6c-28.4 50-33 63.2-81.3 100-31.9 24.4-69.2 40.2-106.6 54.6l-6.3-.3v-21.8c-19.6 1.6-19.7-14.6-31.6-23-18.7 20.6-31.6 40.8-58.9 51.1-12.7 4.8-19.6 10-25.9 21.8 34.9-16.4 91.2-13.5 98.8-10zM555.5 0l-.6 1.1-.3.9.6-.6zm-59.2 382.1c-33.9-56.9-75.3-118.4-150-115.5l-.3-6c-1.1-13.5 32.8 3.2 35.1-31l-14.4 7.2c-19.8-45.7-8.6-54.3-65.5-54.3-14.7 0-26.7 1.7-41.4 4.6 2.9 18.6 2.2 36.7-10.9 50.3l19.5 5.5c-1.7 3.2-2.9 6.3-2.9 9.8 0 21 42.8 2.9 42.8 33.6 0 18.4-36.8 60.1-54.9 60.1-8 0-53.7-50-53.4-60.1l.3-4.6 52.3-11.5c13-2.6 12.3-22.7-2.9-22.7-3.7 0-43.1 9.2-49.4 10.6-2-5.2-7.5-14.1-13.8-14.1-3.2 0-6.3 3.2-9.5 4-9.2 2.6-31 2.9-21.5 20.1L15.9 298.5c-5.5 1.1-8.9 6.3-8.9 11.8 0 6 5.5 10.9 11.5 10.9 8 0 131.3-28.4 147.4-32.2 2.6 3.2 4.6 6.3 7.8 8.6 20.1 14.4 59.8 85.9 76.4 85.9 24.1 0 58-22.4 71.3-41.9 3.2-4.3 6.9-7.5 12.4-6.9.6 13.8-31.6 34.2-33 43.7-1.4 10.2-1 35.2-.3 41.1 26.7 8.1 52-3.6 77.9-2.9 4.3-21 10.6-41.9 9.8-63.5l-.3-9.5c-1.4-34.2-10.9-38.5-34.8-58.6-1.1-1.1-2.6-2.6-3.7-4 2.2-1.4 1.1-1 4.6-1.7 88.5 0 56.3 183.6 111.5 229.9 33.1-15 72.5-27.9 103.5-47.2-29-25.6-52.6-45.7-72.7-79.9zm-196.2 46.1v27.2l11.8-3.4-2.9-23.8zm-68.7-150.4l24.1 61.2 21-13.8-31.3-50.9zm84.4 154.9l2 12.4c9-1.5 58.4-6.6 58.4-14.1 0-1.4-.6-3.2-.9-4.6-26.8 0-36.9 3.8-59.5 6.3z\"/></svg>') } .md-typeset .admonition.pied-piper, .md-typeset details.pied-piper { border-color: rgb(43, 155, 70); } .md-typeset .pied-piper > .admonition-title, .md-typeset .pied-piper > summary { background-color: rgba(43, 155, 70, 0.1); } .md-typeset .pied-piper > .admonition-title::before, .md-typeset .pied-piper > summary::before { background-color: rgb(43, 155, 70); -webkit-mask-image: var(--md-admonition-icon--pied-piper); mask-image: var(--md-admonition-icon--pied-piper); } Example : !!! pied-piper \"Pied Piper\" Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Result : Pied Piper Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.","title":"Admonitions"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/admonitions/#admonitions","text":"Admonitions, also known as call-outs , are an excellent choice for including side content without significantly interrupting the document flow. Material for MkDocs provides several different types of admonitions and allows for the inclusion and nesting of arbitrary content.","title":"Admonitions"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/admonitions/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/admonitions/#admonition","text":"Source \u00b7 Extension The Admonition extension, which is part of the standard Markdown library, is integrated with Material for MkDocs and can be enabled via mkdocs.yml : markdown_extensions : - admonition","title":"Admonition"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/admonitions/#details","text":"Source \u00b7 Extension The Details extension, which is part of Python Markdown Extensions , adds the ability to make admonitions collapsible . It can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.details","title":"Details"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/admonitions/#superfences","text":"The SuperFences extension, which is also part of Python Markdown Extensions , allows for the nesting of code and content blocks inside admonitions , and is therefore strongly recommended: markdown_extensions : - pymdownx.superfences","title":"SuperFences"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/admonitions/#usage","text":"Admonitions follow a simple syntax: a block must start with !!! , followed by a single keyword which is used as the type qualifier of the block. The content of the block then follows on the next line, indented by four spaces. Example : !!! note Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Result : Note Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.","title":"Usage"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/admonitions/#changing-the-title","text":"By default, the title will equal the type qualifier in titlecase. However, it can be changed by adding a quoted string containing valid Markdown (including links, formatting, ...) after the type qualifier. Example : !!! note \"Phasellus posuere in sem ut cursus\" Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Result : Phasellus posuere in sem ut cursus Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.","title":"Changing the title"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/admonitions/#removing-the-title","text":"Similar to changing the title , the icon and title can be omitted entirely by adding an empty string directly after the type qualifier. Note that this will not work for collapsible blocks . Example : !!! note \"\" Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Result : Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.","title":"Removing the title"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/admonitions/#embedded-content","text":"Admonitions can contain all kinds of text content, including headlines, lists, paragraphs and other blocks. While the parser from the standard Markdown library doesn't account for nested blocks, the SuperFences extension adds the ability to nest arbitrary content inside admonitions. Example : !!! note Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. ``` python def bubble_sort(items): for i in range(len(items)): for j in range(len(items) - 1 - i): if items[j] > items[j + 1]: items[j], items[j + 1] = items[j + 1], items[j] ``` Nunc eu odio eleifend, blandit leo a, volutpat sapien. Phasellus posuere in sem ut cursus. Nullam sit amet tincidunt ipsum, sit amet elementum turpis. Etiam ipsum quam, mattis in purus vitae, lacinia fermentum enim. Result : Note Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. def bubble_sort ( items ): for i in range ( len ( items )): for j in range ( len ( items ) - 1 - i ): if items [ j ] > items [ j + 1 ]: items [ j ], items [ j + 1 ] = items [ j + 1 ], items [ j ] Nunc eu odio eleifend, blandit leo a, volutpat sapien. Phasellus posuere in sem ut cursus. Nullam sit amet tincidunt ipsum, sit amet elementum turpis. Etiam ipsum quam, mattis in purus vitae, lacinia fermentum enim.","title":"Embedded content"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/admonitions/#collapsible-blocks","text":"The Details extension adds support for rendering collapsible admonition blocks. This is useful for FAQs or content that is of secondary nature. A details block follows the syntax and semantics of admonition blocks, but must start with ??? . Example : ??? note Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Result : Note Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Adding a + after ??? will render the block as open on page load: Example : ???+ note Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Result : Note Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.","title":"Collapsible blocks"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/admonitions/#inline-blocks","text":"Source \u00b7 Experimental \u00b7 Insiders only Admonitions and Details can also be rendered as inline blocks (i.e. sidebars), moving them to the right using the inline + end modifiers, or to the left using only the inline modifier. Example : !!! info inline end Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Result : inline end inline","title":"Inline blocks"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/admonitions/#supported-types","text":"Following is a list of type qualifiers provided by Material for MkDocs, whereas the default type, and thus fallback for unknown type qualifiers, is note : note , seealso Note Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. abstract , summary , tldr Abstract Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. info , todo Info Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. tip , hint , important Tip Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. success , check , done Success Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. question , help , faq Question Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. warning , caution , attention Warning Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. failure , fail , missing Failure Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. danger , error Danger Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. bug Bug Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. example Example Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. quote , cite Quote Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.","title":"Supported types"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/admonitions/#customization","text":"","title":"Customization"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/admonitions/#custom-admonitions","text":"If you want to add a custom admonition type, all you need is a color and an svg icon. Copy the icon's svg code from the .icons folder and add the following CSS to an additional stylesheet : : root { -- md-admonition-icon--pied-piper : url ( 'data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path d=\"M244 246c-3.2-2-6.3-2.9-10.1-2.9-6.6 0-12.6 3.2-19.3 3.7l1.7 4.9zm135.9 197.9c-19 0-64.1 9.5-79.9 19.8l6.9 45.1c35.7 6.1 70.1 3.6 106-9.8-4.8-10-23.5-55.1-33-55.1zM340.8 177c6.6 2.8 11.5 9.2 22.7 22.1 2-1.4 7.5-5.2 7.5-8.6 0-4.9-11.8-13.2-13.2-23 11.2-5.7 25.2-6 37.6-8.9 68.1-16.4 116.3-52.9 146.8-116.7C548.3 29.3 554 16.1 554.6 2l-2 2.6c-28.4 50-33 63.2-81.3 100-31.9 24.4-69.2 40.2-106.6 54.6l-6.3-.3v-21.8c-19.6 1.6-19.7-14.6-31.6-23-18.7 20.6-31.6 40.8-58.9 51.1-12.7 4.8-19.6 10-25.9 21.8 34.9-16.4 91.2-13.5 98.8-10zM555.5 0l-.6 1.1-.3.9.6-.6zm-59.2 382.1c-33.9-56.9-75.3-118.4-150-115.5l-.3-6c-1.1-13.5 32.8 3.2 35.1-31l-14.4 7.2c-19.8-45.7-8.6-54.3-65.5-54.3-14.7 0-26.7 1.7-41.4 4.6 2.9 18.6 2.2 36.7-10.9 50.3l19.5 5.5c-1.7 3.2-2.9 6.3-2.9 9.8 0 21 42.8 2.9 42.8 33.6 0 18.4-36.8 60.1-54.9 60.1-8 0-53.7-50-53.4-60.1l.3-4.6 52.3-11.5c13-2.6 12.3-22.7-2.9-22.7-3.7 0-43.1 9.2-49.4 10.6-2-5.2-7.5-14.1-13.8-14.1-3.2 0-6.3 3.2-9.5 4-9.2 2.6-31 2.9-21.5 20.1L15.9 298.5c-5.5 1.1-8.9 6.3-8.9 11.8 0 6 5.5 10.9 11.5 10.9 8 0 131.3-28.4 147.4-32.2 2.6 3.2 4.6 6.3 7.8 8.6 20.1 14.4 59.8 85.9 76.4 85.9 24.1 0 58-22.4 71.3-41.9 3.2-4.3 6.9-7.5 12.4-6.9.6 13.8-31.6 34.2-33 43.7-1.4 10.2-1 35.2-.3 41.1 26.7 8.1 52-3.6 77.9-2.9 4.3-21 10.6-41.9 9.8-63.5l-.3-9.5c-1.4-34.2-10.9-38.5-34.8-58.6-1.1-1.1-2.6-2.6-3.7-4 2.2-1.4 1.1-1 4.6-1.7 88.5 0 56.3 183.6 111.5 229.9 33.1-15 72.5-27.9 103.5-47.2-29-25.6-52.6-45.7-72.7-79.9zm-196.2 46.1v27.2l11.8-3.4-2.9-23.8zm-68.7-150.4l24.1 61.2 21-13.8-31.3-50.9zm84.4 154.9l2 12.4c9-1.5 58.4-6.6 58.4-14.1 0-1.4-.6-3.2-.9-4.6-26.8 0-36.9 3.8-59.5 6.3z\"/></svg>' ) } . md-typeset . admonition . pied-piper , . md-typeset details . pied-piper { border-color : rgb ( 43 , 155 , 70 ); } . md-typeset . pied-piper > . admonition-title , . md-typeset . pied-piper > summary { background-color : rgba ( 43 , 155 , 70 , 0.1 ); } . md-typeset . pied-piper > . admonition-title :: before , . md-typeset . pied-piper > summary :: before { background-color : rgb ( 43 , 155 , 70 ); -webkit- mask-image : var ( -- md - admonition - icon -- pied - piper ); mask-image : var ( -- md - admonition - icon -- pied - piper ); } You should now be able to create an admonition of the pied-piper type. Note that you can also use this technique to override existing admonition icons or colors. You can even add animations . :root { --md-admonition-icon--pied-piper: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path d=\"M244 246c-3.2-2-6.3-2.9-10.1-2.9-6.6 0-12.6 3.2-19.3 3.7l1.7 4.9zm135.9 197.9c-19 0-64.1 9.5-79.9 19.8l6.9 45.1c35.7 6.1 70.1 3.6 106-9.8-4.8-10-23.5-55.1-33-55.1zM340.8 177c6.6 2.8 11.5 9.2 22.7 22.1 2-1.4 7.5-5.2 7.5-8.6 0-4.9-11.8-13.2-13.2-23 11.2-5.7 25.2-6 37.6-8.9 68.1-16.4 116.3-52.9 146.8-116.7C548.3 29.3 554 16.1 554.6 2l-2 2.6c-28.4 50-33 63.2-81.3 100-31.9 24.4-69.2 40.2-106.6 54.6l-6.3-.3v-21.8c-19.6 1.6-19.7-14.6-31.6-23-18.7 20.6-31.6 40.8-58.9 51.1-12.7 4.8-19.6 10-25.9 21.8 34.9-16.4 91.2-13.5 98.8-10zM555.5 0l-.6 1.1-.3.9.6-.6zm-59.2 382.1c-33.9-56.9-75.3-118.4-150-115.5l-.3-6c-1.1-13.5 32.8 3.2 35.1-31l-14.4 7.2c-19.8-45.7-8.6-54.3-65.5-54.3-14.7 0-26.7 1.7-41.4 4.6 2.9 18.6 2.2 36.7-10.9 50.3l19.5 5.5c-1.7 3.2-2.9 6.3-2.9 9.8 0 21 42.8 2.9 42.8 33.6 0 18.4-36.8 60.1-54.9 60.1-8 0-53.7-50-53.4-60.1l.3-4.6 52.3-11.5c13-2.6 12.3-22.7-2.9-22.7-3.7 0-43.1 9.2-49.4 10.6-2-5.2-7.5-14.1-13.8-14.1-3.2 0-6.3 3.2-9.5 4-9.2 2.6-31 2.9-21.5 20.1L15.9 298.5c-5.5 1.1-8.9 6.3-8.9 11.8 0 6 5.5 10.9 11.5 10.9 8 0 131.3-28.4 147.4-32.2 2.6 3.2 4.6 6.3 7.8 8.6 20.1 14.4 59.8 85.9 76.4 85.9 24.1 0 58-22.4 71.3-41.9 3.2-4.3 6.9-7.5 12.4-6.9.6 13.8-31.6 34.2-33 43.7-1.4 10.2-1 35.2-.3 41.1 26.7 8.1 52-3.6 77.9-2.9 4.3-21 10.6-41.9 9.8-63.5l-.3-9.5c-1.4-34.2-10.9-38.5-34.8-58.6-1.1-1.1-2.6-2.6-3.7-4 2.2-1.4 1.1-1 4.6-1.7 88.5 0 56.3 183.6 111.5 229.9 33.1-15 72.5-27.9 103.5-47.2-29-25.6-52.6-45.7-72.7-79.9zm-196.2 46.1v27.2l11.8-3.4-2.9-23.8zm-68.7-150.4l24.1 61.2 21-13.8-31.3-50.9zm84.4 154.9l2 12.4c9-1.5 58.4-6.6 58.4-14.1 0-1.4-.6-3.2-.9-4.6-26.8 0-36.9 3.8-59.5 6.3z\"/></svg>') } .md-typeset .admonition.pied-piper, .md-typeset details.pied-piper { border-color: rgb(43, 155, 70); } .md-typeset .pied-piper > .admonition-title, .md-typeset .pied-piper > summary { background-color: rgba(43, 155, 70, 0.1); } .md-typeset .pied-piper > .admonition-title::before, .md-typeset .pied-piper > summary::before { background-color: rgb(43, 155, 70); -webkit-mask-image: var(--md-admonition-icon--pied-piper); mask-image: var(--md-admonition-icon--pied-piper); } Example : !!! pied-piper \"Pied Piper\" Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Result : Pied Piper Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.","title":"Custom admonitions"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/buttons/","text":"Buttons \u00b6 Material for MkDocs provides dedicated styles for primary and secondary buttons that can be added to any link, label or button element. This is especially useful for documents or landing pages with dedicated call-to-actions . Configuration \u00b6 Attribute List \u00b6 The Attribute List extension, which is part of the standard Markdown library, allows to add HTML attributes and CSS classes to Markdown elements , and can be enabled via mkdocs.yml markdown_extensions : - attr_list Usage \u00b6 Adding buttons \u00b6 When the Attribute List extension is enabled, any clickable element can be converted into a button by adding the .md-button CSS class, which will receive the selected primary color . Example : [Subscribe to our mailing list](#){: .md-button } Result : Subscribe to our mailing list Adding primary buttons \u00b6 If you want to display a filled, primary button (like on the landing page of Material for MkDocs), add both the .md-button and .md-button--primary CSS classes. Example : [Subscribe to our mailing list](#){: .md-button .md-button--primary } Result : Subscribe to our mailing list Adding icon buttons \u00b6 Of course, icons can be added to both types of buttons by using the regular icon syntax and referencing a valid path to any icon bundled with the theme . Example : [Submit :fontawesome-solid-paper-plane:](#){: .md-button .md-button--primary } Result : Submit","title":"Buttons"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/buttons/#buttons","text":"Material for MkDocs provides dedicated styles for primary and secondary buttons that can be added to any link, label or button element. This is especially useful for documents or landing pages with dedicated call-to-actions .","title":"Buttons"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/buttons/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/buttons/#attribute-list","text":"The Attribute List extension, which is part of the standard Markdown library, allows to add HTML attributes and CSS classes to Markdown elements , and can be enabled via mkdocs.yml markdown_extensions : - attr_list","title":"Attribute List"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/buttons/#usage","text":"","title":"Usage"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/buttons/#adding-buttons","text":"When the Attribute List extension is enabled, any clickable element can be converted into a button by adding the .md-button CSS class, which will receive the selected primary color . Example : [Subscribe to our mailing list](#){: .md-button } Result : Subscribe to our mailing list","title":"Adding buttons"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/buttons/#adding-primary-buttons","text":"If you want to display a filled, primary button (like on the landing page of Material for MkDocs), add both the .md-button and .md-button--primary CSS classes. Example : [Subscribe to our mailing list](#){: .md-button .md-button--primary } Result : Subscribe to our mailing list","title":"Adding primary buttons"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/buttons/#adding-icon-buttons","text":"Of course, icons can be added to both types of buttons by using the regular icon syntax and referencing a valid path to any icon bundled with the theme . Example : [Submit :fontawesome-solid-paper-plane:](#){: .md-button .md-button--primary } Result : Submit","title":"Adding icon buttons"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/code-blocks/","text":"Code blocks \u00b6 Code blocks and examples are an essential part of technical project documentation. Material for MkDocs provides different ways to set up syntax highlighting for code blocks, either during build time using Pygments or during runtime using a JavaScript syntax highlighter. Configuration \u00b6 Highlight \u00b6 Source \u00b7 Extension \u00b7 Supersedes: CodeHilite The Highlight extension, which is part of Python Markdown Extensions , integrates with Material for MkDocs and provides several options for configuring syntax highlighting of code blocks: use_pygments Default: true \u2013 This option allows to control whether highlighting should be carried out during build time by Pygments or runtime with a JavaScript highlighter. Remember to add the necessary additional stylesheets and JavaScript if you want to use the latter: Pygments markdown_extensions : - pymdownx.highlight - pymdownx.superfences JavaScript markdown_extensions : - pymdownx.highlight : use_pygments : false Syntax highlighting with Highlight.js Highlight.js can be integrated by creating an additional JavaScript file initializing the highlighter and including the respective stylesheet and JavaScript from a CDN serving Highlight.js in mkdocs.yml : docs/javascripts/config.js hljs . initHighlighting () mkdocs.yml extra_javascript : - https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js - javascripts/config.js extra_css : - https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css Note that Highlight.js has no affiliation with the Highlight extension. linenums Default: false \u2013 This option will add line numbers to all code blocks. If you wish to add line numbers to some , but not all code blocks, consult the section on adding line numbers later in this document, which also contains some tips on working with line numbers: markdown_extensions : - pymdownx.highlight : linenums : true linenums_style Default: table \u2013 The Highlight extension provides three ways to add line numbers, all of which are supported by Material for MkDocs. While table wraps a code block in a table, inline and pymdownx.inline render line numbers as part of the line itself: markdown_extensions : - pymdownx.highlight : linenums_style : pymdownx.inline Note that inline will put line numbers next to the actual code, which means that they will be included when selecting text with the cursor or copying a code block to the clipboard. Thus, the usage of table or pymdownx.inline is recommended. Material for MkDocs doesn't provide official support for the other options of this extension, so they may be supported but can also yield weird results. Use them at your own risk. InlineHilite \u00b6 Source \u00b7 Extension The InlineHilite extension, which is part of Python Markdown Extensions also integrates with Material for MkDocs and adds support for syntax highlighting of inline code blocks . It's built on top of the Highlight extension and can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.inlinehilite See the section on inline code blocks for usage information. Keys \u00b6 Source \u00b7 Extension The Keys extension, which is part of Python Markdown Extensions , allows for inserting keyboard keys , e.g. Ctrl + Alt + Del , and can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.keys SuperFences \u00b6 The SuperFences extension, which is also part of Python Markdown Extensions , allows for the nesting of code blocks inside other blocks , and is therefore strongly recommended: markdown_extensions : - pymdownx.superfences Snippets \u00b6 The Snippets extension, which is also part of Python Markdown Extensions , allows to insert content from other files or other, regular content, and can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.snippets Usage \u00b6 This section discusses how to use different syntax highlighting features with Pygments \u2013 the default highlighter \u2013 so they don't apply when using a JavaScript syntax highlighter. Specifying the language \u00b6 Code blocks must be enclosed with two separate lines containing three backticks. To add code highlighting to those blocks, add the language short name directly after the opening block. See the list of available lexers to find the short name for a given language. Example : ``` python import tensorflow as tf ``` Result : import tensorflow as tf Adding line numbers \u00b6 Line numbers can be added to a code block by using the linenums=\"<start>\" option directly after the short name, whereas <start> represents the starting line number. A code block can start from a line number other than 1 , which allows splitting large code blocks for readability. Example : ``` python linenums=\"1\" def bubble_sort(items): for i in range(len(items)): for j in range(len(items) - 1 - i): if items[j] > items[j + 1]: items[j], items[j + 1] = items[j + 1], items[j] ``` Result : 1 2 3 4 5 def bubble_sort ( items ): for i in range ( len ( items )): for j in range ( len ( items ) - 1 - i ): if items [ j ] > items [ j + 1 ]: items [ j ], items [ j + 1 ] = items [ j + 1 ], items [ j ] Highlighting specific lines \u00b6 Specific lines can be highlighted by passing the line numbers to the hl_lines argument placed right after the language short name. Note that line counts start at 1 , regardless of the starting line number specified as part of linenums . Example : ``` python hl_lines=\"2 3\" def bubble_sort(items): for i in range(len(items)): for j in range(len(items) - 1 - i): if items[j] > items[j + 1]: items[j], items[j + 1] = items[j + 1], items[j] ``` Result : def bubble_sort ( items ): for i in range ( len ( items )): for j in range ( len ( items ) - 1 - i ): if items [ j ] > items [ j + 1 ]: items [ j ], items [ j + 1 ] = items [ j + 1 ], items [ j ] Highlighting inline code blocks \u00b6 When InlineHilite is enabled, inline code blocks can be highlighted by prefixing them with a shebang-like sequence, i.e. #! , directly followed by the language short name . Example : The `#!python range()` function is used to generate a sequence of numbers. Result : The range () function is used to generate a sequence of numbers. Adding keyboard keys \u00b6 When Keys is enabled, keyboard keys can be rendered with a simple syntax. Consult the Python Markdown Extensions documentation to learn about all available key codes. Example : ++ctrl+alt+del++ Result : Ctrl + Alt + Del Embedding external files \u00b6 Also known as transcludes or file transclusion in MultiMarkdown . When Snippets is enabled, content from other files can be embedded, which is especially useful to reference and embed the contents of source files directly into your project documentation. Example : ``` --8<--\u200b \".browserslistrc\" ``` Result : last 4 years Note that Snippets is not limited to code blocks, but can be used anywhere from a document to move repeating content to separate files, which is also explained in the official documentation . Customization \u00b6 Custom syntax theme \u00b6 Source \u00b7 Difficulty: easy If Pygments is used, Material for MkDocs provides the styles for code blocks , which are built with a custom and well-balanced palette that works equally well for both color schemes : --md-code-hl-number-color --md-code-hl-special-color --md-code-hl-function-color --md-code-hl-constant-color --md-code-hl-keyword-color --md-code-hl-string-color --md-code-hl-name-color --md-code-hl-operator-color --md-code-hl-punctuation-color --md-code-hl-comment-color --md-code-hl-generic-color --md-code-hl-variable-color Code block foreground, background and line highlight colors are defined via: --md-code-fg-color --md-code-bg-color --md-code-hl-color Let's say you want to change the color of \"strings\" . While there are several types of string tokens , Material for MkDocs assigns a single color to most of them. Create an additional stylesheet , and add: : root > * { -- md-code-hl-string-color : #0FF1CE ; } If you want to tweak a specific type of string, i.e. `backticks` , you can lookup the specific class name in the syntax theme definition , and override it as part of your additional stylesheet: . highlight . sb { color : #0FF1CE ; }","title":"Code blocks"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/code-blocks/#code-blocks","text":"Code blocks and examples are an essential part of technical project documentation. Material for MkDocs provides different ways to set up syntax highlighting for code blocks, either during build time using Pygments or during runtime using a JavaScript syntax highlighter.","title":"Code blocks"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/code-blocks/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/code-blocks/#highlight","text":"Source \u00b7 Extension \u00b7 Supersedes: CodeHilite The Highlight extension, which is part of Python Markdown Extensions , integrates with Material for MkDocs and provides several options for configuring syntax highlighting of code blocks: use_pygments Default: true \u2013 This option allows to control whether highlighting should be carried out during build time by Pygments or runtime with a JavaScript highlighter. Remember to add the necessary additional stylesheets and JavaScript if you want to use the latter: Pygments markdown_extensions : - pymdownx.highlight - pymdownx.superfences JavaScript markdown_extensions : - pymdownx.highlight : use_pygments : false Syntax highlighting with Highlight.js Highlight.js can be integrated by creating an additional JavaScript file initializing the highlighter and including the respective stylesheet and JavaScript from a CDN serving Highlight.js in mkdocs.yml : docs/javascripts/config.js hljs . initHighlighting () mkdocs.yml extra_javascript : - https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js - javascripts/config.js extra_css : - https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css Note that Highlight.js has no affiliation with the Highlight extension. linenums Default: false \u2013 This option will add line numbers to all code blocks. If you wish to add line numbers to some , but not all code blocks, consult the section on adding line numbers later in this document, which also contains some tips on working with line numbers: markdown_extensions : - pymdownx.highlight : linenums : true linenums_style Default: table \u2013 The Highlight extension provides three ways to add line numbers, all of which are supported by Material for MkDocs. While table wraps a code block in a table, inline and pymdownx.inline render line numbers as part of the line itself: markdown_extensions : - pymdownx.highlight : linenums_style : pymdownx.inline Note that inline will put line numbers next to the actual code, which means that they will be included when selecting text with the cursor or copying a code block to the clipboard. Thus, the usage of table or pymdownx.inline is recommended. Material for MkDocs doesn't provide official support for the other options of this extension, so they may be supported but can also yield weird results. Use them at your own risk.","title":"Highlight"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/code-blocks/#inlinehilite","text":"Source \u00b7 Extension The InlineHilite extension, which is part of Python Markdown Extensions also integrates with Material for MkDocs and adds support for syntax highlighting of inline code blocks . It's built on top of the Highlight extension and can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.inlinehilite See the section on inline code blocks for usage information.","title":"InlineHilite"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/code-blocks/#keys","text":"Source \u00b7 Extension The Keys extension, which is part of Python Markdown Extensions , allows for inserting keyboard keys , e.g. Ctrl + Alt + Del , and can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.keys","title":"Keys"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/code-blocks/#superfences","text":"The SuperFences extension, which is also part of Python Markdown Extensions , allows for the nesting of code blocks inside other blocks , and is therefore strongly recommended: markdown_extensions : - pymdownx.superfences","title":"SuperFences"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/code-blocks/#snippets","text":"The Snippets extension, which is also part of Python Markdown Extensions , allows to insert content from other files or other, regular content, and can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.snippets","title":"Snippets"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/code-blocks/#usage","text":"This section discusses how to use different syntax highlighting features with Pygments \u2013 the default highlighter \u2013 so they don't apply when using a JavaScript syntax highlighter.","title":"Usage"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/code-blocks/#specifying-the-language","text":"Code blocks must be enclosed with two separate lines containing three backticks. To add code highlighting to those blocks, add the language short name directly after the opening block. See the list of available lexers to find the short name for a given language. Example : ``` python import tensorflow as tf ``` Result : import tensorflow as tf","title":"Specifying the language"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/code-blocks/#adding-line-numbers","text":"Line numbers can be added to a code block by using the linenums=\"<start>\" option directly after the short name, whereas <start> represents the starting line number. A code block can start from a line number other than 1 , which allows splitting large code blocks for readability. Example : ``` python linenums=\"1\" def bubble_sort(items): for i in range(len(items)): for j in range(len(items) - 1 - i): if items[j] > items[j + 1]: items[j], items[j + 1] = items[j + 1], items[j] ``` Result : 1 2 3 4 5 def bubble_sort ( items ): for i in range ( len ( items )): for j in range ( len ( items ) - 1 - i ): if items [ j ] > items [ j + 1 ]: items [ j ], items [ j + 1 ] = items [ j + 1 ], items [ j ]","title":"Adding line numbers"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/code-blocks/#highlighting-specific-lines","text":"Specific lines can be highlighted by passing the line numbers to the hl_lines argument placed right after the language short name. Note that line counts start at 1 , regardless of the starting line number specified as part of linenums . Example : ``` python hl_lines=\"2 3\" def bubble_sort(items): for i in range(len(items)): for j in range(len(items) - 1 - i): if items[j] > items[j + 1]: items[j], items[j + 1] = items[j + 1], items[j] ``` Result : def bubble_sort ( items ): for i in range ( len ( items )): for j in range ( len ( items ) - 1 - i ): if items [ j ] > items [ j + 1 ]: items [ j ], items [ j + 1 ] = items [ j + 1 ], items [ j ]","title":"Highlighting specific lines"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/code-blocks/#highlighting-inline-code-blocks","text":"When InlineHilite is enabled, inline code blocks can be highlighted by prefixing them with a shebang-like sequence, i.e. #! , directly followed by the language short name . Example : The `#!python range()` function is used to generate a sequence of numbers. Result : The range () function is used to generate a sequence of numbers.","title":"Highlighting inline code blocks"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/code-blocks/#adding-keyboard-keys","text":"When Keys is enabled, keyboard keys can be rendered with a simple syntax. Consult the Python Markdown Extensions documentation to learn about all available key codes. Example : ++ctrl+alt+del++ Result : Ctrl + Alt + Del","title":"Adding keyboard keys"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/code-blocks/#embedding-external-files","text":"Also known as transcludes or file transclusion in MultiMarkdown . When Snippets is enabled, content from other files can be embedded, which is especially useful to reference and embed the contents of source files directly into your project documentation. Example : ``` --8<--\u200b \".browserslistrc\" ``` Result : last 4 years Note that Snippets is not limited to code blocks, but can be used anywhere from a document to move repeating content to separate files, which is also explained in the official documentation .","title":"Embedding external files"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/code-blocks/#customization","text":"","title":"Customization"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/code-blocks/#custom-syntax-theme","text":"Source \u00b7 Difficulty: easy If Pygments is used, Material for MkDocs provides the styles for code blocks , which are built with a custom and well-balanced palette that works equally well for both color schemes : --md-code-hl-number-color --md-code-hl-special-color --md-code-hl-function-color --md-code-hl-constant-color --md-code-hl-keyword-color --md-code-hl-string-color --md-code-hl-name-color --md-code-hl-operator-color --md-code-hl-punctuation-color --md-code-hl-comment-color --md-code-hl-generic-color --md-code-hl-variable-color Code block foreground, background and line highlight colors are defined via: --md-code-fg-color --md-code-bg-color --md-code-hl-color Let's say you want to change the color of \"strings\" . While there are several types of string tokens , Material for MkDocs assigns a single color to most of them. Create an additional stylesheet , and add: : root > * { -- md-code-hl-string-color : #0FF1CE ; } If you want to tweak a specific type of string, i.e. `backticks` , you can lookup the specific class name in the syntax theme definition , and override it as part of your additional stylesheet: . highlight . sb { color : #0FF1CE ; }","title":"Custom syntax theme"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/content-tabs/","text":"Content tabs \u00b6 Sometimes, it's desirable to group alternative content under different tabs, e.g. when describing how to access an API from different languages or environments. Material for MkDocs allows for beautiful and functional tabs, grouping code blocks and other content. Configuration \u00b6 Tabbed \u00b6 Source \u00b7 Extension The Tabbed extension, which is part of Python Markdown Extensions , integrates with Material for MkDocs and can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.tabbed SuperFences \u00b6 The SuperFences extension, which is also part of Python Markdown Extensions , allows for the nesting of code and content blocks inside tabs , and is therefore strongly recommended: markdown_extensions : - pymdownx.superfences Usage \u00b6 Grouping code blocks \u00b6 Code blocks are one of the primary targets to be grouped, and can be considered a special case of content tabs, as tabs with a single code block are always rendered without horizontal spacing. Example : === \"C\" ``` c #include <stdio.h> int main(void) { printf(\"Hello world!\\n\"); return 0; } ``` === \"C++\" ``` c++ #include <iostream> int main(void) { std::cout << \"Hello world!\" << std::endl; return 0; } ``` Result : C #include <stdio.h> int main ( void ) { printf ( \"Hello world! \\n \" ); return 0 ; } C++ #include <iostream> int main ( void ) { std :: cout << \"Hello world!\" << std :: endl ; return 0 ; } Grouping other content \u00b6 When a content tab contains more than one code block, it is rendered with horizontal spacing. Vertical spacing is never added, but can be achieved by nesting tabs in other blocks. Example : === \"Unordered list\" * Sed sagittis eleifend rutrum * Donec vitae suscipit est * Nulla tempor lobortis orci === \"Ordered list\" 1. Sed sagittis eleifend rutrum 2. Donec vitae suscipit est 3. Nulla tempor lobortis orci Result : Unordered list Sed sagittis eleifend rutrum Donec vitae suscipit est Nulla tempor lobortis orci Ordered list Sed sagittis eleifend rutrum Donec vitae suscipit est Nulla tempor lobortis orci Embedded content \u00b6 When SuperFences is enabled, content tabs can contain arbitrary nested content, including further content tabs, and can be nested in other blocks like admonitions , details or blockquotes: Example : !!! example === \"Unordered List\" _Example_: ``` markdown * Sed sagittis eleifend rutrum * Donec vitae suscipit est * Nulla tempor lobortis orci ``` _Result_: * Sed sagittis eleifend rutrum * Donec vitae suscipit est * Nulla tempor lobortis orci === \"Ordered List\" _Example_: ``` markdown 1. Sed sagittis eleifend rutrum 2. Donec vitae suscipit est 3. Nulla tempor lobortis orci ``` _Result_: 1. Sed sagittis eleifend rutrum 2. Donec vitae suscipit est 3. Nulla tempor lobortis orci Result : Example Unordered List Example : * Sed sagittis eleifend rutrum * Donec vitae suscipit est * Nulla tempor lobortis orci Result : Sed sagittis eleifend rutrum Donec vitae suscipit est Nulla tempor lobortis orci Ordered List Example : 1. Sed sagittis eleifend rutrum 2. Donec vitae suscipit est 3. Nulla tempor lobortis orci Result : Sed sagittis eleifend rutrum Donec vitae suscipit est Nulla tempor lobortis orci","title":"Content tabs"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/content-tabs/#content-tabs","text":"Sometimes, it's desirable to group alternative content under different tabs, e.g. when describing how to access an API from different languages or environments. Material for MkDocs allows for beautiful and functional tabs, grouping code blocks and other content.","title":"Content tabs"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/content-tabs/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/content-tabs/#tabbed","text":"Source \u00b7 Extension The Tabbed extension, which is part of Python Markdown Extensions , integrates with Material for MkDocs and can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.tabbed","title":"Tabbed"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/content-tabs/#superfences","text":"The SuperFences extension, which is also part of Python Markdown Extensions , allows for the nesting of code and content blocks inside tabs , and is therefore strongly recommended: markdown_extensions : - pymdownx.superfences","title":"SuperFences"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/content-tabs/#usage","text":"","title":"Usage"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/content-tabs/#grouping-code-blocks","text":"Code blocks are one of the primary targets to be grouped, and can be considered a special case of content tabs, as tabs with a single code block are always rendered without horizontal spacing. Example : === \"C\" ``` c #include <stdio.h> int main(void) { printf(\"Hello world!\\n\"); return 0; } ``` === \"C++\" ``` c++ #include <iostream> int main(void) { std::cout << \"Hello world!\" << std::endl; return 0; } ``` Result : C #include <stdio.h> int main ( void ) { printf ( \"Hello world! \\n \" ); return 0 ; } C++ #include <iostream> int main ( void ) { std :: cout << \"Hello world!\" << std :: endl ; return 0 ; }","title":"Grouping code blocks"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/content-tabs/#grouping-other-content","text":"When a content tab contains more than one code block, it is rendered with horizontal spacing. Vertical spacing is never added, but can be achieved by nesting tabs in other blocks. Example : === \"Unordered list\" * Sed sagittis eleifend rutrum * Donec vitae suscipit est * Nulla tempor lobortis orci === \"Ordered list\" 1. Sed sagittis eleifend rutrum 2. Donec vitae suscipit est 3. Nulla tempor lobortis orci Result : Unordered list Sed sagittis eleifend rutrum Donec vitae suscipit est Nulla tempor lobortis orci Ordered list Sed sagittis eleifend rutrum Donec vitae suscipit est Nulla tempor lobortis orci","title":"Grouping other content"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/content-tabs/#embedded-content","text":"When SuperFences is enabled, content tabs can contain arbitrary nested content, including further content tabs, and can be nested in other blocks like admonitions , details or blockquotes: Example : !!! example === \"Unordered List\" _Example_: ``` markdown * Sed sagittis eleifend rutrum * Donec vitae suscipit est * Nulla tempor lobortis orci ``` _Result_: * Sed sagittis eleifend rutrum * Donec vitae suscipit est * Nulla tempor lobortis orci === \"Ordered List\" _Example_: ``` markdown 1. Sed sagittis eleifend rutrum 2. Donec vitae suscipit est 3. Nulla tempor lobortis orci ``` _Result_: 1. Sed sagittis eleifend rutrum 2. Donec vitae suscipit est 3. Nulla tempor lobortis orci Result : Example Unordered List Example : * Sed sagittis eleifend rutrum * Donec vitae suscipit est * Nulla tempor lobortis orci Result : Sed sagittis eleifend rutrum Donec vitae suscipit est Nulla tempor lobortis orci Ordered List Example : 1. Sed sagittis eleifend rutrum 2. Donec vitae suscipit est 3. Nulla tempor lobortis orci Result : Sed sagittis eleifend rutrum Donec vitae suscipit est Nulla tempor lobortis orci","title":"Embedded content"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/data-tables/","text":"Data tables \u00b6 Material for MkDocs defines default styles for data tables \u2013 an excellent way of rendering tabular data in project documentation. Furthermore, customizations like sortable tables can be achieved with a third-party library and some additional JavaScript . Configuration \u00b6 None. Usage \u00b6 Using data tables \u00b6 Data tables can be used at any position in your project documentation and can contain arbitrary Markdown, including inline code blocks, as well as icons and emojis . Example : | Method | Description | | ----------- | ------------------------------------ | | `GET` | :material-check: Fetch resource | | `PUT` | :material-check-all: Update resource | | `DELETE` | :material-close: Delete resource | Result : Method Description GET Fetch resource PUT Update resource DELETE Delete resource Column alignment \u00b6 If you want to align a specific column to the left , center or right , you can use the regular Markdown syntax placing : characters at the beginning and/or end of the divider. Left Example : | Method | Description | | :---------- | :----------------------------------- | | `GET` | :material-check: Fetch resource | | `PUT` | :material-check-all: Update resource | | `DELETE` | :material-close: Delete resource | Result : Method Description GET Fetch resource PUT Update resource DELETE Delete resource Center Example : | Method | Description | | :---------: | :----------------------------------: | | `GET` | :material-check: Fetch resource | | `PUT` | :material-check-all: Update resource | | `DELETE` | :material-close: Delete resource | Result : Method Description GET Fetch resource PUT Update resource DELETE Delete resource Right Example : | Method | Description | | ----------: | -----------------------------------: | | `GET` | :material-check: Fetch resource | | `PUT` | :material-check-all: Update resource | | `DELETE` | :material-close: Delete resource | Result : Method Description GET Fetch resource PUT Update resource DELETE Delete resource Customization \u00b6 Sortable tables \u00b6 If you want to make data tables sortable, you can add tablesort , which is natively integrated with Material for MkDocs and will also work with instant loading via additional JavaScript : docs/javascripts/tables.js app . document $ . subscribe ( function () { var tables = document . querySelectorAll ( \"article table\" ) tables . forEach ( function ( table ) { new Tablesort ( table ) }) }) mkdocs.yml extra_javascript : - https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js - javascripts/tables.js Note that tablesort provides alternative comparison implementations like numbers, dates, filesizes and month names. See the official documentation for more information. Example : | Method | Description | | ----------- | ------------------------------------ | | `GET` | :material-check: Fetch resource | | `PUT` | :material-check-all: Update resource | | `DELETE` | :material-close: Delete resource | Result : Method Description GET Fetch resource PUT Update resource DELETE Delete resource var tables = document.querySelectorAll(\"article table\") new Tablesort(tables.item(tables.length - 1));","title":"Data tables"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/data-tables/#data-tables","text":"Material for MkDocs defines default styles for data tables \u2013 an excellent way of rendering tabular data in project documentation. Furthermore, customizations like sortable tables can be achieved with a third-party library and some additional JavaScript .","title":"Data tables"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/data-tables/#configuration","text":"None.","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/data-tables/#usage","text":"","title":"Usage"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/data-tables/#using-data-tables","text":"Data tables can be used at any position in your project documentation and can contain arbitrary Markdown, including inline code blocks, as well as icons and emojis . Example : | Method | Description | | ----------- | ------------------------------------ | | `GET` | :material-check: Fetch resource | | `PUT` | :material-check-all: Update resource | | `DELETE` | :material-close: Delete resource | Result : Method Description GET Fetch resource PUT Update resource DELETE Delete resource","title":"Using data tables"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/data-tables/#column-alignment","text":"If you want to align a specific column to the left , center or right , you can use the regular Markdown syntax placing : characters at the beginning and/or end of the divider. Left Example : | Method | Description | | :---------- | :----------------------------------- | | `GET` | :material-check: Fetch resource | | `PUT` | :material-check-all: Update resource | | `DELETE` | :material-close: Delete resource | Result : Method Description GET Fetch resource PUT Update resource DELETE Delete resource Center Example : | Method | Description | | :---------: | :----------------------------------: | | `GET` | :material-check: Fetch resource | | `PUT` | :material-check-all: Update resource | | `DELETE` | :material-close: Delete resource | Result : Method Description GET Fetch resource PUT Update resource DELETE Delete resource Right Example : | Method | Description | | ----------: | -----------------------------------: | | `GET` | :material-check: Fetch resource | | `PUT` | :material-check-all: Update resource | | `DELETE` | :material-close: Delete resource | Result : Method Description GET Fetch resource PUT Update resource DELETE Delete resource","title":"Column alignment"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/data-tables/#customization","text":"","title":"Customization"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/data-tables/#sortable-tables","text":"If you want to make data tables sortable, you can add tablesort , which is natively integrated with Material for MkDocs and will also work with instant loading via additional JavaScript : docs/javascripts/tables.js app . document $ . subscribe ( function () { var tables = document . querySelectorAll ( \"article table\" ) tables . forEach ( function ( table ) { new Tablesort ( table ) }) }) mkdocs.yml extra_javascript : - https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js - javascripts/tables.js Note that tablesort provides alternative comparison implementations like numbers, dates, filesizes and month names. See the official documentation for more information. Example : | Method | Description | | ----------- | ------------------------------------ | | `GET` | :material-check: Fetch resource | | `PUT` | :material-check-all: Update resource | | `DELETE` | :material-close: Delete resource | Result : Method Description GET Fetch resource PUT Update resource DELETE Delete resource var tables = document.querySelectorAll(\"article table\") new Tablesort(tables.item(tables.length - 1));","title":"Sortable tables"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/footnotes/","text":"Footnotes \u00b6 Footnotes are a great way to add references to supplemental or additional information for a specific section of a document without interrupting the document flow. Material for MkDocs provides the ability to insert inline footnotes and render them at the bottom of the page. Configuration \u00b6 Footnotes \u00b6 Source \u00b7 Extension The Footnotes extension, which is part of the standard Markdown library, adds the ability to add inline footnotes to a document and can be enabled via mkdocs.yml : markdown_extensions : - footnotes Usage \u00b6 Adding footnote references \u00b6 A footnote reference must be enclosed in square brackets and must start with a caret ^ , directly followed by an arbitrary identifier, which is similar to the standard Markdown link syntax. Example : Lorem ipsum[^1] dolor sit amet, consectetur adipiscing elit.[^2] Result : Lorem ipsum 1 dolor sit amet, consectetur adipiscing elit. 2 Adding footnote content \u00b6 The footnote content must be declared with the same identifier as the reference. It can be inserted at an arbitrary position in the document and is always rendered at the bottom of the page. Furthermore, a backlink to the footnote reference is automatically added. on a single line \u00b6 Short statements can be written on the same line. Example : [^1]: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Result : Jump to footnote at the bottom of the page on multiple lines \u00b6 Paragraphs can be written on the next line and must be indented by four spaces. Example : [^2]: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Result : Jump to footnote at the bottom of the page Lorem ipsum dolor sit amet, consectetur adipiscing elit. \u21a9 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. \u21a9","title":"Footnotes"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/footnotes/#footnotes","text":"Footnotes are a great way to add references to supplemental or additional information for a specific section of a document without interrupting the document flow. Material for MkDocs provides the ability to insert inline footnotes and render them at the bottom of the page.","title":"Footnotes"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/footnotes/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/footnotes/#footnotes_1","text":"Source \u00b7 Extension The Footnotes extension, which is part of the standard Markdown library, adds the ability to add inline footnotes to a document and can be enabled via mkdocs.yml : markdown_extensions : - footnotes","title":"Footnotes"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/footnotes/#usage","text":"","title":"Usage"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/footnotes/#adding-footnote-references","text":"A footnote reference must be enclosed in square brackets and must start with a caret ^ , directly followed by an arbitrary identifier, which is similar to the standard Markdown link syntax. Example : Lorem ipsum[^1] dolor sit amet, consectetur adipiscing elit.[^2] Result : Lorem ipsum 1 dolor sit amet, consectetur adipiscing elit. 2","title":"Adding footnote references"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/footnotes/#adding-footnote-content","text":"The footnote content must be declared with the same identifier as the reference. It can be inserted at an arbitrary position in the document and is always rendered at the bottom of the page. Furthermore, a backlink to the footnote reference is automatically added.","title":"Adding footnote content"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/footnotes/#on-a-single-line","text":"Short statements can be written on the same line. Example : [^1]: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Result : Jump to footnote at the bottom of the page","title":"on a single line"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/footnotes/#on-multiple-lines","text":"Paragraphs can be written on the next line and must be indented by four spaces. Example : [^2]: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Result : Jump to footnote at the bottom of the page Lorem ipsum dolor sit amet, consectetur adipiscing elit. \u21a9 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. \u21a9","title":"on multiple lines"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/formatting/","text":"Formatting \u00b6 Material for MkDocs provides support for several HTML elements that can be used to highlight sections of a document or apply specific formatting. Additionally, Critic Markup is supported, adding the ability to display suggested changes for a document. Configuration \u00b6 Critic \u00b6 Source \u00b7 Extension The Critic extension, which is part of Python Markdown Extensions , allows for the usage of Critic Markup to highlight changes in a document, and can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.critic The following options are supported: mode Default: view \u2013 This option defines how the markup should be parsed, i.e. whether to just view all suggest changes, or alternatively accept or reject them: View changes markdown_extensions : - pymdownx.critic : mode : view Accept changes markdown_extensions : - pymdownx.critic : mode : accept Reject changes markdown_extensions : - pymdownx.critic : mode : reject BetterEm \u00b6 The BetterEm extension, which is part of Python Markdown Extensions , improves the handling of Markup to emphasize text (e.g. bold and italic ), and can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.betterem : smart_enable : all Caret, Mark & Tilde \u00b6 The Caret , Mark and Tilde extensions, which are part of Python Markdown Extensions , allow for the highlighting of text , as well as handling sub- and superscripts : markdown_extensions : - pymdownx.caret - pymdownx.mark - pymdownx.tilde SmartSymbols \u00b6 The SmartSymbols extension, which is also part of Python Markdown Extensions , converts special characters into their corresponding symbols , and can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.smartsymbols See the official documentation for a list of supported symbols. Usage \u00b6 Highlighting changes \u00b6 When Critic is enabled, Critic Markup can be used, which adds the ability to highlight suggested changes , as well as add inline comments to a document: Example : Text can be {\u200b--deleted--} and replacement text {\u200b++added++}. This can also be combined into {\u200b~~one~>a single~~} operation. {\u200b==Highlighting==} is also possible {\u200b>>and comments can be added inline<<}. {\u200b== Formatting can also be applied to blocks, by putting the opening and closing tags on separate lines and adding new lines between the tags and the content. ==} Result : Text can be deleted and replacement text added . This can also be combined into one a single operation. Highlighting is also possible and comments can be added inline . Formatting can also be applied to blocks, by putting the opening and closing tags on separate lines and adding new lines between the tags and the content. Highlighting text \u00b6 When the Caret, Mark & Tilde extensions are enabled, text can be highlighted with a nicer syntax than using the corresponding mark , ins and del HTML tags: Example : - ==This was marked== - ^^This was inserted^^ - ~~This was deleted~~ Result : This was marked This was inserted This was deleted Sub- and superscripts \u00b6 When the Caret & Tilde extensions are enabled, text can be sub- and superscripted with a nicer syntax than using the corresponding sub and sup HTML tags: Example : - H~2~0 - A^T^A Result : H 2 0 A T A","title":"Formatting"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/formatting/#formatting","text":"Material for MkDocs provides support for several HTML elements that can be used to highlight sections of a document or apply specific formatting. Additionally, Critic Markup is supported, adding the ability to display suggested changes for a document.","title":"Formatting"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/formatting/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/formatting/#critic","text":"Source \u00b7 Extension The Critic extension, which is part of Python Markdown Extensions , allows for the usage of Critic Markup to highlight changes in a document, and can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.critic The following options are supported: mode Default: view \u2013 This option defines how the markup should be parsed, i.e. whether to just view all suggest changes, or alternatively accept or reject them: View changes markdown_extensions : - pymdownx.critic : mode : view Accept changes markdown_extensions : - pymdownx.critic : mode : accept Reject changes markdown_extensions : - pymdownx.critic : mode : reject","title":"Critic"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/formatting/#betterem","text":"The BetterEm extension, which is part of Python Markdown Extensions , improves the handling of Markup to emphasize text (e.g. bold and italic ), and can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.betterem : smart_enable : all","title":"BetterEm"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/formatting/#caret-mark-tilde","text":"The Caret , Mark and Tilde extensions, which are part of Python Markdown Extensions , allow for the highlighting of text , as well as handling sub- and superscripts : markdown_extensions : - pymdownx.caret - pymdownx.mark - pymdownx.tilde","title":"Caret, Mark &amp; Tilde"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/formatting/#smartsymbols","text":"The SmartSymbols extension, which is also part of Python Markdown Extensions , converts special characters into their corresponding symbols , and can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.smartsymbols See the official documentation for a list of supported symbols.","title":"SmartSymbols"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/formatting/#usage","text":"","title":"Usage"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/formatting/#highlighting-changes","text":"When Critic is enabled, Critic Markup can be used, which adds the ability to highlight suggested changes , as well as add inline comments to a document: Example : Text can be {\u200b--deleted--} and replacement text {\u200b++added++}. This can also be combined into {\u200b~~one~>a single~~} operation. {\u200b==Highlighting==} is also possible {\u200b>>and comments can be added inline<<}. {\u200b== Formatting can also be applied to blocks, by putting the opening and closing tags on separate lines and adding new lines between the tags and the content. ==} Result : Text can be deleted and replacement text added . This can also be combined into one a single operation. Highlighting is also possible and comments can be added inline . Formatting can also be applied to blocks, by putting the opening and closing tags on separate lines and adding new lines between the tags and the content.","title":"Highlighting changes"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/formatting/#highlighting-text","text":"When the Caret, Mark & Tilde extensions are enabled, text can be highlighted with a nicer syntax than using the corresponding mark , ins and del HTML tags: Example : - ==This was marked== - ^^This was inserted^^ - ~~This was deleted~~ Result : This was marked This was inserted This was deleted","title":"Highlighting text"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/formatting/#sub-and-superscripts","text":"When the Caret & Tilde extensions are enabled, text can be sub- and superscripted with a nicer syntax than using the corresponding sub and sup HTML tags: Example : - H~2~0 - A^T^A Result : H 2 0 A T A","title":"Sub- and superscripts"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/icons-emojis/","text":"Icons + Emojis \u00b6 One of the best features of Material for MkDocs is the possibility to use more than 7.000 icons and thousands of emojis in your project documentation with practically zero additional effort. Furthermore, custom icons can be added and used in mkdocs.yml , documents and templates. Configuration \u00b6 Emoji \u00b6 Source \u00b7 Extension The Emoji extension, which is part of Python Markdown Extensions , adds the ability to integrate emojis and icons in the *.svg file format, which are inlined when building your site : markdown_extensions : - pymdownx.emoji : emoji_index : !!python/name:materialx.emoji.twemoji emoji_generator : !!python/name:materialx.emoji.to_svg The following icon sets are bundled with Material for MkDocs: \u2013 Material Design \u2013 FontAwesome \u2013 Octicons You can also add additional icons . When using emojis, it's recommended to consult the official documentation of Python Markdown Extensions to learn about configuration options. Attribute List \u00b6 The Attribute List extension, which is part of the standard Markdown library, allows to add HTML attributes and CSS classes to Markdown elements , and can be enabled via mkdocs.yml markdown_extensions : - attr_list Usage \u00b6 Using emojis \u00b6 Emojis can be integrated in Markdown by putting the shortcode of the emoji between two colons. If you're using Twemoji (recommended), you can look up the shortcodes at Emojipedia . Example : :smile: Result : Using icons \u00b6 When Emoji is enabled, icons can be used similar to emojis, by referencing a valid path to any icon bundled with the theme, which are located in the .icons directory, and replacing / with - : Example : - :material-account-circle: \u2013 `.icons/material/account-circle.svg` - :fontawesome-regular-laugh-wink: \u2013 `.icons/fontawesome/regular/laugh-wink.svg` - :octicons-octoface-16: \u2013 `.icons/octicons/octoface-16.svg` Result : \u2013 .icons/material/account-circle.svg \u2013 .icons/fontawesome/regular/laugh-wink.svg \u2013 .icons/octicons/octoface-16.svg with colors \u00b6 When the Attribute List extension is enabled, custom CSS classes and attributes can be added to icons by suffixing the icon with a special syntax. While HTML and CSS allow to use inline styles , it's always best to add an additional stylesheet and put styles into dedicated CSS classes: . medium { color : #00AB6C ; } . twitter { color : #1DA1F2 ; } . facebook { color : #4267B2 ; } Then, simply add the CSS class to the icon. .medium { color: #00AB6C; } .twitter { color: #1DA1F2; } .facebook { color: #4267B2; } Example : - :fontawesome-brands-medium:{: .medium } \u2013 Medium - :fontawesome-brands-twitter:{: .twitter } \u2013 Twitter - :fontawesome-brands-facebook:{: .facebook } \u2013 Facebook Result : \u2013 Medium \u2013 Twitter \u2013 Facebook with animations \u00b6 Similar to adding colors , it's just as easy to add CSS animations to icons by using an additional stylesheet , defining a @ keyframes rule and adding the dedicated CSS class to the icon: @ keyframes heart { 0 %, 40 %, 80 %, 100 % { transform : scale ( 1 ); } 20 %, 60 % { transform : scale ( 1.15 ); } } . heart { animation : heart 1000 ms infinite ; } Then, simply add the CSS class to the icon. @keyframes heart { 0%, 40%, 80%, 100% { transform: scale(1); } 20%, 60% { transform: scale(1.15); } } .heart { animation: heart 1000ms infinite; } Example : :octicons-heart-fill-24:{: .heart } Result : Customization \u00b6 Using icons in templates \u00b6 When you're extending the theme with partials or blocks, you can simply reference any icon that's bundled with the theme with Jinja's include function and wrap it with the twemoji class: < span class = \"twemoji\" > {% include \".icons/fontawesome/brands/twitter.svg\" %} </ span > This is exactly what Material for MkDocs does in its templates.","title":"Icons + Emojis"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/icons-emojis/#icons-emojis","text":"One of the best features of Material for MkDocs is the possibility to use more than 7.000 icons and thousands of emojis in your project documentation with practically zero additional effort. Furthermore, custom icons can be added and used in mkdocs.yml , documents and templates.","title":"Icons + Emojis"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/icons-emojis/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/icons-emojis/#emoji","text":"Source \u00b7 Extension The Emoji extension, which is part of Python Markdown Extensions , adds the ability to integrate emojis and icons in the *.svg file format, which are inlined when building your site : markdown_extensions : - pymdownx.emoji : emoji_index : !!python/name:materialx.emoji.twemoji emoji_generator : !!python/name:materialx.emoji.to_svg The following icon sets are bundled with Material for MkDocs: \u2013 Material Design \u2013 FontAwesome \u2013 Octicons You can also add additional icons . When using emojis, it's recommended to consult the official documentation of Python Markdown Extensions to learn about configuration options.","title":"Emoji"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/icons-emojis/#attribute-list","text":"The Attribute List extension, which is part of the standard Markdown library, allows to add HTML attributes and CSS classes to Markdown elements , and can be enabled via mkdocs.yml markdown_extensions : - attr_list","title":"Attribute List"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/icons-emojis/#usage","text":"","title":"Usage"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/icons-emojis/#using-emojis","text":"Emojis can be integrated in Markdown by putting the shortcode of the emoji between two colons. If you're using Twemoji (recommended), you can look up the shortcodes at Emojipedia . Example : :smile: Result :","title":"Using emojis"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/icons-emojis/#using-icons","text":"When Emoji is enabled, icons can be used similar to emojis, by referencing a valid path to any icon bundled with the theme, which are located in the .icons directory, and replacing / with - : Example : - :material-account-circle: \u2013 `.icons/material/account-circle.svg` - :fontawesome-regular-laugh-wink: \u2013 `.icons/fontawesome/regular/laugh-wink.svg` - :octicons-octoface-16: \u2013 `.icons/octicons/octoface-16.svg` Result : \u2013 .icons/material/account-circle.svg \u2013 .icons/fontawesome/regular/laugh-wink.svg \u2013 .icons/octicons/octoface-16.svg","title":"Using icons"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/icons-emojis/#with-colors","text":"When the Attribute List extension is enabled, custom CSS classes and attributes can be added to icons by suffixing the icon with a special syntax. While HTML and CSS allow to use inline styles , it's always best to add an additional stylesheet and put styles into dedicated CSS classes: . medium { color : #00AB6C ; } . twitter { color : #1DA1F2 ; } . facebook { color : #4267B2 ; } Then, simply add the CSS class to the icon. .medium { color: #00AB6C; } .twitter { color: #1DA1F2; } .facebook { color: #4267B2; } Example : - :fontawesome-brands-medium:{: .medium } \u2013 Medium - :fontawesome-brands-twitter:{: .twitter } \u2013 Twitter - :fontawesome-brands-facebook:{: .facebook } \u2013 Facebook Result : \u2013 Medium \u2013 Twitter \u2013 Facebook","title":"with colors"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/icons-emojis/#with-animations","text":"Similar to adding colors , it's just as easy to add CSS animations to icons by using an additional stylesheet , defining a @ keyframes rule and adding the dedicated CSS class to the icon: @ keyframes heart { 0 %, 40 %, 80 %, 100 % { transform : scale ( 1 ); } 20 %, 60 % { transform : scale ( 1.15 ); } } . heart { animation : heart 1000 ms infinite ; } Then, simply add the CSS class to the icon. @keyframes heart { 0%, 40%, 80%, 100% { transform: scale(1); } 20%, 60% { transform: scale(1.15); } } .heart { animation: heart 1000ms infinite; } Example : :octicons-heart-fill-24:{: .heart } Result :","title":"with animations"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/icons-emojis/#customization","text":"","title":"Customization"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/icons-emojis/#using-icons-in-templates","text":"When you're extending the theme with partials or blocks, you can simply reference any icon that's bundled with the theme with Jinja's include function and wrap it with the twemoji class: < span class = \"twemoji\" > {% include \".icons/fontawesome/brands/twitter.svg\" %} </ span > This is exactly what Material for MkDocs does in its templates.","title":"Using icons in templates"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/images/","text":"Images \u00b6 While images are first-class citizens of Markdown and part of the core syntax, it can be difficult to work with them. Material for MkDocs makes working with images more comfortable by providing styles for alignment and image captions. Configuration \u00b6 Attribute List \u00b6 The Attribute List extension, which is part of the standard Markdown library, allows to add HTML attributes and CSS classes to Markdown elements , and can be enabled via mkdocs.yml markdown_extensions : - attr_list Usage \u00b6 Image alignment \u00b6 When the Attribute List extension is enabled, images can be aligned by adding the respective alignment directions via the align attribute, i.e. align=left or align=right Left Example : ![Placeholder](https://dummyimage.com/600x400/eee/aaa){: align=left } Result : Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Right Example : ![Placeholder](https://dummyimage.com/600x400/eee/aaa){: align=right } Result : Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. If there's insufficient space to render the text next to the image, the image will stretch to the full width of the viewport, e.g. on mobile viewports. Image captions \u00b6 Sadly, the Markdown syntax doesn't provide native support for image captions, but it's always possible to resort to HTML. Using figure and figcaption , captions can be added to images. Example : < figure > < img src = \"https://dummyimage.com/600x400/eee/aaa\" width = \"300\" /> < figcaption > Image caption </ figcaption > </ figure > Result : Image caption Image lazy-loading \u00b6 Modern browsers provide native support for lazy-loading images through the loading attribute, which degrades to eager-loading in browsers without support. As with image alignment , if the Attribute List extension is enabled, images can be lazy-loaded by adding loading=lazy . Example : ![Placeholder](https://dummyimage.com/600x400/eee/aaa){: loading=lazy } Result :","title":"Images"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/images/#images","text":"While images are first-class citizens of Markdown and part of the core syntax, it can be difficult to work with them. Material for MkDocs makes working with images more comfortable by providing styles for alignment and image captions.","title":"Images"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/images/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/images/#attribute-list","text":"The Attribute List extension, which is part of the standard Markdown library, allows to add HTML attributes and CSS classes to Markdown elements , and can be enabled via mkdocs.yml markdown_extensions : - attr_list","title":"Attribute List"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/images/#usage","text":"","title":"Usage"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/images/#image-alignment","text":"When the Attribute List extension is enabled, images can be aligned by adding the respective alignment directions via the align attribute, i.e. align=left or align=right Left Example : ![Placeholder](https://dummyimage.com/600x400/eee/aaa){: align=left } Result : Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Right Example : ![Placeholder](https://dummyimage.com/600x400/eee/aaa){: align=right } Result : Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. If there's insufficient space to render the text next to the image, the image will stretch to the full width of the viewport, e.g. on mobile viewports.","title":"Image alignment"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/images/#image-captions","text":"Sadly, the Markdown syntax doesn't provide native support for image captions, but it's always possible to resort to HTML. Using figure and figcaption , captions can be added to images. Example : < figure > < img src = \"https://dummyimage.com/600x400/eee/aaa\" width = \"300\" /> < figcaption > Image caption </ figcaption > </ figure > Result : Image caption","title":"Image captions"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/images/#image-lazy-loading","text":"Modern browsers provide native support for lazy-loading images through the loading attribute, which degrades to eager-loading in browsers without support. As with image alignment , if the Attribute List extension is enabled, images can be lazy-loaded by adding loading=lazy . Example : ![Placeholder](https://dummyimage.com/600x400/eee/aaa){: loading=lazy } Result :","title":"Image lazy-loading"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/lists/","text":"Lists \u00b6 Material for MkDocs supports several flavors of lists that cater to different use cases, including unordered lists and ordered lists , which are supported through standard Markdown, as well as definition lists and task lists , which are supported through extensions. Configuration \u00b6 Definition List \u00b6 Source \u00b7 Extension The Definition List extension, which is part of the standard Markdown library, adds the ability to add definitions lists to a document and can be enabled via mkdocs.yml : markdown_extensions : - def_list Tasklist \u00b6 Source \u00b7 Extension The Tasklist extension, which is part of Python Markdown Extensions , adds support for lists with styled checkboxes, and provides several options for configuring the style: custom_checkbox Default: false \u00b7 This option toggles the rendering style of checkboxes, replacing native checkbox styles with beautiful icons, and is therefore strongly recommended : markdown_extensions : - pymdownx.tasklist : custom_checkbox : true clickable_checkbox Default: false \u00b7 This option toggles whether checkboxes are clickable. As the state is not persisted, the use of this option is rather discouraged from a user experience perspective: markdown_extensions : - pymdownx.tasklist : clickable_checkbox : true Usage \u00b6 Using unordered lists \u00b6 An unordered list can be written by prefixing a line with a - , * or + list marker, all of which can be used interchangeably. Furthermore, all flavors of lists can be nested inside each other. Example : - Nulla et rhoncus turpis. Mauris ultricies elementum leo. Duis efficitur accumsan nibh eu mattis. Vivamus tempus velit eros, porttitor placerat nibh lacinia sed. Aenean in finibus diam. * Duis mollis est eget nibh volutpat, fermentum aliquet dui mollis. * Nam vulputate tincidunt fringilla. * Nullam dignissim ultrices urna non auctor. Result : Nulla et rhoncus turpis. Mauris ultricies elementum leo. Duis efficitur accumsan nibh eu mattis. Vivamus tempus velit eros, porttitor placerat nibh lacinia sed. Aenean in finibus diam. Duis mollis est eget nibh volutpat, fermentum aliquet dui mollis. Nam vulputate tincidunt fringilla. Nullam dignissim ultrices urna non auctor. Using ordered lists \u00b6 An ordered list must start with a number immediately followed by a dot. The numbers do not need to be consecutive and can be all set to 1. , as they will be re-numbered when rendered. Example : 1. Vivamus id mi enim. Integer id turpis sapien. Ut condimentum lobortis sagittis. Aliquam purus tellus, faucibus eget urna at, iaculis venenatis nulla. Vivamus a pharetra leo. 1. Vivamus venenatis porttitor tortor sit amet rutrum. Pellentesque aliquet quam enim, eu volutpat urna rutrum a. Nam vehicula nunc mauris, a ultricies libero efficitur sed. 2. Morbi eget dapibus felis. Vivamus venenatis porttitor tortor sit amet rutrum. Pellentesque aliquet quam enim, eu volutpat urna rutrum a. 1. Mauris dictum mi lacus 2. Ut sit amet placerat ante 3. Suspendisse ac eros arcu Result : Vivamus id mi enim. Integer id turpis sapien. Ut condimentum lobortis sagittis. Aliquam purus tellus, faucibus eget urna at, iaculis venenatis nulla. Vivamus a pharetra leo. Vivamus venenatis porttitor tortor sit amet rutrum. Pellentesque aliquet quam enim, eu volutpat urna rutrum a. Nam vehicula nunc mauris, a ultricies libero efficitur sed. Morbi eget dapibus felis. Vivamus venenatis porttitor tortor sit amet rutrum. Pellentesque aliquet quam enim, eu volutpat urna rutrum a. Mauris dictum mi lacus Ut sit amet placerat ante Suspendisse ac eros arcu Using definition lists \u00b6 Definition lists are a ideal for describing arbitrary key-value pairs, e.g. the parameters of functions or modules, as used within this documentation to describe extension or plugin parameters. Example : `Lorem ipsum dolor sit amet` : Sed sagittis eleifend rutrum. Donec vitae suscipit est. Nullam tempus tellus non sem sollicitudin, quis rutrum leo facilisis. `Cras arcu libero` : Aliquam metus eros, pretium sed nulla venenatis, faucibus auctor ex. Proin ut eros sed sapien ullamcorper consequat. Nunc ligula ante. Duis mollis est eget nibh volutpat, fermentum aliquet dui mollis. Nam vulputate tincidunt fringilla. Nullam dignissim ultrices urna non auctor. Result : Lorem ipsum dolor sit amet Sed sagittis eleifend rutrum. Donec vitae suscipit est. Nullam tempus tellus non sem sollicitudin, quis rutrum leo facilisis. Cras arcu libero Aliquam metus eros, pretium sed nulla venenatis, faucibus auctor ex. Proin ut eros sed sapien ullamcorper consequat. Nunc ligula ante. Duis mollis est eget nibh volutpat, fermentum aliquet dui mollis. Nam vulputate tincidunt fringilla. Nullam dignissim ultrices urna non auctor. Using tasklists \u00b6 When the Tasklist extension is enabled, unordered list items can be prefixed with [ ] to render an unchecked or [x] to render a checked checkbox. Example : - [x] Lorem ipsum dolor sit amet, consectetur adipiscing elit - [ ] Vestibulum convallis sit amet nisi a tincidunt * [x] In hac habitasse platea dictumst * [x] In scelerisque nibh non dolor mollis congue sed et metus * [ ] Praesent sed risus massa - [ ] Aenean pretium efficitur erat, donec pharetra, ligula non scelerisque Result : Lorem ipsum dolor sit amet, consectetur adipiscing elit Vestibulum convallis sit amet nisi a tincidunt In hac habitasse platea dictumst In scelerisque nibh non dolor mollis congue sed et metus Praesent sed risus massa Aenean pretium efficitur erat, donec pharetra, ligula non scelerisque","title":"Lists"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/lists/#lists","text":"Material for MkDocs supports several flavors of lists that cater to different use cases, including unordered lists and ordered lists , which are supported through standard Markdown, as well as definition lists and task lists , which are supported through extensions.","title":"Lists"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/lists/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/lists/#definition-list","text":"Source \u00b7 Extension The Definition List extension, which is part of the standard Markdown library, adds the ability to add definitions lists to a document and can be enabled via mkdocs.yml : markdown_extensions : - def_list","title":"Definition List"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/lists/#tasklist","text":"Source \u00b7 Extension The Tasklist extension, which is part of Python Markdown Extensions , adds support for lists with styled checkboxes, and provides several options for configuring the style: custom_checkbox Default: false \u00b7 This option toggles the rendering style of checkboxes, replacing native checkbox styles with beautiful icons, and is therefore strongly recommended : markdown_extensions : - pymdownx.tasklist : custom_checkbox : true clickable_checkbox Default: false \u00b7 This option toggles whether checkboxes are clickable. As the state is not persisted, the use of this option is rather discouraged from a user experience perspective: markdown_extensions : - pymdownx.tasklist : clickable_checkbox : true","title":"Tasklist"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/lists/#usage","text":"","title":"Usage"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/lists/#using-unordered-lists","text":"An unordered list can be written by prefixing a line with a - , * or + list marker, all of which can be used interchangeably. Furthermore, all flavors of lists can be nested inside each other. Example : - Nulla et rhoncus turpis. Mauris ultricies elementum leo. Duis efficitur accumsan nibh eu mattis. Vivamus tempus velit eros, porttitor placerat nibh lacinia sed. Aenean in finibus diam. * Duis mollis est eget nibh volutpat, fermentum aliquet dui mollis. * Nam vulputate tincidunt fringilla. * Nullam dignissim ultrices urna non auctor. Result : Nulla et rhoncus turpis. Mauris ultricies elementum leo. Duis efficitur accumsan nibh eu mattis. Vivamus tempus velit eros, porttitor placerat nibh lacinia sed. Aenean in finibus diam. Duis mollis est eget nibh volutpat, fermentum aliquet dui mollis. Nam vulputate tincidunt fringilla. Nullam dignissim ultrices urna non auctor.","title":"Using unordered lists"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/lists/#using-ordered-lists","text":"An ordered list must start with a number immediately followed by a dot. The numbers do not need to be consecutive and can be all set to 1. , as they will be re-numbered when rendered. Example : 1. Vivamus id mi enim. Integer id turpis sapien. Ut condimentum lobortis sagittis. Aliquam purus tellus, faucibus eget urna at, iaculis venenatis nulla. Vivamus a pharetra leo. 1. Vivamus venenatis porttitor tortor sit amet rutrum. Pellentesque aliquet quam enim, eu volutpat urna rutrum a. Nam vehicula nunc mauris, a ultricies libero efficitur sed. 2. Morbi eget dapibus felis. Vivamus venenatis porttitor tortor sit amet rutrum. Pellentesque aliquet quam enim, eu volutpat urna rutrum a. 1. Mauris dictum mi lacus 2. Ut sit amet placerat ante 3. Suspendisse ac eros arcu Result : Vivamus id mi enim. Integer id turpis sapien. Ut condimentum lobortis sagittis. Aliquam purus tellus, faucibus eget urna at, iaculis venenatis nulla. Vivamus a pharetra leo. Vivamus venenatis porttitor tortor sit amet rutrum. Pellentesque aliquet quam enim, eu volutpat urna rutrum a. Nam vehicula nunc mauris, a ultricies libero efficitur sed. Morbi eget dapibus felis. Vivamus venenatis porttitor tortor sit amet rutrum. Pellentesque aliquet quam enim, eu volutpat urna rutrum a. Mauris dictum mi lacus Ut sit amet placerat ante Suspendisse ac eros arcu","title":"Using ordered lists"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/lists/#using-definition-lists","text":"Definition lists are a ideal for describing arbitrary key-value pairs, e.g. the parameters of functions or modules, as used within this documentation to describe extension or plugin parameters. Example : `Lorem ipsum dolor sit amet` : Sed sagittis eleifend rutrum. Donec vitae suscipit est. Nullam tempus tellus non sem sollicitudin, quis rutrum leo facilisis. `Cras arcu libero` : Aliquam metus eros, pretium sed nulla venenatis, faucibus auctor ex. Proin ut eros sed sapien ullamcorper consequat. Nunc ligula ante. Duis mollis est eget nibh volutpat, fermentum aliquet dui mollis. Nam vulputate tincidunt fringilla. Nullam dignissim ultrices urna non auctor. Result : Lorem ipsum dolor sit amet Sed sagittis eleifend rutrum. Donec vitae suscipit est. Nullam tempus tellus non sem sollicitudin, quis rutrum leo facilisis. Cras arcu libero Aliquam metus eros, pretium sed nulla venenatis, faucibus auctor ex. Proin ut eros sed sapien ullamcorper consequat. Nunc ligula ante. Duis mollis est eget nibh volutpat, fermentum aliquet dui mollis. Nam vulputate tincidunt fringilla. Nullam dignissim ultrices urna non auctor.","title":"Using definition lists"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/lists/#using-tasklists","text":"When the Tasklist extension is enabled, unordered list items can be prefixed with [ ] to render an unchecked or [x] to render a checked checkbox. Example : - [x] Lorem ipsum dolor sit amet, consectetur adipiscing elit - [ ] Vestibulum convallis sit amet nisi a tincidunt * [x] In hac habitasse platea dictumst * [x] In scelerisque nibh non dolor mollis congue sed et metus * [ ] Praesent sed risus massa - [ ] Aenean pretium efficitur erat, donec pharetra, ligula non scelerisque Result : Lorem ipsum dolor sit amet, consectetur adipiscing elit Vestibulum convallis sit amet nisi a tincidunt In hac habitasse platea dictumst In scelerisque nibh non dolor mollis congue sed et metus Praesent sed risus massa Aenean pretium efficitur erat, donec pharetra, ligula non scelerisque","title":"Using tasklists"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/mathjax/","text":"MathJax \u00b6 MathJax is a beautiful and accessible way to display mathematical content in the browser, allows for writing formulas in different notations, including LaTeX , MathML and AsciiMath , and can be easily integrated with Material for MkDocs. Configuration \u00b6 Arithmatex \u00b6 Source \u00b7 Extension The Arithmatex extension, which is part of of Python Markdown Extensions , allows the rendering of block and inline block equations, and can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.arithmatex : generic : true Besides enabling the extension in mkdocs.yml , a MathJax configuration and the JavaScript runtime need to be included, which can be done with additional JavaScript : docs/javascripts/config.js window . MathJax = { tex : { inlineMath : [[ \"\\\\(\" , \"\\\\)\" ]], displayMath : [[ \"\\\\[\" , \"\\\\]\" ]], processEscapes : true , processEnvironments : true }, options : { ignoreHtmlClass : \".*|\" , processHtmlClass : \"arithmatex\" } }; mkdocs.yml extra_javascript : - javascripts/config.js - https://polyfill.io/v3/polyfill.min.js?features=es6 - https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js MathJax can be configured in many different ways, for which Material for MkDocs might not provide native support. See the official documentation for more information. Using MathJax with instant loading There's no additional effort necessary to integrate MathJax 3 with instant loading \u2013 it's expected to work straight away. However, a previous version of this document explained how to integrate Material for MkDocs with MathJax 2 , which doesn't exhibit this behavior. It's therefore highly recommended to switch to MathJax 3 . window.MathJax = { tex: { inlineMath: [[\"\\\\(\", \"\\\\)\"]], displayMath: [[\"\\\\[\", \"\\\\]\"]], processEscapes: true, processEnvironments: true }, options: { ignoreHtmlClass: \".*|\", processHtmlClass: \"arithmatex\" } }; Usage \u00b6 Using block syntax \u00b6 Blocks must be enclosed in $$ ... $$ or \\[ ... \\] on separate lines: Example : $$ \\operatorname {ker} f = \\{ g \\in G:f ( g )= e_{H} \\} { \\mbox {.}} $$ Result : \\[ \\operatorname{ker} f=\\{g\\in G:f(g)=e_{H}\\}{\\mbox{.}} \\] Using inline block syntax \u00b6 Inline blocks must be enclosed in $ ... $ or \\( ... \\) : Example : The homomorphism $ f $ is injective if and only if its kernel is only the singleton set $ e_G $ , because otherwise $ \\exists a,b \\in G $ with $ a \\neq b $ such that $ f ( a )= f ( b ) $ . Result : The homomorphism \\(f\\) is injective if and only if its kernel is only the singleton set \\(e_G\\) , because otherwise \\(\\exists a,b\\in G\\) with \\(a\\neq b\\) such that \\(f(a)=f(b)\\) .","title":"MathJax"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/mathjax/#mathjax","text":"MathJax is a beautiful and accessible way to display mathematical content in the browser, allows for writing formulas in different notations, including LaTeX , MathML and AsciiMath , and can be easily integrated with Material for MkDocs.","title":"MathJax"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/mathjax/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/mathjax/#arithmatex","text":"Source \u00b7 Extension The Arithmatex extension, which is part of of Python Markdown Extensions , allows the rendering of block and inline block equations, and can be enabled via mkdocs.yml : markdown_extensions : - pymdownx.arithmatex : generic : true Besides enabling the extension in mkdocs.yml , a MathJax configuration and the JavaScript runtime need to be included, which can be done with additional JavaScript : docs/javascripts/config.js window . MathJax = { tex : { inlineMath : [[ \"\\\\(\" , \"\\\\)\" ]], displayMath : [[ \"\\\\[\" , \"\\\\]\" ]], processEscapes : true , processEnvironments : true }, options : { ignoreHtmlClass : \".*|\" , processHtmlClass : \"arithmatex\" } }; mkdocs.yml extra_javascript : - javascripts/config.js - https://polyfill.io/v3/polyfill.min.js?features=es6 - https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js MathJax can be configured in many different ways, for which Material for MkDocs might not provide native support. See the official documentation for more information. Using MathJax with instant loading There's no additional effort necessary to integrate MathJax 3 with instant loading \u2013 it's expected to work straight away. However, a previous version of this document explained how to integrate Material for MkDocs with MathJax 2 , which doesn't exhibit this behavior. It's therefore highly recommended to switch to MathJax 3 . window.MathJax = { tex: { inlineMath: [[\"\\\\(\", \"\\\\)\"]], displayMath: [[\"\\\\[\", \"\\\\]\"]], processEscapes: true, processEnvironments: true }, options: { ignoreHtmlClass: \".*|\", processHtmlClass: \"arithmatex\" } };","title":"Arithmatex"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/mathjax/#usage","text":"","title":"Usage"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/mathjax/#using-block-syntax","text":"Blocks must be enclosed in $$ ... $$ or \\[ ... \\] on separate lines: Example : $$ \\operatorname {ker} f = \\{ g \\in G:f ( g )= e_{H} \\} { \\mbox {.}} $$ Result : \\[ \\operatorname{ker} f=\\{g\\in G:f(g)=e_{H}\\}{\\mbox{.}} \\]","title":"Using block syntax"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/mathjax/#using-inline-block-syntax","text":"Inline blocks must be enclosed in $ ... $ or \\( ... \\) : Example : The homomorphism $ f $ is injective if and only if its kernel is only the singleton set $ e_G $ , because otherwise $ \\exists a,b \\in G $ with $ a \\neq b $ such that $ f ( a )= f ( b ) $ . Result : The homomorphism \\(f\\) is injective if and only if its kernel is only the singleton set \\(e_G\\) , because otherwise \\(\\exists a,b\\in G\\) with \\(a\\neq b\\) such that \\(f(a)=f(b)\\) .","title":"Using inline block syntax"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/meta-tags/","text":"Meta tags \u00b6 In HTML, meta tags allow to provide additional metadata for a document, e.g. page titles and descriptions, additional assets to be loaded, and Open Graph data. While metadata can always be added via customization , some tags can be configured. Configuration \u00b6 Metadata \u00b6 The Metadata extension, which is part of the standard Markdown library, adds the ability to add front matter to a document and can be enabled via mkdocs.yml : markdown_extensions : - meta Front matter is written as a series of key-value pairs at the beginning of the Markdown document, delimited by a blank line which ends the YAML context. Usage \u00b6 Setting the page title \u00b6 If the Metadata extension is enabled, the page title can be overridden on a per-document basis with custom front matter: --- title: Lorem ipsum dolor sit amet --- This will set the title tag inside the document head for the current page to the provided value. Note that the site title is appended using a dash as a separator, which is the default behavior. Setting the page description \u00b6 If the Metadata extension is enabled, the page description can also be overridden on a per-document basis with custom front matter: --- description: Nullam urna elit, malesuada eget finibus ut, ac tortor. --- This will set the meta tag containing the site description inside the document head for the current page to the provided value. Adding a web app manifest \u00b6 A web app manifest is a simple JSON file that specifies how your web application should behave when installed on the user's mobile device or desktop, which can be set via mkdocs.yml : extra : manifest : manifest.webmanifest Customization \u00b6 Custom meta tags \u00b6 In order to add meta tags to your document, you can extend the theme and simply override the extrahead block with the respective tags, e.g. to set policies for search engines: {% block extrahead %} < meta property = \"robots\" content = \"noindex, nofollow\" /> {% endblock %} Some further examples, including Open Graph and Twitter Cards : Open Graph {% block extrahead %} {% set title = config.site_name %} {% if page and page.meta and page.meta.title %} {% set title = title ~ \" - \" ~ page.meta.title %} {% elif page and page.title and not page.is_homepage %} {% set title = title ~ \" - \" ~ page.title | striptags %} {% endif %} < meta property = \"og:type\" content = \"website\" /> < meta property = \"og:title\" content = \"{{ title }}\" /> < meta property = \"og:description\" content = \"{{ config.site_description }}\" /> < meta property = \"og:url\" content = \"{{ page.canonical_url }}\" /> < meta property = \"og:image\" content = \"<url>\" /> < meta property = \"og:image:type\" content = \"image/png\" /> < meta property = \"og:image:width\" content = \"1200\" /> < meta property = \"og:image:height\" content = \"630\" /> {% endblock %} Twitter Cards {% block extrahead %} {% set title = config.site_name %} {% if page and page.meta and page.meta.title %} {% set title = title ~ \" - \" ~ page.meta.title %} {% elif page and page.title and not page.is_homepage %} {% set title = title ~ \" - \" ~ page.title | striptags %} {% endif %} < meta name = \"twitter:card\" content = \"summary_large_image\" /> < meta name = \"twitter:site\" content = \"<username>\" /> < meta name = \"twitter:creator\" content = \"<username>\" /> < meta name = \"twitter:title\" content = \"{{ title }}\" /> < meta name = \"twitter:description\" content = \"{{ config.site_description }}\" /> < meta name = \"twitter:image\" content = \"<url>\" /> {% endblock %}","title":"Meta tags"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/meta-tags/#meta-tags","text":"In HTML, meta tags allow to provide additional metadata for a document, e.g. page titles and descriptions, additional assets to be loaded, and Open Graph data. While metadata can always be added via customization , some tags can be configured.","title":"Meta tags"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/meta-tags/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/meta-tags/#metadata","text":"The Metadata extension, which is part of the standard Markdown library, adds the ability to add front matter to a document and can be enabled via mkdocs.yml : markdown_extensions : - meta Front matter is written as a series of key-value pairs at the beginning of the Markdown document, delimited by a blank line which ends the YAML context.","title":"Metadata"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/meta-tags/#usage","text":"","title":"Usage"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/meta-tags/#setting-the-page-title","text":"If the Metadata extension is enabled, the page title can be overridden on a per-document basis with custom front matter: --- title: Lorem ipsum dolor sit amet --- This will set the title tag inside the document head for the current page to the provided value. Note that the site title is appended using a dash as a separator, which is the default behavior.","title":"Setting the page title"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/meta-tags/#setting-the-page-description","text":"If the Metadata extension is enabled, the page description can also be overridden on a per-document basis with custom front matter: --- description: Nullam urna elit, malesuada eget finibus ut, ac tortor. --- This will set the meta tag containing the site description inside the document head for the current page to the provided value.","title":"Setting the page description"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/meta-tags/#adding-a-web-app-manifest","text":"A web app manifest is a simple JSON file that specifies how your web application should behave when installed on the user's mobile device or desktop, which can be set via mkdocs.yml : extra : manifest : manifest.webmanifest","title":"Adding a web app manifest"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/meta-tags/#customization","text":"","title":"Customization"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/meta-tags/#custom-meta-tags","text":"In order to add meta tags to your document, you can extend the theme and simply override the extrahead block with the respective tags, e.g. to set policies for search engines: {% block extrahead %} < meta property = \"robots\" content = \"noindex, nofollow\" /> {% endblock %} Some further examples, including Open Graph and Twitter Cards : Open Graph {% block extrahead %} {% set title = config.site_name %} {% if page and page.meta and page.meta.title %} {% set title = title ~ \" - \" ~ page.meta.title %} {% elif page and page.title and not page.is_homepage %} {% set title = title ~ \" - \" ~ page.title | striptags %} {% endif %} < meta property = \"og:type\" content = \"website\" /> < meta property = \"og:title\" content = \"{{ title }}\" /> < meta property = \"og:description\" content = \"{{ config.site_description }}\" /> < meta property = \"og:url\" content = \"{{ page.canonical_url }}\" /> < meta property = \"og:image\" content = \"<url>\" /> < meta property = \"og:image:type\" content = \"image/png\" /> < meta property = \"og:image:width\" content = \"1200\" /> < meta property = \"og:image:height\" content = \"630\" /> {% endblock %} Twitter Cards {% block extrahead %} {% set title = config.site_name %} {% if page and page.meta and page.meta.title %} {% set title = title ~ \" - \" ~ page.meta.title %} {% elif page and page.title and not page.is_homepage %} {% set title = title ~ \" - \" ~ page.title | striptags %} {% endif %} < meta name = \"twitter:card\" content = \"summary_large_image\" /> < meta name = \"twitter:site\" content = \"<username>\" /> < meta name = \"twitter:creator\" content = \"<username>\" /> < meta name = \"twitter:title\" content = \"{{ title }}\" /> < meta name = \"twitter:description\" content = \"{{ config.site_description }}\" /> < meta name = \"twitter:image\" content = \"<url>\" /> {% endblock %}","title":"Custom meta tags"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/variables/","text":"Variables \u00b6 Macros and variables are powerful tools to parametrize Markdown files, as they allow to perform Jinja templating directly from Markdown. This is especially useful to include technical data from other files and add central variables via mkdocs.yml . Configuration \u00b6 Macros \u00b6 The macros plugin adds support to reference variables and call macros and supports Jinja templating directly from Markdown. It can be installed with pip : pip install mkdocs-macros-plugin Then, add the following to mkdocs.yml : plugins : - macros Usage \u00b6 Using predefined variables \u00b6 A set of predefined variables is enabled by default and can be used from Markdown, including data from mkdocs.yml . More specifically, predefined variables fall into the following categories: config.* : configuration parameters from mkdocs.yml page.* : metadata and content of current page navigation.* : list of all pages and sections environment.* : underlying operating system git.* : git-related information, if available Example : Welcome to {{ config.site_name }}! Result : Welcome to Material for MkDocs! A list of all predefined variables can be printed with: {{ macros_info() }} Using custom variables \u00b6 All data defined under extra in mkdocs.yml is automatically exposed as a variable and can be used from the template. This enables centralized parameter storage and management. Example : docs/page.md The unit price is {{ unit.price }} mkdocs.yml extra : unit : price : 12.50 Result : The unit price is 12.50. Using variables in snippets \u00b6 The macros plugin can be used to allow variables in snippets, which is not possible with the Snippets extension alone. Add the snippets location to the plugin configuration in mkdocs.yml : plugins : - search - macros : include_dir : snippets In your Markdown file, include snippets with Jinja's include function: {% include \"definitions.md\" %} Example : snippets/definitions.md The unit price is {{ page.meta.unit.price }} docs/page-1.md --- unit: price: 12.50 --- {% include \"definitions.md\" %} docs/page-2.md --- unit: price: 25.00 --- {% include \"definitions.md\" %} Customization \u00b6 Custom macros \u00b6 The macros plugin allows to define custom macros, which can then be used from Markdown files. See the official documentation for more information how to define custom macros.","title":"Variables"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/variables/#variables","text":"Macros and variables are powerful tools to parametrize Markdown files, as they allow to perform Jinja templating directly from Markdown. This is especially useful to include technical data from other files and add central variables via mkdocs.yml .","title":"Variables"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/variables/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/variables/#macros","text":"The macros plugin adds support to reference variables and call macros and supports Jinja templating directly from Markdown. It can be installed with pip : pip install mkdocs-macros-plugin Then, add the following to mkdocs.yml : plugins : - macros","title":"Macros"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/variables/#usage","text":"","title":"Usage"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/variables/#using-predefined-variables","text":"A set of predefined variables is enabled by default and can be used from Markdown, including data from mkdocs.yml . More specifically, predefined variables fall into the following categories: config.* : configuration parameters from mkdocs.yml page.* : metadata and content of current page navigation.* : list of all pages and sections environment.* : underlying operating system git.* : git-related information, if available Example : Welcome to {{ config.site_name }}! Result : Welcome to Material for MkDocs! A list of all predefined variables can be printed with: {{ macros_info() }}","title":"Using predefined variables"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/variables/#using-custom-variables","text":"All data defined under extra in mkdocs.yml is automatically exposed as a variable and can be used from the template. This enables centralized parameter storage and management. Example : docs/page.md The unit price is {{ unit.price }} mkdocs.yml extra : unit : price : 12.50 Result : The unit price is 12.50.","title":"Using custom variables"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/variables/#using-variables-in-snippets","text":"The macros plugin can be used to allow variables in snippets, which is not possible with the Snippets extension alone. Add the snippets location to the plugin configuration in mkdocs.yml : plugins : - search - macros : include_dir : snippets In your Markdown file, include snippets with Jinja's include function: {% include \"definitions.md\" %} Example : snippets/definitions.md The unit price is {{ page.meta.unit.price }} docs/page-1.md --- unit: price: 12.50 --- {% include \"definitions.md\" %} docs/page-2.md --- unit: price: 25.00 --- {% include \"definitions.md\" %}","title":"Using variables in snippets"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/variables/#customization","text":"","title":"Customization"},{"location":"kb/GNU-Linux/Software/mkDocs/reference/variables/#custom-macros","text":"The macros plugin allows to define custom macros, which can then be used from Markdown files. See the official documentation for more information how to define custom macros.","title":"Custom macros"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/adding-a-comment-system/","text":"Adding a comment system \u00b6 Material for MkDocs is natively integrated with Disqus , a comment system that provides a wide range of features like social integrations, user profiles, as well as spam and moderation tools. Of course, other comment systems can be integrated, too. Configuration \u00b6 Disqus \u00b6 Source \u00b7 Default: none First, ensure you've set site_url in mkdocs.yml . Then, to integrate Material for MkDocs with Disqus , create an account and a site giving you a shortname , and add it to mkdocs.yml : extra : disqus : <shortname> This will insert a comment system on every page, except the index page . Metadata \u00b6 The Metadata extension, which is part of the standard Markdown library, adds the ability to add front matter to a document and can be enabled via mkdocs.yml : markdown_extensions : - meta Front matter is written as a series of key-value pairs at the beginning of the Markdown document, delimited by a blank line which ends the YAML context. Customization \u00b6 Selective integration \u00b6 Source \u00b7 Difficulty: easy If the Metadata extension is enabled, you can disable or enable Disqus for specific pages by adding the following to the front matter of a page: Enable Disqus --- disqus : <shortname> --- ... Disable Disqus --- disqus : \"\" --- ... Other comment systems \u00b6 Source \u00b7 Difficulty: easy In order to integrate another JavaScript-based comment system provider, you can extend the theme and override the disqus block : {% block disqus %} <!-- Add custom comment system integration here --> {% endblock %}","title":"Adding a comment system"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/adding-a-comment-system/#adding-a-comment-system","text":"Material for MkDocs is natively integrated with Disqus , a comment system that provides a wide range of features like social integrations, user profiles, as well as spam and moderation tools. Of course, other comment systems can be integrated, too.","title":"Adding a comment system"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/adding-a-comment-system/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/adding-a-comment-system/#disqus","text":"Source \u00b7 Default: none First, ensure you've set site_url in mkdocs.yml . Then, to integrate Material for MkDocs with Disqus , create an account and a site giving you a shortname , and add it to mkdocs.yml : extra : disqus : <shortname> This will insert a comment system on every page, except the index page .","title":"Disqus"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/adding-a-comment-system/#metadata","text":"The Metadata extension, which is part of the standard Markdown library, adds the ability to add front matter to a document and can be enabled via mkdocs.yml : markdown_extensions : - meta Front matter is written as a series of key-value pairs at the beginning of the Markdown document, delimited by a blank line which ends the YAML context.","title":"Metadata"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/adding-a-comment-system/#customization","text":"","title":"Customization"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/adding-a-comment-system/#selective-integration","text":"Source \u00b7 Difficulty: easy If the Metadata extension is enabled, you can disable or enable Disqus for specific pages by adding the following to the front matter of a page: Enable Disqus --- disqus : <shortname> --- ... Disable Disqus --- disqus : \"\" --- ...","title":"Selective integration"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/adding-a-comment-system/#other-comment-systems","text":"Source \u00b7 Difficulty: easy In order to integrate another JavaScript-based comment system provider, you can extend the theme and override the disqus block : {% block disqus %} <!-- Add custom comment system integration here --> {% endblock %}","title":"Other comment systems"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/adding-a-git-repository/","text":"Adding a git repository \u00b6 If your documentation is related to source code, Material for MkDocs provides the ability to display information to the project's repository as part of the static site, including statistics like stars and forks. Furthermore, individual documents can be linked to specific source files. Configuration \u00b6 In order to display a link to the repository of your project as part of your documentation, set repo_url in mkdocs.yml to the public URL of your repository, e.g.: repo_url : https://github.com/squidfunk/mkdocs-material The link to the repository will be rendered next to the search bar on big screens and as part of the main navigation drawer on smaller screen sizes. Additionally, for GitHub and GitLab, the number of stars and forks is automatically requested and rendered for public repositories . Repository name \u00b6 Source \u00b7 Default: automatically set to GitHub , GitLab or Bitbucket MkDocs will infer the source provider by examining the URL and try to set the repository name automatically. If you wish to customize the name, set repo_name in mkdocs.yml : repo_name : squidfunk/mkdocs-material Repository icon \u00b6 Source \u00b7 Default: fontawesome/brands/git-alt While the default repository icon is a generic git icon, it can be set to any icon bundled with the theme by referencing a valid icon path in mkdocs.yml : theme : icon : repo : fontawesome/brands/git-alt Some popular choices: \u2013 fontawesome/brands/git \u2013 fontawesome/brands/git-alt \u2013 fontawesome/brands/git-square \u2013 fontawesome/brands/github \u2013 fontawesome/brands/github-alt \u2013 fontawesome/brands/github-square \u2013 fontawesome/brands/gitlab \u2013 fontawesome/brands/gitkraken \u2013 fontawesome/brands/bitbucket \u2013 fontawesome/solid/trash Edit button \u00b6 Source \u00b7 Default: automatically set If the repository URL points to a GitHub , GitLab or Bitbucket repository, an edit button is displayed at the top of each document. This behavior can be changed by setting edit_uri in mkdocs.yml : Customize edit path edit_uri : edit/master/docs/ Hide edit button edit_uri : \"\" Revision date \u00b6 Source \u00b7 Plugin The git-revision-date plugin adds support for displaying the date a document was last updated at the bottom of each page. It can be installed with pip : pip install mkdocs-git-revision-date-plugin Then, add the following to mkdocs.yml : plugins : - git-revision-date The following options are supported: enabled_if_env Default: none \u2013 This option defines whether the date is actually extracted from git, which makes it possible to disable extraction for cases when the repository is not available: plugins : - git-revision-date : enabled_if_env : CI Material for MkDocs doesn't provide official support for the other options of this plugin, so they may be supported but can also yield weird results. Use them at your own risk. Revision date, localized \u00b6 Source \u00b7 Plugin Similarly, the git-revision-date-localized plugin adds support for adding a localized last updated date at the bottom of each page. It can be installed with pip : pip install mkdocs-git-revision-date-localized-plugin Then, add the following to mkdocs.yml : plugins : - git-revision-date-localized The following options are supported: type Default: date \u2013 This option allows to change the format of the date to be displayed. Valid values are date , datetime , iso_date , iso_datetime and timeago : plugins : - git-revision-date-localized : type : date fallback_to_build_date Default: false \u2013 This option specifies whether the time when mkdocs build was executed should be used as a fallback when the git repository is not available: plugins : - git-revision-date-localized : fallback_to_build_date : true Material for MkDocs doesn't provide official support for the other options of this plugin, so they may be supported but can also yield weird results. Use them at your own risk.","title":"Adding a git repository"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/adding-a-git-repository/#adding-a-git-repository","text":"If your documentation is related to source code, Material for MkDocs provides the ability to display information to the project's repository as part of the static site, including statistics like stars and forks. Furthermore, individual documents can be linked to specific source files.","title":"Adding a git repository"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/adding-a-git-repository/#configuration","text":"In order to display a link to the repository of your project as part of your documentation, set repo_url in mkdocs.yml to the public URL of your repository, e.g.: repo_url : https://github.com/squidfunk/mkdocs-material The link to the repository will be rendered next to the search bar on big screens and as part of the main navigation drawer on smaller screen sizes. Additionally, for GitHub and GitLab, the number of stars and forks is automatically requested and rendered for public repositories .","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/adding-a-git-repository/#repository-name","text":"Source \u00b7 Default: automatically set to GitHub , GitLab or Bitbucket MkDocs will infer the source provider by examining the URL and try to set the repository name automatically. If you wish to customize the name, set repo_name in mkdocs.yml : repo_name : squidfunk/mkdocs-material","title":"Repository name"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/adding-a-git-repository/#repository-icon","text":"Source \u00b7 Default: fontawesome/brands/git-alt While the default repository icon is a generic git icon, it can be set to any icon bundled with the theme by referencing a valid icon path in mkdocs.yml : theme : icon : repo : fontawesome/brands/git-alt Some popular choices: \u2013 fontawesome/brands/git \u2013 fontawesome/brands/git-alt \u2013 fontawesome/brands/git-square \u2013 fontawesome/brands/github \u2013 fontawesome/brands/github-alt \u2013 fontawesome/brands/github-square \u2013 fontawesome/brands/gitlab \u2013 fontawesome/brands/gitkraken \u2013 fontawesome/brands/bitbucket \u2013 fontawesome/solid/trash","title":"Repository icon"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/adding-a-git-repository/#edit-button","text":"Source \u00b7 Default: automatically set If the repository URL points to a GitHub , GitLab or Bitbucket repository, an edit button is displayed at the top of each document. This behavior can be changed by setting edit_uri in mkdocs.yml : Customize edit path edit_uri : edit/master/docs/ Hide edit button edit_uri : \"\"","title":"Edit button"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/adding-a-git-repository/#revision-date","text":"Source \u00b7 Plugin The git-revision-date plugin adds support for displaying the date a document was last updated at the bottom of each page. It can be installed with pip : pip install mkdocs-git-revision-date-plugin Then, add the following to mkdocs.yml : plugins : - git-revision-date The following options are supported: enabled_if_env Default: none \u2013 This option defines whether the date is actually extracted from git, which makes it possible to disable extraction for cases when the repository is not available: plugins : - git-revision-date : enabled_if_env : CI Material for MkDocs doesn't provide official support for the other options of this plugin, so they may be supported but can also yield weird results. Use them at your own risk.","title":"Revision date"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/adding-a-git-repository/#revision-date-localized","text":"Source \u00b7 Plugin Similarly, the git-revision-date-localized plugin adds support for adding a localized last updated date at the bottom of each page. It can be installed with pip : pip install mkdocs-git-revision-date-localized-plugin Then, add the following to mkdocs.yml : plugins : - git-revision-date-localized The following options are supported: type Default: date \u2013 This option allows to change the format of the date to be displayed. Valid values are date , datetime , iso_date , iso_datetime and timeago : plugins : - git-revision-date-localized : type : date fallback_to_build_date Default: false \u2013 This option specifies whether the time when mkdocs build was executed should be used as a fallback when the git repository is not available: plugins : - git-revision-date-localized : fallback_to_build_date : true Material for MkDocs doesn't provide official support for the other options of this plugin, so they may be supported but can also yield weird results. Use them at your own risk.","title":"Revision date, localized"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-colors/","text":"Changing the colors \u00b6 As any proper Material Design implementation, Material for MkDocs supports Google's original color palette , which can be easily configured through mkdocs.yml . Furthermore, colors can be customized with a few lines of CSS to fit your brand's identity by using CSS variables . Configuration \u00b6 Color palette \u00b6 Color scheme \u00b6 Source \u00b7 Default: default Material for MkDocs supports two color schemes : a light mode, which is just called default , and a dark mode, which is called slate . The color scheme can be set via mkdocs.yml : theme : palette : scheme : default Click on a tile to change the color scheme: default slate var buttons = document.querySelectorAll(\"button[data-md-color-scheme]\") buttons.forEach(function(button) { button.addEventListener(\"click\", function() { var attr = this.getAttribute(\"data-md-color-scheme\") document.body.setAttribute(\"data-md-color-scheme\", attr) var name = document.querySelector(\"#__code_0 code span:nth-child(7)\") name.textContent = attr }) }) The color scheme can also be set based on user preference , which makes use of the prefers-color-scheme media query, by setting the value in mkdocs.yml to preference : theme : palette : scheme : preference Primary color \u00b6 Source \u00b7 Default: indigo The primary color is used for the header, the sidebar, text links and several other components. In order to change the primary color, set the following value in mkdocs.yml to a valid color name: theme : palette : primary : indigo Click on a tile to change the primary color: red pink purple deep purple indigo blue light blue cyan teal green light green lime yellow amber orange deep orange brown grey blue grey black white var buttons = document.querySelectorAll(\"button[data-md-color-primary]\") buttons.forEach(function(button) { button.addEventListener(\"click\", function() { var attr = this.getAttribute(\"data-md-color-primary\") document.body.setAttribute(\"data-md-color-primary\", attr) var name = document.querySelector(\"#__code_2 code span:nth-child(7)\") name.textContent = attr.replace(\"-\", \" \") }) }) Accent color \u00b6 Source \u00b7 Default: indigo The accent color is used to denote elements that can be interacted with, e.g. hovered links, buttons and scrollbars. It can be changed in mkdocs.yml by choosing a valid color name: theme : palette : accent : indigo Click on a tile to change the accent color: .md-typeset button[data-md-color-accent] > code { background-color: var(--md-code-bg-color); color: var(--md-accent-fg-color); } red pink purple deep purple indigo blue light blue cyan teal green light green lime yellow amber orange deep orange var buttons = document.querySelectorAll(\"button[data-md-color-accent]\") buttons.forEach(function(button) { button.addEventListener(\"click\", function() { var attr = this.getAttribute(\"data-md-color-accent\") document.body.setAttribute(\"data-md-color-accent\", attr) var name = document.querySelector(\"#__code_3 code span:nth-child(7)\") name.textContent = attr.replace(\"-\", \" \") }) }) Accessibility \u2013 not all color combinations work well With 2 (color schemes) x 21 (primary colors) x 17 (accent color) = 714 combinations, it's impossible to ensure that all configurations provide a good user experience (e.g. yellow on light background ). Make sure that the color combination of your choosing provides enough contrast and tweak CSS variables where necessary. Color palette toggle \u00b6 Source \u00b7 Experimental \u00b7 Insiders only Material for MkDocs Insiders makes it possible to define multiple color palettes, including a scheme , primary and accent color each, and let the user choose. Define them via mkdocs.yml : theme : palette : - scheme : default primary : indigo accent : indigo toggle : icon : material/toggle-switch name : Switch to light mode - scheme : slate primary : blue accent : blue toggle : icon : material/toggle-switch-off-outline name : Switch to dark mode The toggle field allows to specify an icon and name for each palette. The toggle is rendered next to the search bar and will cycle through all defined color palettes: icon Default: none \u00b7 Required \u2013 This field must point to a valid icon path referencing any icon bundled with the theme , or the build will not succeed. Some popular combinations: + \u2013 material/toggle-switch-off-outline + material/toggle-switch + \u2013 material/weather-sunny + material/weather-night + \u2013 material/eye-outline + material/eye + \u2013 material/lightbulb-outline + material/lightbulb name Default: none \u00b7 Required \u2013 This field is used as the toggle's title attribute and should be set to a discernable name to improve accessibility. Try this feature This feature is enabled on the official documentation built with Insiders. Customization \u00b6 Custom colors \u00b6 Source \u00b7 Difficulty: easy Material for MkDocs implements colors using CSS variables (custom properties). If you want to customize the colors beyond the palette (e.g. to use your brand-specific colors), you can add an additional stylesheet and tweak the values of the CSS variables. Let's say you're YouTube , and want to set the primary color to your brand's palette. Just add: : root { -- md-primary-fg-color : #EE0F0F ; -- md-primary-fg-color--light : #ECB7B7 ; -- md-primary-fg-color--dark : #90030C ; } See the file containing the color definitions for a list of all CSS variables. Custom color schemes \u00b6 Source \u00b7 Difficulty: easy Besides overriding specific colors, you can create your own, named color scheme by wrapping the definitions in the [ data-md-color-scheme = \"...\" ] attribute selector , which you can then set via mkdocs.yml as described in the color schemes section: [ data-md-color-scheme = \"youtube\" ] { -- md-primary-fg-color : #EE0F0F ; -- md-primary-fg-color--light : #ECB7B7 ; -- md-primary-fg-color--dark : #90030C ; } Additionally, the slate color scheme defines all of it's colors via hsla color functions and deduces its colors from the --md-hue CSS variable. You can tune the slate theme with: [ data-md-color-scheme = \"slate\" ] { -- md-hue : 210 ; /* [0, 360] */ }","title":"Changing the colors"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-colors/#changing-the-colors","text":"As any proper Material Design implementation, Material for MkDocs supports Google's original color palette , which can be easily configured through mkdocs.yml . Furthermore, colors can be customized with a few lines of CSS to fit your brand's identity by using CSS variables .","title":"Changing the colors"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-colors/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-colors/#color-palette","text":"","title":"Color palette"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-colors/#color-scheme","text":"Source \u00b7 Default: default Material for MkDocs supports two color schemes : a light mode, which is just called default , and a dark mode, which is called slate . The color scheme can be set via mkdocs.yml : theme : palette : scheme : default Click on a tile to change the color scheme: default slate var buttons = document.querySelectorAll(\"button[data-md-color-scheme]\") buttons.forEach(function(button) { button.addEventListener(\"click\", function() { var attr = this.getAttribute(\"data-md-color-scheme\") document.body.setAttribute(\"data-md-color-scheme\", attr) var name = document.querySelector(\"#__code_0 code span:nth-child(7)\") name.textContent = attr }) }) The color scheme can also be set based on user preference , which makes use of the prefers-color-scheme media query, by setting the value in mkdocs.yml to preference : theme : palette : scheme : preference","title":"Color scheme"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-colors/#primary-color","text":"Source \u00b7 Default: indigo The primary color is used for the header, the sidebar, text links and several other components. In order to change the primary color, set the following value in mkdocs.yml to a valid color name: theme : palette : primary : indigo Click on a tile to change the primary color: red pink purple deep purple indigo blue light blue cyan teal green light green lime yellow amber orange deep orange brown grey blue grey black white var buttons = document.querySelectorAll(\"button[data-md-color-primary]\") buttons.forEach(function(button) { button.addEventListener(\"click\", function() { var attr = this.getAttribute(\"data-md-color-primary\") document.body.setAttribute(\"data-md-color-primary\", attr) var name = document.querySelector(\"#__code_2 code span:nth-child(7)\") name.textContent = attr.replace(\"-\", \" \") }) })","title":"Primary color"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-colors/#accent-color","text":"Source \u00b7 Default: indigo The accent color is used to denote elements that can be interacted with, e.g. hovered links, buttons and scrollbars. It can be changed in mkdocs.yml by choosing a valid color name: theme : palette : accent : indigo Click on a tile to change the accent color: .md-typeset button[data-md-color-accent] > code { background-color: var(--md-code-bg-color); color: var(--md-accent-fg-color); } red pink purple deep purple indigo blue light blue cyan teal green light green lime yellow amber orange deep orange var buttons = document.querySelectorAll(\"button[data-md-color-accent]\") buttons.forEach(function(button) { button.addEventListener(\"click\", function() { var attr = this.getAttribute(\"data-md-color-accent\") document.body.setAttribute(\"data-md-color-accent\", attr) var name = document.querySelector(\"#__code_3 code span:nth-child(7)\") name.textContent = attr.replace(\"-\", \" \") }) }) Accessibility \u2013 not all color combinations work well With 2 (color schemes) x 21 (primary colors) x 17 (accent color) = 714 combinations, it's impossible to ensure that all configurations provide a good user experience (e.g. yellow on light background ). Make sure that the color combination of your choosing provides enough contrast and tweak CSS variables where necessary.","title":"Accent color"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-colors/#color-palette-toggle","text":"Source \u00b7 Experimental \u00b7 Insiders only Material for MkDocs Insiders makes it possible to define multiple color palettes, including a scheme , primary and accent color each, and let the user choose. Define them via mkdocs.yml : theme : palette : - scheme : default primary : indigo accent : indigo toggle : icon : material/toggle-switch name : Switch to light mode - scheme : slate primary : blue accent : blue toggle : icon : material/toggle-switch-off-outline name : Switch to dark mode The toggle field allows to specify an icon and name for each palette. The toggle is rendered next to the search bar and will cycle through all defined color palettes: icon Default: none \u00b7 Required \u2013 This field must point to a valid icon path referencing any icon bundled with the theme , or the build will not succeed. Some popular combinations: + \u2013 material/toggle-switch-off-outline + material/toggle-switch + \u2013 material/weather-sunny + material/weather-night + \u2013 material/eye-outline + material/eye + \u2013 material/lightbulb-outline + material/lightbulb name Default: none \u00b7 Required \u2013 This field is used as the toggle's title attribute and should be set to a discernable name to improve accessibility. Try this feature This feature is enabled on the official documentation built with Insiders.","title":"Color palette toggle"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-colors/#customization","text":"","title":"Customization"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-colors/#custom-colors","text":"Source \u00b7 Difficulty: easy Material for MkDocs implements colors using CSS variables (custom properties). If you want to customize the colors beyond the palette (e.g. to use your brand-specific colors), you can add an additional stylesheet and tweak the values of the CSS variables. Let's say you're YouTube , and want to set the primary color to your brand's palette. Just add: : root { -- md-primary-fg-color : #EE0F0F ; -- md-primary-fg-color--light : #ECB7B7 ; -- md-primary-fg-color--dark : #90030C ; } See the file containing the color definitions for a list of all CSS variables.","title":"Custom colors"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-colors/#custom-color-schemes","text":"Source \u00b7 Difficulty: easy Besides overriding specific colors, you can create your own, named color scheme by wrapping the definitions in the [ data-md-color-scheme = \"...\" ] attribute selector , which you can then set via mkdocs.yml as described in the color schemes section: [ data-md-color-scheme = \"youtube\" ] { -- md-primary-fg-color : #EE0F0F ; -- md-primary-fg-color--light : #ECB7B7 ; -- md-primary-fg-color--dark : #90030C ; } Additionally, the slate color scheme defines all of it's colors via hsla color functions and deduces its colors from the --md-hue CSS variable. You can tune the slate theme with: [ data-md-color-scheme = \"slate\" ] { -- md-hue : 210 ; /* [0, 360] */ }","title":"Custom color schemes"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-fonts/","text":"Changing the fonts \u00b6 Material for MkDocs makes it easy to change the typeface of your project documentation, as it directly integrates with Google Fonts . Alternatively, fonts can be custom-loaded if self-hosting is preferred for data privacy reasons or another destination should be used. Configuration \u00b6 Regular font \u00b6 Source \u00b7 Default: Roboto The regular font is used for all body copy, headlines, and essentially everything that does not need to be proportionally spaced. It can be set to any valid Google Font with: theme : font : text : Roboto The typeface will be loaded in 300, 400, 400i and 700 . Proportional font \u00b6 Source \u00b7 Default: Roboto Mono The proportional font is used for code blocks and can be configured separately. Just like the regular font, it can be set to any valid Google Font via mkdocs.yml with: theme : font : code : Roboto Mono The typeface will be loaded in 400. Customization \u00b6 If you want to load fonts from other destinations or don't want to use Google Fonts for data privacy reasons, e.g. due to GDPR , you may customize font loading as described below. Disabling font loading \u00b6 Source \u00b7 Difficulty: easy If you want to prevent typefaces from being loaded from Google Fonts and fall back to system fonts, add the following lines to mkdocs.yml : theme : font : false Additional fonts \u00b6 Source \u00b7 Difficulty: easy If you want to load an (additional) font from another or override the fallback font, you can use an additional stylesheet to add the corresponding @font-face definition: @ font-face { font-family : \"<font>\" ; src : \"...\" ; } The font can then be applied to specific elements, e.g. only headlines, or globally to be used as the site-wide regular or proportional font: Regular font body , input { font-family : \"<font>\" , - apple-system , Helvetica , Arial , sans-serif ; } Proportional font pre , code , kbd { font-family : \"<font>\" , SFMono-Regular , Consolas , Menlo , monospace ; }","title":"Changing the fonts"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-fonts/#changing-the-fonts","text":"Material for MkDocs makes it easy to change the typeface of your project documentation, as it directly integrates with Google Fonts . Alternatively, fonts can be custom-loaded if self-hosting is preferred for data privacy reasons or another destination should be used.","title":"Changing the fonts"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-fonts/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-fonts/#regular-font","text":"Source \u00b7 Default: Roboto The regular font is used for all body copy, headlines, and essentially everything that does not need to be proportionally spaced. It can be set to any valid Google Font with: theme : font : text : Roboto The typeface will be loaded in 300, 400, 400i and 700 .","title":"Regular font"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-fonts/#proportional-font","text":"Source \u00b7 Default: Roboto Mono The proportional font is used for code blocks and can be configured separately. Just like the regular font, it can be set to any valid Google Font via mkdocs.yml with: theme : font : code : Roboto Mono The typeface will be loaded in 400.","title":"Proportional font"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-fonts/#customization","text":"If you want to load fonts from other destinations or don't want to use Google Fonts for data privacy reasons, e.g. due to GDPR , you may customize font loading as described below.","title":"Customization"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-fonts/#disabling-font-loading","text":"Source \u00b7 Difficulty: easy If you want to prevent typefaces from being loaded from Google Fonts and fall back to system fonts, add the following lines to mkdocs.yml : theme : font : false","title":"Disabling font loading"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-fonts/#additional-fonts","text":"Source \u00b7 Difficulty: easy If you want to load an (additional) font from another or override the fallback font, you can use an additional stylesheet to add the corresponding @font-face definition: @ font-face { font-family : \"<font>\" ; src : \"...\" ; } The font can then be applied to specific elements, e.g. only headlines, or globally to be used as the site-wide regular or proportional font: Regular font body , input { font-family : \"<font>\" , - apple-system , Helvetica , Arial , sans-serif ; } Proportional font pre , code , kbd { font-family : \"<font>\" , SFMono-Regular , Consolas , Menlo , monospace ; }","title":"Additional fonts"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-language/","text":"Changing the language \u00b6 Material for MkDocs supports internationalization (i18n) and provides translations for template variables and labels in 40+ languages. Additionally, the site search can be configured to use a language-specific stemmer (if available). Configuration \u00b6 Site language \u00b6 Source \u00b7 Default: en You can set the site language in mkdocs.yml with: theme : language : en The following languages are supported: af \u2013 Afrikaans ar \u2013 Arabic bn \u2013 Bengali (Bangla) ca \u2013 Catalan cs \u2013 Czech da \u2013 Danish de \u2013 German en \u2013 English eo \u2013 Esperanto es \u2013 Spanish et \u2013 Estonian fa \u2013 Persian (Farsi) fi \u2013 Finnish fr \u2013 French gl \u2013 Galician gr \u2013 Greek he \u2013 Hebrew hi \u2013 Hindi hr \u2013 Croatian hu \u2013 Hungarian id \u2013 Indonesian it \u2013 Italian ja \u2013 Japanese ka \u2013 Georgian kr \u2013 Korean my \u2013 Burmese nl \u2013 Dutch nn \u2013 Norwegian (Nynorsk) no \u2013 Norwegian pl \u2013 Polish pt \u2013 Portuguese ro \u2013 Romanian ru \u2013 Russian sh \u2013 Serbo-Croatian si \u2013 Slovenian sk \u2013 Slovak sr \u2013 Serbian sv \u2013 Swedish th \u2013 Thai tr \u2013 Turkish uk \u2013 Ukrainian vi \u2013 Vietnamese zh \u2013 Chinese (Simplified) zh-Hant \u2013 Chinese (Traditional) zh-TW \u2013 Chinese (Taiwanese) Add language Note that some languages will produce unreadable anchor links, due to the way the default slug function works. Consider using a Unicode-aware slug function, as documented here . Site language selector \u00b6 Source \u00b7 Experimental \u00b7 Insiders only If your documentation is available in multiple languages, a language selector can be added to the header next to the search bar. Languages can be defined via mkdocs.yml : extra : alternate : - name : English link : https://squidfunk.github.io/mkdocs-material-insiders/en/ lang : en - name : Deutsch link : https://squidfunk.github.io/mkdocs-material-insiders/de/ lang : de - name : \u65e5\u672c\u8a9e link : https://squidfunk.github.io/mkdocs-material-insiders/jp/ lang : jp This will render a language selector in the header next to the search bar: This assumes that your project is structured into multiple subfolders, each of which contain the entire documentation for a given language, e.g.: . \u251c\u2500 en/ \u2502 \u251c\u2500 docs/ \u2502 \u2514\u2500 mkdocs.yml \u251c\u2500 de/ \u2502 \u251c\u2500 docs/ \u2502 \u2514\u2500 mkdocs.yml \u2514\u2500 jp/ \u251c\u2500 docs/ \u2514\u2500 mkdocs.yml Site search language \u00b6 Source \u00b7 Default: automatically set Some languages, like Arabic or Japanese, need dedicated stemmers for search to work properly. Material for MkDocs relies on lunr-languages to provide this functionality. See the guide detailing how to set up site search for more information. Directionality \u00b6 Source \u00b7 Default: automatically set While many languages are read ltr (left-to-right), Material for MkDocs also supports rtl (right-to-left) directionality which is inferred from the selected language, but can also be set with: theme : direction : ltr Click on a tile to change the directionality: ltr rtl var buttons = document.querySelectorAll(\"button[data-md-dir]\") buttons.forEach(function(button) { button.addEventListener(\"click\", function() { var attr = this.getAttribute(\"data-md-dir\") document.body.dir = attr var name = document.querySelector(\"#__code_1 code span:nth-child(5)\") name.textContent = attr }) }) Customization \u00b6 Custom translations \u00b6 Source \u00b7 Difficulty: easy If you want to customize some (or all) of the translations for your language, you may follow the guide on theme extension and create a new partial in partials/language , e.g. en-custom.html . Next, look up the translation you want to change in the base translation and add it to the partial. Let's say you want to change \" Table of contents \" to \" On this page \": {% macro t(key) %}{{ { \"toc.title\": \"On this page\" }[key] }}{% endmacro %} Then, add the following lines to mkdocs.yml : theme : language : en-custom","title":"Changing the language"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-language/#changing-the-language","text":"Material for MkDocs supports internationalization (i18n) and provides translations for template variables and labels in 40+ languages. Additionally, the site search can be configured to use a language-specific stemmer (if available).","title":"Changing the language"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-language/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-language/#site-language","text":"Source \u00b7 Default: en You can set the site language in mkdocs.yml with: theme : language : en The following languages are supported: af \u2013 Afrikaans ar \u2013 Arabic bn \u2013 Bengali (Bangla) ca \u2013 Catalan cs \u2013 Czech da \u2013 Danish de \u2013 German en \u2013 English eo \u2013 Esperanto es \u2013 Spanish et \u2013 Estonian fa \u2013 Persian (Farsi) fi \u2013 Finnish fr \u2013 French gl \u2013 Galician gr \u2013 Greek he \u2013 Hebrew hi \u2013 Hindi hr \u2013 Croatian hu \u2013 Hungarian id \u2013 Indonesian it \u2013 Italian ja \u2013 Japanese ka \u2013 Georgian kr \u2013 Korean my \u2013 Burmese nl \u2013 Dutch nn \u2013 Norwegian (Nynorsk) no \u2013 Norwegian pl \u2013 Polish pt \u2013 Portuguese ro \u2013 Romanian ru \u2013 Russian sh \u2013 Serbo-Croatian si \u2013 Slovenian sk \u2013 Slovak sr \u2013 Serbian sv \u2013 Swedish th \u2013 Thai tr \u2013 Turkish uk \u2013 Ukrainian vi \u2013 Vietnamese zh \u2013 Chinese (Simplified) zh-Hant \u2013 Chinese (Traditional) zh-TW \u2013 Chinese (Taiwanese) Add language Note that some languages will produce unreadable anchor links, due to the way the default slug function works. Consider using a Unicode-aware slug function, as documented here .","title":"Site language"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-language/#site-language-selector","text":"Source \u00b7 Experimental \u00b7 Insiders only If your documentation is available in multiple languages, a language selector can be added to the header next to the search bar. Languages can be defined via mkdocs.yml : extra : alternate : - name : English link : https://squidfunk.github.io/mkdocs-material-insiders/en/ lang : en - name : Deutsch link : https://squidfunk.github.io/mkdocs-material-insiders/de/ lang : de - name : \u65e5\u672c\u8a9e link : https://squidfunk.github.io/mkdocs-material-insiders/jp/ lang : jp This will render a language selector in the header next to the search bar: This assumes that your project is structured into multiple subfolders, each of which contain the entire documentation for a given language, e.g.: . \u251c\u2500 en/ \u2502 \u251c\u2500 docs/ \u2502 \u2514\u2500 mkdocs.yml \u251c\u2500 de/ \u2502 \u251c\u2500 docs/ \u2502 \u2514\u2500 mkdocs.yml \u2514\u2500 jp/ \u251c\u2500 docs/ \u2514\u2500 mkdocs.yml","title":"Site language selector"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-language/#site-search-language","text":"Source \u00b7 Default: automatically set Some languages, like Arabic or Japanese, need dedicated stemmers for search to work properly. Material for MkDocs relies on lunr-languages to provide this functionality. See the guide detailing how to set up site search for more information.","title":"Site search language"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-language/#directionality","text":"Source \u00b7 Default: automatically set While many languages are read ltr (left-to-right), Material for MkDocs also supports rtl (right-to-left) directionality which is inferred from the selected language, but can also be set with: theme : direction : ltr Click on a tile to change the directionality: ltr rtl var buttons = document.querySelectorAll(\"button[data-md-dir]\") buttons.forEach(function(button) { button.addEventListener(\"click\", function() { var attr = this.getAttribute(\"data-md-dir\") document.body.dir = attr var name = document.querySelector(\"#__code_1 code span:nth-child(5)\") name.textContent = attr }) })","title":"Directionality"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-language/#customization","text":"","title":"Customization"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-language/#custom-translations","text":"Source \u00b7 Difficulty: easy If you want to customize some (or all) of the translations for your language, you may follow the guide on theme extension and create a new partial in partials/language , e.g. en-custom.html . Next, look up the translation you want to change in the base translation and add it to the partial. Let's say you want to change \" Table of contents \" to \" On this page \": {% macro t(key) %}{{ { \"toc.title\": \"On this page\" }[key] }}{% endmacro %} Then, add the following lines to mkdocs.yml : theme : language : en-custom","title":"Custom translations"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-logo-and-icons/","text":"Changing the logo and icons \u00b6 When installing Material for MkDocs, you immediately get access to over 7.000 icons ready to be used for customization of specific parts of the theme and/or when writing your documentation in Markdown. Not enough? You can also add additional icons with minimal effort. Configuration \u00b6 Logo \u00b6 Source \u00b7 Default: material/library There're two ways to specify a logo : it must be a valid path to any icon bundled with the theme , or to a user-provided image located in the docs folder. Both can be set via mkdocs.yml : Icon theme : icon : logo : material/library Image theme : logo : assets/logo.png Favicon \u00b6 Source \u00b7 Default: assets/images/favicon.png The favicon can be changed to a path pointing to a user-provided image, which must be located in the docs folder. It can be set via mkdocs.yml : theme : favicon : images/favicon.png Icons \u00b6 Source \u00b7 Extension The Emoji extension, which is part of Python Markdown Extensions , adds the ability to integrate icons in the *.svg file format, which are inlined when building your site : markdown_extensions : - pymdownx.emoji : emoji_index : !!python/name:materialx.emoji.twemoji emoji_generator : !!python/name:materialx.emoji.to_svg The following icon sets are bundled with Material for MkDocs: \u2013 Material Design \u2013 FontAwesome \u2013 Octicons If you want to add additional icons , read on. Customization \u00b6 Additional icons \u00b6 Source \u00b7 Difficulty: moderate In order to add additional icons, extend the theme , and create a folder named .icons in the custom_dir you want to use for overrides. Next, add your *.svg icons into a subfolder of the .icons folder. Let's say you downloaded and unpacked the Bootstrap icon set, and want to add it to your project documentation. The structure of your project should look like this: . \u251c\u2500 overrides/ \u2502 \u2514\u2500 .icons/ \u2502 \u2514\u2500 bootstrap/ \u2502 \u2514\u2500 *.svg \u2514\u2500 mkdocs.yml Then, add the following lines to mkdocs.yml : markdown_extensions : - pymdownx.emoji : emoji_index : !!python/name:materialx.emoji.twemoji emoji_generator : !!python/name:materialx.emoji.to_svg options : custom_icons : - overrides/.icons You should now be able to use the Bootstrap icons.","title":"Changing the logo and icons"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-logo-and-icons/#changing-the-logo-and-icons","text":"When installing Material for MkDocs, you immediately get access to over 7.000 icons ready to be used for customization of specific parts of the theme and/or when writing your documentation in Markdown. Not enough? You can also add additional icons with minimal effort.","title":"Changing the logo and icons"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-logo-and-icons/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-logo-and-icons/#logo","text":"Source \u00b7 Default: material/library There're two ways to specify a logo : it must be a valid path to any icon bundled with the theme , or to a user-provided image located in the docs folder. Both can be set via mkdocs.yml : Icon theme : icon : logo : material/library Image theme : logo : assets/logo.png","title":"Logo"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-logo-and-icons/#favicon","text":"Source \u00b7 Default: assets/images/favicon.png The favicon can be changed to a path pointing to a user-provided image, which must be located in the docs folder. It can be set via mkdocs.yml : theme : favicon : images/favicon.png","title":"Favicon"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-logo-and-icons/#icons","text":"Source \u00b7 Extension The Emoji extension, which is part of Python Markdown Extensions , adds the ability to integrate icons in the *.svg file format, which are inlined when building your site : markdown_extensions : - pymdownx.emoji : emoji_index : !!python/name:materialx.emoji.twemoji emoji_generator : !!python/name:materialx.emoji.to_svg The following icon sets are bundled with Material for MkDocs: \u2013 Material Design \u2013 FontAwesome \u2013 Octicons If you want to add additional icons , read on.","title":"Icons"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-logo-and-icons/#customization","text":"","title":"Customization"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/changing-the-logo-and-icons/#additional-icons","text":"Source \u00b7 Difficulty: moderate In order to add additional icons, extend the theme , and create a folder named .icons in the custom_dir you want to use for overrides. Next, add your *.svg icons into a subfolder of the .icons folder. Let's say you downloaded and unpacked the Bootstrap icon set, and want to add it to your project documentation. The structure of your project should look like this: . \u251c\u2500 overrides/ \u2502 \u2514\u2500 .icons/ \u2502 \u2514\u2500 bootstrap/ \u2502 \u2514\u2500 *.svg \u2514\u2500 mkdocs.yml Then, add the following lines to mkdocs.yml : markdown_extensions : - pymdownx.emoji : emoji_index : !!python/name:materialx.emoji.twemoji emoji_generator : !!python/name:materialx.emoji.to_svg options : custom_icons : - overrides/.icons You should now be able to use the Bootstrap icons.","title":"Additional icons"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-navigation/","text":"Setting up navigation \u00b6 A clear and concise navigation structure is an important aspect of good project documentation. Material for MkDocs provides a multitude of options to configure the behavior of navigational elements, including tabs and sections , and its flag-ship feature: instant loading . Configuration \u00b6 Instant loading \u00b6 Source \u00b7 Feature flag When instant loading is enabled, clicks on all internal links will be intercepted and dispatched via XHR without fully reloading the page. It can be enabled via mkdocs.yml with: theme : features : - navigation.instant The resulting page is parsed and injected and all event handlers and components are rebound automatically. This means that Material for MkDocs behaves like a Single Page Application , which is especially useful for large documentation sites that come with a massive search index, as the search index will now remain intact in-between document switches. Material for MkDocs is the only MkDocs theme offering this feature. Navigation tabs \u00b6 Source \u00b7 Feature flag When tabs are enabled, top-level sections are rendered in a menu layer below the header for viewports above 1220px , but remain as-is on mobile. They can be enabled via mkdocs.yml with: theme : features : - navigation.tabs With tabs Without tabs Note that all top-level pages (i.e. all top-level entries that directly refer to an *.md file) defined inside the nav entry of mkdocs.yml will be grouped under the first tab which will receive the title of the first page. This means that there will effectively be no collapsible subsections for the first tab, because each subsection is rendered as another tab. If you want more fine-grained control, i.e. collapsible subsections for the first tab , you can use top-level sections , so that the top-level is entirely made up of sections. This is illustrated in the following example: Top-level pages nav : - Tab 1 + Page 1.1 - Page 1.2 - Tab 2 : - Page 2.1 - Page 2.2 - Page 2.3 - Page 1.3 Top-level sections nav : - Tab 1 : - Page 1.1 - Page 1.2 - Page 1.3 - Tab 2 : - Page 2.1 - Page 2.2 - Page 2.3 Also note that tabs are only shown for larger screens, so make sure that navigation is plausible on mobile devices. As another example, see the mkdocs.yml used to render these pages. Navigation sections \u00b6 Source \u00b7 Feature flag \u00b7 Insiders only When sections are enabled, top-level sections are rendered as groups in the sidebar for viewports above 1220px , but remain as-is on mobile. They can also be enabled via mkdocs.yml : theme : features : - navigation.sections With sections Without sections Both feature flags, tabs and sections , can be combined with each other. If both feature flags are enabled, sections are rendered for 2 nd level navigation items. Navigation expansion \u00b6 Source \u00b7 Feature flag \u00b7 Insiders only When expansion is enabled, the left sidebar will expand all collapsible subsections by default, so the user doesn't have to open subsections manually. It can be enabled via mkdocs.yml with: theme : features : - navigation.expand With expansion Without expansion Table of contents \u00b6 Source \u00b7 Extension The Table of contents extension, which is part of the standard Markdown library, provides some options that are supported by Material for MkDocs to customize its appearance: permalink Default: false \u2013 This option adds an anchor link containing the paragraph symbol \u00b6 or another custom symbol at the end of each headline, exactly like on the page you're currently viewing, which Material for MkDocs will make appear on hover: \u00b6 markdown_extensions : - toc : permalink : true \u2693\ufe0e markdown_extensions : - toc : permalink : \u2693\ufe0e slugify Default: headerid.slugify \u2013 This option allows for customization of the slug function. For some languages, the default may not produce good and readable identifiers. Consider using another slug function like for example those from Python Markdown Extensions : Unicode markdown_extensions : - toc : slugify : !!python/name:pymdownx.slugs.uslugify Unicode, case-sensitive markdown_extensions : - toc : slugify : !!python/name:pymdownx.slugs.uslugify_cased toc_depth Default: 6 \u2013 Define the range of levels to be included in the table of contents. This may be useful for project documentation with deeply structured headings to decrease the length of the table of contents, or to remove the table of contents altogether: Hide levels 4-6 markdown_extensions : - toc : toc_depth : 3 Hide table of contents markdown_extensions : - toc : toc_depth : 0 Note that MkDocs will not generate anchor links for levels outside the range defined with toc_depth . However, Material for MkDocs also allows to hide the table of contents on a specific page while keeping permalinks. Material for MkDocs doesn't provide official support for the other options of this extension, so they may be supported but can also yield weird results. Use them at your own risk. Navigation integration \u00b6 Source \u00b7 Feature flag \u00b7 Insiders only When integration is enabled, the table of contents is rendered as part of the navigation for viewports above 1220px , but remain as-is on mobile. This can be enabled via mkdocs.yml : theme : features : - toc.integrate Integrate table of contents Separate table of contents The content section will now always stretch to the right side, resulting in more space for your content. This feature flag can be combined with all other feature flags, e.g. tabs and sections . Hide the sidebars \u00b6 Source \u00b7 Insiders only Sometimes it's desirable to hide the navigation and/or table of contents sidebar, especially when there's a single navigation item. This can be done for any page using the Metadata extension: --- hide : - navigation # Hide navigation - toc # Hide table of contents --- ... Hide navigation Hide table of contents Hide both Customization \u00b6 Keyboard shortcuts \u00b6 Source \u00b7 Difficulty: easy Material for MkDocs includes several keyboard shortcuts that make it possible to navigate your project documentation via keyboard. There're two modes: search This mode is active when the search is focused . It provides several key bindings to make search accessible and navigable via keyboard: Down , Up : select next / previous result Esc , Tab : close search dialog Enter : follow selected result global This mode is active when search is not focussed and when there's no other focussed element that is susceptible to keyboard input. The following keys are bound: F , S , / : open search dialog P , , : go to previous page N , . : go to next page Let's say you want to bind some action to the X key. By using additional JavaScript , you can subscribe to the keyboard$ observable and attach your custom event listener: app . keyboard$ . subscribe ( function ( key ) { if ( key . mode === \"global\" && key . type === \"x\" ) { /* Add custom keyboard handler here */ key . claim () } }) The call to key . claim () will essentially execute preventDefault () on the underlying event, so the keypress will not propagate further and touch other event listeners. Content area width \u00b6 Source \u00b7 Difficulty: easy The width of the content area is set so the length of each line doesn't exceed 80-100 characters, depending on the width of the characters. While this is a reasonable default, as longer lines tend to be harder to read, it may be desirable to increase the overall width of the content area, or even make it stretch to the entire available space. This can easily be achieved with an additional stylesheet and a few lines of CSS: Increase width . md-grid { max-width : 1440 px ; } Stretch to fit . md-grid { max-width : initial ; }","title":"Setting up navigation"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-navigation/#setting-up-navigation","text":"A clear and concise navigation structure is an important aspect of good project documentation. Material for MkDocs provides a multitude of options to configure the behavior of navigational elements, including tabs and sections , and its flag-ship feature: instant loading .","title":"Setting up navigation"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-navigation/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-navigation/#instant-loading","text":"Source \u00b7 Feature flag When instant loading is enabled, clicks on all internal links will be intercepted and dispatched via XHR without fully reloading the page. It can be enabled via mkdocs.yml with: theme : features : - navigation.instant The resulting page is parsed and injected and all event handlers and components are rebound automatically. This means that Material for MkDocs behaves like a Single Page Application , which is especially useful for large documentation sites that come with a massive search index, as the search index will now remain intact in-between document switches. Material for MkDocs is the only MkDocs theme offering this feature.","title":"Instant loading"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-navigation/#navigation-tabs","text":"Source \u00b7 Feature flag When tabs are enabled, top-level sections are rendered in a menu layer below the header for viewports above 1220px , but remain as-is on mobile. They can be enabled via mkdocs.yml with: theme : features : - navigation.tabs With tabs Without tabs Note that all top-level pages (i.e. all top-level entries that directly refer to an *.md file) defined inside the nav entry of mkdocs.yml will be grouped under the first tab which will receive the title of the first page. This means that there will effectively be no collapsible subsections for the first tab, because each subsection is rendered as another tab. If you want more fine-grained control, i.e. collapsible subsections for the first tab , you can use top-level sections , so that the top-level is entirely made up of sections. This is illustrated in the following example: Top-level pages nav : - Tab 1 + Page 1.1 - Page 1.2 - Tab 2 : - Page 2.1 - Page 2.2 - Page 2.3 - Page 1.3 Top-level sections nav : - Tab 1 : - Page 1.1 - Page 1.2 - Page 1.3 - Tab 2 : - Page 2.1 - Page 2.2 - Page 2.3 Also note that tabs are only shown for larger screens, so make sure that navigation is plausible on mobile devices. As another example, see the mkdocs.yml used to render these pages.","title":"Navigation tabs"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-navigation/#navigation-sections","text":"Source \u00b7 Feature flag \u00b7 Insiders only When sections are enabled, top-level sections are rendered as groups in the sidebar for viewports above 1220px , but remain as-is on mobile. They can also be enabled via mkdocs.yml : theme : features : - navigation.sections With sections Without sections Both feature flags, tabs and sections , can be combined with each other. If both feature flags are enabled, sections are rendered for 2 nd level navigation items.","title":"Navigation sections"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-navigation/#navigation-expansion","text":"Source \u00b7 Feature flag \u00b7 Insiders only When expansion is enabled, the left sidebar will expand all collapsible subsections by default, so the user doesn't have to open subsections manually. It can be enabled via mkdocs.yml with: theme : features : - navigation.expand With expansion Without expansion","title":"Navigation expansion"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-navigation/#table-of-contents","text":"Source \u00b7 Extension The Table of contents extension, which is part of the standard Markdown library, provides some options that are supported by Material for MkDocs to customize its appearance: permalink Default: false \u2013 This option adds an anchor link containing the paragraph symbol \u00b6 or another custom symbol at the end of each headline, exactly like on the page you're currently viewing, which Material for MkDocs will make appear on hover: \u00b6 markdown_extensions : - toc : permalink : true \u2693\ufe0e markdown_extensions : - toc : permalink : \u2693\ufe0e slugify Default: headerid.slugify \u2013 This option allows for customization of the slug function. For some languages, the default may not produce good and readable identifiers. Consider using another slug function like for example those from Python Markdown Extensions : Unicode markdown_extensions : - toc : slugify : !!python/name:pymdownx.slugs.uslugify Unicode, case-sensitive markdown_extensions : - toc : slugify : !!python/name:pymdownx.slugs.uslugify_cased toc_depth Default: 6 \u2013 Define the range of levels to be included in the table of contents. This may be useful for project documentation with deeply structured headings to decrease the length of the table of contents, or to remove the table of contents altogether: Hide levels 4-6 markdown_extensions : - toc : toc_depth : 3 Hide table of contents markdown_extensions : - toc : toc_depth : 0 Note that MkDocs will not generate anchor links for levels outside the range defined with toc_depth . However, Material for MkDocs also allows to hide the table of contents on a specific page while keeping permalinks. Material for MkDocs doesn't provide official support for the other options of this extension, so they may be supported but can also yield weird results. Use them at your own risk.","title":"Table of contents"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-navigation/#navigation-integration","text":"Source \u00b7 Feature flag \u00b7 Insiders only When integration is enabled, the table of contents is rendered as part of the navigation for viewports above 1220px , but remain as-is on mobile. This can be enabled via mkdocs.yml : theme : features : - toc.integrate Integrate table of contents Separate table of contents The content section will now always stretch to the right side, resulting in more space for your content. This feature flag can be combined with all other feature flags, e.g. tabs and sections .","title":"Navigation integration"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-navigation/#hide-the-sidebars","text":"Source \u00b7 Insiders only Sometimes it's desirable to hide the navigation and/or table of contents sidebar, especially when there's a single navigation item. This can be done for any page using the Metadata extension: --- hide : - navigation # Hide navigation - toc # Hide table of contents --- ... Hide navigation Hide table of contents Hide both","title":"Hide the sidebars"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-navigation/#customization","text":"","title":"Customization"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-navigation/#keyboard-shortcuts","text":"Source \u00b7 Difficulty: easy Material for MkDocs includes several keyboard shortcuts that make it possible to navigate your project documentation via keyboard. There're two modes: search This mode is active when the search is focused . It provides several key bindings to make search accessible and navigable via keyboard: Down , Up : select next / previous result Esc , Tab : close search dialog Enter : follow selected result global This mode is active when search is not focussed and when there's no other focussed element that is susceptible to keyboard input. The following keys are bound: F , S , / : open search dialog P , , : go to previous page N , . : go to next page Let's say you want to bind some action to the X key. By using additional JavaScript , you can subscribe to the keyboard$ observable and attach your custom event listener: app . keyboard$ . subscribe ( function ( key ) { if ( key . mode === \"global\" && key . type === \"x\" ) { /* Add custom keyboard handler here */ key . claim () } }) The call to key . claim () will essentially execute preventDefault () on the underlying event, so the keypress will not propagate further and touch other event listeners.","title":"Keyboard shortcuts"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-navigation/#content-area-width","text":"Source \u00b7 Difficulty: easy The width of the content area is set so the length of each line doesn't exceed 80-100 characters, depending on the width of the characters. While this is a reasonable default, as longer lines tend to be harder to read, it may be desirable to increase the overall width of the content area, or even make it stretch to the entire available space. This can easily be achieved with an additional stylesheet and a few lines of CSS: Increase width . md-grid { max-width : 1440 px ; } Stretch to fit . md-grid { max-width : initial ; }","title":"Content area width"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-site-analytics/","text":"Setting up site analytics \u00b6 As with any other service offered on the web, understanding how your project documentation is actually used can be an essential success factor. While Material for MkDocs natively integrates with Google Analytics , other analytics services can be used, too. Configuration \u00b6 Google Analytics \u00b6 Source \u00b7 Default: none After heading over to your Google Analytics account to create a new property in order to obtain a unique tracking id of the form UA-XXXXXXXX-X , add it to mkdocs.yml : google_analytics : - UA-XXXXXXXX-X - auto Site search tracking \u00b6 Besides basic page views, site search can also be tracked to understand better how people use your documentation and what they expect to find. To enable search tracking: Go to your Google Analytics admin settings Select the property for the respective tracking code Go to the view settings tab. Scroll down and enable site search settings Set the query parameter to q . Customization \u00b6 Other analytics providers \u00b6 Source \u00b7 Difficulty: easy In order to integrate another analytics service provider offering an asynchronous JavaScript-based tracking solution, you can extend the theme and override the analytics block : {% block analytics %} <!-- Add custom analytics integration here --> {% endblock %} If you're using instant loading , you may use the location$ observable, which will emit the current URL to listen for navigation events and register a page view event with: app . location$ . subscribe ( function ( url ) { /* Add custom page event tracking here */ }) Note that this must be integrated with additional JavaScript , and cannot be included as part of the analytics block, as it is included in the head of the document.","title":"Setting up site analytics"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-site-analytics/#setting-up-site-analytics","text":"As with any other service offered on the web, understanding how your project documentation is actually used can be an essential success factor. While Material for MkDocs natively integrates with Google Analytics , other analytics services can be used, too.","title":"Setting up site analytics"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-site-analytics/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-site-analytics/#google-analytics","text":"Source \u00b7 Default: none After heading over to your Google Analytics account to create a new property in order to obtain a unique tracking id of the form UA-XXXXXXXX-X , add it to mkdocs.yml : google_analytics : - UA-XXXXXXXX-X - auto","title":"Google Analytics"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-site-analytics/#site-search-tracking","text":"Besides basic page views, site search can also be tracked to understand better how people use your documentation and what they expect to find. To enable search tracking: Go to your Google Analytics admin settings Select the property for the respective tracking code Go to the view settings tab. Scroll down and enable site search settings Set the query parameter to q .","title":"Site search tracking"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-site-analytics/#customization","text":"","title":"Customization"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-site-analytics/#other-analytics-providers","text":"Source \u00b7 Difficulty: easy In order to integrate another analytics service provider offering an asynchronous JavaScript-based tracking solution, you can extend the theme and override the analytics block : {% block analytics %} <!-- Add custom analytics integration here --> {% endblock %} If you're using instant loading , you may use the location$ observable, which will emit the current URL to listen for navigation events and register a page view event with: app . location$ . subscribe ( function ( url ) { /* Add custom page event tracking here */ }) Note that this must be integrated with additional JavaScript , and cannot be included as part of the analytics block, as it is included in the head of the document.","title":"Other analytics providers"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-site-search/","text":"Setting up site search \u00b6 Material for MkDocs provides an excellent, client-side search implementation, omitting the need for the integration of third-party services, which might violate data privacy regulations. Moreover, with some effort, search can be made available offline . Configuration \u00b6 Built-in search \u00b6 Source \u00b7 Plugin The built-in search plugin integrates seamlessly with Material for MkDocs, adding multilingual client-side search with lunr and lunr-languages . It's enabled by default, but must be re-added to mkdocs.yml when other plugins are used: plugins : - search The following options are supported: lang Default: automatically set \u2013 This option allows to include the language-specific stemmers provided by lunr-languages . Note that Material for MkDocs will set this automatically based on the site language , but it may be overridden, e.g. to support multiple languages: A single language plugins : - search : lang : ru Multiple languages plugins : - search : lang : - en - ru The following languages are supported: ar \u2013 Arabic da \u2013 Danish du \u2013 Dutch en \u2013 English fi \u2013 Finnish fr \u2013 French de \u2013 German hu \u2013 Hungarian it \u2013 Italian ja \u2013 Japanese no \u2013 Norwegian pt \u2013 Portuguese ro \u2013 Romanian ru \u2013 Russian es \u2013 Spanish sv \u2013 Swedish th \u2013 Thai tr \u2013 Turkish vi \u2013 Vietnamese Material for MkDocs also tries to support languages that are not part of this list by choosing the stemmer yielding the best result automatically . Only specify the languages you really need Be aware that including support for other languages increases the general JavaScript payload by around 20kb (before gzip ) and by another 15-30kb per language. separator Default: automatically set \u2013 The separator for indexing and query tokenization can be customized, making it possible to index parts of words separated by other characters than whitespace and - , e.g. by including . : plugins : - search : separator : '[\\s\\-\\.]+' prebuild_index Default: false \u00b7 Experimental \u2013 MkDocs can generate a prebuilt index of all pages during build time, which provides performance improvements at the cost of more bandwidth, as it reduces the build time of the search index: plugins : - search : prebuild_index : true This may be beneficial for large documentation projects served with appropriate headers, i.e. Content-Encoding: gzip , but benchmarking before deployment is recommended. Material for MkDocs doesn't provide official support for the other options of this plugin, so they may be supported but can also yield weird results. Use them at your own risk. Search suggestions \u00b6 Source \u00b7 Feature flag \u00b7 Experimental \u00b7 Insiders only When search suggestions are enabled, the search will display the likeliest completion for the last word, saving the user many key strokes by accepting the suggestion with Right It can be enabled via mkdocs.yml with: theme : features : - search.suggest Searching for [ code high ] yields [ code highlighting ] as a suggestion: Try this feature This feature is enabled on the official documentation built with Insiders. Search highlighting \u00b6 Source \u00b7 Feature flag \u00b7 Experimental \u00b7 Insiders only When search highlighting is enabled and a user clicks on a search result, Material for MkDocs will highlight all occurrences after following the link. It can be enabled via mkdocs.yml with: theme : features : - search.highlight Searching for [ code blocks ] yields: Try this feature This feature is enabled on the official documentation built with Insiders. Offline search \u00b6 Source \u00b7 Plugin \u00b7 Experimental If you distribute your documentation as *.html files, the built-in search will not work out-of-the-box due to the restrictions modern browsers impose for security reasons. This can be mitigated with the localsearch plugin in combination with @squidfunk 's iframe-worker polyfill. For setup instructions, refer to the official documentation . Customization \u00b6 The search implementation of Material for MkDocs is probably its most sophisticated feature, as it tries to balance a great typeahead experience , good performance , accessibility , and a result list that is easy to scan . This is where Material for MkDocs deviates from other themes. The following section explains how search can be customized to tailor it to your needs. Query transformation \u00b6 Source \u00b7 Difficulty: easy When a user enters a query into the search box, the query is pre-processed before it is submitted to the search index. Material for MkDocs will apply the following transformations, which can be customized by extending the theme : /** * Default transformation function * * 1. Search for terms in quotation marks and prepend a `+` modifier to denote * that the resulting document must contain all terms, converting the query * to an `AND` query (as opposed to the default `OR` behavior). While users * may expect terms enclosed in quotation marks to map to span queries, i.e. * for which order is important, `lunr` doesn't support them, so the best * we can do is to convert the terms to an `AND` query. * * 2. Replace control characters which are not located at the beginning of the * query or preceded by white space, or are not followed by a non-whitespace * character or are at the end of the query string. Furthermore, filter * unmatched quotation marks. * * 3. Trim excess whitespace from left and right. * * @param query - Query value * * @return Transformed query value */ export function defaultTransform ( query : string ) : string { return query . split ( /\"([^\"]+)\"/g ) /* => 1 */ . map (( terms , index ) => index & 1 ? terms . replace ( /^\\b|^(?![^\\x00-\\x7F]|$)|\\s+/g , \" +\" ) : terms ) . join ( \"\" ) . replace ( /\"|(?:^|\\s+)[*+\\-:^~]+(?=\\s+|$)/g , \"\" ) /* => 2 */ . trim () /* => 3 */ } If you want to switch to the default behavior of the mkdocs or readthedocs template, both of which don't transform the query prior to submission, or customize the transform function, you can do this by overriding the config block : {% block config %} < script > var search = { transform : function ( query ) { return query } } </ script > {% endblock %} The transform function will receive the query string as entered by the user and must return the processed query string to be submitted to the search index. Custom search \u00b6 Source \u00b7 Difficulty: challenging Material for MkDocs implements search as part of a web worker . If you want to switch the web worker with your own implementation, e.g. to submit search to an external service, you can add a custom JavaScript file to the docs directory and override the config block : {% block config %} < script > var search = { worker : \"<url>\" } </ script > {% endblock %} Communication with the search worker is implemented using a standardized message format using discriminated unions , i.e. through the type property of the message. See the following interface definitions to learn about the message formats: SearchMessage SearchIndex and SearchResult The sequence and direction of messages is rather intuitive: SearchSetupMessage SearchReadyMessage SearchQueryMessage SearchResultMessage","title":"Setting up site search"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-site-search/#setting-up-site-search","text":"Material for MkDocs provides an excellent, client-side search implementation, omitting the need for the integration of third-party services, which might violate data privacy regulations. Moreover, with some effort, search can be made available offline .","title":"Setting up site search"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-site-search/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-site-search/#built-in-search","text":"Source \u00b7 Plugin The built-in search plugin integrates seamlessly with Material for MkDocs, adding multilingual client-side search with lunr and lunr-languages . It's enabled by default, but must be re-added to mkdocs.yml when other plugins are used: plugins : - search The following options are supported: lang Default: automatically set \u2013 This option allows to include the language-specific stemmers provided by lunr-languages . Note that Material for MkDocs will set this automatically based on the site language , but it may be overridden, e.g. to support multiple languages: A single language plugins : - search : lang : ru Multiple languages plugins : - search : lang : - en - ru The following languages are supported: ar \u2013 Arabic da \u2013 Danish du \u2013 Dutch en \u2013 English fi \u2013 Finnish fr \u2013 French de \u2013 German hu \u2013 Hungarian it \u2013 Italian ja \u2013 Japanese no \u2013 Norwegian pt \u2013 Portuguese ro \u2013 Romanian ru \u2013 Russian es \u2013 Spanish sv \u2013 Swedish th \u2013 Thai tr \u2013 Turkish vi \u2013 Vietnamese Material for MkDocs also tries to support languages that are not part of this list by choosing the stemmer yielding the best result automatically . Only specify the languages you really need Be aware that including support for other languages increases the general JavaScript payload by around 20kb (before gzip ) and by another 15-30kb per language. separator Default: automatically set \u2013 The separator for indexing and query tokenization can be customized, making it possible to index parts of words separated by other characters than whitespace and - , e.g. by including . : plugins : - search : separator : '[\\s\\-\\.]+' prebuild_index Default: false \u00b7 Experimental \u2013 MkDocs can generate a prebuilt index of all pages during build time, which provides performance improvements at the cost of more bandwidth, as it reduces the build time of the search index: plugins : - search : prebuild_index : true This may be beneficial for large documentation projects served with appropriate headers, i.e. Content-Encoding: gzip , but benchmarking before deployment is recommended. Material for MkDocs doesn't provide official support for the other options of this plugin, so they may be supported but can also yield weird results. Use them at your own risk.","title":"Built-in search"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-site-search/#search-suggestions","text":"Source \u00b7 Feature flag \u00b7 Experimental \u00b7 Insiders only When search suggestions are enabled, the search will display the likeliest completion for the last word, saving the user many key strokes by accepting the suggestion with Right It can be enabled via mkdocs.yml with: theme : features : - search.suggest Searching for [ code high ] yields [ code highlighting ] as a suggestion: Try this feature This feature is enabled on the official documentation built with Insiders.","title":"Search suggestions"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-site-search/#search-highlighting","text":"Source \u00b7 Feature flag \u00b7 Experimental \u00b7 Insiders only When search highlighting is enabled and a user clicks on a search result, Material for MkDocs will highlight all occurrences after following the link. It can be enabled via mkdocs.yml with: theme : features : - search.highlight Searching for [ code blocks ] yields: Try this feature This feature is enabled on the official documentation built with Insiders.","title":"Search highlighting"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-site-search/#offline-search","text":"Source \u00b7 Plugin \u00b7 Experimental If you distribute your documentation as *.html files, the built-in search will not work out-of-the-box due to the restrictions modern browsers impose for security reasons. This can be mitigated with the localsearch plugin in combination with @squidfunk 's iframe-worker polyfill. For setup instructions, refer to the official documentation .","title":"Offline search"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-site-search/#customization","text":"The search implementation of Material for MkDocs is probably its most sophisticated feature, as it tries to balance a great typeahead experience , good performance , accessibility , and a result list that is easy to scan . This is where Material for MkDocs deviates from other themes. The following section explains how search can be customized to tailor it to your needs.","title":"Customization"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-site-search/#query-transformation","text":"Source \u00b7 Difficulty: easy When a user enters a query into the search box, the query is pre-processed before it is submitted to the search index. Material for MkDocs will apply the following transformations, which can be customized by extending the theme : /** * Default transformation function * * 1. Search for terms in quotation marks and prepend a `+` modifier to denote * that the resulting document must contain all terms, converting the query * to an `AND` query (as opposed to the default `OR` behavior). While users * may expect terms enclosed in quotation marks to map to span queries, i.e. * for which order is important, `lunr` doesn't support them, so the best * we can do is to convert the terms to an `AND` query. * * 2. Replace control characters which are not located at the beginning of the * query or preceded by white space, or are not followed by a non-whitespace * character or are at the end of the query string. Furthermore, filter * unmatched quotation marks. * * 3. Trim excess whitespace from left and right. * * @param query - Query value * * @return Transformed query value */ export function defaultTransform ( query : string ) : string { return query . split ( /\"([^\"]+)\"/g ) /* => 1 */ . map (( terms , index ) => index & 1 ? terms . replace ( /^\\b|^(?![^\\x00-\\x7F]|$)|\\s+/g , \" +\" ) : terms ) . join ( \"\" ) . replace ( /\"|(?:^|\\s+)[*+\\-:^~]+(?=\\s+|$)/g , \"\" ) /* => 2 */ . trim () /* => 3 */ } If you want to switch to the default behavior of the mkdocs or readthedocs template, both of which don't transform the query prior to submission, or customize the transform function, you can do this by overriding the config block : {% block config %} < script > var search = { transform : function ( query ) { return query } } </ script > {% endblock %} The transform function will receive the query string as entered by the user and must return the processed query string to be submitted to the search index.","title":"Query transformation"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-site-search/#custom-search","text":"Source \u00b7 Difficulty: challenging Material for MkDocs implements search as part of a web worker . If you want to switch the web worker with your own implementation, e.g. to submit search to an external service, you can add a custom JavaScript file to the docs directory and override the config block : {% block config %} < script > var search = { worker : \"<url>\" } </ script > {% endblock %} Communication with the search worker is implemented using a standardized message format using discriminated unions , i.e. through the type property of the message. See the following interface definitions to learn about the message formats: SearchMessage SearchIndex and SearchResult The sequence and direction of messages is rather intuitive: SearchSetupMessage SearchReadyMessage SearchQueryMessage SearchResultMessage","title":"Custom search"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-the-footer/","text":"Setting up the footer \u00b6 The footer of your project documentation is a great place to add links to websites or platforms you or your company are using as additional marketing channels, e.g. , or , which can be configured via mkdocs.yml . Configuration \u00b6 Social links \u00b6 Source \u00b7 Default: none All social links are rendered next to the copyright information as part of the footer of your project documentation. Add a list of social links in mkdocs.yml with: extra : social : - icon : fontawesome/brands/twitter link : https://twitter.com/squidfunk For each entry, the following fields are available: icon Default: none \u00b7 Required \u2013 This field must point to a valid icon path referencing any icon bundled with the theme , or the build will not succeed. Some popular choices: \u2013 fontawesome/brands/behance \u2013 fontawesome/brands/docker \u2013 fontawesome/brands/github \u2013 fontawesome/brands/instagram \u2013 fontawesome/brands/linkedin \u2013 fontawesome/brands/medium \u2013 fontawesome/brands/pied-piper-alt \u2013 fontawesome/brands/product-hunt \u2013 fontawesome/brands/slack \u2013 fontawesome/brands/twitter link Default: none \u00b7 Required \u2013 This field must contain a valid relative or absolute URL including the URI scheme. All URI schemes are supported, including mailto and bitcoin : Twitter extra : social : - icon : fontawesome/brands/twitter link : https://twitter.com/squidfunk Email address extra : social : - icon : fontawesome/solid/paper-plane link : mailto:<email-address> name Default: domain name from link , if available \u2013 This field is used as the link's title attribute and can be set to a discernable name to improve accessibility: extra : social : - icon : fontawesome/brands/twitter link : https://twitter.com/squidfunk name : squidfunk on Twitter Copyright notice \u00b6 Source \u00b7 Default: none A custom copyright banner can be rendered as part of the footer, which is displayed next to the social links. It can be defined as part of mkdocs.yml : copyright : Copyright &copy; 2016 - 2020 Martin Donath Remove generator \u00b6 Source \u00b7 Insiders only The footer displays a Made with Material for MkDocs notice to denote how the site was generated. The notice can be removed with the following setting via mkdocs.yml : extra : generator : false Customization \u00b6 Custom icons \u00b6 Source \u00b7 Difficulty: moderate The social links feature uses the standard icon integration of Material for MkDocs. If you want to use custom icons, follow the guide explaining how to add additional icons .","title":"Setting up the footer"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-the-footer/#setting-up-the-footer","text":"The footer of your project documentation is a great place to add links to websites or platforms you or your company are using as additional marketing channels, e.g. , or , which can be configured via mkdocs.yml .","title":"Setting up the footer"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-the-footer/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-the-footer/#social-links","text":"Source \u00b7 Default: none All social links are rendered next to the copyright information as part of the footer of your project documentation. Add a list of social links in mkdocs.yml with: extra : social : - icon : fontawesome/brands/twitter link : https://twitter.com/squidfunk For each entry, the following fields are available: icon Default: none \u00b7 Required \u2013 This field must point to a valid icon path referencing any icon bundled with the theme , or the build will not succeed. Some popular choices: \u2013 fontawesome/brands/behance \u2013 fontawesome/brands/docker \u2013 fontawesome/brands/github \u2013 fontawesome/brands/instagram \u2013 fontawesome/brands/linkedin \u2013 fontawesome/brands/medium \u2013 fontawesome/brands/pied-piper-alt \u2013 fontawesome/brands/product-hunt \u2013 fontawesome/brands/slack \u2013 fontawesome/brands/twitter link Default: none \u00b7 Required \u2013 This field must contain a valid relative or absolute URL including the URI scheme. All URI schemes are supported, including mailto and bitcoin : Twitter extra : social : - icon : fontawesome/brands/twitter link : https://twitter.com/squidfunk Email address extra : social : - icon : fontawesome/solid/paper-plane link : mailto:<email-address> name Default: domain name from link , if available \u2013 This field is used as the link's title attribute and can be set to a discernable name to improve accessibility: extra : social : - icon : fontawesome/brands/twitter link : https://twitter.com/squidfunk name : squidfunk on Twitter","title":"Social links"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-the-footer/#copyright-notice","text":"Source \u00b7 Default: none A custom copyright banner can be rendered as part of the footer, which is displayed next to the social links. It can be defined as part of mkdocs.yml : copyright : Copyright &copy; 2016 - 2020 Martin Donath","title":"Copyright notice"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-the-footer/#remove-generator","text":"Source \u00b7 Insiders only The footer displays a Made with Material for MkDocs notice to denote how the site was generated. The notice can be removed with the following setting via mkdocs.yml : extra : generator : false","title":"Remove generator"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-the-footer/#customization","text":"","title":"Customization"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-the-footer/#custom-icons","text":"Source \u00b7 Difficulty: moderate The social links feature uses the standard icon integration of Material for MkDocs. If you want to use custom icons, follow the guide explaining how to add additional icons .","title":"Custom icons"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-the-header/","text":"Setting up the header \u00b6 Material for MkDocs' header can be customized to show an announcement bar that disappears upon scrolling, and provides some options for further configuration. It also includes the search bar and a place to display your project's git repository , as explained in those dedicated guides. Configuration \u00b6 Automatic hiding \u00b6 Source \u00b7 Feature flag \u00b7 Experimental \u00b7 Insiders only When autohiding is enabled, the header is automatically hidden when the user scrolls past a certain threshold, leaving more space for content. It can be enabled via mkdocs.yml with: theme : features : - header.autohide Customization \u00b6 Announcement bar \u00b6 Material for MkDocs includes an announcement bar, which is the perfect place to display project news or other important information to the user. When the user scrolls past the header, the bar will automatically disappear. In order to add an announcement bar, extend the theme and override the announce block , which is empty by default: {% block announce %} <!-- Add your announcement here, including arbitrary HTML --> {% endblock %}","title":"Setting up the header"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-the-header/#setting-up-the-header","text":"Material for MkDocs' header can be customized to show an announcement bar that disappears upon scrolling, and provides some options for further configuration. It also includes the search bar and a place to display your project's git repository , as explained in those dedicated guides.","title":"Setting up the header"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-the-header/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-the-header/#automatic-hiding","text":"Source \u00b7 Feature flag \u00b7 Experimental \u00b7 Insiders only When autohiding is enabled, the header is automatically hidden when the user scrolls past a certain threshold, leaving more space for content. It can be enabled via mkdocs.yml with: theme : features : - header.autohide","title":"Automatic hiding"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-the-header/#customization","text":"","title":"Customization"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-the-header/#announcement-bar","text":"Material for MkDocs includes an announcement bar, which is the perfect place to display project news or other important information to the user. When the user scrolls past the header, the bar will automatically disappear. In order to add an announcement bar, extend the theme and override the announce block , which is empty by default: {% block announce %} <!-- Add your announcement here, including arbitrary HTML --> {% endblock %}","title":"Announcement bar"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-versioning/","text":"Setting up versioning \u00b6 Material for MkDocs makes it easy to deploy multiple versions of your project documentation by integrating with external utilities that add those capabilities to MkDocs, i.e. mike . When deploying a new version, older versions of your documentation remain untouched. Configuration \u00b6 Versioning \u00b6 Source \u00b7 Utility \u00b7 Experimental \u00b7 Insiders only mike makes it easy to deploy multiple versions of your project documentation. It integrates natively with Material for MkDocs and can be enabled via mkdocs.yml : extra : version : method : mike This will render a version selector in the header next to the title of your project: Try this feature This feature is enabled in the versioning example built with Insiders. Why use mike? mike is built around the idea that once you've generated your docs for a particular version, you should never need to touch that version again. This means you never have to worry about breaking changes in MkDocs, since your old docs (built with an old version of MkDocs) are already generated and sitting in your gh-pages branch. While mike is flexible, it's optimized around putting your docs in a <major>.<minor> directory, with optional aliases (e.g. latest or dev ) to particularly notable versions. This makes it easy to make permalinks to whatever version of the documentation you want to direct people to. Note that you don't need to run mike install-extras as noted in the official documentation , as mike is now natively integrated with Material for MkDocs. Usage \u00b6 While this section outlines the basic workflow for publishing new versions, it's best to check out the official documentation to make yourself familar with mike . Publishing a new version \u00b6 If you want to publish a new version of your project documentation, choose a version identifier and update the alias set as the default version with: mike deploy --push --update-aliases 0.1 latest Note that every version will be deployed as a subdirectory of your site_url , e.g.: docs.example.com/0.1 docs.example.com/0.2 ... Setting a default version \u00b6 When starting with mike , a good idea is to set an alias as a default version, e.g. latest , and when publishing a new version, always update the alias to point to the latest version: mike set-default --push latest When publishing a new version, mike will create a redirect in the root of your project documentation to the version associated with the alias: docs.example.com docs.example.com/0.1","title":"Setting up versioning"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-versioning/#setting-up-versioning","text":"Material for MkDocs makes it easy to deploy multiple versions of your project documentation by integrating with external utilities that add those capabilities to MkDocs, i.e. mike . When deploying a new version, older versions of your documentation remain untouched.","title":"Setting up versioning"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-versioning/#configuration","text":"","title":"Configuration"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-versioning/#versioning","text":"Source \u00b7 Utility \u00b7 Experimental \u00b7 Insiders only mike makes it easy to deploy multiple versions of your project documentation. It integrates natively with Material for MkDocs and can be enabled via mkdocs.yml : extra : version : method : mike This will render a version selector in the header next to the title of your project: Try this feature This feature is enabled in the versioning example built with Insiders. Why use mike? mike is built around the idea that once you've generated your docs for a particular version, you should never need to touch that version again. This means you never have to worry about breaking changes in MkDocs, since your old docs (built with an old version of MkDocs) are already generated and sitting in your gh-pages branch. While mike is flexible, it's optimized around putting your docs in a <major>.<minor> directory, with optional aliases (e.g. latest or dev ) to particularly notable versions. This makes it easy to make permalinks to whatever version of the documentation you want to direct people to. Note that you don't need to run mike install-extras as noted in the official documentation , as mike is now natively integrated with Material for MkDocs.","title":"Versioning"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-versioning/#usage","text":"While this section outlines the basic workflow for publishing new versions, it's best to check out the official documentation to make yourself familar with mike .","title":"Usage"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-versioning/#publishing-a-new-version","text":"If you want to publish a new version of your project documentation, choose a version identifier and update the alias set as the default version with: mike deploy --push --update-aliases 0.1 latest Note that every version will be deployed as a subdirectory of your site_url , e.g.: docs.example.com/0.1 docs.example.com/0.2 ...","title":"Publishing a new version"},{"location":"kb/GNU-Linux/Software/mkDocs/setup/setting-up-versioning/#setting-a-default-version","text":"When starting with mike , a good idea is to set an alias as a default version, e.g. latest , and when publishing a new version, always update the alias to point to the latest version: mike set-default --push latest When publishing a new version, mike will create a redirect in the root of your project documentation to the version associated with the alias: docs.example.com docs.example.com/0.1","title":"Setting a default version"},{"location":"kb/GNU-Linux/hardware/impresoras/","text":"Impresora Brother Ubuntu \u00b6 Antiguamente tenia una impresora que con los drivers se instal\u00f3 bien y imprimia correctamente. Se cambio la impresora por otra Brother pd 1610W. Bajamos los drivers de la pagina de brother pero las letras con rabillo como la g, y y otras las imprimia mal Solucion boton ubuntu y buscar \u201cConfiguraci\u00f3n del sistema\u201d borrar las impresoras que haya instaladas en sistema \u2013 impresoras Desde sistema \u2013 impresoras agregarla desde ah\u00ed\u2026","title":"Impresoras"},{"location":"kb/GNU-Linux/hardware/impresoras/#impresora-brother-ubuntu","text":"Antiguamente tenia una impresora que con los drivers se instal\u00f3 bien y imprimia correctamente. Se cambio la impresora por otra Brother pd 1610W. Bajamos los drivers de la pagina de brother pero las letras con rabillo como la g, y y otras las imprimia mal Solucion boton ubuntu y buscar \u201cConfiguraci\u00f3n del sistema\u201d borrar las impresoras que haya instaladas en sistema \u2013 impresoras Desde sistema \u2013 impresoras agregarla desde ah\u00ed\u2026","title":"Impresora Brother Ubuntu"},{"location":"kb/GNU-Linux/hardware/raspberry/","text":"Raspberry Pi \u00b6 Asignar una IP est\u00e1tica al Raspberry Pi \u00b6 Modificamos el fichero de configuraci\u00f3n del cliente dhcp sudo nano /etc/dhcpcd.conf dejamos el fichero as\u00ed: interface eth0 # o wlan0 para wifi static ip_address=192.168.1.253/24 static routers=192.168.1.1 static domain_name_servers=8.8.8.8 8.8.4.4 Imagen de la tarjeta SD del Raspberry \u00b6 Este proceso solo funciona si las tarjetas son del mismo tama\u00f1o Hacemos df -h para ver todas las unidades: df -h S.ficheros Tama\u00f1o Usados Disp Uso% Montado en udev 3,9G 4,0K 3,9G 1% /dev tmpfs 789M 1,8M 787M 1% /run /dev/sdb2 50G 11G 36G 24% / none 4,0K 0 4,0K 0% /sys/fs/cgroup none 5,0M 0 5,0M 0% /run/lock none 3,9G 76K 3,9G 1% /run/shm none 100M 56K 100M 1% /run/user /dev/sdb1 511M 3,4M 508M 1% /boot/efi /dev/sda 233G 202G 32G 87% /media/backups /dev/sdc1 1,8T 939G 803G 54% /home /dev/sdf6 6,3G 4,1G 2,0G 68% /media/javier/root /dev/sdf3 27M 438K 25M 2% /media/javier/SETTINGS /dev/sdf5 60M 20M 40M 33% /media/javier/BOOT Vemos que en este caso las distintas particiones de la tarjeta del raspberry son sdf6, sdf3 y sdf5 todas ellas en la unidad sdf Para hacer backup de la tarjeta ejecutamos el comando: sudo dd bs=4M if=/dev/sdf of=raspbian_11_2_2016.img 1895+0 registros le\u00eddos 1895+0 registros escritos 7948206080 bytes (7,9 GB) copiados, 408,713 s, 19,4 MB/s para recuperar el backup en otra tarjeta: sudo dd bs=4M if=raspbian_11_2_2016.img of=/dev/sdf Estos ficheros de imagen en ocasiones pueden ser grandes, por tanto se puede usar el pipe para redirigir la entrada y salida a un fichero zip de esta forma: Para comprimir de la tarjeta a un fichero sudo dd bs=4M if=/dev/sdf | gzip > rasbian.img.gz Para extraer de un fichero a una tarjeta: sudo gunzip --stdout rasbian.img.gz | dd bs=4m of=/dev/sdf Me ha pasado despu\u00e9s de clonar la tarjeta que no me reconoce el disco duro externo de 2.0 TB que uso como NAS. En ese caso ejecutar el comando: sudo rpi-update; sudo reboot Fuentes: https://www.raspberrypi.org/documentation/linux/filesystem/backup.md https://www.raspberrypi.org/forums/viewtopic.php?f=28&t=126117 Blocklist para pi-hole \u00b6 Probablemente La mejor y \u00fanica lista que necesitas a\u00f1adir a tu pi-hole https://www.reddit.com/r/pihole/comments/bppug1/introducing_the/ https://dbl.oisd.nl","title":"Raspberry"},{"location":"kb/GNU-Linux/hardware/raspberry/#raspberry-pi","text":"","title":"Raspberry Pi"},{"location":"kb/GNU-Linux/hardware/raspberry/#asignar-una-ip-estatica-al-raspberry-pi","text":"Modificamos el fichero de configuraci\u00f3n del cliente dhcp sudo nano /etc/dhcpcd.conf dejamos el fichero as\u00ed: interface eth0 # o wlan0 para wifi static ip_address=192.168.1.253/24 static routers=192.168.1.1 static domain_name_servers=8.8.8.8 8.8.4.4","title":"Asignar una IP est\u00e1tica al Raspberry Pi"},{"location":"kb/GNU-Linux/hardware/raspberry/#imagen-de-la-tarjeta-sd-del-raspberry","text":"Este proceso solo funciona si las tarjetas son del mismo tama\u00f1o Hacemos df -h para ver todas las unidades: df -h S.ficheros Tama\u00f1o Usados Disp Uso% Montado en udev 3,9G 4,0K 3,9G 1% /dev tmpfs 789M 1,8M 787M 1% /run /dev/sdb2 50G 11G 36G 24% / none 4,0K 0 4,0K 0% /sys/fs/cgroup none 5,0M 0 5,0M 0% /run/lock none 3,9G 76K 3,9G 1% /run/shm none 100M 56K 100M 1% /run/user /dev/sdb1 511M 3,4M 508M 1% /boot/efi /dev/sda 233G 202G 32G 87% /media/backups /dev/sdc1 1,8T 939G 803G 54% /home /dev/sdf6 6,3G 4,1G 2,0G 68% /media/javier/root /dev/sdf3 27M 438K 25M 2% /media/javier/SETTINGS /dev/sdf5 60M 20M 40M 33% /media/javier/BOOT Vemos que en este caso las distintas particiones de la tarjeta del raspberry son sdf6, sdf3 y sdf5 todas ellas en la unidad sdf Para hacer backup de la tarjeta ejecutamos el comando: sudo dd bs=4M if=/dev/sdf of=raspbian_11_2_2016.img 1895+0 registros le\u00eddos 1895+0 registros escritos 7948206080 bytes (7,9 GB) copiados, 408,713 s, 19,4 MB/s para recuperar el backup en otra tarjeta: sudo dd bs=4M if=raspbian_11_2_2016.img of=/dev/sdf Estos ficheros de imagen en ocasiones pueden ser grandes, por tanto se puede usar el pipe para redirigir la entrada y salida a un fichero zip de esta forma: Para comprimir de la tarjeta a un fichero sudo dd bs=4M if=/dev/sdf | gzip > rasbian.img.gz Para extraer de un fichero a una tarjeta: sudo gunzip --stdout rasbian.img.gz | dd bs=4m of=/dev/sdf Me ha pasado despu\u00e9s de clonar la tarjeta que no me reconoce el disco duro externo de 2.0 TB que uso como NAS. En ese caso ejecutar el comando: sudo rpi-update; sudo reboot Fuentes: https://www.raspberrypi.org/documentation/linux/filesystem/backup.md https://www.raspberrypi.org/forums/viewtopic.php?f=28&t=126117","title":"Imagen de la tarjeta SD del Raspberry"},{"location":"kb/GNU-Linux/hardware/raspberry/#blocklist-para-pi-hole","text":"Probablemente La mejor y \u00fanica lista que necesitas a\u00f1adir a tu pi-hole https://www.reddit.com/r/pihole/comments/bppug1/introducing_the/ https://dbl.oisd.nl","title":"Blocklist para pi-hole"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/","text":"Servidor LDAP 389DS \u00b6 Configuraci\u00f3n previa \u00b6 Los pasos a seguir para configurar un servidor 389DS que contenga la informaci\u00f3n necesaria para autenticar/identificar usuarios (y los pasos a seguir para configurar un cliente LDAP para que esos usuarios accedan a ella) se detallan a continuaci\u00f3n. Deber\u00e1s utilizar dos m\u00e1quinas virtuales Fedora: una de ellas har\u00e1 de servidor LDAP y la otra har\u00e1 de cliente. Aseg\u00farate que ambas tengan, adem\u00e1s de una tarjeta en modo NAT para poder conectarse a Internet, una tarjeta en modo red interna con una IP fija (en este documento supondremos que tienen la 192.168.0.1 y 192.168.0.2, respectivamente) y de que la m\u00e1quina que haga de cliente tenga instalado un entorno gr\u00e1fico con navegador y gestor de ficheros (bastar\u00e1 hacer sudo dnf install gdm firefox nautilus para ello). Servidor \u00b6 A. Antes de instalar nada, a la m\u00e1quina que har\u00e1 de servidor LDAP dale un nombre que tenga una estructura similar a un nombre DNS (por ejemplo, en este documento usaremos el de miservidor.midominio.local ). De hecho, la infrastructura b\u00e1sica de una red con servidor LDAP integrado se deber\u00eda completar con un servidor DNS m\u00e1s pronto que tarde (para, entre otras cosas, no tener que configurar el archivo /etc/hosts de los clientes individualmente -como tendremos que hacer m\u00e1s adelante-), pero para no complicar m\u00e1s las cosas, realiza estos tres simples pasos y ya est\u00e1: -Ejecuta el comando sudo hostnamectl set-hostname miservidor.midominio.local . Esto har\u00e1 que el fichero /etc/hostname contenga el nuevo nombre \u201ctipo DNS\u201d de nuestro servidor (lo puedes comprobar tambi\u00e9n con el comando hostnamectl status ). Modifica manualmente el archivo /etc/hosts para que las IP 127.0.0.1 (v4) y ::1 (v6) all\u00e1 indicadas est\u00e9n asociadas a \u201cmiservidor.midominio.local\u201d en vez de a \u201clocalhost\u201d. Una vez hecho estos dos pasos, reinicia la m\u00e1quina. Nota Que el nombre del servidor sea de tipo DNS es necesario para que las entradas \u201cdc\u201d de nuestro servidor LDAP se correspondan con los subdominios de dicho nombre. Es decir, al generar la base de datos de nuestras entradas en forma de \u00e1rbol invertido, todas ellas deber\u00e1n colgar de un DN base que en nuestro caso ser\u00e1 \u201cdc=midominio,dc=local\u201d . Instalaci\u00f3n \u00b6 Instala el software correspondiente a un servidor LDAP b\u00e1sico: sudo dnf install 389-ds-base Nota Otros paquetes interesantes s\u00f3n \"389-admin\" (el cual representa un \"servidor de administraci\u00f3n\", \u00fatil para gestionar determinadas tareas relacionadas con el funcionamiento del servidor LDAP -como pararlo, reiniciarlo, hacer copias de seguridad, etc-) y/o \"389-console\" (el cual incluye a su vez los paquetes \"389-ds-console\" y \"389-admin-console\" y sirve para, respectivamente, ofrecer una interfaz gr\u00e1fica (basada en Java) para trabajar contra el directorio alojado en el servidor LDAP como un cliente LDAP est\u00e1ndar -es decir, para gestionar la informaci\u00f3n guardada:a\u00f1adiendo/eliminando/modificando nodos, etc- o bien para trabajar contra el servidor de administraci\u00f3n anteriormente mencionado orden\u00e1ndole las tareas administrativas de forma gr\u00e1fica). Tambi\u00e9n existe el paquete \"389-ds\" (el cual incluye todos los paquetes anteriores). Configuraci\u00f3n inicial \u00b6 Configura el servidor LDAP propiamente dicho para poderlo empezar a usar. Para ello primero crea un fichero INF (llam\u00e9moslo \"fichero.inf\"), el cual tendr\u00e1 un contenido ya predeterminado, mediante el comando dscreate create-template /ruta/fichero.inf . Este fichero INF representa un \"molde\" que podremos editar a conveniencia con cualquier editor de texto para asignar los valores deseados a las distintas directivas all\u00ed presentes. Estas directivas est\u00e1n perfectamente documentadas dentro del propio fichero y son bastante obvias; de todas maneras, como todas ellas ya tienen un valor por defecto asignado, nosotros tan solo necesitaremos editar unas pocas. En concreto, deberemos tener las siguientes directivas escritas como sigue: Nota Hay que tener en cuenta que si se desea cambiar el valor por defecto de una directiva, adem\u00e1s de modificar el valor en s\u00ed, para activar el cambio efectivamente se tendr\u00e1 de borrar el punto y coma que hay al inicio de la directiva en cuesti\u00f3n. Directiva instance_name=miservidor : Para indicar que la instancia del servidor 389 a crear se llamar\u00e1 \"miservidor\" (aunque podr\u00eda tener cualquier otro nombre). En un mismo ordenador podemos tener diferentes instancias del servidor 389DS, cada una independiente de la otra, gestionando cada una su/s propio/s directorio/s estancos y administr\u00e1ndose de forma individual. Cada instancia tendr\u00e1 que definirse en un fichero INF diferente Directiva root_dn = cn=admin : Indica que el \"common name\" del usuario administrador del directorio manejado por la instancia en cuesti\u00f3n ser\u00e1 \"cn=admin\".Por defecto este usuario es el \u00fanico que puede hacer tanto modificaciones como consultas en los directorios de servidores 389DS. Directiva root_password = 12345678 : Indica que la contrase\u00f1a del usuario administrador anterior ser\u00e1 \"12345678\". Si no se quisiera escribir la contrase\u00f1a en texto plano directamente en el fichero INF, existe la posibilidad de generar previamente un hash adecuado mediante el comando pwdhash contrase\u00f1a. M\u00ednimo 8 caracteres y entonces asignar el valor mostrado por pantalla tal cual a esta directiva Directiva create_suffix_entry = true : Indica que se desea crear una entrada ra\u00edz en el directorio Directiva suffix = dc=midominio,dc=local : Indica que el nombre de la entrada ra\u00edz del directorio a crear ser\u00e1 \"dc=midominio,dc=local\" Nota NOTA: El fichero INF contiene, tal como hemos dicho, muchas otras directivas que no ser\u00e1 necesario editar si no lo deseamos porque ya deber\u00edan tener asignado el valor adecuado , como por ejemplo full_machine_name (cuyo valor deber\u00eda ser el nombre completo de la m\u00e1quina establecido en el primer apartado, es decir, en nuestro caso: \"miservidor.midominio.local\"), port (cuyo valor por defecto es 389; si se indica el valor 0 se estar\u00eda cerrando el puerto, esto es, deshabilitando la posibilidad de atender conexiones no encriptadas), secure_port (cuyo valor por defecto es 636; si se indica el valor 0 se estar\u00eda cerrando el puerto, esto es, deshabilitando la posibilidad de atender conexiones encriptadas via TLS) o self_sign_cert (cuyo valor por defecto, True, activa el uso de TLS para asegurar las comunicaciones por red con los clientes, y lo hace mediante certificados autofirmados), entre otras. Adem\u00e1s, son interesantes reconocer diversas directivas que apuntan a rutas de carpetas relevantes, como \"backup_dir\", \"cert_dir\", \"config_dir\" o \"db_dir\" (esta \u00faltima es la que aloja los ficheros que contienen f\u00edsicamente los datos del directorio) Nota NOTA: Las l\u00edneas create_suffix_entry y suffix del fichero INF se encuentran bajo una secci\u00f3n titulada [backend-userroot] Los \"backend\" son los tipos de bases de datos que el servidor 389DS soporta para almacenar de forma permanente la informaci\u00f3n contenida en los directorios que gestiona; en este caso, la secci\u00f3n indica que se crear\u00e1 un backend llamado \"userroot\". Puede haber muchos tipos de backends, por lo que en 389DS se utiliza un mecanismo de plugins para solamente utilizar el/los plugin/s necesario/s para gestionar el/los backend/s correspondiente/s. El tipo de backend empleado por defecto por 389DS es la base de datos de tipo LDBM, que es una variante de las de tipo BerkeleyDB (las cuales todas ellas son implementadas f\u00edsicamente en forma de ficheros en disco). En el archivo \"dse.ldif\" (ver siguiente apartado) se encuentra la informaci\u00f3n sobre la configuraci\u00f3n del backend asociado a un directorio (bajo la secci\u00f3n dn:dc=midominio,dc=local, cn=mapping tree, cn=config ) y sobre la propia configuraci\u00f3n de ese backend elegido, bajo la secci\u00f3n dc: cn=ldbm database,cn=plugins,cn=config y dc: cn=config,cn=ldbm database,cn=plugins,cn=config Para m\u00e1s informaci\u00f3n consultar https://www.port389.org/docs/389ds/design/architecture.html y tambi\u00e9n el cuadro siguiente: A continuaci\u00f3n utiliza el fichero INF generado en el paso anterior como entrada en el siguiente comando : sudo dscreate from-file /ruta/fichero.inf Este comando establece realmente la configuraci\u00f3n de la instancia \"miservidor\" en un formato que el servidor LDAP entender\u00e1 (concretamente, genera el archivo de configuraci\u00f3n /etc/dirsrv/slapd-miservidor/dse.ldif , el cual contiene todas las directivas indicadas en el fichero INF anterior -con alguna variaci\u00f3n en su nombre- adem\u00e1s de muchas otras m\u00e1s; todas las directivas presentes en este fichero dse.ldif tienen la particularidad de estar escritas en un formato de texto llamado LDIF, el cual estudiaremos m\u00e1s adelante pero b\u00e1sicamente lo que hay que saber ahora es que esto significa que este fichero puede ser modificado igualmente mediante cualquier editor de texto est\u00e1ndar). Nota Una manera de editar el fichero \"dse.ldif\" es, en vez de utilitzar un editor de texto gen\u00e9rico, utilizar el comando espec\u00edfico de 389DS llamado dsconf; concretamente, para cambiar la contrase\u00f1a del usuario \"admin\" usando esta herramienta se podr\u00eda hacer (de forma interactiva y, eso s\u00ed, conociendo la contrase\u00f1a previa) as\u00ed: dsconf -D \"cn=admin\" miservidor directory_manager password_change . Otra manera ser\u00eda, ya que el fichero \"dse.ldif\" no deja de ser un fichero LDIF est\u00e1ndar, utilizar los comandos est\u00e1ndar de edici\u00f3n de ficheros LDIF como es principalmente el comando ldapmodify, que veremos pronto ( https://directory.fedoraproject.org/docs/389ds/howto/howto-resetdirmgrpassword.html#use-ldapmodify ) Nota Otra manera alternativa de configurar el servidor LDAP es usando el comando sudo dscreate interactive , el cual muestra un asistente en modo texto que ofrece una serie de preguntas interactivas esenciales (como el nombre de la instancia a crear, el puerto de escucha, si queremos activar TLS, etc) y, a partir de la respuesta dada en ellas, genera autom\u00e1ticamente el fichero \"dse.ldif\" adecuado. No obstante, deberemos acabar editando el archivo \"dse.ldif\" a mano para poder adaptarlo m\u00e1s espec\u00edficamente a nuestras circunstancias (el asistente no pregunta todas las preguntas que necesitar\u00edamos contestar), as\u00ed que realmente no es de mucha ayuda. Nota NOTA: Es posible crear otro backend (en principio del mismo tipo LDBM) separado del backend por defecto \"userroot\" para almacenar otro directorio diferente en la misma instancia. Eso se puede hacer as\u00ed: sudo dsconf -D \"cn=admin\" -W miservidor backend create \u2013suffix dc=otrodominio,dc=local --be-name nombreBackend Los cambios se ver\u00e1n reflejados, efectivamente, en el archivo \"dse.ldif\" d) Comprobar que, efectivamente, la instancia reci\u00e9n configurada haya sido arrancada correctamente mediante el comando sudo systemctl status dirsrv@miservidor (detr\u00e1s de la arroba ha de ir el nombre de la instancia indicado en el asistente anterior...si no lo hemos modificado, por defecto este nombre se corresponder\u00e1 con el nombre corto de la m\u00e1quina). A partir de aqu\u00ed, la instancia se podr\u00e1 gestionar como cualquier otro demonio del sistema con systemctl start, systemctl stop, systemctl enable, systemctl disable,... Nota NOTA: Tambi\u00e9n se puede utilizar el comando sudo dsctl miservidor status para comprobar el estado de funcionamiento de la instancia indicada. El comando dsctl se puede emplear como sustituto de systemctl ya que tiene opciones para iniciar, parar, reiniciar, etc la instancia en cuesti\u00f3n. Una opci\u00f3n muy interesante (y peligrosa!) es la de eliminar completamente la instancia (y su/s directorio/s correspondiente/s), la cual es sudo dsctl miservidor remove --do-it Nota NOTA: At installation, Directory Server contains the following: a server front-end responsible for network communications, plug-ins for server functions, such as access control and replication, a basic directory tree containing server-related data (defined in \"dse.ldif\" file) and a database back-end plug-in responsible for managing the actual storage and retrieval of server data. Abrir puertos en el Firewall \u00b6 :::bash systemctl status firewalld systemctl enable firewalld systemctl start firewalld firewall-cmd --permanent --add-port={389/tcp,636/tcp} firewall-cmd --reload Administraci\u00f3n b\u00e1sica del directorio: \u00b6 Ya tenemos el servidor LDAP funcionando y escuchando en el puerto 389 TCP. Ahora deber\u00edamos generar la estructura de entradas de nuestro directorio y rellenarlas de datos. Tip Comprueba desde el servidor, con el comando ss -tln , como aparece el socket escuchando en ese puerto Agregar informaci\u00f3n - Procedimiento gen\u00e9rico \u00b6 La forma m\u00e1s b\u00e1sica de a\u00f1adir informaci\u00f3n a un directorio cualquiera es utilizar ficheros de texto cuyo contenido est\u00e1 escrito en el formato LDIF (LDAP Data Interchange Format). El formato b\u00e1sico de una entrada es...: :::text # comentario dn: <nombre global \u00fanico> <atributo>: <valor> <atributo>: <valor> ... ...donde los atributos indicados deben pertenecer a alg\u00fan objeto perteneciente a alg\u00fan \"schema\" previamente reconocido por el servidor para que sean interpretados correctamente (por suerte, todos los objetos que utilizaremos en este documento est\u00e1n definidos en \"schemas\" que ya vienen incluidos de serie en cualquier software de tipo servidor LDAP actual). Nota En el caso de utilizar, por ejemplo, el servidor 389DS, los objetos que emplearemos a lo largo de este documento est\u00e1n definidos en el fichero /usr/share/dirsrv/schema/00core.ldif (el de tipo \"organizationalUnit\") y /usr/share/dirsrv/schema/10rfc2307.ldif (los de tipo \"posixGroup\", \"posixAccount\" y \"shadowAccount\"), etc Un objeto que tambi\u00e9n podr\u00edamos haber utilizado (pero no lo hemos hecho) es el objeto \"hostObject\" (definido en /usr/share/dirsrv/schema/60nss-ldap.ldif ), cuyo atributo m\u00e1s importante es \"host\" (el valor del cual puede ser una IP o un nombre DNS) y que permitir\u00eda alojar en el directorio informaci\u00f3n sobre las m\u00e1quinas que formar\u00edan un dominio (y, eventualmente, aplicarles reglas de acceso, etc) Entre dos entradas consecutivas escritas en un archivo LDIF debe existir siempre una l\u00ednea en blanco. Por otro lado, si una l\u00ednea es demasiado larga, podemos repartir su contenido entre varias, siempre que las l\u00edneas de continuaci\u00f3n comiencen con un car\u00e1cter de tabulaci\u00f3n o un espacio en blanco. Una vez creados estos ficheros, para a\u00f1adirlos al directorio (incluso con el servidor en marcha) podemos utilizar el comando ldapadd (disponible al instalar el paquete llamado \u201cldap-utils\u201d -en Ubuntu-, o\"openldap-clients\" -en Fedora- aunque en el caso de haber instalado el paquete \"389-ds-base\" ya se habr\u00e1 instalado autom\u00e1ticamente como dependencia). La mayor\u00eda de veces necesitaremos indicar los siguientes par\u00e1metros: -H ldap://nomDnsServidor:n\u00bapuerto : Indica el servidor LDAP (y, opcionalmente, el n\u00famero de puerto) contra el cual se van a ejecutar. Si el servidor LDAP estuviera funcionando en la misma m\u00e1quina donde se ejecuta el comando ldapadd (o cualquier otro de su familia: ldapsearch , ldapmodify , etc), normalmente este par\u00e1metro se podr\u00e1 omitir. Si el servidor LDAP funciona sobre TLS (es decir, es un servidor LDAP seguro), la URL a indicar deber\u00e1 ser -H ldaps://nomDnsServidor:n\u00bapuerto Nota NOTA: Si el comando cliente (cualquiera de los que estudiaremos: ldapadd , ldapsearch , ldapmodify , etc) se ejecuta en la misma m\u00e1quina donde est\u00e1 funcionando el servidor, en vez de conectar con \u00e9ste mediante TCP (que es lo que pasa cuando se usa la url del tipo ldap://...) autom\u00e1ticamente utiliza sockets internos que emplean el mecanismo IPC, que es un sistema de intercomunicaci\u00f3n entre procesos locales m\u00e1s \u00f3ptimo para estos casos. Aunque ya hemos dicho que no ser\u00eda necesario, si se quisiera especificar la url, en este caso entonces se deber\u00eda escribir as\u00ed: ldapi://%2fruta%2fcarpeta%2ffichero.socket (notar que el protocolo es \"ldapi\" y no \"ldap\" y que las \"/\" se sustituyen por \"%2f\"). Nota En el caso de contactar con un servidor LDAPS (es decir, funcionando sobre TLS), dicho servidor puede o bien ofrecer un certificado autofirmado o bien un certificado firmado por una determinada CA (Autoridad de Certificaci\u00f3n). En el primer caso, para que los clientes admitan ese servidor como seguro se ha establecer previamente la variable de entorno LDAPTLS_REQCERT al valor \"never\" (simplemente precediendo el comando en cuesti\u00f3n con la expresi\u00f3n LDAPTLS_REQCERT=never ya ser\u00eda suficiente). En el segundo caso, se ha de establecer previamente la variable de entorno LDAPTLS_CACERT indicando la ruta del certificado de la CA (simplemente precediendo el comando en cuesti\u00f3n con la expresi\u00f3n LDAPTLS_CACERT=/etc/dirsrv/slapd-miservidor/ca.crt , por ejemplo, ya ser\u00eda suficiente). Para que estas variables sean permanentes, se pueden indicar dentro del archivo /etc/openldap/ldap.conf -D cn=admin : Indica el \"common name\" de la cuenta de usuario (guardada en el propio servidor) con la que nos autenticaremos en el servidor LDAP para realizar la modificaci\u00f3n del directorio; esta cuenta ha de tener privilegio para ello, as\u00ed que usaremos la cuenta \"admin\" que creamos en la instalaci\u00f3n del servidor. -W : Solicita interactivamente la contrase\u00f1a de la cuenta anterior. Otra opci\u00f3n ser\u00eda indicar la contrase\u00f1a como un par\u00e1metro m\u00e1s, as\u00ed : -w contrase\u00f1a (notar que en este caso la \"w\" es min\u00fascula). -f fichero.ldif : Indica el fichero cuyo contenido se desea agregar Ejercicios Agregar Datos \u00b6 1.- a) Crea un fichero llamado base.ldif con el contenido mostrado a continuaci\u00f3n y seguidamente agr\u00e9galo al directorio con el comando: ldapadd -D cn=admin -W -f base.ldif . Con esto habr\u00e1s generado dos entradas de tipo \u201cunidad organizativas\u201d que servir\u00e1n para contener (a modo de \u201ccarpetas\u201d) los usuarios y grupos que generaremos a continuaci\u00f3n. dn: ou=usuarios,dc=midominio,dc=local objectClass: organizationalUnit ou: usuarios dn: ou=grupos,dc=midominio,dc=local objectClass: organizationalUnit ou: grupos 1.-b) Crea un fichero llamado grupos.ldif con el siguiente contenido y seguidamente agr\u00e9galo al directorio con un comando similar al del apartado anterior: dn: cn=grupoldap,ou=grupos,dc=midominio,dc=local objectClass: posixGroup cn: grupoldap gidNumber: 10000 1.-c) Crea un fichero llamado usuarios.ldif con el siguiente contenido y seguidamente agr\u00e9galo al directorio con un comando similar al del apartado anterior: dn: uid=usu1ldap,ou=usuarios,dc=midominio,dc=local objectClass: top objectClass: inetOrgPerson objectClass: posixAccount objectClass: shadowAccount uid: usu1ldap sn: Lopez givenName: Juan cn: Juan Lopez displayName: Juan Lopez uidNumber: 3001 gidNumber: 10000 userPassword: XXX gecos: Es muy tonto loginShell: /bin/bash homeDirectory: /home/jlopez shadowExpire: -1 shadowFlag: 0 shadowWarning: 7 shadowMin: 8 shadowMax: 999999 shadowLastChange: 10877 mail: juan.lopez@gmail.com postalCode: 29000 dn: uid=usu2ldap,ou=usuarios,dc=midominio,dc=local objectClass: top objectClass: inetOrgPerson objectClass: posixAccount objectClass: shadowAccount uid: usu2ldap sn: Perez givenName: Perico cn: Pedro Perez displayName: Pedro Perez uidNumber: 3002 gidNumber: 10001 userPassword: XXX gecos: Es un crack loginShell: /bin/bash homeDirectory: /home/pperez shadowExpire: -1 shadowFlag: 0 shadowWarning: 7 shadowMin: 8 shadowMax: 999999 shadowLastChange: 10877 mail: pedrito@yahoo.es postalCode: 29001 Nota Tal como se puede ver, cada objeto \u201cusuario\u201d est\u00e1 formado a partir de la uni\u00f3n de diferentes tipos predefinidos de objeto (posixAccount, shadowAccount, inetOgPerson), donde cada uno aporta un determinado conjunto de atributos: posixAccount incluye la informaci\u00f3n que encontrar\u00edamos en el archivo \"/etc/passwd\" cl\u00e1sico, shadowAccount incluye la informaci\u00f3n que encontrar\u00edamos en el archivo \"/etc/shadow\" cl\u00e1sico y inetOrgPerson incluye informaci\u00f3n extra del usuario dentro de la organizaci\u00f3n (como el correo, c\u00f3d. Postal...). Nota Hay que tener muy en cuenta que al a\u00f1adir nuevos usuarios los valores de los atributos uidNumber y homeDirectory (adem\u00e1s de userPassword) deben ser diferentes para cada usuario. Lo mismo ocurre con el atributo gidNumber para los grupos. Adem\u00e1s, los valores de uidNumber y gidNumber no deben coincidir con el uid y gid de ning\u00fanusuario y grupo local de los clientes. Nota El valor del atributo userPassword est\u00e1 protegido por ACLs predefinidas del servidor para que tan solo el usuario administrador - o el propietario del objeto que contenga dicho atributo- pueda consultar su valor (hasheado). Internamente, los valores de todos atributos se almacenan en el backend seleccionado pero en el caso del atributo userPassword este almacenamiento se realiza del hash de la contrase\u00f1a seg\u00fan el algoritmo predefinido que el servidor tenga configurado. As\u00ed pues, un intruso que tuviera acceso directo al backend no obtendr\u00eda (de entrada) las contrase\u00f1as porque las tendr\u00eda que \"crackear\". Este aspecto es independiente del hecho de que las conexiones entre cliente y servidor deber\u00edan siempre estar encriptadas mediante TLS para evitar el robo de la contrase\u00f1a en tr\u00e1nsito. No obstante, alguien podr\u00eda objetar que escribir la contrase\u00f1a de los usuarios tal cual en un archivo ldif es un gran riesgo deseguridad. En realidad, as\u00ed es como se recomienda que se escriba este valor para dejar al servidor LDAP realizar el hash de la forma que internamente requiera con las comprobaciones pertinentes. De todas formas, si se desea, es posible escribir el valor del atributo userPassword de forma que est\u00e9 \"hasheado\". Para ello primero hay que utilizar alguna utilidad que nos genere el hash necesario; en el caso de usar 389DS disponemos del comando pwdhash , el cual, mediante su par\u00e1metro -s permite especificar el algoritmo hash deseado. Por ejemplo, para obtener el hash SHA-512 salteado (el mismo algoritmo que se utiliza actualmente para guardar las contrase\u00f1as hasheadas en el archivo \"/etc/shadow\" de la mayor\u00eda de distribuciones Linux) de la contrase\u00f1a \"hola\" deber\u00edamos ejecutarpwdhash -s SSHA512 hola El valor obtenido deber\u00eda serasignado tal cual al campo userPassword; la parte entre llaves indica al servidor LDAP que dicho valor ser\u00e1 un hash de ese tipo y que, por tanto, no deber\u00e1 hashearlo \u00e9l sino almacenarlo directamente Buscar informaci\u00f3n - ldapsearch \u00b6 Para comprobar si el contenido anterior se ha a\u00f1adido correctamente, podemos usar el comando ldapsearch (tambi\u00e9n del paquete \u201cldap-utils\u201d), el cual permite hacer una b\u00fasqueda en el directorio. La mayor\u00eda de veces necesitaremos indicar, adem\u00e1s de los par\u00e1metros -H ldap://nomDnsServidor:nopuerto , -D cn=admin y -W/-w contrase\u00f1a ya conocidos, otros como los siguientes: -LLL : Indica a ldapsearch que muestre la respuesta en modo \"no verboso\" (m\u00e1s f\u00e1cil de leer) d 1 : d 1, d 2, ..... establece el nivel de debug y muestra errores detallados en el resultado del comando. -b \"dc=midominio,dc=local\" : Indica el DN \"base\" a partir del cual se empezar\u00e1 la b\u00fasqueda por las entradas inferiores del \u00e1rbol. El ejemplo anterior buscar\u00eda a partir de la entrada ra\u00edz \"para abajo\" por todas las subentradas. Pero no es necesario que la entrada ra\u00edz sea el DN \"base\": si, por ejemplo, escribi\u00e9ramos -b \"ou=grupos,dc=midominio,dc=local\" entonces solo se buscar\u00eda a partir de la organizationalUnit \"grupos\" \"para abajo\" por las subentradas que contuviera. Nota NOTA: En el servidor 389DS, l'entrada \"cn=config\" pot fer-se servir com a DN base per obtenir tota la configuraci\u00f3 del propi servidor -s {base | one | sub } : El comportamiento descrito en el p\u00e1rrafo anterior de buscar recursivamente todas las entradas por debajo de una entrada \"base\" dada (incluyendo \u00e9sta) es el comportamiento por defecto, que equivaldr\u00eda a indicar el par\u00e1metro -s sub Pero otros valores de este par\u00e1metro modifican el \"scope\" de la b\u00fasqueda; por ejemplo, -s base solamente muestra informaci\u00f3n de la entrada marcada como \"base\" y nada m\u00e1s (es decir, no recorre ninguna rama del \u00e1rbol) -s one solamente muestra informaci\u00f3n de las entradas directamente colgando de la entrada \"base\" pero nada m\u00e1s (es decir, s\u00f3lo muestra las entradas \"hijas\": ni muestra entradas \"nietas\" ni la propia entrada \"base\") \"(atributo=valor)\" \"(atributo=valor)\" ... : Filtro que permite \"quedarse\", de todas las entradas recorridas, solo con las que contienen el atributo indicado con el valor indicado. Existen otros filtros m\u00e1s sofisticados que se pueden estudiar en el cuadro inferior. Si aparece este par\u00e1metro, ha de ir escrito despu\u00e9s de cualquier otro par\u00e1metro de los anteriores. Si no aparece, todas las entradas recorridas ser\u00e1n \"v\u00e1lidas\" para mostrarse. Nota is a special value representing \u201cany possible value\u201d. It can be used to build a \"presence\" filter that requests all objects where the attribute is present and has a valid value, but we do not care what the value is. For instance, by default, ldapsearch provides the filter \"(objectClass=*)\"; because all objects must have an objectClass, this filter is the equivalent to saying \u201call valid objects\u201d. atributo atributo ... : De la informaci\u00f3n encontrada en las entradas recorridas (y ya filtradas, si fuera el caso), se muestra solo aquellos atributos indicados. Si aparece este par\u00e1metro, ha de ir escrito despu\u00e9s del filtro (si hubiera). Si no aparece -o se escribe \"*\"-, se mostrar\u00e1n todos los atributos pertenecientes a las entradas recorridas (y ya filtradas si fuera el caso); en el caso de escribir \"+\" se mostrar\u00e1n los metaatributos de la entradas recorridas (como la fecha de creaci\u00f3n de la entrada, el usuario que la cre\u00f3, etc). Nota To show what basedns are available, you can query the special \u2018\u2019 or blank rootDSE (Directory Server Entry) using \"namingContexts\" as the attribute to look up, like this: ldapsearch -D cn=admin -W -LLL -b \"\" -s base namingContexts 2.- Ejecuta el comando ldapsearch -D cn=admin -W -LLL -b \"dc=midominio,dc=local\" uid=usu1ldap sn givenName Con este comando de ejemplo estaremos buscando un usuario con uid=usu1ldap y pediremos que nos muestre solo el contenido de los atributos sn y givenName. Comprueba que efectivamente sea as\u00ed: Nota Es posible realizar consultas an\u00f3nimas (es decir, sin necesidad de autenticarse) pero para ello ser\u00eda necesario configurar el servidor 389DS convenientemente (ver para m\u00e1s informaci\u00f3n) y sustituir los par\u00e1metros -D y -W de ldapsearch por -x *A filter can request objects whose attribute values are greater/less than a value by \"(uid>=test0005)\" or \"(uid<=test0005)\".If used with letters, it compares alphabetically. A filter can request a partial match of an attribute value on the object by using the \u2018 \u2019 operator (multiple times if necessary): \"(uid= 005)\" or \"(uid=*st000 )\". Note you should always have at least 3 characters in your substring filter, else indexes may not operate efficently. *Filters can be nested with AND (&) or OR (|) conditions. Condition applies to all filters that follow within the same level of brackets, that is: (condition (attribute=value)(attribute=value)). AND requires that for an object to match, all filter elements must match; this is the \u201cintersection\u201d operation and is written like this: \"(&(uid=test0006)(uid=guest0006))\" OR filters will return the aggregate of all filters; this is the union operation so provided an object satisfies one condition of the OR, it will be part of the returned set; it's written like this: (|(uid=test0006)(uid=guest0007)) *A NOT filter acts to invert the result of the inner set. For example: \"(!(uid=test0010))\" Note you can\u2019t list multiple parameters in a \"not\" condition: to combine NOT's you need to use this in conjunctionwith AND and OR. Nota NOTA: *You can nest AND, OR and NOT filters to produce more complex directed queries. For instance this query: (&(objectClass=person)(objectClass=posixAccount)(|(uid=test000*))(!(uid=test0001))) would be equivalent to...: (& (objectClass=person) (objectClass=posixAccount) (| (uid=test000*) ) (!(uid=test0001)) ) ...and it expresses \"All person whose name starts with test000* and not test0001\". Another example would be this: (|(& (...K1...) (...K2...))(& (...K3...) (...K4...))) which means (K1 AND K2) OR (K3 AND K4) Borrar y modificar informaci\u00f3n ldapdelete y ldapmodify \u00b6 Otros comandos importantes del paquete \u201cldap-util\u201d son ldapdelete y ldapmodify. Un ejemplo del primero podr\u00eda ser: ldapdelete -D cn=admin -W \"uid=usu2ldap,ou=usuarios,dc=midominio,dc=local\" donde se ha indicado el DN del elemento que se desea eliminar. El segundo tiene tres formas de modificar una entrada: cambiando el valor de un atributo , a\u00f1adiendo un nuevo atributo o eliminando un atributo existente: -Para cambiar, por ejemplo, el atributo uidNumber de un usuario, podr\u00edamos ejecutar el comando ldapmodify -D cn=admin -W -f fichero.cambios donde fichero.cambios deber\u00eda tener un contenido como el siguiente (donde se especifica qu\u00e9 entradas se quieren modificar y de qu\u00e9 manera): dn:uid=usu2ldap,ou=usuarios,dc=midominio,dc=local changetype:modify replace:uidNumber uidNumber:3002 Nota NOTA: La informaci\u00f3n anterior la podr\u00edamos haber introducido directamente desde la entrada est\u00e1ndar si no hubi\u00e9ramos especificado el par\u00e1metro -f. -Para a\u00f1adir un atributo nuevo (en este caso llamado jpegPhoto) deber\u00edamos ejecutar el mismo comando ldapmodify anterior pero ahora fichero.cambios deber\u00eda tener un contenido como este: dn:uid=usu2ldap,ou=usuarios,dc=midominio,dc=local changetype: modify add:jpegPhoto jpegPhoto:file:///tmp/foto.png -Para eliminar un atributo (en este caso llamado jpegPhoto) deber\u00edamos ejecutar el mismo comando ldapmodify anterior pero ahora \"fichero.cambios\" deber\u00eda tener un contenido como este: dn:uid=usu2ldap,ou=usuarios,dc=midominio,dc=local changetype: modify delete:jpegPhoto Nota ya que la configuraci\u00f3n del servidor 389DS es troba accessible en forma directori, la comanda ldapmodify es podria utilitzar per modificar aquesta configuraci\u00f3 \"en calent\". Per exemple, sabent que les directives \"nsslapd-ldapilisten\" i \"nsslapd-ldapifilepath\" activen el mecanisme LDAPI i especifiquen la ruta del socket adient, respectivament, per activar aquesta caracter\u00edstica (que ja ve de s\u00e8rie activada, per\u00f2 \u00e9s nom\u00e9s un exemple), podr\u00edem fer com sempre: ldapmodify -D cn=admin -W -f fichero.cambios pero ara el contingut del fitxer \"fichero.cambios\" seria: dn: cn=config changetype: modify replace: nsslapd-ldapilisten nsslapd-ldapilisten: on - add: nsslapd-ldapifilepath nsslapd-ldapifilepath: /var/run/slapd-exemple.socket Nota NOTA: En realitat, per afegir entrades i per eliminar entrades no caldria fer servir les comandes ldapadd i ldapdelete respectivament, ja que amb ldapmodify ja n'hi hauria prou. En el cas de voler afegir una entrada el fitxer \"fichero.cambios\" hauria de tenir un contingut semblant al seg\u00fcent...: dn: <dn to add> changetype: add objectclass: ... attribute1: ... attribute2: ... ...i en el cas de voler eliminar una entrada, el seu contingut hauria de ser semblant a aquest: dn: <dn to delete> changetype: delete 3.-a) Modifica el atributo \u201cgecos\u201d del usuario Juan L\u00f3pez para que muestre la descripci\u00f3n: \u201cRonca\u201d. Comprueba mediante ldapsearch que el cambio lo has realizado correctamente b) A\u00f1ade el atributo \u201cjpegPhoto\u201d del usuario Juan L\u00f3pez indicando la ruta (ficticia) de su foto identificativa. Comprueba mediante ldapsearch que el cambio lo has realizado correctamente c) Elimina el atributo \u201cjpegPhoto\u201d anterior.Comprueba mediante ldapsearch que el cambio lo has realizado correctamente ACIs \u00b6 By default, the directory server denies access to everything. The administrator must allow certain types of access to certain resources for users to be able to use the directory server. The operational attribute aci is used for access control. This attribute can be applied to any entry in the directory tree, and has subtree scope: it applies to the entry that contains it and any children and descendants of that entry. An ACI consists of 3 parts: a target, a subject, and the type of access (permission): The target represents the entry or resource is being protected. The target specification should be a DN (written with the syntax \"ldap:///DN\"), but can be stretched by specifying one or more atributes to restrict its application, or even a LDAP filter. Writing a target it's optional: by default it applies to all entries in subtree scope of the entry which ACI is defined (that's is which contains the aciattribute). The subject represents the entity which is granted (or denied) access to the target. The subject may be userdn=\"ldap:///DN\" or groupdn=\"ldap:///DN\" (where DN can be any DN of a user or a group, respectively). It also can be some of these values: userdn=\"ldap:///self\" (to specify the user who has done the query), userdn=\"ldap:///anyone\" (to specify anonymous binds), or userdn=\"ldap:///all\" (to specify any authenticated user). Modifiers can be used to allow or deny access based on the client IP address or hostname, access time, or connection type (encrypted or not). You can also use attributes to specify a subject with userattr=\"attrname\" syntax. The permission is any combination of the following keywords: read Indicates whether directory data may be read. Indicates whether directory data may be changed or created. This permission also allows write directory data to be deleted but not the entry itself: to delete an entire entry, the user must have delete permissions. search Indicates whether the directory data can be searched. This differs from the read permission in that read allows directory data to be viewed if it is returned as part of a search operation. For example, if searching for common names is allowed as well as read permission for a person's room number, then the room number can be returned as part of the common namesearch, but the room number itself cannot be used as the subject of a search. Use this combination to prevent people from searching the directory to see who sits in a particular room. add Indicates whether child entries beneath the targeted entry can be created. delete Indicates whether targeted entry can be deleted. all Means all types of above accesses The permission is modified by using allow or deny If there are conflicts between what is allowed and what is denied, the deny wins. Better explained: when a user attempts any kind of access to a directory entry, Directory Server applies the precedence rule. This rule states that when two conflicting permissions exist, the permission that denies access always takes precedence over the permission that grants access. For example, if write permission is denied at the directory's root level, and that permission is applied to everyone accessing the directory, then no user can write to the directory regardless of any other permissions that may allow write access. To allow a specific user write permissions to the directory, the scope of the original deny-for-write has to be set so that it does not include that user. Then, there must be additional allow-for-write permission for the user in question. The aci attribute has the following syntax (version 3.0 and acl \"name\" values are mandatory and, as it can be seen, several targets can be specified as well as several allow(permission)(subject)... values): aci: (target=\"ldap:///DN)(target=...)(version 3.0; acl \"name\"; allow(per,miss,ion)(userdn=\"ldap:///subject\"); allow...;) Nota NOTA: Some interesting modifiers to add in a ACI to restrict targeted entries are \"targetattr\" and \"targetfilter\" keywords, (which must be specified after these targeted entries). Another interesting keyword is \"targetscope\" For instance, in the following example, the ACI states that \"bjensen\" has rights to modify all attributes in her own directory entry: aci: (target=\"ldap:///uid=bjensen,dc=example,dc=com\")(targetattr=\"*\")(targetscope=\"subtree\")(version 3.0; acl \"example\"; allow (write)(userdn=\"ldap:///self\");) Access control rules can be placed on any entry in the directory although administrators often place access control rules on entries with the object classes \"domainComponent\", \"organizationalUnit\", \"inetOrgPerson\", or \"group\". You can add/replace/delete an aci attribute like any other using LDIF files and ldapmodify command. For instance, this content would add the permission of anonymous searches/reads to all the directory's content: dn:dc=midominio,dc=local changetype: modify add:aci aci: (targetattr!=\"userPassword\")(version 3.0; acl \"xxx\"; allow(read,search)(userdn=\"ldap:///anyone\");) The aci attribute is a multi-valued operational attribute that can be read and modified by directory users. Therefore, the ACI attribute itself should be protected by ACIs. Administration users are usually given full access to the aci attribute doing ldapsearch -D cn=admin -W -b entryDN -s base \"(objectclass=*)\" aci Login LDAP desde cliente con SSSD \u00b6 Introducci\u00f3n \u00b6 En Linux se puede utilizar el demonio SSSD para autenticar al usuario contra servidores LDAP remotos (Combinados con servidores Kerberos o no) adem\u00e1s de identificarlos. Mediante SSSD todo el proceso de autenticaci\u00f3n / identificaci\u00f3n del usuario se produce en el cliente de una forma homog\u00e9nea y coherente, independientemente de la distribuci\u00f3n Linux all\u00ed instalada. Nota Adem\u00e1s de autenticarse contra servidores LDAP \"pelados\" o combinados con Kerberos, el demonio SSSD tambi\u00e9n permite autenticar usuarios contra sistemas integrales empresariales como FreeIPA o Active Directory (los cuales internamente se basan en LDAP / Kerberos). En cambio, no puede trabajar (todav\u00eda) con SGBDs o servidores RADIUS como fuente de autenticaci\u00f3n / identificaci\u00f3n Una gran ventaja de utilizar SSSD en vez de los m\u00f3dulos PAM / NSS \"standalone\" individualmente es que este demonio guarda una cach\u00e9 (en la carpeta /var/lib/sss/db ) que permite el acceso \"Offline\" a / los sistema/s cliente/s (sin tener ninguna cuenta local diferente) en el caso de que el servidor LDAP / Kerberos remoto no est\u00e9 disponible en ese momento o, en caso de que s\u00ed, disminuir su carga. Nota NOTA: El demonio SSSD tambi\u00e9n ofrece una interfaz D-Bus para poder interactuar con el sistema mediante este m\u00e9todo y as\u00ed obtener, por ejemplo, informaci\u00f3n extra sobre el usuario (tal como veremos). El demonio SSSD proporciona sus propios m\u00f3dulos PAM y NSS para conectar con servidores LDAP / Kerberos y LDAP, respectivamente, los cuales son diferentes de los m\u00f3dulos \"standalone\" pam_ldap / pam_krb5 y nss_ldap ya conocidos. Esto es porque SSSD ofrece funcionalidades extra como un framework conjunto y librer\u00edas homog\u00e9neas, un mecanismo de cach\u00e9 de credenciales -similar al que ofrec\u00eda el demonio ncsd, ya obsoleto-, una interfaz D-Bus, etc. Para que los programas de inicio de sesi\u00f3n (login, gdm, su, sudo, ssh, etc) utilicen los m\u00f3dulos PAM / NSS propios de SSSD deberemos realizar un conjunto de configuraciones al sistema que explicaremos a continuaci\u00f3n. Nota NOTA: En Ubuntu hay que instalar el paquete \"sssd\" (es decir, el demonio SSSD no viene preinstal.lat \"de f\u00e1brica\"). Afortunadamente, al instalar este paquete ya se instalar\u00e1n autom\u00e1ticamente como dependencia el resto de paquetes que podamos necesitar, como los conectores con los diferentes providers: \"sssd-ldap\", \"sssd-krb5\", \"sssd-ipa\", etc. En Fedora todos estos paquetes ya vienen instalados \"de f\u00e1brica\". Configuraci\u00f3n de SSSD: \u00b6 SSSD lee los archivos de configuraci\u00f3n en este orden: primero lee el archivo primario /etc/sssd/sssd.conf y luego, otros archivos * .conf en /etc/sssd/conf.d (en orden alfab\u00e9tico). Si aparece el mismo par\u00e1metro en m\u00faltiples archivos de configuraci\u00f3n, SSSD usa el \u00faltimo par\u00e1metro de lectura. Esto le permite usar el valor predeterminado /etc/sssd/sssd.conf en todos los clientes y aagregar configuraciones adicionales en otros archivos de configuraci\u00f3n para extender la funcionalidad individualmente por cliente. Atenci\u00f3n Todos estos archivos deben ser propiedad de root:root y tener permisos 600 de lo contrario el servicio sssd no se iniciar\u00e1. Los proveedores de autenticaci\u00f3n e identidad se configuran como \"dominios\" en el archivo de configuraci\u00f3n SSSD. Puede configurar varios dominios para SSSD pero al menos un dominio debe estar configurado, de lo contrario, SSSD no arrancar\u00e1. Un solo dominio se puede usar como: Un proveedor de autenticaci\u00f3n (para solicitudes de autenticaci\u00f3n) Un proveedor de identidad (para informaci\u00f3n del usuario) Un proveedor de control de acceso (para solicitudes de autorizaci\u00f3n). No los estudiaremos aqu\u00ed. Una combinaci\u00f3n de estos proveedores (si todas las operaciones correspondientes se realizan dentro de un solo servidor) Nota Tambi\u00e9n hay lo que se llama un proveedor \"proxy\". Este proveedor funciona como un intermediario de retransmisi\u00f3n entre SSSD y recursos que SSSD de otra forma no podr\u00edan usar. Cuando se usa un proveedor proxy, SSSD se conecta al servicio proxy, y el proxy carga las bibliotecas especificadas. Con un proveedor de proxy, puede configurar SSSD para utilizar m\u00e9todos de autenticaci\u00f3n alternativos, como un esc\u00e1ner de huellas digitales, entre otras cosas. Secci\u00f3n [sssd] \u00b6 En el archivo \"sssd.conf\" debe haber al menos una secci\u00f3n general [sssd] y una secci\u00f3n para cada dominio. Debajo de la secci\u00f3n [sssd] debemos tener en cuenta esta l\u00ednea (m\u00e1s informaci\u00f3n en man sssd.conf): domains = Especifica una lista separada por comas de dominios definidos en el orden que desee para ser consultado Por lo tanto, si un dominio no aparece en esta lista, no se consultar\u00e1 aunque est\u00e9 definido en el archivo \"sssd.conf\" Secci\u00f3n [domain/xxx] \u00b6 Las secciones correspondientes a dominios definidos deben titularse as\u00ed [domain/xxx] donde \"xxx\" puede ser cualquier cosa. Debajo de una secci\u00f3n de dominio debemos tener en cuenta estas l\u00edneas (m\u00e1s en man sssd.conf): Line \"auth_provider = \": establece el proveedor de autenticaci\u00f3n utilizado para el dominio. Los valores posibles son: - \"ldap\", \"krb5\", \"ipa\", \"ad\" o \"proxy\", entre otros. Dependiendo del proveedor elegido, habr\u00e1 sea \u200b\u200bnecesario escribir l\u00edneas m\u00e1s espec\u00edficas (ver man sssd-ldap, man sssd-krb5, man sssd-ipa u man sssd-ad para m\u00e1s detalles). -Line \"id_provider =\" : establece el proveedor de identidad utilizado para el dominio. Los valores posibles son: \"ldap\", \"archivos\", \"ipa\", \"anuncio\" o \"proxy\". Dependiendo del proveedor elegido, habr\u00e1 que escribir l\u00edneas m\u00e1s espec\u00edficas (vea man sssd-ldap, man sssd-files, man sssd-ipa o man sssd-ad para m\u00e1s detalles). -Line \"access_provider =\" : establece el proveedor de acceso utilizado para el dominio, que se utiliza para evaluar qu\u00e9 usuarios tienen acceso al sistema. Incluso si un usuario se autentica con \u00e9xito, si no Si cumple con los criterios proporcionados por el proveedor de acceso, su acceso ser\u00e1 denegado. Los valores posibles son: \"ldap\", \"krb5\", \"simple\", \"ipa\", \"ad\", \"proxy\", \"denegar\" (siempre niega el acceso) o \"permitir\" (por defecto,siempre permite el acceso). Dependiendo del proveedor elegido, habr\u00e1 que escribir m\u00e1s. l\u00edneas espec\u00edficas (vea man sssd-ldap, man sssd-krb5, man sssd-simple, man sssd-ipa o man sssd-ad para detalles). Nota NOTA: El proveedor de acceso \"simple\" permite o niega el acceso basado en una lista de nombres de usuario o grupos. Permite restringir el acceso a m\u00e1quinas espec\u00edficas. Por ejemplo, en las computadoras port\u00e1tiles de la compa\u00f1\u00eda, puede usar el proveedor de acceso simple para restringir el acceso solo a un usuario espec\u00edfico o un grupo espec\u00edfico. Otros usuarios o grupos no podr\u00e1n iniciar sesi\u00f3n incluso si se autentican correctamente en el proveedor de autenticaci\u00f3n configurado. [domain/nombre_dominio] ... access_provider = simple simple_allow_users = usuario1, usuario2 #simple_allow_groups = group1 Si el proveedor de acceso que est\u00e1 utilizando es el \"ldap\", tambi\u00e9n puede especificar un filtro de control de acceso LDAP que el usuario debe coincidir para poder acceder al sistema. [domain/domain_name] ... access_provider = ldap ldap_access_filter = (memberOf=cn=allowedusers,ou=Groups,dc=example,dc=com) #ldap_access_order = filter, host, authorized_service Nota NOTA: La directiva ldap_access_order puede tener estos valores (se pueden indicar por orden de aplicaci\u00f3n): *\"filter\" : Se usa el filtro indicado en ldap_access_filter como criterio. Valor per defecto *\"host\" : Se usa el atributo \"host\" en el directorio como criterio *\"authorized_service\" : Se usa el valor de \"authorizedService\" en el directorio como criterio *\"expire\" : Se usa el valor de la directiva ldap_account_expire_policy como criterio -Line \"chpass_provider = \": establece el proveedor que debe manejar las operaciones de cambio de contrase\u00f1a para el dominio. Los valores posibles son: \"ldap\", \"krb5\", \"ipa\", \"ad\", \"proxy\" o \"none\" (esto expl\u00edcitamente deshabilita la capacidad de cambiar las contrase\u00f1as). Si no se especifica esta l\u00ednea, entonces se usa por defecto el valor especificado en la l\u00ednea \"id_provider\". Ver man sssd-sudo para detalles Nota Nota SSSD no almacena en cach\u00e9 las credenciales de usuario de forma predeterminada. Entonces, al procesar solicitudes de autenticaci\u00f3n,de manera predeterminada, SSSD siempre contacta al proveedor de identidad; si el proveedor no est\u00e1 disponible, la autenticaci\u00f3n de usuario falla Para garantizar que las credenciales se almacenen localmente despu\u00e9s de autenticar con \u00e9xito a los usuarios para que puedan mantener autenticaci\u00f3n incluso cuando el proveedor de identidad no est\u00e1 disponible, debe habilitar el almacenamiento en cach\u00e9 de credenciales local agregando la l\u00ednea cache_credentials = true debajo de la secci\u00f3n de dominio correspondiente. Por defecto, la credencial la memoria cach\u00e9 nunca caduca: si desea que sssd elimine las credenciales almacenadas en cach\u00e9, account_cache_expiration = line hacer que caduquen despu\u00e9s del n\u00famero de d\u00edas especificado. Nota Cuando un usuario intenta una operaci\u00f3n de sudo, ya sabemos que SSSD contacta al proveedor de identidad / sudo definido en el dominio para obtener la informaci\u00f3n requerida sobre la configuraci\u00f3n actual de sudo. Si la l\u00ednea cache_credentials se establece en true,tambi\u00e9n almacenar\u00e1 esa informaci\u00f3n de sudo en una memoria cach\u00e9, para que los usuarios puedan realizar operaciones de sudo incluso cuando LDAP / IPA / AD El servidor est\u00e1 fuera de l\u00ednea. Secciones opcionales [pam] y / o [nss] \u00b6 Las secciones opcionales [pam] y / o [nss] tambi\u00e9n pueden aparecer en el archivo \"sssd.conf\". Podr\u00edan ser utilizadas para configurar algunos aspectos del comportamiento de los m\u00f3dulos PAM o NSS de SSSD, respectivamente. Por ejemplo, si se quiere configurar un l\u00edmite de tiempo (en d\u00edas) para cu\u00e1nto tiempo SSSD permite la autenticaci\u00f3n sin conexi\u00f3n si el proveedor de identificaci\u00f3n no est\u00e1 disponible, puede usar la l\u00ednea offline_credentials_expiration = debajo de la secci\u00f3n [pam] para especificar ese l\u00edmite de tiempo. Otras l\u00edneas interesantes para especificar debajo de la secci\u00f3n [pam] son offline_failed_login_attempts = , offline_failed_login_delay = o reconnection_retries , entre otros. Igualmente, debajo de la secci\u00f3n [nss] algunas l\u00edneas interesantes que merecen atenci\u00f3n son filter_groups = y filter_users = (que excluye a ciertos usuarios, por defecto, solo \"root\") de ser extra\u00eddos del backend NSS Esto es particularmente \u00fatil para las cuentas del sistema .; esta opci\u00f3n tambi\u00e9n se puede establecer por dominio o incluir nombres totalmente calificados para filtrar solo usuarios del dominio en particular), entry_cache_timeout = (que especifica cu\u00e1ntos segundos, por defecto 5400- debe considerar sssd entradas v\u00e1lidas antes de preguntar al NSS backend otra vez), \"entry_cache_nowait_percentage =\", \"override_homedir =\", \"override_shell =\", \"allowed_shells =\", etc. Ejemplo 1 (un servidor LDAP como proveedor de autenticaci\u00f3n e identidad) \u00b6 Un fichero \"sssd.conf\" podr\u00eda ser algo as\u00ed: [sssd] domains=pepito [domain/pepito] auth_provider=ldap id_provider=ldap ldap_uri=ldaps://ldapserver.example.com ldap_search_base=dc=example,dc=com Nota SSSD always uses an encrypted channel for authentication, which ensures that passwords are never sent over the network unencrypted but forces the LDAP server to run over TLS. If this LDAP server used a self-signed certificate, you must add the line ldap_tls_reqcert=allow in the sssd.conf file so that client doesn't reject it. If this LDAP used a ca-signed certificate instead, you should add the line ldap_tls_cacert = /etc/pki/tls/certs/ca-bundle.crt instead (pointing to the right CA's bundle file in each case). Anyway, if you wanted identity lookups (such as commands based on the id or getent utilities) were also encrypted (or if LDAP server only runs over TLS), you should add the \" ldap_id_use_start_tls =true line. Nota If LDAP server's configuration requires that queries to LDAP directory have to be authenticated, you should add the ldap_default_bind_dn= cn=admin and ldap_default_authtok= 12345 lines to specify which user (\"cn=admin\" in this example) and password (\"12345\" in this example) should be used to do these queries, respectively. Example 2 (a KDC server as authentication provider and a LDAP server as identity provider) \u00b6 A suitable sssd.conf file could be like this: [sssd] domains=pepito [domain/pepito] auth_provider=krb5 krb5_server=kdc.example.com krb5_realm=EXAMPLE.COM id_provider=ldap ldap_uri= ... ldap_search_base= ... Nota NOTA: If the Change Password service is not running on the KDC specified in \"krb5_server\" or \"krb5_backup_server\" lines, you can use the \"krb5_passwd\" line to specify the server where the service is running or a chpass_provider instead.","title":"Administraci\u00f3n b\u00e1sica 389DS"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#servidor-ldap-389ds","text":"","title":"Servidor LDAP 389DS"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#configuracion-previa","text":"Los pasos a seguir para configurar un servidor 389DS que contenga la informaci\u00f3n necesaria para autenticar/identificar usuarios (y los pasos a seguir para configurar un cliente LDAP para que esos usuarios accedan a ella) se detallan a continuaci\u00f3n. Deber\u00e1s utilizar dos m\u00e1quinas virtuales Fedora: una de ellas har\u00e1 de servidor LDAP y la otra har\u00e1 de cliente. Aseg\u00farate que ambas tengan, adem\u00e1s de una tarjeta en modo NAT para poder conectarse a Internet, una tarjeta en modo red interna con una IP fija (en este documento supondremos que tienen la 192.168.0.1 y 192.168.0.2, respectivamente) y de que la m\u00e1quina que haga de cliente tenga instalado un entorno gr\u00e1fico con navegador y gestor de ficheros (bastar\u00e1 hacer sudo dnf install gdm firefox nautilus para ello).","title":"Configuraci\u00f3n previa"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#servidor","text":"A. Antes de instalar nada, a la m\u00e1quina que har\u00e1 de servidor LDAP dale un nombre que tenga una estructura similar a un nombre DNS (por ejemplo, en este documento usaremos el de miservidor.midominio.local ). De hecho, la infrastructura b\u00e1sica de una red con servidor LDAP integrado se deber\u00eda completar con un servidor DNS m\u00e1s pronto que tarde (para, entre otras cosas, no tener que configurar el archivo /etc/hosts de los clientes individualmente -como tendremos que hacer m\u00e1s adelante-), pero para no complicar m\u00e1s las cosas, realiza estos tres simples pasos y ya est\u00e1: -Ejecuta el comando sudo hostnamectl set-hostname miservidor.midominio.local . Esto har\u00e1 que el fichero /etc/hostname contenga el nuevo nombre \u201ctipo DNS\u201d de nuestro servidor (lo puedes comprobar tambi\u00e9n con el comando hostnamectl status ). Modifica manualmente el archivo /etc/hosts para que las IP 127.0.0.1 (v4) y ::1 (v6) all\u00e1 indicadas est\u00e9n asociadas a \u201cmiservidor.midominio.local\u201d en vez de a \u201clocalhost\u201d. Una vez hecho estos dos pasos, reinicia la m\u00e1quina. Nota Que el nombre del servidor sea de tipo DNS es necesario para que las entradas \u201cdc\u201d de nuestro servidor LDAP se correspondan con los subdominios de dicho nombre. Es decir, al generar la base de datos de nuestras entradas en forma de \u00e1rbol invertido, todas ellas deber\u00e1n colgar de un DN base que en nuestro caso ser\u00e1 \u201cdc=midominio,dc=local\u201d .","title":"Servidor"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#instalacion","text":"Instala el software correspondiente a un servidor LDAP b\u00e1sico: sudo dnf install 389-ds-base Nota Otros paquetes interesantes s\u00f3n \"389-admin\" (el cual representa un \"servidor de administraci\u00f3n\", \u00fatil para gestionar determinadas tareas relacionadas con el funcionamiento del servidor LDAP -como pararlo, reiniciarlo, hacer copias de seguridad, etc-) y/o \"389-console\" (el cual incluye a su vez los paquetes \"389-ds-console\" y \"389-admin-console\" y sirve para, respectivamente, ofrecer una interfaz gr\u00e1fica (basada en Java) para trabajar contra el directorio alojado en el servidor LDAP como un cliente LDAP est\u00e1ndar -es decir, para gestionar la informaci\u00f3n guardada:a\u00f1adiendo/eliminando/modificando nodos, etc- o bien para trabajar contra el servidor de administraci\u00f3n anteriormente mencionado orden\u00e1ndole las tareas administrativas de forma gr\u00e1fica). Tambi\u00e9n existe el paquete \"389-ds\" (el cual incluye todos los paquetes anteriores).","title":"Instalaci\u00f3n"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#configuracion-inicial","text":"Configura el servidor LDAP propiamente dicho para poderlo empezar a usar. Para ello primero crea un fichero INF (llam\u00e9moslo \"fichero.inf\"), el cual tendr\u00e1 un contenido ya predeterminado, mediante el comando dscreate create-template /ruta/fichero.inf . Este fichero INF representa un \"molde\" que podremos editar a conveniencia con cualquier editor de texto para asignar los valores deseados a las distintas directivas all\u00ed presentes. Estas directivas est\u00e1n perfectamente documentadas dentro del propio fichero y son bastante obvias; de todas maneras, como todas ellas ya tienen un valor por defecto asignado, nosotros tan solo necesitaremos editar unas pocas. En concreto, deberemos tener las siguientes directivas escritas como sigue: Nota Hay que tener en cuenta que si se desea cambiar el valor por defecto de una directiva, adem\u00e1s de modificar el valor en s\u00ed, para activar el cambio efectivamente se tendr\u00e1 de borrar el punto y coma que hay al inicio de la directiva en cuesti\u00f3n. Directiva instance_name=miservidor : Para indicar que la instancia del servidor 389 a crear se llamar\u00e1 \"miservidor\" (aunque podr\u00eda tener cualquier otro nombre). En un mismo ordenador podemos tener diferentes instancias del servidor 389DS, cada una independiente de la otra, gestionando cada una su/s propio/s directorio/s estancos y administr\u00e1ndose de forma individual. Cada instancia tendr\u00e1 que definirse en un fichero INF diferente Directiva root_dn = cn=admin : Indica que el \"common name\" del usuario administrador del directorio manejado por la instancia en cuesti\u00f3n ser\u00e1 \"cn=admin\".Por defecto este usuario es el \u00fanico que puede hacer tanto modificaciones como consultas en los directorios de servidores 389DS. Directiva root_password = 12345678 : Indica que la contrase\u00f1a del usuario administrador anterior ser\u00e1 \"12345678\". Si no se quisiera escribir la contrase\u00f1a en texto plano directamente en el fichero INF, existe la posibilidad de generar previamente un hash adecuado mediante el comando pwdhash contrase\u00f1a. M\u00ednimo 8 caracteres y entonces asignar el valor mostrado por pantalla tal cual a esta directiva Directiva create_suffix_entry = true : Indica que se desea crear una entrada ra\u00edz en el directorio Directiva suffix = dc=midominio,dc=local : Indica que el nombre de la entrada ra\u00edz del directorio a crear ser\u00e1 \"dc=midominio,dc=local\" Nota NOTA: El fichero INF contiene, tal como hemos dicho, muchas otras directivas que no ser\u00e1 necesario editar si no lo deseamos porque ya deber\u00edan tener asignado el valor adecuado , como por ejemplo full_machine_name (cuyo valor deber\u00eda ser el nombre completo de la m\u00e1quina establecido en el primer apartado, es decir, en nuestro caso: \"miservidor.midominio.local\"), port (cuyo valor por defecto es 389; si se indica el valor 0 se estar\u00eda cerrando el puerto, esto es, deshabilitando la posibilidad de atender conexiones no encriptadas), secure_port (cuyo valor por defecto es 636; si se indica el valor 0 se estar\u00eda cerrando el puerto, esto es, deshabilitando la posibilidad de atender conexiones encriptadas via TLS) o self_sign_cert (cuyo valor por defecto, True, activa el uso de TLS para asegurar las comunicaciones por red con los clientes, y lo hace mediante certificados autofirmados), entre otras. Adem\u00e1s, son interesantes reconocer diversas directivas que apuntan a rutas de carpetas relevantes, como \"backup_dir\", \"cert_dir\", \"config_dir\" o \"db_dir\" (esta \u00faltima es la que aloja los ficheros que contienen f\u00edsicamente los datos del directorio) Nota NOTA: Las l\u00edneas create_suffix_entry y suffix del fichero INF se encuentran bajo una secci\u00f3n titulada [backend-userroot] Los \"backend\" son los tipos de bases de datos que el servidor 389DS soporta para almacenar de forma permanente la informaci\u00f3n contenida en los directorios que gestiona; en este caso, la secci\u00f3n indica que se crear\u00e1 un backend llamado \"userroot\". Puede haber muchos tipos de backends, por lo que en 389DS se utiliza un mecanismo de plugins para solamente utilizar el/los plugin/s necesario/s para gestionar el/los backend/s correspondiente/s. El tipo de backend empleado por defecto por 389DS es la base de datos de tipo LDBM, que es una variante de las de tipo BerkeleyDB (las cuales todas ellas son implementadas f\u00edsicamente en forma de ficheros en disco). En el archivo \"dse.ldif\" (ver siguiente apartado) se encuentra la informaci\u00f3n sobre la configuraci\u00f3n del backend asociado a un directorio (bajo la secci\u00f3n dn:dc=midominio,dc=local, cn=mapping tree, cn=config ) y sobre la propia configuraci\u00f3n de ese backend elegido, bajo la secci\u00f3n dc: cn=ldbm database,cn=plugins,cn=config y dc: cn=config,cn=ldbm database,cn=plugins,cn=config Para m\u00e1s informaci\u00f3n consultar https://www.port389.org/docs/389ds/design/architecture.html y tambi\u00e9n el cuadro siguiente: A continuaci\u00f3n utiliza el fichero INF generado en el paso anterior como entrada en el siguiente comando : sudo dscreate from-file /ruta/fichero.inf Este comando establece realmente la configuraci\u00f3n de la instancia \"miservidor\" en un formato que el servidor LDAP entender\u00e1 (concretamente, genera el archivo de configuraci\u00f3n /etc/dirsrv/slapd-miservidor/dse.ldif , el cual contiene todas las directivas indicadas en el fichero INF anterior -con alguna variaci\u00f3n en su nombre- adem\u00e1s de muchas otras m\u00e1s; todas las directivas presentes en este fichero dse.ldif tienen la particularidad de estar escritas en un formato de texto llamado LDIF, el cual estudiaremos m\u00e1s adelante pero b\u00e1sicamente lo que hay que saber ahora es que esto significa que este fichero puede ser modificado igualmente mediante cualquier editor de texto est\u00e1ndar). Nota Una manera de editar el fichero \"dse.ldif\" es, en vez de utilitzar un editor de texto gen\u00e9rico, utilizar el comando espec\u00edfico de 389DS llamado dsconf; concretamente, para cambiar la contrase\u00f1a del usuario \"admin\" usando esta herramienta se podr\u00eda hacer (de forma interactiva y, eso s\u00ed, conociendo la contrase\u00f1a previa) as\u00ed: dsconf -D \"cn=admin\" miservidor directory_manager password_change . Otra manera ser\u00eda, ya que el fichero \"dse.ldif\" no deja de ser un fichero LDIF est\u00e1ndar, utilizar los comandos est\u00e1ndar de edici\u00f3n de ficheros LDIF como es principalmente el comando ldapmodify, que veremos pronto ( https://directory.fedoraproject.org/docs/389ds/howto/howto-resetdirmgrpassword.html#use-ldapmodify ) Nota Otra manera alternativa de configurar el servidor LDAP es usando el comando sudo dscreate interactive , el cual muestra un asistente en modo texto que ofrece una serie de preguntas interactivas esenciales (como el nombre de la instancia a crear, el puerto de escucha, si queremos activar TLS, etc) y, a partir de la respuesta dada en ellas, genera autom\u00e1ticamente el fichero \"dse.ldif\" adecuado. No obstante, deberemos acabar editando el archivo \"dse.ldif\" a mano para poder adaptarlo m\u00e1s espec\u00edficamente a nuestras circunstancias (el asistente no pregunta todas las preguntas que necesitar\u00edamos contestar), as\u00ed que realmente no es de mucha ayuda. Nota NOTA: Es posible crear otro backend (en principio del mismo tipo LDBM) separado del backend por defecto \"userroot\" para almacenar otro directorio diferente en la misma instancia. Eso se puede hacer as\u00ed: sudo dsconf -D \"cn=admin\" -W miservidor backend create \u2013suffix dc=otrodominio,dc=local --be-name nombreBackend Los cambios se ver\u00e1n reflejados, efectivamente, en el archivo \"dse.ldif\" d) Comprobar que, efectivamente, la instancia reci\u00e9n configurada haya sido arrancada correctamente mediante el comando sudo systemctl status dirsrv@miservidor (detr\u00e1s de la arroba ha de ir el nombre de la instancia indicado en el asistente anterior...si no lo hemos modificado, por defecto este nombre se corresponder\u00e1 con el nombre corto de la m\u00e1quina). A partir de aqu\u00ed, la instancia se podr\u00e1 gestionar como cualquier otro demonio del sistema con systemctl start, systemctl stop, systemctl enable, systemctl disable,... Nota NOTA: Tambi\u00e9n se puede utilizar el comando sudo dsctl miservidor status para comprobar el estado de funcionamiento de la instancia indicada. El comando dsctl se puede emplear como sustituto de systemctl ya que tiene opciones para iniciar, parar, reiniciar, etc la instancia en cuesti\u00f3n. Una opci\u00f3n muy interesante (y peligrosa!) es la de eliminar completamente la instancia (y su/s directorio/s correspondiente/s), la cual es sudo dsctl miservidor remove --do-it Nota NOTA: At installation, Directory Server contains the following: a server front-end responsible for network communications, plug-ins for server functions, such as access control and replication, a basic directory tree containing server-related data (defined in \"dse.ldif\" file) and a database back-end plug-in responsible for managing the actual storage and retrieval of server data.","title":"Configuraci\u00f3n inicial"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#abrir-puertos-en-el-firewall","text":":::bash systemctl status firewalld systemctl enable firewalld systemctl start firewalld firewall-cmd --permanent --add-port={389/tcp,636/tcp} firewall-cmd --reload","title":"Abrir puertos en el Firewall"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#administracion-basica-del-directorio","text":"Ya tenemos el servidor LDAP funcionando y escuchando en el puerto 389 TCP. Ahora deber\u00edamos generar la estructura de entradas de nuestro directorio y rellenarlas de datos. Tip Comprueba desde el servidor, con el comando ss -tln , como aparece el socket escuchando en ese puerto","title":"Administraci\u00f3n b\u00e1sica del directorio:"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#agregar-informacion-procedimiento-generico","text":"La forma m\u00e1s b\u00e1sica de a\u00f1adir informaci\u00f3n a un directorio cualquiera es utilizar ficheros de texto cuyo contenido est\u00e1 escrito en el formato LDIF (LDAP Data Interchange Format). El formato b\u00e1sico de una entrada es...: :::text # comentario dn: <nombre global \u00fanico> <atributo>: <valor> <atributo>: <valor> ... ...donde los atributos indicados deben pertenecer a alg\u00fan objeto perteneciente a alg\u00fan \"schema\" previamente reconocido por el servidor para que sean interpretados correctamente (por suerte, todos los objetos que utilizaremos en este documento est\u00e1n definidos en \"schemas\" que ya vienen incluidos de serie en cualquier software de tipo servidor LDAP actual). Nota En el caso de utilizar, por ejemplo, el servidor 389DS, los objetos que emplearemos a lo largo de este documento est\u00e1n definidos en el fichero /usr/share/dirsrv/schema/00core.ldif (el de tipo \"organizationalUnit\") y /usr/share/dirsrv/schema/10rfc2307.ldif (los de tipo \"posixGroup\", \"posixAccount\" y \"shadowAccount\"), etc Un objeto que tambi\u00e9n podr\u00edamos haber utilizado (pero no lo hemos hecho) es el objeto \"hostObject\" (definido en /usr/share/dirsrv/schema/60nss-ldap.ldif ), cuyo atributo m\u00e1s importante es \"host\" (el valor del cual puede ser una IP o un nombre DNS) y que permitir\u00eda alojar en el directorio informaci\u00f3n sobre las m\u00e1quinas que formar\u00edan un dominio (y, eventualmente, aplicarles reglas de acceso, etc) Entre dos entradas consecutivas escritas en un archivo LDIF debe existir siempre una l\u00ednea en blanco. Por otro lado, si una l\u00ednea es demasiado larga, podemos repartir su contenido entre varias, siempre que las l\u00edneas de continuaci\u00f3n comiencen con un car\u00e1cter de tabulaci\u00f3n o un espacio en blanco. Una vez creados estos ficheros, para a\u00f1adirlos al directorio (incluso con el servidor en marcha) podemos utilizar el comando ldapadd (disponible al instalar el paquete llamado \u201cldap-utils\u201d -en Ubuntu-, o\"openldap-clients\" -en Fedora- aunque en el caso de haber instalado el paquete \"389-ds-base\" ya se habr\u00e1 instalado autom\u00e1ticamente como dependencia). La mayor\u00eda de veces necesitaremos indicar los siguientes par\u00e1metros: -H ldap://nomDnsServidor:n\u00bapuerto : Indica el servidor LDAP (y, opcionalmente, el n\u00famero de puerto) contra el cual se van a ejecutar. Si el servidor LDAP estuviera funcionando en la misma m\u00e1quina donde se ejecuta el comando ldapadd (o cualquier otro de su familia: ldapsearch , ldapmodify , etc), normalmente este par\u00e1metro se podr\u00e1 omitir. Si el servidor LDAP funciona sobre TLS (es decir, es un servidor LDAP seguro), la URL a indicar deber\u00e1 ser -H ldaps://nomDnsServidor:n\u00bapuerto Nota NOTA: Si el comando cliente (cualquiera de los que estudiaremos: ldapadd , ldapsearch , ldapmodify , etc) se ejecuta en la misma m\u00e1quina donde est\u00e1 funcionando el servidor, en vez de conectar con \u00e9ste mediante TCP (que es lo que pasa cuando se usa la url del tipo ldap://...) autom\u00e1ticamente utiliza sockets internos que emplean el mecanismo IPC, que es un sistema de intercomunicaci\u00f3n entre procesos locales m\u00e1s \u00f3ptimo para estos casos. Aunque ya hemos dicho que no ser\u00eda necesario, si se quisiera especificar la url, en este caso entonces se deber\u00eda escribir as\u00ed: ldapi://%2fruta%2fcarpeta%2ffichero.socket (notar que el protocolo es \"ldapi\" y no \"ldap\" y que las \"/\" se sustituyen por \"%2f\"). Nota En el caso de contactar con un servidor LDAPS (es decir, funcionando sobre TLS), dicho servidor puede o bien ofrecer un certificado autofirmado o bien un certificado firmado por una determinada CA (Autoridad de Certificaci\u00f3n). En el primer caso, para que los clientes admitan ese servidor como seguro se ha establecer previamente la variable de entorno LDAPTLS_REQCERT al valor \"never\" (simplemente precediendo el comando en cuesti\u00f3n con la expresi\u00f3n LDAPTLS_REQCERT=never ya ser\u00eda suficiente). En el segundo caso, se ha de establecer previamente la variable de entorno LDAPTLS_CACERT indicando la ruta del certificado de la CA (simplemente precediendo el comando en cuesti\u00f3n con la expresi\u00f3n LDAPTLS_CACERT=/etc/dirsrv/slapd-miservidor/ca.crt , por ejemplo, ya ser\u00eda suficiente). Para que estas variables sean permanentes, se pueden indicar dentro del archivo /etc/openldap/ldap.conf -D cn=admin : Indica el \"common name\" de la cuenta de usuario (guardada en el propio servidor) con la que nos autenticaremos en el servidor LDAP para realizar la modificaci\u00f3n del directorio; esta cuenta ha de tener privilegio para ello, as\u00ed que usaremos la cuenta \"admin\" que creamos en la instalaci\u00f3n del servidor. -W : Solicita interactivamente la contrase\u00f1a de la cuenta anterior. Otra opci\u00f3n ser\u00eda indicar la contrase\u00f1a como un par\u00e1metro m\u00e1s, as\u00ed : -w contrase\u00f1a (notar que en este caso la \"w\" es min\u00fascula). -f fichero.ldif : Indica el fichero cuyo contenido se desea agregar","title":"Agregar informaci\u00f3n - Procedimiento gen\u00e9rico"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#ejercicios-agregar-datos","text":"1.- a) Crea un fichero llamado base.ldif con el contenido mostrado a continuaci\u00f3n y seguidamente agr\u00e9galo al directorio con el comando: ldapadd -D cn=admin -W -f base.ldif . Con esto habr\u00e1s generado dos entradas de tipo \u201cunidad organizativas\u201d que servir\u00e1n para contener (a modo de \u201ccarpetas\u201d) los usuarios y grupos que generaremos a continuaci\u00f3n. dn: ou=usuarios,dc=midominio,dc=local objectClass: organizationalUnit ou: usuarios dn: ou=grupos,dc=midominio,dc=local objectClass: organizationalUnit ou: grupos 1.-b) Crea un fichero llamado grupos.ldif con el siguiente contenido y seguidamente agr\u00e9galo al directorio con un comando similar al del apartado anterior: dn: cn=grupoldap,ou=grupos,dc=midominio,dc=local objectClass: posixGroup cn: grupoldap gidNumber: 10000 1.-c) Crea un fichero llamado usuarios.ldif con el siguiente contenido y seguidamente agr\u00e9galo al directorio con un comando similar al del apartado anterior: dn: uid=usu1ldap,ou=usuarios,dc=midominio,dc=local objectClass: top objectClass: inetOrgPerson objectClass: posixAccount objectClass: shadowAccount uid: usu1ldap sn: Lopez givenName: Juan cn: Juan Lopez displayName: Juan Lopez uidNumber: 3001 gidNumber: 10000 userPassword: XXX gecos: Es muy tonto loginShell: /bin/bash homeDirectory: /home/jlopez shadowExpire: -1 shadowFlag: 0 shadowWarning: 7 shadowMin: 8 shadowMax: 999999 shadowLastChange: 10877 mail: juan.lopez@gmail.com postalCode: 29000 dn: uid=usu2ldap,ou=usuarios,dc=midominio,dc=local objectClass: top objectClass: inetOrgPerson objectClass: posixAccount objectClass: shadowAccount uid: usu2ldap sn: Perez givenName: Perico cn: Pedro Perez displayName: Pedro Perez uidNumber: 3002 gidNumber: 10001 userPassword: XXX gecos: Es un crack loginShell: /bin/bash homeDirectory: /home/pperez shadowExpire: -1 shadowFlag: 0 shadowWarning: 7 shadowMin: 8 shadowMax: 999999 shadowLastChange: 10877 mail: pedrito@yahoo.es postalCode: 29001 Nota Tal como se puede ver, cada objeto \u201cusuario\u201d est\u00e1 formado a partir de la uni\u00f3n de diferentes tipos predefinidos de objeto (posixAccount, shadowAccount, inetOgPerson), donde cada uno aporta un determinado conjunto de atributos: posixAccount incluye la informaci\u00f3n que encontrar\u00edamos en el archivo \"/etc/passwd\" cl\u00e1sico, shadowAccount incluye la informaci\u00f3n que encontrar\u00edamos en el archivo \"/etc/shadow\" cl\u00e1sico y inetOrgPerson incluye informaci\u00f3n extra del usuario dentro de la organizaci\u00f3n (como el correo, c\u00f3d. Postal...). Nota Hay que tener muy en cuenta que al a\u00f1adir nuevos usuarios los valores de los atributos uidNumber y homeDirectory (adem\u00e1s de userPassword) deben ser diferentes para cada usuario. Lo mismo ocurre con el atributo gidNumber para los grupos. Adem\u00e1s, los valores de uidNumber y gidNumber no deben coincidir con el uid y gid de ning\u00fanusuario y grupo local de los clientes. Nota El valor del atributo userPassword est\u00e1 protegido por ACLs predefinidas del servidor para que tan solo el usuario administrador - o el propietario del objeto que contenga dicho atributo- pueda consultar su valor (hasheado). Internamente, los valores de todos atributos se almacenan en el backend seleccionado pero en el caso del atributo userPassword este almacenamiento se realiza del hash de la contrase\u00f1a seg\u00fan el algoritmo predefinido que el servidor tenga configurado. As\u00ed pues, un intruso que tuviera acceso directo al backend no obtendr\u00eda (de entrada) las contrase\u00f1as porque las tendr\u00eda que \"crackear\". Este aspecto es independiente del hecho de que las conexiones entre cliente y servidor deber\u00edan siempre estar encriptadas mediante TLS para evitar el robo de la contrase\u00f1a en tr\u00e1nsito. No obstante, alguien podr\u00eda objetar que escribir la contrase\u00f1a de los usuarios tal cual en un archivo ldif es un gran riesgo deseguridad. En realidad, as\u00ed es como se recomienda que se escriba este valor para dejar al servidor LDAP realizar el hash de la forma que internamente requiera con las comprobaciones pertinentes. De todas formas, si se desea, es posible escribir el valor del atributo userPassword de forma que est\u00e9 \"hasheado\". Para ello primero hay que utilizar alguna utilidad que nos genere el hash necesario; en el caso de usar 389DS disponemos del comando pwdhash , el cual, mediante su par\u00e1metro -s permite especificar el algoritmo hash deseado. Por ejemplo, para obtener el hash SHA-512 salteado (el mismo algoritmo que se utiliza actualmente para guardar las contrase\u00f1as hasheadas en el archivo \"/etc/shadow\" de la mayor\u00eda de distribuciones Linux) de la contrase\u00f1a \"hola\" deber\u00edamos ejecutarpwdhash -s SSHA512 hola El valor obtenido deber\u00eda serasignado tal cual al campo userPassword; la parte entre llaves indica al servidor LDAP que dicho valor ser\u00e1 un hash de ese tipo y que, por tanto, no deber\u00e1 hashearlo \u00e9l sino almacenarlo directamente","title":"Ejercicios Agregar Datos"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#buscar-informacion-ldapsearch","text":"Para comprobar si el contenido anterior se ha a\u00f1adido correctamente, podemos usar el comando ldapsearch (tambi\u00e9n del paquete \u201cldap-utils\u201d), el cual permite hacer una b\u00fasqueda en el directorio. La mayor\u00eda de veces necesitaremos indicar, adem\u00e1s de los par\u00e1metros -H ldap://nomDnsServidor:nopuerto , -D cn=admin y -W/-w contrase\u00f1a ya conocidos, otros como los siguientes: -LLL : Indica a ldapsearch que muestre la respuesta en modo \"no verboso\" (m\u00e1s f\u00e1cil de leer) d 1 : d 1, d 2, ..... establece el nivel de debug y muestra errores detallados en el resultado del comando. -b \"dc=midominio,dc=local\" : Indica el DN \"base\" a partir del cual se empezar\u00e1 la b\u00fasqueda por las entradas inferiores del \u00e1rbol. El ejemplo anterior buscar\u00eda a partir de la entrada ra\u00edz \"para abajo\" por todas las subentradas. Pero no es necesario que la entrada ra\u00edz sea el DN \"base\": si, por ejemplo, escribi\u00e9ramos -b \"ou=grupos,dc=midominio,dc=local\" entonces solo se buscar\u00eda a partir de la organizationalUnit \"grupos\" \"para abajo\" por las subentradas que contuviera. Nota NOTA: En el servidor 389DS, l'entrada \"cn=config\" pot fer-se servir com a DN base per obtenir tota la configuraci\u00f3 del propi servidor -s {base | one | sub } : El comportamiento descrito en el p\u00e1rrafo anterior de buscar recursivamente todas las entradas por debajo de una entrada \"base\" dada (incluyendo \u00e9sta) es el comportamiento por defecto, que equivaldr\u00eda a indicar el par\u00e1metro -s sub Pero otros valores de este par\u00e1metro modifican el \"scope\" de la b\u00fasqueda; por ejemplo, -s base solamente muestra informaci\u00f3n de la entrada marcada como \"base\" y nada m\u00e1s (es decir, no recorre ninguna rama del \u00e1rbol) -s one solamente muestra informaci\u00f3n de las entradas directamente colgando de la entrada \"base\" pero nada m\u00e1s (es decir, s\u00f3lo muestra las entradas \"hijas\": ni muestra entradas \"nietas\" ni la propia entrada \"base\") \"(atributo=valor)\" \"(atributo=valor)\" ... : Filtro que permite \"quedarse\", de todas las entradas recorridas, solo con las que contienen el atributo indicado con el valor indicado. Existen otros filtros m\u00e1s sofisticados que se pueden estudiar en el cuadro inferior. Si aparece este par\u00e1metro, ha de ir escrito despu\u00e9s de cualquier otro par\u00e1metro de los anteriores. Si no aparece, todas las entradas recorridas ser\u00e1n \"v\u00e1lidas\" para mostrarse. Nota is a special value representing \u201cany possible value\u201d. It can be used to build a \"presence\" filter that requests all objects where the attribute is present and has a valid value, but we do not care what the value is. For instance, by default, ldapsearch provides the filter \"(objectClass=*)\"; because all objects must have an objectClass, this filter is the equivalent to saying \u201call valid objects\u201d. atributo atributo ... : De la informaci\u00f3n encontrada en las entradas recorridas (y ya filtradas, si fuera el caso), se muestra solo aquellos atributos indicados. Si aparece este par\u00e1metro, ha de ir escrito despu\u00e9s del filtro (si hubiera). Si no aparece -o se escribe \"*\"-, se mostrar\u00e1n todos los atributos pertenecientes a las entradas recorridas (y ya filtradas si fuera el caso); en el caso de escribir \"+\" se mostrar\u00e1n los metaatributos de la entradas recorridas (como la fecha de creaci\u00f3n de la entrada, el usuario que la cre\u00f3, etc). Nota To show what basedns are available, you can query the special \u2018\u2019 or blank rootDSE (Directory Server Entry) using \"namingContexts\" as the attribute to look up, like this: ldapsearch -D cn=admin -W -LLL -b \"\" -s base namingContexts 2.- Ejecuta el comando ldapsearch -D cn=admin -W -LLL -b \"dc=midominio,dc=local\" uid=usu1ldap sn givenName Con este comando de ejemplo estaremos buscando un usuario con uid=usu1ldap y pediremos que nos muestre solo el contenido de los atributos sn y givenName. Comprueba que efectivamente sea as\u00ed: Nota Es posible realizar consultas an\u00f3nimas (es decir, sin necesidad de autenticarse) pero para ello ser\u00eda necesario configurar el servidor 389DS convenientemente (ver para m\u00e1s informaci\u00f3n) y sustituir los par\u00e1metros -D y -W de ldapsearch por -x *A filter can request objects whose attribute values are greater/less than a value by \"(uid>=test0005)\" or \"(uid<=test0005)\".If used with letters, it compares alphabetically. A filter can request a partial match of an attribute value on the object by using the \u2018 \u2019 operator (multiple times if necessary): \"(uid= 005)\" or \"(uid=*st000 )\". Note you should always have at least 3 characters in your substring filter, else indexes may not operate efficently. *Filters can be nested with AND (&) or OR (|) conditions. Condition applies to all filters that follow within the same level of brackets, that is: (condition (attribute=value)(attribute=value)). AND requires that for an object to match, all filter elements must match; this is the \u201cintersection\u201d operation and is written like this: \"(&(uid=test0006)(uid=guest0006))\" OR filters will return the aggregate of all filters; this is the union operation so provided an object satisfies one condition of the OR, it will be part of the returned set; it's written like this: (|(uid=test0006)(uid=guest0007)) *A NOT filter acts to invert the result of the inner set. For example: \"(!(uid=test0010))\" Note you can\u2019t list multiple parameters in a \"not\" condition: to combine NOT's you need to use this in conjunctionwith AND and OR. Nota NOTA: *You can nest AND, OR and NOT filters to produce more complex directed queries. For instance this query: (&(objectClass=person)(objectClass=posixAccount)(|(uid=test000*))(!(uid=test0001))) would be equivalent to...: (& (objectClass=person) (objectClass=posixAccount) (| (uid=test000*) ) (!(uid=test0001)) ) ...and it expresses \"All person whose name starts with test000* and not test0001\". Another example would be this: (|(& (...K1...) (...K2...))(& (...K3...) (...K4...))) which means (K1 AND K2) OR (K3 AND K4)","title":"Buscar informaci\u00f3n - ldapsearch"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#borrar-y-modificar-informacion-ldapdelete-y-ldapmodify","text":"Otros comandos importantes del paquete \u201cldap-util\u201d son ldapdelete y ldapmodify. Un ejemplo del primero podr\u00eda ser: ldapdelete -D cn=admin -W \"uid=usu2ldap,ou=usuarios,dc=midominio,dc=local\" donde se ha indicado el DN del elemento que se desea eliminar. El segundo tiene tres formas de modificar una entrada: cambiando el valor de un atributo , a\u00f1adiendo un nuevo atributo o eliminando un atributo existente: -Para cambiar, por ejemplo, el atributo uidNumber de un usuario, podr\u00edamos ejecutar el comando ldapmodify -D cn=admin -W -f fichero.cambios donde fichero.cambios deber\u00eda tener un contenido como el siguiente (donde se especifica qu\u00e9 entradas se quieren modificar y de qu\u00e9 manera): dn:uid=usu2ldap,ou=usuarios,dc=midominio,dc=local changetype:modify replace:uidNumber uidNumber:3002 Nota NOTA: La informaci\u00f3n anterior la podr\u00edamos haber introducido directamente desde la entrada est\u00e1ndar si no hubi\u00e9ramos especificado el par\u00e1metro -f. -Para a\u00f1adir un atributo nuevo (en este caso llamado jpegPhoto) deber\u00edamos ejecutar el mismo comando ldapmodify anterior pero ahora fichero.cambios deber\u00eda tener un contenido como este: dn:uid=usu2ldap,ou=usuarios,dc=midominio,dc=local changetype: modify add:jpegPhoto jpegPhoto:file:///tmp/foto.png -Para eliminar un atributo (en este caso llamado jpegPhoto) deber\u00edamos ejecutar el mismo comando ldapmodify anterior pero ahora \"fichero.cambios\" deber\u00eda tener un contenido como este: dn:uid=usu2ldap,ou=usuarios,dc=midominio,dc=local changetype: modify delete:jpegPhoto Nota ya que la configuraci\u00f3n del servidor 389DS es troba accessible en forma directori, la comanda ldapmodify es podria utilitzar per modificar aquesta configuraci\u00f3 \"en calent\". Per exemple, sabent que les directives \"nsslapd-ldapilisten\" i \"nsslapd-ldapifilepath\" activen el mecanisme LDAPI i especifiquen la ruta del socket adient, respectivament, per activar aquesta caracter\u00edstica (que ja ve de s\u00e8rie activada, per\u00f2 \u00e9s nom\u00e9s un exemple), podr\u00edem fer com sempre: ldapmodify -D cn=admin -W -f fichero.cambios pero ara el contingut del fitxer \"fichero.cambios\" seria: dn: cn=config changetype: modify replace: nsslapd-ldapilisten nsslapd-ldapilisten: on - add: nsslapd-ldapifilepath nsslapd-ldapifilepath: /var/run/slapd-exemple.socket Nota NOTA: En realitat, per afegir entrades i per eliminar entrades no caldria fer servir les comandes ldapadd i ldapdelete respectivament, ja que amb ldapmodify ja n'hi hauria prou. En el cas de voler afegir una entrada el fitxer \"fichero.cambios\" hauria de tenir un contingut semblant al seg\u00fcent...: dn: <dn to add> changetype: add objectclass: ... attribute1: ... attribute2: ... ...i en el cas de voler eliminar una entrada, el seu contingut hauria de ser semblant a aquest: dn: <dn to delete> changetype: delete 3.-a) Modifica el atributo \u201cgecos\u201d del usuario Juan L\u00f3pez para que muestre la descripci\u00f3n: \u201cRonca\u201d. Comprueba mediante ldapsearch que el cambio lo has realizado correctamente b) A\u00f1ade el atributo \u201cjpegPhoto\u201d del usuario Juan L\u00f3pez indicando la ruta (ficticia) de su foto identificativa. Comprueba mediante ldapsearch que el cambio lo has realizado correctamente c) Elimina el atributo \u201cjpegPhoto\u201d anterior.Comprueba mediante ldapsearch que el cambio lo has realizado correctamente","title":"Borrar y modificar informaci\u00f3n ldapdelete y ldapmodify"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#acis","text":"By default, the directory server denies access to everything. The administrator must allow certain types of access to certain resources for users to be able to use the directory server. The operational attribute aci is used for access control. This attribute can be applied to any entry in the directory tree, and has subtree scope: it applies to the entry that contains it and any children and descendants of that entry. An ACI consists of 3 parts: a target, a subject, and the type of access (permission): The target represents the entry or resource is being protected. The target specification should be a DN (written with the syntax \"ldap:///DN\"), but can be stretched by specifying one or more atributes to restrict its application, or even a LDAP filter. Writing a target it's optional: by default it applies to all entries in subtree scope of the entry which ACI is defined (that's is which contains the aciattribute). The subject represents the entity which is granted (or denied) access to the target. The subject may be userdn=\"ldap:///DN\" or groupdn=\"ldap:///DN\" (where DN can be any DN of a user or a group, respectively). It also can be some of these values: userdn=\"ldap:///self\" (to specify the user who has done the query), userdn=\"ldap:///anyone\" (to specify anonymous binds), or userdn=\"ldap:///all\" (to specify any authenticated user). Modifiers can be used to allow or deny access based on the client IP address or hostname, access time, or connection type (encrypted or not). You can also use attributes to specify a subject with userattr=\"attrname\" syntax. The permission is any combination of the following keywords: read Indicates whether directory data may be read. Indicates whether directory data may be changed or created. This permission also allows write directory data to be deleted but not the entry itself: to delete an entire entry, the user must have delete permissions. search Indicates whether the directory data can be searched. This differs from the read permission in that read allows directory data to be viewed if it is returned as part of a search operation. For example, if searching for common names is allowed as well as read permission for a person's room number, then the room number can be returned as part of the common namesearch, but the room number itself cannot be used as the subject of a search. Use this combination to prevent people from searching the directory to see who sits in a particular room. add Indicates whether child entries beneath the targeted entry can be created. delete Indicates whether targeted entry can be deleted. all Means all types of above accesses The permission is modified by using allow or deny If there are conflicts between what is allowed and what is denied, the deny wins. Better explained: when a user attempts any kind of access to a directory entry, Directory Server applies the precedence rule. This rule states that when two conflicting permissions exist, the permission that denies access always takes precedence over the permission that grants access. For example, if write permission is denied at the directory's root level, and that permission is applied to everyone accessing the directory, then no user can write to the directory regardless of any other permissions that may allow write access. To allow a specific user write permissions to the directory, the scope of the original deny-for-write has to be set so that it does not include that user. Then, there must be additional allow-for-write permission for the user in question. The aci attribute has the following syntax (version 3.0 and acl \"name\" values are mandatory and, as it can be seen, several targets can be specified as well as several allow(permission)(subject)... values): aci: (target=\"ldap:///DN)(target=...)(version 3.0; acl \"name\"; allow(per,miss,ion)(userdn=\"ldap:///subject\"); allow...;) Nota NOTA: Some interesting modifiers to add in a ACI to restrict targeted entries are \"targetattr\" and \"targetfilter\" keywords, (which must be specified after these targeted entries). Another interesting keyword is \"targetscope\" For instance, in the following example, the ACI states that \"bjensen\" has rights to modify all attributes in her own directory entry: aci: (target=\"ldap:///uid=bjensen,dc=example,dc=com\")(targetattr=\"*\")(targetscope=\"subtree\")(version 3.0; acl \"example\"; allow (write)(userdn=\"ldap:///self\");) Access control rules can be placed on any entry in the directory although administrators often place access control rules on entries with the object classes \"domainComponent\", \"organizationalUnit\", \"inetOrgPerson\", or \"group\". You can add/replace/delete an aci attribute like any other using LDIF files and ldapmodify command. For instance, this content would add the permission of anonymous searches/reads to all the directory's content: dn:dc=midominio,dc=local changetype: modify add:aci aci: (targetattr!=\"userPassword\")(version 3.0; acl \"xxx\"; allow(read,search)(userdn=\"ldap:///anyone\");) The aci attribute is a multi-valued operational attribute that can be read and modified by directory users. Therefore, the ACI attribute itself should be protected by ACIs. Administration users are usually given full access to the aci attribute doing ldapsearch -D cn=admin -W -b entryDN -s base \"(objectclass=*)\" aci","title":"ACIs"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#login-ldap-desde-cliente-con-sssd","text":"","title":"Login LDAP desde cliente con SSSD"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#introduccion","text":"En Linux se puede utilizar el demonio SSSD para autenticar al usuario contra servidores LDAP remotos (Combinados con servidores Kerberos o no) adem\u00e1s de identificarlos. Mediante SSSD todo el proceso de autenticaci\u00f3n / identificaci\u00f3n del usuario se produce en el cliente de una forma homog\u00e9nea y coherente, independientemente de la distribuci\u00f3n Linux all\u00ed instalada. Nota Adem\u00e1s de autenticarse contra servidores LDAP \"pelados\" o combinados con Kerberos, el demonio SSSD tambi\u00e9n permite autenticar usuarios contra sistemas integrales empresariales como FreeIPA o Active Directory (los cuales internamente se basan en LDAP / Kerberos). En cambio, no puede trabajar (todav\u00eda) con SGBDs o servidores RADIUS como fuente de autenticaci\u00f3n / identificaci\u00f3n Una gran ventaja de utilizar SSSD en vez de los m\u00f3dulos PAM / NSS \"standalone\" individualmente es que este demonio guarda una cach\u00e9 (en la carpeta /var/lib/sss/db ) que permite el acceso \"Offline\" a / los sistema/s cliente/s (sin tener ninguna cuenta local diferente) en el caso de que el servidor LDAP / Kerberos remoto no est\u00e9 disponible en ese momento o, en caso de que s\u00ed, disminuir su carga. Nota NOTA: El demonio SSSD tambi\u00e9n ofrece una interfaz D-Bus para poder interactuar con el sistema mediante este m\u00e9todo y as\u00ed obtener, por ejemplo, informaci\u00f3n extra sobre el usuario (tal como veremos). El demonio SSSD proporciona sus propios m\u00f3dulos PAM y NSS para conectar con servidores LDAP / Kerberos y LDAP, respectivamente, los cuales son diferentes de los m\u00f3dulos \"standalone\" pam_ldap / pam_krb5 y nss_ldap ya conocidos. Esto es porque SSSD ofrece funcionalidades extra como un framework conjunto y librer\u00edas homog\u00e9neas, un mecanismo de cach\u00e9 de credenciales -similar al que ofrec\u00eda el demonio ncsd, ya obsoleto-, una interfaz D-Bus, etc. Para que los programas de inicio de sesi\u00f3n (login, gdm, su, sudo, ssh, etc) utilicen los m\u00f3dulos PAM / NSS propios de SSSD deberemos realizar un conjunto de configuraciones al sistema que explicaremos a continuaci\u00f3n. Nota NOTA: En Ubuntu hay que instalar el paquete \"sssd\" (es decir, el demonio SSSD no viene preinstal.lat \"de f\u00e1brica\"). Afortunadamente, al instalar este paquete ya se instalar\u00e1n autom\u00e1ticamente como dependencia el resto de paquetes que podamos necesitar, como los conectores con los diferentes providers: \"sssd-ldap\", \"sssd-krb5\", \"sssd-ipa\", etc. En Fedora todos estos paquetes ya vienen instalados \"de f\u00e1brica\".","title":"Introducci\u00f3n"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#configuracion-de-sssd","text":"SSSD lee los archivos de configuraci\u00f3n en este orden: primero lee el archivo primario /etc/sssd/sssd.conf y luego, otros archivos * .conf en /etc/sssd/conf.d (en orden alfab\u00e9tico). Si aparece el mismo par\u00e1metro en m\u00faltiples archivos de configuraci\u00f3n, SSSD usa el \u00faltimo par\u00e1metro de lectura. Esto le permite usar el valor predeterminado /etc/sssd/sssd.conf en todos los clientes y aagregar configuraciones adicionales en otros archivos de configuraci\u00f3n para extender la funcionalidad individualmente por cliente. Atenci\u00f3n Todos estos archivos deben ser propiedad de root:root y tener permisos 600 de lo contrario el servicio sssd no se iniciar\u00e1. Los proveedores de autenticaci\u00f3n e identidad se configuran como \"dominios\" en el archivo de configuraci\u00f3n SSSD. Puede configurar varios dominios para SSSD pero al menos un dominio debe estar configurado, de lo contrario, SSSD no arrancar\u00e1. Un solo dominio se puede usar como: Un proveedor de autenticaci\u00f3n (para solicitudes de autenticaci\u00f3n) Un proveedor de identidad (para informaci\u00f3n del usuario) Un proveedor de control de acceso (para solicitudes de autorizaci\u00f3n). No los estudiaremos aqu\u00ed. Una combinaci\u00f3n de estos proveedores (si todas las operaciones correspondientes se realizan dentro de un solo servidor) Nota Tambi\u00e9n hay lo que se llama un proveedor \"proxy\". Este proveedor funciona como un intermediario de retransmisi\u00f3n entre SSSD y recursos que SSSD de otra forma no podr\u00edan usar. Cuando se usa un proveedor proxy, SSSD se conecta al servicio proxy, y el proxy carga las bibliotecas especificadas. Con un proveedor de proxy, puede configurar SSSD para utilizar m\u00e9todos de autenticaci\u00f3n alternativos, como un esc\u00e1ner de huellas digitales, entre otras cosas.","title":"Configuraci\u00f3n de SSSD:"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#seccion-sssd","text":"En el archivo \"sssd.conf\" debe haber al menos una secci\u00f3n general [sssd] y una secci\u00f3n para cada dominio. Debajo de la secci\u00f3n [sssd] debemos tener en cuenta esta l\u00ednea (m\u00e1s informaci\u00f3n en man sssd.conf): domains = Especifica una lista separada por comas de dominios definidos en el orden que desee para ser consultado Por lo tanto, si un dominio no aparece en esta lista, no se consultar\u00e1 aunque est\u00e9 definido en el archivo \"sssd.conf\"","title":"Secci\u00f3n [sssd]"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#seccion-domainxxx","text":"Las secciones correspondientes a dominios definidos deben titularse as\u00ed [domain/xxx] donde \"xxx\" puede ser cualquier cosa. Debajo de una secci\u00f3n de dominio debemos tener en cuenta estas l\u00edneas (m\u00e1s en man sssd.conf): Line \"auth_provider = \": establece el proveedor de autenticaci\u00f3n utilizado para el dominio. Los valores posibles son: - \"ldap\", \"krb5\", \"ipa\", \"ad\" o \"proxy\", entre otros. Dependiendo del proveedor elegido, habr\u00e1 sea \u200b\u200bnecesario escribir l\u00edneas m\u00e1s espec\u00edficas (ver man sssd-ldap, man sssd-krb5, man sssd-ipa u man sssd-ad para m\u00e1s detalles). -Line \"id_provider =\" : establece el proveedor de identidad utilizado para el dominio. Los valores posibles son: \"ldap\", \"archivos\", \"ipa\", \"anuncio\" o \"proxy\". Dependiendo del proveedor elegido, habr\u00e1 que escribir l\u00edneas m\u00e1s espec\u00edficas (vea man sssd-ldap, man sssd-files, man sssd-ipa o man sssd-ad para m\u00e1s detalles). -Line \"access_provider =\" : establece el proveedor de acceso utilizado para el dominio, que se utiliza para evaluar qu\u00e9 usuarios tienen acceso al sistema. Incluso si un usuario se autentica con \u00e9xito, si no Si cumple con los criterios proporcionados por el proveedor de acceso, su acceso ser\u00e1 denegado. Los valores posibles son: \"ldap\", \"krb5\", \"simple\", \"ipa\", \"ad\", \"proxy\", \"denegar\" (siempre niega el acceso) o \"permitir\" (por defecto,siempre permite el acceso). Dependiendo del proveedor elegido, habr\u00e1 que escribir m\u00e1s. l\u00edneas espec\u00edficas (vea man sssd-ldap, man sssd-krb5, man sssd-simple, man sssd-ipa o man sssd-ad para detalles). Nota NOTA: El proveedor de acceso \"simple\" permite o niega el acceso basado en una lista de nombres de usuario o grupos. Permite restringir el acceso a m\u00e1quinas espec\u00edficas. Por ejemplo, en las computadoras port\u00e1tiles de la compa\u00f1\u00eda, puede usar el proveedor de acceso simple para restringir el acceso solo a un usuario espec\u00edfico o un grupo espec\u00edfico. Otros usuarios o grupos no podr\u00e1n iniciar sesi\u00f3n incluso si se autentican correctamente en el proveedor de autenticaci\u00f3n configurado. [domain/nombre_dominio] ... access_provider = simple simple_allow_users = usuario1, usuario2 #simple_allow_groups = group1 Si el proveedor de acceso que est\u00e1 utilizando es el \"ldap\", tambi\u00e9n puede especificar un filtro de control de acceso LDAP que el usuario debe coincidir para poder acceder al sistema. [domain/domain_name] ... access_provider = ldap ldap_access_filter = (memberOf=cn=allowedusers,ou=Groups,dc=example,dc=com) #ldap_access_order = filter, host, authorized_service Nota NOTA: La directiva ldap_access_order puede tener estos valores (se pueden indicar por orden de aplicaci\u00f3n): *\"filter\" : Se usa el filtro indicado en ldap_access_filter como criterio. Valor per defecto *\"host\" : Se usa el atributo \"host\" en el directorio como criterio *\"authorized_service\" : Se usa el valor de \"authorizedService\" en el directorio como criterio *\"expire\" : Se usa el valor de la directiva ldap_account_expire_policy como criterio -Line \"chpass_provider = \": establece el proveedor que debe manejar las operaciones de cambio de contrase\u00f1a para el dominio. Los valores posibles son: \"ldap\", \"krb5\", \"ipa\", \"ad\", \"proxy\" o \"none\" (esto expl\u00edcitamente deshabilita la capacidad de cambiar las contrase\u00f1as). Si no se especifica esta l\u00ednea, entonces se usa por defecto el valor especificado en la l\u00ednea \"id_provider\". Ver man sssd-sudo para detalles Nota Nota SSSD no almacena en cach\u00e9 las credenciales de usuario de forma predeterminada. Entonces, al procesar solicitudes de autenticaci\u00f3n,de manera predeterminada, SSSD siempre contacta al proveedor de identidad; si el proveedor no est\u00e1 disponible, la autenticaci\u00f3n de usuario falla Para garantizar que las credenciales se almacenen localmente despu\u00e9s de autenticar con \u00e9xito a los usuarios para que puedan mantener autenticaci\u00f3n incluso cuando el proveedor de identidad no est\u00e1 disponible, debe habilitar el almacenamiento en cach\u00e9 de credenciales local agregando la l\u00ednea cache_credentials = true debajo de la secci\u00f3n de dominio correspondiente. Por defecto, la credencial la memoria cach\u00e9 nunca caduca: si desea que sssd elimine las credenciales almacenadas en cach\u00e9, account_cache_expiration = line hacer que caduquen despu\u00e9s del n\u00famero de d\u00edas especificado. Nota Cuando un usuario intenta una operaci\u00f3n de sudo, ya sabemos que SSSD contacta al proveedor de identidad / sudo definido en el dominio para obtener la informaci\u00f3n requerida sobre la configuraci\u00f3n actual de sudo. Si la l\u00ednea cache_credentials se establece en true,tambi\u00e9n almacenar\u00e1 esa informaci\u00f3n de sudo en una memoria cach\u00e9, para que los usuarios puedan realizar operaciones de sudo incluso cuando LDAP / IPA / AD El servidor est\u00e1 fuera de l\u00ednea.","title":"Secci\u00f3n [domain/xxx]"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#secciones-opcionales-pam-y-o-nss","text":"Las secciones opcionales [pam] y / o [nss] tambi\u00e9n pueden aparecer en el archivo \"sssd.conf\". Podr\u00edan ser utilizadas para configurar algunos aspectos del comportamiento de los m\u00f3dulos PAM o NSS de SSSD, respectivamente. Por ejemplo, si se quiere configurar un l\u00edmite de tiempo (en d\u00edas) para cu\u00e1nto tiempo SSSD permite la autenticaci\u00f3n sin conexi\u00f3n si el proveedor de identificaci\u00f3n no est\u00e1 disponible, puede usar la l\u00ednea offline_credentials_expiration = debajo de la secci\u00f3n [pam] para especificar ese l\u00edmite de tiempo. Otras l\u00edneas interesantes para especificar debajo de la secci\u00f3n [pam] son offline_failed_login_attempts = , offline_failed_login_delay = o reconnection_retries , entre otros. Igualmente, debajo de la secci\u00f3n [nss] algunas l\u00edneas interesantes que merecen atenci\u00f3n son filter_groups = y filter_users = (que excluye a ciertos usuarios, por defecto, solo \"root\") de ser extra\u00eddos del backend NSS Esto es particularmente \u00fatil para las cuentas del sistema .; esta opci\u00f3n tambi\u00e9n se puede establecer por dominio o incluir nombres totalmente calificados para filtrar solo usuarios del dominio en particular), entry_cache_timeout = (que especifica cu\u00e1ntos segundos, por defecto 5400- debe considerar sssd entradas v\u00e1lidas antes de preguntar al NSS backend otra vez), \"entry_cache_nowait_percentage =\", \"override_homedir =\", \"override_shell =\", \"allowed_shells =\", etc.","title":"Secciones opcionales [pam] y / o [nss]"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#ejemplo-1-un-servidor-ldap-como-proveedor-de-autenticacion-e-identidad","text":"Un fichero \"sssd.conf\" podr\u00eda ser algo as\u00ed: [sssd] domains=pepito [domain/pepito] auth_provider=ldap id_provider=ldap ldap_uri=ldaps://ldapserver.example.com ldap_search_base=dc=example,dc=com Nota SSSD always uses an encrypted channel for authentication, which ensures that passwords are never sent over the network unencrypted but forces the LDAP server to run over TLS. If this LDAP server used a self-signed certificate, you must add the line ldap_tls_reqcert=allow in the sssd.conf file so that client doesn't reject it. If this LDAP used a ca-signed certificate instead, you should add the line ldap_tls_cacert = /etc/pki/tls/certs/ca-bundle.crt instead (pointing to the right CA's bundle file in each case). Anyway, if you wanted identity lookups (such as commands based on the id or getent utilities) were also encrypted (or if LDAP server only runs over TLS), you should add the \" ldap_id_use_start_tls =true line. Nota If LDAP server's configuration requires that queries to LDAP directory have to be authenticated, you should add the ldap_default_bind_dn= cn=admin and ldap_default_authtok= 12345 lines to specify which user (\"cn=admin\" in this example) and password (\"12345\" in this example) should be used to do these queries, respectively.","title":"Ejemplo 1 (un servidor LDAP como proveedor de autenticaci\u00f3n e identidad)"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/#example-2-a-kdc-server-as-authentication-provider-and-a-ldap-server-as-identity-provider","text":"A suitable sssd.conf file could be like this: [sssd] domains=pepito [domain/pepito] auth_provider=krb5 krb5_server=kdc.example.com krb5_realm=EXAMPLE.COM id_provider=ldap ldap_uri= ... ldap_search_base= ... Nota NOTA: If the Change Password service is not running on the KDC specified in \"krb5_server\" or \"krb5_backup_server\" lines, you can use the \"krb5_passwd\" line to specify the server where the service is running or a chpass_provider instead.","title":"Example 2 (a KDC server as authentication provider and a LDAP server as identity provider)"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Autenticaci%C3%B3n%20e%20Identificaci%C3%B3n%20de%20usuarios%20con%20LDAP/","text":"Autenticaci\u00f3n/Identificaci\u00f3n de usuarios con LDAP \u00b6 PAM (autenticaci\u00f3n): \u00b6 PAM (de \"Pluggable Authentication Modules\") es, tal como ya sabemos, un conjunto de librer\u00edas especializadas en el \u00e1mbito de la autenticaci\u00f3n que permite a los programas que hagan uso de ellas (por ejemplo: ssh, su, sudo, login, gdm, etc) poder utilizar distintos m\u00e9todos de autenticaci\u00f3n a conveniencia de forma totalmente transparente para dichos programas. Es decir: PAM permite que, sin realizar modificaciones en el c\u00f3digo de los programas, podamos utilizar m\u00e9todos que vayan desde el uso t\u00edpico de un nombre de usuario y una contrase\u00f1a, hasta dispositivos que faciliten identificaci\u00f3n biom\u00e9trica (lectores de huellas, de voz, de imagen, etc.) simplemente indic\u00e1ndoselo en determinados ficheros de configuraci\u00f3n. NSS (identificaci\u00f3n): \u00b6 PAM solo se encarga de la autenticaci\u00f3n: es decir, de decidir si el usuario en cuesti\u00f3n \"puede entrar\" en el sistema o no seg\u00fan si determinadas condiciones resultan correctas o no (condiciones que depender\u00e1n del m\u00e9todo utilizado pero que pueden ser, por ejemplo, -y ser\u00eda el caso m\u00e1s habitual- una combinaci\u00f3n de nombre de usuario + contrase\u00f1a). No obstante, para que el inicio de sesi\u00f3n de un usuario sea completo y dicho usuario sea reconocido como tal sin errores, el sistema debe conocer m\u00e1s datos de ese usuario. Por ejemplo, ha de saber a qu\u00e9 grupo/s pertenece ese usuario, o qu\u00e9 shell por defecto tiene, o cu\u00e1l es la ruta de su carpeta personal, o la fecha de caducidad de su contrase\u00f1a, etc. De obtener toda esta informaci\u00f3n complementaria del usuario reci\u00e9n autenticado se encarga otro conjunto de librer\u00edas llamado NSS (de \"Name Service Switch\", con ruta en /lib/libnss_* o /lib/x86_64-linux-gnu/libnss_*). En otras palabras: PAM se dedica a responder a la pregunta \"\u00bfFulanito puede entrar?\" y NSS se dedica a responder a la pregunta \"\u00bfQu\u00e9 sabemos de Fulanito?\" Normalmente, NSS obtiene la informaci\u00f3n necesaria de los archivos /etc/passwd , /etc/group y /etc/shadow porque as\u00ed est\u00e1 indicado en el archivo /etc/nsswitch.conf (en las l\u00edneas \"passwd\", \"shadow\" y \" group \", respectivamente). Por lo tanto, si no cambiamos nada del subsistema NSS y s\u00f3lo configuramos el m\u00f3dulo PAM para que la autenticaci\u00f3n se produjera, por ejemplo, contra un servidor LDAP remoto, \"nos habr\u00edamos quedado a medio camino\" para que s\u00f3lo en el caso de que el mismo nombre de usuario exista tanto dentro del servidor LDAP como dentro de los archivos /etc /passwd y / etc/shadow el inicio de sesi\u00f3n funcionar\u00eda ya que, como hemos dicho, se utilizar\u00eda el servidor LDAP para autenticar (v\u00eda PAM) y la informaci\u00f3n NSS est\u00e1ndar (v\u00eda ficheros \"/etc /passwd\" y familia) para completar la informaci\u00f3n sobre este usuario. Si lo que queremos es tener un sistema que incluya informaci\u00f3n NSS, independiente de la est\u00e1ndar (la cual, por qu\u00e9 no, podr\u00eda estar almacenada igualmente en el mismo servidor LDAP), ser\u00e1 necesario instalar un m\u00f3dulo NSS que a\u00f1ada a este subsistema la posibilidad de buscar este tipo de informaci\u00f3n en este otro origen diferente del est\u00e1ndar. Para decidir cu\u00e1l es el origen escogido entre varios posibles, las aplicaciones que hacen uso de NSS consultan primero el archivo \"/etc/nsswitch.conf\" para saber si la informaci\u00f3n sobre los usuarios la han de obtener de los ficheros locales ( \"/etc /passwd\" y \"/etc /shadow\") o bien, mediante el uso de alg\u00fan m\u00f3dulo NSS concreto previamente instalado, la han de obtener de alguna base de datos remota como podr\u00eda ser un servidor LDAP (o, por qu\u00e9 no, complementar ambos or\u00edgenes para que si falla el predeterminado utilice el otro). Nota En realidad, el subsistema NSS es un mecanismo mucho m\u00e1s global que sirve para escoger otros or\u00edgenes de informaci\u00f3n que no tienen nada que ver con \"caracter\u00edsticas de usuarios\". para conocer la correspondencia entre nombres de m\u00e1quinas y su ip, las \u201caplicaciones NSS\u201d consultar\u00e1n /etc/nswitch.conf para saber si primero han de consultar en un servidor DNS o bien pueden obtener la informaci\u00f3n del fichero /etc/hosts, o bien pueden complementar ambos or\u00edgenes en un orden determinado. Aix\u00ed doncs, en general, el que permet el subsistema NSS es que las aplicaciones que hayan sido programadas haciendo uso de \u00e9l puedan utilizar de forma coherente y com\u00fan un conjunto de or\u00edgenes de datos conteniendo los nombres de distintos \u00edtems, (como m\u00e1quinas, redes, nombres de protocolos, usuarios, grupos, etc.) que dichas aplicaciones necesitan. Nota Una altra avantatge de qu\u00e8 una aplicaci\u00f3 faci servir NSS \u00e9s que poden obtenir la informaci\u00f3 que necessiten (nombres de usuarios y sus contrase\u00f1as, nombres de m\u00e1quinas, de redes, de protocolos, etc) preguntando directamente a NSS (y \u00e9ste utilizando la librer\u00eda concreta adecuada seg\u00fan lo que se encuentre en /etc/nsswitch.conf) sin tener que conocer el lugar exacto donde est\u00e1 almacenada, (ya que para obtenerla ya se encarga NSS) Un ejemplo de archivo \"/etc/nswitch.conf\" muy simple ser\u00eda el siguiente: passwd: files group: files shadow: files hosts: files dns networks: files protocols: files services: files ethers: files ...donde principalmente se indica (mediante la l\u00ednea passwd:...) que la base de datos de usuarios que se va a utilizar es el fichero local /etc/passwd (gracias al valor files), que la base de datos de grupos es el fichero local /etc/group (mediante la l\u00ednea group:...), que la de contrase\u00f1as es el fichero local /etc/shadow (mediante la l\u00ednea shadow:...) y que la de nombres de m\u00e1quinas ser\u00e1 (gracias a la l\u00ednea hosts:...) en primera instancia el fichero local /etc/hosts (ver man hosts para m\u00e1s informaci\u00f3n sobre este fichero, o tambi\u00e9n http://en.wikipedia.org/wiki/Hosts_%28file%29 ), y, si no se encuentra el nombre all\u00ed, entonces se proceder\u00e1 (ya que tras \u201cfiles\u201d est\u00e1 el valor \u201cdns\u201d) a realizar una b\u00fasqueda DNS en los servidores configurados en /etc/resolv.conf Nota Las otras l\u00edneas del archivo /etc/nsswitch.conf no son tan utilizadas pero las comentamos aqu\u00ed: la l\u00ednea networks indica que los nombres de redes se buscar\u00e1n en el fichero local /etc/networks (ver man networks para m\u00e1s informaci\u00f3n sobre este fichero), la l\u00ednea protocols indica que los nombres de los protocolos se buscar\u00e1n en el fichero local /etc/protocols (ver man protocols para m\u00e1s informaci\u00f3n sobre este fichero), la l\u00ednea services indica que los nombres de los servicios se buscar\u00e1n en el fichero local /etc/services (ver man services para m\u00e1s informaci\u00f3n sobre este fichero) y la l\u00ednea ethers indica que la correspondencia est\u00e1tica entre direcciones MAC e IPs se buscar\u00e1 en el fichero local /etc/ethers (ver man ethers para m\u00e1s informaci\u00f3n sobre este fichero). LDAP \u00b6 LDAP (\u201cLightweight Directory Access Protocol\u201d) es un protocolo de nivel de aplicaci\u00f3n que permite acceder a un \u201cservidor de directorio\u201d. Por \u201cdirectorio\u201d se entiende un conjunto de datos organizados de una manera l\u00f3gica y jer\u00e1rquica en forma de elementos llamados \u201centradas\u201d, los cuales poseen diversos atributos. Cada entrada representa un objeto que puede ser abstracto o real (una persona, un mueble, una funci\u00f3n en la estructura de una empresa, etc). La utilidad de un servidor de directorio radica en ofrecer dichos objetos a la red de una forma centralizada (y, opcionalmente, transparentemente distribuida). Se puede entender que un servidor de directorio pueda ser equivalente a un servidor de bases de datos, pero su sistema de almacenamiento es diferente y su manera de consultar y manipular la informaci\u00f3n contenida en \u00e9l tambi\u00e9n. Aunque no tiene por qu\u00e9 ser as\u00ed siempre, el tipo de informaci\u00f3n que suele encontrarse en la mayor\u00eda de ocasiones en un servidor LDAP es t\u00edpicamente aquella relacionada con la autenticaci\u00f3n e identificaci\u00f3n centralizada de usuarios (nombre, contrase\u00f1a, uid, grupo, permisos, etc), o con la autenticaci\u00f3n e identificaci\u00f3n centralizada de m\u00e1quinas (nombre, direcci\u00f3n MAC, direcci\u00f3n IP, etc). Tambi\u00e9n puede contener informaci\u00f3n complementaria de usuarios (correo, tel\u00e9fonos, direcci\u00f3n, etc) o configuraciones centralizadas de aplicaciones y certificados, etc. Para definir los atributos que tendr\u00e1n las entradas almacenadas en un servidor LDAP podemos hacer uso de las llamadas \u201cReglas de Esquema\u201d. \u00c9stas son plantillas que especifican qu\u00e9 atributos formar\u00e1n la entrada de forma obligatoria y cu\u00e1les de forma optativa (a modo de \u201cesqueleto\u201d de la entrada). La/s \u201cRegla/s de Esquema\u201d concreta/s utilizada/s por una entrada determinada (porque una entrada puede tener asociadas varias reglas, acumul\u00e1ndose entonces en la entrada todos los atributos presentes en cada una de ellas) se indica/n mediante un atributo especial de la entrada llamado \"objectClass\"; el valor de este atributo representa una Regla elegida (si hay varias, cada una se especificar\u00e1 en un atributo \"objectClass\" diferente). Lo m\u00e1s normal es asignar al atributo \"objectClass\" de una entrada el nombre de una Regla ya predefinida a escoger de entre un conjunto de Reglas estandarizadas que ofrece todos los servidores LDAP; tambi\u00e9n podr\u00edamos crear nuestras propias Reglas de Esquema (o modificar alguna existente; para m\u00e1s informaci\u00f3n sobre c\u00f3mo hacer ambas cosas consultar por ejemplo http://www.zytrax.com/books/ldap/ch3 ), pero no suele ser necesario porque las Reglas predefinidas cubren la mayor\u00eda de casos pr\u00e1cticos y son oficiales. Nota NOTA: En el caso de carecer de atributo \u201cuid\u201d, el atributo que suele hacer de identificador de la entrada suele ser \u201ccn\u201d. Nota NOTA: Una Regla que TODOS las entradas de un \u00e1rbol de directorio han de implementar (mediante su correspondiente atributo \"objectClass\"), independientemente del resto de Reglas que se deseen a\u00f1adir en cada una de ellas, es una Regla llamada \"top\". Al implementar esta Regla en una entrada lo que se consigue es que esa entrada pueda disponer precisamente del atributo \"objectClass\" (es decir, el atributo \"objectClass\" est\u00e1 definido en la Regla \"top\", a modo de definici\u00f3n recursiva). Las entradas se organizan en una estructura jer\u00e1rquica en forma de \u00e1rbol invertido. Tradicionalmente,la parte superior de esta estructura refleja la jerarqu\u00eda de los dominios DNS (incluso regionales) de la organizaci\u00f3n, de manera que las entradas que representan a la compa\u00f1\u00eda (como \u201cpepsi.com\u201d, \u201cunicef.org\u201d o \u201cyahoo.es\u201d) aparecen en el \u00e1rbol por encima de otras entradas que representan unidades organizativas internas. Las primeras suelen identificarse por la presencia del atributo \u201cdc\u201d (domain component), y para cada subdominio hay una (dc=\u201dpepsi\u201d y dc=\u201dcom\u201d para \u201cpepsi.com\u201d, dc=\u201dunicef\u201d y dc=\u201dorg\u201d para \u201cunicef.org\u201d, etc). Dentro de las \u00faltimas es donde se encuentra la informaci\u00f3n relativa a usuarios, m\u00e1quinas, documentos o cualquier otra cosa que queramos. Sea del tipo que sea (\u201cdomain component\u201d o no) y represente lo que represente, toda entrada posee un \u00fanico \u201cNombre Distinguido\u201d -\u201cDistinguised Name\u201d (DN)-, que sirve para identificarla de manera un\u00edvoca. El DN, de hecho, se construye a partir del identificador de la entrada en s\u00ed misma (lo que se llama \u201cNombre Relativo Distinguido\u201d -\u201dRelative Distinguished Name\u201d (RDN)-, y que suele ser el valor de su atributo \u201cuid\u201d o bien \u201ccn\u201d -o \u201cou\u201d en el caso de las unidades organizativas-) concatenado con los identificadores de las entradas de sus antecesores separados por comas. Por ejemplo: si el DN de una entrada es \u201cuid=pperez,ou=empleados,dc=nike,dc=es\u201d, nos estaremos refiriendo a una entrada (cuyo RDN es \u201cuid=pperez\u201d) que contiene informaci\u00f3n sobre el empleado Pperez perteneciente a la secci\u00f3n espa\u00f1ola de Nike. Para conocer toda esa informaci\u00f3n, deber\u00edamos observar el resto de atributos de esa entrada (objetClass, cn, givenname, sn, o,mail ...). Nota Una explicaci\u00f3n m\u00e1s pormenorizada sobre c\u00f3mo se organiza la estructura en \u00e1rbol de un directorio LDAP se encuentra en https://fy.blackhats.net.au/blog/html/pages/ldap_guide_part_1_foundations.html LDAP tiene definidas las operaciones necesarias para interrogar y actualizar el directorio (adicionar y borrar una entrada, modificar una entrada existente, cambiar el nombre de una entrada, etc). No obstante, la mayor parte del tiempo LDAP se utiliza para buscar informaci\u00f3n almacenada en el directorio: las operaciones de b\u00fasqueda permiten que en una porci\u00f3n del directorio se busquen entradas que cumplan con alg\u00fan criterio especificado en el filtro de b\u00fasqueda. Algunos servidores de directorio no tienen protecci\u00f3n y permiten que cualquier persona consulte la informaci\u00f3n que contienen, pero LDAP provee un mecanismo para que los clientes se autentiquen, (o al menos confirmen su identidad) para garantizar un control de acceso y proteger as\u00ed la informaci\u00f3n que el servidor contiene. Nosotros utilizaremos la infrastructura LDAP para poder loguearnos en un PC mediante un usuario y contrase\u00f1a guardados en forma de entrada dentro de un servidor de directorio, obteniendo adem\u00e1s informaci\u00f3n adicional sobre dicho usuario (ruta de su carpeta personal, shell preferido, grupo/s de usuarios al que pertenece, etc) para poder asignarle los permisos adecuados. Es decir, usaremos el servidor LDAP como centro de autentificaci\u00f3n e identificaci\u00f3n de los usuarios de nuestra red. Implementaciones de servidores \u00b6 Existen varios servidores LDAP libres. Uno de los m\u00e1s extendidos es OpenLDAP ( http://www.openldap.org ) pero existen varios m\u00e1s: - Apache DS ( http://directory.apache.org/apacheds ). Incluye servidor Kerberos integrado. - 389 Directory Server ( http://www.port389.org ) . Servidor LDAP \u201cnativo\u201d de Fedora. - OpenDJ ( https://github.com/OpenIdentityPlatform/OpenDJ ) Tambi\u00e9n hay que destacar la existencia de soluciones integradas formadas por un servidor LDAP m\u00e1s otros servidores que complementan la funcionalidad de dicho servidor LDAP, facilitando en gran medida la integraci\u00f3n de todos estos servicios (muy habitualmente utilizados en conjunto) entre s\u00ed. Ejemplos son: FreeIPA : Servidor LDAP 389 Directory Server + Servidor Kerberos (tipo MIT) + Servidor DNS propio + Servidor NTP propio + Autoridad Certificadora propia +Servidor HTTP propio (para gestionarlo todo v\u00eda web). Es la soluci\u00f3n elegida por Fedora Samba4 : Servidor LDAP propio + Servidor Kerberos (tipo Heimdal) + Servidor DNS propio + Servidor NTP propio + Servidor de compartici\u00f3n de carpetas. Active Directory : \u201cSuite\u201d de servidor LDAP + Kerberos + DNS + NTP (entre otros) desarrollada por Microsoft e integrada en las versiones \u201cServer\u201d de sus sistemas Windows para poder almacenar y gestionar de forma centralizada la informaci\u00f3n de sus dominios de administraci\u00f3n (usuarios, equipos, configuraciones, permisos, etc). Autenticaci\u00f3n / Identificaci\u00f3n en la m\u00e1quina \"cliente\": \u00b6 Una vez tengamos un servidor LDAP funcionando y con un directorio llenado y accesible a trav\u00e9s de la red, ya podr\u00e1 ser consultado y / o modificado con las herramientas cliente pertinentes (tanto de tipo terminal como gr\u00e1ficas) desde una m\u00e1quina remota cualquiera sin demasiadas dificultades. Sin embargo, si lo que queremos es utilizar el contenido del directorio (concretamente, nodos de tipo \"usuario Linux\" -conteniendo todos los atributos necesarios para definirlo: UID, contrase\u00f1a, etc- y nodos de tipo \"grupo Linux\" -conteniendo todos los atributos necesarios para definirlo: GID, etc-) como origen de datos durante el proceso de inicio de sesi\u00f3n en una m\u00e1quina cliente, habr\u00e1 alterar este proceso para que cambie su origen de datos por defecto, que suele ser normalmente los archivos \"/etc/passwd,\" /etc/group \"y\" /etc/shadow\". M\u00e1s concretamente,\" cambiar el origen de datos del proceso de inicio de sesi\u00f3n en la m\u00e1quina cliente \"significa en la pr\u00e1ctica cambiar dos cosas en esta m\u00e1quina cliente: Modificar la configuraci\u00f3n de la pila de m\u00f3dulos PAM utilizados para que se emplee alg\u00fan m\u00f3dulo espec\u00edfico (hay varios que estudiaremos pr\u00f3ximamente: pam_ldap, pam_sssd ...) que haga la consulta de usuario <-> contrase\u00f1a pertinente contra un servidor LDAP convenientemente indicado. Modificar la configuraci\u00f3n del backend NSS utilizado por la librer\u00eda libc (y, por tanto, por la gran mayor\u00eda de programas de Linux) para que contacte tambi\u00e9n con el servidor LDAP adecuado y as\u00ed obtenga el resto de datos necesarios para completar la identificaci\u00f3n del usuario (UID, GID, grupos adicionales, ruta de su carpeta personal, ruta del shell por defecto, fecha de caducidad de la contrase\u00f1a, etc)","title":"Autenticaci\u00f3n/Identificaci\u00f3n de usuarios con LDAP"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Autenticaci%C3%B3n%20e%20Identificaci%C3%B3n%20de%20usuarios%20con%20LDAP/#autenticacionidentificacion-de-usuarios-con-ldap","text":"","title":"Autenticaci\u00f3n/Identificaci\u00f3n de usuarios con LDAP"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Autenticaci%C3%B3n%20e%20Identificaci%C3%B3n%20de%20usuarios%20con%20LDAP/#pam-autenticacion","text":"PAM (de \"Pluggable Authentication Modules\") es, tal como ya sabemos, un conjunto de librer\u00edas especializadas en el \u00e1mbito de la autenticaci\u00f3n que permite a los programas que hagan uso de ellas (por ejemplo: ssh, su, sudo, login, gdm, etc) poder utilizar distintos m\u00e9todos de autenticaci\u00f3n a conveniencia de forma totalmente transparente para dichos programas. Es decir: PAM permite que, sin realizar modificaciones en el c\u00f3digo de los programas, podamos utilizar m\u00e9todos que vayan desde el uso t\u00edpico de un nombre de usuario y una contrase\u00f1a, hasta dispositivos que faciliten identificaci\u00f3n biom\u00e9trica (lectores de huellas, de voz, de imagen, etc.) simplemente indic\u00e1ndoselo en determinados ficheros de configuraci\u00f3n.","title":"PAM (autenticaci\u00f3n):"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Autenticaci%C3%B3n%20e%20Identificaci%C3%B3n%20de%20usuarios%20con%20LDAP/#nss-identificacion","text":"PAM solo se encarga de la autenticaci\u00f3n: es decir, de decidir si el usuario en cuesti\u00f3n \"puede entrar\" en el sistema o no seg\u00fan si determinadas condiciones resultan correctas o no (condiciones que depender\u00e1n del m\u00e9todo utilizado pero que pueden ser, por ejemplo, -y ser\u00eda el caso m\u00e1s habitual- una combinaci\u00f3n de nombre de usuario + contrase\u00f1a). No obstante, para que el inicio de sesi\u00f3n de un usuario sea completo y dicho usuario sea reconocido como tal sin errores, el sistema debe conocer m\u00e1s datos de ese usuario. Por ejemplo, ha de saber a qu\u00e9 grupo/s pertenece ese usuario, o qu\u00e9 shell por defecto tiene, o cu\u00e1l es la ruta de su carpeta personal, o la fecha de caducidad de su contrase\u00f1a, etc. De obtener toda esta informaci\u00f3n complementaria del usuario reci\u00e9n autenticado se encarga otro conjunto de librer\u00edas llamado NSS (de \"Name Service Switch\", con ruta en /lib/libnss_* o /lib/x86_64-linux-gnu/libnss_*). En otras palabras: PAM se dedica a responder a la pregunta \"\u00bfFulanito puede entrar?\" y NSS se dedica a responder a la pregunta \"\u00bfQu\u00e9 sabemos de Fulanito?\" Normalmente, NSS obtiene la informaci\u00f3n necesaria de los archivos /etc/passwd , /etc/group y /etc/shadow porque as\u00ed est\u00e1 indicado en el archivo /etc/nsswitch.conf (en las l\u00edneas \"passwd\", \"shadow\" y \" group \", respectivamente). Por lo tanto, si no cambiamos nada del subsistema NSS y s\u00f3lo configuramos el m\u00f3dulo PAM para que la autenticaci\u00f3n se produjera, por ejemplo, contra un servidor LDAP remoto, \"nos habr\u00edamos quedado a medio camino\" para que s\u00f3lo en el caso de que el mismo nombre de usuario exista tanto dentro del servidor LDAP como dentro de los archivos /etc /passwd y / etc/shadow el inicio de sesi\u00f3n funcionar\u00eda ya que, como hemos dicho, se utilizar\u00eda el servidor LDAP para autenticar (v\u00eda PAM) y la informaci\u00f3n NSS est\u00e1ndar (v\u00eda ficheros \"/etc /passwd\" y familia) para completar la informaci\u00f3n sobre este usuario. Si lo que queremos es tener un sistema que incluya informaci\u00f3n NSS, independiente de la est\u00e1ndar (la cual, por qu\u00e9 no, podr\u00eda estar almacenada igualmente en el mismo servidor LDAP), ser\u00e1 necesario instalar un m\u00f3dulo NSS que a\u00f1ada a este subsistema la posibilidad de buscar este tipo de informaci\u00f3n en este otro origen diferente del est\u00e1ndar. Para decidir cu\u00e1l es el origen escogido entre varios posibles, las aplicaciones que hacen uso de NSS consultan primero el archivo \"/etc/nsswitch.conf\" para saber si la informaci\u00f3n sobre los usuarios la han de obtener de los ficheros locales ( \"/etc /passwd\" y \"/etc /shadow\") o bien, mediante el uso de alg\u00fan m\u00f3dulo NSS concreto previamente instalado, la han de obtener de alguna base de datos remota como podr\u00eda ser un servidor LDAP (o, por qu\u00e9 no, complementar ambos or\u00edgenes para que si falla el predeterminado utilice el otro). Nota En realidad, el subsistema NSS es un mecanismo mucho m\u00e1s global que sirve para escoger otros or\u00edgenes de informaci\u00f3n que no tienen nada que ver con \"caracter\u00edsticas de usuarios\". para conocer la correspondencia entre nombres de m\u00e1quinas y su ip, las \u201caplicaciones NSS\u201d consultar\u00e1n /etc/nswitch.conf para saber si primero han de consultar en un servidor DNS o bien pueden obtener la informaci\u00f3n del fichero /etc/hosts, o bien pueden complementar ambos or\u00edgenes en un orden determinado. Aix\u00ed doncs, en general, el que permet el subsistema NSS es que las aplicaciones que hayan sido programadas haciendo uso de \u00e9l puedan utilizar de forma coherente y com\u00fan un conjunto de or\u00edgenes de datos conteniendo los nombres de distintos \u00edtems, (como m\u00e1quinas, redes, nombres de protocolos, usuarios, grupos, etc.) que dichas aplicaciones necesitan. Nota Una altra avantatge de qu\u00e8 una aplicaci\u00f3 faci servir NSS \u00e9s que poden obtenir la informaci\u00f3 que necessiten (nombres de usuarios y sus contrase\u00f1as, nombres de m\u00e1quinas, de redes, de protocolos, etc) preguntando directamente a NSS (y \u00e9ste utilizando la librer\u00eda concreta adecuada seg\u00fan lo que se encuentre en /etc/nsswitch.conf) sin tener que conocer el lugar exacto donde est\u00e1 almacenada, (ya que para obtenerla ya se encarga NSS) Un ejemplo de archivo \"/etc/nswitch.conf\" muy simple ser\u00eda el siguiente: passwd: files group: files shadow: files hosts: files dns networks: files protocols: files services: files ethers: files ...donde principalmente se indica (mediante la l\u00ednea passwd:...) que la base de datos de usuarios que se va a utilizar es el fichero local /etc/passwd (gracias al valor files), que la base de datos de grupos es el fichero local /etc/group (mediante la l\u00ednea group:...), que la de contrase\u00f1as es el fichero local /etc/shadow (mediante la l\u00ednea shadow:...) y que la de nombres de m\u00e1quinas ser\u00e1 (gracias a la l\u00ednea hosts:...) en primera instancia el fichero local /etc/hosts (ver man hosts para m\u00e1s informaci\u00f3n sobre este fichero, o tambi\u00e9n http://en.wikipedia.org/wiki/Hosts_%28file%29 ), y, si no se encuentra el nombre all\u00ed, entonces se proceder\u00e1 (ya que tras \u201cfiles\u201d est\u00e1 el valor \u201cdns\u201d) a realizar una b\u00fasqueda DNS en los servidores configurados en /etc/resolv.conf Nota Las otras l\u00edneas del archivo /etc/nsswitch.conf no son tan utilizadas pero las comentamos aqu\u00ed: la l\u00ednea networks indica que los nombres de redes se buscar\u00e1n en el fichero local /etc/networks (ver man networks para m\u00e1s informaci\u00f3n sobre este fichero), la l\u00ednea protocols indica que los nombres de los protocolos se buscar\u00e1n en el fichero local /etc/protocols (ver man protocols para m\u00e1s informaci\u00f3n sobre este fichero), la l\u00ednea services indica que los nombres de los servicios se buscar\u00e1n en el fichero local /etc/services (ver man services para m\u00e1s informaci\u00f3n sobre este fichero) y la l\u00ednea ethers indica que la correspondencia est\u00e1tica entre direcciones MAC e IPs se buscar\u00e1 en el fichero local /etc/ethers (ver man ethers para m\u00e1s informaci\u00f3n sobre este fichero).","title":"NSS (identificaci\u00f3n):"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Autenticaci%C3%B3n%20e%20Identificaci%C3%B3n%20de%20usuarios%20con%20LDAP/#ldap","text":"LDAP (\u201cLightweight Directory Access Protocol\u201d) es un protocolo de nivel de aplicaci\u00f3n que permite acceder a un \u201cservidor de directorio\u201d. Por \u201cdirectorio\u201d se entiende un conjunto de datos organizados de una manera l\u00f3gica y jer\u00e1rquica en forma de elementos llamados \u201centradas\u201d, los cuales poseen diversos atributos. Cada entrada representa un objeto que puede ser abstracto o real (una persona, un mueble, una funci\u00f3n en la estructura de una empresa, etc). La utilidad de un servidor de directorio radica en ofrecer dichos objetos a la red de una forma centralizada (y, opcionalmente, transparentemente distribuida). Se puede entender que un servidor de directorio pueda ser equivalente a un servidor de bases de datos, pero su sistema de almacenamiento es diferente y su manera de consultar y manipular la informaci\u00f3n contenida en \u00e9l tambi\u00e9n. Aunque no tiene por qu\u00e9 ser as\u00ed siempre, el tipo de informaci\u00f3n que suele encontrarse en la mayor\u00eda de ocasiones en un servidor LDAP es t\u00edpicamente aquella relacionada con la autenticaci\u00f3n e identificaci\u00f3n centralizada de usuarios (nombre, contrase\u00f1a, uid, grupo, permisos, etc), o con la autenticaci\u00f3n e identificaci\u00f3n centralizada de m\u00e1quinas (nombre, direcci\u00f3n MAC, direcci\u00f3n IP, etc). Tambi\u00e9n puede contener informaci\u00f3n complementaria de usuarios (correo, tel\u00e9fonos, direcci\u00f3n, etc) o configuraciones centralizadas de aplicaciones y certificados, etc. Para definir los atributos que tendr\u00e1n las entradas almacenadas en un servidor LDAP podemos hacer uso de las llamadas \u201cReglas de Esquema\u201d. \u00c9stas son plantillas que especifican qu\u00e9 atributos formar\u00e1n la entrada de forma obligatoria y cu\u00e1les de forma optativa (a modo de \u201cesqueleto\u201d de la entrada). La/s \u201cRegla/s de Esquema\u201d concreta/s utilizada/s por una entrada determinada (porque una entrada puede tener asociadas varias reglas, acumul\u00e1ndose entonces en la entrada todos los atributos presentes en cada una de ellas) se indica/n mediante un atributo especial de la entrada llamado \"objectClass\"; el valor de este atributo representa una Regla elegida (si hay varias, cada una se especificar\u00e1 en un atributo \"objectClass\" diferente). Lo m\u00e1s normal es asignar al atributo \"objectClass\" de una entrada el nombre de una Regla ya predefinida a escoger de entre un conjunto de Reglas estandarizadas que ofrece todos los servidores LDAP; tambi\u00e9n podr\u00edamos crear nuestras propias Reglas de Esquema (o modificar alguna existente; para m\u00e1s informaci\u00f3n sobre c\u00f3mo hacer ambas cosas consultar por ejemplo http://www.zytrax.com/books/ldap/ch3 ), pero no suele ser necesario porque las Reglas predefinidas cubren la mayor\u00eda de casos pr\u00e1cticos y son oficiales. Nota NOTA: En el caso de carecer de atributo \u201cuid\u201d, el atributo que suele hacer de identificador de la entrada suele ser \u201ccn\u201d. Nota NOTA: Una Regla que TODOS las entradas de un \u00e1rbol de directorio han de implementar (mediante su correspondiente atributo \"objectClass\"), independientemente del resto de Reglas que se deseen a\u00f1adir en cada una de ellas, es una Regla llamada \"top\". Al implementar esta Regla en una entrada lo que se consigue es que esa entrada pueda disponer precisamente del atributo \"objectClass\" (es decir, el atributo \"objectClass\" est\u00e1 definido en la Regla \"top\", a modo de definici\u00f3n recursiva). Las entradas se organizan en una estructura jer\u00e1rquica en forma de \u00e1rbol invertido. Tradicionalmente,la parte superior de esta estructura refleja la jerarqu\u00eda de los dominios DNS (incluso regionales) de la organizaci\u00f3n, de manera que las entradas que representan a la compa\u00f1\u00eda (como \u201cpepsi.com\u201d, \u201cunicef.org\u201d o \u201cyahoo.es\u201d) aparecen en el \u00e1rbol por encima de otras entradas que representan unidades organizativas internas. Las primeras suelen identificarse por la presencia del atributo \u201cdc\u201d (domain component), y para cada subdominio hay una (dc=\u201dpepsi\u201d y dc=\u201dcom\u201d para \u201cpepsi.com\u201d, dc=\u201dunicef\u201d y dc=\u201dorg\u201d para \u201cunicef.org\u201d, etc). Dentro de las \u00faltimas es donde se encuentra la informaci\u00f3n relativa a usuarios, m\u00e1quinas, documentos o cualquier otra cosa que queramos. Sea del tipo que sea (\u201cdomain component\u201d o no) y represente lo que represente, toda entrada posee un \u00fanico \u201cNombre Distinguido\u201d -\u201cDistinguised Name\u201d (DN)-, que sirve para identificarla de manera un\u00edvoca. El DN, de hecho, se construye a partir del identificador de la entrada en s\u00ed misma (lo que se llama \u201cNombre Relativo Distinguido\u201d -\u201dRelative Distinguished Name\u201d (RDN)-, y que suele ser el valor de su atributo \u201cuid\u201d o bien \u201ccn\u201d -o \u201cou\u201d en el caso de las unidades organizativas-) concatenado con los identificadores de las entradas de sus antecesores separados por comas. Por ejemplo: si el DN de una entrada es \u201cuid=pperez,ou=empleados,dc=nike,dc=es\u201d, nos estaremos refiriendo a una entrada (cuyo RDN es \u201cuid=pperez\u201d) que contiene informaci\u00f3n sobre el empleado Pperez perteneciente a la secci\u00f3n espa\u00f1ola de Nike. Para conocer toda esa informaci\u00f3n, deber\u00edamos observar el resto de atributos de esa entrada (objetClass, cn, givenname, sn, o,mail ...). Nota Una explicaci\u00f3n m\u00e1s pormenorizada sobre c\u00f3mo se organiza la estructura en \u00e1rbol de un directorio LDAP se encuentra en https://fy.blackhats.net.au/blog/html/pages/ldap_guide_part_1_foundations.html LDAP tiene definidas las operaciones necesarias para interrogar y actualizar el directorio (adicionar y borrar una entrada, modificar una entrada existente, cambiar el nombre de una entrada, etc). No obstante, la mayor parte del tiempo LDAP se utiliza para buscar informaci\u00f3n almacenada en el directorio: las operaciones de b\u00fasqueda permiten que en una porci\u00f3n del directorio se busquen entradas que cumplan con alg\u00fan criterio especificado en el filtro de b\u00fasqueda. Algunos servidores de directorio no tienen protecci\u00f3n y permiten que cualquier persona consulte la informaci\u00f3n que contienen, pero LDAP provee un mecanismo para que los clientes se autentiquen, (o al menos confirmen su identidad) para garantizar un control de acceso y proteger as\u00ed la informaci\u00f3n que el servidor contiene. Nosotros utilizaremos la infrastructura LDAP para poder loguearnos en un PC mediante un usuario y contrase\u00f1a guardados en forma de entrada dentro de un servidor de directorio, obteniendo adem\u00e1s informaci\u00f3n adicional sobre dicho usuario (ruta de su carpeta personal, shell preferido, grupo/s de usuarios al que pertenece, etc) para poder asignarle los permisos adecuados. Es decir, usaremos el servidor LDAP como centro de autentificaci\u00f3n e identificaci\u00f3n de los usuarios de nuestra red.","title":"LDAP"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Autenticaci%C3%B3n%20e%20Identificaci%C3%B3n%20de%20usuarios%20con%20LDAP/#implementaciones-de-servidores","text":"Existen varios servidores LDAP libres. Uno de los m\u00e1s extendidos es OpenLDAP ( http://www.openldap.org ) pero existen varios m\u00e1s: - Apache DS ( http://directory.apache.org/apacheds ). Incluye servidor Kerberos integrado. - 389 Directory Server ( http://www.port389.org ) . Servidor LDAP \u201cnativo\u201d de Fedora. - OpenDJ ( https://github.com/OpenIdentityPlatform/OpenDJ ) Tambi\u00e9n hay que destacar la existencia de soluciones integradas formadas por un servidor LDAP m\u00e1s otros servidores que complementan la funcionalidad de dicho servidor LDAP, facilitando en gran medida la integraci\u00f3n de todos estos servicios (muy habitualmente utilizados en conjunto) entre s\u00ed. Ejemplos son: FreeIPA : Servidor LDAP 389 Directory Server + Servidor Kerberos (tipo MIT) + Servidor DNS propio + Servidor NTP propio + Autoridad Certificadora propia +Servidor HTTP propio (para gestionarlo todo v\u00eda web). Es la soluci\u00f3n elegida por Fedora Samba4 : Servidor LDAP propio + Servidor Kerberos (tipo Heimdal) + Servidor DNS propio + Servidor NTP propio + Servidor de compartici\u00f3n de carpetas. Active Directory : \u201cSuite\u201d de servidor LDAP + Kerberos + DNS + NTP (entre otros) desarrollada por Microsoft e integrada en las versiones \u201cServer\u201d de sus sistemas Windows para poder almacenar y gestionar de forma centralizada la informaci\u00f3n de sus dominios de administraci\u00f3n (usuarios, equipos, configuraciones, permisos, etc).","title":"Implementaciones de servidores"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Autenticaci%C3%B3n%20e%20Identificaci%C3%B3n%20de%20usuarios%20con%20LDAP/#autenticacion-identificacion-en-la-maquina-cliente","text":"Una vez tengamos un servidor LDAP funcionando y con un directorio llenado y accesible a trav\u00e9s de la red, ya podr\u00e1 ser consultado y / o modificado con las herramientas cliente pertinentes (tanto de tipo terminal como gr\u00e1ficas) desde una m\u00e1quina remota cualquiera sin demasiadas dificultades. Sin embargo, si lo que queremos es utilizar el contenido del directorio (concretamente, nodos de tipo \"usuario Linux\" -conteniendo todos los atributos necesarios para definirlo: UID, contrase\u00f1a, etc- y nodos de tipo \"grupo Linux\" -conteniendo todos los atributos necesarios para definirlo: GID, etc-) como origen de datos durante el proceso de inicio de sesi\u00f3n en una m\u00e1quina cliente, habr\u00e1 alterar este proceso para que cambie su origen de datos por defecto, que suele ser normalmente los archivos \"/etc/passwd,\" /etc/group \"y\" /etc/shadow\". M\u00e1s concretamente,\" cambiar el origen de datos del proceso de inicio de sesi\u00f3n en la m\u00e1quina cliente \"significa en la pr\u00e1ctica cambiar dos cosas en esta m\u00e1quina cliente: Modificar la configuraci\u00f3n de la pila de m\u00f3dulos PAM utilizados para que se emplee alg\u00fan m\u00f3dulo espec\u00edfico (hay varios que estudiaremos pr\u00f3ximamente: pam_ldap, pam_sssd ...) que haga la consulta de usuario <-> contrase\u00f1a pertinente contra un servidor LDAP convenientemente indicado. Modificar la configuraci\u00f3n del backend NSS utilizado por la librer\u00eda libc (y, por tanto, por la gran mayor\u00eda de programas de Linux) para que contacte tambi\u00e9n con el servidor LDAP adecuado y as\u00ed obtenga el resto de datos necesarios para completar la identificaci\u00f3n del usuario (UID, GID, grupos adicionales, ruta de su carpeta personal, ruta del shell por defecto, fecha de caducidad de la contrase\u00f1a, etc)","title":"Autenticaci\u00f3n / Identificaci\u00f3n en la m\u00e1quina \"cliente\":"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Compartir%20ficheros%20con%20NFSv4/","text":"Compartir ficheros con NFSv4 \u00b6 Servidor \u00b6 En Ubuntu debemos instalar el paquete \"nfs-kernel-server\" \"y en Fedora el paquete \"nfs-utils\" (y opcionalmente el paquete \"nfs4-acl-tools\" que estudiaremos m\u00e1s adelante). Para comprobar si est\u00e1 bien instalado, deber\u00eda aparecer nfs4 -y si es servidor, tambi\u00e9n nfsd - en la salida del comando cat /proc/filesystems (Comando que sirve para listar los sistemas de archivos reconocidos por el sistema) Nota En Fedora hay un paquete llamado \"ganesha-nfs\" que ofrece un servidor NFS diferente del cl\u00e1sico (no lo veremos) Nota Para desactivar la capacidad de utilizar las versiones anteriores de NFS (v2 y v3) en nuestro servidor -recomendable-, hay que tener las l\u00edneas vers2 = n y vers3 = n bajo la secci\u00f3n [nfsd] del archivo /etc/nfs.conf Para compartir carpetas debemos modificar el contenido de un archivo (que puede no existir inicialmente) llamado /etc/exports (o a\u00f1adir uno o m\u00e1s archivos con extensi\u00f3n \".exports\" dentro de la carpeta /etc/exports.d ). El contenido del archivo /etc/exports (o los ubicados dentro de /etc/exports.d ) debe ser una l\u00ednea para cada carpeta que se quiera compartir ( \"exportar\"). El formato de la l\u00ednea es as\u00ed: /ruta/carp/compartida nomDNS.maquina.desdedondese.accede (opciones) otram\u00e1quina (opciones) donde: En lugar del nombre DNS de la m\u00e1quina cliente permitida (el cual puede incluir los comodines *, ? y [ ]) se puede especificar su IP, o bien indicar redes completas con el formato ipRed/Mascara Despu\u00e9s de cada nombre / ip de m\u00e1quina / red deben aparecer las opciones de compartici\u00f3n; si hay varias se separan por comas, todas ellas dentro del par\u00e9ntesis. ATENCI\u00d3N no se debe dejar ning\u00fan espacio en blanco entre el nombre / ip de m\u00e1quina / red y el par\u00e9ntesis de apertura: si se deja, querr\u00e1 decir que estas opciones valen para todos los clientes y para el nombre / ip escrito aplicar\u00e1n las opciones por defecto. Si la l\u00ednea es demasiado larga se puede partir con el caracter . Las opciones m\u00e1s importantes son (se pueden consultar muchas m\u00e1s en man exports ): OPCION FUNCION ro Exportar en modo de s\u00f3lo lectura. Este es el modo por defecto. rw Exportar en modo de lectura / escritura. Esto s\u00f3lo significa que se aplicar\u00e1n los permisos subyacentes de propietario, grupo y otros que tenga cada fichero exportado en particular. es decir, aunque hayamos especificado \"rw\" a una determinada carpeta en el archivo /etc/exports , no podremos escribir en ella si no tenemos adem\u00e1s permisos de escritura sobre su punto de montaje al cliente (permisos que, de hecho, son copia de los permisos \"Reales\" de la carpeta en el servidor y que el cliente no se pueden modificar). sync En una escritura, el servidor NFS no responde al cliente hasta que los cambios no se han realizado f\u00edsicamente en disco. Este es el modo por defecto. async En una escritura, el servidor NFS responde al cliente antes de que los cambios se hayan realizado f\u00edsicamente en disco. Esto permite un mejor rendimiento a costa de poder perder la integridad de los datos en un reinicie inesperado del servidor. Info El propietario y su grupo (y, como consecuencia, \"los otros\" y todos sus correspondientes permisos) que la m\u00e1quina cliente \"ve\" asociados a cada archivo exportado por el servidor son el propietario y grupo que en la m\u00e1quina cliente tenga su mismo UID y GID que el propietario y grupo \"reales\" del archivo en la m\u00e1quina servidora. Esto quiere decir si en la m\u00e1quina cliente no hay ning\u00fan usuario que tenga un UID / GID igual al del propietario / grupo \"real\" en el servidor, el archivo en cuesti\u00f3n no se reconocer\u00e1 con propietario / grupo v\u00e1lido. Por otra parte, en el caso de que la carpeta exportada tenga unos permisos que permitan escribir dentro, \u00bfqui\u00e9n ser\u00e1 el propietario / grupo \"real\", en el servidor, de un fichero creado por un usuario local del cliente? depende de las siguientes opciones: OPCION FUNCION all_squash Los archivos creados por cualquier usuario de la m\u00e1quina cliente tendr\u00e1n como propietario / grupo \"Real\" en el servidor del usuario \"nobody\" (con UID especial 65534). no_all_squash Los archivos creados por cualquier usuario de la m\u00e1quina cliente tendr\u00e1n como propietario / grupo \"Real\" en el servidor del usuario que all\u00ed tenga el mismo UID / GID (si no hay ninguno, el archivo en cuesti\u00f3n no se reconocer\u00e1 con propietario / grupo v\u00e1lido. Esta es la opci\u00f3n por defecto. root_squash Los archivos creados por el usuario \"root\" de la m\u00e1quina cliente tendr\u00e1n como propietario / grupo \"Real\" en el servidor del usuario \"nobody\" (con UID especial 65534). Esta es la opci\u00f3n por defecto. no_root_squash Los archivos creados por el usuario \"root\" de la m\u00e1quina cliente tendr\u00e1n como propietario / grupo \"Real\" en el servidor del usuario \"root\" del servidor. Esta opci\u00f3n es \u00fatil sobre todo para facilitar el arranque de sistemas PXE. anonuid = 655 En el caso de utilizar las opciones \"all_squash\" y / o \"root_squash\", permite especificar como usuario \"nobody\" uno con un UID concreto, distinto del predeterminado. anongid = 655 En el caso de utilizar las opciones \"all_squash\" y / o \"root_squash\", permite especificar como grupo \"nobody\" uno con un GID concreto, distinto del predeterminado. fsid = 0 Esta opci\u00f3n define la carpeta compartida que ser\u00e1 la ra\u00edz a partir de la cual se compartir\u00e1 todo lo que cuelgue de ella. S\u00f3lo puede haber una carpeta compartida con esta caracter\u00edstica. Si se quiere compartir alguna otra carpeta (la llamaremos \"/opt/otra\") que no est\u00e9 f\u00edsicamente dentro de la marcada como fsid = 0 (la llamaremos \"/Var/unacarpeta\"), tenemos que hacer unos pasos previos: -Debemos montar \"/opt/unaaltra\" dentro de \"/var/unacarpeta/unasubcarpeta\" (que supondremos inicialmente vac\u00eda), de forma que podamos acceder a la primera a trav\u00e9s de la segunda. Esto se puede hacer de dos maneras: la primera es temporal hasta que se reinicie la m\u00e1quina servidora y la segunda es permanente. La primera consiste en ejecutar el comando: mount --bind /opt/otra/var/unacarpeta/unasubcarpeta La segunda consistir\u00eda en a\u00f1adir una l\u00ednea tal como la siguiente al final del archivo de texto /etc/fstab (Ver m\u00e1s adelante para una explicaci\u00f3n m\u00e1s profunda de este archivo): /opt/otra nohide crossmnt /var/unacarpeta/unasubcarpeta none bind 0 0 2.-Una vez hecho este montaje de tipo \"bind\", tenemos que a\u00f1adir una l\u00ednea en /etc/exports indicando que se quiere compartir /var/unacarpeta/unasubcarpeta ; en esta l\u00ednea es obligatorio indicar la opci\u00f3n \"nohide\" (explicada seguidamente). OPCION FUNCION nohide Si se comparte una carpeta A como fsid = 0 dentro de la cual hay una subcarpeta B montada dentro de A con la opci\u00f3n --bind, para compartir expl\u00edcitamente la carpeta B en /Etc/exports se debe especificar esta opci\u00f3n; si no se hace (o si se especifica la opci\u00f3n \"hide\"),B aparecer\u00e1 vac\u00eda a los clientes. crossmnt Poner \"crossmnt\" en A equivale a poner \"nohide\" en B (y en todas las otras posibles subcarpetas que est\u00e9n montadas bajo A con --bind Una vez configurado el archivo /etc/exports , ya podemos iniciar el servicio con el comando sudo systemctl start nfs-kernel-server (Ubuntu) o sudo systemctl start nfs-server (en Fedora). Recordemos que cada vez que modificamos el archivo /etc/exports tendremos que reiniciar el servidor. Nota El puerto en el que escucha un servidor NFS es en el 2049 (tcp); hay que tenerlo en cuenta por el cortafuegos. Una manera r\u00e1pida de abrir el puerto en cuesti\u00f3n ser\u00eda ejecutar (en Fedora), los siguientes comandos: sudo firewall-cmd --add-service = nfs --permanent && sudo firewall-cmd --reload El comando sudo exportfs muestra una lista de los sistemas exportados actualmente (a\u00f1adiendo el par\u00e1metro -v lo hace en modo verboso). Tambi\u00e9n se puede usar su par\u00e1metro -r para hacer lo mismo que sudo systemctl reload nfs-kernel-server Otros par\u00e1metros importantes de este comando son: El par\u00e1metro -u ipClient:/rutaCarpeta : permite desactivar la compartici\u00f3n de una carpeta concreta. El par\u00e1metro -o opc, iones ipClient::/rutaCarpeta : a\u00f1ade \"al vuelo\" una nueva compartici\u00f3n (que durar\u00e0 hasta el pr\u00f3ximo reinicio del servidor) para el cliente y las opciones indicadas El par\u00e1metro -i -o opc, iones ipClient:/rutaCarpeta : ignora completamente el archivo /etc/exports y entonces s\u00f3lo comparte la carpeta indicada. Esto servir\u00eda para hacer pruebas r\u00e1pidas sin tener que tocar el archivo /etc/exports . El comando nfsstat muestra estad\u00edsticas de uso del servidor. Cliente \u00b6 En Ubuntu debemos instalar el paquete nfs-common y en Fedora el paquete nfs-utils . Para comprobar si est\u00e1 bien instalado, deber\u00eda aparecer \"nfs4\" al ejecutar cat /proc/filesystems (comando que sirve para listar los sistemas de ficheros reconocidos por el sistema) Para ver qu\u00e9 carpetas compartidas tiene un servidor, se puede ejecutar: showmount -e ipservidor Para acceder a una carpeta compartida por el servidor (si no es fsid = 0), el cliente debe montarla previamente as\u00ed: sudo mount -t nfs4 ipservidor:/ruta/carpeta/compartida/al/servidor /punto/local/de/montaje Nota En vez de mount -t nft4 se puede usar el alias mount.nfs4. Para acceder a la carpeta compartida por el servidor con fsid = 0 (es decir, en la carpeta ra\u00edz, o dicho de otro manera, en la carpeta \"/\"), el cliente debe montar previamente: mount -t nfs4 ipservidor://punto/local/de/montaje Para acceder a una carpeta compartida montada en el servidor con el m\u00e9todo \"bind\" bajo la carpeta ra\u00edz (es decir, bajo la marcada con fsid = 0), tendremos que indicar su ruta relativa desde esta carpeta ra\u00edz (pero, eso s\u00ed, indicando la \"/\" inicial). Por ejemplo, si la carpeta ra\u00edz es /var/unacarpeta y se quiere compartir la carpeta /opt/unaaltra que est\u00e1 montada en el servidor dentro /var/unacarpeta/unasubcarpeta , el cliente debe montarla as\u00ed: mount -t nfs4 ipservidor:/unasubcarpeta /punto/local/de/montaje En cualquier caso, para comprobar si el montaje se ha realizado correctamente, podemos ejecutar el comando findmnt o bien el comando df . En ambos casos tendremos que ver la presencia del nuevo punto de montaje, al que podremos acceder normalmente v\u00eda cd, listar su contenido v\u00eda ls, etc. A la hora de hacer el montaje con el comando mount, se pueden indicar diferentes opciones espec\u00edficas de NFS4 con el par\u00e1metro -o (ver man nfs para muchas m\u00e1s) ...: Nota Estas opciones tambi\u00e9n se pueden escribir dentro del archivo /etc/nfsmount.conf (ver man nfsmount.conf para mas informaci\u00f3n) Opci\u00f3n Funci\u00f3n retry=n Indica los minutos durante los que se intentar\u00e1 montar una carpeta mientras no se consiga se sigue intentando hasta que se acabe el tiempo timeo=n en una operaci\u00f3n de lectura / escritura, indica las d\u00e9cimas de segundos que el cliente esperar\u00e1 a recibir una respuesta del servidor antes de volver a intentar la misma operaci\u00f3n. Por defecto es 600 timeo=n en una operaci\u00f3n de lectura / escritura, indica las d\u00e9cimas de segundos que el cliente esperar\u00e1 a recibir una respuesta del servidor antes de volver a intentar la misma operaci\u00f3n. Por defecto es 600 retrans=n En una operaci\u00f3n de lectura / escritura, indica el n\u00famero de veces que el cliente intentar\u00e1 realizar la misma operaci\u00f3n. Por defecto es 3 soft / hard Al llegar al l\u00edmite de intentos indicado por la opci\u00f3n retrans, el valor \"soft\" hace que el cliente desista de continuar realizando la operaci\u00f3n de lectura / escritura pendiente. El valor \"hard\", en cambio, hace que el cliente vuelva a intentarlo indefinidamente (en otras palabras, mantiene la petici\u00f3n del cliente aunque el servidor est\u00e9 ca\u00eddo, para seguirla cuando \u00e9ste recomience). Por defecto es \"hard\". wsize = n / rsize = n Indica el n\u00famero (m\u00faltiple de 1024, y como m\u00e1ximo 1.048.576) de bytes que se pueden escribir / leer como m\u00e1ximo en una sola operaci\u00f3n. Por defecto los valores son autonegociados entre cliente y servidor. Este dato afecta al rendimiento. port = 2055 Conecta a un servidor NFS que est\u00e1 escuchando a otro puerto diferente del est\u00e1ndar (2049) ... adem\u00e1s de las opciones generales que aporta el comando mount (ver man mount para muchas m\u00e1s), como: Opci\u00f3n Funci\u00f3n ro Monta en modo de solo lectura (Read Only), por defecto los montajes se hacen en modo lectura/escritura (\"rw\") noatime No cambia la fecha de \u00faltimo acceso a los archivos. Esta fecha se guarda junto con m\u00e1s datos (como la fecha de \u00faltima modificaci\u00f3n, o la de creaci\u00f3n, etc) en una \"base de datos\" de ficheros llamadas \"inodes\". Por defecto (opci\u00f3n \"ATIME\"), en cada acceso a un archivo la fecha de \u00faltimo acceso se cambia, pero con esta opci\u00f3n esto no se hace, acelerando as\u00ed el acceso al disco. nodiratime No cambia la fecha de \u00faltimo acceso a los directorios. La opci\u00f3n contraria (y por defecto) es \" diratime \". Nota Por ejemplo, el comando mount.nfs4 -o ro, port=2000,soft,retry=4 ip:/ruta/remota /ruta/local monta en \"/ruta/local\" la carpeta \"/ruta/remota\" existente en el servidor \"ip\" en modo s\u00f3lo lectura (ro), conect\u00e1ndose al puerto 2000 del servidor y estableciendo el n\u00famero de intentos para realizar las operaciones en 4, despu\u00e9s de los cuales, se informar\u00e1 de error y no se continuar\u00e1 intent\u00e1ndolo. No obstante, tener que escribir el comando mount a mano cada vez que queremos acceder a una carpeta compartida no es muy pr\u00e1ctico (adem\u00e1s de que lo tenemos que hacer como administrador). Lo m\u00e1s habitual es montar durante el arranque del cliente las carpetas compartidas que se quieran utilizar para tenerlas as\u00ed disponibles inmediatamente por cualquier usuario del sistema cliente que inicie sesi\u00f3n (sea o no administrador), sin tener que hacer nada. Para hacer esto, el cliente debemos modificar un archivo de texto llamado /etc/fstab . Este archivo, de hecho, no es \u00fanicamente utilizado para NFS, sino que es mucho m\u00e1s general: contiene todos los tipos de almacenes a montar en el arranque del sistema (particiones locales, carpetas Samba, etc, etc). Cada l\u00ednea de este archivo consta de seis campos separados por un espacio en blanco o un tabulador (para m\u00e1s informaci\u00f3n, consultar man fstab ): El 1\u00ba campo indica la partici\u00f3n / carpeta compartida concreta que deber\u00e1 montar durante el arranque del sistema operativo (por ejemplo, la partici\u00f3n local /dev/sda1 o una carpeta compartida remota NFS) El 2\u00ba campo indica la ruta de la carpeta que funcionar\u00e1 como su punto de montaje local El 3\u00ba campo indica el sistema de archivos en los que est\u00e1 formateada la partici\u00f3n / carpeta compartida (Valores posibles son: ext4, xfs, jfs, vfat -por \"fat32\" -, ntfs, swap, o auto -por no especificar ning\u00fan sistema en concreto y que el fstab el determine \u00e9l solo en el momento del montaje ... esta opci\u00f3n es \u00fatil para lectores de unidades extra\u00edbles como CD / DVDs que pueden contener diferentes sistemas de ficheros dependiendo de la unidad introducida-) El 4\u00ba campo indica las opciones de montaje se aplican (separadas por comas) El 5\u00ba campo actualmente no se utiliza y casi siempre vale 0 El 6\u00ba campo indica si el comando fsck se ejecutar\u00e1 al reiniciar el sistema cuando se monte esta partici\u00f3n / carpeta compartida (un valor 0 significa que no se comprueba el sistema de ficheros, un valor 1 quiere decir que s\u00ed y un valor 2 significa que s\u00ed, pero despu\u00e9s de haber comprobado las particiones marcadas con valor 1; normalmente la partici\u00f3n ra\u00edz del sistema debe tener un 1 mientras el resto de particiones puede tener un 0 o un 2) .Las opciones de montaje pueden ser cualquiera de las opciones espec\u00edficas de NFS4 (las listadas en man nfs ) o bien cualquiera de las generales del comando mount (es decir, las que est\u00e1n listadas en man mount ). Entre estas \u00faltimas, hay algunas que tienen m\u00e1s sentido dentro de \"/etc/fstab\" que en un comando mount normal: Opci\u00f3n Funci\u00f3n auto Indica que la partici\u00f3n / carpeta compartida correspondiente se montar\u00e1 autom\u00e1ticamente durante el arranque. En otras palabras: es la manera \"de activar\" esta l\u00ednea. La opci\u00f3n contraria es \"noauto\", que sirve para \"desactivar\" la l\u00ednea sin tener que borrarla, haciendo que s\u00f3lo se pueda montar la partici\u00f3n / carpeta compartida correspondiente de forma manual con el comando mount o bien s\u00ed se combina con la opci\u00f3n \"x-systemd.automount\" (ver m\u00e1s abajo) exec Permite que se puedan ejecutar los binarios existentes en la partici\u00f3n / carpeta compartida correspondiente. La opci\u00f3n contraria es \"noexec\". suid Permite reconocer el permiso especial \"suid\" en los binarios existentes en la partici\u00f3n / carpeta compartida correspondiente. Este permiso especial se utiliza para permitir a usuarios que no son administradores ejecutar binarios que en teor\u00eda s\u00f3lo podr\u00eda ejecutar el usuario administrador (como el binario passwd , por ejemplo). La opci\u00f3n contraria es \" nosuid \" dev Permite reconocer los archivos de dispositivos que puedan existir en la partici\u00f3n / carpeta compartida correspondiente. La opci\u00f3n contraria es \"nodev\". user Permite que cualquier usuario (sin ser administrador) pueda montar con el comando mount la partici\u00f3n / carpeta compartida correspondiente (pero s\u00f3lo el usuario que lo haya montado la podr\u00e1 desmontar). Esta opci\u00f3n implica \"noexec\", \"nosuid\" y \"nodev\", a no ser que se indique lo contrario. La opci\u00f3n contraria (es decir, que s\u00f3lo el usuario root pueda montar la partici\u00f3n / carpeta compartida correspondiente) es \"nouser\" users Permite que cualquier usuario (sin ser administrador) pueda montar con el comando mount la partici\u00f3n / carpeta compartida correspondiente, y tambi\u00e9n que cualquier otro usuario (o el mismo) la pueda desmontar. Esta opci\u00f3n implica \"noexec\", \"nosuid\" y \"nodev\", a no ser que se indique lo contrario. sync Hace que las escrituras a la partici\u00f3n / carpeta compartida correspondiente se realicen de forma s\u00edncrona (es decir, que se apliquen inmediatamente) .La opci\u00f3n contraria es \"async\", lo cual implica que las escrituras se realicen de forma as\u00edncrona (es decir, que todas las escrituras se apliquen de golpe pasado un tiempo determinado). Estas opciones en NFS no se utilizan porque no se establecen en el cliente sino en el servidor a la hora de compartir la carpeta dentro de \"/etc/exports\" (Son opciones hom\u00f3nimas, de hecho). defaults Equivale a \"rw\", \"suid\", \"dev\", \"exec\", \"auto\", \"nouser\" y \"async\" x-systemd.automount Esta opci\u00f3n se debe escribir junto con la opci\u00f3n \"noauto\". Sirve para no montar la partici\u00f3n / carpeta compartida correspondiente en el arranque del sistema sino cuando el usuario quiera acceder por primera vez (el retraso es imperceptible). esto permite no tener montadas unidades que quiz\u00e1s el usuario no utilizar\u00e1 en esa sesi\u00f3n, y adem\u00e1s permite no obtener errores al arrancar el cliente si en ese momento el servidor no est\u00e1 disponible. Se puede utilizar adem\u00e1s la opci\u00f3n \"x-systemd.device-timeout = n\", donde n es el n\u00famero de segundos que el cliente intentar\u00e1 montar el dispositivo antes de abandonar (porque \u00e9ste no est\u00e9 disponible, por ejemplo). No obstante, s\u00f3lo funciona para sistemas con systemd. En el caso concreto de montar carpetas compartidas NFS, el primer campo (que, recordemos, representa el recurso a montar) se escribe indicando la ip/nombre del servidor NFS seguido de \":\" y de la ruta en el servidor de la carpeta compartida a la que se quiere acceder (que ser\u00e1 \"/\" en el caso de ser la carpeta fsid = 0 o \"/unasubcarpeta\" si \"unasubcarpeta\" es el punto de montaje -bind bajo ella). Por lo tanto, un ejemplo de archivo /etc/fstab para un cliente NFS podr\u00eda ser este: ipServ:/ruta/comp/servidor /punto/montaje nfs4 noauto,x-systemd.automount 0 0","title":"Compartir ficheros con NFSv4"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Compartir%20ficheros%20con%20NFSv4/#compartir-ficheros-con-nfsv4","text":"","title":"Compartir ficheros con NFSv4"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Compartir%20ficheros%20con%20NFSv4/#servidor","text":"En Ubuntu debemos instalar el paquete \"nfs-kernel-server\" \"y en Fedora el paquete \"nfs-utils\" (y opcionalmente el paquete \"nfs4-acl-tools\" que estudiaremos m\u00e1s adelante). Para comprobar si est\u00e1 bien instalado, deber\u00eda aparecer nfs4 -y si es servidor, tambi\u00e9n nfsd - en la salida del comando cat /proc/filesystems (Comando que sirve para listar los sistemas de archivos reconocidos por el sistema) Nota En Fedora hay un paquete llamado \"ganesha-nfs\" que ofrece un servidor NFS diferente del cl\u00e1sico (no lo veremos) Nota Para desactivar la capacidad de utilizar las versiones anteriores de NFS (v2 y v3) en nuestro servidor -recomendable-, hay que tener las l\u00edneas vers2 = n y vers3 = n bajo la secci\u00f3n [nfsd] del archivo /etc/nfs.conf Para compartir carpetas debemos modificar el contenido de un archivo (que puede no existir inicialmente) llamado /etc/exports (o a\u00f1adir uno o m\u00e1s archivos con extensi\u00f3n \".exports\" dentro de la carpeta /etc/exports.d ). El contenido del archivo /etc/exports (o los ubicados dentro de /etc/exports.d ) debe ser una l\u00ednea para cada carpeta que se quiera compartir ( \"exportar\"). El formato de la l\u00ednea es as\u00ed: /ruta/carp/compartida nomDNS.maquina.desdedondese.accede (opciones) otram\u00e1quina (opciones) donde: En lugar del nombre DNS de la m\u00e1quina cliente permitida (el cual puede incluir los comodines *, ? y [ ]) se puede especificar su IP, o bien indicar redes completas con el formato ipRed/Mascara Despu\u00e9s de cada nombre / ip de m\u00e1quina / red deben aparecer las opciones de compartici\u00f3n; si hay varias se separan por comas, todas ellas dentro del par\u00e9ntesis. ATENCI\u00d3N no se debe dejar ning\u00fan espacio en blanco entre el nombre / ip de m\u00e1quina / red y el par\u00e9ntesis de apertura: si se deja, querr\u00e1 decir que estas opciones valen para todos los clientes y para el nombre / ip escrito aplicar\u00e1n las opciones por defecto. Si la l\u00ednea es demasiado larga se puede partir con el caracter . Las opciones m\u00e1s importantes son (se pueden consultar muchas m\u00e1s en man exports ): OPCION FUNCION ro Exportar en modo de s\u00f3lo lectura. Este es el modo por defecto. rw Exportar en modo de lectura / escritura. Esto s\u00f3lo significa que se aplicar\u00e1n los permisos subyacentes de propietario, grupo y otros que tenga cada fichero exportado en particular. es decir, aunque hayamos especificado \"rw\" a una determinada carpeta en el archivo /etc/exports , no podremos escribir en ella si no tenemos adem\u00e1s permisos de escritura sobre su punto de montaje al cliente (permisos que, de hecho, son copia de los permisos \"Reales\" de la carpeta en el servidor y que el cliente no se pueden modificar). sync En una escritura, el servidor NFS no responde al cliente hasta que los cambios no se han realizado f\u00edsicamente en disco. Este es el modo por defecto. async En una escritura, el servidor NFS responde al cliente antes de que los cambios se hayan realizado f\u00edsicamente en disco. Esto permite un mejor rendimiento a costa de poder perder la integridad de los datos en un reinicie inesperado del servidor. Info El propietario y su grupo (y, como consecuencia, \"los otros\" y todos sus correspondientes permisos) que la m\u00e1quina cliente \"ve\" asociados a cada archivo exportado por el servidor son el propietario y grupo que en la m\u00e1quina cliente tenga su mismo UID y GID que el propietario y grupo \"reales\" del archivo en la m\u00e1quina servidora. Esto quiere decir si en la m\u00e1quina cliente no hay ning\u00fan usuario que tenga un UID / GID igual al del propietario / grupo \"real\" en el servidor, el archivo en cuesti\u00f3n no se reconocer\u00e1 con propietario / grupo v\u00e1lido. Por otra parte, en el caso de que la carpeta exportada tenga unos permisos que permitan escribir dentro, \u00bfqui\u00e9n ser\u00e1 el propietario / grupo \"real\", en el servidor, de un fichero creado por un usuario local del cliente? depende de las siguientes opciones: OPCION FUNCION all_squash Los archivos creados por cualquier usuario de la m\u00e1quina cliente tendr\u00e1n como propietario / grupo \"Real\" en el servidor del usuario \"nobody\" (con UID especial 65534). no_all_squash Los archivos creados por cualquier usuario de la m\u00e1quina cliente tendr\u00e1n como propietario / grupo \"Real\" en el servidor del usuario que all\u00ed tenga el mismo UID / GID (si no hay ninguno, el archivo en cuesti\u00f3n no se reconocer\u00e1 con propietario / grupo v\u00e1lido. Esta es la opci\u00f3n por defecto. root_squash Los archivos creados por el usuario \"root\" de la m\u00e1quina cliente tendr\u00e1n como propietario / grupo \"Real\" en el servidor del usuario \"nobody\" (con UID especial 65534). Esta es la opci\u00f3n por defecto. no_root_squash Los archivos creados por el usuario \"root\" de la m\u00e1quina cliente tendr\u00e1n como propietario / grupo \"Real\" en el servidor del usuario \"root\" del servidor. Esta opci\u00f3n es \u00fatil sobre todo para facilitar el arranque de sistemas PXE. anonuid = 655 En el caso de utilizar las opciones \"all_squash\" y / o \"root_squash\", permite especificar como usuario \"nobody\" uno con un UID concreto, distinto del predeterminado. anongid = 655 En el caso de utilizar las opciones \"all_squash\" y / o \"root_squash\", permite especificar como grupo \"nobody\" uno con un GID concreto, distinto del predeterminado. fsid = 0 Esta opci\u00f3n define la carpeta compartida que ser\u00e1 la ra\u00edz a partir de la cual se compartir\u00e1 todo lo que cuelgue de ella. S\u00f3lo puede haber una carpeta compartida con esta caracter\u00edstica. Si se quiere compartir alguna otra carpeta (la llamaremos \"/opt/otra\") que no est\u00e9 f\u00edsicamente dentro de la marcada como fsid = 0 (la llamaremos \"/Var/unacarpeta\"), tenemos que hacer unos pasos previos: -Debemos montar \"/opt/unaaltra\" dentro de \"/var/unacarpeta/unasubcarpeta\" (que supondremos inicialmente vac\u00eda), de forma que podamos acceder a la primera a trav\u00e9s de la segunda. Esto se puede hacer de dos maneras: la primera es temporal hasta que se reinicie la m\u00e1quina servidora y la segunda es permanente. La primera consiste en ejecutar el comando: mount --bind /opt/otra/var/unacarpeta/unasubcarpeta La segunda consistir\u00eda en a\u00f1adir una l\u00ednea tal como la siguiente al final del archivo de texto /etc/fstab (Ver m\u00e1s adelante para una explicaci\u00f3n m\u00e1s profunda de este archivo): /opt/otra nohide crossmnt /var/unacarpeta/unasubcarpeta none bind 0 0 2.-Una vez hecho este montaje de tipo \"bind\", tenemos que a\u00f1adir una l\u00ednea en /etc/exports indicando que se quiere compartir /var/unacarpeta/unasubcarpeta ; en esta l\u00ednea es obligatorio indicar la opci\u00f3n \"nohide\" (explicada seguidamente). OPCION FUNCION nohide Si se comparte una carpeta A como fsid = 0 dentro de la cual hay una subcarpeta B montada dentro de A con la opci\u00f3n --bind, para compartir expl\u00edcitamente la carpeta B en /Etc/exports se debe especificar esta opci\u00f3n; si no se hace (o si se especifica la opci\u00f3n \"hide\"),B aparecer\u00e1 vac\u00eda a los clientes. crossmnt Poner \"crossmnt\" en A equivale a poner \"nohide\" en B (y en todas las otras posibles subcarpetas que est\u00e9n montadas bajo A con --bind Una vez configurado el archivo /etc/exports , ya podemos iniciar el servicio con el comando sudo systemctl start nfs-kernel-server (Ubuntu) o sudo systemctl start nfs-server (en Fedora). Recordemos que cada vez que modificamos el archivo /etc/exports tendremos que reiniciar el servidor. Nota El puerto en el que escucha un servidor NFS es en el 2049 (tcp); hay que tenerlo en cuenta por el cortafuegos. Una manera r\u00e1pida de abrir el puerto en cuesti\u00f3n ser\u00eda ejecutar (en Fedora), los siguientes comandos: sudo firewall-cmd --add-service = nfs --permanent && sudo firewall-cmd --reload El comando sudo exportfs muestra una lista de los sistemas exportados actualmente (a\u00f1adiendo el par\u00e1metro -v lo hace en modo verboso). Tambi\u00e9n se puede usar su par\u00e1metro -r para hacer lo mismo que sudo systemctl reload nfs-kernel-server Otros par\u00e1metros importantes de este comando son: El par\u00e1metro -u ipClient:/rutaCarpeta : permite desactivar la compartici\u00f3n de una carpeta concreta. El par\u00e1metro -o opc, iones ipClient::/rutaCarpeta : a\u00f1ade \"al vuelo\" una nueva compartici\u00f3n (que durar\u00e0 hasta el pr\u00f3ximo reinicio del servidor) para el cliente y las opciones indicadas El par\u00e1metro -i -o opc, iones ipClient:/rutaCarpeta : ignora completamente el archivo /etc/exports y entonces s\u00f3lo comparte la carpeta indicada. Esto servir\u00eda para hacer pruebas r\u00e1pidas sin tener que tocar el archivo /etc/exports . El comando nfsstat muestra estad\u00edsticas de uso del servidor.","title":"Servidor"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Compartir%20ficheros%20con%20NFSv4/#cliente","text":"En Ubuntu debemos instalar el paquete nfs-common y en Fedora el paquete nfs-utils . Para comprobar si est\u00e1 bien instalado, deber\u00eda aparecer \"nfs4\" al ejecutar cat /proc/filesystems (comando que sirve para listar los sistemas de ficheros reconocidos por el sistema) Para ver qu\u00e9 carpetas compartidas tiene un servidor, se puede ejecutar: showmount -e ipservidor Para acceder a una carpeta compartida por el servidor (si no es fsid = 0), el cliente debe montarla previamente as\u00ed: sudo mount -t nfs4 ipservidor:/ruta/carpeta/compartida/al/servidor /punto/local/de/montaje Nota En vez de mount -t nft4 se puede usar el alias mount.nfs4. Para acceder a la carpeta compartida por el servidor con fsid = 0 (es decir, en la carpeta ra\u00edz, o dicho de otro manera, en la carpeta \"/\"), el cliente debe montar previamente: mount -t nfs4 ipservidor://punto/local/de/montaje Para acceder a una carpeta compartida montada en el servidor con el m\u00e9todo \"bind\" bajo la carpeta ra\u00edz (es decir, bajo la marcada con fsid = 0), tendremos que indicar su ruta relativa desde esta carpeta ra\u00edz (pero, eso s\u00ed, indicando la \"/\" inicial). Por ejemplo, si la carpeta ra\u00edz es /var/unacarpeta y se quiere compartir la carpeta /opt/unaaltra que est\u00e1 montada en el servidor dentro /var/unacarpeta/unasubcarpeta , el cliente debe montarla as\u00ed: mount -t nfs4 ipservidor:/unasubcarpeta /punto/local/de/montaje En cualquier caso, para comprobar si el montaje se ha realizado correctamente, podemos ejecutar el comando findmnt o bien el comando df . En ambos casos tendremos que ver la presencia del nuevo punto de montaje, al que podremos acceder normalmente v\u00eda cd, listar su contenido v\u00eda ls, etc. A la hora de hacer el montaje con el comando mount, se pueden indicar diferentes opciones espec\u00edficas de NFS4 con el par\u00e1metro -o (ver man nfs para muchas m\u00e1s) ...: Nota Estas opciones tambi\u00e9n se pueden escribir dentro del archivo /etc/nfsmount.conf (ver man nfsmount.conf para mas informaci\u00f3n) Opci\u00f3n Funci\u00f3n retry=n Indica los minutos durante los que se intentar\u00e1 montar una carpeta mientras no se consiga se sigue intentando hasta que se acabe el tiempo timeo=n en una operaci\u00f3n de lectura / escritura, indica las d\u00e9cimas de segundos que el cliente esperar\u00e1 a recibir una respuesta del servidor antes de volver a intentar la misma operaci\u00f3n. Por defecto es 600 timeo=n en una operaci\u00f3n de lectura / escritura, indica las d\u00e9cimas de segundos que el cliente esperar\u00e1 a recibir una respuesta del servidor antes de volver a intentar la misma operaci\u00f3n. Por defecto es 600 retrans=n En una operaci\u00f3n de lectura / escritura, indica el n\u00famero de veces que el cliente intentar\u00e1 realizar la misma operaci\u00f3n. Por defecto es 3 soft / hard Al llegar al l\u00edmite de intentos indicado por la opci\u00f3n retrans, el valor \"soft\" hace que el cliente desista de continuar realizando la operaci\u00f3n de lectura / escritura pendiente. El valor \"hard\", en cambio, hace que el cliente vuelva a intentarlo indefinidamente (en otras palabras, mantiene la petici\u00f3n del cliente aunque el servidor est\u00e9 ca\u00eddo, para seguirla cuando \u00e9ste recomience). Por defecto es \"hard\". wsize = n / rsize = n Indica el n\u00famero (m\u00faltiple de 1024, y como m\u00e1ximo 1.048.576) de bytes que se pueden escribir / leer como m\u00e1ximo en una sola operaci\u00f3n. Por defecto los valores son autonegociados entre cliente y servidor. Este dato afecta al rendimiento. port = 2055 Conecta a un servidor NFS que est\u00e1 escuchando a otro puerto diferente del est\u00e1ndar (2049) ... adem\u00e1s de las opciones generales que aporta el comando mount (ver man mount para muchas m\u00e1s), como: Opci\u00f3n Funci\u00f3n ro Monta en modo de solo lectura (Read Only), por defecto los montajes se hacen en modo lectura/escritura (\"rw\") noatime No cambia la fecha de \u00faltimo acceso a los archivos. Esta fecha se guarda junto con m\u00e1s datos (como la fecha de \u00faltima modificaci\u00f3n, o la de creaci\u00f3n, etc) en una \"base de datos\" de ficheros llamadas \"inodes\". Por defecto (opci\u00f3n \"ATIME\"), en cada acceso a un archivo la fecha de \u00faltimo acceso se cambia, pero con esta opci\u00f3n esto no se hace, acelerando as\u00ed el acceso al disco. nodiratime No cambia la fecha de \u00faltimo acceso a los directorios. La opci\u00f3n contraria (y por defecto) es \" diratime \". Nota Por ejemplo, el comando mount.nfs4 -o ro, port=2000,soft,retry=4 ip:/ruta/remota /ruta/local monta en \"/ruta/local\" la carpeta \"/ruta/remota\" existente en el servidor \"ip\" en modo s\u00f3lo lectura (ro), conect\u00e1ndose al puerto 2000 del servidor y estableciendo el n\u00famero de intentos para realizar las operaciones en 4, despu\u00e9s de los cuales, se informar\u00e1 de error y no se continuar\u00e1 intent\u00e1ndolo. No obstante, tener que escribir el comando mount a mano cada vez que queremos acceder a una carpeta compartida no es muy pr\u00e1ctico (adem\u00e1s de que lo tenemos que hacer como administrador). Lo m\u00e1s habitual es montar durante el arranque del cliente las carpetas compartidas que se quieran utilizar para tenerlas as\u00ed disponibles inmediatamente por cualquier usuario del sistema cliente que inicie sesi\u00f3n (sea o no administrador), sin tener que hacer nada. Para hacer esto, el cliente debemos modificar un archivo de texto llamado /etc/fstab . Este archivo, de hecho, no es \u00fanicamente utilizado para NFS, sino que es mucho m\u00e1s general: contiene todos los tipos de almacenes a montar en el arranque del sistema (particiones locales, carpetas Samba, etc, etc). Cada l\u00ednea de este archivo consta de seis campos separados por un espacio en blanco o un tabulador (para m\u00e1s informaci\u00f3n, consultar man fstab ): El 1\u00ba campo indica la partici\u00f3n / carpeta compartida concreta que deber\u00e1 montar durante el arranque del sistema operativo (por ejemplo, la partici\u00f3n local /dev/sda1 o una carpeta compartida remota NFS) El 2\u00ba campo indica la ruta de la carpeta que funcionar\u00e1 como su punto de montaje local El 3\u00ba campo indica el sistema de archivos en los que est\u00e1 formateada la partici\u00f3n / carpeta compartida (Valores posibles son: ext4, xfs, jfs, vfat -por \"fat32\" -, ntfs, swap, o auto -por no especificar ning\u00fan sistema en concreto y que el fstab el determine \u00e9l solo en el momento del montaje ... esta opci\u00f3n es \u00fatil para lectores de unidades extra\u00edbles como CD / DVDs que pueden contener diferentes sistemas de ficheros dependiendo de la unidad introducida-) El 4\u00ba campo indica las opciones de montaje se aplican (separadas por comas) El 5\u00ba campo actualmente no se utiliza y casi siempre vale 0 El 6\u00ba campo indica si el comando fsck se ejecutar\u00e1 al reiniciar el sistema cuando se monte esta partici\u00f3n / carpeta compartida (un valor 0 significa que no se comprueba el sistema de ficheros, un valor 1 quiere decir que s\u00ed y un valor 2 significa que s\u00ed, pero despu\u00e9s de haber comprobado las particiones marcadas con valor 1; normalmente la partici\u00f3n ra\u00edz del sistema debe tener un 1 mientras el resto de particiones puede tener un 0 o un 2) .Las opciones de montaje pueden ser cualquiera de las opciones espec\u00edficas de NFS4 (las listadas en man nfs ) o bien cualquiera de las generales del comando mount (es decir, las que est\u00e1n listadas en man mount ). Entre estas \u00faltimas, hay algunas que tienen m\u00e1s sentido dentro de \"/etc/fstab\" que en un comando mount normal: Opci\u00f3n Funci\u00f3n auto Indica que la partici\u00f3n / carpeta compartida correspondiente se montar\u00e1 autom\u00e1ticamente durante el arranque. En otras palabras: es la manera \"de activar\" esta l\u00ednea. La opci\u00f3n contraria es \"noauto\", que sirve para \"desactivar\" la l\u00ednea sin tener que borrarla, haciendo que s\u00f3lo se pueda montar la partici\u00f3n / carpeta compartida correspondiente de forma manual con el comando mount o bien s\u00ed se combina con la opci\u00f3n \"x-systemd.automount\" (ver m\u00e1s abajo) exec Permite que se puedan ejecutar los binarios existentes en la partici\u00f3n / carpeta compartida correspondiente. La opci\u00f3n contraria es \"noexec\". suid Permite reconocer el permiso especial \"suid\" en los binarios existentes en la partici\u00f3n / carpeta compartida correspondiente. Este permiso especial se utiliza para permitir a usuarios que no son administradores ejecutar binarios que en teor\u00eda s\u00f3lo podr\u00eda ejecutar el usuario administrador (como el binario passwd , por ejemplo). La opci\u00f3n contraria es \" nosuid \" dev Permite reconocer los archivos de dispositivos que puedan existir en la partici\u00f3n / carpeta compartida correspondiente. La opci\u00f3n contraria es \"nodev\". user Permite que cualquier usuario (sin ser administrador) pueda montar con el comando mount la partici\u00f3n / carpeta compartida correspondiente (pero s\u00f3lo el usuario que lo haya montado la podr\u00e1 desmontar). Esta opci\u00f3n implica \"noexec\", \"nosuid\" y \"nodev\", a no ser que se indique lo contrario. La opci\u00f3n contraria (es decir, que s\u00f3lo el usuario root pueda montar la partici\u00f3n / carpeta compartida correspondiente) es \"nouser\" users Permite que cualquier usuario (sin ser administrador) pueda montar con el comando mount la partici\u00f3n / carpeta compartida correspondiente, y tambi\u00e9n que cualquier otro usuario (o el mismo) la pueda desmontar. Esta opci\u00f3n implica \"noexec\", \"nosuid\" y \"nodev\", a no ser que se indique lo contrario. sync Hace que las escrituras a la partici\u00f3n / carpeta compartida correspondiente se realicen de forma s\u00edncrona (es decir, que se apliquen inmediatamente) .La opci\u00f3n contraria es \"async\", lo cual implica que las escrituras se realicen de forma as\u00edncrona (es decir, que todas las escrituras se apliquen de golpe pasado un tiempo determinado). Estas opciones en NFS no se utilizan porque no se establecen en el cliente sino en el servidor a la hora de compartir la carpeta dentro de \"/etc/exports\" (Son opciones hom\u00f3nimas, de hecho). defaults Equivale a \"rw\", \"suid\", \"dev\", \"exec\", \"auto\", \"nouser\" y \"async\" x-systemd.automount Esta opci\u00f3n se debe escribir junto con la opci\u00f3n \"noauto\". Sirve para no montar la partici\u00f3n / carpeta compartida correspondiente en el arranque del sistema sino cuando el usuario quiera acceder por primera vez (el retraso es imperceptible). esto permite no tener montadas unidades que quiz\u00e1s el usuario no utilizar\u00e1 en esa sesi\u00f3n, y adem\u00e1s permite no obtener errores al arrancar el cliente si en ese momento el servidor no est\u00e1 disponible. Se puede utilizar adem\u00e1s la opci\u00f3n \"x-systemd.device-timeout = n\", donde n es el n\u00famero de segundos que el cliente intentar\u00e1 montar el dispositivo antes de abandonar (porque \u00e9ste no est\u00e9 disponible, por ejemplo). No obstante, s\u00f3lo funciona para sistemas con systemd. En el caso concreto de montar carpetas compartidas NFS, el primer campo (que, recordemos, representa el recurso a montar) se escribe indicando la ip/nombre del servidor NFS seguido de \":\" y de la ruta en el servidor de la carpeta compartida a la que se quiere acceder (que ser\u00e1 \"/\" en el caso de ser la carpeta fsid = 0 o \"/unasubcarpeta\" si \"unasubcarpeta\" es el punto de montaje -bind bajo ella). Por lo tanto, un ejemplo de archivo /etc/fstab para un cliente NFS podr\u00eda ser este: ipServ:/ruta/comp/servidor /punto/montaje nfs4 noauto,x-systemd.automount 0 0","title":"Cliente"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/","text":"Servidor LDAP 389DS \u00b6 Configuraci\u00f3n previa \u00b6 Los pasos a seguir para configurar un servidor 389DS que contenga la informaci\u00f3n necesaria para autenticar/identificar usuarios (y los pasos a seguir para configurar un cliente LDAP para que esos usuarios accedan a ella) se detallan a continuaci\u00f3n. Deber\u00e1s utilizar dos m\u00e1quinas virtuales Fedora: una de ellas har\u00e1 de servidor LDAP y la otra har\u00e1 de cliente. Aseg\u00farate que ambas tengan, adem\u00e1s de una tarjeta en modo NAT para poder conectarse a Internet, una tarjeta en modo red interna con una IP fija (en este documento supondremos que tienen la 192.168.0.1 y 192.168.0.2, respectivamente) y de que la m\u00e1quina que haga de cliente tenga instalado un entorno gr\u00e1fico con navegador y gestor de ficheros (bastar\u00e1 hacer sudo dnf install gdm firefox nautilus para ello). Servidor \u00b6 A. Antes de instalar nada, a la m\u00e1quina que har\u00e1 de servidor LDAP dale un nombre que tenga una estructura similar a un nombre DNS (por ejemplo, en este documento usaremos el de miservidor.midominio.local ). De hecho, la infrastructura b\u00e1sica de una red con servidor LDAP integrado se deber\u00eda completar con un servidor DNS m\u00e1s pronto que tarde (para, entre otras cosas, no tener que configurar el archivo /etc/hosts de los clientes individualmente -como tendremos que hacer m\u00e1s adelante-), pero para no complicar m\u00e1s las cosas, realiza estos tres simples pasos y ya est\u00e1: -Ejecuta el comando sudo hostnamectl set-hostname miservidor.midominio.local . Esto har\u00e1 que el fichero /etc/hostname contenga el nuevo nombre \u201ctipo DNS\u201d de nuestro servidor (lo puedes comprobar tambi\u00e9n con el comando hostnamectl status ). Modifica manualmente el archivo /etc/hosts para que las IP 127.0.0.1 (v4) y ::1 (v6) all\u00e1 indicadas est\u00e9n asociadas a \u201cmiservidor.midominio.local\u201d en vez de a \u201clocalhost\u201d. Una vez hecho estos dos pasos, reinicia la m\u00e1quina. Nota Que el nombre del servidor sea de tipo DNS es necesario para que las entradas \u201cdc\u201d de nuestro servidor LDAP se correspondan con los subdominios de dicho nombre. Es decir, al generar la base de datos de nuestras entradas en forma de \u00e1rbol invertido, todas ellas deber\u00e1n colgar de un DN base que en nuestro caso ser\u00e1 \u201cdc=midominio,dc=local\u201d . Instalaci\u00f3n \u00b6 Instala el software correspondiente a un servidor LDAP b\u00e1sico: sudo dnf install 389-ds-base Nota Otros paquetes interesantes s\u00f3n \"389-admin\" (el cual representa un \"servidor de administraci\u00f3n\", \u00fatil para gestionar determinadas tareas relacionadas con el funcionamiento del servidor LDAP -como pararlo, reiniciarlo, hacer copias de seguridad, etc-) y/o \"389-console\" (el cual incluye a su vez los paquetes \"389-ds-console\" y \"389-admin-console\" y sirve para, respectivamente, ofrecer una interfaz gr\u00e1fica (basada en Java) para trabajar contra el directorio alojado en el servidor LDAP como un cliente LDAP est\u00e1ndar -es decir, para gestionar la informaci\u00f3n guardada:a\u00f1adiendo/eliminando/modificando nodos, etc- o bien para trabajar contra el servidor de administraci\u00f3n anteriormente mencionado orden\u00e1ndole las tareas administrativas de forma gr\u00e1fica). Tambi\u00e9n existe el paquete \"389-ds\" (el cual incluye todos los paquetes anteriores). Configuraci\u00f3n inicial \u00b6 Configura el servidor LDAP propiamente dicho para poderlo empezar a usar. Para ello primero crea un fichero INF (llam\u00e9moslo \"fichero.inf\"), el cual tendr\u00e1 un contenido ya predeterminado, mediante el comando dscreate create-template /ruta/fichero.inf . Este fichero INF representa un \"molde\" que podremos editar a conveniencia con cualquier editor de texto para asignar los valores deseados a las distintas directivas all\u00ed presentes. Estas directivas est\u00e1n perfectamente documentadas dentro del propio fichero y son bastante obvias; de todas maneras, como todas ellas ya tienen un valor por defecto asignado, nosotros tan solo necesitaremos editar unas pocas. En concreto, deberemos tener las siguientes directivas escritas como sigue: Nota Hay que tener en cuenta que si se desea cambiar el valor por defecto de una directiva, adem\u00e1s de modificar el valor en s\u00ed, para activar el cambio efectivamente se tendr\u00e1 de borrar el punto y coma que hay al inicio de la directiva en cuesti\u00f3n. Directiva instance_name=miservidor : Para indicar que la instancia del servidor 389 a crear se llamar\u00e1 \"miservidor\" (aunque podr\u00eda tener cualquier otro nombre). En un mismo ordenador podemos tener diferentes instancias del servidor 389DS, cada una independiente de la otra, gestionando cada una su/s propio/s directorio/s estancos y administr\u00e1ndose de forma individual. Cada instancia tendr\u00e1 que definirse en un fichero INF diferente Directiva root_dn = cn=admin : Indica que el \"common name\" del usuario administrador del directorio manejado por la instancia en cuesti\u00f3n ser\u00e1 \"cn=admin\".Por defecto este usuario es el \u00fanico que puede hacer tanto modificaciones como consultas en los directorios de servidores 389DS. Directiva root_password = 12345678 : Indica que la contrase\u00f1a del usuario administrador anterior ser\u00e1 \"12345678\". Si no se quisiera escribir la contrase\u00f1a en texto plano directamente en el fichero INF, existe la posibilidad de generar previamente un hash adecuado mediante el comando pwdhash contrase\u00f1a. M\u00ednimo 8 caracteres y entonces asignar el valor mostrado por pantalla tal cual a esta directiva Directiva create_suffix_entry = true : Indica que se desea crear una entrada ra\u00edz en el directorio Directiva suffix = dc=midominio,dc=local : Indica que el nombre de la entrada ra\u00edz del directorio a crear ser\u00e1 \"dc=midominio,dc=local\" Nota NOTA: El fichero INF contiene, tal como hemos dicho, muchas otras directivas que no ser\u00e1 necesario editar si no lo deseamos porque ya deber\u00edan tener asignado el valor adecuado , como por ejemplo full_machine_name (cuyo valor deber\u00eda ser el nombre completo de la m\u00e1quina establecido en el primer apartado, es decir, en nuestro caso: \"miservidor.midominio.local\"), port (cuyo valor por defecto es 389; si se indica el valor 0 se estar\u00eda cerrando el puerto, esto es, deshabilitando la posibilidad de atender conexiones no encriptadas), secure_port (cuyo valor por defecto es 636; si se indica el valor 0 se estar\u00eda cerrando el puerto, esto es, deshabilitando la posibilidad de atender conexiones encriptadas via TLS) o self_sign_cert (cuyo valor por defecto, True, activa el uso de TLS para asegurar las comunicaciones por red con los clientes, y lo hace mediante certificados autofirmados), entre otras. Adem\u00e1s, son interesantes reconocer diversas directivas que apuntan a rutas de carpetas relevantes, como \"backup_dir\", \"cert_dir\", \"config_dir\" o \"db_dir\" (esta \u00faltima es la que aloja los ficheros que contienen f\u00edsicamente los datos del directorio) Nota NOTA: Las l\u00edneas create_suffix_entry y suffix del fichero INF se encuentran bajo una secci\u00f3n titulada [backend-userroot] Los \"backend\" son los tipos de bases de datos que el servidor 389DS soporta para almacenar de forma permanente la informaci\u00f3n contenida en los directorios que gestiona; en este caso, la secci\u00f3n indica que se crear\u00e1 un backend llamado \"userroot\". Puede haber muchos tipos de backends, por lo que en 389DS se utiliza un mecanismo de plugins para solamente utilizar el/los plugin/s necesario/s para gestionar el/los backend/s correspondiente/s. El tipo de backend empleado por defecto por 389DS es la base de datos de tipo LDBM, que es una variante de las de tipo BerkeleyDB (las cuales todas ellas son implementadas f\u00edsicamente en forma de ficheros en disco). En el archivo \"dse.ldif\" (ver siguiente apartado) se encuentra la informaci\u00f3n sobre la configuraci\u00f3n del backend asociado a un directorio (bajo la secci\u00f3n dn:dc=midominio,dc=local, cn=mapping tree, cn=config ) y sobre la propia configuraci\u00f3n de ese backend elegido, bajo la secci\u00f3n dc: cn=ldbm database,cn=plugins,cn=config y dc: cn=config,cn=ldbm database,cn=plugins,cn=config Para m\u00e1s informaci\u00f3n consultar https://www.port389.org/docs/389ds/design/architecture.html y tambi\u00e9n el cuadro siguiente: A continuaci\u00f3n utiliza el fichero INF generado en el paso anterior como entrada en el siguiente comando : sudo dscreate from-file /ruta/fichero.inf Este comando establece realmente la configuraci\u00f3n de la instancia \"miservidor\" en un formato que el servidor LDAP entender\u00e1 (concretamente, genera el archivo de configuraci\u00f3n /etc/dirsrv/slapd-miservidor/dse.ldif , el cual contiene todas las directivas indicadas en el fichero INF anterior -con alguna variaci\u00f3n en su nombre- adem\u00e1s de muchas otras m\u00e1s; todas las directivas presentes en este fichero dse.ldif tienen la particularidad de estar escritas en un formato de texto llamado LDIF, el cual estudiaremos m\u00e1s adelante pero b\u00e1sicamente lo que hay que saber ahora es que esto significa que este fichero puede ser modificado igualmente mediante cualquier editor de texto est\u00e1ndar). Nota Una manera de editar el fichero \"dse.ldif\" es, en vez de utilitzar un editor de texto gen\u00e9rico, utilizar el comando espec\u00edfico de 389DS llamado dsconf; concretamente, para cambiar la contrase\u00f1a del usuario \"admin\" usando esta herramienta se podr\u00eda hacer (de forma interactiva y, eso s\u00ed, conociendo la contrase\u00f1a previa) as\u00ed: dsconf -D \"cn=admin\" miservidor directory_manager password_change . Otra manera ser\u00eda, ya que el fichero \"dse.ldif\" no deja de ser un fichero LDIF est\u00e1ndar, utilizar los comandos est\u00e1ndar de edici\u00f3n de ficheros LDIF como es principalmente el comando ldapmodify, que veremos pronto ( https://directory.fedoraproject.org/docs/389ds/howto/howto-resetdirmgrpassword.html#use-ldapmodify ) Nota Otra manera alternativa de configurar el servidor LDAP es usando el comando sudo dscreate interactive , el cual muestra un asistente en modo texto que ofrece una serie de preguntas interactivas esenciales (como el nombre de la instancia a crear, el puerto de escucha, si queremos activar TLS, etc) y, a partir de la respuesta dada en ellas, genera autom\u00e1ticamente el fichero \"dse.ldif\" adecuado. No obstante, deberemos acabar editando el archivo \"dse.ldif\" a mano para poder adaptarlo m\u00e1s espec\u00edficamente a nuestras circunstancias (el asistente no pregunta todas las preguntas que necesitar\u00edamos contestar), as\u00ed que realmente no es de mucha ayuda. Nota NOTA: Es posible crear otro backend (en principio del mismo tipo LDBM) separado del backend por defecto \"userroot\" para almacenar otro directorio diferente en la misma instancia. Eso se puede hacer as\u00ed: sudo dsconf -D \"cn=admin\" -W miservidor backend create \u2013suffix dc=otrodominio,dc=local --be-name nombreBackend Los cambios se ver\u00e1n reflejados, efectivamente, en el archivo \"dse.ldif\" d) Comprobar que, efectivamente, la instancia reci\u00e9n configurada haya sido arrancada correctamente mediante el comando sudo systemctl status dirsrv@miservidor (detr\u00e1s de la arroba ha de ir el nombre de la instancia indicado en el asistente anterior...si no lo hemos modificado, por defecto este nombre se corresponder\u00e1 con el nombre corto de la m\u00e1quina). A partir de aqu\u00ed, la instancia se podr\u00e1 gestionar como cualquier otro demonio del sistema con systemctl start, systemctl stop, systemctl enable, systemctl disable,... Nota NOTA: Tambi\u00e9n se puede utilizar el comando sudo dsctl miservidor status para comprobar el estado de funcionamiento de la instancia indicada. El comando dsctl se puede emplear como sustituto de systemctl ya que tiene opciones para iniciar, parar, reiniciar, etc la instancia en cuesti\u00f3n. Una opci\u00f3n muy interesante (y peligrosa!) es la de eliminar completamente la instancia (y su/s directorio/s correspondiente/s), la cual es sudo dsctl miservidor remove --do-it Nota NOTA: At installation, Directory Server contains the following: a server front-end responsible for network communications, plug-ins for server functions, such as access control and replication, a basic directory tree containing server-related data (defined in \"dse.ldif\" file) and a database back-end plug-in responsible for managing the actual storage and retrieval of server data. Abrir puertos en el Firewall \u00b6 :::bash systemctl status firewalld systemctl enable firewalld systemctl start firewalld firewall-cmd --permanent --add-port={389/tcp,636/tcp} firewall-cmd --reload Administraci\u00f3n b\u00e1sica del directorio: \u00b6 Ya tenemos el servidor LDAP funcionando y escuchando en el puerto 389 TCP. Ahora deber\u00edamos generar la estructura de entradas de nuestro directorio y rellenarlas de datos. Tip Comprueba desde el servidor, con el comando ss -tln , como aparece el socket escuchando en ese puerto Agregar informaci\u00f3n - Procedimiento gen\u00e9rico \u00b6 La forma m\u00e1s b\u00e1sica de a\u00f1adir informaci\u00f3n a un directorio cualquiera es utilizar ficheros de texto cuyo contenido est\u00e1 escrito en el formato LDIF (LDAP Data Interchange Format). El formato b\u00e1sico de una entrada es...: :::text # comentario dn: <nombre global \u00fanico> <atributo>: <valor> <atributo>: <valor> ... ...donde los atributos indicados deben pertenecer a alg\u00fan objeto perteneciente a alg\u00fan \"schema\" previamente reconocido por el servidor para que sean interpretados correctamente (por suerte, todos los objetos que utilizaremos en este documento est\u00e1n definidos en \"schemas\" que ya vienen incluidos de serie en cualquier software de tipo servidor LDAP actual). Nota En el caso de utilizar, por ejemplo, el servidor 389DS, los objetos que emplearemos a lo largo de este documento est\u00e1n definidos en el fichero /usr/share/dirsrv/schema/00core.ldif (el de tipo \"organizationalUnit\") y /usr/share/dirsrv/schema/10rfc2307.ldif (los de tipo \"posixGroup\", \"posixAccount\" y \"shadowAccount\"), etc Un objeto que tambi\u00e9n podr\u00edamos haber utilizado (pero no lo hemos hecho) es el objeto \"hostObject\" (definido en /usr/share/dirsrv/schema/60nss-ldap.ldif ), cuyo atributo m\u00e1s importante es \"host\" (el valor del cual puede ser una IP o un nombre DNS) y que permitir\u00eda alojar en el directorio informaci\u00f3n sobre las m\u00e1quinas que formar\u00edan un dominio (y, eventualmente, aplicarles reglas de acceso, etc) Entre dos entradas consecutivas escritas en un archivo LDIF debe existir siempre una l\u00ednea en blanco. Por otro lado, si una l\u00ednea es demasiado larga, podemos repartir su contenido entre varias, siempre que las l\u00edneas de continuaci\u00f3n comiencen con un car\u00e1cter de tabulaci\u00f3n o un espacio en blanco. Una vez creados estos ficheros, para a\u00f1adirlos al directorio (incluso con el servidor en marcha) podemos utilizar el comando ldapadd (disponible al instalar el paquete llamado \u201cldap-utils\u201d -en Ubuntu-, o\"openldap-clients\" -en Fedora- aunque en el caso de haber instalado el paquete \"389-ds-base\" ya se habr\u00e1 instalado autom\u00e1ticamente como dependencia). La mayor\u00eda de veces necesitaremos indicar los siguientes par\u00e1metros: -H ldap://nomDnsServidor:n\u00bapuerto : Indica el servidor LDAP (y, opcionalmente, el n\u00famero de puerto) contra el cual se van a ejecutar. Si el servidor LDAP estuviera funcionando en la misma m\u00e1quina donde se ejecuta el comando ldapadd (o cualquier otro de su familia: ldapsearch , ldapmodify , etc), normalmente este par\u00e1metro se podr\u00e1 omitir. Si el servidor LDAP funciona sobre TLS (es decir, es un servidor LDAP seguro), la URL a indicar deber\u00e1 ser -H ldaps://nomDnsServidor:n\u00bapuerto Nota NOTA: Si el comando cliente (cualquiera de los que estudiaremos: ldapadd , ldapsearch , ldapmodify , etc) se ejecuta en la misma m\u00e1quina donde est\u00e1 funcionando el servidor, en vez de conectar con \u00e9ste mediante TCP (que es lo que pasa cuando se usa la url del tipo ldap://...) autom\u00e1ticamente utiliza sockets internos que emplean el mecanismo IPC, que es un sistema de intercomunicaci\u00f3n entre procesos locales m\u00e1s \u00f3ptimo para estos casos. Aunque ya hemos dicho que no ser\u00eda necesario, si se quisiera especificar la url, en este caso entonces se deber\u00eda escribir as\u00ed: ldapi://%2fruta%2fcarpeta%2ffichero.socket (notar que el protocolo es \"ldapi\" y no \"ldap\" y que las \"/\" se sustituyen por \"%2f\"). Nota En el caso de contactar con un servidor LDAPS (es decir, funcionando sobre TLS), dicho servidor puede o bien ofrecer un certificado autofirmado o bien un certificado firmado por una determinada CA (Autoridad de Certificaci\u00f3n). En el primer caso, para que los clientes admitan ese servidor como seguro se ha establecer previamente la variable de entorno LDAPTLS_REQCERT al valor \"never\" (simplemente precediendo el comando en cuesti\u00f3n con la expresi\u00f3n LDAPTLS_REQCERT=never ya ser\u00eda suficiente). En el segundo caso, se ha de establecer previamente la variable de entorno LDAPTLS_CACERT indicando la ruta del certificado de la CA (simplemente precediendo el comando en cuesti\u00f3n con la expresi\u00f3n LDAPTLS_CACERT=/etc/dirsrv/slapd-miservidor/ca.crt , por ejemplo, ya ser\u00eda suficiente). Para que estas variables sean permanentes, se pueden indicar dentro del archivo /etc/openldap/ldap.conf -D cn=admin : Indica el \"common name\" de la cuenta de usuario (guardada en el propio servidor) con la que nos autenticaremos en el servidor LDAP para realizar la modificaci\u00f3n del directorio; esta cuenta ha de tener privilegio para ello, as\u00ed que usaremos la cuenta \"admin\" que creamos en la instalaci\u00f3n del servidor. -W : Solicita interactivamente la contrase\u00f1a de la cuenta anterior. Otra opci\u00f3n ser\u00eda indicar la contrase\u00f1a como un par\u00e1metro m\u00e1s, as\u00ed : -w contrase\u00f1a (notar que en este caso la \"w\" es min\u00fascula). -f fichero.ldif : Indica el fichero cuyo contenido se desea agregar Ejercicios Agregar Datos \u00b6 1.- a) Crea un fichero llamado base.ldif con el contenido mostrado a continuaci\u00f3n y seguidamente agr\u00e9galo al directorio con el comando: ldapadd -D cn=admin -W -f base.ldif . Con esto habr\u00e1s generado dos entradas de tipo \u201cunidad organizativas\u201d que servir\u00e1n para contener (a modo de \u201ccarpetas\u201d) los usuarios y grupos que generaremos a continuaci\u00f3n. dn: ou=usuarios,dc=midominio,dc=local objectClass: organizationalUnit ou: usuarios dn: ou=grupos,dc=midominio,dc=local objectClass: organizationalUnit ou: grupos 1.-b) Crea un fichero llamado grupos.ldif con el siguiente contenido y seguidamente agr\u00e9galo al directorio con un comando similar al del apartado anterior: dn: cn=grupoldap,ou=grupos,dc=midominio,dc=local objectClass: posixGroup cn: grupoldap gidNumber: 10000 1.-c) Crea un fichero llamado usuarios.ldif con el siguiente contenido y seguidamente agr\u00e9galo al directorio con un comando similar al del apartado anterior: dn: uid=usu1ldap,ou=usuarios,dc=midominio,dc=local objectClass: top objectClass: inetOrgPerson objectClass: posixAccount objectClass: shadowAccount uid: usu1ldap sn: Lopez givenName: Juan cn: Juan Lopez displayName: Juan Lopez uidNumber: 3001 gidNumber: 10000 userPassword: XXX gecos: Es muy tonto loginShell: /bin/bash homeDirectory: /home/jlopez shadowExpire: -1 shadowFlag: 0 shadowWarning: 7 shadowMin: 8 shadowMax: 999999 shadowLastChange: 10877 mail: juan.lopez@gmail.com postalCode: 29000 dn: uid=usu2ldap,ou=usuarios,dc=midominio,dc=local objectClass: top objectClass: inetOrgPerson objectClass: posixAccount objectClass: shadowAccount uid: usu2ldap sn: Perez givenName: Perico cn: Pedro Perez displayName: Pedro Perez uidNumber: 3002 gidNumber: 10001 userPassword: XXX gecos: Es un crack loginShell: /bin/bash homeDirectory: /home/pperez shadowExpire: -1 shadowFlag: 0 shadowWarning: 7 shadowMin: 8 shadowMax: 999999 shadowLastChange: 10877 mail: pedrito@yahoo.es postalCode: 29001 Nota Tal como se puede ver, cada objeto \u201cusuario\u201d est\u00e1 formado a partir de la uni\u00f3n de diferentes tipos predefinidos de objeto (posixAccount, shadowAccount, inetOgPerson), donde cada uno aporta un determinado conjunto de atributos: posixAccount incluye la informaci\u00f3n que encontrar\u00edamos en el archivo \"/etc/passwd\" cl\u00e1sico, shadowAccount incluye la informaci\u00f3n que encontrar\u00edamos en el archivo \"/etc/shadow\" cl\u00e1sico y inetOrgPerson incluye informaci\u00f3n extra del usuario dentro de la organizaci\u00f3n (como el correo, c\u00f3d. Postal...). Nota Hay que tener muy en cuenta que al a\u00f1adir nuevos usuarios los valores de los atributos uidNumber y homeDirectory (adem\u00e1s de userPassword) deben ser diferentes para cada usuario. Lo mismo ocurre con el atributo gidNumber para los grupos. Adem\u00e1s, los valores de uidNumber y gidNumber no deben coincidir con el uid y gid de ning\u00fanusuario y grupo local de los clientes. Nota El valor del atributo userPassword est\u00e1 protegido por ACLs predefinidas del servidor para que tan solo el usuario administrador - o el propietario del objeto que contenga dicho atributo- pueda consultar su valor (hasheado). Internamente, los valores de todos atributos se almacenan en el backend seleccionado pero en el caso del atributo userPassword este almacenamiento se realiza del hash de la contrase\u00f1a seg\u00fan el algoritmo predefinido que el servidor tenga configurado. As\u00ed pues, un intruso que tuviera acceso directo al backend no obtendr\u00eda (de entrada) las contrase\u00f1as porque las tendr\u00eda que \"crackear\". Este aspecto es independiente del hecho de que las conexiones entre cliente y servidor deber\u00edan siempre estar encriptadas mediante TLS para evitar el robo de la contrase\u00f1a en tr\u00e1nsito. No obstante, alguien podr\u00eda objetar que escribir la contrase\u00f1a de los usuarios tal cual en un archivo ldif es un gran riesgo deseguridad. En realidad, as\u00ed es como se recomienda que se escriba este valor para dejar al servidor LDAP realizar el hash de la forma que internamente requiera con las comprobaciones pertinentes. De todas formas, si se desea, es posible escribir el valor del atributo userPassword de forma que est\u00e9 \"hasheado\". Para ello primero hay que utilizar alguna utilidad que nos genere el hash necesario; en el caso de usar 389DS disponemos del comando pwdhash , el cual, mediante su par\u00e1metro -s permite especificar el algoritmo hash deseado. Por ejemplo, para obtener el hash SHA-512 salteado (el mismo algoritmo que se utiliza actualmente para guardar las contrase\u00f1as hasheadas en el archivo \"/etc/shadow\" de la mayor\u00eda de distribuciones Linux) de la contrase\u00f1a \"hola\" deber\u00edamos ejecutarpwdhash -s SSHA512 hola El valor obtenido deber\u00eda serasignado tal cual al campo userPassword; la parte entre llaves indica al servidor LDAP que dicho valor ser\u00e1 un hash de ese tipo y que, por tanto, no deber\u00e1 hashearlo \u00e9l sino almacenarlo directamente Buscar informaci\u00f3n - ldapsearch \u00b6 Para comprobar si el contenido anterior se ha a\u00f1adido correctamente, podemos usar el comando ldapsearch (tambi\u00e9n del paquete \u201cldap-utils\u201d), el cual permite hacer una b\u00fasqueda en el directorio. La mayor\u00eda de veces necesitaremos indicar, adem\u00e1s de los par\u00e1metros -H ldap://nomDnsServidor:nopuerto , -D cn=admin y -W/-w contrase\u00f1a ya conocidos, otros como los siguientes: -LLL : Indica a ldapsearch que muestre la respuesta en modo \"no verboso\" (m\u00e1s f\u00e1cil de leer) d 1 : d 1, d 2, ..... establece el nivel de debug y muestra errores detallados en el resultado del comando. -b \"dc=midominio,dc=local\" : Indica el DN \"base\" a partir del cual se empezar\u00e1 la b\u00fasqueda por las entradas inferiores del \u00e1rbol. El ejemplo anterior buscar\u00eda a partir de la entrada ra\u00edz \"para abajo\" por todas las subentradas. Pero no es necesario que la entrada ra\u00edz sea el DN \"base\": si, por ejemplo, escribi\u00e9ramos -b \"ou=grupos,dc=midominio,dc=local\" entonces solo se buscar\u00eda a partir de la organizationalUnit \"grupos\" \"para abajo\" por las subentradas que contuviera. Nota NOTA: En el servidor 389DS, l'entrada \"cn=config\" pot fer-se servir com a DN base per obtenir tota la configuraci\u00f3 del propi servidor -s {base | one | sub } : El comportamiento descrito en el p\u00e1rrafo anterior de buscar recursivamente todas las entradas por debajo de una entrada \"base\" dada (incluyendo \u00e9sta) es el comportamiento por defecto, que equivaldr\u00eda a indicar el par\u00e1metro -s sub Pero otros valores de este par\u00e1metro modifican el \"scope\" de la b\u00fasqueda; por ejemplo, -s base solamente muestra informaci\u00f3n de la entrada marcada como \"base\" y nada m\u00e1s (es decir, no recorre ninguna rama del \u00e1rbol) -s one solamente muestra informaci\u00f3n de las entradas directamente colgando de la entrada \"base\" pero nada m\u00e1s (es decir, s\u00f3lo muestra las entradas \"hijas\": ni muestra entradas \"nietas\" ni la propia entrada \"base\") \"(atributo=valor)\" \"(atributo=valor)\" ... : Filtro que permite \"quedarse\", de todas las entradas recorridas, solo con las que contienen el atributo indicado con el valor indicado. Existen otros filtros m\u00e1s sofisticados que se pueden estudiar en el cuadro inferior. Si aparece este par\u00e1metro, ha de ir escrito despu\u00e9s de cualquier otro par\u00e1metro de los anteriores. Si no aparece, todas las entradas recorridas ser\u00e1n \"v\u00e1lidas\" para mostrarse. Nota is a special value representing \u201cany possible value\u201d. It can be used to build a \"presence\" filter that requests all objects where the attribute is present and has a valid value, but we do not care what the value is. For instance, by default, ldapsearch provides the filter \"(objectClass=*)\"; because all objects must have an objectClass, this filter is the equivalent to saying \u201call valid objects\u201d. atributo atributo ... : De la informaci\u00f3n encontrada en las entradas recorridas (y ya filtradas, si fuera el caso), se muestra solo aquellos atributos indicados. Si aparece este par\u00e1metro, ha de ir escrito despu\u00e9s del filtro (si hubiera). Si no aparece -o se escribe \"*\"-, se mostrar\u00e1n todos los atributos pertenecientes a las entradas recorridas (y ya filtradas si fuera el caso); en el caso de escribir \"+\" se mostrar\u00e1n los metaatributos de la entradas recorridas (como la fecha de creaci\u00f3n de la entrada, el usuario que la cre\u00f3, etc). Nota To show what basedns are available, you can query the special \u2018\u2019 or blank rootDSE (Directory Server Entry) using \"namingContexts\" as the attribute to look up, like this: ldapsearch -D cn=admin -W -LLL -b \"\" -s base namingContexts 2.- Ejecuta el comando ldapsearch -D cn=admin -W -LLL -b \"dc=midominio,dc=local\" uid=usu1ldap sn givenName Con este comando de ejemplo estaremos buscando un usuario con uid=usu1ldap y pediremos que nos muestre solo el contenido de los atributos sn y givenName. Comprueba que efectivamente sea as\u00ed: Nota Es posible realizar consultas an\u00f3nimas (es decir, sin necesidad de autenticarse) pero para ello ser\u00eda necesario configurar el servidor 389DS convenientemente (ver para m\u00e1s informaci\u00f3n) y sustituir los par\u00e1metros -D y -W de ldapsearch por -x *A filter can request objects whose attribute values are greater/less than a value by \"(uid>=test0005)\" or \"(uid<=test0005)\".If used with letters, it compares alphabetically. A filter can request a partial match of an attribute value on the object by using the \u2018 \u2019 operator (multiple times if necessary): \"(uid= 005)\" or \"(uid=*st000 )\". Note you should always have at least 3 characters in your substring filter, else indexes may not operate efficently. *Filters can be nested with AND (&) or OR (|) conditions. Condition applies to all filters that follow within the same level of brackets, that is: (condition (attribute=value)(attribute=value)). AND requires that for an object to match, all filter elements must match; this is the \u201cintersection\u201d operation and is written like this: \"(&(uid=test0006)(uid=guest0006))\" OR filters will return the aggregate of all filters; this is the union operation so provided an object satisfies one condition of the OR, it will be part of the returned set; it's written like this: (|(uid=test0006)(uid=guest0007)) *A NOT filter acts to invert the result of the inner set. For example: \"(!(uid=test0010))\" Note you can\u2019t list multiple parameters in a \"not\" condition: to combine NOT's you need to use this in conjunctionwith AND and OR. Nota NOTA: *You can nest AND, OR and NOT filters to produce more complex directed queries. For instance this query: (&(objectClass=person)(objectClass=posixAccount)(|(uid=test000*))(!(uid=test0001))) would be equivalent to...: (& (objectClass=person) (objectClass=posixAccount) (| (uid=test000*) ) (!(uid=test0001)) ) ...and it expresses \"All person whose name starts with test000* and not test0001\". Another example would be this: (|(& (...K1...) (...K2...))(& (...K3...) (...K4...))) which means (K1 AND K2) OR (K3 AND K4) Borrar y modificar informaci\u00f3n ldapdelete y ldapmodify \u00b6 Otros comandos importantes del paquete \u201cldap-util\u201d son ldapdelete y ldapmodify. Un ejemplo del primero podr\u00eda ser: ldapdelete -D cn=admin -W \"uid=usu2ldap,ou=usuarios,dc=midominio,dc=local\" donde se ha indicado el DN del elemento que se desea eliminar. El segundo tiene tres formas de modificar una entrada: cambiando el valor de un atributo , a\u00f1adiendo un nuevo atributo o eliminando un atributo existente: -Para cambiar, por ejemplo, el atributo uidNumber de un usuario, podr\u00edamos ejecutar el comando ldapmodify -D cn=admin -W -f fichero.cambios donde fichero.cambios deber\u00eda tener un contenido como el siguiente (donde se especifica qu\u00e9 entradas se quieren modificar y de qu\u00e9 manera): dn:uid=usu2ldap,ou=usuarios,dc=midominio,dc=local changetype:modify replace:uidNumber uidNumber:3002 Nota NOTA: La informaci\u00f3n anterior la podr\u00edamos haber introducido directamente desde la entrada est\u00e1ndar si no hubi\u00e9ramos especificado el par\u00e1metro -f. -Para a\u00f1adir un atributo nuevo (en este caso llamado jpegPhoto) deber\u00edamos ejecutar el mismo comando ldapmodify anterior pero ahora fichero.cambios deber\u00eda tener un contenido como este: dn:uid=usu2ldap,ou=usuarios,dc=midominio,dc=local changetype: modify add:jpegPhoto jpegPhoto:file:///tmp/foto.png -Para eliminar un atributo (en este caso llamado jpegPhoto) deber\u00edamos ejecutar el mismo comando ldapmodify anterior pero ahora \"fichero.cambios\" deber\u00eda tener un contenido como este: dn:uid=usu2ldap,ou=usuarios,dc=midominio,dc=local changetype: modify delete:jpegPhoto Nota ya que la configuraci\u00f3n del servidor 389DS es troba accessible en forma directori, la comanda ldapmodify es podria utilitzar per modificar aquesta configuraci\u00f3 \"en calent\". Per exemple, sabent que les directives \"nsslapd-ldapilisten\" i \"nsslapd-ldapifilepath\" activen el mecanisme LDAPI i especifiquen la ruta del socket adient, respectivament, per activar aquesta caracter\u00edstica (que ja ve de s\u00e8rie activada, per\u00f2 \u00e9s nom\u00e9s un exemple), podr\u00edem fer com sempre: ldapmodify -D cn=admin -W -f fichero.cambios pero ara el contingut del fitxer \"fichero.cambios\" seria: dn: cn=config changetype: modify replace: nsslapd-ldapilisten nsslapd-ldapilisten: on - add: nsslapd-ldapifilepath nsslapd-ldapifilepath: /var/run/slapd-exemple.socket Nota NOTA: En realitat, per afegir entrades i per eliminar entrades no caldria fer servir les comandes ldapadd i ldapdelete respectivament, ja que amb ldapmodify ja n'hi hauria prou. En el cas de voler afegir una entrada el fitxer \"fichero.cambios\" hauria de tenir un contingut semblant al seg\u00fcent...: dn: <dn to add> changetype: add objectclass: ... attribute1: ... attribute2: ... ...i en el cas de voler eliminar una entrada, el seu contingut hauria de ser semblant a aquest: dn: <dn to delete> changetype: delete 3.-a) Modifica el atributo \u201cgecos\u201d del usuario Juan L\u00f3pez para que muestre la descripci\u00f3n: \u201cRonca\u201d. Comprueba mediante ldapsearch que el cambio lo has realizado correctamente b) A\u00f1ade el atributo \u201cjpegPhoto\u201d del usuario Juan L\u00f3pez indicando la ruta (ficticia) de su foto identificativa. Comprueba mediante ldapsearch que el cambio lo has realizado correctamente c) Elimina el atributo \u201cjpegPhoto\u201d anterior.Comprueba mediante ldapsearch que el cambio lo has realizado correctamente ACIs \u00b6 By default, the directory server denies access to everything. The administrator must allow certain types of access to certain resources for users to be able to use the directory server. The operational attribute aci is used for access control. This attribute can be applied to any entry in the directory tree, and has subtree scope: it applies to the entry that contains it and any children and descendants of that entry. An ACI consists of 3 parts: a target, a subject, and the type of access (permission): The target represents the entry or resource is being protected. The target specification should be a DN (written with the syntax \"ldap:///DN\"), but can be stretched by specifying one or more atributes to restrict its application, or even a LDAP filter. Writing a target it's optional: by default it applies to all entries in subtree scope of the entry which ACI is defined (that's is which contains the aciattribute). The subject represents the entity which is granted (or denied) access to the target. The subject may be userdn=\"ldap:///DN\" or groupdn=\"ldap:///DN\" (where DN can be any DN of a user or a group, respectively). It also can be some of these values: userdn=\"ldap:///self\" (to specify the user who has done the query), userdn=\"ldap:///anyone\" (to specify anonymous binds), or userdn=\"ldap:///all\" (to specify any authenticated user). Modifiers can be used to allow or deny access based on the client IP address or hostname, access time, or connection type (encrypted or not). You can also use attributes to specify a subject with userattr=\"attrname\" syntax. The permission is any combination of the following keywords: read Indicates whether directory data may be read. Indicates whether directory data may be changed or created. This permission also allows write directory data to be deleted but not the entry itself: to delete an entire entry, the user must have delete permissions. search Indicates whether the directory data can be searched. This differs from the read permission in that read allows directory data to be viewed if it is returned as part of a search operation. For example, if searching for common names is allowed as well as read permission for a person's room number, then the room number can be returned as part of the common namesearch, but the room number itself cannot be used as the subject of a search. Use this combination to prevent people from searching the directory to see who sits in a particular room. add Indicates whether child entries beneath the targeted entry can be created. delete Indicates whether targeted entry can be deleted. all Means all types of above accesses The permission is modified by using allow or deny If there are conflicts between what is allowed and what is denied, the deny wins. Better explained: when a user attempts any kind of access to a directory entry, Directory Server applies the precedence rule. This rule states that when two conflicting permissions exist, the permission that denies access always takes precedence over the permission that grants access. For example, if write permission is denied at the directory's root level, and that permission is applied to everyone accessing the directory, then no user can write to the directory regardless of any other permissions that may allow write access. To allow a specific user write permissions to the directory, the scope of the original deny-for-write has to be set so that it does not include that user. Then, there must be additional allow-for-write permission for the user in question. The aci attribute has the following syntax (version 3.0 and acl \"name\" values are mandatory and, as it can be seen, several targets can be specified as well as several allow(permission)(subject)... values): aci: (target=\"ldap:///DN)(target=...)(version 3.0; acl \"name\"; allow(per,miss,ion)(userdn=\"ldap:///subject\"); allow...;) Nota NOTA: Some interesting modifiers to add in a ACI to restrict targeted entries are \"targetattr\" and \"targetfilter\" keywords, (which must be specified after these targeted entries). Another interesting keyword is \"targetscope\" For instance, in the following example, the ACI states that \"bjensen\" has rights to modify all attributes in her own directory entry: aci: (target=\"ldap:///uid=bjensen,dc=example,dc=com\")(targetattr=\"*\")(targetscope=\"subtree\")(version 3.0; acl \"example\"; allow (write)(userdn=\"ldap:///self\");) Access control rules can be placed on any entry in the directory although administrators often place access control rules on entries with the object classes \"domainComponent\", \"organizationalUnit\", \"inetOrgPerson\", or \"group\". You can add/replace/delete an aci attribute like any other using LDIF files and ldapmodify command. For instance, this content would add the permission of anonymous searches/reads to all the directory's content: dn:dc=midominio,dc=local changetype: modify add:aci aci: (targetattr!=\"userPassword\")(version 3.0; acl \"xxx\"; allow(read,search)(userdn=\"ldap:///anyone\");) The aci attribute is a multi-valued operational attribute that can be read and modified by directory users. Therefore, the ACI attribute itself should be protected by ACIs. Administration users are usually given full access to the aci attribute doing ldapsearch -D cn=admin -W -b entryDN -s base \"(objectclass=*)\" aci Login LDAP desde cliente con SSSD \u00b6 Introducci\u00f3n \u00b6 En Linux se puede utilizar el demonio SSSD para autenticar al usuario contra servidores LDAP remotos (Combinados con servidores Kerberos o no) adem\u00e1s de identificarlos. Mediante SSSD todo el proceso de autenticaci\u00f3n / identificaci\u00f3n del usuario se produce en el cliente de una forma homog\u00e9nea y coherente, independientemente de la distribuci\u00f3n Linux all\u00ed instalada. Nota Adem\u00e1s de autenticarse contra servidores LDAP \"pelados\" o combinados con Kerberos, el demonio SSSD tambi\u00e9n permite autenticar usuarios contra sistemas integrales empresariales como FreeIPA o Active Directory (los cuales internamente se basan en LDAP / Kerberos). En cambio, no puede trabajar (todav\u00eda) con SGBDs o servidores RADIUS como fuente de autenticaci\u00f3n / identificaci\u00f3n Una gran ventaja de utilizar SSSD en vez de los m\u00f3dulos PAM / NSS \"standalone\" individualmente es que este demonio guarda una cach\u00e9 (en la carpeta /var/lib/sss/db ) que permite el acceso \"Offline\" a / los sistema/s cliente/s (sin tener ninguna cuenta local diferente) en el caso de que el servidor LDAP / Kerberos remoto no est\u00e9 disponible en ese momento o, en caso de que s\u00ed, disminuir su carga. Nota NOTA: El demonio SSSD tambi\u00e9n ofrece una interfaz D-Bus para poder interactuar con el sistema mediante este m\u00e9todo y as\u00ed obtener, por ejemplo, informaci\u00f3n extra sobre el usuario (tal como veremos). El demonio SSSD proporciona sus propios m\u00f3dulos PAM y NSS para conectar con servidores LDAP / Kerberos y LDAP, respectivamente, los cuales son diferentes de los m\u00f3dulos \"standalone\" pam_ldap / pam_krb5 y nss_ldap ya conocidos. Esto es porque SSSD ofrece funcionalidades extra como un framework conjunto y librer\u00edas homog\u00e9neas, un mecanismo de cach\u00e9 de credenciales -similar al que ofrec\u00eda el demonio ncsd, ya obsoleto-, una interfaz D-Bus, etc. Para que los programas de inicio de sesi\u00f3n (login, gdm, su, sudo, ssh, etc) utilicen los m\u00f3dulos PAM / NSS propios de SSSD deberemos realizar un conjunto de configuraciones al sistema que explicaremos a continuaci\u00f3n. Nota NOTA: En Ubuntu hay que instalar el paquete \"sssd\" (es decir, el demonio SSSD no viene preinstal.lat \"de f\u00e1brica\"). Afortunadamente, al instalar este paquete ya se instalar\u00e1n autom\u00e1ticamente como dependencia el resto de paquetes que podamos necesitar, como los conectores con los diferentes providers: \"sssd-ldap\", \"sssd-krb5\", \"sssd-ipa\", etc. En Fedora todos estos paquetes ya vienen instalados \"de f\u00e1brica\". Configuraci\u00f3n de SSSD: \u00b6 SSSD lee los archivos de configuraci\u00f3n en este orden: primero lee el archivo primario /etc/sssd/sssd.conf y luego, otros archivos * .conf en /etc/sssd/conf.d (en orden alfab\u00e9tico). Si aparece el mismo par\u00e1metro en m\u00faltiples archivos de configuraci\u00f3n, SSSD usa el \u00faltimo par\u00e1metro de lectura. Esto le permite usar el valor predeterminado /etc/sssd/sssd.conf en todos los clientes y aagregar configuraciones adicionales en otros archivos de configuraci\u00f3n para extender la funcionalidad individualmente por cliente. Atenci\u00f3n Todos estos archivos deben ser propiedad de root:root y tener permisos 600 de lo contrario el servicio sssd no se iniciar\u00e1. Los proveedores de autenticaci\u00f3n e identidad se configuran como \"dominios\" en el archivo de configuraci\u00f3n SSSD. Puede configurar varios dominios para SSSD pero al menos un dominio debe estar configurado, de lo contrario, SSSD no arrancar\u00e1. Un solo dominio se puede usar como: Un proveedor de autenticaci\u00f3n (para solicitudes de autenticaci\u00f3n) Un proveedor de identidad (para informaci\u00f3n del usuario) Un proveedor de control de acceso (para solicitudes de autorizaci\u00f3n). No los estudiaremos aqu\u00ed. Una combinaci\u00f3n de estos proveedores (si todas las operaciones correspondientes se realizan dentro de un solo servidor) Nota Tambi\u00e9n hay lo que se llama un proveedor \"proxy\". Este proveedor funciona como un intermediario de retransmisi\u00f3n entre SSSD y recursos que SSSD de otra forma no podr\u00edan usar. Cuando se usa un proveedor proxy, SSSD se conecta al servicio proxy, y el proxy carga las bibliotecas especificadas. Con un proveedor de proxy, puede configurar SSSD para utilizar m\u00e9todos de autenticaci\u00f3n alternativos, como un esc\u00e1ner de huellas digitales, entre otras cosas. Secci\u00f3n [sssd] \u00b6 En el archivo \"sssd.conf\" debe haber al menos una secci\u00f3n general [sssd] y una secci\u00f3n para cada dominio. Debajo de la secci\u00f3n [sssd] debemos tener en cuenta esta l\u00ednea (m\u00e1s informaci\u00f3n en man sssd.conf): domains = Especifica una lista separada por comas de dominios definidos en el orden que desee para ser consultado Por lo tanto, si un dominio no aparece en esta lista, no se consultar\u00e1 aunque est\u00e9 definido en el archivo \"sssd.conf\" Secci\u00f3n [domain/xxx] \u00b6 Las secciones correspondientes a dominios definidos deben titularse as\u00ed [domain/xxx] donde \"xxx\" puede ser cualquier cosa. Debajo de una secci\u00f3n de dominio debemos tener en cuenta estas l\u00edneas (m\u00e1s en man sssd.conf): Line \"auth_provider = \": establece el proveedor de autenticaci\u00f3n utilizado para el dominio. Los valores posibles son: - \"ldap\", \"krb5\", \"ipa\", \"ad\" o \"proxy\", entre otros. Dependiendo del proveedor elegido, habr\u00e1 sea \u200b\u200bnecesario escribir l\u00edneas m\u00e1s espec\u00edficas (ver man sssd-ldap, man sssd-krb5, man sssd-ipa u man sssd-ad para m\u00e1s detalles). -Line \"id_provider =\" : establece el proveedor de identidad utilizado para el dominio. Los valores posibles son: \"ldap\", \"archivos\", \"ipa\", \"anuncio\" o \"proxy\". Dependiendo del proveedor elegido, habr\u00e1 que escribir l\u00edneas m\u00e1s espec\u00edficas (vea man sssd-ldap, man sssd-files, man sssd-ipa o man sssd-ad para m\u00e1s detalles). -Line \"access_provider =\" : establece el proveedor de acceso utilizado para el dominio, que se utiliza para evaluar qu\u00e9 usuarios tienen acceso al sistema. Incluso si un usuario se autentica con \u00e9xito, si no Si cumple con los criterios proporcionados por el proveedor de acceso, su acceso ser\u00e1 denegado. Los valores posibles son: \"ldap\", \"krb5\", \"simple\", \"ipa\", \"ad\", \"proxy\", \"denegar\" (siempre niega el acceso) o \"permitir\" (por defecto,siempre permite el acceso). Dependiendo del proveedor elegido, habr\u00e1 que escribir m\u00e1s. l\u00edneas espec\u00edficas (vea man sssd-ldap, man sssd-krb5, man sssd-simple, man sssd-ipa o man sssd-ad para detalles). Nota NOTA: El proveedor de acceso \"simple\" permite o niega el acceso basado en una lista de nombres de usuario o grupos. Permite restringir el acceso a m\u00e1quinas espec\u00edficas. Por ejemplo, en las computadoras port\u00e1tiles de la compa\u00f1\u00eda, puede usar el proveedor de acceso simple para restringir el acceso solo a un usuario espec\u00edfico o un grupo espec\u00edfico. Otros usuarios o grupos no podr\u00e1n iniciar sesi\u00f3n incluso si se autentican correctamente en el proveedor de autenticaci\u00f3n configurado. [domain/nombre_dominio] ... access_provider = simple simple_allow_users = usuario1, usuario2 #simple_allow_groups = group1 Si el proveedor de acceso que est\u00e1 utilizando es el \"ldap\", tambi\u00e9n puede especificar un filtro de control de acceso LDAP que el usuario debe coincidir para poder acceder al sistema. [domain/domain_name] ... access_provider = ldap ldap_access_filter = (memberOf=cn=allowedusers,ou=Groups,dc=example,dc=com) #ldap_access_order = filter, host, authorized_service Nota NOTA: La directiva ldap_access_order puede tener estos valores (se pueden indicar por orden de aplicaci\u00f3n): *\"filter\" : Se usa el filtro indicado en ldap_access_filter como criterio. Valor per defecto *\"host\" : Se usa el atributo \"host\" en el directorio como criterio *\"authorized_service\" : Se usa el valor de \"authorizedService\" en el directorio como criterio *\"expire\" : Se usa el valor de la directiva ldap_account_expire_policy como criterio -Line \"chpass_provider = \": establece el proveedor que debe manejar las operaciones de cambio de contrase\u00f1a para el dominio. Los valores posibles son: \"ldap\", \"krb5\", \"ipa\", \"ad\", \"proxy\" o \"none\" (esto expl\u00edcitamente deshabilita la capacidad de cambiar las contrase\u00f1as). Si no se especifica esta l\u00ednea, entonces se usa por defecto el valor especificado en la l\u00ednea \"id_provider\". Ver man sssd-sudo para detalles Nota Nota SSSD no almacena en cach\u00e9 las credenciales de usuario de forma predeterminada. Entonces, al procesar solicitudes de autenticaci\u00f3n,de manera predeterminada, SSSD siempre contacta al proveedor de identidad; si el proveedor no est\u00e1 disponible, la autenticaci\u00f3n de usuario falla Para garantizar que las credenciales se almacenen localmente despu\u00e9s de autenticar con \u00e9xito a los usuarios para que puedan mantener autenticaci\u00f3n incluso cuando el proveedor de identidad no est\u00e1 disponible, debe habilitar el almacenamiento en cach\u00e9 de credenciales local agregando la l\u00ednea cache_credentials = true debajo de la secci\u00f3n de dominio correspondiente. Por defecto, la credencial la memoria cach\u00e9 nunca caduca: si desea que sssd elimine las credenciales almacenadas en cach\u00e9, account_cache_expiration = line hacer que caduquen despu\u00e9s del n\u00famero de d\u00edas especificado. Nota Cuando un usuario intenta una operaci\u00f3n de sudo, ya sabemos que SSSD contacta al proveedor de identidad / sudo definido en el dominio para obtener la informaci\u00f3n requerida sobre la configuraci\u00f3n actual de sudo. Si la l\u00ednea cache_credentials se establece en true,tambi\u00e9n almacenar\u00e1 esa informaci\u00f3n de sudo en una memoria cach\u00e9, para que los usuarios puedan realizar operaciones de sudo incluso cuando LDAP / IPA / AD El servidor est\u00e1 fuera de l\u00ednea. Secciones opcionales [pam] y / o [nss] \u00b6 Las secciones opcionales [pam] y / o [nss] tambi\u00e9n pueden aparecer en el archivo \"sssd.conf\". Podr\u00edan ser utilizadas para configurar algunos aspectos del comportamiento de los m\u00f3dulos PAM o NSS de SSSD, respectivamente. Por ejemplo, si se quiere configurar un l\u00edmite de tiempo (en d\u00edas) para cu\u00e1nto tiempo SSSD permite la autenticaci\u00f3n sin conexi\u00f3n si el proveedor de identificaci\u00f3n no est\u00e1 disponible, puede usar la l\u00ednea offline_credentials_expiration = debajo de la secci\u00f3n [pam] para especificar ese l\u00edmite de tiempo. Otras l\u00edneas interesantes para especificar debajo de la secci\u00f3n [pam] son offline_failed_login_attempts = , offline_failed_login_delay = o reconnection_retries , entre otros. Igualmente, debajo de la secci\u00f3n [nss] algunas l\u00edneas interesantes que merecen atenci\u00f3n son filter_groups = y filter_users = (que excluye a ciertos usuarios, por defecto, solo \"root\") de ser extra\u00eddos del backend NSS Esto es particularmente \u00fatil para las cuentas del sistema .; esta opci\u00f3n tambi\u00e9n se puede establecer por dominio o incluir nombres totalmente calificados para filtrar solo usuarios del dominio en particular), entry_cache_timeout = (que especifica cu\u00e1ntos segundos, por defecto 5400- debe considerar sssd entradas v\u00e1lidas antes de preguntar al NSS backend otra vez), \"entry_cache_nowait_percentage =\", \"override_homedir =\", \"override_shell =\", \"allowed_shells =\", etc. Ejemplo 1 (un servidor LDAP como proveedor de autenticaci\u00f3n e identidad) \u00b6 Un fichero \"sssd.conf\" podr\u00eda ser algo as\u00ed: [sssd] domains=pepito [domain/pepito] auth_provider=ldap id_provider=ldap ldap_uri=ldaps://ldapserver.example.com ldap_search_base=dc=example,dc=com Nota SSSD always uses an encrypted channel for authentication, which ensures that passwords are never sent over the network unencrypted but forces the LDAP server to run over TLS. If this LDAP server used a self-signed certificate, you must add the line ldap_tls_reqcert=allow in the sssd.conf file so that client doesn't reject it. If this LDAP used a ca-signed certificate instead, you should add the line ldap_tls_cacert = /etc/pki/tls/certs/ca-bundle.crt instead (pointing to the right CA's bundle file in each case). Anyway, if you wanted identity lookups (such as commands based on the id or getent utilities) were also encrypted (or if LDAP server only runs over TLS), you should add the \" ldap_id_use_start_tls =true line. Nota If LDAP server's configuration requires that queries to LDAP directory have to be authenticated, you should add the ldap_default_bind_dn= cn=admin and ldap_default_authtok= 12345 lines to specify which user (\"cn=admin\" in this example) and password (\"12345\" in this example) should be used to do these queries, respectively. Example 2 (a KDC server as authentication provider and a LDAP server as identity provider) \u00b6 A suitable sssd.conf file could be like this: [sssd] domains=pepito [domain/pepito] auth_provider=krb5 krb5_server=kdc.example.com krb5_realm=EXAMPLE.COM id_provider=ldap ldap_uri= ... ldap_search_base= ... Nota NOTA: If the Change Password service is not running on the KDC specified in \"krb5_server\" or \"krb5_backup_server\" lines, you can use the \"krb5_passwd\" line to specify the server where the service is running or a chpass_provider instead.","title":"Servidor LDAP 389DS"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#servidor-ldap-389ds","text":"","title":"Servidor LDAP 389DS"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#configuracion-previa","text":"Los pasos a seguir para configurar un servidor 389DS que contenga la informaci\u00f3n necesaria para autenticar/identificar usuarios (y los pasos a seguir para configurar un cliente LDAP para que esos usuarios accedan a ella) se detallan a continuaci\u00f3n. Deber\u00e1s utilizar dos m\u00e1quinas virtuales Fedora: una de ellas har\u00e1 de servidor LDAP y la otra har\u00e1 de cliente. Aseg\u00farate que ambas tengan, adem\u00e1s de una tarjeta en modo NAT para poder conectarse a Internet, una tarjeta en modo red interna con una IP fija (en este documento supondremos que tienen la 192.168.0.1 y 192.168.0.2, respectivamente) y de que la m\u00e1quina que haga de cliente tenga instalado un entorno gr\u00e1fico con navegador y gestor de ficheros (bastar\u00e1 hacer sudo dnf install gdm firefox nautilus para ello).","title":"Configuraci\u00f3n previa"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#servidor","text":"A. Antes de instalar nada, a la m\u00e1quina que har\u00e1 de servidor LDAP dale un nombre que tenga una estructura similar a un nombre DNS (por ejemplo, en este documento usaremos el de miservidor.midominio.local ). De hecho, la infrastructura b\u00e1sica de una red con servidor LDAP integrado se deber\u00eda completar con un servidor DNS m\u00e1s pronto que tarde (para, entre otras cosas, no tener que configurar el archivo /etc/hosts de los clientes individualmente -como tendremos que hacer m\u00e1s adelante-), pero para no complicar m\u00e1s las cosas, realiza estos tres simples pasos y ya est\u00e1: -Ejecuta el comando sudo hostnamectl set-hostname miservidor.midominio.local . Esto har\u00e1 que el fichero /etc/hostname contenga el nuevo nombre \u201ctipo DNS\u201d de nuestro servidor (lo puedes comprobar tambi\u00e9n con el comando hostnamectl status ). Modifica manualmente el archivo /etc/hosts para que las IP 127.0.0.1 (v4) y ::1 (v6) all\u00e1 indicadas est\u00e9n asociadas a \u201cmiservidor.midominio.local\u201d en vez de a \u201clocalhost\u201d. Una vez hecho estos dos pasos, reinicia la m\u00e1quina. Nota Que el nombre del servidor sea de tipo DNS es necesario para que las entradas \u201cdc\u201d de nuestro servidor LDAP se correspondan con los subdominios de dicho nombre. Es decir, al generar la base de datos de nuestras entradas en forma de \u00e1rbol invertido, todas ellas deber\u00e1n colgar de un DN base que en nuestro caso ser\u00e1 \u201cdc=midominio,dc=local\u201d .","title":"Servidor"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#instalacion","text":"Instala el software correspondiente a un servidor LDAP b\u00e1sico: sudo dnf install 389-ds-base Nota Otros paquetes interesantes s\u00f3n \"389-admin\" (el cual representa un \"servidor de administraci\u00f3n\", \u00fatil para gestionar determinadas tareas relacionadas con el funcionamiento del servidor LDAP -como pararlo, reiniciarlo, hacer copias de seguridad, etc-) y/o \"389-console\" (el cual incluye a su vez los paquetes \"389-ds-console\" y \"389-admin-console\" y sirve para, respectivamente, ofrecer una interfaz gr\u00e1fica (basada en Java) para trabajar contra el directorio alojado en el servidor LDAP como un cliente LDAP est\u00e1ndar -es decir, para gestionar la informaci\u00f3n guardada:a\u00f1adiendo/eliminando/modificando nodos, etc- o bien para trabajar contra el servidor de administraci\u00f3n anteriormente mencionado orden\u00e1ndole las tareas administrativas de forma gr\u00e1fica). Tambi\u00e9n existe el paquete \"389-ds\" (el cual incluye todos los paquetes anteriores).","title":"Instalaci\u00f3n"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#configuracion-inicial","text":"Configura el servidor LDAP propiamente dicho para poderlo empezar a usar. Para ello primero crea un fichero INF (llam\u00e9moslo \"fichero.inf\"), el cual tendr\u00e1 un contenido ya predeterminado, mediante el comando dscreate create-template /ruta/fichero.inf . Este fichero INF representa un \"molde\" que podremos editar a conveniencia con cualquier editor de texto para asignar los valores deseados a las distintas directivas all\u00ed presentes. Estas directivas est\u00e1n perfectamente documentadas dentro del propio fichero y son bastante obvias; de todas maneras, como todas ellas ya tienen un valor por defecto asignado, nosotros tan solo necesitaremos editar unas pocas. En concreto, deberemos tener las siguientes directivas escritas como sigue: Nota Hay que tener en cuenta que si se desea cambiar el valor por defecto de una directiva, adem\u00e1s de modificar el valor en s\u00ed, para activar el cambio efectivamente se tendr\u00e1 de borrar el punto y coma que hay al inicio de la directiva en cuesti\u00f3n. Directiva instance_name=miservidor : Para indicar que la instancia del servidor 389 a crear se llamar\u00e1 \"miservidor\" (aunque podr\u00eda tener cualquier otro nombre). En un mismo ordenador podemos tener diferentes instancias del servidor 389DS, cada una independiente de la otra, gestionando cada una su/s propio/s directorio/s estancos y administr\u00e1ndose de forma individual. Cada instancia tendr\u00e1 que definirse en un fichero INF diferente Directiva root_dn = cn=admin : Indica que el \"common name\" del usuario administrador del directorio manejado por la instancia en cuesti\u00f3n ser\u00e1 \"cn=admin\".Por defecto este usuario es el \u00fanico que puede hacer tanto modificaciones como consultas en los directorios de servidores 389DS. Directiva root_password = 12345678 : Indica que la contrase\u00f1a del usuario administrador anterior ser\u00e1 \"12345678\". Si no se quisiera escribir la contrase\u00f1a en texto plano directamente en el fichero INF, existe la posibilidad de generar previamente un hash adecuado mediante el comando pwdhash contrase\u00f1a. M\u00ednimo 8 caracteres y entonces asignar el valor mostrado por pantalla tal cual a esta directiva Directiva create_suffix_entry = true : Indica que se desea crear una entrada ra\u00edz en el directorio Directiva suffix = dc=midominio,dc=local : Indica que el nombre de la entrada ra\u00edz del directorio a crear ser\u00e1 \"dc=midominio,dc=local\" Nota NOTA: El fichero INF contiene, tal como hemos dicho, muchas otras directivas que no ser\u00e1 necesario editar si no lo deseamos porque ya deber\u00edan tener asignado el valor adecuado , como por ejemplo full_machine_name (cuyo valor deber\u00eda ser el nombre completo de la m\u00e1quina establecido en el primer apartado, es decir, en nuestro caso: \"miservidor.midominio.local\"), port (cuyo valor por defecto es 389; si se indica el valor 0 se estar\u00eda cerrando el puerto, esto es, deshabilitando la posibilidad de atender conexiones no encriptadas), secure_port (cuyo valor por defecto es 636; si se indica el valor 0 se estar\u00eda cerrando el puerto, esto es, deshabilitando la posibilidad de atender conexiones encriptadas via TLS) o self_sign_cert (cuyo valor por defecto, True, activa el uso de TLS para asegurar las comunicaciones por red con los clientes, y lo hace mediante certificados autofirmados), entre otras. Adem\u00e1s, son interesantes reconocer diversas directivas que apuntan a rutas de carpetas relevantes, como \"backup_dir\", \"cert_dir\", \"config_dir\" o \"db_dir\" (esta \u00faltima es la que aloja los ficheros que contienen f\u00edsicamente los datos del directorio) Nota NOTA: Las l\u00edneas create_suffix_entry y suffix del fichero INF se encuentran bajo una secci\u00f3n titulada [backend-userroot] Los \"backend\" son los tipos de bases de datos que el servidor 389DS soporta para almacenar de forma permanente la informaci\u00f3n contenida en los directorios que gestiona; en este caso, la secci\u00f3n indica que se crear\u00e1 un backend llamado \"userroot\". Puede haber muchos tipos de backends, por lo que en 389DS se utiliza un mecanismo de plugins para solamente utilizar el/los plugin/s necesario/s para gestionar el/los backend/s correspondiente/s. El tipo de backend empleado por defecto por 389DS es la base de datos de tipo LDBM, que es una variante de las de tipo BerkeleyDB (las cuales todas ellas son implementadas f\u00edsicamente en forma de ficheros en disco). En el archivo \"dse.ldif\" (ver siguiente apartado) se encuentra la informaci\u00f3n sobre la configuraci\u00f3n del backend asociado a un directorio (bajo la secci\u00f3n dn:dc=midominio,dc=local, cn=mapping tree, cn=config ) y sobre la propia configuraci\u00f3n de ese backend elegido, bajo la secci\u00f3n dc: cn=ldbm database,cn=plugins,cn=config y dc: cn=config,cn=ldbm database,cn=plugins,cn=config Para m\u00e1s informaci\u00f3n consultar https://www.port389.org/docs/389ds/design/architecture.html y tambi\u00e9n el cuadro siguiente: A continuaci\u00f3n utiliza el fichero INF generado en el paso anterior como entrada en el siguiente comando : sudo dscreate from-file /ruta/fichero.inf Este comando establece realmente la configuraci\u00f3n de la instancia \"miservidor\" en un formato que el servidor LDAP entender\u00e1 (concretamente, genera el archivo de configuraci\u00f3n /etc/dirsrv/slapd-miservidor/dse.ldif , el cual contiene todas las directivas indicadas en el fichero INF anterior -con alguna variaci\u00f3n en su nombre- adem\u00e1s de muchas otras m\u00e1s; todas las directivas presentes en este fichero dse.ldif tienen la particularidad de estar escritas en un formato de texto llamado LDIF, el cual estudiaremos m\u00e1s adelante pero b\u00e1sicamente lo que hay que saber ahora es que esto significa que este fichero puede ser modificado igualmente mediante cualquier editor de texto est\u00e1ndar). Nota Una manera de editar el fichero \"dse.ldif\" es, en vez de utilitzar un editor de texto gen\u00e9rico, utilizar el comando espec\u00edfico de 389DS llamado dsconf; concretamente, para cambiar la contrase\u00f1a del usuario \"admin\" usando esta herramienta se podr\u00eda hacer (de forma interactiva y, eso s\u00ed, conociendo la contrase\u00f1a previa) as\u00ed: dsconf -D \"cn=admin\" miservidor directory_manager password_change . Otra manera ser\u00eda, ya que el fichero \"dse.ldif\" no deja de ser un fichero LDIF est\u00e1ndar, utilizar los comandos est\u00e1ndar de edici\u00f3n de ficheros LDIF como es principalmente el comando ldapmodify, que veremos pronto ( https://directory.fedoraproject.org/docs/389ds/howto/howto-resetdirmgrpassword.html#use-ldapmodify ) Nota Otra manera alternativa de configurar el servidor LDAP es usando el comando sudo dscreate interactive , el cual muestra un asistente en modo texto que ofrece una serie de preguntas interactivas esenciales (como el nombre de la instancia a crear, el puerto de escucha, si queremos activar TLS, etc) y, a partir de la respuesta dada en ellas, genera autom\u00e1ticamente el fichero \"dse.ldif\" adecuado. No obstante, deberemos acabar editando el archivo \"dse.ldif\" a mano para poder adaptarlo m\u00e1s espec\u00edficamente a nuestras circunstancias (el asistente no pregunta todas las preguntas que necesitar\u00edamos contestar), as\u00ed que realmente no es de mucha ayuda. Nota NOTA: Es posible crear otro backend (en principio del mismo tipo LDBM) separado del backend por defecto \"userroot\" para almacenar otro directorio diferente en la misma instancia. Eso se puede hacer as\u00ed: sudo dsconf -D \"cn=admin\" -W miservidor backend create \u2013suffix dc=otrodominio,dc=local --be-name nombreBackend Los cambios se ver\u00e1n reflejados, efectivamente, en el archivo \"dse.ldif\" d) Comprobar que, efectivamente, la instancia reci\u00e9n configurada haya sido arrancada correctamente mediante el comando sudo systemctl status dirsrv@miservidor (detr\u00e1s de la arroba ha de ir el nombre de la instancia indicado en el asistente anterior...si no lo hemos modificado, por defecto este nombre se corresponder\u00e1 con el nombre corto de la m\u00e1quina). A partir de aqu\u00ed, la instancia se podr\u00e1 gestionar como cualquier otro demonio del sistema con systemctl start, systemctl stop, systemctl enable, systemctl disable,... Nota NOTA: Tambi\u00e9n se puede utilizar el comando sudo dsctl miservidor status para comprobar el estado de funcionamiento de la instancia indicada. El comando dsctl se puede emplear como sustituto de systemctl ya que tiene opciones para iniciar, parar, reiniciar, etc la instancia en cuesti\u00f3n. Una opci\u00f3n muy interesante (y peligrosa!) es la de eliminar completamente la instancia (y su/s directorio/s correspondiente/s), la cual es sudo dsctl miservidor remove --do-it Nota NOTA: At installation, Directory Server contains the following: a server front-end responsible for network communications, plug-ins for server functions, such as access control and replication, a basic directory tree containing server-related data (defined in \"dse.ldif\" file) and a database back-end plug-in responsible for managing the actual storage and retrieval of server data.","title":"Configuraci\u00f3n inicial"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#abrir-puertos-en-el-firewall","text":":::bash systemctl status firewalld systemctl enable firewalld systemctl start firewalld firewall-cmd --permanent --add-port={389/tcp,636/tcp} firewall-cmd --reload","title":"Abrir puertos en el Firewall"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#administracion-basica-del-directorio","text":"Ya tenemos el servidor LDAP funcionando y escuchando en el puerto 389 TCP. Ahora deber\u00edamos generar la estructura de entradas de nuestro directorio y rellenarlas de datos. Tip Comprueba desde el servidor, con el comando ss -tln , como aparece el socket escuchando en ese puerto","title":"Administraci\u00f3n b\u00e1sica del directorio:"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#agregar-informacion-procedimiento-generico","text":"La forma m\u00e1s b\u00e1sica de a\u00f1adir informaci\u00f3n a un directorio cualquiera es utilizar ficheros de texto cuyo contenido est\u00e1 escrito en el formato LDIF (LDAP Data Interchange Format). El formato b\u00e1sico de una entrada es...: :::text # comentario dn: <nombre global \u00fanico> <atributo>: <valor> <atributo>: <valor> ... ...donde los atributos indicados deben pertenecer a alg\u00fan objeto perteneciente a alg\u00fan \"schema\" previamente reconocido por el servidor para que sean interpretados correctamente (por suerte, todos los objetos que utilizaremos en este documento est\u00e1n definidos en \"schemas\" que ya vienen incluidos de serie en cualquier software de tipo servidor LDAP actual). Nota En el caso de utilizar, por ejemplo, el servidor 389DS, los objetos que emplearemos a lo largo de este documento est\u00e1n definidos en el fichero /usr/share/dirsrv/schema/00core.ldif (el de tipo \"organizationalUnit\") y /usr/share/dirsrv/schema/10rfc2307.ldif (los de tipo \"posixGroup\", \"posixAccount\" y \"shadowAccount\"), etc Un objeto que tambi\u00e9n podr\u00edamos haber utilizado (pero no lo hemos hecho) es el objeto \"hostObject\" (definido en /usr/share/dirsrv/schema/60nss-ldap.ldif ), cuyo atributo m\u00e1s importante es \"host\" (el valor del cual puede ser una IP o un nombre DNS) y que permitir\u00eda alojar en el directorio informaci\u00f3n sobre las m\u00e1quinas que formar\u00edan un dominio (y, eventualmente, aplicarles reglas de acceso, etc) Entre dos entradas consecutivas escritas en un archivo LDIF debe existir siempre una l\u00ednea en blanco. Por otro lado, si una l\u00ednea es demasiado larga, podemos repartir su contenido entre varias, siempre que las l\u00edneas de continuaci\u00f3n comiencen con un car\u00e1cter de tabulaci\u00f3n o un espacio en blanco. Una vez creados estos ficheros, para a\u00f1adirlos al directorio (incluso con el servidor en marcha) podemos utilizar el comando ldapadd (disponible al instalar el paquete llamado \u201cldap-utils\u201d -en Ubuntu-, o\"openldap-clients\" -en Fedora- aunque en el caso de haber instalado el paquete \"389-ds-base\" ya se habr\u00e1 instalado autom\u00e1ticamente como dependencia). La mayor\u00eda de veces necesitaremos indicar los siguientes par\u00e1metros: -H ldap://nomDnsServidor:n\u00bapuerto : Indica el servidor LDAP (y, opcionalmente, el n\u00famero de puerto) contra el cual se van a ejecutar. Si el servidor LDAP estuviera funcionando en la misma m\u00e1quina donde se ejecuta el comando ldapadd (o cualquier otro de su familia: ldapsearch , ldapmodify , etc), normalmente este par\u00e1metro se podr\u00e1 omitir. Si el servidor LDAP funciona sobre TLS (es decir, es un servidor LDAP seguro), la URL a indicar deber\u00e1 ser -H ldaps://nomDnsServidor:n\u00bapuerto Nota NOTA: Si el comando cliente (cualquiera de los que estudiaremos: ldapadd , ldapsearch , ldapmodify , etc) se ejecuta en la misma m\u00e1quina donde est\u00e1 funcionando el servidor, en vez de conectar con \u00e9ste mediante TCP (que es lo que pasa cuando se usa la url del tipo ldap://...) autom\u00e1ticamente utiliza sockets internos que emplean el mecanismo IPC, que es un sistema de intercomunicaci\u00f3n entre procesos locales m\u00e1s \u00f3ptimo para estos casos. Aunque ya hemos dicho que no ser\u00eda necesario, si se quisiera especificar la url, en este caso entonces se deber\u00eda escribir as\u00ed: ldapi://%2fruta%2fcarpeta%2ffichero.socket (notar que el protocolo es \"ldapi\" y no \"ldap\" y que las \"/\" se sustituyen por \"%2f\"). Nota En el caso de contactar con un servidor LDAPS (es decir, funcionando sobre TLS), dicho servidor puede o bien ofrecer un certificado autofirmado o bien un certificado firmado por una determinada CA (Autoridad de Certificaci\u00f3n). En el primer caso, para que los clientes admitan ese servidor como seguro se ha establecer previamente la variable de entorno LDAPTLS_REQCERT al valor \"never\" (simplemente precediendo el comando en cuesti\u00f3n con la expresi\u00f3n LDAPTLS_REQCERT=never ya ser\u00eda suficiente). En el segundo caso, se ha de establecer previamente la variable de entorno LDAPTLS_CACERT indicando la ruta del certificado de la CA (simplemente precediendo el comando en cuesti\u00f3n con la expresi\u00f3n LDAPTLS_CACERT=/etc/dirsrv/slapd-miservidor/ca.crt , por ejemplo, ya ser\u00eda suficiente). Para que estas variables sean permanentes, se pueden indicar dentro del archivo /etc/openldap/ldap.conf -D cn=admin : Indica el \"common name\" de la cuenta de usuario (guardada en el propio servidor) con la que nos autenticaremos en el servidor LDAP para realizar la modificaci\u00f3n del directorio; esta cuenta ha de tener privilegio para ello, as\u00ed que usaremos la cuenta \"admin\" que creamos en la instalaci\u00f3n del servidor. -W : Solicita interactivamente la contrase\u00f1a de la cuenta anterior. Otra opci\u00f3n ser\u00eda indicar la contrase\u00f1a como un par\u00e1metro m\u00e1s, as\u00ed : -w contrase\u00f1a (notar que en este caso la \"w\" es min\u00fascula). -f fichero.ldif : Indica el fichero cuyo contenido se desea agregar","title":"Agregar informaci\u00f3n - Procedimiento gen\u00e9rico"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#ejercicios-agregar-datos","text":"1.- a) Crea un fichero llamado base.ldif con el contenido mostrado a continuaci\u00f3n y seguidamente agr\u00e9galo al directorio con el comando: ldapadd -D cn=admin -W -f base.ldif . Con esto habr\u00e1s generado dos entradas de tipo \u201cunidad organizativas\u201d que servir\u00e1n para contener (a modo de \u201ccarpetas\u201d) los usuarios y grupos que generaremos a continuaci\u00f3n. dn: ou=usuarios,dc=midominio,dc=local objectClass: organizationalUnit ou: usuarios dn: ou=grupos,dc=midominio,dc=local objectClass: organizationalUnit ou: grupos 1.-b) Crea un fichero llamado grupos.ldif con el siguiente contenido y seguidamente agr\u00e9galo al directorio con un comando similar al del apartado anterior: dn: cn=grupoldap,ou=grupos,dc=midominio,dc=local objectClass: posixGroup cn: grupoldap gidNumber: 10000 1.-c) Crea un fichero llamado usuarios.ldif con el siguiente contenido y seguidamente agr\u00e9galo al directorio con un comando similar al del apartado anterior: dn: uid=usu1ldap,ou=usuarios,dc=midominio,dc=local objectClass: top objectClass: inetOrgPerson objectClass: posixAccount objectClass: shadowAccount uid: usu1ldap sn: Lopez givenName: Juan cn: Juan Lopez displayName: Juan Lopez uidNumber: 3001 gidNumber: 10000 userPassword: XXX gecos: Es muy tonto loginShell: /bin/bash homeDirectory: /home/jlopez shadowExpire: -1 shadowFlag: 0 shadowWarning: 7 shadowMin: 8 shadowMax: 999999 shadowLastChange: 10877 mail: juan.lopez@gmail.com postalCode: 29000 dn: uid=usu2ldap,ou=usuarios,dc=midominio,dc=local objectClass: top objectClass: inetOrgPerson objectClass: posixAccount objectClass: shadowAccount uid: usu2ldap sn: Perez givenName: Perico cn: Pedro Perez displayName: Pedro Perez uidNumber: 3002 gidNumber: 10001 userPassword: XXX gecos: Es un crack loginShell: /bin/bash homeDirectory: /home/pperez shadowExpire: -1 shadowFlag: 0 shadowWarning: 7 shadowMin: 8 shadowMax: 999999 shadowLastChange: 10877 mail: pedrito@yahoo.es postalCode: 29001 Nota Tal como se puede ver, cada objeto \u201cusuario\u201d est\u00e1 formado a partir de la uni\u00f3n de diferentes tipos predefinidos de objeto (posixAccount, shadowAccount, inetOgPerson), donde cada uno aporta un determinado conjunto de atributos: posixAccount incluye la informaci\u00f3n que encontrar\u00edamos en el archivo \"/etc/passwd\" cl\u00e1sico, shadowAccount incluye la informaci\u00f3n que encontrar\u00edamos en el archivo \"/etc/shadow\" cl\u00e1sico y inetOrgPerson incluye informaci\u00f3n extra del usuario dentro de la organizaci\u00f3n (como el correo, c\u00f3d. Postal...). Nota Hay que tener muy en cuenta que al a\u00f1adir nuevos usuarios los valores de los atributos uidNumber y homeDirectory (adem\u00e1s de userPassword) deben ser diferentes para cada usuario. Lo mismo ocurre con el atributo gidNumber para los grupos. Adem\u00e1s, los valores de uidNumber y gidNumber no deben coincidir con el uid y gid de ning\u00fanusuario y grupo local de los clientes. Nota El valor del atributo userPassword est\u00e1 protegido por ACLs predefinidas del servidor para que tan solo el usuario administrador - o el propietario del objeto que contenga dicho atributo- pueda consultar su valor (hasheado). Internamente, los valores de todos atributos se almacenan en el backend seleccionado pero en el caso del atributo userPassword este almacenamiento se realiza del hash de la contrase\u00f1a seg\u00fan el algoritmo predefinido que el servidor tenga configurado. As\u00ed pues, un intruso que tuviera acceso directo al backend no obtendr\u00eda (de entrada) las contrase\u00f1as porque las tendr\u00eda que \"crackear\". Este aspecto es independiente del hecho de que las conexiones entre cliente y servidor deber\u00edan siempre estar encriptadas mediante TLS para evitar el robo de la contrase\u00f1a en tr\u00e1nsito. No obstante, alguien podr\u00eda objetar que escribir la contrase\u00f1a de los usuarios tal cual en un archivo ldif es un gran riesgo deseguridad. En realidad, as\u00ed es como se recomienda que se escriba este valor para dejar al servidor LDAP realizar el hash de la forma que internamente requiera con las comprobaciones pertinentes. De todas formas, si se desea, es posible escribir el valor del atributo userPassword de forma que est\u00e9 \"hasheado\". Para ello primero hay que utilizar alguna utilidad que nos genere el hash necesario; en el caso de usar 389DS disponemos del comando pwdhash , el cual, mediante su par\u00e1metro -s permite especificar el algoritmo hash deseado. Por ejemplo, para obtener el hash SHA-512 salteado (el mismo algoritmo que se utiliza actualmente para guardar las contrase\u00f1as hasheadas en el archivo \"/etc/shadow\" de la mayor\u00eda de distribuciones Linux) de la contrase\u00f1a \"hola\" deber\u00edamos ejecutarpwdhash -s SSHA512 hola El valor obtenido deber\u00eda serasignado tal cual al campo userPassword; la parte entre llaves indica al servidor LDAP que dicho valor ser\u00e1 un hash de ese tipo y que, por tanto, no deber\u00e1 hashearlo \u00e9l sino almacenarlo directamente","title":"Ejercicios Agregar Datos"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#buscar-informacion-ldapsearch","text":"Para comprobar si el contenido anterior se ha a\u00f1adido correctamente, podemos usar el comando ldapsearch (tambi\u00e9n del paquete \u201cldap-utils\u201d), el cual permite hacer una b\u00fasqueda en el directorio. La mayor\u00eda de veces necesitaremos indicar, adem\u00e1s de los par\u00e1metros -H ldap://nomDnsServidor:nopuerto , -D cn=admin y -W/-w contrase\u00f1a ya conocidos, otros como los siguientes: -LLL : Indica a ldapsearch que muestre la respuesta en modo \"no verboso\" (m\u00e1s f\u00e1cil de leer) d 1 : d 1, d 2, ..... establece el nivel de debug y muestra errores detallados en el resultado del comando. -b \"dc=midominio,dc=local\" : Indica el DN \"base\" a partir del cual se empezar\u00e1 la b\u00fasqueda por las entradas inferiores del \u00e1rbol. El ejemplo anterior buscar\u00eda a partir de la entrada ra\u00edz \"para abajo\" por todas las subentradas. Pero no es necesario que la entrada ra\u00edz sea el DN \"base\": si, por ejemplo, escribi\u00e9ramos -b \"ou=grupos,dc=midominio,dc=local\" entonces solo se buscar\u00eda a partir de la organizationalUnit \"grupos\" \"para abajo\" por las subentradas que contuviera. Nota NOTA: En el servidor 389DS, l'entrada \"cn=config\" pot fer-se servir com a DN base per obtenir tota la configuraci\u00f3 del propi servidor -s {base | one | sub } : El comportamiento descrito en el p\u00e1rrafo anterior de buscar recursivamente todas las entradas por debajo de una entrada \"base\" dada (incluyendo \u00e9sta) es el comportamiento por defecto, que equivaldr\u00eda a indicar el par\u00e1metro -s sub Pero otros valores de este par\u00e1metro modifican el \"scope\" de la b\u00fasqueda; por ejemplo, -s base solamente muestra informaci\u00f3n de la entrada marcada como \"base\" y nada m\u00e1s (es decir, no recorre ninguna rama del \u00e1rbol) -s one solamente muestra informaci\u00f3n de las entradas directamente colgando de la entrada \"base\" pero nada m\u00e1s (es decir, s\u00f3lo muestra las entradas \"hijas\": ni muestra entradas \"nietas\" ni la propia entrada \"base\") \"(atributo=valor)\" \"(atributo=valor)\" ... : Filtro que permite \"quedarse\", de todas las entradas recorridas, solo con las que contienen el atributo indicado con el valor indicado. Existen otros filtros m\u00e1s sofisticados que se pueden estudiar en el cuadro inferior. Si aparece este par\u00e1metro, ha de ir escrito despu\u00e9s de cualquier otro par\u00e1metro de los anteriores. Si no aparece, todas las entradas recorridas ser\u00e1n \"v\u00e1lidas\" para mostrarse. Nota is a special value representing \u201cany possible value\u201d. It can be used to build a \"presence\" filter that requests all objects where the attribute is present and has a valid value, but we do not care what the value is. For instance, by default, ldapsearch provides the filter \"(objectClass=*)\"; because all objects must have an objectClass, this filter is the equivalent to saying \u201call valid objects\u201d. atributo atributo ... : De la informaci\u00f3n encontrada en las entradas recorridas (y ya filtradas, si fuera el caso), se muestra solo aquellos atributos indicados. Si aparece este par\u00e1metro, ha de ir escrito despu\u00e9s del filtro (si hubiera). Si no aparece -o se escribe \"*\"-, se mostrar\u00e1n todos los atributos pertenecientes a las entradas recorridas (y ya filtradas si fuera el caso); en el caso de escribir \"+\" se mostrar\u00e1n los metaatributos de la entradas recorridas (como la fecha de creaci\u00f3n de la entrada, el usuario que la cre\u00f3, etc). Nota To show what basedns are available, you can query the special \u2018\u2019 or blank rootDSE (Directory Server Entry) using \"namingContexts\" as the attribute to look up, like this: ldapsearch -D cn=admin -W -LLL -b \"\" -s base namingContexts 2.- Ejecuta el comando ldapsearch -D cn=admin -W -LLL -b \"dc=midominio,dc=local\" uid=usu1ldap sn givenName Con este comando de ejemplo estaremos buscando un usuario con uid=usu1ldap y pediremos que nos muestre solo el contenido de los atributos sn y givenName. Comprueba que efectivamente sea as\u00ed: Nota Es posible realizar consultas an\u00f3nimas (es decir, sin necesidad de autenticarse) pero para ello ser\u00eda necesario configurar el servidor 389DS convenientemente (ver para m\u00e1s informaci\u00f3n) y sustituir los par\u00e1metros -D y -W de ldapsearch por -x *A filter can request objects whose attribute values are greater/less than a value by \"(uid>=test0005)\" or \"(uid<=test0005)\".If used with letters, it compares alphabetically. A filter can request a partial match of an attribute value on the object by using the \u2018 \u2019 operator (multiple times if necessary): \"(uid= 005)\" or \"(uid=*st000 )\". Note you should always have at least 3 characters in your substring filter, else indexes may not operate efficently. *Filters can be nested with AND (&) or OR (|) conditions. Condition applies to all filters that follow within the same level of brackets, that is: (condition (attribute=value)(attribute=value)). AND requires that for an object to match, all filter elements must match; this is the \u201cintersection\u201d operation and is written like this: \"(&(uid=test0006)(uid=guest0006))\" OR filters will return the aggregate of all filters; this is the union operation so provided an object satisfies one condition of the OR, it will be part of the returned set; it's written like this: (|(uid=test0006)(uid=guest0007)) *A NOT filter acts to invert the result of the inner set. For example: \"(!(uid=test0010))\" Note you can\u2019t list multiple parameters in a \"not\" condition: to combine NOT's you need to use this in conjunctionwith AND and OR. Nota NOTA: *You can nest AND, OR and NOT filters to produce more complex directed queries. For instance this query: (&(objectClass=person)(objectClass=posixAccount)(|(uid=test000*))(!(uid=test0001))) would be equivalent to...: (& (objectClass=person) (objectClass=posixAccount) (| (uid=test000*) ) (!(uid=test0001)) ) ...and it expresses \"All person whose name starts with test000* and not test0001\". Another example would be this: (|(& (...K1...) (...K2...))(& (...K3...) (...K4...))) which means (K1 AND K2) OR (K3 AND K4)","title":"Buscar informaci\u00f3n - ldapsearch"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#borrar-y-modificar-informacion-ldapdelete-y-ldapmodify","text":"Otros comandos importantes del paquete \u201cldap-util\u201d son ldapdelete y ldapmodify. Un ejemplo del primero podr\u00eda ser: ldapdelete -D cn=admin -W \"uid=usu2ldap,ou=usuarios,dc=midominio,dc=local\" donde se ha indicado el DN del elemento que se desea eliminar. El segundo tiene tres formas de modificar una entrada: cambiando el valor de un atributo , a\u00f1adiendo un nuevo atributo o eliminando un atributo existente: -Para cambiar, por ejemplo, el atributo uidNumber de un usuario, podr\u00edamos ejecutar el comando ldapmodify -D cn=admin -W -f fichero.cambios donde fichero.cambios deber\u00eda tener un contenido como el siguiente (donde se especifica qu\u00e9 entradas se quieren modificar y de qu\u00e9 manera): dn:uid=usu2ldap,ou=usuarios,dc=midominio,dc=local changetype:modify replace:uidNumber uidNumber:3002 Nota NOTA: La informaci\u00f3n anterior la podr\u00edamos haber introducido directamente desde la entrada est\u00e1ndar si no hubi\u00e9ramos especificado el par\u00e1metro -f. -Para a\u00f1adir un atributo nuevo (en este caso llamado jpegPhoto) deber\u00edamos ejecutar el mismo comando ldapmodify anterior pero ahora fichero.cambios deber\u00eda tener un contenido como este: dn:uid=usu2ldap,ou=usuarios,dc=midominio,dc=local changetype: modify add:jpegPhoto jpegPhoto:file:///tmp/foto.png -Para eliminar un atributo (en este caso llamado jpegPhoto) deber\u00edamos ejecutar el mismo comando ldapmodify anterior pero ahora \"fichero.cambios\" deber\u00eda tener un contenido como este: dn:uid=usu2ldap,ou=usuarios,dc=midominio,dc=local changetype: modify delete:jpegPhoto Nota ya que la configuraci\u00f3n del servidor 389DS es troba accessible en forma directori, la comanda ldapmodify es podria utilitzar per modificar aquesta configuraci\u00f3 \"en calent\". Per exemple, sabent que les directives \"nsslapd-ldapilisten\" i \"nsslapd-ldapifilepath\" activen el mecanisme LDAPI i especifiquen la ruta del socket adient, respectivament, per activar aquesta caracter\u00edstica (que ja ve de s\u00e8rie activada, per\u00f2 \u00e9s nom\u00e9s un exemple), podr\u00edem fer com sempre: ldapmodify -D cn=admin -W -f fichero.cambios pero ara el contingut del fitxer \"fichero.cambios\" seria: dn: cn=config changetype: modify replace: nsslapd-ldapilisten nsslapd-ldapilisten: on - add: nsslapd-ldapifilepath nsslapd-ldapifilepath: /var/run/slapd-exemple.socket Nota NOTA: En realitat, per afegir entrades i per eliminar entrades no caldria fer servir les comandes ldapadd i ldapdelete respectivament, ja que amb ldapmodify ja n'hi hauria prou. En el cas de voler afegir una entrada el fitxer \"fichero.cambios\" hauria de tenir un contingut semblant al seg\u00fcent...: dn: <dn to add> changetype: add objectclass: ... attribute1: ... attribute2: ... ...i en el cas de voler eliminar una entrada, el seu contingut hauria de ser semblant a aquest: dn: <dn to delete> changetype: delete 3.-a) Modifica el atributo \u201cgecos\u201d del usuario Juan L\u00f3pez para que muestre la descripci\u00f3n: \u201cRonca\u201d. Comprueba mediante ldapsearch que el cambio lo has realizado correctamente b) A\u00f1ade el atributo \u201cjpegPhoto\u201d del usuario Juan L\u00f3pez indicando la ruta (ficticia) de su foto identificativa. Comprueba mediante ldapsearch que el cambio lo has realizado correctamente c) Elimina el atributo \u201cjpegPhoto\u201d anterior.Comprueba mediante ldapsearch que el cambio lo has realizado correctamente","title":"Borrar y modificar informaci\u00f3n ldapdelete y ldapmodify"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#acis","text":"By default, the directory server denies access to everything. The administrator must allow certain types of access to certain resources for users to be able to use the directory server. The operational attribute aci is used for access control. This attribute can be applied to any entry in the directory tree, and has subtree scope: it applies to the entry that contains it and any children and descendants of that entry. An ACI consists of 3 parts: a target, a subject, and the type of access (permission): The target represents the entry or resource is being protected. The target specification should be a DN (written with the syntax \"ldap:///DN\"), but can be stretched by specifying one or more atributes to restrict its application, or even a LDAP filter. Writing a target it's optional: by default it applies to all entries in subtree scope of the entry which ACI is defined (that's is which contains the aciattribute). The subject represents the entity which is granted (or denied) access to the target. The subject may be userdn=\"ldap:///DN\" or groupdn=\"ldap:///DN\" (where DN can be any DN of a user or a group, respectively). It also can be some of these values: userdn=\"ldap:///self\" (to specify the user who has done the query), userdn=\"ldap:///anyone\" (to specify anonymous binds), or userdn=\"ldap:///all\" (to specify any authenticated user). Modifiers can be used to allow or deny access based on the client IP address or hostname, access time, or connection type (encrypted or not). You can also use attributes to specify a subject with userattr=\"attrname\" syntax. The permission is any combination of the following keywords: read Indicates whether directory data may be read. Indicates whether directory data may be changed or created. This permission also allows write directory data to be deleted but not the entry itself: to delete an entire entry, the user must have delete permissions. search Indicates whether the directory data can be searched. This differs from the read permission in that read allows directory data to be viewed if it is returned as part of a search operation. For example, if searching for common names is allowed as well as read permission for a person's room number, then the room number can be returned as part of the common namesearch, but the room number itself cannot be used as the subject of a search. Use this combination to prevent people from searching the directory to see who sits in a particular room. add Indicates whether child entries beneath the targeted entry can be created. delete Indicates whether targeted entry can be deleted. all Means all types of above accesses The permission is modified by using allow or deny If there are conflicts between what is allowed and what is denied, the deny wins. Better explained: when a user attempts any kind of access to a directory entry, Directory Server applies the precedence rule. This rule states that when two conflicting permissions exist, the permission that denies access always takes precedence over the permission that grants access. For example, if write permission is denied at the directory's root level, and that permission is applied to everyone accessing the directory, then no user can write to the directory regardless of any other permissions that may allow write access. To allow a specific user write permissions to the directory, the scope of the original deny-for-write has to be set so that it does not include that user. Then, there must be additional allow-for-write permission for the user in question. The aci attribute has the following syntax (version 3.0 and acl \"name\" values are mandatory and, as it can be seen, several targets can be specified as well as several allow(permission)(subject)... values): aci: (target=\"ldap:///DN)(target=...)(version 3.0; acl \"name\"; allow(per,miss,ion)(userdn=\"ldap:///subject\"); allow...;) Nota NOTA: Some interesting modifiers to add in a ACI to restrict targeted entries are \"targetattr\" and \"targetfilter\" keywords, (which must be specified after these targeted entries). Another interesting keyword is \"targetscope\" For instance, in the following example, the ACI states that \"bjensen\" has rights to modify all attributes in her own directory entry: aci: (target=\"ldap:///uid=bjensen,dc=example,dc=com\")(targetattr=\"*\")(targetscope=\"subtree\")(version 3.0; acl \"example\"; allow (write)(userdn=\"ldap:///self\");) Access control rules can be placed on any entry in the directory although administrators often place access control rules on entries with the object classes \"domainComponent\", \"organizationalUnit\", \"inetOrgPerson\", or \"group\". You can add/replace/delete an aci attribute like any other using LDIF files and ldapmodify command. For instance, this content would add the permission of anonymous searches/reads to all the directory's content: dn:dc=midominio,dc=local changetype: modify add:aci aci: (targetattr!=\"userPassword\")(version 3.0; acl \"xxx\"; allow(read,search)(userdn=\"ldap:///anyone\");) The aci attribute is a multi-valued operational attribute that can be read and modified by directory users. Therefore, the ACI attribute itself should be protected by ACIs. Administration users are usually given full access to the aci attribute doing ldapsearch -D cn=admin -W -b entryDN -s base \"(objectclass=*)\" aci","title":"ACIs"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#login-ldap-desde-cliente-con-sssd","text":"","title":"Login LDAP desde cliente con SSSD"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#introduccion","text":"En Linux se puede utilizar el demonio SSSD para autenticar al usuario contra servidores LDAP remotos (Combinados con servidores Kerberos o no) adem\u00e1s de identificarlos. Mediante SSSD todo el proceso de autenticaci\u00f3n / identificaci\u00f3n del usuario se produce en el cliente de una forma homog\u00e9nea y coherente, independientemente de la distribuci\u00f3n Linux all\u00ed instalada. Nota Adem\u00e1s de autenticarse contra servidores LDAP \"pelados\" o combinados con Kerberos, el demonio SSSD tambi\u00e9n permite autenticar usuarios contra sistemas integrales empresariales como FreeIPA o Active Directory (los cuales internamente se basan en LDAP / Kerberos). En cambio, no puede trabajar (todav\u00eda) con SGBDs o servidores RADIUS como fuente de autenticaci\u00f3n / identificaci\u00f3n Una gran ventaja de utilizar SSSD en vez de los m\u00f3dulos PAM / NSS \"standalone\" individualmente es que este demonio guarda una cach\u00e9 (en la carpeta /var/lib/sss/db ) que permite el acceso \"Offline\" a / los sistema/s cliente/s (sin tener ninguna cuenta local diferente) en el caso de que el servidor LDAP / Kerberos remoto no est\u00e9 disponible en ese momento o, en caso de que s\u00ed, disminuir su carga. Nota NOTA: El demonio SSSD tambi\u00e9n ofrece una interfaz D-Bus para poder interactuar con el sistema mediante este m\u00e9todo y as\u00ed obtener, por ejemplo, informaci\u00f3n extra sobre el usuario (tal como veremos). El demonio SSSD proporciona sus propios m\u00f3dulos PAM y NSS para conectar con servidores LDAP / Kerberos y LDAP, respectivamente, los cuales son diferentes de los m\u00f3dulos \"standalone\" pam_ldap / pam_krb5 y nss_ldap ya conocidos. Esto es porque SSSD ofrece funcionalidades extra como un framework conjunto y librer\u00edas homog\u00e9neas, un mecanismo de cach\u00e9 de credenciales -similar al que ofrec\u00eda el demonio ncsd, ya obsoleto-, una interfaz D-Bus, etc. Para que los programas de inicio de sesi\u00f3n (login, gdm, su, sudo, ssh, etc) utilicen los m\u00f3dulos PAM / NSS propios de SSSD deberemos realizar un conjunto de configuraciones al sistema que explicaremos a continuaci\u00f3n. Nota NOTA: En Ubuntu hay que instalar el paquete \"sssd\" (es decir, el demonio SSSD no viene preinstal.lat \"de f\u00e1brica\"). Afortunadamente, al instalar este paquete ya se instalar\u00e1n autom\u00e1ticamente como dependencia el resto de paquetes que podamos necesitar, como los conectores con los diferentes providers: \"sssd-ldap\", \"sssd-krb5\", \"sssd-ipa\", etc. En Fedora todos estos paquetes ya vienen instalados \"de f\u00e1brica\".","title":"Introducci\u00f3n"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#configuracion-de-sssd","text":"SSSD lee los archivos de configuraci\u00f3n en este orden: primero lee el archivo primario /etc/sssd/sssd.conf y luego, otros archivos * .conf en /etc/sssd/conf.d (en orden alfab\u00e9tico). Si aparece el mismo par\u00e1metro en m\u00faltiples archivos de configuraci\u00f3n, SSSD usa el \u00faltimo par\u00e1metro de lectura. Esto le permite usar el valor predeterminado /etc/sssd/sssd.conf en todos los clientes y aagregar configuraciones adicionales en otros archivos de configuraci\u00f3n para extender la funcionalidad individualmente por cliente. Atenci\u00f3n Todos estos archivos deben ser propiedad de root:root y tener permisos 600 de lo contrario el servicio sssd no se iniciar\u00e1. Los proveedores de autenticaci\u00f3n e identidad se configuran como \"dominios\" en el archivo de configuraci\u00f3n SSSD. Puede configurar varios dominios para SSSD pero al menos un dominio debe estar configurado, de lo contrario, SSSD no arrancar\u00e1. Un solo dominio se puede usar como: Un proveedor de autenticaci\u00f3n (para solicitudes de autenticaci\u00f3n) Un proveedor de identidad (para informaci\u00f3n del usuario) Un proveedor de control de acceso (para solicitudes de autorizaci\u00f3n). No los estudiaremos aqu\u00ed. Una combinaci\u00f3n de estos proveedores (si todas las operaciones correspondientes se realizan dentro de un solo servidor) Nota Tambi\u00e9n hay lo que se llama un proveedor \"proxy\". Este proveedor funciona como un intermediario de retransmisi\u00f3n entre SSSD y recursos que SSSD de otra forma no podr\u00edan usar. Cuando se usa un proveedor proxy, SSSD se conecta al servicio proxy, y el proxy carga las bibliotecas especificadas. Con un proveedor de proxy, puede configurar SSSD para utilizar m\u00e9todos de autenticaci\u00f3n alternativos, como un esc\u00e1ner de huellas digitales, entre otras cosas.","title":"Configuraci\u00f3n de SSSD:"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#seccion-sssd","text":"En el archivo \"sssd.conf\" debe haber al menos una secci\u00f3n general [sssd] y una secci\u00f3n para cada dominio. Debajo de la secci\u00f3n [sssd] debemos tener en cuenta esta l\u00ednea (m\u00e1s informaci\u00f3n en man sssd.conf): domains = Especifica una lista separada por comas de dominios definidos en el orden que desee para ser consultado Por lo tanto, si un dominio no aparece en esta lista, no se consultar\u00e1 aunque est\u00e9 definido en el archivo \"sssd.conf\"","title":"Secci\u00f3n [sssd]"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#seccion-domainxxx","text":"Las secciones correspondientes a dominios definidos deben titularse as\u00ed [domain/xxx] donde \"xxx\" puede ser cualquier cosa. Debajo de una secci\u00f3n de dominio debemos tener en cuenta estas l\u00edneas (m\u00e1s en man sssd.conf): Line \"auth_provider = \": establece el proveedor de autenticaci\u00f3n utilizado para el dominio. Los valores posibles son: - \"ldap\", \"krb5\", \"ipa\", \"ad\" o \"proxy\", entre otros. Dependiendo del proveedor elegido, habr\u00e1 sea \u200b\u200bnecesario escribir l\u00edneas m\u00e1s espec\u00edficas (ver man sssd-ldap, man sssd-krb5, man sssd-ipa u man sssd-ad para m\u00e1s detalles). -Line \"id_provider =\" : establece el proveedor de identidad utilizado para el dominio. Los valores posibles son: \"ldap\", \"archivos\", \"ipa\", \"anuncio\" o \"proxy\". Dependiendo del proveedor elegido, habr\u00e1 que escribir l\u00edneas m\u00e1s espec\u00edficas (vea man sssd-ldap, man sssd-files, man sssd-ipa o man sssd-ad para m\u00e1s detalles). -Line \"access_provider =\" : establece el proveedor de acceso utilizado para el dominio, que se utiliza para evaluar qu\u00e9 usuarios tienen acceso al sistema. Incluso si un usuario se autentica con \u00e9xito, si no Si cumple con los criterios proporcionados por el proveedor de acceso, su acceso ser\u00e1 denegado. Los valores posibles son: \"ldap\", \"krb5\", \"simple\", \"ipa\", \"ad\", \"proxy\", \"denegar\" (siempre niega el acceso) o \"permitir\" (por defecto,siempre permite el acceso). Dependiendo del proveedor elegido, habr\u00e1 que escribir m\u00e1s. l\u00edneas espec\u00edficas (vea man sssd-ldap, man sssd-krb5, man sssd-simple, man sssd-ipa o man sssd-ad para detalles). Nota NOTA: El proveedor de acceso \"simple\" permite o niega el acceso basado en una lista de nombres de usuario o grupos. Permite restringir el acceso a m\u00e1quinas espec\u00edficas. Por ejemplo, en las computadoras port\u00e1tiles de la compa\u00f1\u00eda, puede usar el proveedor de acceso simple para restringir el acceso solo a un usuario espec\u00edfico o un grupo espec\u00edfico. Otros usuarios o grupos no podr\u00e1n iniciar sesi\u00f3n incluso si se autentican correctamente en el proveedor de autenticaci\u00f3n configurado. [domain/nombre_dominio] ... access_provider = simple simple_allow_users = usuario1, usuario2 #simple_allow_groups = group1 Si el proveedor de acceso que est\u00e1 utilizando es el \"ldap\", tambi\u00e9n puede especificar un filtro de control de acceso LDAP que el usuario debe coincidir para poder acceder al sistema. [domain/domain_name] ... access_provider = ldap ldap_access_filter = (memberOf=cn=allowedusers,ou=Groups,dc=example,dc=com) #ldap_access_order = filter, host, authorized_service Nota NOTA: La directiva ldap_access_order puede tener estos valores (se pueden indicar por orden de aplicaci\u00f3n): *\"filter\" : Se usa el filtro indicado en ldap_access_filter como criterio. Valor per defecto *\"host\" : Se usa el atributo \"host\" en el directorio como criterio *\"authorized_service\" : Se usa el valor de \"authorizedService\" en el directorio como criterio *\"expire\" : Se usa el valor de la directiva ldap_account_expire_policy como criterio -Line \"chpass_provider = \": establece el proveedor que debe manejar las operaciones de cambio de contrase\u00f1a para el dominio. Los valores posibles son: \"ldap\", \"krb5\", \"ipa\", \"ad\", \"proxy\" o \"none\" (esto expl\u00edcitamente deshabilita la capacidad de cambiar las contrase\u00f1as). Si no se especifica esta l\u00ednea, entonces se usa por defecto el valor especificado en la l\u00ednea \"id_provider\". Ver man sssd-sudo para detalles Nota Nota SSSD no almacena en cach\u00e9 las credenciales de usuario de forma predeterminada. Entonces, al procesar solicitudes de autenticaci\u00f3n,de manera predeterminada, SSSD siempre contacta al proveedor de identidad; si el proveedor no est\u00e1 disponible, la autenticaci\u00f3n de usuario falla Para garantizar que las credenciales se almacenen localmente despu\u00e9s de autenticar con \u00e9xito a los usuarios para que puedan mantener autenticaci\u00f3n incluso cuando el proveedor de identidad no est\u00e1 disponible, debe habilitar el almacenamiento en cach\u00e9 de credenciales local agregando la l\u00ednea cache_credentials = true debajo de la secci\u00f3n de dominio correspondiente. Por defecto, la credencial la memoria cach\u00e9 nunca caduca: si desea que sssd elimine las credenciales almacenadas en cach\u00e9, account_cache_expiration = line hacer que caduquen despu\u00e9s del n\u00famero de d\u00edas especificado. Nota Cuando un usuario intenta una operaci\u00f3n de sudo, ya sabemos que SSSD contacta al proveedor de identidad / sudo definido en el dominio para obtener la informaci\u00f3n requerida sobre la configuraci\u00f3n actual de sudo. Si la l\u00ednea cache_credentials se establece en true,tambi\u00e9n almacenar\u00e1 esa informaci\u00f3n de sudo en una memoria cach\u00e9, para que los usuarios puedan realizar operaciones de sudo incluso cuando LDAP / IPA / AD El servidor est\u00e1 fuera de l\u00ednea.","title":"Secci\u00f3n [domain/xxx]"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#secciones-opcionales-pam-y-o-nss","text":"Las secciones opcionales [pam] y / o [nss] tambi\u00e9n pueden aparecer en el archivo \"sssd.conf\". Podr\u00edan ser utilizadas para configurar algunos aspectos del comportamiento de los m\u00f3dulos PAM o NSS de SSSD, respectivamente. Por ejemplo, si se quiere configurar un l\u00edmite de tiempo (en d\u00edas) para cu\u00e1nto tiempo SSSD permite la autenticaci\u00f3n sin conexi\u00f3n si el proveedor de identificaci\u00f3n no est\u00e1 disponible, puede usar la l\u00ednea offline_credentials_expiration = debajo de la secci\u00f3n [pam] para especificar ese l\u00edmite de tiempo. Otras l\u00edneas interesantes para especificar debajo de la secci\u00f3n [pam] son offline_failed_login_attempts = , offline_failed_login_delay = o reconnection_retries , entre otros. Igualmente, debajo de la secci\u00f3n [nss] algunas l\u00edneas interesantes que merecen atenci\u00f3n son filter_groups = y filter_users = (que excluye a ciertos usuarios, por defecto, solo \"root\") de ser extra\u00eddos del backend NSS Esto es particularmente \u00fatil para las cuentas del sistema .; esta opci\u00f3n tambi\u00e9n se puede establecer por dominio o incluir nombres totalmente calificados para filtrar solo usuarios del dominio en particular), entry_cache_timeout = (que especifica cu\u00e1ntos segundos, por defecto 5400- debe considerar sssd entradas v\u00e1lidas antes de preguntar al NSS backend otra vez), \"entry_cache_nowait_percentage =\", \"override_homedir =\", \"override_shell =\", \"allowed_shells =\", etc.","title":"Secciones opcionales [pam] y / o [nss]"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#ejemplo-1-un-servidor-ldap-como-proveedor-de-autenticacion-e-identidad","text":"Un fichero \"sssd.conf\" podr\u00eda ser algo as\u00ed: [sssd] domains=pepito [domain/pepito] auth_provider=ldap id_provider=ldap ldap_uri=ldaps://ldapserver.example.com ldap_search_base=dc=example,dc=com Nota SSSD always uses an encrypted channel for authentication, which ensures that passwords are never sent over the network unencrypted but forces the LDAP server to run over TLS. If this LDAP server used a self-signed certificate, you must add the line ldap_tls_reqcert=allow in the sssd.conf file so that client doesn't reject it. If this LDAP used a ca-signed certificate instead, you should add the line ldap_tls_cacert = /etc/pki/tls/certs/ca-bundle.crt instead (pointing to the right CA's bundle file in each case). Anyway, if you wanted identity lookups (such as commands based on the id or getent utilities) were also encrypted (or if LDAP server only runs over TLS), you should add the \" ldap_id_use_start_tls =true line. Nota If LDAP server's configuration requires that queries to LDAP directory have to be authenticated, you should add the ldap_default_bind_dn= cn=admin and ldap_default_authtok= 12345 lines to specify which user (\"cn=admin\" in this example) and password (\"12345\" in this example) should be used to do these queries, respectively.","title":"Ejemplo 1 (un servidor LDAP como proveedor de autenticaci\u00f3n e identidad)"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Servidor%20LDAP%20389DS/#example-2-a-kdc-server-as-authentication-provider-and-a-ldap-server-as-identity-provider","text":"A suitable sssd.conf file could be like this: [sssd] domains=pepito [domain/pepito] auth_provider=krb5 krb5_server=kdc.example.com krb5_realm=EXAMPLE.COM id_provider=ldap ldap_uri= ... ldap_search_base= ... Nota NOTA: If the Change Password service is not running on the KDC specified in \"krb5_server\" or \"krb5_backup_server\" lines, you can use the \"krb5_passwd\" line to specify the server where the service is running or a chpass_provider instead.","title":"Example 2 (a KDC server as authentication provider and a LDAP server as identity provider)"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Virtual%20Box%20Image%20Fedora/","text":"Virtual Box Image Fedora \u00b6 Es posible descargar una imagen virtualizada de Fedora Workstation desde osboxes.org, un sitio con multitud de im\u00e1genes virtualizadas ya listas para usar: https://www.osboxes.org/fedora/ Una vez descargada, importamos la imagen en virtualbox y usamos usuario: osboxes.org clave: osboxes.org","title":"Virtual Box Image Fedora"},{"location":"kb/GNU-Linux/pr%C3%A1cticas/Virtual%20Box%20Image%20Fedora/#virtual-box-image-fedora","text":"Es posible descargar una imagen virtualizada de Fedora Workstation desde osboxes.org, un sitio con multitud de im\u00e1genes virtualizadas ya listas para usar: https://www.osboxes.org/fedora/ Una vez descargada, importamos la imagen en virtualbox y usamos usuario: osboxes.org clave: osboxes.org","title":"Virtual Box Image Fedora"},{"location":"kb/Otros/Contabilidad/","text":"Contabilidad financiera \u00b6 Incluye los informes de Balance y la Cuenta de resultados. Las normas son marcadas por el Plan General Contable y en el caso de Asociaciones en Catalu\u00f1a por el plan general contable para Fundaciones / Asociaciones. El resultado de ingresos-gastos va incorporado en la cuenta 129. Doble partida \u00b6 Un hecho econ\u00f3mico se registra en dos puntos de vista, es lo que se llama de doble partida.Cada transacci\u00f3n es registrada por entradas en al menos dos cuentas. Siempre que se compra algo, aumenta el inventario y se produce un gasto, cuando se vende algo, disminuye el inventario y aumentan los ingresos. Sobre el cierre contable \u00b6 El balance se acumula de a\u00f1o en a\u00f1o sin embargo, la cuenta de resultados se reinicia cada a\u00f1o desde 0. Para realizar este reinicio, se realiza un cierre contable. En el momento del cierre, las cuentas 6 y 7 se ponen a 0 El saldo final de cada cuenta pasa como saldo inicial al a\u00f1o siguiente. El cierre se realiza al final de ejercicio, normalmente en Enero, ya que el ejercicio se ha cerrado en Diciembre. Cuentas en T \u00b6 Todas las cuentas tienen una estructura llamada en T El debe siempre va en el lado izquierdo y el haber en la parte derecha. Estas palabras no significan que nos deban o que tengamos algo, simplemente es una forma de referirse a esas columnas como convenci\u00f3n. En funci\u00f3n de la cuenta el \"Debe\" y el \"haber\" restan o suman. Tipos de cuenta \u00b6 Cuentas de Activo \u00b6 Se refiere a las cuentas de dinero en caja, banco, bienes, existencias. En una contabilidad de una asociaci\u00f3n, suman como activo por ej. las cuotas de los socios y restan por ej. el seguro, servicios de catering etc. Patrimonio neto / pasivo \u00b6 Cuentas de Ingreso \u00b6 Cuentas de Gasto \u00b6 Cuentas de Patrimonio \u00b6","title":"Contabilidad"},{"location":"kb/Otros/Contabilidad/#contabilidad-financiera","text":"Incluye los informes de Balance y la Cuenta de resultados. Las normas son marcadas por el Plan General Contable y en el caso de Asociaciones en Catalu\u00f1a por el plan general contable para Fundaciones / Asociaciones. El resultado de ingresos-gastos va incorporado en la cuenta 129.","title":"Contabilidad financiera"},{"location":"kb/Otros/Contabilidad/#doble-partida","text":"Un hecho econ\u00f3mico se registra en dos puntos de vista, es lo que se llama de doble partida.Cada transacci\u00f3n es registrada por entradas en al menos dos cuentas. Siempre que se compra algo, aumenta el inventario y se produce un gasto, cuando se vende algo, disminuye el inventario y aumentan los ingresos.","title":"Doble partida"},{"location":"kb/Otros/Contabilidad/#sobre-el-cierre-contable","text":"El balance se acumula de a\u00f1o en a\u00f1o sin embargo, la cuenta de resultados se reinicia cada a\u00f1o desde 0. Para realizar este reinicio, se realiza un cierre contable. En el momento del cierre, las cuentas 6 y 7 se ponen a 0 El saldo final de cada cuenta pasa como saldo inicial al a\u00f1o siguiente. El cierre se realiza al final de ejercicio, normalmente en Enero, ya que el ejercicio se ha cerrado en Diciembre.","title":"Sobre el cierre contable"},{"location":"kb/Otros/Contabilidad/#cuentas-en-t","text":"Todas las cuentas tienen una estructura llamada en T El debe siempre va en el lado izquierdo y el haber en la parte derecha. Estas palabras no significan que nos deban o que tengamos algo, simplemente es una forma de referirse a esas columnas como convenci\u00f3n. En funci\u00f3n de la cuenta el \"Debe\" y el \"haber\" restan o suman.","title":"Cuentas en T"},{"location":"kb/Otros/Contabilidad/#tipos-de-cuenta","text":"","title":"Tipos de cuenta"},{"location":"kb/Otros/Contabilidad/#cuentas-de-activo","text":"Se refiere a las cuentas de dinero en caja, banco, bienes, existencias. En una contabilidad de una asociaci\u00f3n, suman como activo por ej. las cuotas de los socios y restan por ej. el seguro, servicios de catering etc.","title":"Cuentas de Activo"},{"location":"kb/Otros/Contabilidad/#patrimonio-neto-pasivo","text":"","title":"Patrimonio neto / pasivo"},{"location":"kb/Otros/Contabilidad/#cuentas-de-ingreso","text":"","title":"Cuentas de Ingreso"},{"location":"kb/Otros/Contabilidad/#cuentas-de-gasto","text":"","title":"Cuentas de Gasto"},{"location":"kb/Otros/Contabilidad/#cuentas-de-patrimonio","text":"","title":"Cuentas de Patrimonio"},{"location":"kb/Otros/Servidores%20DNS%20p%C3%BAblicos/","text":"Google DNS \u00b6 8.8.8.8 8.8.4.4","title":"Servidores DNS p\u00fablicos"},{"location":"kb/Otros/Servidores%20DNS%20p%C3%BAblicos/#google-dns","text":"8.8.8.8 8.8.4.4","title":"Google DNS"},{"location":"kb/Programaci%C3%B3n/Expresiones%20regulares/","text":"Expresiones regulares \u00b6 El Punto \".\" \u00b6 El punto es interpretado por el motor de b\u00fasqueda como cualquier otro car\u00e1cter excepto los caracteres que representan un salto de l\u00ednea, a menos que se le especifique esto al motor de Expresiones Regulares. El punto se utiliza de la siguiente forma: Si se le dice al motor de RegEx que busque \"g.t\" en la cadena \"el gato de piedra en la g\u00f3tica puerta de getisboro goot\" el motor de b\u00fasqueda encontrar\u00e1 \"gat\", \"g\u00f3t\" y por \u00faltimo \"get\". N\u00f3tese que el motor de b\u00fasqueda no encuentra \"goot\"; esto es porque el punto representa un solo car\u00e1cter y \u00fanicamente uno. Si es necesario que el motor encuentra tambi\u00e9n la expresi\u00f3n \"goot\", ser\u00e1 necesario utilizar repeticiones, las cuales se explican m\u00e1s adelante. Aunque el punto es muy \u00fatil para encontrar caracteres que no conocemos, es necesario recordar que corresponde a cualquier car\u00e1cter y que muchas veces esto no es lo que se requiere. Es muy diferente buscar cualquier car\u00e1cter que buscar cualquier car\u00e1cter alfanum\u00e9rico o cualquier d\u00edgito o cualquier no-d\u00edgito o cualquier no-alfanum\u00e9rico. Se debe tomar esto en cuenta antes de utilizar el punto y obtener resultados no deseados. La barra inversa o contrabarra \"\\\" \u00b6 Se utiliza para \"marcar\" el siguiente car\u00e1cter de la expresi\u00f3n de b\u00fasqueda de forma que este adquiera un significado especial o deje de tenerlo. O sea, la barra inversa no se utiliza nunca por s\u00ed sola, sino en combinaci\u00f3n con otros caracteres. Al utilizarlo por ejemplo en combinaci\u00f3n con el punto \".\" este deja de tener su significado normal y se comporta como un car\u00e1cter literal. De la misma forma, cuando se coloca la barra inversa seguida de cualquiera de los caracteres especiales que discutiremos a continuaci\u00f3n, estos dejan de tener su significado especial y se convierten en caracteres de b\u00fasqueda literal. Como ya se mencion\u00f3 con anterioridad, la barra inversa tambi\u00e9n puede darle significado especial a caracteres que no lo tienen. A continuaci\u00f3n hay una lista de algunas de estas combinaciones: \\t \u2014 Representa un tabulador. \\r \u2014 Representa el \"regreso al inicio\" o sea el lugar en que la l\u00ednea vuelve a iniciar. \\n \u2014 Representa la \"nueva l\u00ednea\" el car\u00e1cter por medio del cual una l\u00ednea da inicio. Es necesario recordar que en Windows es necesaria una combinaci\u00f3n de \\r\\n para comenzar una nueva l\u00ednea, mientras que en Unix solamente se usa \\n. \\a \u2014 Representa una \"campana\" o \"beep\" que se produce al imprimir este car\u00e1cter. \\e \u2014 Representa la tecla \"Esc\" o \"Escape\" \\f \u2014 Representa un salto de p\u00e1gina \\v \u2014 Representa un tabulador vertical \\x \u2014 Se utiliza para representar caracteres ASCII o ANSI si conoce su c\u00f3digo. De esta forma, si se busca el s\u00edmbolo de derechos de autor y la fuente en la que se busca utiliza el conjunto de caracteres Latin-1 es posible encontrarlo utilizando \"\\xA9\". \\u \u2014 Se utiliza para representar caracteres Unicode si se conoce su c\u00f3digo. \"\\u00A2\" representa el s\u00edmbolo de centavos. No todos los motores de Expresiones Regulares soportan Unicode. \\d \u2014 Representa un d\u00edgito del 0 al 9. \\w \u2014 Representa cualquier car\u00e1cter alfanum\u00e9rico. \\s \u2014 Representa un espacio en blanco. \\D \u2014 Representa cualquier car\u00e1cter que no sea un d\u00edgito del 0 al 9. \\W \u2014 Representa cualquier car\u00e1cter no alfanum\u00e9rico. \\S \u2014 Representa cualquier car\u00e1cter que no sea un espacio en blanco. \\A \u2014 Representa el inicio de la cadena. No un car\u00e1cter sino una posici\u00f3n. \\Z \u2014 Representa el final de la cadena. No un car\u00e1cter sino una posici\u00f3n. \\b \u2014 Marca el inicio y el final de una palabra. \\B \u2014 Marca la posici\u00f3n entre dos caracteres alfanum\u00e9ricos o dos no-alfanum\u00e9ricos. Los corchetes \"[ ]\" \u00b6 La funci\u00f3n de los corchetes en el lenguaje de las expresiones regulares es representar \"clases de caracteres\", o sea, agrupar caracteres en grupos o clases. Son \u00fatiles cuando es necesario buscar uno de un grupo de caracteres. Dentro de los corchetes es posible utilizar el gui\u00f3n \"-\" para especificar rangos de caracteres. Adicionalmente, los metacaracteres pierden su significado y se convierten en literales cuando se encuentran dentro de los corchetes. Por ejemplo, como vimos en la entrega anterior \"\\d\" nos es \u00fatil para buscar cualquier car\u00e1cter que represente un d\u00edgito. Sin embargo esta denominaci\u00f3n no incluye el punto \".\" que divide la parte decimal de un n\u00famero. Para buscar cualquier car\u00e1cter que representa un d\u00edgito o un punto podemos utilizar la expresi\u00f3n regular \"[\\d.]\". Como se hizo notar anteriormente, dentro de los corchetes, el punto representa un car\u00e1cter literal y no un metacaracter, por lo que no es necesario antecederlo con la barra inversa. El \u00fanico car\u00e1cter que es necesario anteceder con la barra inversa dentro de los corchetes es la propia barra inversa. La expresi\u00f3n regular \"[\\dA-Fa-f]\" nos permite encontrar d\u00edgitos hexadecimales. Los corchetes nos permiten tambi\u00e9n encontrar palabras a\u00fan si est\u00e1n escritas de forma err\u00f3nea, por ejemplo, la expresi\u00f3n regular \"expresi[o\u00f3]n\" permite encontrar en un texto la palabra \"expresi\u00f3n\" aunque se haya escrito con o sin tilde. Es necesario aclarar que sin importar cuantos caracteres se introduzcan dentro del grupo por medio de los corchetes, el grupo s\u00f3lo le dice al motor de b\u00fasqueda que encuentre un solo car\u00e1cter a la vez, es decir, que \"expresi[o\u00f3]n\" no encontrar\u00e1 \"expresioon\" o \"expresio\u00f3n\". La barra \"|\" \u00b6 Sirve para indicar una de varias opciones. Por ejemplo, la expresi\u00f3n regular \"a|e\" encontrar\u00e1 cualquier \"a\" o \"e\" dentro del texto. La expresi\u00f3n regular \"este|oeste|norte|sur\" permitir\u00e1 encontrar cualquiera de los nombres de los puntos cardinales. La barra se utiliza com\u00fanmente en conjunto con otros caracteres especiales. El signo de d\u00f3lar \"$\" \u00b6 Representa el final de la cadena de caracteres o el final de la l\u00ednea, si se utiliza el modo multi-l\u00ednea. No representa un car\u00e1cter en especial sino una posici\u00f3n. Si se utiliza la expresi\u00f3n regular \".$\" el motor encontrar\u00e1 todos los lugares donde un punto finalice la l\u00ednea, lo que es \u00fatil para avanzar entre p\u00e1rrafos. El acento circunflejo \"^\" \u00b6 Este car\u00e1cter tiene una doble funcionalidad, que difiere cuando se utiliza individualmente y cuando se utiliza en conjunto con otros caracteres especiales. En primer lugar su funcionalidad como car\u00e1cter individual: el car\u00e1cter \"^\" representa el inicio de la cadena (de la misma forma que el signo de d\u00f3lar \"$\" representa el final de la cadena). Por tanto, si se utiliza la expresi\u00f3n regular \"^[a-z]\" el motor encontrar\u00e1 todos los p\u00e1rrafos que den inicio con una letra min\u00fascula. Cuando se utiliza en conjunto con los corchetes de la siguiente forma \"[^\\w ]\" permite encontrar cualquier car\u00e1cter que NO se encuentre dentro del grupo indicado. La expresi\u00f3n indicada permite encontrar, por ejemplo, cualquier car\u00e1cter que no sea alfanum\u00e9rico o un espacio, es decir, busca todos los s\u00edmbolos de puntuaci\u00f3n y dem\u00e1s caracteres especiales. La utilizaci\u00f3n en conjunto de los caracteres especiales \"^\" y \" \\(\" permite realizar validaciones en forma sencilla. Por ejemplo \"^\\d\\) \" permite asegurar que la cadena a verificar representa un \u00fanico d\u00edgito, \"^\\d\\d/\\d\\d/\\d\\d\\d\\d$\" permite validar una fecha en formato corto, aunque no permite verificar si es una fecha v\u00e1lida, ya que 99/99/9999 tambi\u00e9n ser\u00eda v\u00e1lido en este formato; la validaci\u00f3n completa de una fecha tambi\u00e9n es posible mediante expresiones regulares, como se ejemplifica m\u00e1s adelante. Los par\u00e9ntesis \"()\" \u00b6 De forma similar que los corchetes, los par\u00e9ntesis sirven para agrupar caracteres, sin embargo existen varias diferencias fundamentales entre los grupos establecidos por medio de corchetes y los grupos establecidos por par\u00e9ntesis: Los caracteres especiales conservan su significado dentro de los par\u00e9ntesis. Los grupos establecidos con par\u00e9ntesis establecen una \"etiqueta\" o \"punto de referencia\" para el motor de b\u00fasqueda que puede ser utilizada posteriormente como se denota m\u00e1s adelante. Utilizados en conjunto con la barra \"|\" permite hacer b\u00fasquedas opcionales. Por ejemplo la expresi\u00f3n regular \"al (este|oeste|norte|sur) de\" permite buscar textos que den indicaciones por medio de puntos cardinales, mientras que la expresi\u00f3n regular \"este|oeste|norte|sur\" encontrar\u00eda \"este\" en la palabra \"esteban\", no pudiendo cumplir con este prop\u00f3sito. Utilizado en conjunto con otros caracteres especiales que se detallan posteriormente, ofrece funcionalidad adicional. El signo de interrogaci\u00f3n \"?\" \u00b6 El signo de pregunta tiene varias funciones dentro del lenguaje de las expresiones regulares. La primera de ellas es especificar que una parte de la b\u00fasqueda es opcional. Por ejemplo, la expresi\u00f3n regular \"ob?scuridad\" permite encontrar tanto \"oscuridad\" como \"obscuridad\". En conjunto con los parentesis redondos permite especificar que un conjunto mayor de caracteres es opcional; por ejemplo \"Nov(.|iembre|ember)?\" permite encontrar tanto \"Nov\" como \"Nov.\", \"Noviembre\" y \"November\". Como se mencion\u00f3 anteriormente los par\u00e9ntesis nos permiten establecer un \"punto de referencia\" para el motor de b\u00fasqueda, sin embargo, algunas veces, no se desea utilizarlos con este prop\u00f3sito, como en el ejemplo anterior \"Nov(.|iembre|ember)?\". En este caso el establecimiento de este punto de referencia (que se detalla m\u00e1s adelante) representa una inversi\u00f3n in\u00fatil de recursos por parte del motor de b\u00fasqueda. Para evitar se puede utilizar el signo de pregunta de la siguiente forma: \"Nov(?:.|iembre|ember)?\". Aunque el resultado obtenido ser\u00e1 el mismo, el motor de b\u00fasqueda no realizar\u00e1 una inversi\u00f3n in\u00fatil de recursos en este grupo, sino que lo ignorar\u00e1. Cuando no sea necesario reutilizar el grupo, es aconsejable utilizar este formato. De forma similar, es posible utilizar el signo de pregunta con otro significado: Los par\u00e9ntesis definen grupos \"an\u00f3nimos\", sin embargo el signo de pregunta en conjunto con los par\u00e9ntesis triangulares \"<>\" permite \"nombrar\" estos grupos de la siguiente forma: \"^(? \\d\\d)/(? \\d\\d)/(? \\d\\d\\d\\d)$\"; Con lo cual se le especifica al motor de b\u00fasqueda que los primeros dos d\u00edgitos encontrados llevar\u00e1n la etiqueta \"D\u00eda\", los segundos la etiqueta \"Mes\" y los \u00faltimos cuatro d\u00edgitos llevar\u00e1n la etiqueta \"A\u00f1o\". A pesar de la complejidad y flexibilidad dada por los caracteres especiales estudiados hasta ahora, en su mayor\u00eda nos permiten encontrar solamente un caract\u00e9r a la vez, o un grupo de caracteres a la vez. Los metacaracteres enumerados en adelante permiten establecer repeticiones. Las llaves \"{}\" \u00b6 Com\u00fanmente las llaves son caracteres literales cuando se utilizan por separado en una expresi\u00f3n regular. Para que adquieran su funci\u00f3n de metacaracteres es necesario que encierren uno o varios n\u00fameros separados por coma y que est\u00e9n colocados a la derecha de otra expresi\u00f3n regular de la siguiente forma: \"\\d{2}\" Esta expresi\u00f3n le dice al motor de b\u00fasqueda que encuentre dos d\u00edgitos contiguos. Utilizando esta f\u00f3rmula podr\u00edamos convertir el ejemplo \"^\\d\\d/\\d\\d/\\d\\d\\d\\d \\(\" que serv\u00eda para validar un formato de fecha en \"^\\d{2}/\\d{2}/\\d{4}\\) \" para una mayor claridad en la lectura de la expresi\u00f3n. Tambi\u00e9n se podr\u00eda usar para especificar entre un n\u00famero m\u00ednimo de repeticiones y un n\u00famero m\u00e1ximo de la siguiente forma: si se desea encontrar todas las ocurrencias donde aparezca la s\u00edlaba \u201cpa\u201d dos, tres \u00f3 cuatro veces repetida, se podr\u00eda hacer as\u00ed: \u201c(pa){2,4}\u201d. !!!Nota: aunque esta forma de encontrar elementos repetidos es muy \u00fatil, algunas veces no se conoce con claridad cuantas veces se repite lo que se busca o su grado de repetici\u00f3n es variable. En estos casos los siguientes metacaracteres son \u00fatiles. El asterisco \"*\" \u00b6 El asterisco sirve para encontrar algo que se encuentra repetido 0 o m\u00e1s veces. Por ejemplo, utilizando la expresi\u00f3n \"[a- zA-Z]\\d*\" ser\u00e1 posible encontrar tanto \"H\" como \"H1\", \"H01\", \"H100\" y \"H1000\", es decir, una letra seguida de un n\u00famero indefinido de d\u00edgitos. Es necesario tener cuidado con el comportamiento del asterisco, ya que este por defecto trata de encontrar la mayor cantidad posible de caracteres que correspondan con el patr\u00f3n que se busca. De esta forma si se utiliza \" \\(.*\\) \" para encontrar cualquier cadena que se encuentre entre par\u00e9ntesis y se lo aplica sobre el texto \"Ver (Fig. 1) y (Fig. 2)\" se esperar\u00eda que el motor de b\u00fasqueda encuentre los textos \"(Fig. 1)\" y \"(Fig. 2)\", sin embargo, debido a esta caracter\u00edstica, en su lugar encontrar\u00e1 el texto \"(Fig. 1) y (Fig. 2)\". Esto sucede porque el asterisco le dice al motor de b\u00fasqueda que llene todos los espacios posibles entre dos par\u00e9ntesis. Para obtener el resultado deseado se debe utilizar el asterisco en conjunto con el signo de pregunta de la siguiente forma: \" \\(.*?\\) \" Esto es equivalente a decirle al motor de b\u00fasqueda que \"Encuentre un par\u00e9ntesis de apertura y luego encuentre cualquier car\u00e1cter repetido hasta que encuentre un par\u00e9ntesis de cierre\". El signo de suma \"+\" \u00b6 Se utiliza para encontrar una cadena que se encuentre repetida 1 o m\u00e1s veces. A diferencia del asterisco, la expresi\u00f3n \"[a-zA-Z]\\d+\" encontrar\u00e1 \"H1\" pero no encontrar\u00e1 \"H\". Tambi\u00e9n es posible utilizar este metacaracter en conjunto con el signo de pregunta para limitar hasta donde se efect\u00faa la repetici\u00f3n.","title":"Expresiones regulares"},{"location":"kb/Programaci%C3%B3n/Expresiones%20regulares/#expresiones-regulares","text":"","title":"Expresiones regulares"},{"location":"kb/Programaci%C3%B3n/Expresiones%20regulares/#el-punto","text":"El punto es interpretado por el motor de b\u00fasqueda como cualquier otro car\u00e1cter excepto los caracteres que representan un salto de l\u00ednea, a menos que se le especifique esto al motor de Expresiones Regulares. El punto se utiliza de la siguiente forma: Si se le dice al motor de RegEx que busque \"g.t\" en la cadena \"el gato de piedra en la g\u00f3tica puerta de getisboro goot\" el motor de b\u00fasqueda encontrar\u00e1 \"gat\", \"g\u00f3t\" y por \u00faltimo \"get\". N\u00f3tese que el motor de b\u00fasqueda no encuentra \"goot\"; esto es porque el punto representa un solo car\u00e1cter y \u00fanicamente uno. Si es necesario que el motor encuentra tambi\u00e9n la expresi\u00f3n \"goot\", ser\u00e1 necesario utilizar repeticiones, las cuales se explican m\u00e1s adelante. Aunque el punto es muy \u00fatil para encontrar caracteres que no conocemos, es necesario recordar que corresponde a cualquier car\u00e1cter y que muchas veces esto no es lo que se requiere. Es muy diferente buscar cualquier car\u00e1cter que buscar cualquier car\u00e1cter alfanum\u00e9rico o cualquier d\u00edgito o cualquier no-d\u00edgito o cualquier no-alfanum\u00e9rico. Se debe tomar esto en cuenta antes de utilizar el punto y obtener resultados no deseados.","title":"El Punto \".\""},{"location":"kb/Programaci%C3%B3n/Expresiones%20regulares/#la-barra-inversa-o-contrabarra","text":"Se utiliza para \"marcar\" el siguiente car\u00e1cter de la expresi\u00f3n de b\u00fasqueda de forma que este adquiera un significado especial o deje de tenerlo. O sea, la barra inversa no se utiliza nunca por s\u00ed sola, sino en combinaci\u00f3n con otros caracteres. Al utilizarlo por ejemplo en combinaci\u00f3n con el punto \".\" este deja de tener su significado normal y se comporta como un car\u00e1cter literal. De la misma forma, cuando se coloca la barra inversa seguida de cualquiera de los caracteres especiales que discutiremos a continuaci\u00f3n, estos dejan de tener su significado especial y se convierten en caracteres de b\u00fasqueda literal. Como ya se mencion\u00f3 con anterioridad, la barra inversa tambi\u00e9n puede darle significado especial a caracteres que no lo tienen. A continuaci\u00f3n hay una lista de algunas de estas combinaciones: \\t \u2014 Representa un tabulador. \\r \u2014 Representa el \"regreso al inicio\" o sea el lugar en que la l\u00ednea vuelve a iniciar. \\n \u2014 Representa la \"nueva l\u00ednea\" el car\u00e1cter por medio del cual una l\u00ednea da inicio. Es necesario recordar que en Windows es necesaria una combinaci\u00f3n de \\r\\n para comenzar una nueva l\u00ednea, mientras que en Unix solamente se usa \\n. \\a \u2014 Representa una \"campana\" o \"beep\" que se produce al imprimir este car\u00e1cter. \\e \u2014 Representa la tecla \"Esc\" o \"Escape\" \\f \u2014 Representa un salto de p\u00e1gina \\v \u2014 Representa un tabulador vertical \\x \u2014 Se utiliza para representar caracteres ASCII o ANSI si conoce su c\u00f3digo. De esta forma, si se busca el s\u00edmbolo de derechos de autor y la fuente en la que se busca utiliza el conjunto de caracteres Latin-1 es posible encontrarlo utilizando \"\\xA9\". \\u \u2014 Se utiliza para representar caracteres Unicode si se conoce su c\u00f3digo. \"\\u00A2\" representa el s\u00edmbolo de centavos. No todos los motores de Expresiones Regulares soportan Unicode. \\d \u2014 Representa un d\u00edgito del 0 al 9. \\w \u2014 Representa cualquier car\u00e1cter alfanum\u00e9rico. \\s \u2014 Representa un espacio en blanco. \\D \u2014 Representa cualquier car\u00e1cter que no sea un d\u00edgito del 0 al 9. \\W \u2014 Representa cualquier car\u00e1cter no alfanum\u00e9rico. \\S \u2014 Representa cualquier car\u00e1cter que no sea un espacio en blanco. \\A \u2014 Representa el inicio de la cadena. No un car\u00e1cter sino una posici\u00f3n. \\Z \u2014 Representa el final de la cadena. No un car\u00e1cter sino una posici\u00f3n. \\b \u2014 Marca el inicio y el final de una palabra. \\B \u2014 Marca la posici\u00f3n entre dos caracteres alfanum\u00e9ricos o dos no-alfanum\u00e9ricos.","title":"La barra inversa o contrabarra \"\\\""},{"location":"kb/Programaci%C3%B3n/Expresiones%20regulares/#los-corchetes","text":"La funci\u00f3n de los corchetes en el lenguaje de las expresiones regulares es representar \"clases de caracteres\", o sea, agrupar caracteres en grupos o clases. Son \u00fatiles cuando es necesario buscar uno de un grupo de caracteres. Dentro de los corchetes es posible utilizar el gui\u00f3n \"-\" para especificar rangos de caracteres. Adicionalmente, los metacaracteres pierden su significado y se convierten en literales cuando se encuentran dentro de los corchetes. Por ejemplo, como vimos en la entrega anterior \"\\d\" nos es \u00fatil para buscar cualquier car\u00e1cter que represente un d\u00edgito. Sin embargo esta denominaci\u00f3n no incluye el punto \".\" que divide la parte decimal de un n\u00famero. Para buscar cualquier car\u00e1cter que representa un d\u00edgito o un punto podemos utilizar la expresi\u00f3n regular \"[\\d.]\". Como se hizo notar anteriormente, dentro de los corchetes, el punto representa un car\u00e1cter literal y no un metacaracter, por lo que no es necesario antecederlo con la barra inversa. El \u00fanico car\u00e1cter que es necesario anteceder con la barra inversa dentro de los corchetes es la propia barra inversa. La expresi\u00f3n regular \"[\\dA-Fa-f]\" nos permite encontrar d\u00edgitos hexadecimales. Los corchetes nos permiten tambi\u00e9n encontrar palabras a\u00fan si est\u00e1n escritas de forma err\u00f3nea, por ejemplo, la expresi\u00f3n regular \"expresi[o\u00f3]n\" permite encontrar en un texto la palabra \"expresi\u00f3n\" aunque se haya escrito con o sin tilde. Es necesario aclarar que sin importar cuantos caracteres se introduzcan dentro del grupo por medio de los corchetes, el grupo s\u00f3lo le dice al motor de b\u00fasqueda que encuentre un solo car\u00e1cter a la vez, es decir, que \"expresi[o\u00f3]n\" no encontrar\u00e1 \"expresioon\" o \"expresio\u00f3n\".","title":"Los corchetes \"[ ]\""},{"location":"kb/Programaci%C3%B3n/Expresiones%20regulares/#la-barra","text":"Sirve para indicar una de varias opciones. Por ejemplo, la expresi\u00f3n regular \"a|e\" encontrar\u00e1 cualquier \"a\" o \"e\" dentro del texto. La expresi\u00f3n regular \"este|oeste|norte|sur\" permitir\u00e1 encontrar cualquiera de los nombres de los puntos cardinales. La barra se utiliza com\u00fanmente en conjunto con otros caracteres especiales.","title":"La barra \"|\""},{"location":"kb/Programaci%C3%B3n/Expresiones%20regulares/#el-signo-de-dolar","text":"Representa el final de la cadena de caracteres o el final de la l\u00ednea, si se utiliza el modo multi-l\u00ednea. No representa un car\u00e1cter en especial sino una posici\u00f3n. Si se utiliza la expresi\u00f3n regular \".$\" el motor encontrar\u00e1 todos los lugares donde un punto finalice la l\u00ednea, lo que es \u00fatil para avanzar entre p\u00e1rrafos.","title":"El signo de d\u00f3lar \"$\""},{"location":"kb/Programaci%C3%B3n/Expresiones%20regulares/#el-acento-circunflejo","text":"Este car\u00e1cter tiene una doble funcionalidad, que difiere cuando se utiliza individualmente y cuando se utiliza en conjunto con otros caracteres especiales. En primer lugar su funcionalidad como car\u00e1cter individual: el car\u00e1cter \"^\" representa el inicio de la cadena (de la misma forma que el signo de d\u00f3lar \"$\" representa el final de la cadena). Por tanto, si se utiliza la expresi\u00f3n regular \"^[a-z]\" el motor encontrar\u00e1 todos los p\u00e1rrafos que den inicio con una letra min\u00fascula. Cuando se utiliza en conjunto con los corchetes de la siguiente forma \"[^\\w ]\" permite encontrar cualquier car\u00e1cter que NO se encuentre dentro del grupo indicado. La expresi\u00f3n indicada permite encontrar, por ejemplo, cualquier car\u00e1cter que no sea alfanum\u00e9rico o un espacio, es decir, busca todos los s\u00edmbolos de puntuaci\u00f3n y dem\u00e1s caracteres especiales. La utilizaci\u00f3n en conjunto de los caracteres especiales \"^\" y \" \\(\" permite realizar validaciones en forma sencilla. Por ejemplo \"^\\d\\) \" permite asegurar que la cadena a verificar representa un \u00fanico d\u00edgito, \"^\\d\\d/\\d\\d/\\d\\d\\d\\d$\" permite validar una fecha en formato corto, aunque no permite verificar si es una fecha v\u00e1lida, ya que 99/99/9999 tambi\u00e9n ser\u00eda v\u00e1lido en este formato; la validaci\u00f3n completa de una fecha tambi\u00e9n es posible mediante expresiones regulares, como se ejemplifica m\u00e1s adelante.","title":"El acento circunflejo \"^\""},{"location":"kb/Programaci%C3%B3n/Expresiones%20regulares/#los-parentesis","text":"De forma similar que los corchetes, los par\u00e9ntesis sirven para agrupar caracteres, sin embargo existen varias diferencias fundamentales entre los grupos establecidos por medio de corchetes y los grupos establecidos por par\u00e9ntesis: Los caracteres especiales conservan su significado dentro de los par\u00e9ntesis. Los grupos establecidos con par\u00e9ntesis establecen una \"etiqueta\" o \"punto de referencia\" para el motor de b\u00fasqueda que puede ser utilizada posteriormente como se denota m\u00e1s adelante. Utilizados en conjunto con la barra \"|\" permite hacer b\u00fasquedas opcionales. Por ejemplo la expresi\u00f3n regular \"al (este|oeste|norte|sur) de\" permite buscar textos que den indicaciones por medio de puntos cardinales, mientras que la expresi\u00f3n regular \"este|oeste|norte|sur\" encontrar\u00eda \"este\" en la palabra \"esteban\", no pudiendo cumplir con este prop\u00f3sito. Utilizado en conjunto con otros caracteres especiales que se detallan posteriormente, ofrece funcionalidad adicional.","title":"Los par\u00e9ntesis \"()\""},{"location":"kb/Programaci%C3%B3n/Expresiones%20regulares/#el-signo-de-interrogacion","text":"El signo de pregunta tiene varias funciones dentro del lenguaje de las expresiones regulares. La primera de ellas es especificar que una parte de la b\u00fasqueda es opcional. Por ejemplo, la expresi\u00f3n regular \"ob?scuridad\" permite encontrar tanto \"oscuridad\" como \"obscuridad\". En conjunto con los parentesis redondos permite especificar que un conjunto mayor de caracteres es opcional; por ejemplo \"Nov(.|iembre|ember)?\" permite encontrar tanto \"Nov\" como \"Nov.\", \"Noviembre\" y \"November\". Como se mencion\u00f3 anteriormente los par\u00e9ntesis nos permiten establecer un \"punto de referencia\" para el motor de b\u00fasqueda, sin embargo, algunas veces, no se desea utilizarlos con este prop\u00f3sito, como en el ejemplo anterior \"Nov(.|iembre|ember)?\". En este caso el establecimiento de este punto de referencia (que se detalla m\u00e1s adelante) representa una inversi\u00f3n in\u00fatil de recursos por parte del motor de b\u00fasqueda. Para evitar se puede utilizar el signo de pregunta de la siguiente forma: \"Nov(?:.|iembre|ember)?\". Aunque el resultado obtenido ser\u00e1 el mismo, el motor de b\u00fasqueda no realizar\u00e1 una inversi\u00f3n in\u00fatil de recursos en este grupo, sino que lo ignorar\u00e1. Cuando no sea necesario reutilizar el grupo, es aconsejable utilizar este formato. De forma similar, es posible utilizar el signo de pregunta con otro significado: Los par\u00e9ntesis definen grupos \"an\u00f3nimos\", sin embargo el signo de pregunta en conjunto con los par\u00e9ntesis triangulares \"<>\" permite \"nombrar\" estos grupos de la siguiente forma: \"^(? \\d\\d)/(? \\d\\d)/(? \\d\\d\\d\\d)$\"; Con lo cual se le especifica al motor de b\u00fasqueda que los primeros dos d\u00edgitos encontrados llevar\u00e1n la etiqueta \"D\u00eda\", los segundos la etiqueta \"Mes\" y los \u00faltimos cuatro d\u00edgitos llevar\u00e1n la etiqueta \"A\u00f1o\". A pesar de la complejidad y flexibilidad dada por los caracteres especiales estudiados hasta ahora, en su mayor\u00eda nos permiten encontrar solamente un caract\u00e9r a la vez, o un grupo de caracteres a la vez. Los metacaracteres enumerados en adelante permiten establecer repeticiones.","title":"El signo de interrogaci\u00f3n \"?\""},{"location":"kb/Programaci%C3%B3n/Expresiones%20regulares/#las-llaves","text":"Com\u00fanmente las llaves son caracteres literales cuando se utilizan por separado en una expresi\u00f3n regular. Para que adquieran su funci\u00f3n de metacaracteres es necesario que encierren uno o varios n\u00fameros separados por coma y que est\u00e9n colocados a la derecha de otra expresi\u00f3n regular de la siguiente forma: \"\\d{2}\" Esta expresi\u00f3n le dice al motor de b\u00fasqueda que encuentre dos d\u00edgitos contiguos. Utilizando esta f\u00f3rmula podr\u00edamos convertir el ejemplo \"^\\d\\d/\\d\\d/\\d\\d\\d\\d \\(\" que serv\u00eda para validar un formato de fecha en \"^\\d{2}/\\d{2}/\\d{4}\\) \" para una mayor claridad en la lectura de la expresi\u00f3n. Tambi\u00e9n se podr\u00eda usar para especificar entre un n\u00famero m\u00ednimo de repeticiones y un n\u00famero m\u00e1ximo de la siguiente forma: si se desea encontrar todas las ocurrencias donde aparezca la s\u00edlaba \u201cpa\u201d dos, tres \u00f3 cuatro veces repetida, se podr\u00eda hacer as\u00ed: \u201c(pa){2,4}\u201d. !!!Nota: aunque esta forma de encontrar elementos repetidos es muy \u00fatil, algunas veces no se conoce con claridad cuantas veces se repite lo que se busca o su grado de repetici\u00f3n es variable. En estos casos los siguientes metacaracteres son \u00fatiles.","title":"Las llaves \"{}\""},{"location":"kb/Programaci%C3%B3n/Expresiones%20regulares/#el-asterisco","text":"El asterisco sirve para encontrar algo que se encuentra repetido 0 o m\u00e1s veces. Por ejemplo, utilizando la expresi\u00f3n \"[a- zA-Z]\\d*\" ser\u00e1 posible encontrar tanto \"H\" como \"H1\", \"H01\", \"H100\" y \"H1000\", es decir, una letra seguida de un n\u00famero indefinido de d\u00edgitos. Es necesario tener cuidado con el comportamiento del asterisco, ya que este por defecto trata de encontrar la mayor cantidad posible de caracteres que correspondan con el patr\u00f3n que se busca. De esta forma si se utiliza \" \\(.*\\) \" para encontrar cualquier cadena que se encuentre entre par\u00e9ntesis y se lo aplica sobre el texto \"Ver (Fig. 1) y (Fig. 2)\" se esperar\u00eda que el motor de b\u00fasqueda encuentre los textos \"(Fig. 1)\" y \"(Fig. 2)\", sin embargo, debido a esta caracter\u00edstica, en su lugar encontrar\u00e1 el texto \"(Fig. 1) y (Fig. 2)\". Esto sucede porque el asterisco le dice al motor de b\u00fasqueda que llene todos los espacios posibles entre dos par\u00e9ntesis. Para obtener el resultado deseado se debe utilizar el asterisco en conjunto con el signo de pregunta de la siguiente forma: \" \\(.*?\\) \" Esto es equivalente a decirle al motor de b\u00fasqueda que \"Encuentre un par\u00e9ntesis de apertura y luego encuentre cualquier car\u00e1cter repetido hasta que encuentre un par\u00e9ntesis de cierre\".","title":"El asterisco \"*\""},{"location":"kb/Programaci%C3%B3n/Expresiones%20regulares/#el-signo-de-suma","text":"Se utiliza para encontrar una cadena que se encuentre repetida 1 o m\u00e1s veces. A diferencia del asterisco, la expresi\u00f3n \"[a-zA-Z]\\d+\" encontrar\u00e1 \"H1\" pero no encontrar\u00e1 \"H\". Tambi\u00e9n es posible utilizar este metacaracter en conjunto con el signo de pregunta para limitar hasta donde se efect\u00faa la repetici\u00f3n.","title":"El signo de suma \"+\""},{"location":"kb/Programaci%C3%B3n/Hackers%20%26%20Developers/","text":"Hackers & Developers \u00b6 Excelente revista acerca de software libre y programaci\u00f3n con entrevistas, art\u00edculos y propuestas. http://www.hdmagazine.org/ Lo vi por el grupo en google de python en espa\u00f1ol Aqu\u00ed hay algunos n\u00fameros: https://cloud.javieranto.com/index.php/s/NbYPdMfk2bnf6Pj En twitter \u00b6 Tweets by HackDevMagazine https://twitter.com/HackDevMagazine M\u00e1s \u00b6 https://hackersandevelopers.wordpress.com https://www.hdmag.press/","title":"Hackers & Developers"},{"location":"kb/Programaci%C3%B3n/Hackers%20%26%20Developers/#hackers-developers","text":"Excelente revista acerca de software libre y programaci\u00f3n con entrevistas, art\u00edculos y propuestas. http://www.hdmagazine.org/ Lo vi por el grupo en google de python en espa\u00f1ol Aqu\u00ed hay algunos n\u00fameros: https://cloud.javieranto.com/index.php/s/NbYPdMfk2bnf6Pj","title":"Hackers &amp; Developers"},{"location":"kb/Programaci%C3%B3n/Hackers%20%26%20Developers/#en-twitter","text":"Tweets by HackDevMagazine https://twitter.com/HackDevMagazine","title":"En twitter"},{"location":"kb/Programaci%C3%B3n/Hackers%20%26%20Developers/#mas","text":"https://hackersandevelopers.wordpress.com https://www.hdmag.press/","title":"M\u00e1s"},{"location":"kb/Programaci%C3%B3n/SQLite/","text":"Instalar SQLite \u00b6 SQLite is a software library that implements a self-contained, serverless, zero-configuration, transactional SQL (SQL92) database engine. SQLite does not require a separate server process or system to operate (serverless) and hasn't external dependencies. In fact, SQLite engine is not a standalone process like other databases, so you can link it statically or dynamically as per your requirement with your application. SQLite accesses its storage files directly (database is stored in a single cross-platform disk file). To install, you can download source code from official site ( https://www.sqlite.org/download.html ) and write the following commands: tar xvfz sqlite-snapshot-2019xxxxxx.tar.gz cd sqlite-snapshot-2019xxxxxxxx ./configure --prefix = /usr/local make sudo make install Compactar base de datos SQLite \u00b6 A medida que se van borrando y escribiendo nuevos registros, la base de datos SQLite puede ir fragment\u00e1ndose y haciendose mas grande, lo cual ocasiona una p\u00e9rdida de rendimiento. Con el comando vacuum puedes desfragmentar y reclamar el espacio no usado, todo de una tacada y sin necesidad de parar la base de datos. Lanza el comando vacuum y de forma autom\u00e1tica se crear\u00e1 una nueva base de datos y se copiar\u00e1n las tablas y los datos en sectores adyacentes. Es la forma m\u00e1s r\u00e1pida de \u00ablimpiar\u00bb una base de datos SQLite. Se puede hacer desde el terminal con los comandos sqlite3 nombrebd vacuum; Resetear campo autonumerico en SQLite \u00b6 Como resetear a cero un campo autonum\u00e9rico de identidad en SQLite. En SQLite hay una tabla llamada SQLITE_SEQUENCE, en la cual se realiza un seguimiento del valor mas alto que tiene cada tabla Es una tabla mas por lo que en ella se pueden ejecutar inserts, updates y deletes Para realizar algo similar al TRUNCATE TABLE que ejecutariamos en SQL Server hariamos: DELETE FROM MyTableName;DELETE FROM SQLITE_SEQUENCE WHERE NAME = 'MyTableName'; Errores y soluciones \u00b6 SQLite operational error, database is locked \u00b6 Es un error que puede aparecer al utilizar el scheduler, se soluciona ejecutando una sola vez en la base de datos la instruccion: pragma journal_mode = wal","title":"SQLite"},{"location":"kb/Programaci%C3%B3n/SQLite/#instalar-sqlite","text":"SQLite is a software library that implements a self-contained, serverless, zero-configuration, transactional SQL (SQL92) database engine. SQLite does not require a separate server process or system to operate (serverless) and hasn't external dependencies. In fact, SQLite engine is not a standalone process like other databases, so you can link it statically or dynamically as per your requirement with your application. SQLite accesses its storage files directly (database is stored in a single cross-platform disk file). To install, you can download source code from official site ( https://www.sqlite.org/download.html ) and write the following commands: tar xvfz sqlite-snapshot-2019xxxxxx.tar.gz cd sqlite-snapshot-2019xxxxxxxx ./configure --prefix = /usr/local make sudo make install","title":"Instalar SQLite"},{"location":"kb/Programaci%C3%B3n/SQLite/#compactar-base-de-datos-sqlite","text":"A medida que se van borrando y escribiendo nuevos registros, la base de datos SQLite puede ir fragment\u00e1ndose y haciendose mas grande, lo cual ocasiona una p\u00e9rdida de rendimiento. Con el comando vacuum puedes desfragmentar y reclamar el espacio no usado, todo de una tacada y sin necesidad de parar la base de datos. Lanza el comando vacuum y de forma autom\u00e1tica se crear\u00e1 una nueva base de datos y se copiar\u00e1n las tablas y los datos en sectores adyacentes. Es la forma m\u00e1s r\u00e1pida de \u00ablimpiar\u00bb una base de datos SQLite. Se puede hacer desde el terminal con los comandos sqlite3 nombrebd vacuum;","title":"Compactar base de datos SQLite"},{"location":"kb/Programaci%C3%B3n/SQLite/#resetear-campo-autonumerico-en-sqlite","text":"Como resetear a cero un campo autonum\u00e9rico de identidad en SQLite. En SQLite hay una tabla llamada SQLITE_SEQUENCE, en la cual se realiza un seguimiento del valor mas alto que tiene cada tabla Es una tabla mas por lo que en ella se pueden ejecutar inserts, updates y deletes Para realizar algo similar al TRUNCATE TABLE que ejecutariamos en SQL Server hariamos: DELETE FROM MyTableName;DELETE FROM SQLITE_SEQUENCE WHERE NAME = 'MyTableName';","title":"Resetear campo autonumerico en SQLite"},{"location":"kb/Programaci%C3%B3n/SQLite/#errores-y-soluciones","text":"","title":"Errores y soluciones"},{"location":"kb/Programaci%C3%B3n/SQLite/#sqlite-operational-error-database-is-locked","text":"Es un error que puede aparecer al utilizar el scheduler, se soluciona ejecutando una sola vez en la base de datos la instruccion: pragma journal_mode = wal","title":"SQLite operational error, database is locked"},{"location":"kb/Programaci%C3%B3n/Visual%20Studio%20Code/","text":"Visual Studio Code \u00b6 Errores con los imports de Odoo \u00b6 Si te aparecen errores con los imports de Odoo, te los marca como desconocidos y no los encuentra es debido a Pylint Como alternativa a Pylint, Flake8 si que encuentra los imports y parece que solo muestra feedback como imports no usados y espacios en blanco alrededor. In Visual Studio Code, ensure you're at a root prompt in the terminal, press Ctrl+Shift+P to open the palette, search/choose \"Python: Select Linter\", and choose \"flake8\" to use it instead of Pylint. https://github.com/PyCQA/pylint/issues/3721#issuecomment-694891033","title":"Visual Studio Code"},{"location":"kb/Programaci%C3%B3n/Visual%20Studio%20Code/#visual-studio-code","text":"","title":"Visual Studio Code"},{"location":"kb/Programaci%C3%B3n/Visual%20Studio%20Code/#errores-con-los-imports-de-odoo","text":"Si te aparecen errores con los imports de Odoo, te los marca como desconocidos y no los encuentra es debido a Pylint Como alternativa a Pylint, Flake8 si que encuentra los imports y parece que solo muestra feedback como imports no usados y espacios en blanco alrededor. In Visual Studio Code, ensure you're at a root prompt in the terminal, press Ctrl+Shift+P to open the palette, search/choose \"Python: Select Linter\", and choose \"flake8\" to use it instead of Pylint. https://github.com/PyCQA/pylint/issues/3721#issuecomment-694891033","title":"Errores con los imports de Odoo"},{"location":"kb/Programaci%C3%B3n/eclipse/","text":"Eclipse \u00b6 Agregar diccionario ortogr\u00e1fico Espa\u00f1ol a Eclipse \u00b6 Podemos aprovechar este diccionario http://www.winedt.org/dict/es.zip Lo descomprimimos en la carpeta de eclipse Vamos a \"Window\", \"Preferences\", buscamos \"Spell\" en las preferencias Seleccionamos \"None\" en \"Platform dictionary\" y en \"User defined dictionary\" hacemos \"Browse\" y seleccionamos el diccionario descargado. Activar pep8/pycodestyle en Eclipse Pydev \u00b6 Si a pesar de activarlo en las opciones Settings -> PyDev -> Editor -> Code Analysis , sigue sin funcionar, probar esto: Project->Properties-> Pydev-Path-> seleccionar el subdirectorio del proyecto como \"Source folder\" Salir y reiniciar Eclipse","title":"Eclipse"},{"location":"kb/Programaci%C3%B3n/eclipse/#eclipse","text":"","title":"Eclipse"},{"location":"kb/Programaci%C3%B3n/eclipse/#agregar-diccionario-ortografico-espanol-a-eclipse","text":"Podemos aprovechar este diccionario http://www.winedt.org/dict/es.zip Lo descomprimimos en la carpeta de eclipse Vamos a \"Window\", \"Preferences\", buscamos \"Spell\" en las preferencias Seleccionamos \"None\" en \"Platform dictionary\" y en \"User defined dictionary\" hacemos \"Browse\" y seleccionamos el diccionario descargado.","title":"Agregar diccionario ortogr\u00e1fico Espa\u00f1ol a Eclipse"},{"location":"kb/Programaci%C3%B3n/eclipse/#activar-pep8pycodestyle-en-eclipse-pydev","text":"Si a pesar de activarlo en las opciones Settings -> PyDev -> Editor -> Code Analysis , sigue sin funcionar, probar esto: Project->Properties-> Pydev-Path-> seleccionar el subdirectorio del proyecto como \"Source folder\" Salir y reiniciar Eclipse","title":"Activar pep8/pycodestyle en Eclipse Pydev"},{"location":"kb/Programaci%C3%B3n/git/","text":"git \u00b6 Cambiar el mensaje de un commit ya realizado \u00b6 Si ya hiciste un commit y quieres cambiar el mensaje, usa git commit --amend , esto va a abrir el editor donde puedes cambiar el mensaje Mensaje del commit # Please enter the commit message for your changes. Lines starting # with '#' will be ignored, and an empty message aborts the commit. Cambia el mensaje y guarda el archivo. Para asegurarte que el cambio se realiz\u00f3 correctamente, puedes hacer git log y revisar que el mensaje del commit se haya actualizado. commit id Author: Fulano Date: fecha Nuevo Mensaje Si ya hab\u00edas hecho push de ese commit, haz git push -f para que se actualice. Ignorar Ficheros y directorios \u00b6 Para ignorar ficheros y directorios desde el principio, s\u00edmplemente hay que agregar el patr\u00f3n o nombre de ficheros o carpetas que se quieren ignorar en un fichero llamado .gitignore ubicado en la raiz del proyecto. Tambi\u00e9n podr\u00eda haber un fichero .gitignore en cada carpeta especificando los items que no queremos seguir en esa carpeta. Nota Las reglas en el fichero .gitignore son v\u00e1lidas solo si los ficheros o carpetas que queremos ignorar, no han sido agregados anteriormente al repositorio. Para ignorar esos ficheros deberemos hacer lo siguiente: git rm -r --cached nombrecarpeta git commit -m \"Eliminada la carpeta nombrecarpeta\" git push origin master Plantillas Puedes descargar plantillas para el fichero .gitignore y para distintos lenguajes de programacion desde https://github.com/github/gitignore/blob/master/README.md Dejar de seguir fichero y borrar del repositorio \u00b6 En ocasiones subes al repositorio un fichero de configuraci\u00f3n del entorno de desarrollo y quieres borrarlo del repositorio, a la vez que lo conservas en local y dejas de realizar seguimientos del fichero. Para borrarlo del repositorio ejecutar el comando: git rm --cached nombre-archivo Luego puede agregarse al fichero .gitignore y por \u00faltimo subir los cambios Acciones GitHub \u00b6 Las acciones de GitHub ayudan a automatizar tareas dentro del ciclo de vida del desarrollo. Las acciones de GitHub est\u00e1n controladas por eventos, lo que significa que pueden ejecutarse una serie de comandos despu\u00e9s de que haya ocurrido un evento espec\u00edfico. Por ejemplo, cada vez que alguien crea una solicitud push/pull en un repositorio, puede ejecutarse autom\u00e1ticamente un comando que ejecuta un script de prueba de software. Acci\u00f3n de ejemplo GitHub: Publicar blog cada vez que se hace un push \u00b6 Cada vez que se hace un push en el repositorio de este blog, se genera de forma autom\u00e1tica este sitio web https://github.com/javierobcn/Notas/blob/master/.github/workflows/main.yml # This is a basic workflow to help you get started with Actions name: documentation # Controls when the action will run. on: # Triggers the workflow on push or pull request events but only for the master branch push: branches: [ master,main ] # Allows you to run this workflow manually from the Actions tab workflow_dispatch: # A workflow run is made up of one or more jobs that can run sequentially or in parallel jobs: # This workflow contains a single job called \"build\" build: # The type of runner that the job will run on runs-on: ubuntu-latest # Steps represent a sequence of tasks that will be executed as part of the job steps: - name: Checkout repository uses: actions/checkout@v2 with: fetch-depth: 0 - name: Set up Python runtime uses: actions/setup-python@v2 with: python-version: 3.x - name: Install Python dependencies run: | pip install mkdocs-material pip install mkdocs-minify-plugin>=0.3 \\ mkdocs-redirects>=1.0 \\ mkdocs-awesome-pages-plugin>=2.4.0 \\ mkdocs-blog-plugin>=0.25 \\ mkdocs-material-extensions>=1.0.1 \\ pyembed-markdown>=1.1.0 \\ mkdocs-git-revision-date-localized-plugin - name: Deploy run: | mkdocs gh-deploy --force mkdocs --version","title":"git"},{"location":"kb/Programaci%C3%B3n/git/#git","text":"","title":"git"},{"location":"kb/Programaci%C3%B3n/git/#cambiar-el-mensaje-de-un-commit-ya-realizado","text":"Si ya hiciste un commit y quieres cambiar el mensaje, usa git commit --amend , esto va a abrir el editor donde puedes cambiar el mensaje Mensaje del commit # Please enter the commit message for your changes. Lines starting # with '#' will be ignored, and an empty message aborts the commit. Cambia el mensaje y guarda el archivo. Para asegurarte que el cambio se realiz\u00f3 correctamente, puedes hacer git log y revisar que el mensaje del commit se haya actualizado. commit id Author: Fulano Date: fecha Nuevo Mensaje Si ya hab\u00edas hecho push de ese commit, haz git push -f para que se actualice.","title":"Cambiar el mensaje de un commit ya realizado"},{"location":"kb/Programaci%C3%B3n/git/#ignorar-ficheros-y-directorios","text":"Para ignorar ficheros y directorios desde el principio, s\u00edmplemente hay que agregar el patr\u00f3n o nombre de ficheros o carpetas que se quieren ignorar en un fichero llamado .gitignore ubicado en la raiz del proyecto. Tambi\u00e9n podr\u00eda haber un fichero .gitignore en cada carpeta especificando los items que no queremos seguir en esa carpeta. Nota Las reglas en el fichero .gitignore son v\u00e1lidas solo si los ficheros o carpetas que queremos ignorar, no han sido agregados anteriormente al repositorio. Para ignorar esos ficheros deberemos hacer lo siguiente: git rm -r --cached nombrecarpeta git commit -m \"Eliminada la carpeta nombrecarpeta\" git push origin master Plantillas Puedes descargar plantillas para el fichero .gitignore y para distintos lenguajes de programacion desde https://github.com/github/gitignore/blob/master/README.md","title":"Ignorar Ficheros y directorios"},{"location":"kb/Programaci%C3%B3n/git/#dejar-de-seguir-fichero-y-borrar-del-repositorio","text":"En ocasiones subes al repositorio un fichero de configuraci\u00f3n del entorno de desarrollo y quieres borrarlo del repositorio, a la vez que lo conservas en local y dejas de realizar seguimientos del fichero. Para borrarlo del repositorio ejecutar el comando: git rm --cached nombre-archivo Luego puede agregarse al fichero .gitignore y por \u00faltimo subir los cambios","title":"Dejar de seguir fichero y borrar del repositorio"},{"location":"kb/Programaci%C3%B3n/git/#acciones-github","text":"Las acciones de GitHub ayudan a automatizar tareas dentro del ciclo de vida del desarrollo. Las acciones de GitHub est\u00e1n controladas por eventos, lo que significa que pueden ejecutarse una serie de comandos despu\u00e9s de que haya ocurrido un evento espec\u00edfico. Por ejemplo, cada vez que alguien crea una solicitud push/pull en un repositorio, puede ejecutarse autom\u00e1ticamente un comando que ejecuta un script de prueba de software.","title":"Acciones GitHub"},{"location":"kb/Programaci%C3%B3n/git/#accion-de-ejemplo-github-publicar-blog-cada-vez-que-se-hace-un-push","text":"Cada vez que se hace un push en el repositorio de este blog, se genera de forma autom\u00e1tica este sitio web https://github.com/javierobcn/Notas/blob/master/.github/workflows/main.yml # This is a basic workflow to help you get started with Actions name: documentation # Controls when the action will run. on: # Triggers the workflow on push or pull request events but only for the master branch push: branches: [ master,main ] # Allows you to run this workflow manually from the Actions tab workflow_dispatch: # A workflow run is made up of one or more jobs that can run sequentially or in parallel jobs: # This workflow contains a single job called \"build\" build: # The type of runner that the job will run on runs-on: ubuntu-latest # Steps represent a sequence of tasks that will be executed as part of the job steps: - name: Checkout repository uses: actions/checkout@v2 with: fetch-depth: 0 - name: Set up Python runtime uses: actions/setup-python@v2 with: python-version: 3.x - name: Install Python dependencies run: | pip install mkdocs-material pip install mkdocs-minify-plugin>=0.3 \\ mkdocs-redirects>=1.0 \\ mkdocs-awesome-pages-plugin>=2.4.0 \\ mkdocs-blog-plugin>=0.25 \\ mkdocs-material-extensions>=1.0.1 \\ pyembed-markdown>=1.1.0 \\ mkdocs-git-revision-date-localized-plugin - name: Deploy run: | mkdocs gh-deploy --force mkdocs --version","title":"Acci\u00f3n de ejemplo GitHub: Publicar blog cada vez que se hace un push"},{"location":"kb/Programaci%C3%B3n/Python/Acerca%20de%20Python/","text":"Acerca de Python \u00b6 Introducci\u00f3n \u00b6 Python es un lenguaje de programaci\u00f3n din\u00e1mico extraordinariamente potente que se utiliza en una amplia variedad de dominios de aplicaci\u00f3n. Python es a menudo comparado con Tcl, Perl, Ruby, Scheme o Java. Algunas de sus caracter\u00edsticas distintivas clave incluyen: Una sintaxis muy clara y legible Fuerte capacidad de introspecci\u00f3n Orientaci\u00f3n a objetos intuitiva Expresi\u00f3n natural del c\u00f3digo procesal Modularidad completa con soporte de paquetes jer\u00e1rquicos Manejo de errores basado en excepciones Tipado de datos din\u00e1micos y de muy alto nivel Bibliotecas est\u00e1ndar y m\u00f3dulos de terceros para pr\u00e1cticamente todas las tareas Ampliable f\u00e1cilmente mediante extensiones y m\u00f3dulos en C, C + + (o Java para Jython, o. NET para IronPython) Integrable dentro de las aplicaciones como una interfaz de scripting Python es poderoso \u2026 y r\u00e1pido \u00b6 A menudo se utiliza la frase \u00abbater\u00edas incluidas\u00bb para describir la biblioteca est\u00e1ndar, que abarca todo, desde el procesamiento asincr\u00f3nico a archivos zip. El lenguaje en s\u00ed es extremadamente flexible y con \u00e9l podr\u00e1s solucionar pr\u00e1cticamente cualquier problema. Python juega bien con los dem\u00e1s \u00b6 Python se puede integrar con COM,. NET y objetos CORBA. Para las bibliotecas de Java, utilice Jython, una implementaci\u00f3n de Python para la M\u00e1quina Virtual de Java. Python tambi\u00e9n es compatible con el motor de Internet Communications (ICE) y muchas otras tecnolog\u00edas de integraci\u00f3n. Si encuentras algo que Python no puede hacer, o si necesitas el alto rendimiento que proporciona el c\u00f3digo de bajo nivel, puedes escribir m\u00f3dulos de extensi\u00f3n en C o C + + Python funciona en todas partes \u00b6 Python est\u00e1 disponible para los principales sistemas operativos: Windows, Linux / Unix, OS / 2, Mac, Amiga, entre otros. Incluso hay versiones que se ejecutan en. NET y la m\u00e1quina virtual de Java. Te gustar\u00e1 saber que el mismo c\u00f3digo fuente funcionar\u00e1 sin cambios en todas las implementaciones. En sistemas Linux Python suele venir instalado, en m\u00e1quinas windows puedes instalarlo descargando desde http://www.python.org/getit/ el binario de Python. Python es amable \u2026 y f\u00e1cil de aprender \u00b6 El grupo de noticias Python es conocido como uno de los m\u00e1s agradables de Internet. Los desarrolladores conforman una comunidad de usuarios entusiasta y din\u00e1mica, dicha comunidad mantiene un wiki, organiza conferencias internacionales y locales y contribuye a los repositorios de c\u00f3digo en l\u00ednea. Python tambi\u00e9n viene con documentaci\u00f3n completa integrada en el lenguaje y en p\u00e1ginas web independientes. Hay tutoriales en l\u00ednea centrados tanto en el programador avanzado como en el reci\u00e9n llegado. La disponibilidad de libros de primer nivel completa el conjunto de aprendizaje. Python es abierto \u00b6 La implementaci\u00f3n de Python est\u00e1 bajo una licencia de c\u00f3digo abierto que hace que sea de libre uso y distribuible, incluso para uso comercial. La licencia de Python es administrada por la Python Software Foundation y es compatible con la licencia GPL Recursos Formativos \u00b6 Curso Python para principiantes https://www.dropbox.com/s/4i6bf5k2ucn6vmr/Introduccion-python.pdf Convenciones pep8 para c\u00f3digo Python https://pep8.org","title":"Acerca de Python"},{"location":"kb/Programaci%C3%B3n/Python/Acerca%20de%20Python/#acerca-de-python","text":"","title":"Acerca de Python"},{"location":"kb/Programaci%C3%B3n/Python/Acerca%20de%20Python/#introduccion","text":"Python es un lenguaje de programaci\u00f3n din\u00e1mico extraordinariamente potente que se utiliza en una amplia variedad de dominios de aplicaci\u00f3n. Python es a menudo comparado con Tcl, Perl, Ruby, Scheme o Java. Algunas de sus caracter\u00edsticas distintivas clave incluyen: Una sintaxis muy clara y legible Fuerte capacidad de introspecci\u00f3n Orientaci\u00f3n a objetos intuitiva Expresi\u00f3n natural del c\u00f3digo procesal Modularidad completa con soporte de paquetes jer\u00e1rquicos Manejo de errores basado en excepciones Tipado de datos din\u00e1micos y de muy alto nivel Bibliotecas est\u00e1ndar y m\u00f3dulos de terceros para pr\u00e1cticamente todas las tareas Ampliable f\u00e1cilmente mediante extensiones y m\u00f3dulos en C, C + + (o Java para Jython, o. NET para IronPython) Integrable dentro de las aplicaciones como una interfaz de scripting","title":"Introducci\u00f3n"},{"location":"kb/Programaci%C3%B3n/Python/Acerca%20de%20Python/#python-es-poderoso-y-rapido","text":"A menudo se utiliza la frase \u00abbater\u00edas incluidas\u00bb para describir la biblioteca est\u00e1ndar, que abarca todo, desde el procesamiento asincr\u00f3nico a archivos zip. El lenguaje en s\u00ed es extremadamente flexible y con \u00e9l podr\u00e1s solucionar pr\u00e1cticamente cualquier problema.","title":"Python es poderoso \u2026 y r\u00e1pido"},{"location":"kb/Programaci%C3%B3n/Python/Acerca%20de%20Python/#python-juega-bien-con-los-demas","text":"Python se puede integrar con COM,. NET y objetos CORBA. Para las bibliotecas de Java, utilice Jython, una implementaci\u00f3n de Python para la M\u00e1quina Virtual de Java. Python tambi\u00e9n es compatible con el motor de Internet Communications (ICE) y muchas otras tecnolog\u00edas de integraci\u00f3n. Si encuentras algo que Python no puede hacer, o si necesitas el alto rendimiento que proporciona el c\u00f3digo de bajo nivel, puedes escribir m\u00f3dulos de extensi\u00f3n en C o C + +","title":"Python juega bien con los dem\u00e1s"},{"location":"kb/Programaci%C3%B3n/Python/Acerca%20de%20Python/#python-funciona-en-todas-partes","text":"Python est\u00e1 disponible para los principales sistemas operativos: Windows, Linux / Unix, OS / 2, Mac, Amiga, entre otros. Incluso hay versiones que se ejecutan en. NET y la m\u00e1quina virtual de Java. Te gustar\u00e1 saber que el mismo c\u00f3digo fuente funcionar\u00e1 sin cambios en todas las implementaciones. En sistemas Linux Python suele venir instalado, en m\u00e1quinas windows puedes instalarlo descargando desde http://www.python.org/getit/ el binario de Python.","title":"Python funciona en todas partes"},{"location":"kb/Programaci%C3%B3n/Python/Acerca%20de%20Python/#python-es-amable-y-facil-de-aprender","text":"El grupo de noticias Python es conocido como uno de los m\u00e1s agradables de Internet. Los desarrolladores conforman una comunidad de usuarios entusiasta y din\u00e1mica, dicha comunidad mantiene un wiki, organiza conferencias internacionales y locales y contribuye a los repositorios de c\u00f3digo en l\u00ednea. Python tambi\u00e9n viene con documentaci\u00f3n completa integrada en el lenguaje y en p\u00e1ginas web independientes. Hay tutoriales en l\u00ednea centrados tanto en el programador avanzado como en el reci\u00e9n llegado. La disponibilidad de libros de primer nivel completa el conjunto de aprendizaje.","title":"Python es amable \u2026 y f\u00e1cil de aprender"},{"location":"kb/Programaci%C3%B3n/Python/Acerca%20de%20Python/#python-es-abierto","text":"La implementaci\u00f3n de Python est\u00e1 bajo una licencia de c\u00f3digo abierto que hace que sea de libre uso y distribuible, incluso para uso comercial. La licencia de Python es administrada por la Python Software Foundation y es compatible con la licencia GPL","title":"Python es abierto"},{"location":"kb/Programaci%C3%B3n/Python/Acerca%20de%20Python/#recursos-formativos","text":"Curso Python para principiantes https://www.dropbox.com/s/4i6bf5k2ucn6vmr/Introduccion-python.pdf Convenciones pep8 para c\u00f3digo Python https://pep8.org","title":"Recursos Formativos"},{"location":"kb/Programaci%C3%B3n/Python/fechas%20y%20horas/","text":"Formatear datos de fecha y hora \u00b6 import locale from datetime import datetime from locale import setlocale # Esta l\u00ednea especifica que los nombres de los meses y dias se mostrar\u00e1n en el idioma definido por el usuario en sus preferencias locales locale . setlocale ( locale . LC_ALL , '' ) ahora_mismo = datetime . now () print ( ahora_mismo ) print () # formatear fechas print ( ahora_mismo . strftime ( '%Y' )) print ( ahora_mismo . strftime ( '%m' )) print ( ahora_mismo . strftime ( ' %d ' )) print ( ahora_mismo . strftime ( '%H:%M:%S' )) print ( ahora_mismo . strftime ( '%I:%M:%S' )) print ( ahora_mismo . strftime ( '%Y-%m- %d , %H:%M:%S' )) print ( ahora_mismo . strftime ( '%Y-%b-%A, %H:%M:%S' )) # 2020-12-28 00:03:09.567142 # 2020 # 12 # 28 # 00:03:09 # 12:03:09 # 2020-12-28, 00:03:09 # 2020-dic-lunes, 00:03:09 Lista con todos los c\u00f3digos de formato \u00b6 https://docs.python.org/3/library/datetime.html?highlight=strftime#strftime-and-strptime-format-codes","title":"Formatear datos de fecha y hora"},{"location":"kb/Programaci%C3%B3n/Python/fechas%20y%20horas/#formatear-datos-de-fecha-y-hora","text":"import locale from datetime import datetime from locale import setlocale # Esta l\u00ednea especifica que los nombres de los meses y dias se mostrar\u00e1n en el idioma definido por el usuario en sus preferencias locales locale . setlocale ( locale . LC_ALL , '' ) ahora_mismo = datetime . now () print ( ahora_mismo ) print () # formatear fechas print ( ahora_mismo . strftime ( '%Y' )) print ( ahora_mismo . strftime ( '%m' )) print ( ahora_mismo . strftime ( ' %d ' )) print ( ahora_mismo . strftime ( '%H:%M:%S' )) print ( ahora_mismo . strftime ( '%I:%M:%S' )) print ( ahora_mismo . strftime ( '%Y-%m- %d , %H:%M:%S' )) print ( ahora_mismo . strftime ( '%Y-%b-%A, %H:%M:%S' )) # 2020-12-28 00:03:09.567142 # 2020 # 12 # 28 # 00:03:09 # 12:03:09 # 2020-12-28, 00:03:09 # 2020-dic-lunes, 00:03:09","title":"Formatear datos de fecha y hora"},{"location":"kb/Programaci%C3%B3n/Python/fechas%20y%20horas/#lista-con-todos-los-codigos-de-formato","text":"https://docs.python.org/3/library/datetime.html?highlight=strftime#strftime-and-strptime-format-codes","title":"Lista con todos los c\u00f3digos de formato"},{"location":"kb/Programaci%C3%B3n/Python/interfaces%20gr%C3%A1ficas%20PyQt5/","text":"PyQt 5 \u00b6 Creamos un entorno virtual, lo activamos e instalamos cd ~ mkdir pyqt5 cd pyqt5 virtualenv -p python3 env source env/bin/activate env/bin/pip3 install pyqt5 Qt Designer \u00b6 Es una herramienta complementaria que no viene instalada por defecto, debemos instalarla por separado Instalaci\u00f3n de Qt Designer en Linux \u00b6 env/bin/pip3 install PyQt5-tools Dentro de la carpeta /env/lib/python3.6/site-packages/qt5_applications/Qt/bin tendremos el ejecutable designer Componentes de la interfaz \u00b6 Los elementos de la interfaz se llaman widgets y heredan todos de la clase QWidget, algunos de los mas usados QPushButton: setText(), setIcon(), SetEnabled(), clicked(),etc. QRadioButton: isChecked(), setChecked(),setText(), toggled() QCheckBox: QListWidget: addItem(), currentItem(), sortItems(), etc QComboBox: QLineEdit: QTextEdit: QLabel: QApplication: Es el punto de entrada a toda app Qt, administra toda la GUI, configuraciones... es lo que se ejecuta realmente. QMainWindow: Es la ventana principal y donde se van a colocar el resto de widgets. Puede no existir en interfaces que solo tengan cuadros de dialogo. Al crear interfaces con Qt Designer se genera un archivo con extension .ui que es un XML. Este archivo luego lo cargaremos en nuestro c\u00f3digo Python para agregarle la l\u00f3gica. Cargando el interfaz y agregando eventos \u00b6 from PyQt5 import QtWidgets , uic class MainWindow ( QtWidgets . QMainWindow ): def __init__ ( self ): super ( MainWindow , self ) . __init__ () self . ui = uic . loadUi ( './project/MainWindow.ui' , self ) self . ui . pushButton . clicked . connect ( self . btnClicked ) # connecting the clicked signal with btnClicked slot def btnClicked ( self ): self . ui . plainTextEdit . setText ( \"Button Clicked\" ) app = QtWidgets . QApplication ([]) miventana = MainWindow () miventana . show () app . exec_ ()","title":"PyQt 5"},{"location":"kb/Programaci%C3%B3n/Python/interfaces%20gr%C3%A1ficas%20PyQt5/#pyqt-5","text":"Creamos un entorno virtual, lo activamos e instalamos cd ~ mkdir pyqt5 cd pyqt5 virtualenv -p python3 env source env/bin/activate env/bin/pip3 install pyqt5","title":"PyQt 5"},{"location":"kb/Programaci%C3%B3n/Python/interfaces%20gr%C3%A1ficas%20PyQt5/#qt-designer","text":"Es una herramienta complementaria que no viene instalada por defecto, debemos instalarla por separado","title":"Qt Designer"},{"location":"kb/Programaci%C3%B3n/Python/interfaces%20gr%C3%A1ficas%20PyQt5/#instalacion-de-qt-designer-en-linux","text":"env/bin/pip3 install PyQt5-tools Dentro de la carpeta /env/lib/python3.6/site-packages/qt5_applications/Qt/bin tendremos el ejecutable designer","title":"Instalaci\u00f3n de Qt Designer en Linux"},{"location":"kb/Programaci%C3%B3n/Python/interfaces%20gr%C3%A1ficas%20PyQt5/#componentes-de-la-interfaz","text":"Los elementos de la interfaz se llaman widgets y heredan todos de la clase QWidget, algunos de los mas usados QPushButton: setText(), setIcon(), SetEnabled(), clicked(),etc. QRadioButton: isChecked(), setChecked(),setText(), toggled() QCheckBox: QListWidget: addItem(), currentItem(), sortItems(), etc QComboBox: QLineEdit: QTextEdit: QLabel: QApplication: Es el punto de entrada a toda app Qt, administra toda la GUI, configuraciones... es lo que se ejecuta realmente. QMainWindow: Es la ventana principal y donde se van a colocar el resto de widgets. Puede no existir en interfaces que solo tengan cuadros de dialogo. Al crear interfaces con Qt Designer se genera un archivo con extension .ui que es un XML. Este archivo luego lo cargaremos en nuestro c\u00f3digo Python para agregarle la l\u00f3gica.","title":"Componentes de la interfaz"},{"location":"kb/Programaci%C3%B3n/Python/interfaces%20gr%C3%A1ficas%20PyQt5/#cargando-el-interfaz-y-agregando-eventos","text":"from PyQt5 import QtWidgets , uic class MainWindow ( QtWidgets . QMainWindow ): def __init__ ( self ): super ( MainWindow , self ) . __init__ () self . ui = uic . loadUi ( './project/MainWindow.ui' , self ) self . ui . pushButton . clicked . connect ( self . btnClicked ) # connecting the clicked signal with btnClicked slot def btnClicked ( self ): self . ui . plainTextEdit . setText ( \"Button Clicked\" ) app = QtWidgets . QApplication ([]) miventana = MainWindow () miventana . show () app . exec_ ()","title":"Cargando el interfaz y agregando eventos"},{"location":"kb/Programaci%C3%B3n/Python/operaciones%20precisas/","text":"Operaciones precisas \u00b6 from decimal import Decimal from decimal import localcontext # Operaciones Standard numero_1 = 4.2 numero_2 = 2.1 suma = numero_1 + numero_2 print ( suma ) print ( suma == 6.3 ) # Uso de la clase Decimal para operaciones precisas: numero_1 = Decimal ( '4.2' ) numero_2 = Decimal ( '2.1' ) suma = numero_1 + numero_2 print ( suma ) print ( suma == Decimal ( '6.3' )) # Establecer precisi\u00f3n numero_1 = Decimal ( '2.3' ) numero_2 = Decimal ( '1.7' ) division = numero_1 / numero_2 print ( division ) with localcontext () as ctx : ctx . prec = 5 division = numero_1 / numero_2 print ( division ) ctx . prec = 75 division = numero_1 / numero_2 print ( division ) 6.300000000000001 False 6.3 True 1.352941176470588235294117647 1.3529 1.35294117647058823529411764705882352941176470588235294117647058823529411765","title":"Operaciones precisas"},{"location":"kb/Programaci%C3%B3n/Python/operaciones%20precisas/#operaciones-precisas","text":"from decimal import Decimal from decimal import localcontext # Operaciones Standard numero_1 = 4.2 numero_2 = 2.1 suma = numero_1 + numero_2 print ( suma ) print ( suma == 6.3 ) # Uso de la clase Decimal para operaciones precisas: numero_1 = Decimal ( '4.2' ) numero_2 = Decimal ( '2.1' ) suma = numero_1 + numero_2 print ( suma ) print ( suma == Decimal ( '6.3' )) # Establecer precisi\u00f3n numero_1 = Decimal ( '2.3' ) numero_2 = Decimal ( '1.7' ) division = numero_1 / numero_2 print ( division ) with localcontext () as ctx : ctx . prec = 5 division = numero_1 / numero_2 print ( division ) ctx . prec = 75 division = numero_1 / numero_2 print ( division ) 6.300000000000001 False 6.3 True 1.352941176470588235294117647 1.3529 1.35294117647058823529411764705882352941176470588235294117647058823529411765","title":"Operaciones precisas"},{"location":"kb/Programaci%C3%B3n/Python/pip/","text":"pip (administrador de paquetes) \u00b6 pip es un sistema de gesti\u00f3n de paquetes utilizado para instalar y administrar paquetes de software escritos en Python. Python 2.7.9 y posteriores y Python 3.4 y posteriores incluyen pip por defecto.","title":"pip (administrador de paquetes)"},{"location":"kb/Programaci%C3%B3n/Python/pip/#pip-administrador-de-paquetes","text":"pip es un sistema de gesti\u00f3n de paquetes utilizado para instalar y administrar paquetes de software escritos en Python. Python 2.7.9 y posteriores y Python 3.4 y posteriores incluyen pip por defecto.","title":"pip (administrador de paquetes)"},{"location":"kb/Programaci%C3%B3n/Python/random/","text":"Random \u00b6 import random numeros = [ 1 , 2 , 3 , 4 , 5 , 6 ] # Seleccionar un elemento aleatorio (tirar el dado): print ( random . choice ( numeros )) print ( random . choice ( numeros )) print ( random . choice ( numeros )) # Obtener una muestra print ( random . sample ( numeros , 2 )) print ( random . sample ( numeros , 3 )) print ( random . sample ( numeros , 3 )) print ( random . sample ( numeros , 3 )) # Barajar random . shuffle ( numeros ) print ( numeros ) random . shuffle ( numeros ) print ( numeros ) # Generar enteros aleatorios entre 0 y 10 print ( random . randint ( 0 , 10 )) print ( random . randint ( 0 , 10 )) print ( random . randint ( 0 , 10 )) # Generar reales aleatorios entre 0 y 1 print ( random . random ()) print ( random . random ()) print ( random . random ()) # Generar n bits aleatorios como entero: print ( random . getrandbits ( 128 )) print ( random . getrandbits ( 256 )) print ( random . getrandbits ( 512 )) print ( random . getrandbits ( 1024 ))","title":"Random"},{"location":"kb/Programaci%C3%B3n/Python/random/#random","text":"import random numeros = [ 1 , 2 , 3 , 4 , 5 , 6 ] # Seleccionar un elemento aleatorio (tirar el dado): print ( random . choice ( numeros )) print ( random . choice ( numeros )) print ( random . choice ( numeros )) # Obtener una muestra print ( random . sample ( numeros , 2 )) print ( random . sample ( numeros , 3 )) print ( random . sample ( numeros , 3 )) print ( random . sample ( numeros , 3 )) # Barajar random . shuffle ( numeros ) print ( numeros ) random . shuffle ( numeros ) print ( numeros ) # Generar enteros aleatorios entre 0 y 10 print ( random . randint ( 0 , 10 )) print ( random . randint ( 0 , 10 )) print ( random . randint ( 0 , 10 )) # Generar reales aleatorios entre 0 y 1 print ( random . random ()) print ( random . random ()) print ( random . random ()) # Generar n bits aleatorios como entero: print ( random . getrandbits ( 128 )) print ( random . getrandbits ( 256 )) print ( random . getrandbits ( 512 )) print ( random . getrandbits ( 1024 ))","title":"Random"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/","text":"Secuencias \u00b6 Listas y Tuplas son objetos que contienen listas de datos a los que se accede mediante un \u00edndice, son similares a los arrays en otros lenguajes. Perteneecen a un tipo de datos que Python llama \"Secuencias\" y que incluye tambi\u00e9n a las cadenas de texto. Todas las secuencias tienen algunas caracter\u00edsticas comunes: No hay un l\u00edmite a la cantidad de elementos que pueden contener. Pueden contener cualquier tipo de objeto, incluyendo otras secuencias. Por ejemplo, la forma de crear una matriz en Python es crear una lista de listas. No es necesario saber el tama\u00f1o (cantidad de elementos) que tendr\u00e1 la secuencia al momento de crearla. Soportan algunas funciones nativas de python: len(secuencia) : devuelve la cantidad de elementos de la lista, tupla o cadena. max(secuencia) : devuelve el mayor elemento. min(secuencia) : devuelve el menor elemento. Tienen dos m\u00e9todos comunes: secuencia.index(\u2018x\u2019) : devuelve el \u00edndice de la primera ocurrencia de \u2018x\u2019 en la secuencia. secuencia.count(\u2018x\u2019) : devuelve el n\u00famero de veces que aparece \u2018x\u2019 en la secuencia Los elementos de la secuencia se acceden v\u00eda sub\u00edndices, que se indican entre corchetes [] despu\u00e9s del nombre de la variable que contiene a la secuencia: secuencia[0] : devuelve el primer elemento secuencia[2] : devuelve el tercer elemento (notar que se numeran desde 0 y no desde 1). secuencia[i] : devuelve el elemento i-1 de la secuencia. secuencia[-1] : devuelve el \u00faltimo elemento. Listas \u00b6 Las listas en Python son equivalentes a los arreglos en PHP o en Javascript. Para crear una lista, simplemente se declaran sus elementos entre corchetes: mi_lista = [ 1 , 'b' , 'd' , 23 ] mi_lista_vacia = [] # crea una lista sin elementos Para agregar elementos a una lista, se utiliza el m\u00e9todo append: mi_lista . append ( 10 ) print mi_lista [ 1 , 'b' , 'd' , 23 , 10 ] Para modificar un elemento particular de una lista, se asigna el nuevo valor al sub\u00edndice correspondiente: mi_lista [ 0 ] = 2 print mi_lista [ 2 , 'b' , 'd' , 23 , 10 ] Incluso se pueden reemplazar trozos de una lista con otra, o con trozos de otra, usando la notaci\u00f3n de rebanadas (slices): mi_lista [ 0 : 2 ] = [ 3 , 4 ] # reemplazar los dos primeros elementos de la lista con los elementos de [3, 4] print mi_lista [ 3 , 4 , 'd' , 23 , 10 ] Es importante notar que lo anterior no es lo mismo que asignar una secuencia entera a un \u00edndice: mi_lista [ 0 ] = [ 3 , 4 ] # el primer elemento de mi_lista es ahora la lista [3, 4] print mi_lista [[ 3 , 4 ], 4 , 'd' , 23 , 10 ] Se puede comprobar si un elemento pertenece o no a una secuencia con los operadores in y not in. 2 in lista True 8 not in lista True Las listas poseen algunos m\u00e9todos propios: se puede eliminar un elemento con mi_lista.remove(), reordenar la lista con mi_lista.sort(), o invertir el orden de sus elementos con mi_lista.reverse(). Todas las secuencias pueden ser transformadas a listas usando la funci\u00f3n list(). Tuplas \u00b6 Las tuplas son como las listas, excepto que son inmutables (sus elementos no pueden ser modificados). Se identifican f\u00e1cilmente porque en vez de usar corchetes, se definen entre par\u00e9ntesis. En lo dem\u00e1s, funcionan igual a las listas y al resto de las secuencias. Diccionarios \u00b6 Un Diccionario es una estructura de datos y un tipo de dato en Python con caracter\u00edsticas especiales que nos permite almacenar cualquier tipo de valor como enteros, cadenas, listas e incluso otras funciones. Estos diccionarios nos permiten adem\u00e1s identificar cada elemento por una clave (Key). Para definir un diccionario, se encierra el listado de valores entre llaves. Las parejas de clave y valor se separan con comas, y la clave y el valor se separan con dos puntos. diccionario = { 'nombre' : 'Carlos' , 'edad' : 22 , 'cursos' : [ 'Python' , 'Django' , 'JavaScript' ] } Recetas \u00b6 Crear variables independientes para cada elemento de una secuencia \u00b6 tupla = ( 1 , 2 ) a , b = tupla print ( a , b ) lista = [ 'Python' , 3 ,( 2 , 3 ,), 'P' ] a , b , c , d = lista print ( a , b , c , d ) Obtener el resto de elementos de una secuencia \u00b6 tupla = ( 1 , 2 , 5 , 7 ) a , b , * c = tupla print ( a , b , c ) 1 2 [ 5 , 7 ] lenguaje = 'Python' var1 , var2 , * var3 = lenguaje print ( var1 , var2 , var3 ) Obtener los elementos mas frecuentes en una lista \u00b6 from collections import Counter numeros = [ 1 , 4 , 5 , 4 , 6 , 6 , 6 , 3 , 2 , 1 , 1 , 4 , 5 , 11 , 3 , 1 ] contador = Counter ( numeros ) print ( contador . most_common ( 3 )) [( 1 , 4 ), ( 4 , 3 ), ( 6 , 3 )] frase = \"Python es extremadamente potente\" contador = Counter ( frase ) print ( contador . most_common ( 3 )) [( 'e' , 7 ), ( 't' , 5 ), ( 'n' , 3 )] Obtener una cantidad n de elementos m\u00ednimos o m\u00e1ximos \u00b6 import heapq numeros = [ 1 , 4 , 5 , 6 , 11 ] print ( heapq . nsmallest ( 3 , numeros )) print ( heapq . nlargest ( 3 , numeros )) [ 1 , 4 , 5 ] [ 11 , 6 , 5 ] productos = [ { 'nombre' : 'Mouse' , 'precio' : 45 }, { 'nombre' : 'Teclado' , 'precio' : 145 }, { 'nombre' : 'Monitor' , 'precio' : 175 }, { 'nombre' : 'Altavoces' , 'precio' : 70 }, { 'nombre' : 'Cable corriente' , 'precio' : 30 } ] mas_barato = heapq . nsmallest ( 1 , productos , key = lambda p : p [ 'precio' ]) print ( mas_barato ) mas_caro = heapq . nlargest ( 1 , productos , key = lambda p : p [ 'precio' ]) print ( mas_caro ) mas_baratos = heapq . nsmallest ( 2 , productos , key = lambda p : p [ 'precio' ]) print ( mas_baratos ) Diccionario con orden mediante la clase OrderedDict \u00b6 from collections import OrderedDict productos = { 7 : 'Mouse' , 5 : 'Teclado' , 8 : 'Monitor' , 9 : 'Altavoces' , 2 : 'Cable corriente' } print ( OrderedDict ( sorted ( productos . items (), key = lambda p : p [ 0 ]))) # Ordenado por ID print ( OrderedDict ( sorted ( productos . items (), key = lambda p : p [ 1 ]))) # Ordenado por Nombre print ( OrderedDict ( sorted ( productos . items (), key = lambda p : len ( p [ 1 ])))) # Ordenado por len(nombre) OrderedDict ([( 2 , 'Cable corriente' ), ( 5 , 'Teclado' ), ( 7 , 'Mouse' ), ( 8 , 'Monitor' ), ( 9 , 'Altavoces' )]) OrderedDict ([( 9 , 'Altavoces' ), ( 2 , 'Cable corriente' ), ( 8 , 'Monitor' ), ( 7 , 'Mouse' ), ( 5 , 'Teclado' )]) OrderedDict ([( 7 , 'Mouse' ), ( 5 , 'Teclado' ), ( 8 , 'Monitor' ), ( 9 , 'Altavoces' ), ( 2 , 'Cable corriente' )]) Obtener los elementos \u00fanicos de una lista \u00b6 numeros = [ 7 , 0 , 9 , 76 , 4 , 2 , 4 , 6 , 4 , 7 , 65 , 4 , 3 , 6 , 2 ] numeros_sin_repetir = set ( numeros ) print ( numeros_sin_repetir ) print ( type ( numeros_sin_repetir )) numeros = list ( numeros_sin_repetir ) print ( numeros ) print ( type ( numeros )) { 0 , 65 , 2 , 3 , 4 , 6 , 7 , 9 , 76 } < class ' set '> [ 0 , 65 , 2 , 3 , 4 , 6 , 7 , 9 , 76 ] < class ' list '> Uso de la clase UserString \u00b6 Esta clase se encuentra en el m\u00f3dulo Collections y se utiliza para realizar herencia cuando queremos agregar nuevos comportamientos a la clase string. from collections import UserString class StringPersonalizado ( UserString ): def invertir_capitalizacion ( self ): nueva_cadena = [] for c in self : nueva_cadena . append ( c . lower () if c . isupper () else c . upper ()) return '' . join ( str ( c ) for c in nueva_cadena ) cadena = StringPersonalizado ( 'Python' ) print ( cadena . invertir_capitalizacion ()) pYTHON Ordenar una lista usando Diferentes Campos \u00b6 from operator import itemgetter productos = [ { 'id' : 1 , 'nombre' : 'Mouse' , 'precio' : 35 }, { 'id' : 5 , 'nombre' : 'Teclado' , 'precio' : 75 }, { 'id' : 3 , 'nombre' : 'Altavoz' , 'precio' : 55 }, { 'id' : 6 , 'nombre' : 'Monitor' , 'precio' : 335 }, { 'id' : 4 , 'nombre' : 'Tablet' , 'precio' : 435 } ] productos_id = sorted ( productos , key = itemgetter ( 'id' )) print ( productos_id ) productos_precio = sorted ( productos , key = itemgetter ( 'precio' )) print ( productos_precio ) [{ 'id' : 1 , 'nombre' : 'Mouse' , 'precio' : 35 }, { 'id' : 3 , 'nombre' : 'Altavoz' , 'precio' : 55 }, { 'id' : 4 , 'nombre' : 'Tablet' , 'precio' : 435 }, { 'id' : 5 , 'nombre' : 'Teclado' , 'precio' : 75 }, { 'id' : 6 , 'nombre' : 'Monitor' , 'precio' : 335 }] [{ 'id' : 1 , 'nombre' : 'Mouse' , 'precio' : 35 }, { 'id' : 3 , 'nombre' : 'Altavoz' , 'precio' : 55 }, { 'id' : 5 , 'nombre' : 'Teclado' , 'precio' : 75 }, { 'id' : 6 , 'nombre' : 'Monitor' , 'precio' : 335 }, { 'id' : 4 , 'nombre' : 'Tablet' , 'precio' : 435 }] Ordenar objetos a partir de un campo arbitrario \u00b6 from operator import attrgetter class Usuario : def __init__ ( self , identificador , nombre ): self . identificador = identificador self . nombre = nombre def __repr__ ( self ): return ' {} - {} ' . format ( self . identificador , self . nombre ) usuarios = [ Usuario ( 7 , 'Eduardo' ), Usuario ( 3 , 'Daniela' ), Usuario ( 5 , 'Juan' ), Usuario ( 10 , 'Silvia' )] print ( sorted ( usuarios , key = attrgetter ( 'identificador' ))) print ( sorted ( usuarios , key = attrgetter ( 'nombre' ))) [ 3 - Daniela , 5 - Juan , 7 - Eduardo , 10 - Silvia ] [ 3 - Daniela , 7 - Eduardo , 5 - Juan , 10 - Silvia ] Agrupar elementos de una lista especificando un campo de inter\u00e9s \u00b6 from operator import itemgetter from itertools import groupby productos = [ { 'nombre' : 'Mouse' , 'precio' : 35 , 'fecha_venta' : '2020/12/20' }, { 'nombre' : 'Cable corriente' , 'precio' : 15 , 'fecha_venta' : '2020/12/20' }, { 'nombre' : 'Monitor' , 'precio' : 175 , 'fecha_venta' : '2020/12/22' }, { 'nombre' : 'Tablet' , 'precio' : 335 , 'fecha_venta' : '2020/12/22' }, { 'nombre' : 'Impresora' , 'precio' : 125 , 'fecha_venta' : '2020/12/22' }, { 'nombre' : 'Smartphone' , 'precio' : 235 , 'fecha_venta' : '2020/12/23' }, { 'nombre' : 'Scanner' , 'precio' : 95 , 'fecha_venta' : '2020/12/27' }, { 'nombre' : 'Altavoces' , 'precio' : 95 , 'fecha_venta' : '2020/12/29' }, ] productos . sort ( key = itemgetter ( 'fecha_venta' )) for fecha , elementos in groupby ( productos , key = itemgetter ( 'fecha_venta' )): print ( fecha ) for elemento in elementos : print ( ' ' , elemento ) 2020 / 12 / 20 { 'nombre' : 'Mouse' , 'precio' : 35 , 'fecha_venta' : '2020/12/20' } { 'nombre' : 'Cable corriente' , 'precio' : 15 , 'fecha_venta' : '2020/12/20' } 2020 / 12 / 22 { 'nombre' : 'Monitor' , 'precio' : 175 , 'fecha_venta' : '2020/12/22' } { 'nombre' : 'Tablet' , 'precio' : 335 , 'fecha_venta' : '2020/12/22' } { 'nombre' : 'Impresora' , 'precio' : 125 , 'fecha_venta' : '2020/12/22' } 2020 / 12 / 23 { 'nombre' : 'Smartphone' , 'precio' : 235 , 'fecha_venta' : '2020/12/23' } 2020 / 12 / 27 { 'nombre' : 'Scanner' , 'precio' : 95 , 'fecha_venta' : '2020/12/27' } 2020 / 12 / 29 { 'nombre' : 'Altavoces' , 'precio' : 95 , 'fecha_venta' : '2020/12/29' } Filtrar los elementos de una secuencia \u00b6 numeros = [ 5 , 4 , - 6 , 3 , - 9 , 8 , 0 , 12 ] print ( numeros ) numeros_positivos = [ n for n in numeros if n > 0 ] print ( numeros_positivos ) Extraer un subconjunto de elementos de un diccionario \u00b6 productos = { 'Mouse' : 35 , 'Teclado' : 75 , 'Altavoz' : 55 , 'Monitor' : 335 , 'Tablet' : 435 } productos_filtrados = { k : v for k , v in productos . items () if v > 50 } print ( productos ) print ( productos_filtrados ) { 'Mouse' : 35 , 'Teclado' : 75 , 'Altavoz' : 55 , 'Monitor' : 335 , 'Tablet' : 435 } { 'Teclado' : 75 , 'Altavoz' : 55 , 'Monitor' : 335 , 'Tablet' : 435 } Nombrar los elementos de una tupla a trav\u00e9s de namedtuple \u00b6 from collections import namedtuple producto = ( 'Mouse' , 35 ) print ( producto [ 0 ]) print ( producto [ 1 ]) Producto = namedtuple ( 'Producto' ,[ 'nombre' , 'precio' ]) producto_1 = Producto ( 'Mouse' , 35 ) print ( '---------' ) print ( producto_1 . nombre ) print ( producto_1 . precio ) producto_2 = Producto ( nombre = 'Mouse' , precio = 35 ) nombre , precio = producto_2 print ( '' ) print ( producto_2 . nombre ) print ( producto_2 . precio )","title":"Secuencias"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/#secuencias","text":"Listas y Tuplas son objetos que contienen listas de datos a los que se accede mediante un \u00edndice, son similares a los arrays en otros lenguajes. Perteneecen a un tipo de datos que Python llama \"Secuencias\" y que incluye tambi\u00e9n a las cadenas de texto. Todas las secuencias tienen algunas caracter\u00edsticas comunes: No hay un l\u00edmite a la cantidad de elementos que pueden contener. Pueden contener cualquier tipo de objeto, incluyendo otras secuencias. Por ejemplo, la forma de crear una matriz en Python es crear una lista de listas. No es necesario saber el tama\u00f1o (cantidad de elementos) que tendr\u00e1 la secuencia al momento de crearla. Soportan algunas funciones nativas de python: len(secuencia) : devuelve la cantidad de elementos de la lista, tupla o cadena. max(secuencia) : devuelve el mayor elemento. min(secuencia) : devuelve el menor elemento. Tienen dos m\u00e9todos comunes: secuencia.index(\u2018x\u2019) : devuelve el \u00edndice de la primera ocurrencia de \u2018x\u2019 en la secuencia. secuencia.count(\u2018x\u2019) : devuelve el n\u00famero de veces que aparece \u2018x\u2019 en la secuencia Los elementos de la secuencia se acceden v\u00eda sub\u00edndices, que se indican entre corchetes [] despu\u00e9s del nombre de la variable que contiene a la secuencia: secuencia[0] : devuelve el primer elemento secuencia[2] : devuelve el tercer elemento (notar que se numeran desde 0 y no desde 1). secuencia[i] : devuelve el elemento i-1 de la secuencia. secuencia[-1] : devuelve el \u00faltimo elemento.","title":"Secuencias"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/#listas","text":"Las listas en Python son equivalentes a los arreglos en PHP o en Javascript. Para crear una lista, simplemente se declaran sus elementos entre corchetes: mi_lista = [ 1 , 'b' , 'd' , 23 ] mi_lista_vacia = [] # crea una lista sin elementos Para agregar elementos a una lista, se utiliza el m\u00e9todo append: mi_lista . append ( 10 ) print mi_lista [ 1 , 'b' , 'd' , 23 , 10 ] Para modificar un elemento particular de una lista, se asigna el nuevo valor al sub\u00edndice correspondiente: mi_lista [ 0 ] = 2 print mi_lista [ 2 , 'b' , 'd' , 23 , 10 ] Incluso se pueden reemplazar trozos de una lista con otra, o con trozos de otra, usando la notaci\u00f3n de rebanadas (slices): mi_lista [ 0 : 2 ] = [ 3 , 4 ] # reemplazar los dos primeros elementos de la lista con los elementos de [3, 4] print mi_lista [ 3 , 4 , 'd' , 23 , 10 ] Es importante notar que lo anterior no es lo mismo que asignar una secuencia entera a un \u00edndice: mi_lista [ 0 ] = [ 3 , 4 ] # el primer elemento de mi_lista es ahora la lista [3, 4] print mi_lista [[ 3 , 4 ], 4 , 'd' , 23 , 10 ] Se puede comprobar si un elemento pertenece o no a una secuencia con los operadores in y not in. 2 in lista True 8 not in lista True Las listas poseen algunos m\u00e9todos propios: se puede eliminar un elemento con mi_lista.remove(), reordenar la lista con mi_lista.sort(), o invertir el orden de sus elementos con mi_lista.reverse(). Todas las secuencias pueden ser transformadas a listas usando la funci\u00f3n list().","title":"Listas"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/#tuplas","text":"Las tuplas son como las listas, excepto que son inmutables (sus elementos no pueden ser modificados). Se identifican f\u00e1cilmente porque en vez de usar corchetes, se definen entre par\u00e9ntesis. En lo dem\u00e1s, funcionan igual a las listas y al resto de las secuencias.","title":"Tuplas"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/#diccionarios","text":"Un Diccionario es una estructura de datos y un tipo de dato en Python con caracter\u00edsticas especiales que nos permite almacenar cualquier tipo de valor como enteros, cadenas, listas e incluso otras funciones. Estos diccionarios nos permiten adem\u00e1s identificar cada elemento por una clave (Key). Para definir un diccionario, se encierra el listado de valores entre llaves. Las parejas de clave y valor se separan con comas, y la clave y el valor se separan con dos puntos. diccionario = { 'nombre' : 'Carlos' , 'edad' : 22 , 'cursos' : [ 'Python' , 'Django' , 'JavaScript' ] }","title":"Diccionarios"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/#recetas","text":"","title":"Recetas"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/#crear-variables-independientes-para-cada-elemento-de-una-secuencia","text":"tupla = ( 1 , 2 ) a , b = tupla print ( a , b ) lista = [ 'Python' , 3 ,( 2 , 3 ,), 'P' ] a , b , c , d = lista print ( a , b , c , d )","title":"Crear variables independientes para cada elemento de una secuencia"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/#obtener-el-resto-de-elementos-de-una-secuencia","text":"tupla = ( 1 , 2 , 5 , 7 ) a , b , * c = tupla print ( a , b , c ) 1 2 [ 5 , 7 ] lenguaje = 'Python' var1 , var2 , * var3 = lenguaje print ( var1 , var2 , var3 )","title":"Obtener el resto de elementos de una secuencia"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/#obtener-los-elementos-mas-frecuentes-en-una-lista","text":"from collections import Counter numeros = [ 1 , 4 , 5 , 4 , 6 , 6 , 6 , 3 , 2 , 1 , 1 , 4 , 5 , 11 , 3 , 1 ] contador = Counter ( numeros ) print ( contador . most_common ( 3 )) [( 1 , 4 ), ( 4 , 3 ), ( 6 , 3 )] frase = \"Python es extremadamente potente\" contador = Counter ( frase ) print ( contador . most_common ( 3 )) [( 'e' , 7 ), ( 't' , 5 ), ( 'n' , 3 )]","title":"Obtener los elementos mas frecuentes en una lista"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/#obtener-una-cantidad-n-de-elementos-minimos-o-maximos","text":"import heapq numeros = [ 1 , 4 , 5 , 6 , 11 ] print ( heapq . nsmallest ( 3 , numeros )) print ( heapq . nlargest ( 3 , numeros )) [ 1 , 4 , 5 ] [ 11 , 6 , 5 ] productos = [ { 'nombre' : 'Mouse' , 'precio' : 45 }, { 'nombre' : 'Teclado' , 'precio' : 145 }, { 'nombre' : 'Monitor' , 'precio' : 175 }, { 'nombre' : 'Altavoces' , 'precio' : 70 }, { 'nombre' : 'Cable corriente' , 'precio' : 30 } ] mas_barato = heapq . nsmallest ( 1 , productos , key = lambda p : p [ 'precio' ]) print ( mas_barato ) mas_caro = heapq . nlargest ( 1 , productos , key = lambda p : p [ 'precio' ]) print ( mas_caro ) mas_baratos = heapq . nsmallest ( 2 , productos , key = lambda p : p [ 'precio' ]) print ( mas_baratos )","title":"Obtener una cantidad n de elementos m\u00ednimos o m\u00e1ximos"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/#diccionario-con-orden-mediante-la-clase-ordereddict","text":"from collections import OrderedDict productos = { 7 : 'Mouse' , 5 : 'Teclado' , 8 : 'Monitor' , 9 : 'Altavoces' , 2 : 'Cable corriente' } print ( OrderedDict ( sorted ( productos . items (), key = lambda p : p [ 0 ]))) # Ordenado por ID print ( OrderedDict ( sorted ( productos . items (), key = lambda p : p [ 1 ]))) # Ordenado por Nombre print ( OrderedDict ( sorted ( productos . items (), key = lambda p : len ( p [ 1 ])))) # Ordenado por len(nombre) OrderedDict ([( 2 , 'Cable corriente' ), ( 5 , 'Teclado' ), ( 7 , 'Mouse' ), ( 8 , 'Monitor' ), ( 9 , 'Altavoces' )]) OrderedDict ([( 9 , 'Altavoces' ), ( 2 , 'Cable corriente' ), ( 8 , 'Monitor' ), ( 7 , 'Mouse' ), ( 5 , 'Teclado' )]) OrderedDict ([( 7 , 'Mouse' ), ( 5 , 'Teclado' ), ( 8 , 'Monitor' ), ( 9 , 'Altavoces' ), ( 2 , 'Cable corriente' )])","title":"Diccionario con orden mediante la clase OrderedDict"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/#obtener-los-elementos-unicos-de-una-lista","text":"numeros = [ 7 , 0 , 9 , 76 , 4 , 2 , 4 , 6 , 4 , 7 , 65 , 4 , 3 , 6 , 2 ] numeros_sin_repetir = set ( numeros ) print ( numeros_sin_repetir ) print ( type ( numeros_sin_repetir )) numeros = list ( numeros_sin_repetir ) print ( numeros ) print ( type ( numeros )) { 0 , 65 , 2 , 3 , 4 , 6 , 7 , 9 , 76 } < class ' set '> [ 0 , 65 , 2 , 3 , 4 , 6 , 7 , 9 , 76 ] < class ' list '>","title":"Obtener los elementos \u00fanicos de una lista"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/#uso-de-la-clase-userstring","text":"Esta clase se encuentra en el m\u00f3dulo Collections y se utiliza para realizar herencia cuando queremos agregar nuevos comportamientos a la clase string. from collections import UserString class StringPersonalizado ( UserString ): def invertir_capitalizacion ( self ): nueva_cadena = [] for c in self : nueva_cadena . append ( c . lower () if c . isupper () else c . upper ()) return '' . join ( str ( c ) for c in nueva_cadena ) cadena = StringPersonalizado ( 'Python' ) print ( cadena . invertir_capitalizacion ()) pYTHON","title":"Uso de la clase UserString"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/#ordenar-una-lista-usando-diferentes-campos","text":"from operator import itemgetter productos = [ { 'id' : 1 , 'nombre' : 'Mouse' , 'precio' : 35 }, { 'id' : 5 , 'nombre' : 'Teclado' , 'precio' : 75 }, { 'id' : 3 , 'nombre' : 'Altavoz' , 'precio' : 55 }, { 'id' : 6 , 'nombre' : 'Monitor' , 'precio' : 335 }, { 'id' : 4 , 'nombre' : 'Tablet' , 'precio' : 435 } ] productos_id = sorted ( productos , key = itemgetter ( 'id' )) print ( productos_id ) productos_precio = sorted ( productos , key = itemgetter ( 'precio' )) print ( productos_precio ) [{ 'id' : 1 , 'nombre' : 'Mouse' , 'precio' : 35 }, { 'id' : 3 , 'nombre' : 'Altavoz' , 'precio' : 55 }, { 'id' : 4 , 'nombre' : 'Tablet' , 'precio' : 435 }, { 'id' : 5 , 'nombre' : 'Teclado' , 'precio' : 75 }, { 'id' : 6 , 'nombre' : 'Monitor' , 'precio' : 335 }] [{ 'id' : 1 , 'nombre' : 'Mouse' , 'precio' : 35 }, { 'id' : 3 , 'nombre' : 'Altavoz' , 'precio' : 55 }, { 'id' : 5 , 'nombre' : 'Teclado' , 'precio' : 75 }, { 'id' : 6 , 'nombre' : 'Monitor' , 'precio' : 335 }, { 'id' : 4 , 'nombre' : 'Tablet' , 'precio' : 435 }]","title":"Ordenar una lista usando Diferentes Campos"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/#ordenar-objetos-a-partir-de-un-campo-arbitrario","text":"from operator import attrgetter class Usuario : def __init__ ( self , identificador , nombre ): self . identificador = identificador self . nombre = nombre def __repr__ ( self ): return ' {} - {} ' . format ( self . identificador , self . nombre ) usuarios = [ Usuario ( 7 , 'Eduardo' ), Usuario ( 3 , 'Daniela' ), Usuario ( 5 , 'Juan' ), Usuario ( 10 , 'Silvia' )] print ( sorted ( usuarios , key = attrgetter ( 'identificador' ))) print ( sorted ( usuarios , key = attrgetter ( 'nombre' ))) [ 3 - Daniela , 5 - Juan , 7 - Eduardo , 10 - Silvia ] [ 3 - Daniela , 7 - Eduardo , 5 - Juan , 10 - Silvia ]","title":"Ordenar objetos a partir de un campo arbitrario"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/#agrupar-elementos-de-una-lista-especificando-un-campo-de-interes","text":"from operator import itemgetter from itertools import groupby productos = [ { 'nombre' : 'Mouse' , 'precio' : 35 , 'fecha_venta' : '2020/12/20' }, { 'nombre' : 'Cable corriente' , 'precio' : 15 , 'fecha_venta' : '2020/12/20' }, { 'nombre' : 'Monitor' , 'precio' : 175 , 'fecha_venta' : '2020/12/22' }, { 'nombre' : 'Tablet' , 'precio' : 335 , 'fecha_venta' : '2020/12/22' }, { 'nombre' : 'Impresora' , 'precio' : 125 , 'fecha_venta' : '2020/12/22' }, { 'nombre' : 'Smartphone' , 'precio' : 235 , 'fecha_venta' : '2020/12/23' }, { 'nombre' : 'Scanner' , 'precio' : 95 , 'fecha_venta' : '2020/12/27' }, { 'nombre' : 'Altavoces' , 'precio' : 95 , 'fecha_venta' : '2020/12/29' }, ] productos . sort ( key = itemgetter ( 'fecha_venta' )) for fecha , elementos in groupby ( productos , key = itemgetter ( 'fecha_venta' )): print ( fecha ) for elemento in elementos : print ( ' ' , elemento ) 2020 / 12 / 20 { 'nombre' : 'Mouse' , 'precio' : 35 , 'fecha_venta' : '2020/12/20' } { 'nombre' : 'Cable corriente' , 'precio' : 15 , 'fecha_venta' : '2020/12/20' } 2020 / 12 / 22 { 'nombre' : 'Monitor' , 'precio' : 175 , 'fecha_venta' : '2020/12/22' } { 'nombre' : 'Tablet' , 'precio' : 335 , 'fecha_venta' : '2020/12/22' } { 'nombre' : 'Impresora' , 'precio' : 125 , 'fecha_venta' : '2020/12/22' } 2020 / 12 / 23 { 'nombre' : 'Smartphone' , 'precio' : 235 , 'fecha_venta' : '2020/12/23' } 2020 / 12 / 27 { 'nombre' : 'Scanner' , 'precio' : 95 , 'fecha_venta' : '2020/12/27' } 2020 / 12 / 29 { 'nombre' : 'Altavoces' , 'precio' : 95 , 'fecha_venta' : '2020/12/29' }","title":"Agrupar elementos de una lista especificando un campo de inter\u00e9s"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/#filtrar-los-elementos-de-una-secuencia","text":"numeros = [ 5 , 4 , - 6 , 3 , - 9 , 8 , 0 , 12 ] print ( numeros ) numeros_positivos = [ n for n in numeros if n > 0 ] print ( numeros_positivos )","title":"Filtrar los elementos de una secuencia"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/#extraer-un-subconjunto-de-elementos-de-un-diccionario","text":"productos = { 'Mouse' : 35 , 'Teclado' : 75 , 'Altavoz' : 55 , 'Monitor' : 335 , 'Tablet' : 435 } productos_filtrados = { k : v for k , v in productos . items () if v > 50 } print ( productos ) print ( productos_filtrados ) { 'Mouse' : 35 , 'Teclado' : 75 , 'Altavoz' : 55 , 'Monitor' : 335 , 'Tablet' : 435 } { 'Teclado' : 75 , 'Altavoz' : 55 , 'Monitor' : 335 , 'Tablet' : 435 }","title":"Extraer un subconjunto de elementos de un diccionario"},{"location":"kb/Programaci%C3%B3n/Python/secuencias/#nombrar-los-elementos-de-una-tupla-a-traves-de-namedtuple","text":"from collections import namedtuple producto = ( 'Mouse' , 35 ) print ( producto [ 0 ]) print ( producto [ 1 ]) Producto = namedtuple ( 'Producto' ,[ 'nombre' , 'precio' ]) producto_1 = Producto ( 'Mouse' , 35 ) print ( '---------' ) print ( producto_1 . nombre ) print ( producto_1 . precio ) producto_2 = Producto ( nombre = 'Mouse' , precio = 35 ) nombre , precio = producto_2 print ( '' ) print ( producto_2 . nombre ) print ( producto_2 . precio )","title":"Nombrar los elementos de una tupla a trav\u00e9s de namedtuple"},{"location":"kb/Programaci%C3%B3n/Python/strings/","text":"Strings \u00b6 Interpolar variables sobre cadenas de caracteres \u00b6 texto_formato = 'La versi\u00f3n mas reciente de {lenguaje} hoy {fecha} es {version} ' lenguaje = 'Python' fecha = '2020/12/26' version = '3.9.1' print ( texto_formato . format ( lenguaje = lenguaje , fecha = fecha , version = version ))","title":"Strings"},{"location":"kb/Programaci%C3%B3n/Python/strings/#strings","text":"","title":"Strings"},{"location":"kb/Programaci%C3%B3n/Python/strings/#interpolar-variables-sobre-cadenas-de-caracteres","text":"texto_formato = 'La versi\u00f3n mas reciente de {lenguaje} hoy {fecha} es {version} ' lenguaje = 'Python' fecha = '2020/12/26' version = '3.9.1' print ( texto_formato . format ( lenguaje = lenguaje , fecha = fecha , version = version ))","title":"Interpolar variables sobre cadenas de caracteres"},{"location":"kb/Programaci%C3%B3n/odoo/Contabilidad%20en%20Odoo/","text":"Tips Odoo / Contabilidad \u00b6 Plan contable para fundaciones y asociaciones en Catalu\u00f1a \u00b6 https://cloud.javieranto.com/index.php/s/f9Eki549fDwrLtt https://xarxanet.org/biblioteca/pla-de-comptabilitat-de-les-fundacions-i-les-associacions-catalanes Cierre de a\u00f1os fiscales \u00b6 No es recomendable cerrar a\u00f1os fiscales, en todo caso periodos. Una vez cerrado solo puede abrirse trasteando en la base de datos, cambiando en la tabla account_fiscal_year el campo state a \"draft\" y entonces desde el interface abrir el periodo necesario. Una vez cambiado lo que sea volver a cerrar poniendo el estado \"done\" Devoluci\u00f3n recibo SEPA y pagado de nuevo \u00b6 Fuente: http://groups.google.com/group/openerp-spain-users/t/b601313e2a20d8ad?utm_source=digest&utm_medium=email Tras experimentar con lo que la gente propone por la web y darle vueltas,vuelvo a dejar aqu\u00ed lo que creo que es la mejor soluci\u00f3n Partimos de la base que hemos cobrado ya la remesa de recibos a clientes, y en el nuevo extracto que descargamos, vemos que un cliente ha devuelto un recibo, \u00bfc\u00f3mo procedemos a dejar la factura abierta sin tener que romper la conciliaci\u00f3n de toda la remesa de pago? En primer lugar vamos a extractos bancarios, buscamos el apunte de la devoluci\u00f3n y contabilizamos a 430, nos aseguramos que ponga el nombre de la empresa en la referencia para futura ayuda. Adem\u00e1s podemos ir al nuevo asiento creado y nos aseguramos que en los apuntes indique el nombre de la empresa que ha devuelto el recibo en caso de que no se haya introducido autom\u00e1ticamente. Vamos la ficha del cliente, entramos en apuntes contables y buscamos el asiento de la factura con el pago (ambos tienen la misma referencia de conciliaci\u00f3n), seleccionamos ambos apuntes y rompemos la conciliaci\u00f3n: ya tenemos la factura abierta Por \u00faltimo cuando el cliente vuelva a pagar ya podemos conciliar el nuevo apunte en el extracto bancario con la factura que ya la ten\u00edamos abierta Devoluci\u00f3n del IRPF \u00b6 1\u00ba. Al DEVENGARSE el derecho a la devoluci\u00f3n:(4709) a (636) 2\u00ba. Al PERCIBIRSE la devoluci\u00f3n:(572) a (4709) 3\u00ba. Al CIERRE del ejercicio:(636) a (129)","title":"Tips Odoo / Contabilidad"},{"location":"kb/Programaci%C3%B3n/odoo/Contabilidad%20en%20Odoo/#tips-odoo-contabilidad","text":"","title":"Tips Odoo / Contabilidad"},{"location":"kb/Programaci%C3%B3n/odoo/Contabilidad%20en%20Odoo/#plan-contable-para-fundaciones-y-asociaciones-en-cataluna","text":"https://cloud.javieranto.com/index.php/s/f9Eki549fDwrLtt https://xarxanet.org/biblioteca/pla-de-comptabilitat-de-les-fundacions-i-les-associacions-catalanes","title":"Plan contable para fundaciones y asociaciones en Catalu\u00f1a"},{"location":"kb/Programaci%C3%B3n/odoo/Contabilidad%20en%20Odoo/#cierre-de-anos-fiscales","text":"No es recomendable cerrar a\u00f1os fiscales, en todo caso periodos. Una vez cerrado solo puede abrirse trasteando en la base de datos, cambiando en la tabla account_fiscal_year el campo state a \"draft\" y entonces desde el interface abrir el periodo necesario. Una vez cambiado lo que sea volver a cerrar poniendo el estado \"done\"","title":"Cierre de a\u00f1os fiscales"},{"location":"kb/Programaci%C3%B3n/odoo/Contabilidad%20en%20Odoo/#devolucion-recibo-sepa-y-pagado-de-nuevo","text":"Fuente: http://groups.google.com/group/openerp-spain-users/t/b601313e2a20d8ad?utm_source=digest&utm_medium=email Tras experimentar con lo que la gente propone por la web y darle vueltas,vuelvo a dejar aqu\u00ed lo que creo que es la mejor soluci\u00f3n Partimos de la base que hemos cobrado ya la remesa de recibos a clientes, y en el nuevo extracto que descargamos, vemos que un cliente ha devuelto un recibo, \u00bfc\u00f3mo procedemos a dejar la factura abierta sin tener que romper la conciliaci\u00f3n de toda la remesa de pago? En primer lugar vamos a extractos bancarios, buscamos el apunte de la devoluci\u00f3n y contabilizamos a 430, nos aseguramos que ponga el nombre de la empresa en la referencia para futura ayuda. Adem\u00e1s podemos ir al nuevo asiento creado y nos aseguramos que en los apuntes indique el nombre de la empresa que ha devuelto el recibo en caso de que no se haya introducido autom\u00e1ticamente. Vamos la ficha del cliente, entramos en apuntes contables y buscamos el asiento de la factura con el pago (ambos tienen la misma referencia de conciliaci\u00f3n), seleccionamos ambos apuntes y rompemos la conciliaci\u00f3n: ya tenemos la factura abierta Por \u00faltimo cuando el cliente vuelva a pagar ya podemos conciliar el nuevo apunte en el extracto bancario con la factura que ya la ten\u00edamos abierta","title":"Devoluci\u00f3n recibo SEPA y pagado de nuevo"},{"location":"kb/Programaci%C3%B3n/odoo/Contabilidad%20en%20Odoo/#devolucion-del-irpf","text":"1\u00ba. Al DEVENGARSE el derecho a la devoluci\u00f3n:(4709) a (636) 2\u00ba. Al PERCIBIRSE la devoluci\u00f3n:(572) a (4709) 3\u00ba. Al CIERRE del ejercicio:(636) a (129)","title":"Devoluci\u00f3n del IRPF"},{"location":"kb/Programaci%C3%B3n/odoo/Entorno%20desarrollo/","text":"Estandarizar entornos \u00b6 Es muy aconsejable que los entornos de producci\u00f3n y de desarrollo sean lo mas similares posible. La estandarizaci\u00f3n es muy util en las tareas de mantenimiento y es muy aconsejable para facilitar las tareas del dia a dia. Como preparar un entorno virtual Python \u00b6 Nota Es necesario tener instaladas las extensiones de desarrollo de python que son instaladas con el comando sudo apt-get install python3-dev Para crear el dise\u00f1o propuesto necesitamos realizar los siguientes pasos: Crear un directorio por instancia mkdir ~/odoo-dev/nombreproyecto cd ~/odoo-dev/nombreproyecto Crear un entorno virtual Python con el comando virtualenv en un subdirectorio llamado env virtualenv -p python3 env Crear algunos subdirectorios comunes: mkdir src local bin filestore logs Clonar Odoo e instalar los requisitos indicados en el fichero requisites.txt de Odoo git clone https://github.com/odoo/odoo.git src/odoo --depth 1 --branch 12 .0 env/bin/pip3 install -r src/odoo/requirements.txt Nota el par\u00e1metro --depth 1 en la orden git clone hace que la descarga del repositorio de odoo sea el c\u00f3digo actual sin incluir la historia de los commits, por otra parte el par\u00e1metro --branch especifica que rama queremos descargar, en este caso la rama 12.0, si se omite descargar\u00e1 la rama master que corresponde a la \u00faltima versi\u00f3n Nota Pueden instalarse m\u00f3dulos adicionales en el entorno virtual con el comando env/bin/pip3 install ovh o m\u00f3dulos desde git directamente con env/bin/pip3 install git+https://github.com/botlabio/pywhois.git Crear el siguiente script y guardarlo como bin/odoo #!/bin/sh ROOT = $( dirname $0 ) /.. PYTHON = $ROOT /env/bin/python3 ODOO = $ROOT /src/odoo/odoo-bin $PYTHON $ODOO -c $ROOT /projectname.cfg \" $@ \" exit $? Generar un m\u00f3dulo dummy mkdir -p local/dummy touch local/dummy/__init__.py echo '{\"name\":\"dummy\",\"installable\":False}' > local/dummy/__manifest__.py Generar un fichero de configuraci\u00f3n para la instancia bin/odoo --stop-after-init --save \\ --addons-path src/odoo/odoo/addons,src/odoo/addons,local \\ --data-dir filestore Generar un fichero .gitignore que excluya algunos directorios .* !.gitignore *.py [ co ] *~ /env/ /src/ /filestore/ /logs/ crear un repositorio git y agregar los ficheros: git init git add . git commit -m \"initial version de projectname\" Activar el entorno virtual source env/bin/activate Desactivar el entorno virtual deactivate","title":"Estandarizar entornos"},{"location":"kb/Programaci%C3%B3n/odoo/Entorno%20desarrollo/#estandarizar-entornos","text":"Es muy aconsejable que los entornos de producci\u00f3n y de desarrollo sean lo mas similares posible. La estandarizaci\u00f3n es muy util en las tareas de mantenimiento y es muy aconsejable para facilitar las tareas del dia a dia.","title":"Estandarizar entornos"},{"location":"kb/Programaci%C3%B3n/odoo/Entorno%20desarrollo/#como-preparar-un-entorno-virtual-python","text":"Nota Es necesario tener instaladas las extensiones de desarrollo de python que son instaladas con el comando sudo apt-get install python3-dev Para crear el dise\u00f1o propuesto necesitamos realizar los siguientes pasos: Crear un directorio por instancia mkdir ~/odoo-dev/nombreproyecto cd ~/odoo-dev/nombreproyecto Crear un entorno virtual Python con el comando virtualenv en un subdirectorio llamado env virtualenv -p python3 env Crear algunos subdirectorios comunes: mkdir src local bin filestore logs Clonar Odoo e instalar los requisitos indicados en el fichero requisites.txt de Odoo git clone https://github.com/odoo/odoo.git src/odoo --depth 1 --branch 12 .0 env/bin/pip3 install -r src/odoo/requirements.txt Nota el par\u00e1metro --depth 1 en la orden git clone hace que la descarga del repositorio de odoo sea el c\u00f3digo actual sin incluir la historia de los commits, por otra parte el par\u00e1metro --branch especifica que rama queremos descargar, en este caso la rama 12.0, si se omite descargar\u00e1 la rama master que corresponde a la \u00faltima versi\u00f3n Nota Pueden instalarse m\u00f3dulos adicionales en el entorno virtual con el comando env/bin/pip3 install ovh o m\u00f3dulos desde git directamente con env/bin/pip3 install git+https://github.com/botlabio/pywhois.git Crear el siguiente script y guardarlo como bin/odoo #!/bin/sh ROOT = $( dirname $0 ) /.. PYTHON = $ROOT /env/bin/python3 ODOO = $ROOT /src/odoo/odoo-bin $PYTHON $ODOO -c $ROOT /projectname.cfg \" $@ \" exit $? Generar un m\u00f3dulo dummy mkdir -p local/dummy touch local/dummy/__init__.py echo '{\"name\":\"dummy\",\"installable\":False}' > local/dummy/__manifest__.py Generar un fichero de configuraci\u00f3n para la instancia bin/odoo --stop-after-init --save \\ --addons-path src/odoo/odoo/addons,src/odoo/addons,local \\ --data-dir filestore Generar un fichero .gitignore que excluya algunos directorios .* !.gitignore *.py [ co ] *~ /env/ /src/ /filestore/ /logs/ crear un repositorio git y agregar los ficheros: git init git add . git commit -m \"initial version de projectname\" Activar el entorno virtual source env/bin/activate Desactivar el entorno virtual deactivate","title":"Como preparar un entorno virtual Python"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012%20en%20un%20container%20Docker/","text":"Instalar Odoo 12 en un container Docker \u00b6 En este tutorial se crear\u00e1n 2 containers: 1 container para la base de datos 1 container para ODOO Adem\u00e1s para garantizar la persistencia de los datos, se usar\u00e1n volumenes de datos Docker, uno para que Postgres guarde la base de datos y otros dos para que odoo guarde ficheros adjuntos, m\u00f3dulos extra, datos de sesi\u00f3n etc. Red \u00b6 Creamos una red Docker para conectar nuestra base de datos y Odoo docker network create --driver bridge sgw-odoo-nw Creamos el container postgresql 11.1 docker run -d --name sgw-db \\ --env POSTGRES_USER=odoo --env POSTGRES_PASSWORD=sgw-clave-secret \\ --env POSTGRES_DB=postgres \\ --network=sgw-odoo-nw --mount source=sgw-db-data,target=/var/lib/postgresql/data \\ library/postgres:11.1 Se chequea con este comando el log del container y debe decir algo como \u00abLOG: database system is ready to accept connections\u00bb docker logs sgw-db Container y vol\u00famenes para ODOO \u00b6 docker volume create --name sgw-odoo-data docker volume create --name sgw-odoo-extra-addons docker run -d --name sgw-odoo --link sgw-db:db -p 8069:8069 \\ --network sgw-odoo-nw \\ --mount source=sgw-odoo-data,target=/var/lib/odoo \\ --mount source=sgw-odoo-extra-addons,target=/mnt/extra-addons \\ --env POSTGRES_PASSWORD=sgw-clave-secret \\ veivaa/odoo:12.0 En lugar de la imagen veivaa/odoo:12.0 puede usarse tambi\u00e9n la imagen oficial disponible en library/odoo:12.0. Se chequean los logs y debe decir algo como \u00ab2018-10-07 16:37:55,491 1 INFO ? odoo.service.server: HTTP service (werkzeug) running on 95d90feba5bf:8069\u00bb docker logs unkkuri-odoo Acceder a Odoo desde http://localhost:8069 Correr y detener containers \u00b6 Ver los containers corriendo actualmente docker ps Ver todos los containers docker ps -a Detener un container docker stop sgw-odoo Correr container docker start sgw-odoo tras reiniciar el ordenador o Docker, tendremos los containers detenidos por lo que habr\u00e1 que arrancarlos con: docker start sgw-db docker start sgw-odoo Actualizar Odoo \u00b6 docker stop sgw-odoo docker rm sgw-odoo docker pull veivaa/odoo:12.0 docker run -d --name sgw-odoo --link sgw-db:db -p 8069:8069 \\ --network sgw-odoo-nw \\ --mount source=sgw-odoo-data,target=/var/lib/odoo \\ --mount source=sgw-odoo-extra-addons,target=/mnt/extra-addons \\ --env POSTGRES_PASSWORD=sgw-clave-secret \\ veivaa/odoo:12.0 Borrar todo \u00b6 docker stop sgw-odoo docker rm sgw-odoo docker volume rm sgw-odoo-data docker volume rm sgw-odoo-extra-addons docker stop sgw-db docker rm sgw-db docker volume rm sgw-db-data docker network rm sgw-odoo-nw","title":"Instalar Odoo 12 en un container Docker"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012%20en%20un%20container%20Docker/#instalar-odoo-12-en-un-container-docker","text":"En este tutorial se crear\u00e1n 2 containers: 1 container para la base de datos 1 container para ODOO Adem\u00e1s para garantizar la persistencia de los datos, se usar\u00e1n volumenes de datos Docker, uno para que Postgres guarde la base de datos y otros dos para que odoo guarde ficheros adjuntos, m\u00f3dulos extra, datos de sesi\u00f3n etc.","title":"Instalar Odoo 12 en un container Docker"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012%20en%20un%20container%20Docker/#red","text":"Creamos una red Docker para conectar nuestra base de datos y Odoo docker network create --driver bridge sgw-odoo-nw Creamos el container postgresql 11.1 docker run -d --name sgw-db \\ --env POSTGRES_USER=odoo --env POSTGRES_PASSWORD=sgw-clave-secret \\ --env POSTGRES_DB=postgres \\ --network=sgw-odoo-nw --mount source=sgw-db-data,target=/var/lib/postgresql/data \\ library/postgres:11.1 Se chequea con este comando el log del container y debe decir algo como \u00abLOG: database system is ready to accept connections\u00bb docker logs sgw-db","title":"Red"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012%20en%20un%20container%20Docker/#container-y-volumenes-para-odoo","text":"docker volume create --name sgw-odoo-data docker volume create --name sgw-odoo-extra-addons docker run -d --name sgw-odoo --link sgw-db:db -p 8069:8069 \\ --network sgw-odoo-nw \\ --mount source=sgw-odoo-data,target=/var/lib/odoo \\ --mount source=sgw-odoo-extra-addons,target=/mnt/extra-addons \\ --env POSTGRES_PASSWORD=sgw-clave-secret \\ veivaa/odoo:12.0 En lugar de la imagen veivaa/odoo:12.0 puede usarse tambi\u00e9n la imagen oficial disponible en library/odoo:12.0. Se chequean los logs y debe decir algo como \u00ab2018-10-07 16:37:55,491 1 INFO ? odoo.service.server: HTTP service (werkzeug) running on 95d90feba5bf:8069\u00bb docker logs unkkuri-odoo Acceder a Odoo desde http://localhost:8069","title":"Container y vol\u00famenes para ODOO"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012%20en%20un%20container%20Docker/#correr-y-detener-containers","text":"Ver los containers corriendo actualmente docker ps Ver todos los containers docker ps -a Detener un container docker stop sgw-odoo Correr container docker start sgw-odoo tras reiniciar el ordenador o Docker, tendremos los containers detenidos por lo que habr\u00e1 que arrancarlos con: docker start sgw-db docker start sgw-odoo","title":"Correr y detener containers"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012%20en%20un%20container%20Docker/#actualizar-odoo","text":"docker stop sgw-odoo docker rm sgw-odoo docker pull veivaa/odoo:12.0 docker run -d --name sgw-odoo --link sgw-db:db -p 8069:8069 \\ --network sgw-odoo-nw \\ --mount source=sgw-odoo-data,target=/var/lib/odoo \\ --mount source=sgw-odoo-extra-addons,target=/mnt/extra-addons \\ --env POSTGRES_PASSWORD=sgw-clave-secret \\ veivaa/odoo:12.0","title":"Actualizar Odoo"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012%20en%20un%20container%20Docker/#borrar-todo","text":"docker stop sgw-odoo docker rm sgw-odoo docker volume rm sgw-odoo-data docker volume rm sgw-odoo-extra-addons docker stop sgw-db docker rm sgw-db docker volume rm sgw-db-data docker network rm sgw-odoo-nw","title":"Borrar todo"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012/","text":"Instalar Odoo 12 \u00b6 Este tutorial cubre los pasos necesarios para instalar y configurar ODOO 12 usando el c\u00f3digo fuente de Odoo disponible en Git y un entorno Python virtual (Probado con \u00e9xito en un sistema Debian GNU/Linux 9) Preliminares \u00b6 Actualizar el sistema \u00b6 Login en la m\u00e1quina Debian GNU/Linux 9 como usuario sudo y actualiza el sistema: sudo apt update && sudo apt upgrade Instalar Git, Pip, Node.js y las dependencias requeridas de Odoo: sudo apt install git python3-pip build-essential wget python3-dev python3-venv python3-wheel libxslt-dev libzip-dev libldap2-dev libsasl2-dev python3-setuptools node-less Crear Usuario Odoo12 \u00b6 Crear un nuevo usuario para Odoo llamado odoo12 con el home directory en /opt/odoo12 usando el siguiente comando: sudo useradd -m -d /opt/odoo12 -U -r -s /bin/bash odoo12 Instalar y Configurar PostgreSQL \u00b6 Instalar PostgreSQL desde los repositorios: sudo apt install postgresql Una vez que la instalaci\u00f3n se complete, crear un usuario PostgreSQL con el mismo nombre que el usuario de sistema creado anteriormente , en nuestro caso es odoo12 : sudo su - postgres -c \"createuser -s odoo12\" Instalar Wkhtmltopdf \u00b6 El paquete wkhtmltox proporciona un conjunto de herramientas de c\u00f3digo abierto las cuales pueden renderizar HTML en PDF y varios formatos de im\u00e1genes. Para poder imprimir en PDF los informes, es necesario el paquete wkhtmltopdf. la versi\u00f3n recomendada para Odoo es la 0.12.1 que no viene incluida en los repositorios oficiales. Descargar el paquete con este comando wget: wget https://builds.wkhtmltopdf.org/0.12.1.3/wkhtmltox_0.12.1.3-1~bionic_amd64.deb Una vez descargado instalar con el comando: sudo apt install ./wkhtmltox_0.12.1.3-1~bionic_amd64.deb Instalar y Configurar Odoo \u00b6 Instalaremos Odoo desde el repositorio GitHub dentro de un entorno virtual aislado Python. Antes de empezar con el proceso de instalaci\u00f3n cambiamos al usuario \u201codoo12\u201d: sudo su - odoo12 Clonamos el repositorio de github: git clone https://www.github.com/odoo/odoo --depth 1 --branch 12.0 /opt/odoo12/odoo Creamos un entorno virtual Python: cd /opt/odoo12 python3 -m venv odoo-venv A continuaci\u00f3n, activamos el entorno con el siguiente comando: source odoo-venv/bin/activate Instalamos todos los m\u00f3dulos python requeridos por odoo con el comando pip3 : pip3 install wheel pip3 install -r odoo/requirements.txt Desactivar el entorno virtual con este comando: deactivate Crear un nuevo directorio para los addons: mkdir /opt/odoo12/odoo-custom-addons Cambiamos de nuevo al usuario sudo: exit A continuaci\u00f3n, crearemos un fichero de configuraci\u00f3n copiando el original como molde: sudo cp /opt/odoo12/odoo/debian/odoo.conf /etc/odoo12.conf abrimos el fichero y lo editamos para dejarlo como sigue: sudo nano /etc/odoo12.conf /etc/odoo12.conf [options] ; This is the password that allows database operations: admin_passwd = my_admin_passwd db_host = False db_port = False db_user = odoo12 db_password = False addons_path = /opt/odoo12/odoo/addons,/opt/odoo12/odoo-custom-addons No te olvides de cambiar my_admin_passwd a algo mas seguro. Crear un fichero Systemd Unit \u00b6 Para ejecutar Odoo como un servicio necesitaremos crear un fichero de tipo service unit en la carpeta /etc/systemd/system/ . sudo nano /etc/systemd/system/odoo12.service con este contenido [Unit] Description=Odoo12 Requires=postgresql.service After=network.target postgresql.service [Service] Type=simple SyslogIdentifier=odoo12 PermissionsStartOnly=true User=odoo12 Group=odoo12 ExecStart=/opt/odoo12/odoo-venv/bin/python3 /opt/odoo12/odoo/odoo-bin -c /etc/odoo12.conf StandardOutput=journal+console [Install] WantedBy=multi-user.target Notificaremos a systemd que se ha agregado un nuevo fichero unit y arrancaremos el servicio odoo12 con: sudo systemctl daemon-reload sudo systemctl start odoo12 Chequea el estado del servicio: sudo systemctl status odoo12 La salida debe indicar algo parecido a lo de abajo, indicando que el servicio est\u00e1 cargado (loaded) pero desactivado (disabled): - odoo12.service - Odoo12 Loaded: loaded (/etc/systemd/system/odoo12.service; disabled; vendor preset: enabled) Active: active (running) since Tue 2018-10-09 14:15:30 PDT; 3s ago Main PID: 24334 (python3) Tasks: 4 (limit: 2319) CGroup: /system.slice/odoo12.service `-24334 /opt/odoo12/odoo-venv/bin/python3 /opt/odoo12/odoo/odoo-bin -c /etc/odoo12.conf Para que arranque automaticamente en el inicio del sistema, lo activamos con: sudo systemctl enable odoo12 Si quieres ver los mensajes del log guardados por el servicio Odoo puedes usar: sudo journalctl -u odoo12 Test de la Instalaci\u00f3n \u00b6 Abre el navegador y ves a : http://your_domain_or_IP_address:8069 Asumiendo que todo haya ido bien, aparecer\u00e1 la ventana de gesti\u00f3n de las bases de datos Configure Nginx as SSL Termination Proxy \u00b6 Ensure that you have met the following prerequisites before continuing with this section: Domain name pointing to your public server IP. In this tutorial we will use example.com. Nginx installed. SSL certificate for your domain. You can install a free Let's Encrypt SSL certificate . The default Odoo web server is serving traffic over HTTP. To make our Odoo deployment more secure we will configure Nginx as a SSL termination proxy that will serve the traffic over HTTPS. SSL termination proxy is a proxy server which handles the SSL encryption/decryption. This means that our termination proxy (Nginx) will handle and decrypt incoming TLS connections (HTTPS), and it will pass on the unencrypted requests to our internal service (Odoo) so the traffic between Nginx and Odoo will not be encrypted (HTTP). Using a reverse proxy gives you a lot of benefits such as Load Balancing, SSL Termination, Caching, Compression, Serving Static Content and more. In this example we will configure SSL Termination, HTTP to HTTPS redirection, WWW to non-WWW redirection, cache the static files and enable GZip compression. Open your text editor and create the following file: sudo nano /etc/nginx/sites-enabled/example.com /etc/nginx/sites-enabled/example.com # Odoo servers upstream odoo { server 127.0.0.1:8069; } upstream odoochat { server 127.0.0.1:8072; } # HTTP -> HTTPS server { listen 80; server_name www.example.com example.com; include snippets/letsencrypt.conf; return 301 https://example.com$request_uri; } # WWW -> NON WWW server { listen 443 ssl http2; server_name www.example.com; ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem; ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem; ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem; include snippets/ssl.conf; return 301 https://example.com$request_uri; } server { listen 443 ssl http2; server_name example.com; proxy_read_timeout 720s; proxy_connect_timeout 720s; proxy_send_timeout 720s; # Proxy headers proxy_set_header X-Forwarded-Host $host; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header X-Real-IP $remote_addr; # SSL parameters ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem; ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem; ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem; include snippets/ssl.conf; # log files access_log /var/log/nginx/odoo.access.log; error_log /var/log/nginx/odoo.error.log; # Handle longpoll requests location /longpolling { proxy_pass http://odoochat; } # Handle / requests location / { proxy_redirect off; proxy_pass http://odoo; } # Cache static files location ~* /web/static/ { proxy_cache_valid 200 90m; proxy_buffering on; expires 864000; proxy_pass http://odoo; } # Gzip gzip_types text/css text/less text/plain text/xml application/xml application/json application/javascript; gzip on; } Don\u2019t forget to replace example.com with your Odoo domain and set the correct path to the SSL certificate files. The snippets used in this configuration are created in this guide . Once you are done, restart the Nginx service with: sudo systemctl restart nginx Next, we need to tell Odoo that we will use proxy. To do so, open the configuration file and add the following line: /etc/odoo12.conf proxy_mode = True Restart the Odoo service for the changes to take effect: sudo systemctl restart odoo12 At this point, your server is configured and you can access your Odoo instance at: https://example.com ####Change the binding interface This step is optional, but it is a good security practice. By default, Odoo server listens to port 8069 on all interfaces. If you want to disable direct access to your Odoo instance you can either block the port 8069 for all public interfaces or force Odoo to listen only on the local interface. In this guide we will configure Odoo to listen only on 127.0.0.1. Open the configuration add the following two lines at the end of the file: /etc/odoo12.conf xmlrpc_interface = 127.0.0.1 netrpc_interface = 127.0.0.1 Save the configuration file and restart the Odoo server for the changes to take effect: sudo systemctl restart odoo12 ####Enable Multiprocessing By default, Odoo is working in multithreading mode. For production deployments, it is recommended to switch to the multiprocessing server as it increases stability, and make better usage of the system resources. In order to enable multiprocessing we need to edit the Odoo configuration and set a non-zero number of worker processes. The number of workers is calculated based on the number of CPU cores in the system and the available RAM memory. According to the official Odoo documentation to calculate the workers number and required RAM memory size we will use the following formulas and assumptions: Worker number calculation theoretical maximal number of worker = (system_cpus * 2) + 1 1 worker can serve ~= 6 concurrent users Cron workers also requires CPU RAM memory size calculation We will consider that 20% of all requests are heavy requests, while 80% are lighter ones. Heavy requests are using around 1 GB of RAM while the lighter ones are using around 150 MB of RAM Needed RAM = number_of_workers * ( (light_worker_ratio * light_worker_ram_estimation) + (heavy_worker_ratio * heavy_worker_ram_estimation) ) If you do not know how many CPUs you have on your system you can use the following command: grep -c ^processor /proc/cpuinfo Let's say we have a system with 4 CPU cores, 8 GB of RAM memory and 30 concurrent Odoo users. 30 users / 6 = **5** (5 is theoretical number of workers needed ) (4 * 2) + 1 = **9** ( 9 is the theoretical maximum number of workers) Based on the calculation above we can use 5 workers + 1 worker for the cron worker which is total of 6 workers. Calculate the RAM memory consumption based on the number of the workers: RAM = 6 * ((0.8*150) + (0.2*1024)) ~= 2 GB of RAM The calculation above show us that our Odoo installation will need around 2GB of RAM. To switch to multiprocessing mode, open the configuration file and append the following lines: /etc/odoo12.conf limit_memory_hard = 2684354560 limit_memory_soft = 2147483648 limit_request = 8192 limit_time_cpu = 600 limit_time_real = 1200 max_cron_threads = 1 workers = 5 Restart the Odoo service for the changes to take effect: sudo systemctl restart odoo12 The rest of the system resources will be used by other services that run on this system. In this guide we installed Odoo along with PostgreSQL and Nginx on a same server and depending on your setup you may also have other services running on your server. Conclusion This tutorial walked you through the installation of Odoo 12 on Debian GNU/Linux 9 in a Python virtual environment using Nginx as a reverse proxy. You also learned how to enable multiprocessing and optimize Odoo for production environment. ###Referencias https://linuxize.com/post/how-to-deploy-odoo-12-on-ubuntu-18-04/ Autorenovar el certificado SSL de lets encrypt \u00b6 En el cron del root incluir 15 3 * * * /usr/bin/certbot renew --quiet 20 3 * * 1 /etc/init.d/nginx reload En el fichero del sitio de odoo en sites-enabled location ^~ /.well-known/acme-challenge/ { allow all; root /var/lib/letsencrypt/; default_type \"text/plain\"; try_files $uri =404; } Mapear .well-known/acme-challenge a /var/lib/letsencrypt : #> sudo mkdir -p /var/lib/letsencrypt/.well-known #> sudo chgrp odoo12 /var/lib/letsencrypt #> sudo chmod g+s /var/lib/letsencrypt","title":"Instalar Odoo 12"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012/#instalar-odoo-12","text":"Este tutorial cubre los pasos necesarios para instalar y configurar ODOO 12 usando el c\u00f3digo fuente de Odoo disponible en Git y un entorno Python virtual (Probado con \u00e9xito en un sistema Debian GNU/Linux 9)","title":"Instalar Odoo 12"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012/#preliminares","text":"","title":"Preliminares"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012/#actualizar-el-sistema","text":"Login en la m\u00e1quina Debian GNU/Linux 9 como usuario sudo y actualiza el sistema: sudo apt update && sudo apt upgrade Instalar Git, Pip, Node.js y las dependencias requeridas de Odoo: sudo apt install git python3-pip build-essential wget python3-dev python3-venv python3-wheel libxslt-dev libzip-dev libldap2-dev libsasl2-dev python3-setuptools node-less","title":"Actualizar el sistema"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012/#crear-usuario-odoo12","text":"Crear un nuevo usuario para Odoo llamado odoo12 con el home directory en /opt/odoo12 usando el siguiente comando: sudo useradd -m -d /opt/odoo12 -U -r -s /bin/bash odoo12","title":"Crear Usuario Odoo12"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012/#instalar-y-configurar-postgresql","text":"Instalar PostgreSQL desde los repositorios: sudo apt install postgresql Una vez que la instalaci\u00f3n se complete, crear un usuario PostgreSQL con el mismo nombre que el usuario de sistema creado anteriormente , en nuestro caso es odoo12 : sudo su - postgres -c \"createuser -s odoo12\"","title":"Instalar y Configurar PostgreSQL"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012/#instalar-wkhtmltopdf","text":"El paquete wkhtmltox proporciona un conjunto de herramientas de c\u00f3digo abierto las cuales pueden renderizar HTML en PDF y varios formatos de im\u00e1genes. Para poder imprimir en PDF los informes, es necesario el paquete wkhtmltopdf. la versi\u00f3n recomendada para Odoo es la 0.12.1 que no viene incluida en los repositorios oficiales. Descargar el paquete con este comando wget: wget https://builds.wkhtmltopdf.org/0.12.1.3/wkhtmltox_0.12.1.3-1~bionic_amd64.deb Una vez descargado instalar con el comando: sudo apt install ./wkhtmltox_0.12.1.3-1~bionic_amd64.deb","title":"Instalar Wkhtmltopdf"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012/#instalar-y-configurar-odoo","text":"Instalaremos Odoo desde el repositorio GitHub dentro de un entorno virtual aislado Python. Antes de empezar con el proceso de instalaci\u00f3n cambiamos al usuario \u201codoo12\u201d: sudo su - odoo12 Clonamos el repositorio de github: git clone https://www.github.com/odoo/odoo --depth 1 --branch 12.0 /opt/odoo12/odoo Creamos un entorno virtual Python: cd /opt/odoo12 python3 -m venv odoo-venv A continuaci\u00f3n, activamos el entorno con el siguiente comando: source odoo-venv/bin/activate Instalamos todos los m\u00f3dulos python requeridos por odoo con el comando pip3 : pip3 install wheel pip3 install -r odoo/requirements.txt Desactivar el entorno virtual con este comando: deactivate Crear un nuevo directorio para los addons: mkdir /opt/odoo12/odoo-custom-addons Cambiamos de nuevo al usuario sudo: exit A continuaci\u00f3n, crearemos un fichero de configuraci\u00f3n copiando el original como molde: sudo cp /opt/odoo12/odoo/debian/odoo.conf /etc/odoo12.conf abrimos el fichero y lo editamos para dejarlo como sigue: sudo nano /etc/odoo12.conf /etc/odoo12.conf [options] ; This is the password that allows database operations: admin_passwd = my_admin_passwd db_host = False db_port = False db_user = odoo12 db_password = False addons_path = /opt/odoo12/odoo/addons,/opt/odoo12/odoo-custom-addons No te olvides de cambiar my_admin_passwd a algo mas seguro.","title":"Instalar y Configurar Odoo"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012/#crear-un-fichero-systemd-unit","text":"Para ejecutar Odoo como un servicio necesitaremos crear un fichero de tipo service unit en la carpeta /etc/systemd/system/ . sudo nano /etc/systemd/system/odoo12.service con este contenido [Unit] Description=Odoo12 Requires=postgresql.service After=network.target postgresql.service [Service] Type=simple SyslogIdentifier=odoo12 PermissionsStartOnly=true User=odoo12 Group=odoo12 ExecStart=/opt/odoo12/odoo-venv/bin/python3 /opt/odoo12/odoo/odoo-bin -c /etc/odoo12.conf StandardOutput=journal+console [Install] WantedBy=multi-user.target Notificaremos a systemd que se ha agregado un nuevo fichero unit y arrancaremos el servicio odoo12 con: sudo systemctl daemon-reload sudo systemctl start odoo12 Chequea el estado del servicio: sudo systemctl status odoo12 La salida debe indicar algo parecido a lo de abajo, indicando que el servicio est\u00e1 cargado (loaded) pero desactivado (disabled): - odoo12.service - Odoo12 Loaded: loaded (/etc/systemd/system/odoo12.service; disabled; vendor preset: enabled) Active: active (running) since Tue 2018-10-09 14:15:30 PDT; 3s ago Main PID: 24334 (python3) Tasks: 4 (limit: 2319) CGroup: /system.slice/odoo12.service `-24334 /opt/odoo12/odoo-venv/bin/python3 /opt/odoo12/odoo/odoo-bin -c /etc/odoo12.conf Para que arranque automaticamente en el inicio del sistema, lo activamos con: sudo systemctl enable odoo12 Si quieres ver los mensajes del log guardados por el servicio Odoo puedes usar: sudo journalctl -u odoo12","title":"Crear un fichero Systemd Unit"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012/#test-de-la-instalacion","text":"Abre el navegador y ves a : http://your_domain_or_IP_address:8069 Asumiendo que todo haya ido bien, aparecer\u00e1 la ventana de gesti\u00f3n de las bases de datos","title":"Test de la Instalaci\u00f3n"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012/#configure-nginx-as-ssl-termination-proxy","text":"Ensure that you have met the following prerequisites before continuing with this section: Domain name pointing to your public server IP. In this tutorial we will use example.com. Nginx installed. SSL certificate for your domain. You can install a free Let's Encrypt SSL certificate . The default Odoo web server is serving traffic over HTTP. To make our Odoo deployment more secure we will configure Nginx as a SSL termination proxy that will serve the traffic over HTTPS. SSL termination proxy is a proxy server which handles the SSL encryption/decryption. This means that our termination proxy (Nginx) will handle and decrypt incoming TLS connections (HTTPS), and it will pass on the unencrypted requests to our internal service (Odoo) so the traffic between Nginx and Odoo will not be encrypted (HTTP). Using a reverse proxy gives you a lot of benefits such as Load Balancing, SSL Termination, Caching, Compression, Serving Static Content and more. In this example we will configure SSL Termination, HTTP to HTTPS redirection, WWW to non-WWW redirection, cache the static files and enable GZip compression. Open your text editor and create the following file: sudo nano /etc/nginx/sites-enabled/example.com /etc/nginx/sites-enabled/example.com # Odoo servers upstream odoo { server 127.0.0.1:8069; } upstream odoochat { server 127.0.0.1:8072; } # HTTP -> HTTPS server { listen 80; server_name www.example.com example.com; include snippets/letsencrypt.conf; return 301 https://example.com$request_uri; } # WWW -> NON WWW server { listen 443 ssl http2; server_name www.example.com; ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem; ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem; ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem; include snippets/ssl.conf; return 301 https://example.com$request_uri; } server { listen 443 ssl http2; server_name example.com; proxy_read_timeout 720s; proxy_connect_timeout 720s; proxy_send_timeout 720s; # Proxy headers proxy_set_header X-Forwarded-Host $host; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header X-Real-IP $remote_addr; # SSL parameters ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem; ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem; ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem; include snippets/ssl.conf; # log files access_log /var/log/nginx/odoo.access.log; error_log /var/log/nginx/odoo.error.log; # Handle longpoll requests location /longpolling { proxy_pass http://odoochat; } # Handle / requests location / { proxy_redirect off; proxy_pass http://odoo; } # Cache static files location ~* /web/static/ { proxy_cache_valid 200 90m; proxy_buffering on; expires 864000; proxy_pass http://odoo; } # Gzip gzip_types text/css text/less text/plain text/xml application/xml application/json application/javascript; gzip on; } Don\u2019t forget to replace example.com with your Odoo domain and set the correct path to the SSL certificate files. The snippets used in this configuration are created in this guide . Once you are done, restart the Nginx service with: sudo systemctl restart nginx Next, we need to tell Odoo that we will use proxy. To do so, open the configuration file and add the following line: /etc/odoo12.conf proxy_mode = True Restart the Odoo service for the changes to take effect: sudo systemctl restart odoo12 At this point, your server is configured and you can access your Odoo instance at: https://example.com ####Change the binding interface This step is optional, but it is a good security practice. By default, Odoo server listens to port 8069 on all interfaces. If you want to disable direct access to your Odoo instance you can either block the port 8069 for all public interfaces or force Odoo to listen only on the local interface. In this guide we will configure Odoo to listen only on 127.0.0.1. Open the configuration add the following two lines at the end of the file: /etc/odoo12.conf xmlrpc_interface = 127.0.0.1 netrpc_interface = 127.0.0.1 Save the configuration file and restart the Odoo server for the changes to take effect: sudo systemctl restart odoo12 ####Enable Multiprocessing By default, Odoo is working in multithreading mode. For production deployments, it is recommended to switch to the multiprocessing server as it increases stability, and make better usage of the system resources. In order to enable multiprocessing we need to edit the Odoo configuration and set a non-zero number of worker processes. The number of workers is calculated based on the number of CPU cores in the system and the available RAM memory. According to the official Odoo documentation to calculate the workers number and required RAM memory size we will use the following formulas and assumptions: Worker number calculation theoretical maximal number of worker = (system_cpus * 2) + 1 1 worker can serve ~= 6 concurrent users Cron workers also requires CPU RAM memory size calculation We will consider that 20% of all requests are heavy requests, while 80% are lighter ones. Heavy requests are using around 1 GB of RAM while the lighter ones are using around 150 MB of RAM Needed RAM = number_of_workers * ( (light_worker_ratio * light_worker_ram_estimation) + (heavy_worker_ratio * heavy_worker_ram_estimation) ) If you do not know how many CPUs you have on your system you can use the following command: grep -c ^processor /proc/cpuinfo Let's say we have a system with 4 CPU cores, 8 GB of RAM memory and 30 concurrent Odoo users. 30 users / 6 = **5** (5 is theoretical number of workers needed ) (4 * 2) + 1 = **9** ( 9 is the theoretical maximum number of workers) Based on the calculation above we can use 5 workers + 1 worker for the cron worker which is total of 6 workers. Calculate the RAM memory consumption based on the number of the workers: RAM = 6 * ((0.8*150) + (0.2*1024)) ~= 2 GB of RAM The calculation above show us that our Odoo installation will need around 2GB of RAM. To switch to multiprocessing mode, open the configuration file and append the following lines: /etc/odoo12.conf limit_memory_hard = 2684354560 limit_memory_soft = 2147483648 limit_request = 8192 limit_time_cpu = 600 limit_time_real = 1200 max_cron_threads = 1 workers = 5 Restart the Odoo service for the changes to take effect: sudo systemctl restart odoo12 The rest of the system resources will be used by other services that run on this system. In this guide we installed Odoo along with PostgreSQL and Nginx on a same server and depending on your setup you may also have other services running on your server. Conclusion This tutorial walked you through the installation of Odoo 12 on Debian GNU/Linux 9 in a Python virtual environment using Nginx as a reverse proxy. You also learned how to enable multiprocessing and optimize Odoo for production environment. ###Referencias https://linuxize.com/post/how-to-deploy-odoo-12-on-ubuntu-18-04/","title":"Configure Nginx as SSL Termination Proxy"},{"location":"kb/Programaci%C3%B3n/odoo/Instalar%20Odoo%2012/#autorenovar-el-certificado-ssl-de-lets-encrypt","text":"En el cron del root incluir 15 3 * * * /usr/bin/certbot renew --quiet 20 3 * * 1 /etc/init.d/nginx reload En el fichero del sitio de odoo en sites-enabled location ^~ /.well-known/acme-challenge/ { allow all; root /var/lib/letsencrypt/; default_type \"text/plain\"; try_files $uri =404; } Mapear .well-known/acme-challenge a /var/lib/letsencrypt : #> sudo mkdir -p /var/lib/letsencrypt/.well-known #> sudo chgrp odoo12 /var/lib/letsencrypt #> sudo chmod g+s /var/lib/letsencrypt","title":"Autorenovar el certificado SSL de lets encrypt"},{"location":"kb/Programaci%C3%B3n/odoo/Internationalization/","text":"Internacionalizaci\u00f3n \u00b6","title":"Internacionalizaci\u00f3n"},{"location":"kb/Programaci%C3%B3n/odoo/Internationalization/#internacionalizacion","text":"","title":"Internacionalizaci\u00f3n"},{"location":"kb/Programaci%C3%B3n/odoo/M%C3%B3dulos%20Interesantes%20y%20repositorios%20GIT/","text":"M\u00f3dulos Interesantes / repositorios git \u00b6 https://github.com/javierobcn/sgw_odoo_addons Localizaci\u00f3n Espa\u00f1a Odoo \u00b6 M\u00f3dulos AEAT \u00b6 Server Tools \u00b6 https://github.com/OCA/server-tools/issues Database Auto-Backup \u00b6 https://github.com/OCA/server-tools/tree/12.0/auto_backup Agregar chatter en asientos contables \u00b6 https://github.com/OCA/account-financial-tools/tree/12.0/account_move_chatter","title":"M\u00f3dulos Interesantes / repositorios git"},{"location":"kb/Programaci%C3%B3n/odoo/M%C3%B3dulos%20Interesantes%20y%20repositorios%20GIT/#modulos-interesantes-repositorios-git","text":"https://github.com/javierobcn/sgw_odoo_addons","title":"M\u00f3dulos Interesantes / repositorios git"},{"location":"kb/Programaci%C3%B3n/odoo/M%C3%B3dulos%20Interesantes%20y%20repositorios%20GIT/#localizacion-espana-odoo","text":"","title":"Localizaci\u00f3n Espa\u00f1a Odoo"},{"location":"kb/Programaci%C3%B3n/odoo/M%C3%B3dulos%20Interesantes%20y%20repositorios%20GIT/#modulos-aeat","text":"","title":"M\u00f3dulos AEAT"},{"location":"kb/Programaci%C3%B3n/odoo/M%C3%B3dulos%20Interesantes%20y%20repositorios%20GIT/#server-tools","text":"https://github.com/OCA/server-tools/issues","title":"Server Tools"},{"location":"kb/Programaci%C3%B3n/odoo/M%C3%B3dulos%20Interesantes%20y%20repositorios%20GIT/#database-auto-backup","text":"https://github.com/OCA/server-tools/tree/12.0/auto_backup","title":"Database Auto-Backup"},{"location":"kb/Programaci%C3%B3n/odoo/M%C3%B3dulos%20Interesantes%20y%20repositorios%20GIT/#agregar-chatter-en-asientos-contables","text":"https://github.com/OCA/account-financial-tools/tree/12.0/account_move_chatter","title":"Agregar chatter en asientos contables"},{"location":"kb/Programaci%C3%B3n/odoo/Odoo%20Customize/","text":"Odoo Customize \u00b6 Este m\u00f3dulo posibilita modificar el men\u00fa de usuario y tambi\u00e9n quita la marca \"Odoo\" en ciertas partes del software. Instalaci\u00f3n \u00b6 Puedes descargar el m\u00f3dulo desde el repositorio github, copiarlo a una carpeta de addons que est\u00e9 incluida en el path de odoo y instalarlo como cualquier otro m\u00f3dulo de odoo. https://github.com/javierobcn/sgw_odoo_addons Uso \u00b6 Para acceder a los par\u00e1metros de configuraci\u00f3n ir a \"Ajustes\" \"Sugestionweb\" \"Personalizar Odoo\" y ver\u00e1s todas las opciones El m\u00f3dulo permite: \u00b6 Cambiar el nombre del sistema \u00b6 Sustituye la cadena 'Odoo' por el nombre asignado al sistema en distintas partes del software como en la barra del t\u00edtulo del navegador o el men\u00fa de usuario. Personalizar el Menu de usuario / Contenido del men\u00fa \u00b6 El men\u00fa de usuario por defecto incluye enlaces al sitio web de Odoo: Puedes personalizarlo, ocultando ciertas opciones as\u00ed como modificar los enlaces, agregar un selector de idioma, enlaces a los modos de desarrollo etc. Limpieza de datos \u00b6 Limpieza de datos (Cuidado) , Permite borrar todos los pedidos, movimientos, ordenes de compra, facturas etc. con un solo click. Otros \u00b6 Quitar marca odoo en el pie de p\u00e1gina del sitio web p\u00fablico con el dise\u00f1o por defecto : Modifica la vista website_templates incluida en la carpeta /views/ y adapta a tu conveniencia, despu\u00e9s instala el m\u00f3dulo, o actual\u00edzalo si ya estaba instalado. Cr\u00e9ditos \u00b6 La mayor parte de este m\u00f3dulo est\u00e1 basado en https://github.com/guohuadeng/app-odoo Contribuciones \u00b6 Cualquier contribuci\u00f3n es bienvenida Licencia \u00b6","title":"Odoo Customize"},{"location":"kb/Programaci%C3%B3n/odoo/Odoo%20Customize/#odoo-customize","text":"Este m\u00f3dulo posibilita modificar el men\u00fa de usuario y tambi\u00e9n quita la marca \"Odoo\" en ciertas partes del software.","title":"Odoo Customize"},{"location":"kb/Programaci%C3%B3n/odoo/Odoo%20Customize/#instalacion","text":"Puedes descargar el m\u00f3dulo desde el repositorio github, copiarlo a una carpeta de addons que est\u00e9 incluida en el path de odoo y instalarlo como cualquier otro m\u00f3dulo de odoo. https://github.com/javierobcn/sgw_odoo_addons","title":"Instalaci\u00f3n"},{"location":"kb/Programaci%C3%B3n/odoo/Odoo%20Customize/#uso","text":"Para acceder a los par\u00e1metros de configuraci\u00f3n ir a \"Ajustes\" \"Sugestionweb\" \"Personalizar Odoo\" y ver\u00e1s todas las opciones","title":"Uso"},{"location":"kb/Programaci%C3%B3n/odoo/Odoo%20Customize/#el-modulo-permite","text":"","title":"El m\u00f3dulo permite:"},{"location":"kb/Programaci%C3%B3n/odoo/Odoo%20Customize/#cambiar-el-nombre-del-sistema","text":"Sustituye la cadena 'Odoo' por el nombre asignado al sistema en distintas partes del software como en la barra del t\u00edtulo del navegador o el men\u00fa de usuario.","title":"Cambiar el nombre del sistema"},{"location":"kb/Programaci%C3%B3n/odoo/Odoo%20Customize/#personalizar-el-menu-de-usuario-contenido-del-menu","text":"El men\u00fa de usuario por defecto incluye enlaces al sitio web de Odoo: Puedes personalizarlo, ocultando ciertas opciones as\u00ed como modificar los enlaces, agregar un selector de idioma, enlaces a los modos de desarrollo etc.","title":"Personalizar el Menu de usuario / Contenido del men\u00fa"},{"location":"kb/Programaci%C3%B3n/odoo/Odoo%20Customize/#limpieza-de-datos","text":"Limpieza de datos (Cuidado) , Permite borrar todos los pedidos, movimientos, ordenes de compra, facturas etc. con un solo click.","title":"Limpieza de datos"},{"location":"kb/Programaci%C3%B3n/odoo/Odoo%20Customize/#otros","text":"Quitar marca odoo en el pie de p\u00e1gina del sitio web p\u00fablico con el dise\u00f1o por defecto : Modifica la vista website_templates incluida en la carpeta /views/ y adapta a tu conveniencia, despu\u00e9s instala el m\u00f3dulo, o actual\u00edzalo si ya estaba instalado.","title":"Otros"},{"location":"kb/Programaci%C3%B3n/odoo/Odoo%20Customize/#creditos","text":"La mayor parte de este m\u00f3dulo est\u00e1 basado en https://github.com/guohuadeng/app-odoo","title":"Cr\u00e9ditos"},{"location":"kb/Programaci%C3%B3n/odoo/Odoo%20Customize/#contribuciones","text":"Cualquier contribuci\u00f3n es bienvenida","title":"Contribuciones"},{"location":"kb/Programaci%C3%B3n/odoo/Odoo%20Customize/#licencia","text":"","title":"Licencia"},{"location":"kb/Programaci%C3%B3n/odoo/Odoo%20con%20Apache%20como%20reverse%20proxy/","text":"Odoo con Apache como reverse proxy \u00b6 Una vez que tenemos la instancia de odoo corriendo en el puerto standard 8069 podemos acceder a Odoo utilizando un nombre de dominio y sin poner el n\u00famero de puerto en la URL. Para ello utilizaremos Apache como Proxy reverso. Primero instalamos Apache2 y habilitamos los m\u00f3dulos necesarios: Una vez hecho esto, creamos un fichero de configuraci\u00f3n web para nuestro dominio: nano /etc/apache2/sites-available/your_domain.conf Y dentro del fichero ponemos lo siguiente: <VirtualHost *:80> ServerName your_domain.com ServerAlias www.your_domain.com ProxyRequests Off <Proxy *> Order deny,allow Allow from all </Proxy> ProxyPass / http://your_domain.com:8069/ ProxyPassReverse / http://your_domain.com:8069/ <Location /> Order allow,deny Allow from all </Location> </VirtualHost> Activamos el sitio en Apache: a2ensite your_domain.conf (Tambi\u00e9n podr\u00eda utilizarse el siguiente comando para activar el sitio) ln -s /etc/apache2/sites-available/your_domain.conf /etc/apache2/sites-enabled/your_domain.conf Reiniciamos apache service apache2 restart Es todo, tu sitio deber\u00eda funcionar y solo quedar\u00eda asegurar el sitio apache con un certificado SSL de Let\u2019s encrypt","title":"Odoo con Apache como reverse proxy"},{"location":"kb/Programaci%C3%B3n/odoo/Odoo%20con%20Apache%20como%20reverse%20proxy/#odoo-con-apache-como-reverse-proxy","text":"Una vez que tenemos la instancia de odoo corriendo en el puerto standard 8069 podemos acceder a Odoo utilizando un nombre de dominio y sin poner el n\u00famero de puerto en la URL. Para ello utilizaremos Apache como Proxy reverso. Primero instalamos Apache2 y habilitamos los m\u00f3dulos necesarios: Una vez hecho esto, creamos un fichero de configuraci\u00f3n web para nuestro dominio: nano /etc/apache2/sites-available/your_domain.conf Y dentro del fichero ponemos lo siguiente: <VirtualHost *:80> ServerName your_domain.com ServerAlias www.your_domain.com ProxyRequests Off <Proxy *> Order deny,allow Allow from all </Proxy> ProxyPass / http://your_domain.com:8069/ ProxyPassReverse / http://your_domain.com:8069/ <Location /> Order allow,deny Allow from all </Location> </VirtualHost> Activamos el sitio en Apache: a2ensite your_domain.conf (Tambi\u00e9n podr\u00eda utilizarse el siguiente comando para activar el sitio) ln -s /etc/apache2/sites-available/your_domain.conf /etc/apache2/sites-enabled/your_domain.conf Reiniciamos apache service apache2 restart Es todo, tu sitio deber\u00eda funcionar y solo quedar\u00eda asegurar el sitio apache con un certificado SSL de Let\u2019s encrypt","title":"Odoo con Apache como reverse proxy"},{"location":"kb/Programaci%C3%B3n/odoo/Programar%20copias%20autom%C3%A1ticas%20de%20ODOO%20Versi%C3%B3n%20f%C3%A1cil/","text":"Programar copias autom\u00e1ticas de ODOO Versi\u00f3n f\u00e1cil \u00b6 Hay un m\u00f3dulo de OCA que realiza copias de seguridad de forma autom\u00e1tica seg\u00fan el propio programador de tareas desde ODOO. Los backups incluyen la base de datos y el \u00abFilestore\u00bb. Antes de instalar el m\u00f3dulo, ejecutar en el servidor pip3 install pysftp==0.2.8 Instalar este m\u00f3dulo en Odoo https://github.com/OCA/server-tools/tree/12.0/auto_backup La configuraci\u00f3n del m\u00f3dulo est\u00e1 en \u00abAjustes\u00bb, \u00abT\u00e9cnico\u00bb, \u00abEstructura de la base de datos\u00bb, \u00abCopias de seguridad automatizadas\u00bb","title":"Programar copias autom\u00e1ticas de ODOO Versi\u00f3n f\u00e1cil"},{"location":"kb/Programaci%C3%B3n/odoo/Programar%20copias%20autom%C3%A1ticas%20de%20ODOO%20Versi%C3%B3n%20f%C3%A1cil/#programar-copias-automaticas-de-odoo-version-facil","text":"Hay un m\u00f3dulo de OCA que realiza copias de seguridad de forma autom\u00e1tica seg\u00fan el propio programador de tareas desde ODOO. Los backups incluyen la base de datos y el \u00abFilestore\u00bb. Antes de instalar el m\u00f3dulo, ejecutar en el servidor pip3 install pysftp==0.2.8 Instalar este m\u00f3dulo en Odoo https://github.com/OCA/server-tools/tree/12.0/auto_backup La configuraci\u00f3n del m\u00f3dulo est\u00e1 en \u00abAjustes\u00bb, \u00abT\u00e9cnico\u00bb, \u00abEstructura de la base de datos\u00bb, \u00abCopias de seguridad automatizadas\u00bb","title":"Programar copias autom\u00e1ticas de ODOO Versi\u00f3n f\u00e1cil"},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20Administracion%20Odoo/","text":"Eliminar el pie de los mensajes \"Powered by Odoo\" o \"Impulsado por Odoo\" \u00b6 Seg\u00fan el c\u00f3digo: https://github.com/odoo/odoo/blob/e3f54a78088ab799c8db543c663ea026e7a8b574/addons/sale/models/sale.py#L622 Se usa la vista definida en mail.mail_notification_paynow Vamos a \"Ajustes\" - \"T\u00e9cnico\" - \"Interfaz de usuario\" - \"Vistas\" Buscamos mail_notification_paynow y adaptamos a nuestra conveniencia","title":"Tips Administracion Odoo"},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20Administracion%20Odoo/#eliminar-el-pie-de-los-mensajes-powered-by-odoo-o-impulsado-por-odoo","text":"Seg\u00fan el c\u00f3digo: https://github.com/odoo/odoo/blob/e3f54a78088ab799c8db543c663ea026e7a8b574/addons/sale/models/sale.py#L622 Se usa la vista definida en mail.mail_notification_paynow Vamos a \"Ajustes\" - \"T\u00e9cnico\" - \"Interfaz de usuario\" - \"Vistas\" Buscamos mail_notification_paynow y adaptamos a nuestra conveniencia","title":"Eliminar el pie de los mensajes \"Powered by Odoo\" o \"Impulsado por Odoo\""},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20programaci%C3%B3n%20ODOO/","text":"Tips programaci\u00f3n ODOO \u00b6 Fechas y horas \u00b6 fields.Datetime.from_string() Atributos de modelo \u00b6 _name _description _order _rec_name _table _inherit _inherits Codigo ORM \u00b6 Ejecutar una funci\u00f3n de otro modelo \u00b6 Ejecutar la funci\u00f3n action_confirm del modelo sale.order: \u00b6 self.env['sale.order'].browse([self.order_id.id]).action_confirm() Vistas \u00b6 Hacer un elemento visible solo para administradores \u00b6 para hacer algo visible solo a admins, se agrega este par\u00e1metro al elemento en cuesti\u00f3n: groups=\"base.group_no_one\" Cambiar un atributo de un elemento HTML por herencia \u00b6 En el \u00faltimo xpath puede verse como cambia el atributo class del grid <template id= \"products_categories\" inherit_id= \"website_sale.products\" active= \"False\" customize_show= \"True\" name= \"Product Categories\" > <xpath expr= \"//div[@id='products_grid_before']\" position= \"inside\" > <ul class= \"nav nav-pills nav-stacked mt16\" > <li t-att-class= \" '' if category else 'active' \" > <a t-att-href= \"keep('/shop',category=0)\" > All Products </a> </li> <t t-foreach= \"categories\" t-as= \"c\" > <t t-call= \"website_sale.categories_recursive\" /> </t> </ul> </xpath> <xpath expr= \"//div[@id='products_grid_before']\" position= \"attributes\" > <attribute name= \"class\" > col-md-3 hidden-xs </attribute> </xpath> <xpath expr= \"//div[@id='products_grid']\" position= \"attributes\" > <attribute name= \"class\" > col-md-9 </attribute> </xpath> </template> Atributos din\u00e1micos en las vistas \u00b6 Puede hacerse un campo invisible o requerido en funci\u00f3n del valor de otro campo del mismo formulario <field name= \"sgw_documentation_url\" attrs= \"{ 'invisible': [('sgw_show_documentation', '=', False)], 'required': [('sgw_show_documentation', '=', True)] }\" /> Reports \u00b6 Odoo 10 necesita una version especif\u00edca para wkhtmltopdf \u00b6 https://wkhtmltopdf.org/downloads.html -- > 0.12.1 se desinstala la versi\u00f3n que haya con \u00b6 sudo apt-get remove --purge wkhtmltopdf y se instala la version descargada con gdeb desde nautilus o a mano con comandos \u00b6 sudo apt-get install gdebi-core sudo gdebi wkhtmltox-0.12.1_linux-trusty-amd64.deb debug reports en m\u00e1quina de desarrollo \u00b6 Agregar el par clave/valor a los par\u00e1metros de sistema (Modo desarrollador config-t\u00e9cnico-parametros-parametros del sistema: Clave web.base.url Valor http://0.0.0.0:8069 Para evitar estar haciendo esto cada vez que se descarga una copia a la maquina de desarrollo, puede crearse el par\u00e1metro reports.url que ser\u00e1 leido especificamente para los reports Clave report.url Valor http://localhost:8069 (Fuente) https://www.odoo.com/documentation/10.0/howtos/backend.html#reference-backend-reporting-printed-reports-pdf-without-styles Documentaci\u00f3n \u00b6 http://odoo-new-api.readthedocs.io/en/master/ https://www.odoo.com/documentation/14.0/reference/guidelines.html#python https://github.com/OCA/odoo-community.org/blob/master/website/Contribution/CONTRIBUTING.rst#introduction","title":"Tips programaci\u00f3n ODOO"},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20programaci%C3%B3n%20ODOO/#tips-programacion-odoo","text":"","title":"Tips programaci\u00f3n ODOO"},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20programaci%C3%B3n%20ODOO/#fechas-y-horas","text":"fields.Datetime.from_string()","title":"Fechas y horas"},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20programaci%C3%B3n%20ODOO/#atributos-de-modelo","text":"_name _description _order _rec_name _table _inherit _inherits","title":"Atributos de modelo"},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20programaci%C3%B3n%20ODOO/#codigo-orm","text":"","title":"Codigo ORM"},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20programaci%C3%B3n%20ODOO/#ejecutar-una-funcion-de-otro-modelo","text":"","title":"Ejecutar una funci\u00f3n de otro modelo"},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20programaci%C3%B3n%20ODOO/#ejecutar-la-funcion-action_confirm-del-modelo-saleorder","text":"self.env['sale.order'].browse([self.order_id.id]).action_confirm()","title":"Ejecutar la funci\u00f3n action_confirm del modelo sale.order:"},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20programaci%C3%B3n%20ODOO/#vistas","text":"","title":"Vistas"},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20programaci%C3%B3n%20ODOO/#hacer-un-elemento-visible-solo-para-administradores","text":"para hacer algo visible solo a admins, se agrega este par\u00e1metro al elemento en cuesti\u00f3n: groups=\"base.group_no_one\"","title":"Hacer un elemento visible solo para administradores"},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20programaci%C3%B3n%20ODOO/#cambiar-un-atributo-de-un-elemento-html-por-herencia","text":"En el \u00faltimo xpath puede verse como cambia el atributo class del grid <template id= \"products_categories\" inherit_id= \"website_sale.products\" active= \"False\" customize_show= \"True\" name= \"Product Categories\" > <xpath expr= \"//div[@id='products_grid_before']\" position= \"inside\" > <ul class= \"nav nav-pills nav-stacked mt16\" > <li t-att-class= \" '' if category else 'active' \" > <a t-att-href= \"keep('/shop',category=0)\" > All Products </a> </li> <t t-foreach= \"categories\" t-as= \"c\" > <t t-call= \"website_sale.categories_recursive\" /> </t> </ul> </xpath> <xpath expr= \"//div[@id='products_grid_before']\" position= \"attributes\" > <attribute name= \"class\" > col-md-3 hidden-xs </attribute> </xpath> <xpath expr= \"//div[@id='products_grid']\" position= \"attributes\" > <attribute name= \"class\" > col-md-9 </attribute> </xpath> </template>","title":"Cambiar un atributo de un elemento HTML por herencia"},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20programaci%C3%B3n%20ODOO/#atributos-dinamicos-en-las-vistas","text":"Puede hacerse un campo invisible o requerido en funci\u00f3n del valor de otro campo del mismo formulario <field name= \"sgw_documentation_url\" attrs= \"{ 'invisible': [('sgw_show_documentation', '=', False)], 'required': [('sgw_show_documentation', '=', True)] }\" />","title":"Atributos din\u00e1micos en las vistas"},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20programaci%C3%B3n%20ODOO/#reports","text":"","title":"Reports"},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20programaci%C3%B3n%20ODOO/#odoo-10-necesita-una-version-especifica-para-wkhtmltopdf","text":"https://wkhtmltopdf.org/downloads.html -- > 0.12.1","title":"Odoo 10 necesita una version especif\u00edca para wkhtmltopdf"},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20programaci%C3%B3n%20ODOO/#se-desinstala-la-version-que-haya-con","text":"sudo apt-get remove --purge wkhtmltopdf","title":"se desinstala la versi\u00f3n que haya con"},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20programaci%C3%B3n%20ODOO/#y-se-instala-la-version-descargada-con-gdeb-desde-nautilus-o-a-mano-con-comandos","text":"sudo apt-get install gdebi-core sudo gdebi wkhtmltox-0.12.1_linux-trusty-amd64.deb","title":"y se instala la version descargada con gdeb desde nautilus o a mano con comandos"},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20programaci%C3%B3n%20ODOO/#debug-reports-en-maquina-de-desarrollo","text":"Agregar el par clave/valor a los par\u00e1metros de sistema (Modo desarrollador config-t\u00e9cnico-parametros-parametros del sistema: Clave web.base.url Valor http://0.0.0.0:8069 Para evitar estar haciendo esto cada vez que se descarga una copia a la maquina de desarrollo, puede crearse el par\u00e1metro reports.url que ser\u00e1 leido especificamente para los reports Clave report.url Valor http://localhost:8069 (Fuente) https://www.odoo.com/documentation/10.0/howtos/backend.html#reference-backend-reporting-printed-reports-pdf-without-styles","title":"debug reports en m\u00e1quina de desarrollo"},{"location":"kb/Programaci%C3%B3n/odoo/Tips%20programaci%C3%B3n%20ODOO/#documentacion","text":"http://odoo-new-api.readthedocs.io/en/master/ https://www.odoo.com/documentation/14.0/reference/guidelines.html#python https://github.com/OCA/odoo-community.org/blob/master/website/Contribution/CONTRIBUTING.rst#introduction","title":"Documentaci\u00f3n"},{"location":"kb/Programaci%C3%B3n/odoo/fichero%20odoo-conf/","text":"odoo.md [options] # # WARNING: # If you use the Odoo Database utility to change the master password be aware # that the formatting of this file WILL be LOST! A copy of this file named # /etc/odoo/openerp-server.conf.template has been made in case this happens # Note that the copy does not have any first boot changes #----------------------------------------------------------------------------- # Odoo Server Config File - TurnKey Linux # ( /etc/odoo/openerp-server.conf ) # # Great pain has been taken to organize this file, and include comments for # each. As with all open source software this file is a work in progress. If # you see something that is wrong or needs to be updated, submit and issue # on TurnKey's GIT Hub issue tracker! Or better yet, fork the repo with this # file and submit a pull request! # # Information about these settings where taken from openerp-server --help # and from https://www.odoo.com/documentation/8.0/reference/cmdline.html # #----------------------------------------------------------------------------- # Index: # Database Settings # Logs Settings # Service Settings # Email Settings # Server Options # Tuning Adjustments # Testing and Demo Settings #----------------------------------------------------------------------------- #HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH # Database Settings #HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH #----------------------------------------------------------------------------- # Specify the database host (default localhost). #----------------------------------------------------------------------------- #db_host = localhost #----------------------------------------------------------------------------- # Specify the database port (default None). #----------------------------------------------------------------------------- #db_port = 5432 #----------------------------------------------------------------------------- # Specify the database user name (default None). #----------------------------------------------------------------------------- #db_user = odoo #----------------------------------------------------------------------------- # Specify the database password for db_user (default None) #----------------------------------------------------------------------------- db_password = 00aa9df39b0c99ac3d1d8412d2917175 #----------------------------------------------------------------------------- # Specify the database name. #----------------------------------------------------------------------------- db_name = False #----------------------------------------------------------------------------- # DataError: new encoding (UTF8) is incompatible with the encoding of the # template database (SQL_ASCII) HINT: Use the same encoding as in the template # database, or use template0 as template. #----------------------------------------------------------------------------- db_template = template0 #----------------------------------------------------------------------------- # Master Database password # This is set at first boot, and can be set from within Odoo #----------------------------------------------------------------------------- admin_passwd = 12357 #----------------------------------------------------------------------------- # specify the the maximum number of physical connections to posgresql #----------------------------------------------------------------------------- db_maxconn = 64 #----------------------------------------------------------------------------- # Filter listed database REGEXP #----------------------------------------------------------------------------- dbfilter = .* #HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH # Logs Settings #HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH # # # I found information from Odoo on logging was not very clear. So I complied # this helpful list and info about Odoo logging. # # Information was gleaned from the following sites: # (The URLs are broken up to fit them in the file) # - http://www.mindissoftware.com # /2014/09/07/Odoo-logging-configuration-usage-implementation/ # - https://www.odoo.com/ # /forum/help-1/question # /what-is-the-full-list-of-command-line-options-for-odoo-59139 # - https://www.odoo.com/documentation/8.0/reference/cmdline.html # # Odoo uses the Python standard logging library. However, it uses a special # configuration syntax to configure logging levels for its modules. # # It's helpful to know what each level type means, so below is quick list: # # Level meanings: # debug: Debug message for debugging only. # info: Information message to report important modular event. # warning: Warning message to report minor issues. # error: Error message to report failed operations. # critical: A critical message -- so critical that the module cannot work # # # log_level: # any value in the list below. Odoo changed the log_level meaning # here because these level values are mapped to a set of predefined # 'module:log_level' pairs. These pairs are listed next to the log-level. # You could get the same result by using the log_handler option # # # LOG LEVEL / log_handler: module:log_level # ---------------------------------------------------------------------------- # info / [':INFO'] # critical / ['openerp:CRITICAL', 'werkzeug:CRITICAL'] # error / ['openerp:ERROR', 'werkzeug:ERROR'] # warn / ['openerp:WARNING', 'werkzeug:WARNING'] # debug / ['openerp:DEBUG'] # debug_sql / ['openerp.sql_db:DEBUG'] # debug_rpc / ['openerp:DEBUG','openerp.http.rpc.request:DEBUG'] # debug_rpc_answer / ['openerp:DEBUG','openerp.http.rpc.request:DEBUG', # 'openerp.http.rpc.response:DEBUG'] # # End of Logging Info # ---------------------------------------------------------------------------- #----------------------------------------------------------------------------- # The log filename. If not set, use stdout. #----------------------------------------------------------------------------- logfile = /var/log/odoo/openerp-server.log #----------------------------------------------------------------------------- # True/False. If True, create a daily log file and keep 30 files. #----------------------------------------------------------------------------- logrotate = True #----------------------------------------------------------------------------- # Ture/False. If True, also write log to 'ir_logging' table in database #----------------------------------------------------------------------------- log-db = False #----------------------------------------------------------------------------- # True/False logs to the system's event logger: syslog #----------------------------------------------------------------------------- syslog = False #----------------------------------------------------------------------------- # Log level - One of the following: # info, debug_rpc, warn, test, critical, debug_sql, error, debug, # debug_rpc_answer #----------------------------------------------------------------------------- log-level = warn #----------------------------------------------------------------------------- # log_handler - can be a list of 'module:log_level' pairs. # The default value is ':INFO' -- it means the default logging level # is 'INFO' for all modules. #----------------------------------------------------------------------------- # log_handler = #HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH # Service Settings #HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH #----------------------------------------------------------------------------- # The IP address on which the server will bind. # If empty, it will bind on all interfaces (default empty). #----------------------------------------------------------------------------- interface = localhost #----------------------------------------------------------------------------- # The TCP port on which the server will listen (default 8069). #----------------------------------------------------------------------------- port = 8069 #----------------------------------------------------------------------------- # Launch server over https instead of http (default False). #----------------------------------------------------------------------------- secure = False #----------------------------------------------------------------------------- # Set to True if you are deploying your App behind a proxy # e.g. Apache using mod_proxy. --proxy_mode added, using Werkzeug ProxyFix class #----------------------------------------------------------------------------- proxy_mode = True #----------------------------------------------------------------------------- # Specify the addons_path folders ordered by priority # addons_path=/first/path/,/second/path/ #----------------------------------------------------------------------------- addons_path = /opt/openerp/odoo/addons,/home/myaddons #----------------------------------------------------------------------------- # The file where the server pid will be stored (default False). # We are letting the init script create the pid #----------------------------------------------------------------------------- # pidfile = False #----------------------------------------------------------------------------- # specify reference timezone for the server (e.g. Europe/Brussels) #----------------------------------------------------------------------------- timezone = False #----------------------------------------------------------------------------- # specify the certificate file for the SSL connection #----------------------------------------------------------------------------- secure_cert_file = server.cert #----------------------------------------------------------------------------- # specify the private key file for the SSL connection #----------------------------------------------------------------------------- secure_pkey_file = server.pkey #----------------------------------------------------------------------------- # XML-RPC Secure Configuration (disabled if ssl is unavailable): # xmlrpcs - Set to False to disable the XML-RPC Secure protocol # xmlrpcs_interface - Specify the TCP IP address for the XML-RPC Secure # protocol. The empty string binds to all interfaces. # xmlrpcs_port - Specify the TCP port for the XML-RPC Secure protocol #----------------------------------------------------------------------------- xmlrpcs = True xmlrpcs_interface = 127.0.0.1 xmlrpcs_port = 8071 #----------------------------------------------------------------------------- # XML-RPC Configuration: # xmlrpc - Set to False to disable the XML-RPC protocol # xmlrpc_interface - Specify the TCP IP address for the XML-RPC # protocol. The empty string binds to all interfaces. # xmlrpc_port - Specify the TCP port for the XML-RPC protocol #----------------------------------------------------------------------------- xmlrpc = True xmlrpc_interface = 127.0.0.1 xmlrpc_port = 8069 #----------------------------------------------------------------------------- # Long polling port: # TCP port for long-polling connections in multiprocessing or gevent mode, # defaults to 8072. Not used in default (threaded) mode. #----------------------------------------------------------------------------- longpolling_port = 8072 #----------------------------------------------------------------------------- # Use this for big data importation, if it crashes you will be able to continue # at the current state. Provide a filename to store intermediate importation # states. #----------------------------------------------------------------------------- import_partial = #----------------------------------------------------------------------------- # Use the unaccent function provided by the database when available #----------------------------------------------------------------------------- unaccent = False #----------------------------------------------------------------------------- # specify modules to export. Use in combination with --i18n-export #----------------------------------------------------------------------------- translate_modules = ['all'] #----------------------------------------------------------------------------- # Comma-separated list of server-wide modules, default=web #----------------------------------------------------------------------------- server_wide_modules = None #HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH # Email Settings #HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH #----------------------------------------------------------------------------- # Specify the SMTP server for sending email (default localhost). #----------------------------------------------------------------------------- smtp_server = localhost #----------------------------------------------------------------------------- # Specify the SMTP user for sending email (default False). #----------------------------------------------------------------------------- smtp_user = False #----------------------------------------------------------------------------- # Specify the SMTP password for sending email (default False). #----------------------------------------------------------------------------- smtp_password = False #----------------------------------------------------------------------------- # if True, SMTP connections will be encrypted with SSL (STARTTLS) #----------------------------------------------------------------------------- smtp_ssl = False #----------------------------------------------------------------------------- # Specify the SMTP email address for sending email #----------------------------------------------------------------------------- email_from = \"TKL-Odoo-Server@example.com\" #----------------------------------------------------------------------------- # Specify the SMTP port #----------------------------------------------------------------------------- smtp_port = 25 #HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH # Tuning Options #HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH #----------------------------------------------------------------------------- # A word on tuning your Odoo Server #----------------------------------------------------------------------------- # # A lot of time has gone in to testing this TKL appliance, and one thing we # learned while testing was tuning. For all the why we chose these numbers you # can take a look at he issues on GitHub (links at the botton of this article) # # Most of this text here was taken from the Memory Matrix Discussion # https://github.com/DocCyblade/tkl-odoo/issues/49#issuecomment-148881166 # # It is important to note that you can run Odoo in threaded mode by setting # the workers option to 0 however there are some modules that won't work # and you loose fine grain control of resource management. # #----------------------------------------------------------------------------- # # the --workers is how many new process will be started to perform work or # (answer requests) The workers have limits upon them set by the limit_xxxxx # options here in the config file. # # The \"limit_memory_soft\" limit is the amount of ram that when a process # goes over this limit after it is done with the request it is terminated # and the memory it was using is freed. This amount goes for each process # # The hard limit is the amount of ram that if the process goes over it, # it WILL terminate right then. (I don't think this is really correct # because of the PDF issue we had and set this to 1.3 GB and never # saw a process take this much. but if its below 1.3GB PDF are not created) # # The one we need to pay attention to is the limit_memory_soft. # As these workers will stay alive and hold on to memory until that limit # is reached. So if you have 5 workers and the soft limit is 256MB you could # end up with 5 workers each taking 256MB that's 1.25GB of RAM that could # be taken up. If you only had 1GB of ram you may need to dial back your # workers or your soft limit. # # It's a balancing act of sorts, I am also not sure if keeping the # workers at say 350 or 400 if there is some caching effect. Not sure # why it's holding on to the memory. # #----------------------------------------------------------------------------- # # Hardware Matrix for recommended values: # (Note these are for REAL hardware, Virtual Hardware has it's own # issues that can arise with too many guest on a host with too many # CPU cores etc, so remember that when looking at the chart below) # (One other note that when I tested these, I did use VMware but # no other VMs where competing for resources) # (One last note, really. These numbers are to show the relationship # between the config settings and hardware. We also assume you are running # the database server on the same server. I know at some point in the # higher numbers that this would not be the case. These are not numbers # set in stone nor numbers gotten from Odoo. These are numbers I have # come up with from the testing I have done. Real world examples if you # have them would be great and these numbers can and should be updated! # # Heading | Description # ------------------ | --------------------------------------------------------- # CPUs | Number of CPU Cores not threads # Physical | Physical memory, not virtual or swap # workers | Number of workers specified in config file (workers = x) # cron | Number of workers for cron jobs (max_cron_threads = xx) # Mem Per | Memory in MB that is the max memory for request per worker # Max Mem | Maximum amount that can be used by all workers # limit_memory_soft | Number in bytes that you will use for this setting # # Note: Max Memory if notice is less than total memory this is on purpose. As # workers process requests they can grow beyond the Mem Per limit so a # server under heavy load could go past this amount. This is why there # is \"head room\" built in. # # CPUs | Physical | workers | cron | Mem Per | Max Mem | limit_memory_soft # ---- | -------- | ------- | ---- | ------- | ------- | ----------------------- # ANY | =< 256MB | NR | NR | NR | NR | NR # 1 | 512MB | 0 | N/A | N/A | N/A | N/A # 1 | 512MB | 1 | 1 | 177MB | 354MB | 185127901 # 1 | 1GB | 2 | 1 | 244MB | 732MB | 255652815 # 1 | 2GB | 2 | 1 | 506MB | 1518MB | 530242876 # 2 | 1GB | 3 | 1 | 183MB | 732MB | 191739611 # 2 | 2GB | 5 | 2 | 217MB | 1519MB | 227246947 # 2 | 4GB | 5 | 2 | 450MB | 3150MB | 471974428 # 4 | 2GB | 5 | 2 | 217MB | 1519MB | 227246947 # 4 | 4GB | 9 | 2 | 286MB | 3146MB | 300347363 # 4 | 8GB | 9 | 3 | 546MB | 6552MB | 572662306 # 4 | 16GB | 9 | 3 | 1187MB | 14244MB | 1244918057 # # #----------------------------------------------------------------------------- # # Calculations on how we got the above chart and other info can be found # # Memory Matrix Discussion # https://github.com/DocCyblade/tkl-odoo/issues/49 # # Shakedown Testing Discussions # https://github.com/DocCyblade/tkl-odoo/issues/52 # https://github.com/DocCyblade/tkl-odoo/issues/53 # https://github.com/DocCyblade/tkl-odoo/issues/54 # https://github.com/DocCyblade/tkl-odoo/issues/55 # #----------------------------------------------------------------------------- #----------------------------------------------------------------------------- # Specify the number of workers, 0 disable prefork mode. # if count is not 0 , enables multiprocessing and sets up the # specified number of HTTP workers (sub-processes processing HTTP and RPC # requests). TKL Default is 0 # # (See chart above for recommended values) #----------------------------------------------------------------------------- workers = 0 #----------------------------------------------------------------------------- # number of workers dedicated to cron jobs. Defaults to 2. The workers are # threads in multithreading mode and processes in multiprocessing mode. #----------------------------------------------------------------------------- max_cron_threads = 1 #----------------------------------------------------------------------------- # Prevents the worker from using more than <limit> CPU seconds for each # request. If the limit is exceeded, the worker is killed #----------------------------------------------------------------------------- limit_time_cpu = 60 #----------------------------------------------------------------------------- # Prevents the worker from taking longer than <limit> seconds to process a # request. If the limit is exceeded, the worker is killed. #----------------------------------------------------------------------------- limit_time_real = 170 #----------------------------------------------------------------------------- # Maximum allowed virtual memory per worker. If the limit is exceeded, the # worker is killed and recycled at the end of the current request. # # (See chart above for recommended values) #----------------------------------------------------------------------------- limit_memory_soft = 255652815 #----------------------------------------------------------------------------- # Hard limit on virtual memory, any worker exceeding the limit will be # immediately killed without waiting for the end of the current request # processing. # # Not sure of the reason but if this is set lower that 1.3GB then print jobs # using PDF does not work. We are unsure why but this was the lowest amount # for it to work. #----------------------------------------------------------------------------- limit_memory_hard = 1395864371 #----------------------------------------------------------------------------- # Number of requests a worker will process before being recycled and restarted. #----------------------------------------------------------------------------- limit_request = 8196 #----------------------------------------------------------------------------- # Force a limit on the maximum number of records kept in the virtual osv_memory # tables. The default is False, which means no count-based limit. #----------------------------------------------------------------------------- osv_memory_count_limit = False #----------------------------------------------------------------------------- # Force a limit on the maximum age of records kept in the virtual osv_memory # tables. This is a decimal value expressed in hours, and the default is 1 hour. #----------------------------------------------------------------------------- osv_memory_age_limit = 1.0 #HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH # Testing and Demo Settings #HHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH #----------------------------------------------------------------------------- # Enable YAML and unit tests. #----------------------------------------------------------------------------- test_enable = False #----------------------------------------------------------------------------- # Launch a python or YML test file. #----------------------------------------------------------------------------- test_file = False #----------------------------------------------------------------------------- # If set, will save sample of all reports in this directory. #----------------------------------------------------------------------------- test_report_directory = False #----------------------------------------------------------------------------- # Commit database changes performed by YAML or XML tests. #----------------------------------------------------------------------------- test_commit = False #----------------------------------------------------------------------------- # disable loading demo data for modules to be installed (comma-separated, use # \"all\" for all modules). Default is none #----------------------------------------------------------------------------- without_demo =","title":"Fichero odoo conf"},{"location":"kb/Programaci%C3%B3n/odoo/modelos/","text":"Creaci\u00f3n de Modelos \u00b6 Fichero dentro de la carpeta models en min\u00fascula separado por _ /models/account_analytic_line.py En el c\u00f3digo, se usa PascalCase en los nombres de clase, como podemos ver en esta definici\u00f3n, y se sigue manteniendo el nombre en singular: # -*- coding: utf-8 -*- from odoo import api , fields , models , _ from math import copysign class AccountAnalyticLine ( models . Model ): ... El nombre del modelo va en min\u00fasculas y en singular, tal como vemos en la definici\u00f3n de sale_order.py # -*- coding: utf-8 -*- from odoo import api , fields , models , _ from math import copysign class SaleOrder ( models . Model ): _name = \"sale.order\" --> Nombre del modelo en min\u00fascula y singular _inherit = [ 'portal.mixin' , 'mail.thread' , 'mail.activity.mixin' ] _description = \"Sale Order\" _order = 'date_order desc, id desc' ...","title":"Creaci\u00f3n de Modelos"},{"location":"kb/Programaci%C3%B3n/odoo/modelos/#creacion-de-modelos","text":"Fichero dentro de la carpeta models en min\u00fascula separado por _ /models/account_analytic_line.py En el c\u00f3digo, se usa PascalCase en los nombres de clase, como podemos ver en esta definici\u00f3n, y se sigue manteniendo el nombre en singular: # -*- coding: utf-8 -*- from odoo import api , fields , models , _ from math import copysign class AccountAnalyticLine ( models . Model ): ... El nombre del modelo va en min\u00fasculas y en singular, tal como vemos en la definici\u00f3n de sale_order.py # -*- coding: utf-8 -*- from odoo import api , fields , models , _ from math import copysign class SaleOrder ( models . Model ): _name = \"sale.order\" --> Nombre del modelo en min\u00fascula y singular _inherit = [ 'portal.mixin' , 'mail.thread' , 'mail.activity.mixin' ] _description = \"Sale Order\" _order = 'date_order desc, id desc' ...","title":"Creaci\u00f3n de Modelos"},{"location":"kb/Programaci%C3%B3n/php/Entorno%20de%20desarrollo/","text":"Entorno de desarrollo para php (NetBeans) \u00b6 Warning Este documento es antiguo y puede estar caducado en algunos aspectos, pero puede servir de referencia para otras cosas. En este tutorial se muestra c\u00f3mo instalar un entorno de desarrollo PHP en Debian / Ubuntu. La m\u00e1quina de desarrollo tendr\u00e1 instalado: Apache MySQL PHP phpMyAdmin NetBeans IDE XDebug Instalar LAMP \u00b6 Para instalar el stack LAMP se ejecuta el siguiente comando desde el terminal: apt-get install phpmyadmin mysql-server php5-mysql Info phpMyAdmin es un software, desarrollado en PHP, que permite gestionar el servidor MySQL desde el navegador web. Instalar phpMyAdmin es una forma r\u00e1pida de instalar Apache y las librerias necesarias para ejecutar aplicaciones PHP. En la instalaci\u00f3n tambi\u00e9n se incluye el servidor MySQL y las librer\u00edas del sistema necesarias para acceder desde PHP a MySQL. Durante la instalaci\u00f3n se preguntar\u00e1: Contrase\u00f1a del usuario de administraci\u00f3n de la base de datos. Es la clave que se asignar\u00e1 al usuario root MySQL (no tiene nada que ver con el usuario root de la m\u00e1quina). Anota la clave y no la pierdas. Contrase\u00f1a de aplicaci\u00f3n MySQL para phpmyadmin. Registrar\u00e1 phpMyAdmin con el servidor de bases de datos. Anota la clave y no la pierdas. Sobre que servidor web deseamos ejecutar phpMyAdmin, en este paso responder Apache \u00bfDesea configurar la base de datos para phpmyadmin con \u00abdbconfig-common\u00bb? Si Una vez finalizada la instalaci\u00f3n, navegue a http://localhost/phpmyadmin para ver la pantalla de login, podemos usar root y la clave que hayamos especificado para entrar. Instalaci\u00f3n de NetBeans \u00b6 NetBeans es un IDE (Entorno integrado de Desarrollo) para Java, C, PHP y otros lenguajes. Descargamos desde https://netbeans.org/downloads/ el paquete espec\u00edfico para PHP en versi\u00f3n 32 bits o 64 bits seg\u00fan nuestra arquitectura de m\u00e1quina. Hacemos ejecutable el archivo descargado con el comando: chmod +x netbeans-8.1-php-linux-x64.sh Nos impersonamos como root y ejecutamos el archivo descargado: su \u2013 ./netbeans-8.1-php-linux-x64.sh Siguiente, siguiente, siguiente\u2026. Por defecto se instalar\u00e1 en /usr/local/netbeans-8.1 Probamos que arranca bien desde el lanzador de apps. Virtual Host para el primer proyecto \u00b6 Para simular lo m\u00e1ximo posible un entorno de producci\u00f3n la idea es que los proyectos se ejecuten sobre apache en la m\u00e1quina local, para ello se ha de configurar un virtual host que aloje el primer proyecto. Llame a este proyecto proyecto1.localhost nos impersonamos como usuario root: sudo su Crear la carpeta raiz del proyecto en /var/www/html/proyecto1/public Crear el fichero de virtual host en Apache /etc/apache2/sites-available/proyecto1.conf Con el siguiente contenido: <VirtualHost *:80> ServerName proyecto1.localhost ServerAdmin correo@example.com DocumentRoot /var/www/html/proyecto1/public ErrorLog ${APACHE_LOG_DIR}/error-proyecto1.log CustomLog ${APACHE_LOG_DIR}/access-proyecto1.log combined </VirtualHost> modifica ahora el fichero /etc/hosts y agrega una linea como esta: 127.0.0.1 proyecto1.localhost Activa el nuevo sitio con: sudo a2ensite proyecto1 reinicia apache con apache2ctl restart Modificar el fichero de configuraci\u00f3n de variables de entorno sudo nano /etc/apache2/envvars En las lineas donde se establece el usuario que ejecuta apache en lugar de usar www-data use su propio nombre de usuario para evitar problemas derivados de la permisolog\u00eda. Esto solo debe hacerlo en su m\u00e1quina de desarrollo. export APACHE_RUN_USER=www-data export APACHE_RUN_GROUP=www-data Una vez hecho este cambio reinicie el servidor o si no est\u00e1 seguro todo el equipo Instalar el debugger PHP XDEBUG \u00b6 Con XDEBUG y NetBeans podr\u00e1 disponer de un completo debugger con el que ejecutar paso a paso, examinar el valor de las variables y otras comodidades. Instalamos el paquete dpkg -L php5-xdebug para ver los ficheros instalados apt-get install php5-xdebug Modificamos el fichero nano /etc/php5/mods-available/xdebug.ini Agregamos estas l\u00edneas xdebug.profiler_output_dir=/tmp xdebug.profiler_output_name=cachegrind.out.%p xdebug.profiler_enable_trigger=1 xdebug.profiler_enable=0 xdebug.remote_enable=true xdebug.remote_host=127.0.0.1 xdebug.remote_port=9001 xdebug.remote_handler=dbgp xdebug.remote_autostart=0 Instala la extensi\u00f3n de NetBeans para el navegador que vayas a utilizar en el debug. Para chromium la extensi\u00f3n es: https://chrome.google.com/webstore/detail/netbeans-connector/hafdlehgocfcodbgjnpecfajgkeejnaa Si llegaste hasta aqu\u00ed ya deber\u00edas tener un completo entorno de desarrollo, a partir de ahora para cada nuevo proyecto crear\u00e1s un virtual host con su correspondiente entrada en el fichero hosts y listos.","title":"Entorno de desarrollo para php (NetBeans)"},{"location":"kb/Programaci%C3%B3n/php/Entorno%20de%20desarrollo/#entorno-de-desarrollo-para-php-netbeans","text":"Warning Este documento es antiguo y puede estar caducado en algunos aspectos, pero puede servir de referencia para otras cosas. En este tutorial se muestra c\u00f3mo instalar un entorno de desarrollo PHP en Debian / Ubuntu. La m\u00e1quina de desarrollo tendr\u00e1 instalado: Apache MySQL PHP phpMyAdmin NetBeans IDE XDebug","title":"Entorno de desarrollo para php (NetBeans)"},{"location":"kb/Programaci%C3%B3n/php/Entorno%20de%20desarrollo/#instalar-lamp","text":"Para instalar el stack LAMP se ejecuta el siguiente comando desde el terminal: apt-get install phpmyadmin mysql-server php5-mysql Info phpMyAdmin es un software, desarrollado en PHP, que permite gestionar el servidor MySQL desde el navegador web. Instalar phpMyAdmin es una forma r\u00e1pida de instalar Apache y las librerias necesarias para ejecutar aplicaciones PHP. En la instalaci\u00f3n tambi\u00e9n se incluye el servidor MySQL y las librer\u00edas del sistema necesarias para acceder desde PHP a MySQL. Durante la instalaci\u00f3n se preguntar\u00e1: Contrase\u00f1a del usuario de administraci\u00f3n de la base de datos. Es la clave que se asignar\u00e1 al usuario root MySQL (no tiene nada que ver con el usuario root de la m\u00e1quina). Anota la clave y no la pierdas. Contrase\u00f1a de aplicaci\u00f3n MySQL para phpmyadmin. Registrar\u00e1 phpMyAdmin con el servidor de bases de datos. Anota la clave y no la pierdas. Sobre que servidor web deseamos ejecutar phpMyAdmin, en este paso responder Apache \u00bfDesea configurar la base de datos para phpmyadmin con \u00abdbconfig-common\u00bb? Si Una vez finalizada la instalaci\u00f3n, navegue a http://localhost/phpmyadmin para ver la pantalla de login, podemos usar root y la clave que hayamos especificado para entrar.","title":"Instalar LAMP"},{"location":"kb/Programaci%C3%B3n/php/Entorno%20de%20desarrollo/#instalacion-de-netbeans","text":"NetBeans es un IDE (Entorno integrado de Desarrollo) para Java, C, PHP y otros lenguajes. Descargamos desde https://netbeans.org/downloads/ el paquete espec\u00edfico para PHP en versi\u00f3n 32 bits o 64 bits seg\u00fan nuestra arquitectura de m\u00e1quina. Hacemos ejecutable el archivo descargado con el comando: chmod +x netbeans-8.1-php-linux-x64.sh Nos impersonamos como root y ejecutamos el archivo descargado: su \u2013 ./netbeans-8.1-php-linux-x64.sh Siguiente, siguiente, siguiente\u2026. Por defecto se instalar\u00e1 en /usr/local/netbeans-8.1 Probamos que arranca bien desde el lanzador de apps.","title":"Instalaci\u00f3n de NetBeans"},{"location":"kb/Programaci%C3%B3n/php/Entorno%20de%20desarrollo/#virtual-host-para-el-primer-proyecto","text":"Para simular lo m\u00e1ximo posible un entorno de producci\u00f3n la idea es que los proyectos se ejecuten sobre apache en la m\u00e1quina local, para ello se ha de configurar un virtual host que aloje el primer proyecto. Llame a este proyecto proyecto1.localhost nos impersonamos como usuario root: sudo su Crear la carpeta raiz del proyecto en /var/www/html/proyecto1/public Crear el fichero de virtual host en Apache /etc/apache2/sites-available/proyecto1.conf Con el siguiente contenido: <VirtualHost *:80> ServerName proyecto1.localhost ServerAdmin correo@example.com DocumentRoot /var/www/html/proyecto1/public ErrorLog ${APACHE_LOG_DIR}/error-proyecto1.log CustomLog ${APACHE_LOG_DIR}/access-proyecto1.log combined </VirtualHost> modifica ahora el fichero /etc/hosts y agrega una linea como esta: 127.0.0.1 proyecto1.localhost Activa el nuevo sitio con: sudo a2ensite proyecto1 reinicia apache con apache2ctl restart Modificar el fichero de configuraci\u00f3n de variables de entorno sudo nano /etc/apache2/envvars En las lineas donde se establece el usuario que ejecuta apache en lugar de usar www-data use su propio nombre de usuario para evitar problemas derivados de la permisolog\u00eda. Esto solo debe hacerlo en su m\u00e1quina de desarrollo. export APACHE_RUN_USER=www-data export APACHE_RUN_GROUP=www-data Una vez hecho este cambio reinicie el servidor o si no est\u00e1 seguro todo el equipo","title":"Virtual Host para el primer proyecto"},{"location":"kb/Programaci%C3%B3n/php/Entorno%20de%20desarrollo/#instalar-el-debugger-php-xdebug","text":"Con XDEBUG y NetBeans podr\u00e1 disponer de un completo debugger con el que ejecutar paso a paso, examinar el valor de las variables y otras comodidades. Instalamos el paquete dpkg -L php5-xdebug para ver los ficheros instalados apt-get install php5-xdebug Modificamos el fichero nano /etc/php5/mods-available/xdebug.ini Agregamos estas l\u00edneas xdebug.profiler_output_dir=/tmp xdebug.profiler_output_name=cachegrind.out.%p xdebug.profiler_enable_trigger=1 xdebug.profiler_enable=0 xdebug.remote_enable=true xdebug.remote_host=127.0.0.1 xdebug.remote_port=9001 xdebug.remote_handler=dbgp xdebug.remote_autostart=0 Instala la extensi\u00f3n de NetBeans para el navegador que vayas a utilizar en el debug. Para chromium la extensi\u00f3n es: https://chrome.google.com/webstore/detail/netbeans-connector/hafdlehgocfcodbgjnpecfajgkeejnaa Si llegaste hasta aqu\u00ed ya deber\u00edas tener un completo entorno de desarrollo, a partir de ahora para cada nuevo proyecto crear\u00e1s un virtual host con su correspondiente entrada en el fichero hosts y listos.","title":"Instalar el debugger PHP XDEBUG"},{"location":"kb/SEO/Bing%20tiene%20sus%20propias%20webmaster%20Tools/","text":"Bing tiene sus propias webmaster Tools \u00b6 Bing, tambi\u00e9n deber\u00eda merecer nuestra atenci\u00f3n si queremos optimizar nuestro posicionamiento en buscadores, as\u00ed que conviene darse de alta en sus \u00abWebmasters Tools\u00bb, verificar la propiedad del sitio e incluir nuestro \u00absitemap\u00bb. A tener en cuenta que otros buscadores como DuckDuckGo del cual habl\u00e1bamos en este art\u00edculo obtienen sus resultados tambi\u00e9n de Bing, as\u00ed que conviene posicionarse bien en el buscador de Microsoft. El sitio de herramientas para administradores de web de Bing forma parte del motor de b\u00fasqueda de Bing y permite a webmasters agregar sus p\u00e1ginas web al \u00edndice del buscador. El servicio tambi\u00e9n ofrece herramientas que permitir\u00e1n solucionar posibles problemas de rastreo o indexaci\u00f3n de su sitio web, ver estad\u00edsticas y m\u00e1s\u2026 Una vez rellenado el formulario de alta en \u00abEl sitio de herramientas para administradores de web\u00ab, tendremos que verificar nuestro sitio y enviar un Sitemap de nuestro sitio web. En sitios DotNetNuke el sitemap del sitio estar\u00e1 siempre en un fichero .aspx en la raiz del dominio principal, por ejemplo http://www.example.com/sitemap.aspx , En sitios Pynuke, el sitemap est\u00e1 en la raiz con extensi\u00f3n XML, por ejemplo http://www.example.com/sitemap.xml En la secci\u00f3n Diagn\u00f3stico y herramientas hay unas herramientas, muy interesantes, que complementar\u00e1n nuestra informaci\u00f3n del sitio: Recuperar como Bingbot para ver c\u00f3mo le aparece a Bing el c\u00f3digo de la p\u00e1gina El Validador de marcado ofrece informaci\u00f3n sobre el marcado estructural incluido en la p\u00e1gina El Analizador SEO permite descubrir en qu\u00e9 \u00e1reas de tu sitio es necesario trabajar para cumplir los procedimientos recomendados de SEO. Link Explorer para descubrir las p\u00e1ginas vinculadas a la URL A medida que pase el tiempo, podr\u00e1s ir viendo numerosas estad\u00edsticas acerca del SEO de tu sitio.","title":"Bing tiene sus propias webmaster Tools"},{"location":"kb/SEO/Bing%20tiene%20sus%20propias%20webmaster%20Tools/#bing-tiene-sus-propias-webmaster-tools","text":"Bing, tambi\u00e9n deber\u00eda merecer nuestra atenci\u00f3n si queremos optimizar nuestro posicionamiento en buscadores, as\u00ed que conviene darse de alta en sus \u00abWebmasters Tools\u00bb, verificar la propiedad del sitio e incluir nuestro \u00absitemap\u00bb. A tener en cuenta que otros buscadores como DuckDuckGo del cual habl\u00e1bamos en este art\u00edculo obtienen sus resultados tambi\u00e9n de Bing, as\u00ed que conviene posicionarse bien en el buscador de Microsoft. El sitio de herramientas para administradores de web de Bing forma parte del motor de b\u00fasqueda de Bing y permite a webmasters agregar sus p\u00e1ginas web al \u00edndice del buscador. El servicio tambi\u00e9n ofrece herramientas que permitir\u00e1n solucionar posibles problemas de rastreo o indexaci\u00f3n de su sitio web, ver estad\u00edsticas y m\u00e1s\u2026 Una vez rellenado el formulario de alta en \u00abEl sitio de herramientas para administradores de web\u00ab, tendremos que verificar nuestro sitio y enviar un Sitemap de nuestro sitio web. En sitios DotNetNuke el sitemap del sitio estar\u00e1 siempre en un fichero .aspx en la raiz del dominio principal, por ejemplo http://www.example.com/sitemap.aspx , En sitios Pynuke, el sitemap est\u00e1 en la raiz con extensi\u00f3n XML, por ejemplo http://www.example.com/sitemap.xml En la secci\u00f3n Diagn\u00f3stico y herramientas hay unas herramientas, muy interesantes, que complementar\u00e1n nuestra informaci\u00f3n del sitio: Recuperar como Bingbot para ver c\u00f3mo le aparece a Bing el c\u00f3digo de la p\u00e1gina El Validador de marcado ofrece informaci\u00f3n sobre el marcado estructural incluido en la p\u00e1gina El Analizador SEO permite descubrir en qu\u00e9 \u00e1reas de tu sitio es necesario trabajar para cumplir los procedimientos recomendados de SEO. Link Explorer para descubrir las p\u00e1ginas vinculadas a la URL A medida que pase el tiempo, podr\u00e1s ir viendo numerosas estad\u00edsticas acerca del SEO de tu sitio.","title":"Bing tiene sus propias webmaster Tools"},{"location":"kb/SEO/Gu%C3%ADa%20para%20principiantes%20sobre%20optimizaci%C3%B3n%20para%20motores%20de%20b%C3%BAsqueda/","text":"Gu\u00eda para principiantes sobre optimizaci\u00f3n para motores de b\u00fasqueda \u00b6 La intenci\u00f3n inicial de este documento era la de ayudar a los equipos dentro de Google, pero luego, en Google, pensaron que este documento tambi\u00e9n podr\u00eda ser \u00fatil a los webmasters que son nuevos en cuestiones de optimizaci\u00f3n para motores de b\u00fasqueda y que desean mejorar la interacci\u00f3n de sus sitios tanto con los usuarios como con los motores de b\u00fasqueda. Esta gu\u00eda no revela secretos extraordinarios que posicionen tu sitio en primer lugar pero el hecho de seguir estas pr\u00e1cticas recomendadas facilitar\u00e1 el rastreo y la indexaci\u00f3n de tu contenido por parte de los motores de b\u00fasqueda. Puedes descargar la guia, en formato PDF, desde aqu\u00ed http://www.google.es/webmasters/docs/guia_optimizacion_motores_busqueda.pdf","title":"Gu\u00eda para principiantes sobre optimizaci\u00f3n para motores de b\u00fasqueda"},{"location":"kb/SEO/Gu%C3%ADa%20para%20principiantes%20sobre%20optimizaci%C3%B3n%20para%20motores%20de%20b%C3%BAsqueda/#guia-para-principiantes-sobre-optimizacion-para-motores-de-busqueda","text":"La intenci\u00f3n inicial de este documento era la de ayudar a los equipos dentro de Google, pero luego, en Google, pensaron que este documento tambi\u00e9n podr\u00eda ser \u00fatil a los webmasters que son nuevos en cuestiones de optimizaci\u00f3n para motores de b\u00fasqueda y que desean mejorar la interacci\u00f3n de sus sitios tanto con los usuarios como con los motores de b\u00fasqueda. Esta gu\u00eda no revela secretos extraordinarios que posicionen tu sitio en primer lugar pero el hecho de seguir estas pr\u00e1cticas recomendadas facilitar\u00e1 el rastreo y la indexaci\u00f3n de tu contenido por parte de los motores de b\u00fasqueda. Puedes descargar la guia, en formato PDF, desde aqu\u00ed http://www.google.es/webmasters/docs/guia_optimizacion_motores_busqueda.pdf","title":"Gu\u00eda para principiantes sobre optimizaci\u00f3n para motores de b\u00fasqueda"},{"location":"kb/SEO/Posicionamiento%20en%20Google%20%E2%80%93%20Page%20Rank/","text":"Introducci\u00f3n \u00b6 Google funciona ejecutando una tecnolog\u00eda avanzada que combina Software y Hardware. La velocidad que puede experimentarse al hacer una b\u00fasqueda es atribuida en parte a la eficiencia de los algoritmos de b\u00fasqueda y en parte a los cientos de ordenadores de bajo coste que componen la red r\u00e1pida de motores de b\u00fasqueda Google. El n\u00facleo del software Google es PageRank, un sistema de clasificaci\u00f3n desarrollado por los fundadores de Google Larry Page y Sergey Brin en la Universidad de Stanford. Aunque decenas de personas trabajan cada dia para mejorar cada aspecto b\u00e1sico de Google, PageRank juega un papel muy importante en las herramientas de b\u00fasqueda web de Google. PageRank Explicado \u00b6 PageRank conf\u00eda en la naturaleza democr\u00e1tica de la web. Usando la enorme estructura de Links presentes en Internet, Google consigue un indicador del valor individual de una p\u00e1gina. En esencia Google interpreta los enlaces de una p\u00e1gina A hacia una p\u00e1gina B como un voto de la p\u00e1gina A por la B. Evidentemente hay m\u00e1s valores que se tienen en cuenta adem\u00e1s del n\u00famero de enlaces que apuntan a la p\u00e1gina, por ejemplo tambi\u00e9n se analiza la p\u00e1gina que emite el voto, los votos emitidos por una p\u00e1gina con su propio PageRank alto son m\u00e1s importantes que los emitidos por una p\u00e1gina con el PageRank bajo. Usando unos y otros factores, Google nos otorga una importancia relativa. Por supuesto las p\u00e1ginas importantes no quieren decir nada si no coinciden con la b\u00fasqueda que se est\u00e1 realizando, as\u00ed que Google combina el PageRank con sofisticadas t\u00e9cnicas de b\u00fasqueda de texto para encontrar p\u00e1ginas que, adem\u00e1s de importantes, sean relevantes para nuestra b\u00fasqueda. Google determina el n\u00famero de veces que aparece el t\u00e9rmino de la b\u00fasqueda en la p\u00e1gina, examina decenas de aspectos de la p\u00e1gina (Y el contenido de las p\u00e1ginas que votan hacia la nuestra) para determinar si coincide lo suficiente con la b\u00fasqueda. Integridad \u00b6 Los m\u00e9todos de indexaci\u00f3n de Google hacen extremadamente dif\u00edcil que se manipulen los resultados con el objetivo de aparecer en las primeras posiciones y, aunque Google ofrece publicidad en la parte superior, lateral e inferior de los resultados de b\u00fasqueda, no pueden comprarse los primeros lugares en los resultados. La b\u00fasqueda de Google ofrece una f\u00e1cil y r\u00e1pida soluci\u00f3n para encontrar sitios de calidad que contienen informaci\u00f3n relevante. \u00bfCual es tu PageRank? \u00b6 Si quieres conocer el PageRank de tu p\u00e1gina visita esta direcci\u00f3n e introduce el nombre de tu dominio en ella http://www.iwebtool.com/rank Aumentar el PageRank \u00b6 El Pagerank puede aumentarse y al hacerlo tambi\u00e9n aumentan las posibilidades de aparecer en los primeros lugares de la b\u00fasqueda. Para aumentar tu PageRank has de conseguir enlaces en otras p\u00e1ginas. Si \u00e9stas p\u00e1ginas desde las que te enlazan tienen un PageRank mayor que 1 est\u00e1n emitiendo un voto hacia la tuya, por tanto tu PageRank aumentar\u00e1. La proporci\u00f3n en la que aumenta el PageRank forma parte de la patente de Google y no es un dato p\u00fablico aunque se sospecha que es exponencial. Llegar a 1 , 2 , 3 , 4, no cuesta pero a partir de ah\u00ed cada vez se hace m\u00e1s dificil aumentar\u2026 T\u00e1cticas \u00b6 Una t\u00e1ctica que puedes utilizar para mejorar tu posicionamiento en google. Haz una b\u00fasqueda en Google por aquellos t\u00e9rminos que te interesen Observa los primeros resultados. Toma nota de estas direcciones. Imagina que quieres aparecer ah\u00ed\u2026 Ves a la direcci\u00f3n web http://www.iwebtool.com/backlink_checker y mira donde est\u00e1n enlazadas las p\u00e1ginas que viste en los resultados de la b\u00fasqueda. En caso de ser directorios de enlaces gratuitos date de alta tu tambi\u00e9n. En caso de ser de pago podr\u00e1s pensarlo","title":"Posicionamiento en Google \u2013 Page Rank"},{"location":"kb/SEO/Posicionamiento%20en%20Google%20%E2%80%93%20Page%20Rank/#introduccion","text":"Google funciona ejecutando una tecnolog\u00eda avanzada que combina Software y Hardware. La velocidad que puede experimentarse al hacer una b\u00fasqueda es atribuida en parte a la eficiencia de los algoritmos de b\u00fasqueda y en parte a los cientos de ordenadores de bajo coste que componen la red r\u00e1pida de motores de b\u00fasqueda Google. El n\u00facleo del software Google es PageRank, un sistema de clasificaci\u00f3n desarrollado por los fundadores de Google Larry Page y Sergey Brin en la Universidad de Stanford. Aunque decenas de personas trabajan cada dia para mejorar cada aspecto b\u00e1sico de Google, PageRank juega un papel muy importante en las herramientas de b\u00fasqueda web de Google.","title":"Introducci\u00f3n"},{"location":"kb/SEO/Posicionamiento%20en%20Google%20%E2%80%93%20Page%20Rank/#pagerank-explicado","text":"PageRank conf\u00eda en la naturaleza democr\u00e1tica de la web. Usando la enorme estructura de Links presentes en Internet, Google consigue un indicador del valor individual de una p\u00e1gina. En esencia Google interpreta los enlaces de una p\u00e1gina A hacia una p\u00e1gina B como un voto de la p\u00e1gina A por la B. Evidentemente hay m\u00e1s valores que se tienen en cuenta adem\u00e1s del n\u00famero de enlaces que apuntan a la p\u00e1gina, por ejemplo tambi\u00e9n se analiza la p\u00e1gina que emite el voto, los votos emitidos por una p\u00e1gina con su propio PageRank alto son m\u00e1s importantes que los emitidos por una p\u00e1gina con el PageRank bajo. Usando unos y otros factores, Google nos otorga una importancia relativa. Por supuesto las p\u00e1ginas importantes no quieren decir nada si no coinciden con la b\u00fasqueda que se est\u00e1 realizando, as\u00ed que Google combina el PageRank con sofisticadas t\u00e9cnicas de b\u00fasqueda de texto para encontrar p\u00e1ginas que, adem\u00e1s de importantes, sean relevantes para nuestra b\u00fasqueda. Google determina el n\u00famero de veces que aparece el t\u00e9rmino de la b\u00fasqueda en la p\u00e1gina, examina decenas de aspectos de la p\u00e1gina (Y el contenido de las p\u00e1ginas que votan hacia la nuestra) para determinar si coincide lo suficiente con la b\u00fasqueda.","title":"PageRank Explicado"},{"location":"kb/SEO/Posicionamiento%20en%20Google%20%E2%80%93%20Page%20Rank/#integridad","text":"Los m\u00e9todos de indexaci\u00f3n de Google hacen extremadamente dif\u00edcil que se manipulen los resultados con el objetivo de aparecer en las primeras posiciones y, aunque Google ofrece publicidad en la parte superior, lateral e inferior de los resultados de b\u00fasqueda, no pueden comprarse los primeros lugares en los resultados. La b\u00fasqueda de Google ofrece una f\u00e1cil y r\u00e1pida soluci\u00f3n para encontrar sitios de calidad que contienen informaci\u00f3n relevante.","title":"Integridad"},{"location":"kb/SEO/Posicionamiento%20en%20Google%20%E2%80%93%20Page%20Rank/#cual-es-tu-pagerank","text":"Si quieres conocer el PageRank de tu p\u00e1gina visita esta direcci\u00f3n e introduce el nombre de tu dominio en ella http://www.iwebtool.com/rank","title":"\u00bfCual es tu PageRank?"},{"location":"kb/SEO/Posicionamiento%20en%20Google%20%E2%80%93%20Page%20Rank/#aumentar-el-pagerank","text":"El Pagerank puede aumentarse y al hacerlo tambi\u00e9n aumentan las posibilidades de aparecer en los primeros lugares de la b\u00fasqueda. Para aumentar tu PageRank has de conseguir enlaces en otras p\u00e1ginas. Si \u00e9stas p\u00e1ginas desde las que te enlazan tienen un PageRank mayor que 1 est\u00e1n emitiendo un voto hacia la tuya, por tanto tu PageRank aumentar\u00e1. La proporci\u00f3n en la que aumenta el PageRank forma parte de la patente de Google y no es un dato p\u00fablico aunque se sospecha que es exponencial. Llegar a 1 , 2 , 3 , 4, no cuesta pero a partir de ah\u00ed cada vez se hace m\u00e1s dificil aumentar\u2026","title":"Aumentar el PageRank"},{"location":"kb/SEO/Posicionamiento%20en%20Google%20%E2%80%93%20Page%20Rank/#tacticas","text":"Una t\u00e1ctica que puedes utilizar para mejorar tu posicionamiento en google. Haz una b\u00fasqueda en Google por aquellos t\u00e9rminos que te interesen Observa los primeros resultados. Toma nota de estas direcciones. Imagina que quieres aparecer ah\u00ed\u2026 Ves a la direcci\u00f3n web http://www.iwebtool.com/backlink_checker y mira donde est\u00e1n enlazadas las p\u00e1ginas que viste en los resultados de la b\u00fasqueda. En caso de ser directorios de enlaces gratuitos date de alta tu tambi\u00e9n. En caso de ser de pago podr\u00e1s pensarlo","title":"T\u00e1cticas"},{"location":"kb/Virtualizaci%C3%B3n/Clonar%20discos%20VDI%20en%20Virtual%20Box/","text":"Clonar discos VDI en Virtual Box \u00b6 Recientemente he estado trasteando con Virtual Box y, a base de experimentar, he aprendido que clonar una m\u00e1quina virtual no es tan f\u00e1cil como copiar y renombrar el fichero VDI. Una de las ventajas de la virtualizaci\u00f3n es la posibilidad de duplicar m\u00e1quinas una vez que est\u00e1n configuradas a tu gusto. El primer intento que se me ocurri\u00f3 fue el m\u00e1s r\u00e1pido, copiar el fichero VDI con la imagen y renombrarlo. Pero al intentar adjuntar el nuevo disco copiado a una nueva m\u00e1quina, para comprobar si arrancaba, apareci\u00f3 un error relacionado con que la m\u00e1quina ya exist\u00eda y adem\u00e1s continuaba apareciendo el nombre anterior. Tras realizar un poco de \u201cGoogling\u201d he encontrado la forma de hacerlo, la apunto aqu\u00ed para no olvidarme y por si \u00bfqui\u00e9n sabe?, resulta \u00fatil a alguien m\u00e1s. Primero has de detener la m\u00e1quina virtual que tiene asociado el disco que quieres clonar, liberar el disco de la m\u00e1quina y eliminar la entrada del disco de la lista de medios, pero manteni\u00e9ndolo para adjuntarlo de nuevo posteriormente. En Linux, desde la consola ejecutamos el comando vboxmanage con el par\u00e1metro clonevd vboxmanage clonevdi origen.vdi destino.vdi Desde Windows, acceder a una ventana MS-DOS y desde la carpeta donde se encuentre el fichero VDI origen ejecutar el siguiente comando: %VBOX_INSTALL_PATH%\u201dvboxmanage.exe clonevdi origen.vdi destino.vdi El proceso dura un ratito, dependiendo del tama\u00f1o de tu imagen, afortunadamente podremos ver un indicador del progreso de la operaci\u00f3n. Una vez finalizado el proceso, vuelve a agregar el disco origen a la lista de medios y vuelve a adjuntarlo a la m\u00e1quina virtual original para dejar las cosas como estaban. Al parecer, por lo que he logrado entender, cada imagen de disco ha de tener un identificador \u00fanico, adem\u00e1s, la tarjeta de red ha de tener una direcci\u00f3n MAC \u00fanica tambi\u00e9n , todo esto hace inviable el sistema de copiar el ficheroVDI para duplicar la m\u00e1quina virtual. Posibles problemas al arrancar una m\u00e1quina clonada as\u00ed: \u00abWaiting for network configuration. Waiting up to 60 seconds for network configuration\u00bb Hacer Login y ejecutar el comando ifconfig -a Fijarse en el primer adaptador que ser\u00e1 algo como eth0, eth1, ethx, Editar el fichero /etc/network/interfaces y cambiar ah\u00ed ethx para que coincida con el obtenido con el comando ifconfig -a","title":"Clonar discos VDI en Virtual Box"},{"location":"kb/Virtualizaci%C3%B3n/Clonar%20discos%20VDI%20en%20Virtual%20Box/#clonar-discos-vdi-en-virtual-box","text":"Recientemente he estado trasteando con Virtual Box y, a base de experimentar, he aprendido que clonar una m\u00e1quina virtual no es tan f\u00e1cil como copiar y renombrar el fichero VDI. Una de las ventajas de la virtualizaci\u00f3n es la posibilidad de duplicar m\u00e1quinas una vez que est\u00e1n configuradas a tu gusto. El primer intento que se me ocurri\u00f3 fue el m\u00e1s r\u00e1pido, copiar el fichero VDI con la imagen y renombrarlo. Pero al intentar adjuntar el nuevo disco copiado a una nueva m\u00e1quina, para comprobar si arrancaba, apareci\u00f3 un error relacionado con que la m\u00e1quina ya exist\u00eda y adem\u00e1s continuaba apareciendo el nombre anterior. Tras realizar un poco de \u201cGoogling\u201d he encontrado la forma de hacerlo, la apunto aqu\u00ed para no olvidarme y por si \u00bfqui\u00e9n sabe?, resulta \u00fatil a alguien m\u00e1s. Primero has de detener la m\u00e1quina virtual que tiene asociado el disco que quieres clonar, liberar el disco de la m\u00e1quina y eliminar la entrada del disco de la lista de medios, pero manteni\u00e9ndolo para adjuntarlo de nuevo posteriormente. En Linux, desde la consola ejecutamos el comando vboxmanage con el par\u00e1metro clonevd vboxmanage clonevdi origen.vdi destino.vdi Desde Windows, acceder a una ventana MS-DOS y desde la carpeta donde se encuentre el fichero VDI origen ejecutar el siguiente comando: %VBOX_INSTALL_PATH%\u201dvboxmanage.exe clonevdi origen.vdi destino.vdi El proceso dura un ratito, dependiendo del tama\u00f1o de tu imagen, afortunadamente podremos ver un indicador del progreso de la operaci\u00f3n. Una vez finalizado el proceso, vuelve a agregar el disco origen a la lista de medios y vuelve a adjuntarlo a la m\u00e1quina virtual original para dejar las cosas como estaban. Al parecer, por lo que he logrado entender, cada imagen de disco ha de tener un identificador \u00fanico, adem\u00e1s, la tarjeta de red ha de tener una direcci\u00f3n MAC \u00fanica tambi\u00e9n , todo esto hace inviable el sistema de copiar el ficheroVDI para duplicar la m\u00e1quina virtual. Posibles problemas al arrancar una m\u00e1quina clonada as\u00ed: \u00abWaiting for network configuration. Waiting up to 60 seconds for network configuration\u00bb Hacer Login y ejecutar el comando ifconfig -a Fijarse en el primer adaptador que ser\u00e1 algo como eth0, eth1, ethx, Editar el fichero /etc/network/interfaces y cambiar ah\u00ed ethx para que coincida con el obtenido con el comando ifconfig -a","title":"Clonar discos VDI en Virtual Box"},{"location":"kb/Virtualizaci%C3%B3n/Docker/","text":"Docker \u00b6 Instalaci\u00f3n de Docker \u00b6 Verificar que no hay nada de docker anteriormente instalado sudo apt remove docker docker-engine docker.io containerd runc Actualizamos la m\u00e1quina sudo apt update Por defecto, APT no usa HTTPS, as\u00ed que instalamos los siguientes paquetes sudo apt-get install \\ apt-transport-https \\ ca-certificates \\ curl \\ gnupg-agent \\ software-properties-common Agregamos la clave GPG de docker curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - Verificamos que la clave gpg fue instalada correctamente sudo apt-key fingerprint 0EBFCD88 En el caso de Docker hay 3 versiones disponibles: \u00abStable\u00bb, \u2018Nightly\u2019 o \u2018Test\u2019, instalaremos la versi\u00f3n \u00abstable\u00bb con el comando: sudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu bionic stable\" Con el repositorio a\u00f1adido, actualizamos la cache de APT sudo apt update Por \u00faltimo instalamos la \u00faltima versi\u00f3n de Docker CE y containerd. sudo apt install docker-ce docker-ce-cli containerd.io Ejecutamos el siguiente comando para verificar que se ha instalado todo correctamente sudo docker run hello-world Para evitar errores de permisos deberemos agregar nuestro usuario al grupo Docker sudo usermod -a -G docker $USER Post-instalaci\u00f3n en Linux \u00b6 Despu\u00e9s de instalar Docker, el demonio Docker queda unido a un Socket, por defecto este Socket es propiedad del usuario root y el resto de usuarios solo pueden acceder como sudo. El demonio de Docker siempre se ejecuta como el usuario root. Para evitar tener que poner sudo en todos los comandos, se crea un grupo Docker y se a\u00f1aden los usuarios a ese grupo. sudo groupadd docker sudo usermod -aG docker $USER newgrp docker docker run hello-world Configurar Docker para arrancar al inicio \u00b6 Docker ya crea un servicio Systemd, con lo que solo hay que hacer enable para que arranque al inicio del sistema. sudo systemctl enable docker Si quisieramos deshabilitarlo sudo systemctl disable docker https://docs.docker.com/engine/install/linux-postinstall/ Comandos Docker b\u00e1sicos \u00b6 Listar Im\u00e1genes disponibles en local \u00b6 docker images Ejecutar una imagen dentro de un container descarg\u00e1ndola si es necesario \u00b6 En este caso postgres docker run -d -e POSTGRES_USER=odoo -e POSTGRES_PASSWORD=odoo --name db postgres -d ejecuta el container en background e imprime el id del container Help \u2013name db este par\u00e1metro asigna el nombre db al container -e Par\u00e1metros al container. El container de odoo lee estos parametros automaticamente postgres \u2013> Nombre de la imagen que se va a ejecutar Ver que containers hay en ejecuci\u00f3n docker ps Ejecutar una imagen en un container docker run -p 8069:8069 --name odoo --link db:db -t odoo:9.0 Help -p 8069:8069 \u2013> hace disponible en local el puerto 8069, de forma que veremos odoo en 127.0.0.1:8069 \u2013link db:db \u2013> Dentro del docker de Odoo se establece una referencia a db que especifica el servidor de BD que se va a usar -t odoo:9.0 \u2013> Se descarga la V 9 pero podr\u00eda ser otra como la 12","title":"Docker"},{"location":"kb/Virtualizaci%C3%B3n/Docker/#docker","text":"","title":"Docker"},{"location":"kb/Virtualizaci%C3%B3n/Docker/#instalacion-de-docker","text":"Verificar que no hay nada de docker anteriormente instalado sudo apt remove docker docker-engine docker.io containerd runc Actualizamos la m\u00e1quina sudo apt update Por defecto, APT no usa HTTPS, as\u00ed que instalamos los siguientes paquetes sudo apt-get install \\ apt-transport-https \\ ca-certificates \\ curl \\ gnupg-agent \\ software-properties-common Agregamos la clave GPG de docker curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - Verificamos que la clave gpg fue instalada correctamente sudo apt-key fingerprint 0EBFCD88 En el caso de Docker hay 3 versiones disponibles: \u00abStable\u00bb, \u2018Nightly\u2019 o \u2018Test\u2019, instalaremos la versi\u00f3n \u00abstable\u00bb con el comando: sudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu bionic stable\" Con el repositorio a\u00f1adido, actualizamos la cache de APT sudo apt update Por \u00faltimo instalamos la \u00faltima versi\u00f3n de Docker CE y containerd. sudo apt install docker-ce docker-ce-cli containerd.io Ejecutamos el siguiente comando para verificar que se ha instalado todo correctamente sudo docker run hello-world Para evitar errores de permisos deberemos agregar nuestro usuario al grupo Docker sudo usermod -a -G docker $USER","title":"Instalaci\u00f3n de Docker"},{"location":"kb/Virtualizaci%C3%B3n/Docker/#post-instalacion-en-linux","text":"Despu\u00e9s de instalar Docker, el demonio Docker queda unido a un Socket, por defecto este Socket es propiedad del usuario root y el resto de usuarios solo pueden acceder como sudo. El demonio de Docker siempre se ejecuta como el usuario root. Para evitar tener que poner sudo en todos los comandos, se crea un grupo Docker y se a\u00f1aden los usuarios a ese grupo. sudo groupadd docker sudo usermod -aG docker $USER newgrp docker docker run hello-world","title":"Post-instalaci\u00f3n en Linux"},{"location":"kb/Virtualizaci%C3%B3n/Docker/#configurar-docker-para-arrancar-al-inicio","text":"Docker ya crea un servicio Systemd, con lo que solo hay que hacer enable para que arranque al inicio del sistema. sudo systemctl enable docker Si quisieramos deshabilitarlo sudo systemctl disable docker https://docs.docker.com/engine/install/linux-postinstall/","title":"Configurar Docker para arrancar al inicio"},{"location":"kb/Virtualizaci%C3%B3n/Docker/#comandos-docker-basicos","text":"","title":"Comandos Docker b\u00e1sicos"},{"location":"kb/Virtualizaci%C3%B3n/Docker/#listar-imagenes-disponibles-en-local","text":"docker images","title":"Listar Im\u00e1genes disponibles en local"},{"location":"kb/Virtualizaci%C3%B3n/Docker/#ejecutar-una-imagen-dentro-de-un-container-descargandola-si-es-necesario","text":"En este caso postgres docker run -d -e POSTGRES_USER=odoo -e POSTGRES_PASSWORD=odoo --name db postgres -d ejecuta el container en background e imprime el id del container Help \u2013name db este par\u00e1metro asigna el nombre db al container -e Par\u00e1metros al container. El container de odoo lee estos parametros automaticamente postgres \u2013> Nombre de la imagen que se va a ejecutar Ver que containers hay en ejecuci\u00f3n docker ps Ejecutar una imagen en un container docker run -p 8069:8069 --name odoo --link db:db -t odoo:9.0 Help -p 8069:8069 \u2013> hace disponible en local el puerto 8069, de forma que veremos odoo en 127.0.0.1:8069 \u2013link db:db \u2013> Dentro del docker de Odoo se establece una referencia a db que especifica el servidor de BD que se va a usar -t odoo:9.0 \u2013> Se descarga la V 9 pero podr\u00eda ser otra como la 12","title":"Ejecutar una imagen dentro de un container descarg\u00e1ndola si es necesario"},{"location":"kb/Virtualizaci%C3%B3n/montando%20ficheros%20vhd%20en%20linux%20ubuntu/","text":"Montar discos virtuales en formato VHD \u00b6 Es posible montar discos virtuales en formato VHD en una carpeta en tu instalaci\u00f3n de Ubuntu. Veamos como... Se instalan las utilidades virtualbox-fuse sudo apt-get install virtualbox-fuse Para montar una unidad vhd sudo vdfuse -f /path/to/file.vhd /path/to/mountpoint Una vez montada la unidad, /path/to/mountpoint contendr\u00e1 unos ficheros como 'EntireDisk', 'Partition1\u2032, etc. Si solo hay una partici\u00f3n , probablemente ser\u00e1 lo quiera verse, as\u00ed que para montar esa partici\u00f3n en otra carpeta hay que ejecutar: mount /path/to/mountpoint/Partition1 /path/to/someother/mountpoint Y ahora si en /path/to/someother/mountpoint tendremos el sistema de archivos Fuentes \u00b6 http://www.ubuntugeek.com/how-to-mount-virtualbox-drive-image-vdi-in-ubuntu-12-1012-04.html","title":"Montando ficheros vhd en linux ubuntu"},{"location":"kb/Virtualizaci%C3%B3n/montando%20ficheros%20vhd%20en%20linux%20ubuntu/#montar-discos-virtuales-en-formato-vhd","text":"Es posible montar discos virtuales en formato VHD en una carpeta en tu instalaci\u00f3n de Ubuntu. Veamos como... Se instalan las utilidades virtualbox-fuse sudo apt-get install virtualbox-fuse Para montar una unidad vhd sudo vdfuse -f /path/to/file.vhd /path/to/mountpoint Una vez montada la unidad, /path/to/mountpoint contendr\u00e1 unos ficheros como 'EntireDisk', 'Partition1\u2032, etc. Si solo hay una partici\u00f3n , probablemente ser\u00e1 lo quiera verse, as\u00ed que para montar esa partici\u00f3n en otra carpeta hay que ejecutar: mount /path/to/mountpoint/Partition1 /path/to/someother/mountpoint Y ahora si en /path/to/someother/mountpoint tendremos el sistema de archivos","title":"Montar discos virtuales en formato VHD"},{"location":"kb/Virtualizaci%C3%B3n/montando%20ficheros%20vhd%20en%20linux%20ubuntu/#fuentes","text":"http://www.ubuntugeek.com/how-to-mount-virtualbox-drive-image-vdi-in-ubuntu-12-1012-04.html","title":"Fuentes"},{"location":"kb/windows/Cambiar%20el%20puerto%20de%20%E2%80%9CEscritorio%20Remoto%E2%80%9D%20en%20Windows%20Server/","text":"Cambiar el puerto de \u201cEscritorio Remoto\u201d en Windows Server \u00b6 Una sencilla medida que podemos adoptar para dificultar un poco m\u00e1s el acceso por escritorio remoto a un servidor \u201cWindows\u201d es cambiar el puerto por defecto 3389. Esta es una medida que detendr\u00e1 a todo aquel usuario, de la red o de Internet, que trate de conectar con el servidor a trav\u00e9s de escritorio remoto. Conexi\u00f3n a Escritorio remoto intentar\u00e1 conectarse a Windows utilizando el puerto 3389 y no hay opciones desde la administraci\u00f3n de Windows donde pueda indicarse otro puerto, para cambiarlo deberemos modificar el registro de Windows, pon tus cinco sentidos. Warning Antes de modificar el puerto de conexi\u00f3n conviene asegurarse de que dicho puerto no est\u00e1 siendo utilizado por otro recurso y de que permites el paso a trav\u00e9s del Firewall para el nuevo puerto. Inicie el Editor del Registro (Regedt32.exe). Busque la siguiente clave del Registro: HKEY_LOCAL_MACHINE\\System\\CurrentControlSet\\Control\\TerminalServer\\WinStations\\RDP-Tcp\\PortNumber En el men\u00fa Edici\u00f3n, clic en Modificar, Decimal, escribe el nuevo n\u00famero de puerto y, despu\u00e9s, clic en Aceptar. Por \u00faltimo hay que salir del editor del registro y reiniciar el servidor. Para conectarse al servidor escribe el nombre o direcci\u00f3n IP del servidor seguido de dos puntos : y el n\u00ba de puerto. por ej. servidor:13256 o 192.168.1.10:13254","title":"Cambiar el puerto de \u201cEscritorio Remoto\u201d en Windows Server"},{"location":"kb/windows/Cambiar%20el%20puerto%20de%20%E2%80%9CEscritorio%20Remoto%E2%80%9D%20en%20Windows%20Server/#cambiar-el-puerto-de-escritorio-remoto-en-windows-server","text":"Una sencilla medida que podemos adoptar para dificultar un poco m\u00e1s el acceso por escritorio remoto a un servidor \u201cWindows\u201d es cambiar el puerto por defecto 3389. Esta es una medida que detendr\u00e1 a todo aquel usuario, de la red o de Internet, que trate de conectar con el servidor a trav\u00e9s de escritorio remoto. Conexi\u00f3n a Escritorio remoto intentar\u00e1 conectarse a Windows utilizando el puerto 3389 y no hay opciones desde la administraci\u00f3n de Windows donde pueda indicarse otro puerto, para cambiarlo deberemos modificar el registro de Windows, pon tus cinco sentidos. Warning Antes de modificar el puerto de conexi\u00f3n conviene asegurarse de que dicho puerto no est\u00e1 siendo utilizado por otro recurso y de que permites el paso a trav\u00e9s del Firewall para el nuevo puerto. Inicie el Editor del Registro (Regedt32.exe). Busque la siguiente clave del Registro: HKEY_LOCAL_MACHINE\\System\\CurrentControlSet\\Control\\TerminalServer\\WinStations\\RDP-Tcp\\PortNumber En el men\u00fa Edici\u00f3n, clic en Modificar, Decimal, escribe el nuevo n\u00famero de puerto y, despu\u00e9s, clic en Aceptar. Por \u00faltimo hay que salir del editor del registro y reiniciar el servidor. Para conectarse al servidor escribe el nombre o direcci\u00f3n IP del servidor seguido de dos puntos : y el n\u00ba de puerto. por ej. servidor:13256 o 192.168.1.10:13254","title":"Cambiar el puerto de \u201cEscritorio Remoto\u201d en Windows Server"},{"location":"kb/windows/Consulta%20MySQL%20traspaso%20Windows%20-%3E%20Linux/","text":"Consulta MySQL traspaso Windows -> Linux \u00b6 No se por qu\u00e9, al recuperar bases de datos mysql que han pasado por servidores Windows en servidores linux, me ha pasado un par de veces que, los textos de las entradas en WordPress no cogen bien los acentos, los signos de interrogaci\u00f3n, admiraci\u00f3n etc. Esta consulta puede ser util (manejar con cuidado y hacer un backup antes) : update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00c3\u00a1' , '\u00e1' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00c3\u00a9' , '\u00e9' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00ed\u00a9' , '\u00e9' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00c3\u00b3' , '\u00f3' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00ed\u00ba' , '\u00fa' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00c3\u00ba' , '\u00fa' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00c3\u00b1' , '\u00f1' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00ed\u2018' , '\u00d1' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00c3' , '\u00ed' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00e2\u20ac\u201c' , '\u2013' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00e2\u20ac\u201d' , '\u2013' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00e2\u20ac\u2122' , '\\''); update `wp_posts` set `post_content` = replace(`post_content` ,' \u00e2\u20ac\u00a6 ',' ... '); update `wp_posts` set `post_content` = replace(`post_content` ,' \u00e2\u20ac\u201c ',' - '); update `wp_posts` set `post_content` = replace(`post_content` ,' \u00e2\u20ac\u0153 ',' \"'); update `wp_posts` set `post_content` = replace(`post_content` ,'\u00e2\u20ac','\" '); update `wp_posts` set `post_content` = replace(`post_content` ,' \u00e2\u20ac\u02dc ',' \\ '' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00e2\u20ac\u00a2' , '-' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00e2\u20ac\u00a1' , 'c' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00c2' , '' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00c3\u00a1' , '\u00e1' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00c3\u00a9' , '\u00e9' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00ed\u00a9' , '\u00e9' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00c3\u00b3' , '\u00f3' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00ed\u00ba' , '\u00fa' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00c3\u00ba' , '\u00fa' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00c3\u00b1' , '\u00f1' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00ed\u2018' , '\u00d1' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00c3' , '\u00ed' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00e2\u20ac\u201c' , '\u2013' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00e2\u20ac\u201d' , '\u2013' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00e2\u20ac\u2122' , '\\''); update `wp_posts` set `post_title` = replace(`post_title` ,' \u00e2\u20ac\u00a6 ',' ... '); update `wp_posts` set `post_title` = replace(`post_title` ,' \u00e2\u20ac\u201c ',' - '); update `wp_posts` set `post_title` = replace(`post_title` ,' \u00e2\u20ac\u0153 ',' \"'); update `wp_posts` set `post_title` = replace(`post_title` ,'\u00e2\u20ac','\" '); update `wp_posts` set `post_title` = replace(`post_title` ,' \u00e2\u20ac\u02dc ',' \\ '' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00e2\u20ac\u00a2' , '-' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00e2\u20ac\u00a1' , 'c' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00c2' , '' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00c3\u00a1' , '\u00e1' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00c3\u00a9' , '\u00e9' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00ed\u00a9' , '\u00e9' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00c3\u00b3' , '\u00f3' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00ed\u00ba' , '\u00fa' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00c3\u00ba' , '\u00fa' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00c3\u00b1' , '\u00f1' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00ed\u2018' , '\u00d1' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00c3' , '\u00ed' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00e2\u20ac\u201c' , '\u2013' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00e2\u20ac\u201d' , '\u2013' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00e2\u20ac\u2122' , '\\''); update `wp_postmeta` set `meta_value` = replace(`meta_value` ,' \u00e2\u20ac\u00a6 ',' ... '); update `wp_postmeta` set `meta_value` = replace(`meta_value` ,' \u00e2\u20ac\u201c ',' - '); update `wp_postmeta` set `meta_value` = replace(`meta_value` ,' \u00e2\u20ac\u0153 ',' \"'); update `wp_postmeta` set `meta_value` = replace(`meta_value` ,'\u00e2\u20ac','\" '); update `wp_postmeta` set `meta_value` = replace(`meta_value` ,' \u00e2\u20ac\u02dc ',' \\ '' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00e2\u20ac\u00a2' , '-' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00e2\u20ac\u00a1' , 'c' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00c2' , '' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00ed\u2030' , '\u00c9' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00ed\u201c' , '\u00d3' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00c3\u00a1' , '\u00e1' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00c3\u00a9' , '\u00e9' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00ed\u00a9' , '\u00e9' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00c3\u00b3' , '\u00f3' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00ed\u00ba' , '\u00fa' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00c3\u00ba' , '\u00fa' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00c3\u00b1' , '\u00f1' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00ed\u2018' , '\u00d1' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00c3' , '\u00ed' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00e2\u20ac\u201c' , '\u2013' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00e2\u20ac\u201d' , '\u2013' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00e2\u20ac\u2122' , '\\''); update `wp_options` set `option_value` = replace(`option_value` ,' \u00e2\u20ac\u00a6 ',' ... '); update `wp_options` set `option_value` = replace(`option_value` ,' \u00e2\u20ac\u201c ',' - '); update `wp_options` set `option_value` = replace(`option_value` ,' \u00e2\u20ac\u0153 ',' \"'); update `wp_options` set `option_value` = replace(`option_value` ,'\u00e2\u20ac','\" '); update `wp_options` set `option_value` = replace(`option_value` ,' \u00e2\u20ac\u02dc ',' \\ '' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00e2\u20ac\u00a2' , '-' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00e2\u20ac\u00a1' , 'c' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00c2' , '' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00ed\u2030' , '\u00c9' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00ed\u201c' , '\u00d3' )","title":"Consulta MySQL traspaso Windows  > Linux"},{"location":"kb/windows/Consulta%20MySQL%20traspaso%20Windows%20-%3E%20Linux/#consulta-mysql-traspaso-windows-linux","text":"No se por qu\u00e9, al recuperar bases de datos mysql que han pasado por servidores Windows en servidores linux, me ha pasado un par de veces que, los textos de las entradas en WordPress no cogen bien los acentos, los signos de interrogaci\u00f3n, admiraci\u00f3n etc. Esta consulta puede ser util (manejar con cuidado y hacer un backup antes) : update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00c3\u00a1' , '\u00e1' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00c3\u00a9' , '\u00e9' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00ed\u00a9' , '\u00e9' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00c3\u00b3' , '\u00f3' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00ed\u00ba' , '\u00fa' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00c3\u00ba' , '\u00fa' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00c3\u00b1' , '\u00f1' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00ed\u2018' , '\u00d1' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00c3' , '\u00ed' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00e2\u20ac\u201c' , '\u2013' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00e2\u20ac\u201d' , '\u2013' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00e2\u20ac\u2122' , '\\''); update `wp_posts` set `post_content` = replace(`post_content` ,' \u00e2\u20ac\u00a6 ',' ... '); update `wp_posts` set `post_content` = replace(`post_content` ,' \u00e2\u20ac\u201c ',' - '); update `wp_posts` set `post_content` = replace(`post_content` ,' \u00e2\u20ac\u0153 ',' \"'); update `wp_posts` set `post_content` = replace(`post_content` ,'\u00e2\u20ac','\" '); update `wp_posts` set `post_content` = replace(`post_content` ,' \u00e2\u20ac\u02dc ',' \\ '' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00e2\u20ac\u00a2' , '-' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00e2\u20ac\u00a1' , 'c' ); update ` wp_posts ` set ` post_content ` = replace ( ` post_content ` , '\u00c2' , '' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00c3\u00a1' , '\u00e1' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00c3\u00a9' , '\u00e9' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00ed\u00a9' , '\u00e9' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00c3\u00b3' , '\u00f3' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00ed\u00ba' , '\u00fa' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00c3\u00ba' , '\u00fa' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00c3\u00b1' , '\u00f1' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00ed\u2018' , '\u00d1' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00c3' , '\u00ed' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00e2\u20ac\u201c' , '\u2013' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00e2\u20ac\u201d' , '\u2013' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00e2\u20ac\u2122' , '\\''); update `wp_posts` set `post_title` = replace(`post_title` ,' \u00e2\u20ac\u00a6 ',' ... '); update `wp_posts` set `post_title` = replace(`post_title` ,' \u00e2\u20ac\u201c ',' - '); update `wp_posts` set `post_title` = replace(`post_title` ,' \u00e2\u20ac\u0153 ',' \"'); update `wp_posts` set `post_title` = replace(`post_title` ,'\u00e2\u20ac','\" '); update `wp_posts` set `post_title` = replace(`post_title` ,' \u00e2\u20ac\u02dc ',' \\ '' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00e2\u20ac\u00a2' , '-' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00e2\u20ac\u00a1' , 'c' ); update ` wp_posts ` set ` post_title ` = replace ( ` post_title ` , '\u00c2' , '' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00c3\u00a1' , '\u00e1' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00c3\u00a9' , '\u00e9' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00ed\u00a9' , '\u00e9' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00c3\u00b3' , '\u00f3' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00ed\u00ba' , '\u00fa' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00c3\u00ba' , '\u00fa' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00c3\u00b1' , '\u00f1' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00ed\u2018' , '\u00d1' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00c3' , '\u00ed' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00e2\u20ac\u201c' , '\u2013' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00e2\u20ac\u201d' , '\u2013' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00e2\u20ac\u2122' , '\\''); update `wp_postmeta` set `meta_value` = replace(`meta_value` ,' \u00e2\u20ac\u00a6 ',' ... '); update `wp_postmeta` set `meta_value` = replace(`meta_value` ,' \u00e2\u20ac\u201c ',' - '); update `wp_postmeta` set `meta_value` = replace(`meta_value` ,' \u00e2\u20ac\u0153 ',' \"'); update `wp_postmeta` set `meta_value` = replace(`meta_value` ,'\u00e2\u20ac','\" '); update `wp_postmeta` set `meta_value` = replace(`meta_value` ,' \u00e2\u20ac\u02dc ',' \\ '' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00e2\u20ac\u00a2' , '-' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00e2\u20ac\u00a1' , 'c' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00c2' , '' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00ed\u2030' , '\u00c9' ); update ` wp_postmeta ` set ` meta_value ` = replace ( ` meta_value ` , '\u00ed\u201c' , '\u00d3' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00c3\u00a1' , '\u00e1' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00c3\u00a9' , '\u00e9' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00ed\u00a9' , '\u00e9' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00c3\u00b3' , '\u00f3' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00ed\u00ba' , '\u00fa' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00c3\u00ba' , '\u00fa' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00c3\u00b1' , '\u00f1' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00ed\u2018' , '\u00d1' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00c3' , '\u00ed' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00e2\u20ac\u201c' , '\u2013' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00e2\u20ac\u201d' , '\u2013' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00e2\u20ac\u2122' , '\\''); update `wp_options` set `option_value` = replace(`option_value` ,' \u00e2\u20ac\u00a6 ',' ... '); update `wp_options` set `option_value` = replace(`option_value` ,' \u00e2\u20ac\u201c ',' - '); update `wp_options` set `option_value` = replace(`option_value` ,' \u00e2\u20ac\u0153 ',' \"'); update `wp_options` set `option_value` = replace(`option_value` ,'\u00e2\u20ac','\" '); update `wp_options` set `option_value` = replace(`option_value` ,' \u00e2\u20ac\u02dc ',' \\ '' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00e2\u20ac\u00a2' , '-' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00e2\u20ac\u00a1' , 'c' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00c2' , '' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00ed\u2030' , '\u00c9' ); update ` wp_options ` set ` option_value ` = replace ( ` option_value ` , '\u00ed\u201c' , '\u00d3' )","title":"Consulta MySQL traspaso Windows -&gt; Linux"},{"location":"kb/windows/Transferir%20certificado%20SSL%20de%20windows%20a%20Linux%20Apache/","text":"Transferir certificado SSL de windows a Linux Apache \u00b6 Transferir certificado SSL de windows a Linux Apache Despu\u00e9s de investigar un poco he conseguido transferir un certificado SSL desde un windows server 2008 R2 a un Apache2 en Linux Ubuntu. Aqu\u00ed va la receta\u2026 Primero se exporta el certificado desde el IIS en el servidor windows a formato PFX, esto es algo que siempre deber\u00edas hacer para tener una copia de seguridad del certificado. Ejecutar mmc.exe Clic en el men\u00fa \u2018Consola\u2019 y selecciona \u2018Agregar/Quitar complemento\u2019. En la lista de complementos selecciona el complemento \u00abCertificados\u00bb y haces click en \u00abAgregar\u00bb Selecciona \u2018Cuenta de equipo\u2019y haz click en \u2018Siguiente\u2019 Selecciona \u2018Equipo Local\u2019 y click en Finalizar. Clic en Aceptar Expandir el men\u00fa para \u2018Certificados\u2019 y click en la carpeta \u2018Personal\u2019. Bot\u00f3n derecho en el certificado que quieras exportar y seleccionas \u00abTodas las tareas > Exportar\u00bb Aparece un asistente. Aseg\u00farate de chequear la opci\u00f3n para incluir la clave privada y contin\u00faa a trav\u00e9s del asistente hasta que obtengas un fichero .PFX A continuaci\u00f3n ejecuta, desde Linux, el comando openssl para extraer la clave privada y el fichero con el certificado. # Exportar la clave privada desde el fichero pfx openssl pkcs12 -in filename.pfx -nocerts -out key.pem # Exportar el certificado desde el fichero pfx openssl pkcs12 -in filename.pfx -clcerts -nokeys -out cert.pem # Esto elimina la frase de seguridad de la clave privada para que Apache no la solicite cuando se inicie. openssl rsa -in key.pem -out server.key Ahora, un paso extra para hacer que el certificado funcione, necesitamos incluir en el fichero de configuracion del host virtual las siguientes lineas: SSLEngine on SSLOptions +StrictRequire SSLCertificateFile /path/to/certificate/cert.pem SSLCertificateKeyFile /patch/to/key/server.key El fichero de host virtual estar\u00e1 localizado normalmente en \u201c/etc/apache2/sites-available/virtualhostname.conf\u201d reiniciar apache con el comando sudo apache2ctl restart","title":"Transferir certificado SSL de windows a Linux Apache"},{"location":"kb/windows/Transferir%20certificado%20SSL%20de%20windows%20a%20Linux%20Apache/#transferir-certificado-ssl-de-windows-a-linux-apache","text":"Transferir certificado SSL de windows a Linux Apache Despu\u00e9s de investigar un poco he conseguido transferir un certificado SSL desde un windows server 2008 R2 a un Apache2 en Linux Ubuntu. Aqu\u00ed va la receta\u2026 Primero se exporta el certificado desde el IIS en el servidor windows a formato PFX, esto es algo que siempre deber\u00edas hacer para tener una copia de seguridad del certificado. Ejecutar mmc.exe Clic en el men\u00fa \u2018Consola\u2019 y selecciona \u2018Agregar/Quitar complemento\u2019. En la lista de complementos selecciona el complemento \u00abCertificados\u00bb y haces click en \u00abAgregar\u00bb Selecciona \u2018Cuenta de equipo\u2019y haz click en \u2018Siguiente\u2019 Selecciona \u2018Equipo Local\u2019 y click en Finalizar. Clic en Aceptar Expandir el men\u00fa para \u2018Certificados\u2019 y click en la carpeta \u2018Personal\u2019. Bot\u00f3n derecho en el certificado que quieras exportar y seleccionas \u00abTodas las tareas > Exportar\u00bb Aparece un asistente. Aseg\u00farate de chequear la opci\u00f3n para incluir la clave privada y contin\u00faa a trav\u00e9s del asistente hasta que obtengas un fichero .PFX A continuaci\u00f3n ejecuta, desde Linux, el comando openssl para extraer la clave privada y el fichero con el certificado. # Exportar la clave privada desde el fichero pfx openssl pkcs12 -in filename.pfx -nocerts -out key.pem # Exportar el certificado desde el fichero pfx openssl pkcs12 -in filename.pfx -clcerts -nokeys -out cert.pem # Esto elimina la frase de seguridad de la clave privada para que Apache no la solicite cuando se inicie. openssl rsa -in key.pem -out server.key Ahora, un paso extra para hacer que el certificado funcione, necesitamos incluir en el fichero de configuracion del host virtual las siguientes lineas: SSLEngine on SSLOptions +StrictRequire SSLCertificateFile /path/to/certificate/cert.pem SSLCertificateKeyFile /patch/to/key/server.key El fichero de host virtual estar\u00e1 localizado normalmente en \u201c/etc/apache2/sites-available/virtualhostname.conf\u201d reiniciar apache con el comando sudo apache2ctl restart","title":"Transferir certificado SSL de windows a Linux Apache"},{"location":"kb/windows/IIS/IIS%207.5%2C%20redirigir%20una%20URL%20con%20codigo%20de%20error%20301%20RedirectPermanent/","text":"IIS 7.5, redirigir una URL con codigo de error 301 RedirectPermanent \u00b6 De vuelta con los 301 Redirects, que resultan ser indispensables para decirle a los buscadores o navegadores de usuario que una p\u00e1gina se ha movido a otra ubicaci\u00f3n. En este caso veremos como hacer un \u00abRedirect 301\u00bb de una p\u00e1gina DotNetNuke a un subdominio. Por ejemplo de http://www.example.com/contacte.aspx a http://contacte.example.com Seleccionamos el sitio web del \u00e1rbol de sitios y verificamos que est\u00e1 instalado el m\u00f3dulo \u00abReescritura de direcci\u00f3n URL\u00bb Abrimos la caracter\u00edstica y debajo de acciones pulsamos en \u00abAgregar Reglas\u00bb Seleccionamos \u00abRegla con mapa de Reescritura\u00bb A continuaci\u00f3n, seleccione, en acci\u00f3n de regla, la opci\u00f3n \u00abRedirigir\u00bb y como nombre del mapa de reescritura escriba cualquier cosa, da igual el nombre que ponga. Pulse Aceptar Ahora, debajo de Acciones pulse \u00abAgregar entrada de asignaci\u00f3n\u00bb En valor original escriba la URL Origen que causar\u00e1 la redirecci\u00f3n, no incluya el http://www.example.com , solo escriba la ruta relativa. En Nuevo Valor, escriba la direcci\u00f3n completa incluyendo el nuevo nombre de subdominio o una ruta relativa, seg\u00fan la redirecci\u00f3n que desee realizar. Listo, ahora cuando alg\u00fan visitante acceda a la direcci\u00f3n de su sitio web http://www.example.com/contacte.aspx incluidos especialmente los robots de b\u00fasqueda ser\u00e1n redirigidos al subdominio http://contacte.example.com , l\u00f3gicamente este subdominio ha de estar registrado en su DNS y contener algo.","title":"IIS 7.5, redirigir una URL con codigo de error 301 RedirectPermanent"},{"location":"kb/windows/IIS/IIS%207.5%2C%20redirigir%20una%20URL%20con%20codigo%20de%20error%20301%20RedirectPermanent/#iis-75-redirigir-una-url-con-codigo-de-error-301-redirectpermanent","text":"De vuelta con los 301 Redirects, que resultan ser indispensables para decirle a los buscadores o navegadores de usuario que una p\u00e1gina se ha movido a otra ubicaci\u00f3n. En este caso veremos como hacer un \u00abRedirect 301\u00bb de una p\u00e1gina DotNetNuke a un subdominio. Por ejemplo de http://www.example.com/contacte.aspx a http://contacte.example.com Seleccionamos el sitio web del \u00e1rbol de sitios y verificamos que est\u00e1 instalado el m\u00f3dulo \u00abReescritura de direcci\u00f3n URL\u00bb Abrimos la caracter\u00edstica y debajo de acciones pulsamos en \u00abAgregar Reglas\u00bb Seleccionamos \u00abRegla con mapa de Reescritura\u00bb A continuaci\u00f3n, seleccione, en acci\u00f3n de regla, la opci\u00f3n \u00abRedirigir\u00bb y como nombre del mapa de reescritura escriba cualquier cosa, da igual el nombre que ponga. Pulse Aceptar Ahora, debajo de Acciones pulse \u00abAgregar entrada de asignaci\u00f3n\u00bb En valor original escriba la URL Origen que causar\u00e1 la redirecci\u00f3n, no incluya el http://www.example.com , solo escriba la ruta relativa. En Nuevo Valor, escriba la direcci\u00f3n completa incluyendo el nuevo nombre de subdominio o una ruta relativa, seg\u00fan la redirecci\u00f3n que desee realizar. Listo, ahora cuando alg\u00fan visitante acceda a la direcci\u00f3n de su sitio web http://www.example.com/contacte.aspx incluidos especialmente los robots de b\u00fasqueda ser\u00e1n redirigidos al subdominio http://contacte.example.com , l\u00f3gicamente este subdominio ha de estar registrado en su DNS y contener algo.","title":"IIS 7.5, redirigir una URL con codigo de error 301 RedirectPermanent"},{"location":"kb/windows/Software/Dotnetnuke/","text":"La Cach\u00e9 de los m\u00f3dulos en Dotnetnuke \u00b6 En general todos los m\u00f3dulos que, para mostrar informaci\u00f3n, utilizan plantillas no funcionanar\u00e1n bien si en la configuraci\u00f3n de la cach\u00e9 le pones algo mayor que 0. webresource.axd \u00b6 Resulta que el otro dia activ\u00e9 en algunos portales de nueva creaci\u00f3n la compresi\u00f3n para ver como funcionaba. La consecuencia ha sido que que los usuarios no pod\u00edan crear p\u00e1ginas, que tenian problemas al registrarse y otros problemas varios. Al final y para todo aquel que le sirva, el error es que si el fichero webresource.axd se comprime, los errores son variados pero coinciden con las validaciones de los formularios. La soluci\u00f3n despu\u00e9s de numerosas pruebas ha sido excluir este fichero de la compresi\u00f3n. En las opciones para Host hay una lista de peticiones que se excluyen de la compresi\u00f3n WebForm_PostBackOptions undefined \u00b6 Problemas javascript al registrarse o al crear una p\u00e1gina. Este problema aparece al pulsar el bot\u00f3n de registrarse, al intentar a\u00f1adir una p\u00e1gina y en general en todas aquellas situaciones en las que se ve involucrado un control validador Html. Suele darse en versiones DNN 4.5.1 \u2013 4.5.3, para resolverlo excluye la peticion webresource.axd de la compresi\u00f3n. Este error se produce como consecuencia del cambio de ASP NET 1 a ASP NET 2. Mientras que en las aplicaciones asp.net 1.0 los validadores estaban incluidos en la carpeta \u201caspnet_client\u201d a partir de asp.net 2.0 los validadores se procesan como un recurso en la cara del servidor mediante el fichero WebResource.AXD. He detectado que en caso de estar activada la compresi\u00f3n, el fichero WebResource.AXD ha de excluirse de esta compresi\u00f3n ya que si no los javascripts de los validadores no se renderizan. Para evitar este error, a\u00f1ada el fichero Webresource.axd a la lista de exclusiones de la compresi\u00f3n.Necesitar\u00e1s entrar como Host en tu sitio para poder hacer este cambio. Obtener Informaci\u00f3n de la base de datos \u00b6 Puedes descargar este m\u00f3dulo y agregarlo a una p\u00e1gina llamada \u201cControl\u201d. Para ejecutar las consultas configura varios m\u00f3dulos con las consultas inferiores. De esta forma la informaci\u00f3n se ir\u00e1 refrescando de forma autom\u00e1tica en la instalaci\u00f3n On-Line\u2026 http://www.dnnstuff.com/Modules/SQLView/tabid/182/Default.aspx \u00daltima Actividad de Usuarios: \u00b6 SELECT Users . Username , Users . FirstName , Users . LastName , aspnet_Users . LastActivityDate FROM aspnet_Users INNER JOIN Users ON aspnet_Users . UserName = Users . Username order by aspnet_Users . LastActivityDate DESC \u00daltimo Login de Usuarios: \u00b6 SELECT Users . Username , Users . FirstName , Users . LastName , aspnet_Membership . LastLoginDate FROM Users INNER JOIN aspnet_Users ON Users . Username = aspnet_Users . UserName INNER JOIN aspnet_Membership ON aspnet_Users . UserId = aspnet_Membership . UserId P\u00e1ginas vistas por mes \u00b6 GetSiteLog8 0,\u00bb,\u20192005-1-1\u2032,\u20192007-12-31\u2032 \u2013> El primer par\u00e1metro 0 es el ID del portal Resumen con los enlaces m\u00e1s visitados \u00b6 SELECT m.ModuleTitle AS Titulo, t.Url AS URL, t.Clicks, t.LastClick AS [\u00daltimo Click], t.PortalID AS [Portal ID] FROM UrlTracking AS t INNER JOIN Modules AS m ON t.ModuleId = m.ModuleID WHERE (t.PortalID = 1) AND (t.TrackClicks = 1) ORDER BY t.Clicks DESC Resumen de los documentos m\u00e1s descargados \u00b6 SELECT Documents.Title, UrlTracking.Clicks, UrlTracking.LastClick FROM Documents LEFT OUTER JOIN UrlTracking ON Documents.URL = UrlTracking.Url Order by urltracking.clicks desc Ultima visita del bot Google u otros\u2026 \u00b6 select top 1 DateTime, cast(DateDiff(minute,DateTime,getDate())/60.00 as decimal(9,2) ) AS [Hours Ago] from sitelog where portalid = 0 < \u2014 Atenci\u00f3n aqu\u00ed tu portalid and useragent like \u2018%googlebot%\u2019 order by DateTime Desc Listado de los 20 art\u00edculos m\u00e1s vistos (M\u00f3dulo Ventrian Systems) \u00b6 SELECT TOP 20 Title as T\u00edtulo, NumberOfViews as Vistas FROM DnnForge_NewsArticles_Article WHERE IsApproved = 1 \u2013Solo articulos aprobados AND IsDraft = 0 \u2013No borradores AND StartDate < = GETDATE() \u2013Creado antes de hoy AND (EndDate IS NULL OR EndDate >= GETDATE()) \u2013Nunca debe expirar, o continuar activo ORDER BY NumberOfViews DESC Listado de los 20 art\u00edculos m\u00e1s votados (M\u00f3dulo Ventrian Systems) con un contador de los votos emitidos \u00b6 SELECT TOP 20 a.Title, COUNT(r.rating) AS \u201cNum. Votos\u201d, AVG(r.rating) AS \u201cCalificaci\u00f3n\u201d FROM DnnForge_NewsArticles_Article a INNER JOIN DnnForge_NewsArticles_Rating r ON (a.articleId = r.articleId) WHERE IsApproved = 1 \u2013Solo articulos aprobados AND IsDraft = 0 \u2013No borradores AND StartDate < = GETDATE() \u2013Creado antes de hoy AND (EndDate IS NULL OR EndDate >= GETDATE()) \u2013Nunca debe expirar, o continuar activo GROUP BY a.Title ORDER BY AVG(r.rating) DESC \u2014 Cambiar a ASC para ver los menos votados Determinar el tama\u00f1o de los objetos en la base de datos por si tu instalaci\u00f3n de DNN funciona muy lenta o la base de datos es muy grande. \u00b6 Chequea el tama\u00f1o de la base de datos (SELECT * FROM Sysfiles) Chequea la carpeta \\Portals_default\\Logs en busca de los ficheros XML m\u00e1s grandes (> 5MBs) \u00bfCuantas filas hay en la tabla sitelog? (SELECT Count(*) FROM SiteLog) \u00bfCuantas filas hay en la tabla ScheduleHistory? (SELECT Count(*) FROM ScheduleHistory) \u00bfCuantas filas hay en la tabla EventLog? (SELECT Count(*) FROM EventLog) Puede usarse exec sp_spaceused en tablas especificas para averiguar el espacio f\u00edsico que ocupan, tama\u00f1o de los indices y filas exec sp_spaceused SiteLog exec sp_spaceused ScheduleHistory exec sp_spaceused EventLog Esta consulta la utilizo en www.verweb.com para devolver los 20 \u00faltimos portales con actividad reciente por el administrador. Tiene una caracter\u00edstica interesante y es que muestra un hiperv\u00ednculo en el resultado SQL SELECT DISTINCT \u2018 dbo.aspnet_Users.LastActivityDate AS [\u00daltima Actividad] FROM dbo.aspnet_Users INNER JOIN dbo.Users ON dbo.aspnet_Users.UserName = dbo.Users.Username INNER JOIN dbo.Portals ON dbo.Users.UserID = dbo.Portals.AdministratorId INNER JOIN dbo.PortalAlias ON dbo.Portals.PortalID = dbo.PortalAlias.PortalID ORDER BY dbo.aspnet_Users.LastActivityDate DESC Referencias \u00b6 http://www.smart-thinker.com/Resources/SimpleSQL/tabid/267/Default.aspx http://www.dnnstuff.com/Modules/SQLView/SQLViewSamples/tabid/187/Default.aspx DotNetNuke 6 y Log4net \u00b6 Alg\u00fan cliente de nuestros servicios de hosting dotnetnuke en Sugestionweb, nos ha indicado que se quedaba sin espacio en disco debido a unos archivos de Log que se est\u00e1n guardando en la carpeta /portals/_default/logs. Desde la versi\u00f3n 6 de DNN, se incluye la librer\u00eda log4net de Apache y se utiliza para guardar ciertos eventos. En el directorio raiz de DNN encontramos un archivo de configuraci\u00f3n llamado dotnetnuke.log4net.config, es un archivo XML donde podemos especificar numerosos par\u00e1metros, por defecto viene as\u00ed: <?xml version=\"1.0\" encoding=\"utf-8\" ?> <log4net> <appender name= \"RollingFile\" type= \"log4net.Appender.RollingFileAppender\" > <file value= \"Portals/_default/Logs/\" /> <datePattern value= \"yyyy.MM.dd'.log.resources'\" /> <rollingStyle value= \"Date\" /> <staticLogFileName value= \"false\" /> <appendToFile value= \"true\" /> <maximumFileSize value= \"10MB\" /> <maxSizeRollBackups value= \"5\" /> <lockingModel type= \"log4net.Appender.FileAppender+MinimalLock\" /> <layout type= \"log4net.Layout.PatternLayout\" > <conversionPattern value= \"%date [%property{log4net:HostName}][Thread:%thread][%level] %logger - %message%newline\" /> <locationInfo value= \"true\" /> </layout> </appender> <root> <level value= \"Error\" /> <appender-ref ref= \"RollingFile\" /> </root> </log4net> En el nodo root encontramos el elemento level value=\u00bbError\u00bb , basta cambiar este value a \u00abOFF\u00bb para que el log se desactive y dejen de escribirse entradas. Particularmente, yo no lo desactivar\u00eda sin antes averiguar que entradas est\u00e1 guardando y por qu\u00e9 se est\u00e1 llenando tanto el Log, pero desactivarlo solucionar\u00e1 tu problema de espacio en disco\u2026 Muchos de los par\u00e1metros de la configuraci\u00f3n de log4net se explican viendo su nombre, son interesantes File Value donde podremos especificar la ruta donde se guardar\u00e1n los logs o el de maximumFileSize para especificar el tama\u00f1o m\u00e1ximo de cada archivo. Para obtener informaci\u00f3n de que hace cada par\u00e1metro de la configuraci\u00f3n, puedes ver la p\u00e1gina de log4net en http://logging.apache.org/log4net/ Backup Portales DNN y SQL \u00b6 Ponemos el siguiente bat (copia_all.bat) en una carpeta por ej. C:\\Users\\Administrator\\Documents\\otrastareas\\ Programamos el backup mediante el scheduler para cada dia a las 3 de la ma\u00f1ana @ REM Seamonkey\u2019s quick date batch (MMDDYYYY format) @ REM Set ups %date variable @ REM First parses month, day, and year into mm , dd, yyyy formats and then combines to be MMDDYYYY @ ECHO OFF SETLOCAL @ REM FOR /F \"TOKENS=1* DELIMS= \" %%A IN ('DATE/T') DO SET CDATE=%%B @ REM FOR /F \"TOKENS=1,2 eol=/ DELIMS=/ \" %%A IN ('DATE/T') DO SET mm=%%B @ REM FOR /F \"TOKENS=1,2 DELIMS=/ eol=/\" %%A IN ('echo %CDATE%') DO SET dd=%%B @ REM FOR /F \"TOKENS=2,3 DELIMS=/ \" %%A IN ('echo %CDATE%') DO SET yyyy=%%B @ REM SET date=%mm%%dd%%yyyy% set date = %DATE:/=% set directory_of_this_script = C:\\Users\\Administrator\\Documents\\otrastareas\\ set directory_tmp = C:\\Users\\Administrator\\Documents\\otrastareas\\tmp\\ set backup_destination = C:\\backups\\ set backup_origin = C:\\HostingSpaces\\ set instance_sql = .\\SQLEXPRESS REM Delete the previous backups, only the last backup here and download daily for FTP del /Q /F %backup_destination% *.7z REM Build a list of databases to backup SET DBList = %directory_tmp% SQLDBList.txt SET FOLDERList = %directory_tmp% FOLDERList.txt dir %backup_origin% /AD /B > \" %FOLDERList% \" SqlCmd -E -S %instance_sql% -h-1 -W -Q \"SET NoCount ON; SELECT Name FROM master.dbo.sysDatabases WHERE [Name] NOT IN ('master','model','msdb','tempdb')\" > \" %DBList% \" REM Backup each database, prepending the date to the filename FOR /F \"tokens=*\" %% I IN ( %DBList% ) DO ( ECHO Backing up database: %% I SqlCmd -E -S %instance_sql% -Q \"BACKUP DATABASE [ %% I] TO Disk=' %directory_tmp%%date% _ %% I.bak'\" 7za a -r %backup_destination% %% I_SQL_ %date% .7z %directory_tmp%%date% _ %% I.bak del %directory_tmp%%date% _ %% I.bak ECHO . ) REM Backup each folder, FOR /F \"tokens=*\" %% I IN ( %FOLDERList% ) DO ( ECHO Backing up folder: %% I 7za a -r %backup_destination% %% I_ %date% .7z %backup_origin% %% I\\ ECHO . ) REM Clean up the temp file IF EXIST \" %DBList% \" DEL /F /Q \" %DBList% \" IF EXIST \" %FOLDERList% \" DEL /F /Q \" %FOLDERList% \" ENDLOCAL Error en DotNetNuke 4.4.1 con men\u00fa en vertical \u00b6 La versi\u00f3n de instalaci\u00f3n de Dotnetnuke 4.4.1 no incluye algunas librer\u00edas necesarias para el sistema de navegaci\u00f3n en vertical. Esto ocasiona que al cambiar de skin a uno cuyo men\u00fa est\u00e9 definido en vertical el Dotnetnuke falle. Sube por FTP el archivo DotNetNuke.DNNTreeNavigationProvider.dll, que podr\u00e1s extraerlo de una versi\u00f3n anterior de Dotnetnuke, a la carpeta /BIN con eso solucionar\u00e1s el problema. Log del Sitio \u00b6 Recientemente, he tenido alguna dificultad para comenzar a ver las entradas del Log del sitio, como era una instalaci\u00f3n nueva ha habido que configurar algo. Entra como Host y en Configuraci\u00f3n del Host . en Otras Configuraciones, configura el Buffer del Log a 1, la historia en dias a 90 o a otro valor que prefieras, desmarca la casilla Usar Buffer del Log\u2026 Tambi\u00e9n, en Admin, Configuraciones del Sitio, Configuraciones Avanzadas, Historia en dias del Log escribe un numero de dias, por ej. 90 Con estos pasos deber\u00edas empezar a ver entradas en el Log La tabla Cat_Resources en Catalook \u00b6 Despu\u00e9s de realizar algunas pruebas, hemos detectado que al eliminar un producto no se eliminan las entradas en la tabla cat_Resources . He desarrollado esta consulta con la que podr\u00e1s eliminar los registros hu\u00e9rfanos\u2026 SELECT * FROM dbo . CAT_Resources WHERE ( SUBSTRING ( SUBSTRING ( name , CHARINDEX ( '_' , name ) + 1 , LEN ( name ) - CHARINDEX ( '_' , name )), 1 , CHARINDEX ( '_' , SUBSTRING ( name , CHARINDEX ( '_' , name ) + 1 , LEN ( name ) - CHARINDEX ( '_' , name ))) - 1 ) NOT IN ( SELECT ProductId FROM Cat_Products )) Optimizar Dotnetnuke \u00b6 Hay algunas operaciones que podemos y debemos hacer de forma peri\u00f3dica para mantener la instalaci\u00f3n DNN lo m\u00e1s fresca y r\u00e1pida posible. Lee este art\u00edculo para obtener m\u00e1s informaci\u00f3n. Haz antes una copia de seguridad de la Base de datos por si necesitaras acceder a esta informaci\u00f3n m\u00e1s adelante.. Borrar el Sitelog \u00b6 Con cada petici\u00f3n de p\u00e1gina, normalmente se guarda una entrada en el LOG. Con el tiempo esta tabla se llena de forma imparable, as\u00ed que deber\u00e1s borrar el contenido de la tabla de forma peri\u00f3dica. Ejecuta la intrucci\u00f3n Delete from Sitelog desde Host \u2013 SQL Borrar el Eventlog \u00b6 Muchos eventos dejan su huella en la tabla Eventlog as\u00ed que periodicamente borra su contenido Ejecuta la intrucci\u00f3n Delete from Eventlog desde Host \u2013 SQL Borrar el Log de las tareas programas (Schedule History) \u00b6 Las tareas programadas se ejecutan de forma autom\u00e1tica cada cierto tiempo. En cada ejecuci\u00f3n almacenan unas 3 entradas en la tabla Schedule History con lo que esta tabla tambi\u00e9n se va llenando de forma imparable. A partir de las 5000 \u2013 6000 entradas podemos obtener errores de Timeout y algunos m\u00f3dulos como el de usuarios en l\u00ednea pueden empezar a dar problemas. Ejecuta la instrucci\u00f3n Delete from ScheduleHistory desde Host \u2013 SQL Otros Chequea el tama\u00f1o de la base de datos (SELECT * FROM Sysfiles) Chequea la carpeta \\Portals_default\\Logs en busca de los ficheros XML m\u00e1s grandes (> 5MBs) La clave del host eraaaa\u2026.. mmmm \u2026 \u00b6 Siempre habr\u00e1 usuarios con problemas por no acordarse de la clave del host\u2026. vamos a ver ,de forma r\u00e1pida, como podemos arreglarlo El proceso es bastante sencillo Necesitas poder conectarte externamente a la base de datos. Doy por supuesto que sabr\u00e1s hacer esto aunque quiz\u00e1 este sea el problema\u2026 1 \u2013 Registramos un usuario en el portal utilizando el proceso normal de registro 2 \u2013 Modificamos el usuario en la base de datos, tabla Users y le marcamos el campo IsSuperUser como True 3 \u2013 Ya est\u00e1, ya eres host y puedes cambiarle la clave al usuario host desde el men\u00fa host \u2013 cuentas de superusuario\u2026 Geolocalizaci\u00f3n IP en DotNetNuke \u00b6 La geolocalizaci\u00f3n de IPs en Dotnetnuke se utiliza en el control Country List Box o \u201cLista de Selecci\u00f3n de Paises\u201d que se muestra por ej. en el proceso de registro de DotNetNuke. DNN comprueba la direcci\u00f3n IP del usuario contra una base de datos localizada en la carpeta Controls/countryListBox/Data y de esta forma obtiene el Pa\u00eds por defecto para mostrarlo pre-seleccionado en la lista de paises. En ocasiones, esta base de datos puede haber quedado desactualizada, pero puedes descargar la \u00faltima versi\u00f3n desde http://dev.maxmind.com/geoip/geolite (En Formato Binario) El fichero resultante GEOIP.DAT se puede sobre-escribir por el existente en la carpeta Controls/countryListBox/Data y de esta forma solucionar algunos problemas con la base de datos de IP\u2019s que podr\u00edan hacer que no se mostrara correctamente el pa\u00eds.","title":"Dotnetnuke"},{"location":"kb/windows/Software/Dotnetnuke/#la-cache-de-los-modulos-en-dotnetnuke","text":"En general todos los m\u00f3dulos que, para mostrar informaci\u00f3n, utilizan plantillas no funcionanar\u00e1n bien si en la configuraci\u00f3n de la cach\u00e9 le pones algo mayor que 0.","title":"La Cach\u00e9 de los m\u00f3dulos en Dotnetnuke"},{"location":"kb/windows/Software/Dotnetnuke/#webresourceaxd","text":"Resulta que el otro dia activ\u00e9 en algunos portales de nueva creaci\u00f3n la compresi\u00f3n para ver como funcionaba. La consecuencia ha sido que que los usuarios no pod\u00edan crear p\u00e1ginas, que tenian problemas al registrarse y otros problemas varios. Al final y para todo aquel que le sirva, el error es que si el fichero webresource.axd se comprime, los errores son variados pero coinciden con las validaciones de los formularios. La soluci\u00f3n despu\u00e9s de numerosas pruebas ha sido excluir este fichero de la compresi\u00f3n. En las opciones para Host hay una lista de peticiones que se excluyen de la compresi\u00f3n","title":"webresource.axd"},{"location":"kb/windows/Software/Dotnetnuke/#webform_postbackoptions-undefined","text":"Problemas javascript al registrarse o al crear una p\u00e1gina. Este problema aparece al pulsar el bot\u00f3n de registrarse, al intentar a\u00f1adir una p\u00e1gina y en general en todas aquellas situaciones en las que se ve involucrado un control validador Html. Suele darse en versiones DNN 4.5.1 \u2013 4.5.3, para resolverlo excluye la peticion webresource.axd de la compresi\u00f3n. Este error se produce como consecuencia del cambio de ASP NET 1 a ASP NET 2. Mientras que en las aplicaciones asp.net 1.0 los validadores estaban incluidos en la carpeta \u201caspnet_client\u201d a partir de asp.net 2.0 los validadores se procesan como un recurso en la cara del servidor mediante el fichero WebResource.AXD. He detectado que en caso de estar activada la compresi\u00f3n, el fichero WebResource.AXD ha de excluirse de esta compresi\u00f3n ya que si no los javascripts de los validadores no se renderizan. Para evitar este error, a\u00f1ada el fichero Webresource.axd a la lista de exclusiones de la compresi\u00f3n.Necesitar\u00e1s entrar como Host en tu sitio para poder hacer este cambio.","title":"WebForm_PostBackOptions undefined"},{"location":"kb/windows/Software/Dotnetnuke/#obtener-informacion-de-la-base-de-datos","text":"Puedes descargar este m\u00f3dulo y agregarlo a una p\u00e1gina llamada \u201cControl\u201d. Para ejecutar las consultas configura varios m\u00f3dulos con las consultas inferiores. De esta forma la informaci\u00f3n se ir\u00e1 refrescando de forma autom\u00e1tica en la instalaci\u00f3n On-Line\u2026 http://www.dnnstuff.com/Modules/SQLView/tabid/182/Default.aspx","title":"Obtener Informaci\u00f3n de la base de datos"},{"location":"kb/windows/Software/Dotnetnuke/#ultima-actividad-de-usuarios","text":"SELECT Users . Username , Users . FirstName , Users . LastName , aspnet_Users . LastActivityDate FROM aspnet_Users INNER JOIN Users ON aspnet_Users . UserName = Users . Username order by aspnet_Users . LastActivityDate DESC","title":"\u00daltima Actividad de Usuarios:"},{"location":"kb/windows/Software/Dotnetnuke/#ultimo-login-de-usuarios","text":"SELECT Users . Username , Users . FirstName , Users . LastName , aspnet_Membership . LastLoginDate FROM Users INNER JOIN aspnet_Users ON Users . Username = aspnet_Users . UserName INNER JOIN aspnet_Membership ON aspnet_Users . UserId = aspnet_Membership . UserId","title":"\u00daltimo Login de Usuarios:"},{"location":"kb/windows/Software/Dotnetnuke/#paginas-vistas-por-mes","text":"GetSiteLog8 0,\u00bb,\u20192005-1-1\u2032,\u20192007-12-31\u2032 \u2013> El primer par\u00e1metro 0 es el ID del portal","title":"P\u00e1ginas vistas por mes"},{"location":"kb/windows/Software/Dotnetnuke/#resumen-con-los-enlaces-mas-visitados","text":"SELECT m.ModuleTitle AS Titulo, t.Url AS URL, t.Clicks, t.LastClick AS [\u00daltimo Click], t.PortalID AS [Portal ID] FROM UrlTracking AS t INNER JOIN Modules AS m ON t.ModuleId = m.ModuleID WHERE (t.PortalID = 1) AND (t.TrackClicks = 1) ORDER BY t.Clicks DESC","title":"Resumen con los enlaces m\u00e1s visitados"},{"location":"kb/windows/Software/Dotnetnuke/#resumen-de-los-documentos-mas-descargados","text":"SELECT Documents.Title, UrlTracking.Clicks, UrlTracking.LastClick FROM Documents LEFT OUTER JOIN UrlTracking ON Documents.URL = UrlTracking.Url Order by urltracking.clicks desc","title":"Resumen de los documentos m\u00e1s descargados"},{"location":"kb/windows/Software/Dotnetnuke/#ultima-visita-del-bot-google-u-otros","text":"select top 1 DateTime, cast(DateDiff(minute,DateTime,getDate())/60.00 as decimal(9,2) ) AS [Hours Ago] from sitelog where portalid = 0 < \u2014 Atenci\u00f3n aqu\u00ed tu portalid and useragent like \u2018%googlebot%\u2019 order by DateTime Desc","title":"Ultima visita del bot Google u otros\u2026"},{"location":"kb/windows/Software/Dotnetnuke/#listado-de-los-20-articulos-mas-vistos-modulo-ventrian-systems","text":"SELECT TOP 20 Title as T\u00edtulo, NumberOfViews as Vistas FROM DnnForge_NewsArticles_Article WHERE IsApproved = 1 \u2013Solo articulos aprobados AND IsDraft = 0 \u2013No borradores AND StartDate < = GETDATE() \u2013Creado antes de hoy AND (EndDate IS NULL OR EndDate >= GETDATE()) \u2013Nunca debe expirar, o continuar activo ORDER BY NumberOfViews DESC","title":"Listado de los 20 art\u00edculos m\u00e1s vistos (M\u00f3dulo Ventrian Systems)"},{"location":"kb/windows/Software/Dotnetnuke/#listado-de-los-20-articulos-mas-votados-modulo-ventrian-systems-con-un-contador-de-los-votos-emitidos","text":"SELECT TOP 20 a.Title, COUNT(r.rating) AS \u201cNum. Votos\u201d, AVG(r.rating) AS \u201cCalificaci\u00f3n\u201d FROM DnnForge_NewsArticles_Article a INNER JOIN DnnForge_NewsArticles_Rating r ON (a.articleId = r.articleId) WHERE IsApproved = 1 \u2013Solo articulos aprobados AND IsDraft = 0 \u2013No borradores AND StartDate < = GETDATE() \u2013Creado antes de hoy AND (EndDate IS NULL OR EndDate >= GETDATE()) \u2013Nunca debe expirar, o continuar activo GROUP BY a.Title ORDER BY AVG(r.rating) DESC \u2014 Cambiar a ASC para ver los menos votados","title":"Listado de los 20 art\u00edculos m\u00e1s votados (M\u00f3dulo Ventrian Systems) con un contador de los votos emitidos"},{"location":"kb/windows/Software/Dotnetnuke/#determinar-el-tamano-de-los-objetos-en-la-base-de-datos-por-si-tu-instalacion-de-dnn-funciona-muy-lenta-o-la-base-de-datos-es-muy-grande","text":"Chequea el tama\u00f1o de la base de datos (SELECT * FROM Sysfiles) Chequea la carpeta \\Portals_default\\Logs en busca de los ficheros XML m\u00e1s grandes (> 5MBs) \u00bfCuantas filas hay en la tabla sitelog? (SELECT Count(*) FROM SiteLog) \u00bfCuantas filas hay en la tabla ScheduleHistory? (SELECT Count(*) FROM ScheduleHistory) \u00bfCuantas filas hay en la tabla EventLog? (SELECT Count(*) FROM EventLog) Puede usarse exec sp_spaceused en tablas especificas para averiguar el espacio f\u00edsico que ocupan, tama\u00f1o de los indices y filas exec sp_spaceused SiteLog exec sp_spaceused ScheduleHistory exec sp_spaceused EventLog Esta consulta la utilizo en www.verweb.com para devolver los 20 \u00faltimos portales con actividad reciente por el administrador. Tiene una caracter\u00edstica interesante y es que muestra un hiperv\u00ednculo en el resultado SQL SELECT DISTINCT \u2018 dbo.aspnet_Users.LastActivityDate AS [\u00daltima Actividad] FROM dbo.aspnet_Users INNER JOIN dbo.Users ON dbo.aspnet_Users.UserName = dbo.Users.Username INNER JOIN dbo.Portals ON dbo.Users.UserID = dbo.Portals.AdministratorId INNER JOIN dbo.PortalAlias ON dbo.Portals.PortalID = dbo.PortalAlias.PortalID ORDER BY dbo.aspnet_Users.LastActivityDate DESC","title":"Determinar el tama\u00f1o de los objetos en la base de datos por si tu instalaci\u00f3n de DNN funciona muy lenta o la base de datos es muy grande."},{"location":"kb/windows/Software/Dotnetnuke/#referencias","text":"http://www.smart-thinker.com/Resources/SimpleSQL/tabid/267/Default.aspx http://www.dnnstuff.com/Modules/SQLView/SQLViewSamples/tabid/187/Default.aspx","title":"Referencias"},{"location":"kb/windows/Software/Dotnetnuke/#dotnetnuke-6-y-log4net","text":"Alg\u00fan cliente de nuestros servicios de hosting dotnetnuke en Sugestionweb, nos ha indicado que se quedaba sin espacio en disco debido a unos archivos de Log que se est\u00e1n guardando en la carpeta /portals/_default/logs. Desde la versi\u00f3n 6 de DNN, se incluye la librer\u00eda log4net de Apache y se utiliza para guardar ciertos eventos. En el directorio raiz de DNN encontramos un archivo de configuraci\u00f3n llamado dotnetnuke.log4net.config, es un archivo XML donde podemos especificar numerosos par\u00e1metros, por defecto viene as\u00ed: <?xml version=\"1.0\" encoding=\"utf-8\" ?> <log4net> <appender name= \"RollingFile\" type= \"log4net.Appender.RollingFileAppender\" > <file value= \"Portals/_default/Logs/\" /> <datePattern value= \"yyyy.MM.dd'.log.resources'\" /> <rollingStyle value= \"Date\" /> <staticLogFileName value= \"false\" /> <appendToFile value= \"true\" /> <maximumFileSize value= \"10MB\" /> <maxSizeRollBackups value= \"5\" /> <lockingModel type= \"log4net.Appender.FileAppender+MinimalLock\" /> <layout type= \"log4net.Layout.PatternLayout\" > <conversionPattern value= \"%date [%property{log4net:HostName}][Thread:%thread][%level] %logger - %message%newline\" /> <locationInfo value= \"true\" /> </layout> </appender> <root> <level value= \"Error\" /> <appender-ref ref= \"RollingFile\" /> </root> </log4net> En el nodo root encontramos el elemento level value=\u00bbError\u00bb , basta cambiar este value a \u00abOFF\u00bb para que el log se desactive y dejen de escribirse entradas. Particularmente, yo no lo desactivar\u00eda sin antes averiguar que entradas est\u00e1 guardando y por qu\u00e9 se est\u00e1 llenando tanto el Log, pero desactivarlo solucionar\u00e1 tu problema de espacio en disco\u2026 Muchos de los par\u00e1metros de la configuraci\u00f3n de log4net se explican viendo su nombre, son interesantes File Value donde podremos especificar la ruta donde se guardar\u00e1n los logs o el de maximumFileSize para especificar el tama\u00f1o m\u00e1ximo de cada archivo. Para obtener informaci\u00f3n de que hace cada par\u00e1metro de la configuraci\u00f3n, puedes ver la p\u00e1gina de log4net en http://logging.apache.org/log4net/","title":"DotNetNuke 6 y Log4net"},{"location":"kb/windows/Software/Dotnetnuke/#backup-portales-dnn-y-sql","text":"Ponemos el siguiente bat (copia_all.bat) en una carpeta por ej. C:\\Users\\Administrator\\Documents\\otrastareas\\ Programamos el backup mediante el scheduler para cada dia a las 3 de la ma\u00f1ana @ REM Seamonkey\u2019s quick date batch (MMDDYYYY format) @ REM Set ups %date variable @ REM First parses month, day, and year into mm , dd, yyyy formats and then combines to be MMDDYYYY @ ECHO OFF SETLOCAL @ REM FOR /F \"TOKENS=1* DELIMS= \" %%A IN ('DATE/T') DO SET CDATE=%%B @ REM FOR /F \"TOKENS=1,2 eol=/ DELIMS=/ \" %%A IN ('DATE/T') DO SET mm=%%B @ REM FOR /F \"TOKENS=1,2 DELIMS=/ eol=/\" %%A IN ('echo %CDATE%') DO SET dd=%%B @ REM FOR /F \"TOKENS=2,3 DELIMS=/ \" %%A IN ('echo %CDATE%') DO SET yyyy=%%B @ REM SET date=%mm%%dd%%yyyy% set date = %DATE:/=% set directory_of_this_script = C:\\Users\\Administrator\\Documents\\otrastareas\\ set directory_tmp = C:\\Users\\Administrator\\Documents\\otrastareas\\tmp\\ set backup_destination = C:\\backups\\ set backup_origin = C:\\HostingSpaces\\ set instance_sql = .\\SQLEXPRESS REM Delete the previous backups, only the last backup here and download daily for FTP del /Q /F %backup_destination% *.7z REM Build a list of databases to backup SET DBList = %directory_tmp% SQLDBList.txt SET FOLDERList = %directory_tmp% FOLDERList.txt dir %backup_origin% /AD /B > \" %FOLDERList% \" SqlCmd -E -S %instance_sql% -h-1 -W -Q \"SET NoCount ON; SELECT Name FROM master.dbo.sysDatabases WHERE [Name] NOT IN ('master','model','msdb','tempdb')\" > \" %DBList% \" REM Backup each database, prepending the date to the filename FOR /F \"tokens=*\" %% I IN ( %DBList% ) DO ( ECHO Backing up database: %% I SqlCmd -E -S %instance_sql% -Q \"BACKUP DATABASE [ %% I] TO Disk=' %directory_tmp%%date% _ %% I.bak'\" 7za a -r %backup_destination% %% I_SQL_ %date% .7z %directory_tmp%%date% _ %% I.bak del %directory_tmp%%date% _ %% I.bak ECHO . ) REM Backup each folder, FOR /F \"tokens=*\" %% I IN ( %FOLDERList% ) DO ( ECHO Backing up folder: %% I 7za a -r %backup_destination% %% I_ %date% .7z %backup_origin% %% I\\ ECHO . ) REM Clean up the temp file IF EXIST \" %DBList% \" DEL /F /Q \" %DBList% \" IF EXIST \" %FOLDERList% \" DEL /F /Q \" %FOLDERList% \" ENDLOCAL","title":"Backup Portales DNN y SQL"},{"location":"kb/windows/Software/Dotnetnuke/#error-en-dotnetnuke-441-con-menu-en-vertical","text":"La versi\u00f3n de instalaci\u00f3n de Dotnetnuke 4.4.1 no incluye algunas librer\u00edas necesarias para el sistema de navegaci\u00f3n en vertical. Esto ocasiona que al cambiar de skin a uno cuyo men\u00fa est\u00e9 definido en vertical el Dotnetnuke falle. Sube por FTP el archivo DotNetNuke.DNNTreeNavigationProvider.dll, que podr\u00e1s extraerlo de una versi\u00f3n anterior de Dotnetnuke, a la carpeta /BIN con eso solucionar\u00e1s el problema.","title":"Error en DotNetNuke 4.4.1 con men\u00fa en vertical"},{"location":"kb/windows/Software/Dotnetnuke/#log-del-sitio","text":"Recientemente, he tenido alguna dificultad para comenzar a ver las entradas del Log del sitio, como era una instalaci\u00f3n nueva ha habido que configurar algo. Entra como Host y en Configuraci\u00f3n del Host . en Otras Configuraciones, configura el Buffer del Log a 1, la historia en dias a 90 o a otro valor que prefieras, desmarca la casilla Usar Buffer del Log\u2026 Tambi\u00e9n, en Admin, Configuraciones del Sitio, Configuraciones Avanzadas, Historia en dias del Log escribe un numero de dias, por ej. 90 Con estos pasos deber\u00edas empezar a ver entradas en el Log","title":"Log del Sitio"},{"location":"kb/windows/Software/Dotnetnuke/#la-tabla-cat_resources-en-catalook","text":"Despu\u00e9s de realizar algunas pruebas, hemos detectado que al eliminar un producto no se eliminan las entradas en la tabla cat_Resources . He desarrollado esta consulta con la que podr\u00e1s eliminar los registros hu\u00e9rfanos\u2026 SELECT * FROM dbo . CAT_Resources WHERE ( SUBSTRING ( SUBSTRING ( name , CHARINDEX ( '_' , name ) + 1 , LEN ( name ) - CHARINDEX ( '_' , name )), 1 , CHARINDEX ( '_' , SUBSTRING ( name , CHARINDEX ( '_' , name ) + 1 , LEN ( name ) - CHARINDEX ( '_' , name ))) - 1 ) NOT IN ( SELECT ProductId FROM Cat_Products ))","title":"La tabla Cat_Resources en Catalook"},{"location":"kb/windows/Software/Dotnetnuke/#optimizar-dotnetnuke","text":"Hay algunas operaciones que podemos y debemos hacer de forma peri\u00f3dica para mantener la instalaci\u00f3n DNN lo m\u00e1s fresca y r\u00e1pida posible. Lee este art\u00edculo para obtener m\u00e1s informaci\u00f3n. Haz antes una copia de seguridad de la Base de datos por si necesitaras acceder a esta informaci\u00f3n m\u00e1s adelante..","title":"Optimizar Dotnetnuke"},{"location":"kb/windows/Software/Dotnetnuke/#borrar-el-sitelog","text":"Con cada petici\u00f3n de p\u00e1gina, normalmente se guarda una entrada en el LOG. Con el tiempo esta tabla se llena de forma imparable, as\u00ed que deber\u00e1s borrar el contenido de la tabla de forma peri\u00f3dica. Ejecuta la intrucci\u00f3n Delete from Sitelog desde Host \u2013 SQL","title":"Borrar el Sitelog"},{"location":"kb/windows/Software/Dotnetnuke/#borrar-el-eventlog","text":"Muchos eventos dejan su huella en la tabla Eventlog as\u00ed que periodicamente borra su contenido Ejecuta la intrucci\u00f3n Delete from Eventlog desde Host \u2013 SQL","title":"Borrar el Eventlog"},{"location":"kb/windows/Software/Dotnetnuke/#borrar-el-log-de-las-tareas-programas-schedule-history","text":"Las tareas programadas se ejecutan de forma autom\u00e1tica cada cierto tiempo. En cada ejecuci\u00f3n almacenan unas 3 entradas en la tabla Schedule History con lo que esta tabla tambi\u00e9n se va llenando de forma imparable. A partir de las 5000 \u2013 6000 entradas podemos obtener errores de Timeout y algunos m\u00f3dulos como el de usuarios en l\u00ednea pueden empezar a dar problemas. Ejecuta la instrucci\u00f3n Delete from ScheduleHistory desde Host \u2013 SQL Otros Chequea el tama\u00f1o de la base de datos (SELECT * FROM Sysfiles) Chequea la carpeta \\Portals_default\\Logs en busca de los ficheros XML m\u00e1s grandes (> 5MBs)","title":"Borrar el Log de las tareas programas (Schedule History)"},{"location":"kb/windows/Software/Dotnetnuke/#la-clave-del-host-eraaaa-mmmm","text":"Siempre habr\u00e1 usuarios con problemas por no acordarse de la clave del host\u2026. vamos a ver ,de forma r\u00e1pida, como podemos arreglarlo El proceso es bastante sencillo Necesitas poder conectarte externamente a la base de datos. Doy por supuesto que sabr\u00e1s hacer esto aunque quiz\u00e1 este sea el problema\u2026 1 \u2013 Registramos un usuario en el portal utilizando el proceso normal de registro 2 \u2013 Modificamos el usuario en la base de datos, tabla Users y le marcamos el campo IsSuperUser como True 3 \u2013 Ya est\u00e1, ya eres host y puedes cambiarle la clave al usuario host desde el men\u00fa host \u2013 cuentas de superusuario\u2026","title":"La clave del host eraaaa\u2026.. mmmm \u2026"},{"location":"kb/windows/Software/Dotnetnuke/#geolocalizacion-ip-en-dotnetnuke","text":"La geolocalizaci\u00f3n de IPs en Dotnetnuke se utiliza en el control Country List Box o \u201cLista de Selecci\u00f3n de Paises\u201d que se muestra por ej. en el proceso de registro de DotNetNuke. DNN comprueba la direcci\u00f3n IP del usuario contra una base de datos localizada en la carpeta Controls/countryListBox/Data y de esta forma obtiene el Pa\u00eds por defecto para mostrarlo pre-seleccionado en la lista de paises. En ocasiones, esta base de datos puede haber quedado desactualizada, pero puedes descargar la \u00faltima versi\u00f3n desde http://dev.maxmind.com/geoip/geolite (En Formato Binario) El fichero resultante GEOIP.DAT se puede sobre-escribir por el existente en la carpeta Controls/countryListBox/Data y de esta forma solucionar algunos problemas con la base de datos de IP\u2019s que podr\u00edan hacer que no se mostrara correctamente el pa\u00eds.","title":"Geolocalizaci\u00f3n IP en DotNetNuke"},{"location":"kb/windows/Software/SQLServer/","text":"Evitar cerrar y reducir de forma autom\u00e1tica la base de datos SQL Server \u00b6 Si en tu visor de eventos de Windows Server aparecen muchas entradas informativas del servicio SQL Server con el texto \u00abStarting up database nombredelaBD\u00bb quiere decir que tu base de datos se est\u00e1 cerrando de forma autom\u00e1tica y volviendo a arrancar cuando se le solicitan nuevas conexiones. En un entorno de producci\u00f3n se han de desactivar las opciones \u00abCerrar automaticamente\u00bb y \u00abReducir autom\u00e1ticamente\u00bb. Ambas opciones est\u00e1n ubicadas a nivel de propiedades de la base de datos, en el grupo de propiedades \u00abOpciones\u00bb y en \u00abAutom\u00e1tico\u00bb. Fuentes: http://sqlmag.com/sql-server/avoiding-autoclose-and-autoshrink-options http://technet.microsoft.com/es-es/library/ms135094%28v=sql.105%29.aspx http://technet.microsoft.com/es-es/library/ms136209%28v=sql.105%29.aspx Consulta SQL Server para obtener el n\u00famero de registros de cada tabla \u00b6 La siguiente consulta es muy \u00fatil cuando queremos ver el n\u00famero de registros que contiene cada tabla de una base de datos SQL Server. Normalmente cuantos mas registros haya en una tabla, mas espacio ocupar\u00e1, as\u00ed que es una forma de averiguar que tablas ocupan mas tama\u00f1o en una base de datos. select si . rows as 'filas' , SO . Name as Tabla , SI . name as 'Index' , SFG . groupname as 'Filegroup' from sysobjects as SO join sysindexes as SI on SO . Id = SI . id join sysfilegroups as SFG on SI . GroupId = SFG . GroupId order by si . rows desc , SO . Name , SI . name , SFG . GroupName Tambi\u00e9n hay otra opci\u00f3n mas completa, encontr\u00e9 este procedimiento hace un tiempo: CREATE PROCEDURE GetAllTableSizes AS /* Obtains spaced used data for ALL user tables in the database */ DECLARE @ TableName VARCHAR ( 100 ) --For storing values in the cursor --Cursor to get the name of all user tables from the sysobjects listing DECLARE tableCursor CURSOR FOR select [ name ] from dbo . sysobjects where OBJECTPROPERTY ( id , N 'IsUserTable' ) = 1 FOR READ ONLY --A procedure level temp table to store the results CREATE TABLE # TempTable ( tableName varchar ( 100 ), numberofRows varchar ( 100 ), reservedSize varchar ( 50 ), dataSize varchar ( 50 ), indexSize varchar ( 50 ), unusedSize varchar ( 50 ) ) --Open the cursor OPEN tableCursor --Get the first table name from the cursor FETCH NEXT FROM tableCursor INTO @ TableName --Loop until the cursor was not able to fetch WHILE ( @@ Fetch_Status & amp ; gt ; = 0 ) BEGIN --Dump the results of the sp_spaceused query to the temp table INSERT # TempTable EXEC sp_spaceused @ TableName --Get the next table name FETCH NEXT FROM tableCursor INTO @ TableName END --Get rid of the cursor CLOSE tableCursor DEALLOCATE tableCursor --Select all records so we can use the reults SELECT * FROM # TempTable --Final cleanup! DROP TABLE # TempTable GO Despues podemos ejecutar el procedimiento con el comando EXEC GetAllTableSizes y podriamos ver el resultado, algo como: Otra consulta que hace lo mismo de otra forma SELECT X .[ name ], REPLACE ( CONVERT ( varchar , CONVERT ( money , X .[ rows ]), 1 ), '.00' , '' ) AS [ rows ], REPLACE ( CONVERT ( varchar , CONVERT ( money , X .[ reserved ]), 1 ), '.00' , '' ) AS [ reserved ], REPLACE ( CONVERT ( varchar , CONVERT ( money , X .[ data ]), 1 ), '.00' , '' ) AS [ data ], REPLACE ( CONVERT ( varchar , CONVERT ( money , X .[ index_size ]), 1 ), '.00' , '' ) AS [ index_size ], REPLACE ( CONVERT ( varchar , CONVERT ( money , X .[ unused ]), 1 ), '.00' , '' ) AS [ unused ] FROM ( SELECT CAST ( object_name ( id ) AS varchar ( 50 )) AS [ name ], SUM ( CASE WHEN indid < 2 THEN CONVERT ( bigint , [ rows ]) END ) AS [ rows ], SUM ( CONVERT ( bigint , reserved )) * 8 AS reserved , SUM ( CONVERT ( bigint , dpages )) * 8 AS data , SUM ( CONVERT ( bigint , used ) - CONVERT ( bigint , dpages )) * 8 AS index_size , SUM ( CONVERT ( bigint , reserved ) - CONVERT ( bigint , used )) * 8 AS unused FROM sysindexes WITH ( NOLOCK ) WHERE sysindexes . indid IN ( 0 , 1 , 255 ) AND sysindexes . id > 100 AND object_name ( sysindexes . id ) <> 'dtproperties' GROUP BY sysindexes . id WITH ROLLUP ) AS X WHERE X .[ name ] is not null ORDER BY X .[ rows ] DESC","title":"SQLServer"},{"location":"kb/windows/Software/SQLServer/#evitar-cerrar-y-reducir-de-forma-automatica-la-base-de-datos-sql-server","text":"Si en tu visor de eventos de Windows Server aparecen muchas entradas informativas del servicio SQL Server con el texto \u00abStarting up database nombredelaBD\u00bb quiere decir que tu base de datos se est\u00e1 cerrando de forma autom\u00e1tica y volviendo a arrancar cuando se le solicitan nuevas conexiones. En un entorno de producci\u00f3n se han de desactivar las opciones \u00abCerrar automaticamente\u00bb y \u00abReducir autom\u00e1ticamente\u00bb. Ambas opciones est\u00e1n ubicadas a nivel de propiedades de la base de datos, en el grupo de propiedades \u00abOpciones\u00bb y en \u00abAutom\u00e1tico\u00bb. Fuentes: http://sqlmag.com/sql-server/avoiding-autoclose-and-autoshrink-options http://technet.microsoft.com/es-es/library/ms135094%28v=sql.105%29.aspx http://technet.microsoft.com/es-es/library/ms136209%28v=sql.105%29.aspx","title":"Evitar cerrar y reducir de forma autom\u00e1tica la base de datos SQL Server"},{"location":"kb/windows/Software/SQLServer/#consulta-sql-server-para-obtener-el-numero-de-registros-de-cada-tabla","text":"La siguiente consulta es muy \u00fatil cuando queremos ver el n\u00famero de registros que contiene cada tabla de una base de datos SQL Server. Normalmente cuantos mas registros haya en una tabla, mas espacio ocupar\u00e1, as\u00ed que es una forma de averiguar que tablas ocupan mas tama\u00f1o en una base de datos. select si . rows as 'filas' , SO . Name as Tabla , SI . name as 'Index' , SFG . groupname as 'Filegroup' from sysobjects as SO join sysindexes as SI on SO . Id = SI . id join sysfilegroups as SFG on SI . GroupId = SFG . GroupId order by si . rows desc , SO . Name , SI . name , SFG . GroupName Tambi\u00e9n hay otra opci\u00f3n mas completa, encontr\u00e9 este procedimiento hace un tiempo: CREATE PROCEDURE GetAllTableSizes AS /* Obtains spaced used data for ALL user tables in the database */ DECLARE @ TableName VARCHAR ( 100 ) --For storing values in the cursor --Cursor to get the name of all user tables from the sysobjects listing DECLARE tableCursor CURSOR FOR select [ name ] from dbo . sysobjects where OBJECTPROPERTY ( id , N 'IsUserTable' ) = 1 FOR READ ONLY --A procedure level temp table to store the results CREATE TABLE # TempTable ( tableName varchar ( 100 ), numberofRows varchar ( 100 ), reservedSize varchar ( 50 ), dataSize varchar ( 50 ), indexSize varchar ( 50 ), unusedSize varchar ( 50 ) ) --Open the cursor OPEN tableCursor --Get the first table name from the cursor FETCH NEXT FROM tableCursor INTO @ TableName --Loop until the cursor was not able to fetch WHILE ( @@ Fetch_Status & amp ; gt ; = 0 ) BEGIN --Dump the results of the sp_spaceused query to the temp table INSERT # TempTable EXEC sp_spaceused @ TableName --Get the next table name FETCH NEXT FROM tableCursor INTO @ TableName END --Get rid of the cursor CLOSE tableCursor DEALLOCATE tableCursor --Select all records so we can use the reults SELECT * FROM # TempTable --Final cleanup! DROP TABLE # TempTable GO Despues podemos ejecutar el procedimiento con el comando EXEC GetAllTableSizes y podriamos ver el resultado, algo como: Otra consulta que hace lo mismo de otra forma SELECT X .[ name ], REPLACE ( CONVERT ( varchar , CONVERT ( money , X .[ rows ]), 1 ), '.00' , '' ) AS [ rows ], REPLACE ( CONVERT ( varchar , CONVERT ( money , X .[ reserved ]), 1 ), '.00' , '' ) AS [ reserved ], REPLACE ( CONVERT ( varchar , CONVERT ( money , X .[ data ]), 1 ), '.00' , '' ) AS [ data ], REPLACE ( CONVERT ( varchar , CONVERT ( money , X .[ index_size ]), 1 ), '.00' , '' ) AS [ index_size ], REPLACE ( CONVERT ( varchar , CONVERT ( money , X .[ unused ]), 1 ), '.00' , '' ) AS [ unused ] FROM ( SELECT CAST ( object_name ( id ) AS varchar ( 50 )) AS [ name ], SUM ( CASE WHEN indid < 2 THEN CONVERT ( bigint , [ rows ]) END ) AS [ rows ], SUM ( CONVERT ( bigint , reserved )) * 8 AS reserved , SUM ( CONVERT ( bigint , dpages )) * 8 AS data , SUM ( CONVERT ( bigint , used ) - CONVERT ( bigint , dpages )) * 8 AS index_size , SUM ( CONVERT ( bigint , reserved ) - CONVERT ( bigint , used )) * 8 AS unused FROM sysindexes WITH ( NOLOCK ) WHERE sysindexes . indid IN ( 0 , 1 , 255 ) AND sysindexes . id > 100 AND object_name ( sysindexes . id ) <> 'dtproperties' GROUP BY sysindexes . id WITH ROLLUP ) AS X WHERE X .[ name ] is not null ORDER BY X .[ rows ] DESC","title":"Consulta SQL Server para obtener el n\u00famero de registros de cada tabla"},{"location":"kb/windows/Software/Windirstat%20para%20medir%20el%20espacio%20del%20sistema%20de%20archivos%20windows/","text":"Windirstat para medir el espacio del sistema de archivos windows \u00b6 Magn\u00edfica herramienta para medir el espacio del sistema de archivos windows http://windirstat.sourceforge.net","title":"Windirstat para medir el espacio del sistema de archivos windows"},{"location":"kb/windows/Software/Windirstat%20para%20medir%20el%20espacio%20del%20sistema%20de%20archivos%20windows/#windirstat-para-medir-el-espacio-del-sistema-de-archivos-windows","text":"Magn\u00edfica herramienta para medir el espacio del sistema de archivos windows http://windirstat.sourceforge.net","title":"Windirstat para medir el espacio del sistema de archivos windows"},{"location":"m%C3%BAsica/listas/","text":"La m\u00fasica compone los \u00e1nimos descompuestos y alivia los trabajos que nacen del esp\u00edritu. Miguel de Cervantes (1547-1616) Escritor espa\u00f1ol Mi \"Playlist\" en Youtube \u00b6 Una lista de mi m\u00fasica favorita, sin ning\u00fan orden, cuando escucho una canci\u00f3n que me gusta la a\u00f1ado ah\u00ed. https://www.youtube.com/playlist?list=PL2gdCKFmkidaN-hDS1x_RJYrBlzIKhCt4","title":"Listas"},{"location":"m%C3%BAsica/listas/#mi-playlist-en-youtube","text":"Una lista de mi m\u00fasica favorita, sin ning\u00fan orden, cuando escucho una canci\u00f3n que me gusta la a\u00f1ado ah\u00ed. https://www.youtube.com/playlist?list=PL2gdCKFmkidaN-hDS1x_RJYrBlzIKhCt4","title":"Mi \"Playlist\" en Youtube"}]}