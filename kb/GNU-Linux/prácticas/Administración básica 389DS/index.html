<!doctype html><html lang=es class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Bienvenido, mi nombre es Javier Antó y me dedico a las tecnologías de la información desde hace más de 30 años. Mis principales áreas de experiencia son la administración de servidores, infraestructura de internet, Odoo, Software Libre y creación de sitios web. Contacta conmigo para mas información o dale un vistazo a mi sitio web."><link href=https://www.javieranto.com/kb/GNU-Linux/pr%C3%A1cticas/Administraci%C3%B3n%20b%C3%A1sica%20389DS/ rel=canonical><meta name=author content="Javier Antó"><link rel="shortcut icon" href=../../../../assets/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-6.1.7"><title>Administración básica 389DS - Javier Antó</title><link rel=stylesheet href=../../../../assets/stylesheets/main.19753c6b.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.196e0c26.min.css><meta name=theme-color content=#2094f3><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel=stylesheet href=../../../../css/timeago.css><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","None","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview",document.location.pathname)})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=blue data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#servidor-ldap-389ds class=md-skip> Saltar a contenido </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Cabecera> <a href=https://www.javieranto.com title="Javier Antó" class="md-header-nav__button md-logo" aria-label="Javier Antó"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><path d="M255.03 261.65c6.25 6.25 16.38 6.25 22.63 0l11.31-11.31c6.25-6.25 6.25-16.38 0-22.63L253.25 192l35.71-35.72c6.25-6.25 6.25-16.38 0-22.63l-11.31-11.31c-6.25-6.25-16.38-6.25-22.63 0l-58.34 58.34c-6.25 6.25-6.25 16.38 0 22.63l58.35 58.34zm96.01-11.3l11.31 11.31c6.25 6.25 16.38 6.25 22.63 0l58.34-58.34c6.25-6.25 6.25-16.38 0-22.63l-58.34-58.34c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63L386.75 192l-35.71 35.72c-6.25 6.25-6.25 16.38 0 22.63zM624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Javier Antó </span> <span class="md-header-nav__topic md-ellipsis"> Administración básica 389DS </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Búsqueda placeholder=Búsqueda autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Limpiar data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Inicializando búsqueda </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/javierobcn/Notas/ title="Ir al repositorio" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> javierobcn/Notas </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class="md-tabs md-tabs--active" aria-label=Pestañas data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../.. class=md-tabs__link> Bienvenido </a> </li> <li class=md-tabs__item> <a href=../../../../consultoria/Internet/ class=md-tabs__link> Consultoria </a> </li> <li class=md-tabs__item> <a href=../../../ class="md-tabs__link md-tabs__link--active"> Kb </a> </li> <li class=md-tabs__item> <a href=../../../../m%C3%BAsica/listas/ class=md-tabs__link> Música </a> </li> <li class=md-tabs__item> <a href=../../../../contacto/Soporte%20t%C3%A9cnico/ class=md-tabs__link> Contacto </a> </li> <li class=md-tabs__item> <a href=../../../../blog/2013/1/16/Richard%20Stallman%2C%20DuckDuckGo%20y%20otras%20cosas/ class=md-tabs__link> Blog </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navegación data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://www.javieranto.com title="Javier Antó" class="md-nav__button md-logo" aria-label="Javier Antó"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><path d="M255.03 261.65c6.25 6.25 16.38 6.25 22.63 0l11.31-11.31c6.25-6.25 6.25-16.38 0-22.63L253.25 192l35.71-35.72c6.25-6.25 6.25-16.38 0-22.63l-11.31-11.31c-6.25-6.25-16.38-6.25-22.63 0l-58.34 58.34c-6.25 6.25-6.25 16.38 0 22.63l58.35 58.34zm96.01-11.3l11.31 11.31c6.25 6.25 16.38 6.25 22.63 0l58.34-58.34c6.25-6.25 6.25-16.38 0-22.63l-58.34-58.34c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63L386.75 192l-35.71 35.72c-6.25 6.25-6.25 16.38 0 22.63zM624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"/></svg> </a> Javier Antó </label> <div class=md-nav__source> <a href=https://github.com/javierobcn/Notas/ title="Ir al repositorio" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> javierobcn/Notas </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../.. class=md-nav__link> Bienvenido </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Consultoria <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Consultoria data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"></span> Consultoria </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../consultoria/Internet/ class=md-nav__link> Consultoría Internet </a> </li> <li class=md-nav__item> <a href=../../../../consultoria/Ordenadores%20Personales/ class=md-nav__link> Ordenadores personales </a> </li> <li class=md-nav__item> <a href=../../../../consultoria/Servidores/ class=md-nav__link> Servidores </a> </li> <li class=md-nav__item> <a href=../../../../consultoria/Empresas/ class=md-nav__link> Empresas, asociaciones y autónomos </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3 checked> <label class=md-nav__link for=nav-3> Kb <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Kb data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"></span> Kb </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ class=md-nav__link> Base de conocimiento </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2 type=checkbox id=nav-3-2 checked> <label class=md-nav__link for=nav-3-2> GNU Linux <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="GNU Linux" data-md-level=2> <label class=md-nav__title for=nav-3-2> <span class="md-nav__icon md-icon"></span> GNU Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Cursos%20Online%20de%20linux/ class=md-nav__link> Cursos de linux Online </a> </li> <li class=md-nav__item> <a href=../../D%C3%ADa%20de%20la%20libertad%20del%20software%20en%20Barcelona/ class=md-nav__link> Día de la libertad del software </a> </li> <li class=md-nav__item> <a href=../../Sobre%20Ubuntu/ class=md-nav__link> Sobre Ubuntu </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2-4 type=checkbox id=nav-3-2-4> <label class=md-nav__link for=nav-3-2-4> Command Line <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Command Line" data-md-level=3> <label class=md-nav__title for=nav-3-2-4> <span class="md-nav__icon md-icon"></span> Command Line </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Command%20Line/Compresi%C3%B3n%20y%20Descompresi%C3%B3n%20de%20ficheros/ class=md-nav__link> Compresión y Descompresión de ficheros </a> </li> <li class=md-nav__item> <a href=../../Command%20Line/Descargar%20una%20Playlist%20de%20Youtube%20como%20ficheros%20MP3/ class=md-nav__link> Descargar una Playlist de Youtube como ficheros MP3 </a> </li> <li class=md-nav__item> <a href=../../Command%20Line/Gesti%C3%B3n%20de%20paquetes/ class=md-nav__link> Gestión de paquetes </a> </li> <li class=md-nav__item> <a href=../../Command%20Line/Text%20Parsing/ class=md-nav__link> Text Parsing </a> </li> <li class=md-nav__item> <a href=../../Command%20Line/Vim%20masterclass/ class=md-nav__link> Vim masterclass </a> </li> <li class=md-nav__item> <a href=../../Command%20Line/command%20line/ class=md-nav__link> Command line </a> </li> <li class=md-nav__item> <a href=../../Command%20Line/script_bash_backups/ class=md-nav__link> Script para realizar backups de la maquina local a un servidor SFTP </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2-5 type=checkbox id=nav-3-2-5> <label class=md-nav__link for=nav-3-2-5> Compartir Ficheros <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Compartir Ficheros" data-md-level=3> <label class=md-nav__title for=nav-3-2-5> <span class="md-nav__icon md-icon"></span> Compartir Ficheros </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Compartir%20Ficheros/samba/ class=md-nav__link> Samba </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2-6 type=checkbox id=nav-3-2-6> <label class=md-nav__link for=nav-3-2-6> Networking <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Networking data-md-level=3> <label class=md-nav__title for=nav-3-2-6> <span class="md-nav__icon md-icon"></span> Networking </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Networking/Networking/ class=md-nav__link> Networking </a> </li> <li class=md-nav__item> <a href=../../Networking/Servidor%20DLNA/ class=md-nav__link> Servidor DLNA </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2-7 type=checkbox id=nav-3-2-7> <label class=md-nav__link for=nav-3-2-7> Seguridad <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Seguridad data-md-level=3> <label class=md-nav__title for=nav-3-2-7> <span class="md-nav__icon md-icon"></span> Seguridad </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Seguridad/Autenticaci%C3%B3n_vs_Autorizaci%C3%B3n/ class=md-nav__link> Autenticación vs Autorización </a> </li> <li class=md-nav__item> <a href=../../Seguridad/Gesti%C3%B3n%20de%20permisos%20en%20Linux/ class=md-nav__link> Gestión de permisos en Linux </a> </li> <li class=md-nav__item> <a href=../../Seguridad/Gesti%C3%B3n%20de%20usuarios%20en%20Linux/ class=md-nav__link> Gestión de usuarios en Linux </a> </li> <li class=md-nav__item> <a href=../../Seguridad/PAM/ class=md-nav__link> PAM </a> </li> <li class=md-nav__item> <a href=../../Seguridad/lets-encrypt/ class=md-nav__link> Lets encrypt </a> </li> <li class=md-nav__item> <a href=../../Seguridad/peerguardian/ class=md-nav__link> Peerguardian </a> </li> <li class=md-nav__item> <a href=../../Seguridad/selinux/ class=md-nav__link> Selinux </a> </li> <li class=md-nav__item> <a href=../../Seguridad/ssh/ class=md-nav__link> Ssh </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2-8 type=checkbox id=nav-3-2-8> <label class=md-nav__link for=nav-3-2-8> Sistema <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Sistema data-md-level=3> <label class=md-nav__title for=nav-3-2-8> <span class="md-nav__icon md-icon"></span> Sistema </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Sistema/Estructura%20de%20carpetas/ class=md-nav__link> Estructura de carpetas </a> </li> <li class=md-nav__item> <a href=../../Sistema/Systemd/ class=md-nav__link> Systemd </a> </li> <li class=md-nav__item> <a href=../../Sistema/kernel/ class=md-nav__link> Kernel </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2-9 type=checkbox id=nav-3-2-9> <label class=md-nav__link for=nav-3-2-9> Software <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Software data-md-level=3> <label class=md-nav__title for=nav-3-2-9> <span class="md-nav__icon md-icon"></span> Software </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Software/Exim/ class=md-nav__link> Exim </a> </li> <li class=md-nav__item> <a href=../../Software/Instalar%20Grafana/ class=md-nav__link> Instalar Grafana </a> </li> <li class=md-nav__item> <a href=../../Software/MailCatcher/ class=md-nav__link> MailCatcher </a> </li> <li class=md-nav__item> <a href=../../Software/PostgreSQL/ class=md-nav__link> Configurar PostgreSQL para permitir conexiones remotas </a> </li> <li class=md-nav__item> <a href=../../Software/Prometheus/ class=md-nav__link> Prometheus </a> </li> <li class=md-nav__item> <a href=../../Software/VestaCP/ class=md-nav__link> VestaCP </a> </li> <li class=md-nav__item> <a href=../../Software/comandos%20postgres/ class=md-nav__link> Comandos postgres </a> </li> <li class=md-nav__item> <a href=../../Software/rclone/ class=md-nav__link> Rclone </a> </li> <li class=md-nav__item> <a href=../../Software/terminator/ class=md-nav__link> Terminator </a> </li> <li class=md-nav__item> <a href=../../Software/wordpress/ class=md-nav__link> Wordpress </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2-9-11 type=checkbox id=nav-3-2-9-11> <label class=md-nav__link for=nav-3-2-9-11> mkDocs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=mkDocs data-md-level=4> <label class=md-nav__title for=nav-3-2-9-11> <span class="md-nav__icon md-icon"></span> mkDocs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Software/mkDocs/ class=md-nav__link> MkDocs </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/changelog/ class=md-nav__link> Changelog </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/creating-your-site/ class=md-nav__link> Creating your site </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/customization/ class=md-nav__link> Customization </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/data-privacy/ class=md-nav__link> Data privacy </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/deprecations/ class=md-nav__link> Deprecations </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/getting-started/ class=md-nav__link> Getting started </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/insiders/ class=md-nav__link> <span hidden>Insiders</span> :logo: :material-plus: :octicons-heart-fill-24:{: .tx-heart } </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/publishing-your-site/ class=md-nav__link> Publishing your site </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/upgrading/ class=md-nav__link> Upgrading </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2-9-11-12 type=checkbox id=nav-3-2-9-11-12> <label class=md-nav__link for=nav-3-2-9-11-12> Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Reference data-md-level=5> <label class=md-nav__title for=nav-3-2-9-11-12> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Software/mkDocs/reference/abbreviations/ class=md-nav__link> Abbreviations </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/reference/admonitions/ class=md-nav__link> Admonitions </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/reference/buttons/ class=md-nav__link> Buttons </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/reference/code-blocks/ class=md-nav__link> Code blocks </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/reference/content-tabs/ class=md-nav__link> Content tabs </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/reference/data-tables/ class=md-nav__link> Data tables </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/reference/footnotes/ class=md-nav__link> Footnotes </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/reference/formatting/ class=md-nav__link> Formatting </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/reference/icons-emojis/ class=md-nav__link> Icons + Emojis </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/reference/images/ class=md-nav__link> Images </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/reference/lists/ class=md-nav__link> Lists </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/reference/mathjax/ class=md-nav__link> MathJax </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/reference/meta-tags/ class=md-nav__link> Meta tags </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/reference/variables/ class=md-nav__link> Variables </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2-9-11-13 type=checkbox id=nav-3-2-9-11-13> <label class=md-nav__link for=nav-3-2-9-11-13> Setup <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Setup data-md-level=5> <label class=md-nav__title for=nav-3-2-9-11-13> <span class="md-nav__icon md-icon"></span> Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Software/mkDocs/setup/adding-a-comment-system/ class=md-nav__link> Adding a comment system </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/setup/adding-a-git-repository/ class=md-nav__link> Adding a git repository </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/setup/changing-the-colors/ class=md-nav__link> Changing the colors </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/setup/changing-the-fonts/ class=md-nav__link> Changing the fonts </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/setup/changing-the-language/ class=md-nav__link> Changing the language </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/setup/changing-the-logo-and-icons/ class=md-nav__link> Changing the logo and icons </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/setup/setting-up-navigation/ class=md-nav__link> Setting up navigation </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/setup/setting-up-site-analytics/ class=md-nav__link> Setting up site analytics </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/setup/setting-up-site-search/ class=md-nav__link> Setting up site search </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/setup/setting-up-the-footer/ class=md-nav__link> Setting up the footer </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/setup/setting-up-the-header/ class=md-nav__link> Setting up the header </a> </li> <li class=md-nav__item> <a href=../../Software/mkDocs/setup/setting-up-versioning/ class=md-nav__link> Setting up versioning </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2-10 type=checkbox id=nav-3-2-10> <label class=md-nav__link for=nav-3-2-10> Hardware <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Hardware data-md-level=3> <label class=md-nav__title for=nav-3-2-10> <span class="md-nav__icon md-icon"></span> Hardware </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../hardware/impresoras/ class=md-nav__link> Impresoras </a> </li> <li class=md-nav__item> <a href=../../hardware/raspberry/ class=md-nav__link> Raspberry </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2-11 type=checkbox id=nav-3-2-11 checked> <label class=md-nav__link for=nav-3-2-11> Prácticas <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Prácticas data-md-level=3> <label class=md-nav__title for=nav-3-2-11> <span class="md-nav__icon md-icon"></span> Prácticas </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Administración básica 389DS <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Administración básica 389DS </a> <nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Tabla de contenidos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#servidor-ldap-389ds class=md-nav__link> Servidor LDAP 389DS </a> <nav class=md-nav aria-label="Servidor LDAP 389DS"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuracion-previa class=md-nav__link> Configuración previa </a> </li> <li class=md-nav__item> <a href=#servidor class=md-nav__link> Servidor </a> <nav class=md-nav aria-label=Servidor> <ul class=md-nav__list> <li class=md-nav__item> <a href=#instalacion class=md-nav__link> Instalación </a> </li> <li class=md-nav__item> <a href=#configuracion-inicial class=md-nav__link> Configuración inicial </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#abrir-puertos-en-el-firewall class=md-nav__link> Abrir puertos en el Firewall </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#administracion-basica-del-directorio class=md-nav__link> Administración básica del directorio: </a> <nav class=md-nav aria-label="Administración básica del directorio:"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#agregar-informacion-procedimiento-generico class=md-nav__link> Agregar información - Procedimiento genérico </a> </li> <li class=md-nav__item> <a href=#ejercicios-agregar-datos class=md-nav__link> Ejercicios Agregar Datos </a> </li> <li class=md-nav__item> <a href=#buscar-informacion-ldapsearch class=md-nav__link> Buscar información - ldapsearch </a> </li> <li class=md-nav__item> <a href=#borrar-y-modificar-informacion-ldapdelete-y-ldapmodify class=md-nav__link> Borrar y modificar información ldapdelete y ldapmodify </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#acis class=md-nav__link> ACIs </a> </li> <li class=md-nav__item> <a href=#login-ldap-desde-cliente-con-sssd class=md-nav__link> Login LDAP desde cliente con SSSD </a> <nav class=md-nav aria-label="Login LDAP desde cliente con SSSD"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#introduccion class=md-nav__link> Introducción </a> </li> <li class=md-nav__item> <a href=#configuracion-de-sssd class=md-nav__link> Configuración de SSSD: </a> <nav class=md-nav aria-label="Configuración de SSSD:"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#seccion-sssd class=md-nav__link> Sección [sssd] </a> </li> <li class=md-nav__item> <a href=#seccion-domainxxx class=md-nav__link> Sección [domain/xxx] </a> </li> <li class=md-nav__item> <a href=#secciones-opcionales-pam-y-o-nss class=md-nav__link> Secciones opcionales [pam] y / o [nss] </a> </li> <li class=md-nav__item> <a href=#ejemplo-1-un-servidor-ldap-como-proveedor-de-autenticacion-e-identidad class=md-nav__link> Ejemplo 1 (un servidor LDAP como proveedor de autenticación e identidad) </a> </li> <li class=md-nav__item> <a href=#example-2-a-kdc-server-as-authentication-provider-and-a-ldap-server-as-identity-provider class=md-nav__link> Example 2 (a KDC server as authentication provider and a LDAP server as identity provider) </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Autenticaci%C3%B3n%20e%20Identificaci%C3%B3n%20de%20usuarios%20con%20LDAP/ class=md-nav__link> Autenticación/Identificación de usuarios con LDAP </a> </li> <li class=md-nav__item> <a href=../Compartir%20ficheros%20con%20NFSv4/ class=md-nav__link> Compartir ficheros con NFSv4 </a> </li> <li class=md-nav__item> <a href=../Servidor%20LDAP%20389DS/ class=md-nav__link> Servidor LDAP 389DS </a> </li> <li class=md-nav__item> <a href=../Virtual%20Box%20Image%20Fedora/ class=md-nav__link> Virtual Box Image Fedora </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-3 type=checkbox id=nav-3-3> <label class=md-nav__link for=nav-3-3> Otros <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Otros data-md-level=2> <label class=md-nav__title for=nav-3-3> <span class="md-nav__icon md-icon"></span> Otros </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Otros/Contabilidad/ class=md-nav__link> Contabilidad </a> </li> <li class=md-nav__item> <a href=../../../Otros/Servidores%20DNS%20p%C3%BAblicos/ class=md-nav__link> Servidores DNS públicos </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-4 type=checkbox id=nav-3-4> <label class=md-nav__link for=nav-3-4> Programación <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Programación data-md-level=2> <label class=md-nav__title for=nav-3-4> <span class="md-nav__icon md-icon"></span> Programación </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/Expresiones%20regulares/ class=md-nav__link> Expresiones regulares </a> </li> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/Hackers%20%26%20Developers/ class=md-nav__link> Hackers & Developers </a> </li> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/SQLite/ class=md-nav__link> SQLite </a> </li> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/eclipse/ class=md-nav__link> Eclipse </a> </li> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/git/ class=md-nav__link> git </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-4-6 type=checkbox id=nav-3-4-6> <label class=md-nav__link for=nav-3-4-6> Python <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Python data-md-level=3> <label class=md-nav__title for=nav-3-4-6> <span class="md-nav__icon md-icon"></span> Python </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/Python/Acerca%20de%20Python/ class=md-nav__link> Acerca de Python </a> </li> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/Python/PIP/ class=md-nav__link> Pip (administrador de paquetes) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-4-7 type=checkbox id=nav-3-4-7> <label class=md-nav__link for=nav-3-4-7> Odoo <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Odoo data-md-level=3> <label class=md-nav__title for=nav-3-4-7> <span class="md-nav__icon md-icon"></span> Odoo </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/odoo/Contabilidad%20en%20Odoo/ class=md-nav__link> Tips Odoo / Contabilidad </a> </li> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/odoo/Entorno%20desarrollo/ class=md-nav__link> Entorno desarrollo </a> </li> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/odoo/Instalar%20Odoo%2012%20en%20un%20container%20Docker/ class=md-nav__link> Instalar Odoo 12 en un container Docker </a> </li> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/odoo/Instalar%20Odoo%2012/ class=md-nav__link> Instalar Odoo 12 </a> </li> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/odoo/Internationalization/ class=md-nav__link> Internacionalización </a> </li> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/odoo/M%C3%B3dulos%20Interesantes%20y%20repositorios%20GIT/ class=md-nav__link> Módulos Interesantes / repositorios git </a> </li> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/odoo/Odoo%20Customize/ class=md-nav__link> Odoo Customize </a> </li> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/odoo/Odoo%20con%20Apache%20como%20reverse%20proxy/ class=md-nav__link> Odoo con Apache como reverse proxy </a> </li> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/odoo/Programar%20copias%20autom%C3%A1ticas%20de%20ODOO%20Versi%C3%B3n%20f%C3%A1cil/ class=md-nav__link> Programar copias automáticas de ODOO Versión fácil </a> </li> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/odoo/Tips%20Administracion%20Odoo/ class=md-nav__link> Tips Administracion Odoo </a> </li> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/odoo/Tips%20programaci%C3%B3n%20ODOO/ class=md-nav__link> Tips programación ODOO </a> </li> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/odoo/fichero%20odoo-conf/ class=md-nav__link> Fichero odoo conf </a> </li> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/odoo/modelos/ class=md-nav__link> Creación de Modelos </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-4-8 type=checkbox id=nav-3-4-8> <label class=md-nav__link for=nav-3-4-8> Php <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Php data-md-level=3> <label class=md-nav__title for=nav-3-4-8> <span class="md-nav__icon md-icon"></span> Php </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Programaci%C3%B3n/php/Entorno%20de%20desarrollo/ class=md-nav__link> Entorno de desarrollo para php (NetBeans) </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-5 type=checkbox id=nav-3-5> <label class=md-nav__link for=nav-3-5> SEO <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=SEO data-md-level=2> <label class=md-nav__title for=nav-3-5> <span class="md-nav__icon md-icon"></span> SEO </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../SEO/Bing%20tiene%20sus%20propias%20webmaster%20Tools/ class=md-nav__link> Bing tiene sus propias webmaster Tools </a> </li> <li class=md-nav__item> <a href=../../../SEO/Gu%C3%ADa%20para%20principiantes%20sobre%20optimizaci%C3%B3n%20para%20motores%20de%20b%C3%BAsqueda/ class=md-nav__link> Guía para principiantes sobre optimización para motores de búsqueda </a> </li> <li class=md-nav__item> <a href=../../../SEO/Posicionamiento%20en%20Google%20%E2%80%93%20Page%20Rank/ class=md-nav__link> Posicionamiento en Google – Page Rank </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-6 type=checkbox id=nav-3-6> <label class=md-nav__link for=nav-3-6> Virtualización <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Virtualización data-md-level=2> <label class=md-nav__title for=nav-3-6> <span class="md-nav__icon md-icon"></span> Virtualización </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Virtualizaci%C3%B3n/Docker/ class=md-nav__link> Docker </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-7 type=checkbox id=nav-3-7> <label class=md-nav__link for=nav-3-7> Windows <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Windows data-md-level=2> <label class=md-nav__title for=nav-3-7> <span class="md-nav__icon md-icon"></span> Windows </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../windows/Cambiar%20el%20puerto%20de%20%E2%80%9CEscritorio%20Remoto%E2%80%9D%20en%20Windows%20Server/ class=md-nav__link> Cambiar el puerto de “Escritorio Remoto” en Windows Server </a> </li> <li class=md-nav__item> <a href=../../../windows/Consulta%20MySQL%20traspaso%20Windows%20-%3E%20Linux/ class=md-nav__link> Consulta MySQL traspaso Windows > Linux </a> </li> <li class=md-nav__item> <a href=../../../windows/Transferir%20certificado%20SSL%20de%20windows%20a%20Linux%20Apache/ class=md-nav__link> Transferir certificado SSL de windows a Linux Apache </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-7-4 type=checkbox id=nav-3-7-4> <label class=md-nav__link for=nav-3-7-4> IIS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=IIS data-md-level=3> <label class=md-nav__title for=nav-3-7-4> <span class="md-nav__icon md-icon"></span> IIS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../windows/IIS/IIS%207.5%2C%20redirigir%20una%20URL%20con%20codigo%20de%20error%20301%20RedirectPermanent/ class=md-nav__link> IIS 7.5, redirigir una URL con codigo de error 301 RedirectPermanent </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-7-5 type=checkbox id=nav-3-7-5> <label class=md-nav__link for=nav-3-7-5> Software <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Software data-md-level=3> <label class=md-nav__title for=nav-3-7-5> <span class="md-nav__icon md-icon"></span> Software </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../windows/Software/Dotnetnuke/ class=md-nav__link> Dotnetnuke </a> </li> <li class=md-nav__item> <a href=../../../windows/Software/SQLServer/ class=md-nav__link> SQLServer </a> </li> <li class=md-nav__item> <a href=../../../windows/Software/Windirstat%20para%20medir%20el%20espacio%20del%20sistema%20de%20archivos%20windows/ class=md-nav__link> Windirstat para medir el espacio del sistema de archivos windows </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Música <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Música data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"></span> Música </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../m%C3%BAsica/listas/ class=md-nav__link> Listas </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Contacto <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Contacto data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"></span> Contacto </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../contacto/Soporte%20t%C3%A9cnico/ class=md-nav__link> Soporte técnico </a> </li> <li class=md-nav__item> <a href=../../../../contacto/Nextcloud/ class=md-nav__link> Nextcloud </a> </li> <li class=md-nav__item> <a href=../../../../contacto/teamviewer/ class=md-nav__link> Asistencia remota </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> Blog <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Blog data-md-level=1> <label class=md-nav__title for=nav-6> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../blog/2013/1/16/Richard%20Stallman%2C%20DuckDuckGo%20y%20otras%20cosas/ class=md-nav__link> [16/01/2013] Richard Stallman, DuckDuckGo y otras cosas </a> </li> <li class=md-nav__item> <a href=../../../../blog/2013/1/15/Aaron%20Swartz%2C%20conciencia%20c%C3%ADvica%20y%20activismo/ class=md-nav__link> [15/01/2013] Aaron Swartz, conciencia cívica y activismo. </a> </li> <li class=md-nav__item> <a href=../../../../blog/2010/5/11/Certificado%20Microsoft%20en%20SQL%20Server%202008/ class=md-nav__link> [11/05/2010] Certificado Microsoft en SQL Server 2008 </a> </li> <li class=md-nav__item> <a href=../../../../blog/2009/10/26/Microsoft%20se%20acerca%20al%20Open%20Source/ class=md-nav__link> [26/10/2009] Microsoft se acerca al Open Source </a> </li> <li class=md-nav__item> <a href=../../../../blog/2008/12/30/Google%20trasladar%C3%A1%20a%20mar%20abierto%20sus%20centros%20de%20datos/ class=md-nav__link> [30/12/2008] Google trasladará a mar abierto sus centros de datos </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Tabla de contenidos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#servidor-ldap-389ds class=md-nav__link> Servidor LDAP 389DS </a> <nav class=md-nav aria-label="Servidor LDAP 389DS"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuracion-previa class=md-nav__link> Configuración previa </a> </li> <li class=md-nav__item> <a href=#servidor class=md-nav__link> Servidor </a> <nav class=md-nav aria-label=Servidor> <ul class=md-nav__list> <li class=md-nav__item> <a href=#instalacion class=md-nav__link> Instalación </a> </li> <li class=md-nav__item> <a href=#configuracion-inicial class=md-nav__link> Configuración inicial </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#abrir-puertos-en-el-firewall class=md-nav__link> Abrir puertos en el Firewall </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#administracion-basica-del-directorio class=md-nav__link> Administración básica del directorio: </a> <nav class=md-nav aria-label="Administración básica del directorio:"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#agregar-informacion-procedimiento-generico class=md-nav__link> Agregar información - Procedimiento genérico </a> </li> <li class=md-nav__item> <a href=#ejercicios-agregar-datos class=md-nav__link> Ejercicios Agregar Datos </a> </li> <li class=md-nav__item> <a href=#buscar-informacion-ldapsearch class=md-nav__link> Buscar información - ldapsearch </a> </li> <li class=md-nav__item> <a href=#borrar-y-modificar-informacion-ldapdelete-y-ldapmodify class=md-nav__link> Borrar y modificar información ldapdelete y ldapmodify </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#acis class=md-nav__link> ACIs </a> </li> <li class=md-nav__item> <a href=#login-ldap-desde-cliente-con-sssd class=md-nav__link> Login LDAP desde cliente con SSSD </a> <nav class=md-nav aria-label="Login LDAP desde cliente con SSSD"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#introduccion class=md-nav__link> Introducción </a> </li> <li class=md-nav__item> <a href=#configuracion-de-sssd class=md-nav__link> Configuración de SSSD: </a> <nav class=md-nav aria-label="Configuración de SSSD:"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#seccion-sssd class=md-nav__link> Sección [sssd] </a> </li> <li class=md-nav__item> <a href=#seccion-domainxxx class=md-nav__link> Sección [domain/xxx] </a> </li> <li class=md-nav__item> <a href=#secciones-opcionales-pam-y-o-nss class=md-nav__link> Secciones opcionales [pam] y / o [nss] </a> </li> <li class=md-nav__item> <a href=#ejemplo-1-un-servidor-ldap-como-proveedor-de-autenticacion-e-identidad class=md-nav__link> Ejemplo 1 (un servidor LDAP como proveedor de autenticación e identidad) </a> </li> <li class=md-nav__item> <a href=#example-2-a-kdc-server-as-authentication-provider-and-a-ldap-server-as-identity-provider class=md-nav__link> Example 2 (a KDC server as authentication provider and a LDAP server as identity provider) </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href="https://github.com/javierobcn/Notas/edit/master/docs/kb/GNU-Linux/prácticas/Administración básica 389DS.md" title="Editar esta página" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1>Administración básica 389DS</h1> <h2 id=servidor-ldap-389ds>Servidor LDAP 389DS<a class=headerlink href=#servidor-ldap-389ds title="Permanent link">&para;</a></h2> <h3 id=configuracion-previa>Configuración previa<a class=headerlink href=#configuracion-previa title="Permanent link">&para;</a></h3> <p>Los pasos a seguir para configurar un servidor 389DS que contenga la información necesaria para <a href=/LPIC3/2-Autenticaci%C3%B3n-Autorizaci%C3%B3n/Autenticaci%C3%B3n_vs_Autorizaci%C3%B3n/#autenticacion-vs-autorizacion>autenticar/identificar</a> usuarios (y los pasos a seguir para configurar un cliente LDAP para que esos usuarios accedan a ella) se detallan a continuación.</p> <p>Deberás utilizar dos máquinas virtuales Fedora: una de ellas hará de servidor LDAP y la otra hará de cliente. Asegúrate que ambas tengan, además de una tarjeta en modo NAT para poder conectarse a Internet, una tarjeta en modo red interna con una <a href=/LPIC1/Networking/#establecer-una-configuracion-dinamica-de-forma-permanente>IP fija</a> (en este documento supondremos que tienen la 192.168.0.1 y 192.168.0.2, respectivamente) y de que la máquina que haga de cliente tenga instalado un entorno gráfico con navegador y gestor de ficheros (bastará hacer <code>sudo dnf install gdm firefox nautilus</code> para ello).</p> <h3 id=servidor>Servidor<a class=headerlink href=#servidor title="Permanent link">&para;</a></h3> <p>A. Antes de instalar nada, a la máquina que hará de servidor LDAP dale un nombre que tenga una estructura similar a un nombre DNS (por ejemplo, en este documento usaremos el de <code>miservidor.midominio.local</code>). De hecho, la infrastructura básica de una red con servidor LDAP integrado se debería completar con un servidor DNS más pronto que tarde (para, entre otras cosas, no tener que configurar el archivo <code>/etc/hosts</code> de los clientes individualmente -como tendremos que hacer más adelante-), pero para no complicar más las cosas, realiza estos tres simples pasos y ya está:</p> <ol> <li> <p>-Ejecuta el comando <code>sudo hostnamectl set-hostname miservidor.midominio.local</code>. Esto hará que el fichero <code>/etc/hostname</code> contenga el nuevo nombre “tipo DNS” de nuestro servidor (lo puedes comprobar también con el comando <code>hostnamectl status</code>).</p> </li> <li> <p>Modifica manualmente el archivo <code>/etc/hosts</code> para que las IP 127.0.0.1 (v4) y ::1 (v6) allá indicadas estén asociadas a “miservidor.midominio.local” en vez de a “localhost”.</p> </li> <li> <p>Una vez hecho estos dos pasos, reinicia la máquina.</p> </li> </ol> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>Que el nombre del servidor sea de tipo DNS es necesario para que las entradas “dc” de nuestro servidor LDAP se correspondan con los subdominios de dicho nombre. Es decir, al generar la base de datos de nuestras entradas en forma de árbol invertido, todas ellas deberán colgar de un DN base que en nuestro caso será <code>“dc=midominio,dc=local”</code>.</p> </div> <h4 id=instalacion>Instalación<a class=headerlink href=#instalacion title="Permanent link">&para;</a></h4> <p>Instala el software correspondiente a un servidor LDAP básico: <div class=highlight><pre><span></span><code>sudo dnf install 389-ds-base
</code></pre></div></p> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>Otros paquetes interesantes són "389-admin" (el cual representa un "servidor de administración", útil para gestionar determinadas tareas relacionadas con el funcionamiento del servidor LDAP -como pararlo, reiniciarlo, hacer copias de seguridad, etc-) y/o "389-console" (el cual incluye a su vez los paquetes "389-ds-console" y "389-admin-console" y sirve para, respectivamente, ofrecer una interfaz gráfica (basada en Java) para trabajar contra el directorio alojado en el servidor LDAP como un cliente LDAP estándar -es decir, para gestionar la información guardada:añadiendo/eliminando/modificando nodos, etc- o bien para trabajar contra el servidor de administración anteriormente mencionado ordenándole las tareas administrativas de forma gráfica). También existe el paquete "389-ds" (el cual incluye todos los paquetes anteriores).</p> </div> <h4 id=configuracion-inicial>Configuración inicial<a class=headerlink href=#configuracion-inicial title="Permanent link">&para;</a></h4> <p>Configura el servidor LDAP propiamente dicho para poderlo empezar a usar. Para ello primero crea un fichero INF (llamémoslo "fichero.inf"), el cual tendrá un contenido ya predeterminado, mediante el comando <code>dscreate create-template /ruta/fichero.inf</code> . Este fichero INF representa un "molde" que podremos editar a conveniencia con cualquier editor de texto para asignar los valores deseados a las distintas directivas allí presentes. Estas directivas están perfectamente documentadas dentro del propio fichero y son bastante obvias; de todas maneras, como todas ellas ya tienen un valor por defecto asignado, nosotros tan solo necesitaremos editar unas pocas. En concreto, deberemos tener las siguientes directivas escritas como sigue:</p> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>Hay que tener en cuenta que si se desea cambiar el valor por defecto de una directiva, además de modificar el valor en sí, para activar el cambio efectivamente se tendrá de borrar el punto y coma que hay al inicio de la directiva en cuestión.</p> </div> <ul> <li><strong>Directiva instance_name=miservidor</strong>: Para indicar que la instancia del servidor 389 a crear se llamará "miservidor" (aunque podría tener cualquier otro nombre). En un mismo ordenador podemos tener diferentes instancias del servidor 389DS, cada una independiente de la otra, gestionando cada una su/s propio/s directorio/s estancos y administrándose de forma individual. Cada instancia tendrá que definirse en un fichero INF diferente</li> <li><strong>Directiva root_dn = cn=admin</strong> : Indica que el "common name" del usuario administrador del directorio manejado por la instancia en cuestión será "cn=admin".Por defecto este usuario es el único que puede hacer tanto modificaciones como consultas en los directorios de servidores 389DS.</li> <li><strong>Directiva root_password = 12345678</strong> : Indica que la contraseña del usuario administrador anterior será "12345678". Si no se quisiera escribir la contraseña en texto plano directamente en el fichero INF, existe la posibilidad de generar previamente un hash adecuado mediante el comando pwdhash contraseña. Mínimo 8 caracteres y entonces asignar el valor mostrado por pantalla tal cual a esta directiva</li> <li><strong>Directiva create_suffix_entry = true</strong> : Indica que se desea crear una entrada raíz en el directorio </li> <li><strong>Directiva suffix = dc=midominio,dc=local</strong> : Indica que el nombre de la entrada raíz del directorio a crear será "dc=midominio,dc=local"</li> </ul> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>NOTA: El fichero INF contiene, tal como hemos dicho, muchas otras directivas que no será necesario editar si no lo deseamos porque ya deberían tener asignado el valor adecuado , como por ejemplo full_machine_name (cuyo valor debería ser el nombre completo de la máquina establecido en el primer apartado, es decir, en nuestro caso: "miservidor.midominio.local"), port (cuyo valor por defecto es 389; si se indica el valor 0 se estaría cerrando el puerto, esto es, deshabilitando la posibilidad de atender conexiones no encriptadas), secure_port (cuyo valor por defecto es 636; si se indica el valor 0 se estaría cerrando el puerto, esto es, deshabilitando la posibilidad de atender conexiones encriptadas via TLS) o self_sign_cert (cuyo valor por defecto, True, activa el uso de TLS para asegurar las comunicaciones por red con los clientes, y lo hace mediante certificados autofirmados), entre otras. Además, son interesantes reconocer diversas directivas que apuntan a rutas de carpetas relevantes, como "backup_dir", "cert_dir", "config_dir" o "db_dir" (esta última es la que aloja los ficheros que contienen físicamente los datos del directorio)</p> </div> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>NOTA: Las líneas create_suffix_entry y suffix del fichero INF se encuentran bajo una sección titulada <code>[backend-userroot]</code> Los "backend" son los tipos de bases de datos que el servidor 389DS soporta para almacenar de forma permanente la información contenida en los directorios que gestiona; en este caso, la sección indica que se creará un backend llamado "userroot". Puede haber muchos tipos de backends, por lo que en 389DS se utiliza un mecanismo de plugins para solamente utilizar el/los plugin/s necesario/s para gestionar el/los backend/s correspondiente/s. El tipo de backend empleado por defecto por 389DS es la base de datos de tipo LDBM, que es una variante de las de tipo BerkeleyDB (las cuales todas ellas son implementadas físicamente en forma de ficheros en disco). En el archivo "dse.ldif" (ver siguiente apartado) se encuentra la información sobre la configuración del backend asociado a un directorio (bajo la sección <code>dn:dc=midominio,dc=local, cn=mapping tree, cn=config</code>) y sobre la propia configuración de ese backend elegido, bajo la sección dc: <code>cn=ldbm database,cn=plugins,cn=config</code> y <code>dc: cn=config,cn=ldbm database,cn=plugins,cn=config</code> Para más información consultar <a href=https://www.port389.org/docs/389ds/design/architecture.html>https://www.port389.org/docs/389ds/design/architecture.html</a> y también el cuadro siguiente:</p> <p><img alt=Screenshot src=media/ldap1.jpg></p> </div> <p>A continuación utiliza el fichero INF generado en el paso anterior como entrada en el siguiente comando : <code>sudo dscreate from-file /ruta/fichero.inf</code></p> <p>Este comando establece realmente la configuración de la instancia "miservidor" en un formato que el servidor LDAP entenderá (concretamente, genera el archivo de configuración <code>/etc/dirsrv/slapd-miservidor/dse.ldif</code>, el cual contiene todas las directivas indicadas en el fichero INF anterior -con alguna variación en su nombre- además de muchas otras más; todas las directivas presentes en este fichero <code>dse.ldif</code> tienen la particularidad de estar escritas en un formato de texto llamado LDIF, el cual estudiaremos más adelante pero básicamente lo que hay que saber ahora es que esto significa que este fichero puede ser modificado igualmente mediante cualquier editor de texto estándar).</p> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>Una manera de editar el fichero "dse.ldif" es, en vez de utilitzar un editor de texto genérico, utilizar el comando específico de 389DS llamado dsconf; concretamente, para cambiar la contraseña del usuario "admin" usando esta herramienta se podría hacer (de forma interactiva y, eso sí, conociendo la contraseña previa) así: dsconf -D "cn=admin" miservidor directory_manager password_change . Otra manera sería, ya que el fichero "dse.ldif" no deja de ser un fichero LDIF estándar, utilizar los comandos estándar de edición de ficheros LDIF como es principalmente el comando ldapmodify, que veremos pronto (<a href=https://directory.fedoraproject.org/docs/389ds/howto/howto-resetdirmgrpassword.html#use-ldapmodify>https://directory.fedoraproject.org/docs/389ds/howto/howto-resetdirmgrpassword.html#use-ldapmodify</a> )</p> </div> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>Otra manera alternativa de configurar el servidor LDAP es usando el comando <code>sudo dscreate interactive</code>, el cual muestra un asistente en modo texto que ofrece una serie de preguntas interactivas esenciales (como el nombre de la instancia a crear, el puerto de escucha, si queremos activar TLS, etc) y, a partir de la respuesta dada en ellas, genera automáticamente el fichero "dse.ldif" adecuado. No obstante, deberemos acabar editando el archivo "dse.ldif" a mano para poder adaptarlo más específicamente a nuestras circunstancias (el asistente no pregunta todas las preguntas que necesitaríamos contestar), así que realmente no es de mucha ayuda.</p> </div> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>NOTA: Es posible crear otro backend (en principio del mismo tipo LDBM) separado del backend por defecto "userroot" para almacenar otro directorio diferente en la misma instancia. Eso se puede hacer así: </p> <div class=highlight><pre><span></span><code>sudo dsconf -D &quot;cn=admin&quot; -W miservidor backend create –suffix dc=otrodominio,dc=local --be-name nombreBackend
</code></pre></div> <p>Los cambios se verán reflejados, efectivamente, en el archivo "dse.ldif" d) Comprobar que, efectivamente, la instancia recién configurada haya sido arrancada correctamente mediante el comando sudo systemctl status dirsrv@miservidor (detrás de la arroba ha de ir el nombre de la instancia indicado en el asistente anterior...si no lo hemos modificado, por defecto este nombre se corresponderá con el nombre corto de la máquina). A partir de aquí, la instancia se podrá gestionar como cualquier otro demonio del sistema con systemctl start, systemctl stop, systemctl enable, systemctl disable,...</p> </div> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>NOTA: También se puede utilizar el comando <code>sudo dsctl miservidor status</code> para comprobar el estado de funcionamiento de la instancia indicada. El comando dsctl se puede emplear como sustituto de systemctl ya que tiene opciones para iniciar, parar, reiniciar, etc la instancia en cuestión. Una opción muy interesante (y peligrosa!) es la de eliminar completamente la instancia (y su/s directorio/s correspondiente/s), la cual es <code>sudo dsctl miservidor remove --do-it</code> </p> </div> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>NOTA: At installation, Directory Server contains the following: a server front-end responsible for network communications, plug-ins for server functions, such as access control and replication, a basic directory tree containing server-related data (defined in "dse.ldif" file) and a database back-end plug-in responsible for managing the actual storage and retrieval of server data.</p> </div> <h3 id=abrir-puertos-en-el-firewall>Abrir puertos en el Firewall<a class=headerlink href=#abrir-puertos-en-el-firewall title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code>:::bash
systemctl status firewalld
systemctl enable firewalld
systemctl start firewalld
firewall-cmd --permanent --add-port={389/tcp,636/tcp}
firewall-cmd --reload
</code></pre></div> <h2 id=administracion-basica-del-directorio>Administración básica del directorio:<a class=headerlink href=#administracion-basica-del-directorio title="Permanent link">&para;</a></h2> <p>Ya tenemos el servidor LDAP funcionando y escuchando en el puerto 389 TCP. Ahora deberíamos generar la estructura de entradas de nuestro directorio y rellenarlas de datos. </p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>Comprueba desde el servidor, con el comando <code>ss -tln</code>, como aparece el socket escuchando en ese puerto</p> </div> <h3 id=agregar-informacion-procedimiento-generico>Agregar información - Procedimiento genérico<a class=headerlink href=#agregar-informacion-procedimiento-generico title="Permanent link">&para;</a></h3> <p>La forma más básica de añadir información a un directorio cualquiera es utilizar ficheros de texto cuyo contenido está escrito en el formato LDIF (LDAP Data Interchange Format). El formato básico de una entrada es...: </p> <div class=highlight><pre><span></span><code>:::text
# comentario 
dn: &lt;nombre global único&gt; 
    &lt;atributo&gt;: &lt;valor&gt; 
    &lt;atributo&gt;: &lt;valor&gt; 
    ...
</code></pre></div> <p>...donde los atributos indicados deben pertenecer a algún objeto perteneciente a algún "schema" previamente reconocido por el servidor para que sean interpretados correctamente (por suerte, todos los objetos que utilizaremos en este documento están definidos en "schemas" que ya vienen incluidos de serie en cualquier software de tipo servidor LDAP actual).</p> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>En el caso de utilizar, por ejemplo, el servidor 389DS, los objetos que emplearemos a lo largo de este documento están definidos en el fichero <code>/usr/share/dirsrv/schema/00core.ldif</code> (el de tipo "organizationalUnit") y <code>/usr/share/dirsrv/schema/10rfc2307.ldif</code> (los de tipo "posixGroup", "posixAccount" y "shadowAccount"), etc Un objeto que también podríamos haber utilizado (pero no lo hemos hecho) es el objeto "hostObject" (definido en <code>/usr/share/dirsrv/schema/60nss-ldap.ldif</code>), cuyo atributo más importante es "host" (el valor del cual puede ser una IP o un nombre DNS) y que permitiría alojar en el directorio información sobre las máquinas que formarían un dominio (y, eventualmente, aplicarles reglas de acceso, etc) </p> </div> <p>Entre dos entradas consecutivas escritas en un archivo LDIF debe existir siempre una línea en blanco. Por otro lado, si una línea es demasiado larga, podemos repartir su contenido entre varias, siempre que las líneas de continuación comiencen con un carácter de tabulación o un espacio en blanco. </p> <p>Una vez creados estos ficheros, para añadirlos al directorio (incluso con el servidor en marcha) podemos utilizar el comando <code>ldapadd</code> (disponible al instalar el paquete llamado “ldap-utils” -en Ubuntu-, o"openldap-clients" -en Fedora- aunque en el caso de haber instalado el paquete "389-ds-base" ya se habrá instalado automáticamente como dependencia). La mayoría de veces necesitaremos indicar los siguientes parámetros: </p> <ul> <li> <p><strong>-H ldap://nomDnsServidor:nºpuerto</strong>: Indica el servidor LDAP (y, opcionalmente, el número de puerto) contra el cual se van a ejecutar. Si el servidor LDAP estuviera funcionando en la misma máquina donde se ejecuta el comando <code>ldapadd</code> (o cualquier otro de su familia:<code>ldapsearch</code>, <code>ldapmodify</code>, etc), normalmente este parámetro se podrá omitir. Si el servidor LDAP funciona sobre TLS (es decir, es un servidor LDAP seguro), la URL a indicar deberá ser </p> <div class=highlight><pre><span></span><code>-H ldaps://nomDnsServidor:nºpuerto
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>NOTA: Si el comando cliente (cualquiera de los que estudiaremos: <code>ldapadd</code>, <code>ldapsearch</code>, <code>ldapmodify</code>, etc) se ejecuta en la misma máquina donde está funcionando el servidor, en vez de conectar con éste mediante TCP (que es lo que pasa cuando se usa la url del tipo ldap://...) automáticamente utiliza sockets internos que emplean el mecanismo IPC, que es un sistema de intercomunicación entre procesos locales más óptimo para estos casos. Aunque ya hemos dicho que no sería necesario, si se quisiera especificar la url, en este caso entonces se debería escribir así: <code>ldapi://%2fruta%2fcarpeta%2ffichero.socket</code> (notar que el protocolo es "ldapi" y no "ldap" y que las "/" se sustituyen por "%2f").</p> </div> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>En el caso de contactar con un servidor LDAPS (es decir, funcionando sobre TLS), dicho servidor puede o bien ofrecer un certificado autofirmado o bien un certificado firmado por una determinada CA (Autoridad de Certificación). En el primer caso, para que los clientes admitan ese servidor como seguro se ha establecer previamente la variable de entorno <code>LDAPTLS_REQCERT</code> al valor "never" (simplemente precediendo el comando en cuestión con la expresión <code>LDAPTLS_REQCERT=never</code> ya sería suficiente). En el segundo caso, se ha de establecer previamente la variable de entorno <code>LDAPTLS_CACERT</code> indicando la ruta del certificado de la CA (simplemente precediendo el comando en cuestión con la expresión <code>LDAPTLS_CACERT=/etc/dirsrv/slapd-miservidor/ca.crt</code>, por ejemplo, ya sería suficiente). Para que estas variables sean permanentes, se pueden indicar dentro del archivo <code>/etc/openldap/ldap.conf</code></p> </div> </li> <li> <p><strong>-D cn=admin</strong>: Indica el "common name" de la cuenta de usuario (guardada en el propio servidor) con la que nos autenticaremos en el servidor LDAP para realizar la modificación del directorio; esta cuenta ha de tener privilegio para ello, así que usaremos la cuenta "admin" que creamos en la instalación del servidor.</p> </li> <li> <p><strong>-W</strong> : Solicita interactivamente la contraseña de la cuenta anterior. Otra opción sería indicar la contraseña como un parámetro más, así : </p> <p>-w contraseña (notar que en este caso la "w" es minúscula).</p> </li> <li> <p><strong>-f fichero.ldif</strong> : Indica el fichero cuyo contenido se desea agregar</p> </li> </ul> <h3 id=ejercicios-agregar-datos>Ejercicios Agregar Datos<a class=headerlink href=#ejercicios-agregar-datos title="Permanent link">&para;</a></h3> <p>1.- a) Crea un fichero llamado <code>base.ldif</code> con el contenido mostrado a continuación y seguidamente agrégalo al directorio con el comando: <code>ldapadd -D cn=admin -W -f base.ldif</code> . Con esto habrás generado dos entradas de tipo “unidad organizativas” que servirán para contener (a modo de “carpetas”) los usuarios y grupos que generaremos a continuación.</p> <div class=highlight><pre><span></span><code>dn: ou=usuarios,dc=midominio,dc=local 
objectClass: organizationalUnit 
ou: usuarios

dn: ou=grupos,dc=midominio,dc=local 
objectClass: organizationalUnit 
ou: grupos
</code></pre></div> <p>1.-b) Crea un fichero llamado <code>grupos.ldif</code> con el siguiente contenido y seguidamente agrégalo al directorio con un comando similar al del apartado anterior:</p> <div class=highlight><pre><span></span><code>dn: cn=grupoldap,ou=grupos,dc=midominio,dc=local 
objectClass: posixGroup 
cn: grupoldap 
gidNumber: 10000
</code></pre></div> <p>1.-c) Crea un fichero llamado <code>usuarios.ldif</code> con el siguiente contenido y seguidamente agrégalo al directorio con un comando similar al del apartado anterior:</p> <div class=highlight><pre><span></span><code>dn: uid=usu1ldap,ou=usuarios,dc=midominio,dc=local
objectClass: top
objectClass: inetOrgPerson
objectClass: posixAccount
objectClass: shadowAccount
uid: usu1ldap
sn: Lopez
givenName: Juan
cn: Juan Lopez
displayName: Juan Lopez
uidNumber: 3001
gidNumber: 10000
userPassword: XXX
gecos: Es muy tonto
loginShell: /bin/bash
homeDirectory: /home/jlopez
shadowExpire: -1
shadowFlag: 0
shadowWarning: 7
shadowMin: 8
shadowMax: 999999
shadowLastChange: 10877
mail: juan.lopez@gmail.com
postalCode: 29000

dn: uid=usu2ldap,ou=usuarios,dc=midominio,dc=local
objectClass: top
objectClass: inetOrgPerson
objectClass: posixAccount
objectClass: shadowAccount
uid: usu2ldap
sn: Perez
givenName: Perico
cn: Pedro Perez
displayName: Pedro Perez
uidNumber: 3002
gidNumber: 10001
userPassword: XXX
gecos: Es un crack
loginShell: /bin/bash
homeDirectory: /home/pperez
shadowExpire: -1
shadowFlag: 0
shadowWarning: 7
shadowMin: 8
shadowMax: 999999
shadowLastChange: 10877
mail: pedrito@yahoo.es
postalCode: 29001
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>Tal como se puede ver, cada objeto “usuario” está formado a partir de la unión de diferentes tipos predefinidos de objeto (posixAccount, shadowAccount, inetOgPerson), donde cada uno aporta un determinado conjunto de atributos: posixAccount incluye la información que encontraríamos en el archivo "/etc/passwd" clásico, shadowAccount incluye la información que encontraríamos en el archivo "/etc/shadow" clásico y inetOrgPerson incluye información extra del usuario dentro de la organización (como el correo, cód. Postal...).</p> </div> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>Hay que tener muy en cuenta que al añadir nuevos usuarios los valores de los atributos uidNumber y homeDirectory (además de userPassword) deben ser diferentes para cada usuario. Lo mismo ocurre con el atributo gidNumber para los grupos. Además, los valores de uidNumber y gidNumber no deben coincidir con el uid y gid de ningúnusuario y grupo local de los clientes.</p> </div> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>El valor del atributo userPassword está protegido por ACLs predefinidas del servidor para que tan solo el usuario administrador - o el propietario del objeto que contenga dicho atributo- pueda consultar su valor (hasheado). Internamente, los valores de todos atributos se almacenan en el backend seleccionado pero en el caso del atributo userPassword este almacenamiento se realiza del hash de la contraseña según el algoritmo predefinido que el servidor tenga configurado. Así pues, un intruso que tuviera acceso directo al backend no obtendría (de entrada) las contraseñas porque las tendría que "crackear". Este aspecto es independiente del hecho de que las conexiones entre cliente y servidor deberían siempre estar encriptadas mediante TLS para evitar el robo de la contraseña en tránsito.</p> <p>No obstante, alguien podría objetar que escribir la contraseña de los usuarios tal cual en un archivo ldif es un gran riesgo deseguridad. En realidad, así es como se recomienda que se escriba este valor para dejar al servidor LDAP realizar el hash de la forma que internamente requiera con las comprobaciones pertinentes. De todas formas, si se desea, es posible escribir el valor del atributo userPassword de forma que esté "hasheado". Para ello primero hay que utilizar alguna utilidad que nos genere el hash necesario; en el caso de usar 389DS disponemos del comando pwdhash , el cual, mediante su parámetro -s permite especificar el algoritmo hash deseado. Por ejemplo, para obtener el hash SHA-512 salteado (el mismo algoritmo que se utiliza actualmente para guardar las contraseñas hasheadas en el archivo "/etc/shadow" de la mayoría de distribuciones Linux) de la contraseña "hola" deberíamos ejecutarpwdhash -s SSHA512 hola El valor obtenido debería serasignado tal cual al campo userPassword; la parte entre llaves indica al servidor LDAP que dicho valor será un hash de ese tipo y que, por tanto, no deberá hashearlo él sino almacenarlo directamente</p> </div> <h3 id=buscar-informacion-ldapsearch>Buscar información - ldapsearch<a class=headerlink href=#buscar-informacion-ldapsearch title="Permanent link">&para;</a></h3> <p>Para comprobar si el contenido anterior se ha añadido correctamente, podemos usar el comando <code>ldapsearch</code> (también del paquete “ldap-utils”), el cual permite hacer una búsqueda en el directorio. La mayoría de veces necesitaremos indicar, además de los parámetros <code>-H ldap://nomDnsServidor:nopuerto</code>, <code>-D cn=admin</code> y <code>-W/-w contraseña</code> ya conocidos, otros como los siguientes:</p> <ul> <li> <p><strong>-LLL</strong> : Indica a ldapsearch que muestre la respuesta en modo "no verboso" (más fácil de leer)</p> </li> <li> <p><strong>d 1</strong> : d 1, d 2, ..... establece el <strong>nivel de debug</strong> y muestra errores detallados en el resultado del comando.</p> </li> <li> <p><strong>-b "dc=midominio,dc=local"</strong> : Indica el DN "base" a partir del cual se empezará la búsqueda por las entradas inferiores del árbol. El ejemplo anterior buscaría a partir de la entrada raíz "para abajo" por todas las subentradas. Pero no es necesario que la entrada raíz sea el DN "base": si, por ejemplo, escribiéramos <code>-b "ou=grupos,dc=midominio,dc=local"</code> entonces solo se buscaría a partir de la organizationalUnit "grupos" "para abajo" por las subentradas que contuviera.</p> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>NOTA: En el servidor 389DS, l'entrada "cn=config" pot fer-se servir com a DN base per obtenir tota la configuració del propi servidor</p> </div> </li> <li> <p><strong>-s {base | one | sub }</strong> : El comportamiento descrito en el párrafo anterior de buscar recursivamente todas las entradas por debajo de una entrada "base" dada (incluyendo ésta) es el comportamiento por defecto, que equivaldría a indicar el parámetro -s sub Pero otros valores de este parámetro modifican el "scope" de la búsqueda; por ejemplo, </p> <ul> <li>-s base solamente muestra información de la entrada marcada como "base" y nada más (es decir, no recorre ninguna rama del árbol)</li> <li>-s one solamente muestra información de las entradas directamente colgando de la entrada "base" pero nada más (es decir, sólo muestra las entradas "hijas": ni muestra entradas "nietas" ni la propia entrada "base")</li> </ul> </li> <li> <p><strong>"(atributo=valor)" "(atributo=valor)"</strong>... : Filtro que permite "quedarse", de todas las entradas recorridas, solo con las que contienen el atributo indicado con el valor indicado. Existen otros filtros más sofisticados que se pueden estudiar en el cuadro inferior. Si aparece este parámetro, ha de ir escrito después de cualquier otro parámetro de los anteriores. Si no aparece, todas las entradas recorridas serán "válidas" para mostrarse.</p> <div class="admonition note"> <p class=admonition-title>Nota</p> <ul> <li>is a special value representing “any possible value”. It can be used to build a "presence" filter that requests all objects where the attribute is present and has a valid value, but we do not care what the value is. For instance, by default, ldapsearch provides the filter "(objectClass=*)"; because all objects must have an objectClass, this filter is the equivalent to saying “all valid objects”.</li> </ul> </div> </li> <li> <p>atributo atributo ... : De la información encontrada en las entradas recorridas (y ya filtradas, si fuera el caso), se muestra solo aquellos atributos indicados. Si aparece este parámetro, ha de ir escrito después del filtro (si hubiera). Si no aparece -o se escribe "*"-, se mostrarán todos los atributos pertenecientes a las entradas recorridas (y ya filtradas si fuera el caso); en el caso de escribir "+" se mostrarán los metaatributos de la entradas recorridas (como la fecha de creación de la entrada, el usuario que la creó, etc).</p> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>To show what basedns are available, you can query the special ‘’ or blank rootDSE (Directory Server Entry) using "namingContexts" as the attribute to look up, like this:</p> <div class=highlight><pre><span></span><code>ldapsearch -D cn=admin -W -LLL -b &quot;&quot; -s base namingContexts
</code></pre></div> </div> </li> </ul> <p>2.- Ejecuta el comando <code>ldapsearch -D cn=admin -W -LLL -b "dc=midominio,dc=local" uid=usu1ldap sn givenName</code> Con este comando de ejemplo estaremos buscando un usuario con <code>uid=usu1ldap</code> y pediremos que nos muestre solo el contenido de los atributos sn y givenName. Comprueba que efectivamente sea así:</p> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>Es posible realizar consultas anónimas (es decir, sin necesidad de autenticarse) pero para ello sería necesario configurar el servidor 389DS convenientemente (ver para más información) y sustituir los parámetros -D y -W de ldapsearch por -x</p> </div> <p>*A filter can request objects whose attribute values are greater/less than a value by "(uid&gt;=test0005)" or "(uid&lt;=test0005)".If used with letters, it compares alphabetically.</p> <p><em>A filter can request a partial match of an attribute value on the object by using the ‘</em>’ operator (multiple times if necessary): "(uid=<em>005)" or "(uid=*st000</em>)". Note you should always have at least 3 characters in your substring filter, else indexes may not operate efficently.</p> <p>*Filters can be nested with AND (&amp;) or OR (|) conditions. Condition applies to all filters that follow within the same level of brackets, that is: (condition (attribute=value)(attribute=value)).</p> <ul> <li> <p>AND requires that for an object to match, all filter elements must match; this is the “intersection” operation and is written like this: "(&amp;(uid=test0006)(uid=guest0006))"</p> </li> <li> <p>OR filters will return the aggregate of all filters; this is the union operation so provided an object satisfies one condition of the OR, it will be part of the returned set; it's written like this: </p> <div class=highlight><pre><span></span><code>(|(uid=test0006)(uid=guest0007))
</code></pre></div> </li> </ul> <p>*A NOT filter acts to invert the result of the inner set. For example: "(!(uid=test0010))" Note you can’t list multiple parameters in a "not" condition: to combine NOT's you need to use this in conjunctionwith AND and OR.</p> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>NOTA: *You can nest AND, OR and NOT filters to produce more complex directed queries. For instance this query: <code>(&amp;(objectClass=person)(objectClass=posixAccount)(|(uid=test000*))(!(uid=test0001)))</code> would be equivalent to...:</p> <div class=highlight><pre><span></span><code>    (&amp;
    (objectClass=person)
    (objectClass=posixAccount)
    (|
    (uid=test000*)
        )
    (!(uid=test0001))
    )
</code></pre></div> <p>...and it expresses "All person whose name starts with test000* and not test0001".</p> </div> <p>Another example would be this: </p> <div class=highlight><pre><span></span><code>(|(&amp; (...K1...) (...K2...))(&amp; (...K3...) (...K4...)))
</code></pre></div> <p>which means </p> <div class=highlight><pre><span></span><code>(K1 AND K2) OR (K3 AND K4)
</code></pre></div> <h3 id=borrar-y-modificar-informacion-ldapdelete-y-ldapmodify>Borrar y modificar información ldapdelete y ldapmodify<a class=headerlink href=#borrar-y-modificar-informacion-ldapdelete-y-ldapmodify title="Permanent link">&para;</a></h3> <p>Otros comandos importantes del paquete “ldap-util” son ldapdelete y ldapmodify. Un ejemplo del primero podría ser: </p> <div class=highlight><pre><span></span><code>ldapdelete -D cn=admin -W &quot;uid=usu2ldap,ou=usuarios,dc=midominio,dc=local&quot;
</code></pre></div> <p>donde se ha indicado el DN del elemento que se desea eliminar. </p> <p>El segundo tiene tres formas de modificar una entrada: cambiando el valor de un atributo , añadiendo un nuevo atributo o eliminando un atributo existente:</p> <ol> <li> <p>-Para cambiar, por ejemplo, el atributo uidNumber de un usuario, podríamos ejecutar el comando </p> <div class=highlight><pre><span></span><code>ldapmodify -D cn=admin -W -f fichero.cambios
</code></pre></div> <p>donde <code>fichero.cambios</code> debería tener un contenido como el siguiente (donde se especifica qué entradas se quieren modificar y de qué manera):</p> <div class=highlight><pre><span></span><code>dn:uid=usu2ldap,ou=usuarios,dc=midominio,dc=local
changetype:modify
replace:uidNumber
uidNumber:3002
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>NOTA: La información anterior la podríamos haber introducido directamente desde la entrada estándar si no hubiéramos especificado el parámetro -f.</p> </div> </li> <li> <p>-Para añadir un atributo nuevo (en este caso llamado jpegPhoto) deberíamos ejecutar el mismo comando ldapmodify anterior pero ahora <code>fichero.cambios</code> debería tener un contenido como este:</p> <div class=highlight><pre><span></span><code>dn:uid=usu2ldap,ou=usuarios,dc=midominio,dc=local
changetype: modify
add:jpegPhoto
jpegPhoto:file:///tmp/foto.png
</code></pre></div> </li> <li> <p>-Para eliminar un atributo (en este caso llamado jpegPhoto) deberíamos ejecutar el mismo comando ldapmodify anterior pero ahora "fichero.cambios" debería tener un contenido como este:</p> <div class=highlight><pre><span></span><code>dn:uid=usu2ldap,ou=usuarios,dc=midominio,dc=local
changetype: modify
delete:jpegPhoto
</code></pre></div> </li> </ol> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>ya que la configuración del servidor 389DS es troba accessible en forma directori, la comanda ldapmodify es podria utilitzar per modificar aquesta configuració "en calent". Per exemple, sabent que les directives "nsslapd-ldapilisten" i "nsslapd-ldapifilepath" activen el mecanisme LDAPI i especifiquen la ruta del socket adient, respectivament, per activar aquesta característica (que ja ve de sèrie activada, però és només un exemple), podríem fer com sempre: </p> <div class=highlight><pre><span></span><code>    ldapmodify -D cn=admin -W -f fichero.cambios
</code></pre></div> <p>pero ara el contingut del fitxer "fichero.cambios" seria:</p> <div class=highlight><pre><span></span><code>    dn: cn=config
    changetype: modify
    replace: nsslapd-ldapilisten
    nsslapd-ldapilisten: on
    -
    add: nsslapd-ldapifilepath
    nsslapd-ldapifilepath: /var/run/slapd-exemple.socket
</code></pre></div> </div> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>NOTA: En realitat, per afegir entrades i per eliminar entrades no caldria fer servir les comandes ldapadd i ldapdelete respectivament, ja que amb ldapmodify ja n'hi hauria prou. En el cas de voler afegir una entrada el fitxer "fichero.cambios" hauria de tenir un contingut semblant al següent...:</p> <div class=highlight><pre><span></span><code>    dn: &lt;dn to add&gt;
    changetype: add
    objectclass: ...
    attribute1: ...
    attribute2: ...
</code></pre></div> <p>...i en el cas de voler eliminar una entrada, el seu contingut hauria de ser semblant a aquest:</p> <div class=highlight><pre><span></span><code>    dn: &lt;dn to delete&gt;
    changetype: delete
</code></pre></div> </div> <p>3.-a) Modifica el atributo “gecos” del usuario Juan López para que muestre la descripción: “Ronca”. Comprueba mediante ldapsearch que el cambio lo has realizado correctamente</p> <p>b) Añade el atributo “jpegPhoto” del usuario Juan López indicando la ruta (ficticia) de su foto identificativa. Comprueba mediante ldapsearch que el cambio lo has realizado correctamente</p> <p>c) Elimina el atributo “jpegPhoto” anterior.Comprueba mediante ldapsearch que el cambio lo has realizado correctamente</p> <h2 id=acis>ACIs<a class=headerlink href=#acis title="Permanent link">&para;</a></h2> <p>By default, the directory server denies access to everything. The administrator must allow certain types of access to certain resources for users to be able to use the directory server. The operational attribute aci is used for access control. This attribute can be applied to any entry in the directory tree, and has subtree scope: it applies to the entry that contains it and any children and descendants of that entry.</p> <p>An ACI consists of 3 parts: a target, a subject, and the type of access (permission):</p> <ul> <li> <p>The target represents the entry or resource is being protected. The target specification should be a DN (written with the syntax "ldap:///DN"), but can be stretched by specifying one or more atributes to restrict its application, or even a LDAP filter. Writing a target it's optional: by default it applies to all entries in subtree scope of the entry which ACI is defined (that's is which contains the aciattribute).</p> </li> <li> <p>The subject represents the entity which is granted (or denied) access to the target. The subject may be userdn="ldap:///DN" or groupdn="ldap:///DN" (where DN can be any DN of a user or a group, respectively). It also can be some of these values: userdn="ldap:///self" (to specify the user who has done the query), userdn="ldap:///anyone" (to specify anonymous binds), or userdn="ldap:///all" (to specify any authenticated user). Modifiers can be used to allow or deny access based on the client IP address or hostname, access time, or connection type (encrypted or not). You can also use attributes to specify a subject with userattr="attrname" syntax.</p> </li> <li> <p>The permission is any combination of the following keywords:</p> <ul> <li><strong>read</strong> Indicates whether directory data may be read. Indicates whether directory data may be changed or created. This permission also allows write directory data to be deleted but not the entry itself: to delete an entire entry, the user must have delete permissions.</li> <li><strong>search</strong> Indicates whether the directory data can be searched. This differs from the read permission in that read allows directory data to be viewed if it is returned as part of a search operation. For example, if searching for common names is allowed as well as read permission for a person's room number, then the room number can be returned as part of the common namesearch, but the room number itself cannot be used as the subject of a search. Use this combination to prevent people from searching the directory to see who sits in a particular room.</li> <li><strong>add</strong> Indicates whether child entries beneath the targeted entry can be created.</li> <li><strong>delete</strong> Indicates whether targeted entry can be deleted.</li> <li><strong>all</strong> Means all types of above accesses</li> </ul> <p>The permission is modified by using allow or deny If there are conflicts between what is allowed and what is denied, the deny wins. Better explained: when a user attempts any kind of access to a directory entry, Directory Server applies the precedence rule. This rule states that when two conflicting permissions exist, the permission that denies access always takes precedence over the permission that grants access. For example, if write permission is denied at the directory's root level, and that permission is applied to everyone accessing the directory, then no user can write to the directory regardless of any other permissions that may allow write access. To allow a specific user write permissions to the directory, the scope of the original deny-for-write has to be set so that it does not include that user. Then, there must be additional allow-for-write permission for the user in question.</p> <p>The aci attribute has the following syntax (version 3.0 and acl "name" values are mandatory and, as it can be seen, several targets can be specified as well as several allow(permission)(subject)... values):</p> <div class=highlight><pre><span></span><code>aci: (target=&quot;ldap:///DN)(target=...)(version 3.0; acl &quot;name&quot;; allow(per,miss,ion)(userdn=&quot;ldap:///subject&quot;); allow...;)
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>NOTA: Some interesting modifiers to add in a ACI to restrict targeted entries are "targetattr" and "targetfilter" keywords, (which must be specified after these targeted entries). Another interesting keyword is "targetscope"</p> </div> <p>For instance, in the following example, the ACI states that "bjensen" has rights to modify all attributes in her own directory entry: </p> <div class=highlight><pre><span></span><code>    aci: (target=&quot;ldap:///uid=bjensen,dc=example,dc=com&quot;)(targetattr=&quot;*&quot;)(targetscope=&quot;subtree&quot;)(version 3.0; acl &quot;example&quot;; allow (write)(userdn=&quot;ldap:///self&quot;);)
</code></pre></div> </li> </ul> <p>Access control rules can be placed on any entry in the directory although administrators often place access control rules on entries with the object classes "domainComponent", "organizationalUnit", "inetOrgPerson", or "group". You can add/replace/delete an aci attribute like any other using LDIF files and ldapmodify command. For instance, this content would add the permission of anonymous searches/reads to all the directory's content:</p> <div class=highlight><pre><span></span><code>dn:dc=midominio,dc=local
changetype: modify
add:aci
aci: (targetattr!=&quot;userPassword&quot;)(version 3.0; acl &quot;xxx&quot;; allow(read,search)(userdn=&quot;ldap:///anyone&quot;);)
</code></pre></div> <p>The aci attribute is a multi-valued operational attribute that can be read and modified by directory users. Therefore, the ACI attribute itself should be protected by ACIs. Administration users are usually given full access to the aci attribute doing <code>ldapsearch -D cn=admin -W -b entryDN -s base "(objectclass=*)" aci</code></p> <h2 id=login-ldap-desde-cliente-con-sssd>Login LDAP desde cliente con SSSD<a class=headerlink href=#login-ldap-desde-cliente-con-sssd title="Permanent link">&para;</a></h2> <h3 id=introduccion>Introducción<a class=headerlink href=#introduccion title="Permanent link">&para;</a></h3> <p>En Linux se puede utilizar el demonio SSSD para autenticar al usuario contra servidores LDAP remotos (Combinados con servidores Kerberos o no) además de identificarlos. Mediante SSSD todo el proceso de autenticación / identificación del usuario se produce en el cliente de una forma homogénea y coherente, independientemente de la distribución Linux allí instalada.</p> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>Además de autenticarse contra servidores LDAP "pelados" o combinados con Kerberos, el demonio SSSD también permite autenticar usuarios contra sistemas integrales empresariales como FreeIPA o Active Directory (los cuales internamente se basan en LDAP / Kerberos). En cambio, no puede trabajar (todavía) con SGBDs o servidores RADIUS como fuente de autenticación / identificación</p> </div> <p>Una gran ventaja de utilizar SSSD en vez de los módulos PAM / NSS "standalone" individualmente es que este demonio guarda una caché (en la carpeta <code>/var/lib/sss/db</code>) que permite el acceso "Offline" a / los sistema/s cliente/s (sin tener ninguna cuenta local diferente) en el caso de que el servidor LDAP / Kerberos remoto no esté disponible en ese momento o, en caso de que sí, disminuir su carga.</p> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>NOTA: El demonio SSSD también ofrece una interfaz D-Bus para poder interactuar con el sistema mediante este método y así obtener, por ejemplo, información extra sobre el usuario (tal como veremos).</p> </div> <p>El demonio SSSD proporciona sus propios módulos PAM y NSS para conectar con servidores LDAP / Kerberos y LDAP, respectivamente, los cuales son diferentes de los módulos "standalone" pam_ldap / pam_krb5 y nss_ldap ya conocidos. Esto es porque SSSD ofrece funcionalidades extra como un framework conjunto y librerías homogéneas, un mecanismo de caché de credenciales -similar al que ofrecía el demonio ncsd, ya obsoleto-, una interfaz D-Bus, etc. Para que los programas de inicio de sesión (login, gdm, su, sudo, ssh, etc) utilicen los módulos PAM / NSS propios de SSSD deberemos realizar un conjunto de configuraciones al sistema que explicaremos a continuación.</p> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>NOTA: En Ubuntu hay que instalar el paquete "sssd" (es decir, el demonio SSSD no viene preinstal.lat "de fábrica"). Afortunadamente, al instalar este paquete ya se instalarán automáticamente como dependencia el resto de paquetes que podamos necesitar, como los conectores con los diferentes providers: "sssd-ldap", "sssd-krb5", "sssd-ipa", etc. En Fedora todos estos paquetes ya vienen instalados "de fábrica".</p> </div> <h3 id=configuracion-de-sssd>Configuración de SSSD:<a class=headerlink href=#configuracion-de-sssd title="Permanent link">&para;</a></h3> <p>SSSD lee los archivos de configuración en este orden: primero lee el archivo primario <code>/etc/sssd/sssd.conf</code> y luego, otros archivos <code>* .conf</code> en <code>/etc/sssd/conf.d</code> (en orden alfabético). Si aparece el mismo parámetro en múltiples archivos de configuración, SSSD usa el último parámetro de lectura. Esto le permite usar el valor predeterminado <code>/etc/sssd/sssd.conf</code> en todos los clientes y aagregar configuraciones adicionales en otros archivos de configuración para extender la funcionalidad individualmente por cliente. </p> <div class="admonition warning"> <p class=admonition-title>Atención</p> <p>Todos estos archivos deben ser propiedad de <code>root:root</code> y tener permisos <code>600</code> de lo contrario el servicio sssd no se iniciará.</p> </div> <p>Los proveedores de autenticación e identidad se configuran como "dominios" en el archivo de configuración SSSD.</p> <p>Puede configurar varios dominios para SSSD pero al menos un dominio debe estar configurado, de lo contrario, SSSD no arrancará. Un solo dominio se puede usar como:</p> <ul> <li>Un proveedor de autenticación (para solicitudes de autenticación)</li> <li>Un proveedor de identidad (para información del usuario)</li> <li>Un proveedor de control de acceso (para solicitudes de autorización). No los estudiaremos aquí.</li> <li>Una combinación de estos proveedores (si todas las operaciones correspondientes se realizan dentro de un solo servidor)</li> </ul> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>También hay lo que se llama un proveedor "proxy". Este proveedor funciona como un intermediario de retransmisión entre SSSD y recursos que SSSD de otra forma no podrían usar. Cuando se usa un proveedor proxy, SSSD se conecta al servicio proxy, y el proxy carga las bibliotecas especificadas. Con un proveedor de proxy, puede configurar SSSD para utilizar métodos de autenticación alternativos, como un escáner de huellas digitales, entre otras cosas. </p> </div> <h4 id=seccion-sssd>Sección [sssd]<a class=headerlink href=#seccion-sssd title="Permanent link">&para;</a></h4> <p>En el archivo "sssd.conf" debe haber al menos una sección general [sssd] y una sección para cada dominio. Debajo de la sección [sssd] debemos tener en cuenta esta línea (más información en man sssd.conf):</p> <div class=highlight><pre><span></span><code>domains =
</code></pre></div> <p>Especifica una lista separada por comas de dominios definidos en el orden que desee para ser consultado Por lo tanto, si un dominio no aparece en esta lista, no se consultará aunque esté definido en el archivo "sssd.conf"</p> <h4 id=seccion-domainxxx>Sección [domain/xxx]<a class=headerlink href=#seccion-domainxxx title="Permanent link">&para;</a></h4> <p>Las secciones correspondientes a dominios definidos deben titularse así <code>[domain/xxx]</code> donde "xxx" puede ser cualquier cosa. Debajo de una sección de dominio debemos tener en cuenta estas líneas (más en man sssd.conf):</p> <ul> <li><strong>Line "auth_provider =</strong>": establece el proveedor de autenticación utilizado para el dominio. Los valores posibles son: - "ldap", "krb5", "ipa", "ad" o "proxy", entre otros. Dependiendo del proveedor elegido, habrá sea ​​necesario escribir líneas más específicas (ver man sssd-ldap, man sssd-krb5, man sssd-ipa u man sssd-ad para más detalles).</li> <li>-Line <strong>"id_provider ="</strong>: establece el proveedor de identidad utilizado para el dominio. Los valores posibles son: "ldap", "archivos", "ipa", "anuncio" o "proxy". Dependiendo del proveedor elegido, habrá que escribir líneas más específicas (vea man sssd-ldap, man sssd-files, man sssd-ipa o man sssd-ad para más detalles).</li> <li>-Line <strong>"access_provider ="</strong>: establece el proveedor de acceso utilizado para el dominio, que se utiliza para evaluar qué usuarios tienen acceso al sistema. Incluso si un usuario se autentica con éxito, si no Si cumple con los criterios proporcionados por el proveedor de acceso, su acceso será denegado. Los valores posibles son: "ldap", "krb5", "simple", "ipa", "ad", "proxy", "denegar" (siempre niega el acceso) o "permitir" (por defecto,siempre permite el acceso). Dependiendo del proveedor elegido, habrá que escribir más.</li> <li><strong>líneas específicas</strong> (vea man sssd-ldap, man sssd-krb5, man sssd-simple, man sssd-ipa o man sssd-ad para detalles).</li> </ul> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>NOTA: El proveedor de acceso "simple" permite o niega el acceso basado en una lista de nombres de usuario o grupos. Permite restringir el acceso a máquinas específicas. Por ejemplo, en las computadoras portátiles de la compañía, puede usar el proveedor de acceso simple para restringir el acceso solo a un usuario específico o un grupo específico. Otros usuarios o grupos no podrán iniciar sesión incluso si se autentican correctamente en el proveedor de autenticación configurado.</p> <div class=highlight><pre><span></span><code>[domain/nombre_dominio]
...
access_provider = simple
simple_allow_users = usuario1, usuario2
#simple_allow_groups = group1
</code></pre></div> </div> <p>Si el proveedor de acceso que está utilizando es el "ldap", también puede especificar un filtro de control de acceso LDAP que el usuario debe coincidir para poder acceder al sistema.</p> <div class=highlight><pre><span></span><code>[domain/domain_name]
...
access_provider = ldap
ldap_access_filter = (memberOf=cn=allowedusers,ou=Groups,dc=example,dc=com)
#ldap_access_order = filter, host, authorized_service
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>NOTA: La directiva ldap_access_order puede tener estos valores (se pueden indicar por orden de aplicación):</p> <div class=highlight><pre><span></span><code>*&quot;filter&quot; : Se usa el filtro indicado en ldap_access_filter como criterio. Valor per defecto
*&quot;host&quot; : Se usa el atributo &quot;host&quot; en el directorio como criterio
*&quot;authorized_service&quot; : Se usa el valor de &quot;authorizedService&quot; en el directorio como criterio
*&quot;expire&quot; : Se usa el valor de la directiva ldap_account_expire_policy como criterio
</code></pre></div> </div> <ul> <li> <p><strong>-Line "chpass_provider =</strong>": establece el proveedor que debe manejar las operaciones de cambio de contraseña para el dominio. Los valores posibles son: "ldap", "krb5", "ipa", "ad", "proxy" o "none" (esto explícitamente deshabilita la capacidad de cambiar las contraseñas). Si no se especifica esta línea, entonces se usa por defecto el valor especificado en la línea "id_provider". Ver man sssd-sudo para detalles </p> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>Nota SSSD no almacena en caché las credenciales de usuario de forma predeterminada. Entonces, al procesar solicitudes de autenticación,de manera predeterminada, SSSD siempre contacta al proveedor de identidad; si el proveedor no está disponible, la autenticación de usuario falla Para garantizar que las credenciales se almacenen localmente después de autenticar con éxito a los usuarios para que puedan mantener autenticación incluso cuando el proveedor de identidad no está disponible, debe habilitar el almacenamiento en caché de credenciales local agregando la línea cache_credentials = true debajo de la sección de dominio correspondiente. Por defecto, la credencial la memoria caché nunca caduca: si desea que sssd elimine las credenciales almacenadas en caché, account_cache_expiration = line hacer que caduquen después del número de días especificado.</p> </div> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>Cuando un usuario intenta una operación de sudo, ya sabemos que SSSD contacta al proveedor de identidad / sudo definido en el dominio para obtener la información requerida sobre la configuración actual de sudo. Si la línea cache_credentials se establece en true,también almacenará esa información de sudo en una memoria caché, para que los usuarios puedan realizar operaciones de sudo incluso cuando LDAP / IPA / AD El servidor está fuera de línea.</p> </div> </li> </ul> <h4 id=secciones-opcionales-pam-y-o-nss>Secciones opcionales [pam] y / o [nss]<a class=headerlink href=#secciones-opcionales-pam-y-o-nss title="Permanent link">&para;</a></h4> <p>Las secciones opcionales [pam] y / o [nss] también pueden aparecer en el archivo "sssd.conf". Podrían ser utilizadas para configurar algunos aspectos del comportamiento de los módulos PAM o NSS de SSSD, respectivamente. Por ejemplo, si se quiere configurar un límite de tiempo (en días) para cuánto tiempo SSSD permite la autenticación sin conexión si el proveedor de identificación no está disponible, puede usar la línea <code>offline_credentials_expiration =</code> debajo de la sección <code>[pam]</code> para especificar ese límite de tiempo. Otras líneas interesantes para especificar debajo de la sección <code>[pam]</code> son <code>offline_failed_login_attempts =</code>, <code>offline_failed_login_delay =</code> o <code>reconnection_retries</code>, entre otros.</p> <p>Igualmente, debajo de la sección <code>[nss]</code> algunas líneas interesantes que merecen atención son <code>filter_groups =</code> y <code>filter_users =</code> (que excluye a ciertos usuarios, por defecto, solo "root") de ser extraídos del backend NSS Esto es particularmente útil para las cuentas del sistema .; esta opción también se puede establecer por dominio o incluir nombres totalmente calificados para filtrar solo usuarios del dominio en particular), <code>entry_cache_timeout =</code> (que especifica cuántos segundos, por defecto 5400- debe considerar sssd entradas válidas antes de preguntar al NSS backend otra vez),</p> <div class=highlight><pre><span></span><code>&quot;entry_cache_nowait_percentage =&quot;,
&quot;override_homedir =&quot;,
&quot;override_shell =&quot;,
&quot;allowed_shells =&quot;, etc.
</code></pre></div> <h4 id=ejemplo-1-un-servidor-ldap-como-proveedor-de-autenticacion-e-identidad>Ejemplo 1 (un servidor LDAP como proveedor de autenticación e identidad)<a class=headerlink href=#ejemplo-1-un-servidor-ldap-como-proveedor-de-autenticacion-e-identidad title="Permanent link">&para;</a></h4> <p>Un fichero "sssd.conf" podría ser algo así:</p> <div class=highlight><pre><span></span><code>[sssd]
domains=pepito
[domain/pepito]
auth_provider=ldap
id_provider=ldap
ldap_uri=ldaps://ldapserver.example.com
ldap_search_base=dc=example,dc=com
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>SSSD always uses an encrypted channel for authentication, which ensures that passwords are never sent over the network unencrypted but forces the LDAP server to run over TLS. If this LDAP server used a self-signed certificate, you must add the line <code>ldap_tls_reqcert=allow</code> in the <code>sssd.conf</code> file so that client doesn't reject it. If this LDAP used a ca-signed certificate instead, you should add the line <code>ldap_tls_cacert = /etc/pki/tls/certs/ca-bundle.crt</code> instead (pointing to the right CA's bundle file in each case). Anyway, if you wanted identity lookups (such as commands based on the id or getent utilities) were also encrypted (or if LDAP server only runs over TLS), you should add the "<code>ldap_id_use_start_tls =true</code> line.</p> </div> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>If LDAP server's configuration requires that queries to LDAP directory have to be authenticated, you should add the <code>ldap_default_bind_dn= cn=admin</code> and <code>ldap_default_authtok= 12345</code> lines to specify which user ("cn=admin" in this example) and password ("12345" in this example) should be used to do these queries, respectively.</p> </div> <h4 id=example-2-a-kdc-server-as-authentication-provider-and-a-ldap-server-as-identity-provider>Example 2 (a KDC server as authentication provider and a LDAP server as identity provider)<a class=headerlink href=#example-2-a-kdc-server-as-authentication-provider-and-a-ldap-server-as-identity-provider title="Permanent link">&para;</a></h4> <p>A suitable sssd.conf file could be like this: [sssd] domains=pepito [domain/pepito] auth_provider=krb5 krb5_server=kdc.example.com krb5_realm=EXAMPLE.COM id_provider=ldap ldap_uri= ... ldap_search_base= ...</p> <div class="admonition note"> <p class=admonition-title>Nota</p> <p>NOTA: If the Change Password service is not running on the KDC specified in "krb5_server" or "krb5_backup_server" lines, you can use the "krb5_passwd" line to specify the server where the service is running or a chpass_provider instead.</p> </div> <hr> <div class=md-source-date> <small> Última actualización: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2020-12-17T00:42:44+00:00 locale=es></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2020-12-17</span> </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Pie> <a href=../../hardware/raspberry/ class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Anterior </span> Raspberry </div> </div> </a> <a href=../Autenticaci%C3%B3n%20e%20Identificaci%C3%B3n%20de%20usuarios%20con%20LDAP/ class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Siguiente </span> Autenticación/Identificación de usuarios con LDAP </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2016 - 2020 Javier Antó </div> </div> <div class=md-footer-social> <a href=https://github.com/javierobcn target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href="https://www.youtube.com/channel/UCzgyG0bgwcu14KuS9sbUHMw/playlists?view_as=subscriber" target=_blank rel=noopener title=www.youtube.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg> </a> <a href=https://twitter.com/javierobcn target=_blank rel=noopener title=twitter.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> </div> </div> </div> </footer> </div> <script src=../../../../assets/javascripts/vendor.0ac82a11.min.js></script> <script src=../../../../assets/javascripts/bundle.f81dfb4d.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copiar al portapapeles", "clipboard.copied": "Copiado al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "B\u00fasqueda", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.term.missing": "Falta"}</script> <script>
        app = initialize({
          base: "../../../..",
          features: ['navigation.tabs'],
          search: Object.assign({
            worker: "../../../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> <script src=../../../../js/timeago.min.js></script> <script src=../../../../js/timeago_mkdocs_material.js></script> </body> </html>